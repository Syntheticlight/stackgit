const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./js/c4Diagram-3d4e48cf.DouFeKPC.js","./js/svgDrawCommon-08f97a94.CcK4MKP7.js","./js/flowDiagram-66a62f08.DzG7qElV.js","./js/flowDb-956e92f1.rdC30phO.js","./js/graph.O0VMU7sx.js","./js/layout.DLH1x7q9.js","./js/styles-c10674c1.DC-242U2.js","./js/index-3862675e.BEo0_-OB.js","./js/clone.Cji5ZcCf.js","./js/edges-e0da2a9e.Ckjt4cOk.js","./js/createText-2e5e7dd3.BhcwCdUg.js","./js/line.B_SdL34a.js","./js/array.DmjLdZ15.js","./js/path.fIqg70tb.js","./js/channel.DNx0dM15.js","./js/flowDiagram-v2-96b9c2cf.CiGtoNOY.js","./js/erDiagram-9861fffd.C-hnhnW1.js","./js/ganttDiagram-c361ad54.CB91MpOr.js","./js/linear.B1r4CbsZ.js","./js/init.C0SZ43gy.js","./js/pieDiagram-8a3498a8.B849dUzX.js","./js/arc.Cly86oxZ.js","./js/ordinal.DFPcmM88.js","./js/quadrantDiagram-120e2f19.CVAB5zZg.js","./js/xychartDiagram-e933f94c.CeTAjf4F.js","./js/requirementDiagram-deff3bca.B_SQ9inR.js","./js/sequenceDiagram-704730f1.BzQYAYnT.js","./js/classDiagram-70f12bd4.Cnt1nwHB.js","./js/styles-9a916d00.6lqx44nC.js","./js/classDiagram-v2-f2320105.DKaqRlN3.js","./js/stateDiagram-587899a1.D-2UTZzh.js","./js/styles-6aaf32cf.oAKhk6XY.js","./js/stateDiagram-v2-d93cdb3a.D7TyF2Eh.js","./js/journeyDiagram-49397b02.D69ELXf0.js","./js/flowchart-elk-definition-4a651766.BjAZRXyX.js","./js/timeline-definition-85554ec2.Dm30c-qR.js","./js/mindmap-definition-fc14e90a.D7PfG8e_.js","./js/sankeyDiagram-04a897e0.WD0LVGPs.js","./js/Tableau10.B3EzvwxR.js","./js/blockDiagram-38ab4fdb.nWJ64UqB.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
// @__NO_SIDE_EFFECTS__
function n(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r={},i=[],o=()=>{},a=()=>!1,s=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(// uppercase letter
e.charCodeAt(2)>122||e.charCodeAt(2)<97),l=e=>e.startsWith("onUpdate:"),c=Object.assign,u=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,d=(e,t)=>h.call(e,t),p=Array.isArray,f=e=>"[object Map]"===x(e),m=e=>"[object Set]"===x(e),g=e=>"[object Date]"===x(e),v=e=>"function"==typeof e,y=e=>"string"==typeof e,b=e=>"symbol"==typeof e,_=e=>null!==e&&"object"==typeof e,w=e=>(_(e)||v(e))&&v(e.then)&&v(e.catch),k=Object.prototype.toString,x=e=>k.call(e),C=e=>"[object Object]"===x(e),S=e=>y(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,T=n(
// the leading comma is intentional so empty string "" is also included
",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),E=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},I=/-(\w)/g,A=E((e=>e.replace(I,((e,t)=>t?t.toUpperCase():"")))),D=/\B([A-Z])/g,B=E((e=>e.replace(D,"-$1").toLowerCase())),L=E((e=>e.charAt(0).toUpperCase()+e.slice(1))),M=E((e=>e?`on${L(e)}`:"")),F=(e,t)=>!Object.is(e,t),O=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},P=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},N=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let j;const z=()=>j||(j="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function R(e){if(p(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=y(r)?H(r):R(r);if(i)for(const e in i)t[e]=i[e]}return t}if(y(e)||_(e))return e}const q=/;(?![^(]*\))/g,$=/:([^]+)/,U=/\/\*[^]*?\*\//g;function H(e){const t={};return e.replace(U,"").split(q).forEach((e=>{if(e){const n=e.split($);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function W(e){let t="";if(y(e))t=e;else if(p(e))for(let n=0;n<e.length;n++){const r=W(e[n]);r&&(t+=r+" ")}else if(_(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const G=n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function V(e){return!!e||""===e}function Y(e,t){if(e===t)return!0;let n=g(e),r=g(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=b(e),r=b(t),n||r)return e===t;if(n=p(e),r=p(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Y(e[r],t[r]);return n}(e,t);if(n=_(e),r=_(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!Y(e[n],t[n]))return!1}}return String(e)===String(t)}function K(e,t){return e.findIndex((e=>Y(e,t)))}const X=e=>!(!e||!0!==e.__v_isRef),Z=e=>y(e)?e:null==e?"":p(e)||_(e)&&(e.toString===k||!v(e.toString))?X(e)?Z(e.value):JSON.stringify(e,J,2):String(e),J=(e,t)=>X(t)?J(e,t.value):f(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],r)=>(e[Q(t,r)+" =>"]=n,e)),{})}:m(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>Q(e)))}:b(t)?Q(t):!_(t)||p(t)||C(t)?t:String(t),Q=(e,t="")=>{var n;
// Symbol.description in es2019+ so we need to cast here to pass
// the lib: es2016 check
return b(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let ee,te;class ne{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ee,!e&&ee&&(this.index=(ee.scopes||(ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}
/**
   * Resumes the effect scope, including all child scopes and effects.
   */resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ee;try{return ee=this,e()}finally{ee=t}}}
/**
   * This should only be called on non-detached scopes
   * @internal
   */on(){ee=this}
/**
   * This should only be called on non-detached scopes
   * @internal
   */off(){ee=this.parent}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}const re=new WeakSet;class ie{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ee&&ee.active&&ee.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,re.has(this)&&(re.delete(this),this.trigger()))}
/**
   * @internal
   */notify(){2&this.flags&&!(32&this.flags)||8&this.flags||le(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,we(this),he(this);const e=te,t=ve;te=this,ve=!0;try{return this.fn()}finally{de(this),te=e,ve=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)me(e);this.deps=this.depsTail=void 0,we(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?re.add(this):this.scheduler?this.scheduler():this.runIfDirty()}
/**
   * @internal
   */runIfDirty(){pe(this)&&this.run()}get dirty(){return pe(this)}}let oe,ae,se=0;function le(e,t=!1){if(e.flags|=8,t)return e.next=ae,void(ae=e);e.next=oe,oe=e}function ce(){se++}function ue(){if(--se>0)return;if(ae){let e=ae;for(ae=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;oe;){let n=oe;for(oe=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=r}}if(e)throw e}function he(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function de(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),me(r),ge(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function pe(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(fe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function fe(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===ke)return;e.globalVersion=ke;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!pe(e))return void(e.flags&=-3);const n=te,r=ve;te=e,ve=!0;try{he(e);const n=e.fn(e._value);(0===t.version||F(n,e._value))&&(e._value=n,t.version++)}catch(i){throw t.version++,i}finally{te=n,ve=r,de(e),e.flags&=-3}}function me(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)me(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function ge(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ve=!0;const ye=[];function be(){ye.push(ve),ve=!1}function _e(){const e=ye.pop();ve=void 0===e||e}function we(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=te;te=void 0;try{t()}finally{te=e}}}let ke=0;class xe{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ce{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!te||!ve||te===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==te)t=this.activeLink=new xe(te,this),te.deps?(t.prevDep=te.depsTail,te.depsTail.nextDep=t,te.depsTail=t):te.deps=te.depsTail=t,Se(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=te.depsTail,t.nextDep=void 0,te.depsTail.nextDep=t,te.depsTail=t,te.deps===t&&(te.deps=e)}return t}trigger(e){this.version++,ke++,this.notify(e)}notify(e){ce();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{ue()}}}function Se(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Se(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Te=new WeakMap,Ee=Symbol(""),Ie=Symbol(""),Ae=Symbol("");function De(e,t,n){if(ve&&te){let t=Te.get(e);t||Te.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Ce),r.map=t,r.key=n),r.track()}}function Be(e,t,n,r,i,o){const a=Te.get(e);if(!a)return void ke++;const s=e=>{e&&e.trigger()};if(ce(),"clear"===t)a.forEach(s);else{const i=p(e),o=i&&S(n);if(i&&"length"===n){const e=Number(r);a.forEach(((t,n)=>{("length"===n||n===Ae||!b(n)&&n>=e)&&s(t)}))}else switch((void 0!==n||a.has(void 0))&&s(a.get(n)),o&&s(a.get(Ae)),t){case"add":i?o&&s(a.get("length")):(s(a.get(Ee)),f(e)&&s(a.get(Ie)));break;case"delete":i||(s(a.get(Ee)),f(e)&&s(a.get(Ie)));break;case"set":f(e)&&s(a.get(Ee))}}ue()}function Le(e){const t=gt(e);return t===e?t:(De(t,0,Ae),ft(e)?t:t.map(vt))}function Me(e){return De(e=gt(e),0,Ae),e}const Fe={__proto__:null,[Symbol.iterator](){return Oe(this,Symbol.iterator,vt)},concat(...e){return Le(this).concat(...e.map((e=>p(e)?Le(e):e)))},entries(){return Oe(this,"entries",(e=>(e[1]=vt(e[1]),e)))},every(e,t){return Ne(this,"every",e,t,void 0,arguments)},filter(e,t){return Ne(this,"filter",e,t,(e=>e.map(vt)),arguments)},find(e,t){return Ne(this,"find",e,t,vt,arguments)},findIndex(e,t){return Ne(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ne(this,"findLast",e,t,vt,arguments)},findLastIndex(e,t){return Ne(this,"findLastIndex",e,t,void 0,arguments)},
// flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement
forEach(e,t){return Ne(this,"forEach",e,t,void 0,arguments)},includes(...e){return ze(this,"includes",e)},indexOf(...e){return ze(this,"indexOf",e)},join(e){return Le(this).join(e)},
// keys() iterator only reads `length`, no optimisation required
lastIndexOf(...e){return ze(this,"lastIndexOf",e)},map(e,t){return Ne(this,"map",e,t,void 0,arguments)},pop(){return Re(this,"pop")},push(...e){return Re(this,"push",e)},reduce(e,...t){return je(this,"reduce",e,t)},reduceRight(e,...t){return je(this,"reduceRight",e,t)},shift(){return Re(this,"shift")},
// slice could use ARRAY_ITERATE but also seems to beg for range tracking
some(e,t){return Ne(this,"some",e,t,void 0,arguments)},splice(...e){return Re(this,"splice",e)},toReversed(){return Le(this).toReversed()},toSorted(e){return Le(this).toSorted(e)},toSpliced(...e){return Le(this).toSpliced(...e)},unshift(...e){return Re(this,"unshift",e)},values(){return Oe(this,"values",vt)}};function Oe(e,t,n){const r=Me(e),i=r[t]();return r===e||ft(e)||(i._next=i.next,i.next=()=>{const e=i._next();return e.value&&(e.value=n(e.value)),e}),i}const Pe=Array.prototype;function Ne(e,t,n,r,i,o){const a=Me(e),s=a!==e&&!ft(e),l=a[t];if(l!==Pe[t]){const t=l.apply(e,o);return s?vt(t):t}let c=n;a!==e&&(s?c=function(t,r){return n.call(this,vt(t),r,e)}:n.length>2&&(c=function(t,r){return n.call(this,t,r,e)}));const u=l.call(a,c,r);return s&&i?i(u):u}function je(e,t,n,r){const i=Me(e);let o=n;return i!==e&&(ft(e)?n.length>3&&(o=function(t,r,i){return n.call(this,t,r,i,e)}):o=function(t,r,i){return n.call(this,t,vt(r),i,e)}),i[t](o,...r)}function ze(e,t,n){const r=gt(e);De(r,0,Ae);const i=r[t](...n);return-1!==i&&!1!==i||!mt(n[0])?i:(n[0]=gt(n[0]),r[t](...n))}function Re(e,t,n=[]){be(),ce();const r=gt(e)[t].apply(e,n);return ue(),_e(),r}const qe=n("__proto__,__v_isRef,__isVue"),$e=new Set(
Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(b));function Ue(e){b(e)||(e=String(e));const t=gt(this);return De(t,0,e),t.hasOwnProperty(e)}class He{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return i;if("__v_raw"===t)return n===(r?i?st:at:i?ot:it).get(e)||// receiver is not the reactive proxy, but has the same prototype
// this means the receiver is a user proxy of the reactive proxy
Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=p(e);if(!r){let e;if(o&&(e=Fe[t]))return e;if("hasOwnProperty"===t)return Ue}const a=Reflect.get(e,t,
// if this is a proxy wrapping a ref, return methods using the raw ref
// as receiver so that we don't have to call `toRaw` on the ref in all
// its class methods
bt(e)?e:n);return(b(t)?$e.has(t):qe(t))?a:(r||De(e,0,t),i?a:bt(a)?o&&S(t)?a:a.value:_(a)?r?ut(a):ct(a):a)}}class We extends He{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const t=pt(i);if(ft(n)||pt(n)||(i=gt(i),n=gt(n)),!p(e)&&bt(i)&&!bt(n))return!t&&(i.value=n,!0)}const o=p(e)&&S(t)?Number(t)<e.length:d(e,t),a=Reflect.set(e,t,n,bt(e)?e:r);return e===gt(r)&&(o?F(n,i)&&Be(e,"set",t,n):Be(e,"add",t,n)),a}deleteProperty(e,t){const n=d(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Be(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return b(t)&&$e.has(t)||De(e,0,t),n}ownKeys(e){return De(e,0,p(e)?"length":Ee),Reflect.ownKeys(e)}}class Ge extends He{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Ve=new We,Ye=new Ge,Ke=new We(!0),Xe=e=>e,Ze=e=>Reflect.getPrototypeOf(e);function Je(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Qe(e,t){const n={get(n){const r=this.__v_raw,i=gt(r),o=gt(n);e||(F(n,o)&&De(i,0,n),De(i,0,o));const{has:a}=Ze(i),s=t?Xe:e?yt:vt;return a.call(i,n)?s(r.get(n)):a.call(i,o)?s(r.get(o)):void(r!==i&&r.get(n))},get size(){const t=this.__v_raw;return!e&&De(gt(t),0,Ee),Reflect.get(t,"size",t)},has(t){const n=this.__v_raw,r=gt(n),i=gt(t);return e||(F(t,i)&&De(r,0,t),De(r,0,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){const i=this,o=i.__v_raw,a=gt(o),s=t?Xe:e?yt:vt;return!e&&De(a,0,Ee),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}};c(n,e?{add:Je("add"),set:Je("set"),delete:Je("delete"),clear:Je("clear")}:{add(e){t||ft(e)||pt(e)||(e=gt(e));const n=gt(this);return Ze(n).has.call(n,e)||(n.add(e),Be(n,"add",e,e)),this},set(e,n){t||ft(n)||pt(n)||(n=gt(n));const r=gt(this),{has:i,get:o}=Ze(r);let a=i.call(r,e);a||(e=gt(e),a=i.call(r,e));const s=o.call(r,e);return r.set(e,n),a?F(n,s)&&Be(r,"set",e,n):Be(r,"add",e,n),this},delete(e){const t=gt(this),{has:n,get:r}=Ze(t);let i=n.call(t,e);i||(e=gt(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Be(t,"delete",e,void 0),o},clear(){const e=gt(this),t=0!==e.size,n=e.clear();return t&&Be(e,"clear",void 0,void 0),n}});return["keys","values","entries",Symbol.iterator].forEach((r=>{n[r]=function(e,t,n){return function(...r){const i=this.__v_raw,o=gt(i),a=f(o),s="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=i[e](...r),u=n?Xe:t?yt:vt;return!t&&De(o,0,l?Ie:Ee),{
// iterator protocol
next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},
// iterable protocol
[Symbol.iterator](){return this}}}}(r,e,t)})),n}function et(e,t){const n=Qe(e,t);return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(d(n,r)&&r in t?n:t,r,i)}const tt={get:et(!1,!1)},nt={get:et(!1,!0)},rt={get:et(!0,!1)},it=new WeakMap,ot=new WeakMap,at=new WeakMap,st=new WeakMap;function lt(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>x(e).slice(8,-1))(e))}function ct(e){return pt(e)?e:ht(e,!1,Ve,tt,it)}function ut(e){return ht(e,!0,Ye,rt,at)}function ht(e,t,n,r,i){if(!_(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=lt(e);if(0===a)return e;const s=new Proxy(e,2===a?r:n);return i.set(e,s),s}function dt(e){return pt(e)?dt(e.__v_raw):!(!e||!e.__v_isReactive)}function pt(e){return!(!e||!e.__v_isReadonly)}function ft(e){return!(!e||!e.__v_isShallow)}function mt(e){return!!e&&!!e.__v_raw}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}const vt=e=>_(e)?ct(e):e,yt=e=>_(e)?ut(e):e;function bt(e){return!!e&&!0===e.__v_isRef}const _t={get:(e,t,n)=>{return"__v_raw"===t?e:bt(r=Reflect.get(e,t,n))?r.value:r;var r},set:(e,t,n,r)=>{const i=e[t];return bt(i)&&!bt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function wt(e){return dt(e)?e:new Proxy(e,_t)}class kt{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ce(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ke-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}
/**
   * @internal
   */notify(){if(this.flags|=16,!(8&this.flags)&&// avoid infinite self recursion
te!==this)return le(this,!0),!0}get value(){const e=this.dep.track();return fe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const xt={},Ct=new WeakMap;let St;function Tt(e,t,n=r){const{immediate:i,deep:a,once:s,scheduler:l,augmentJob:c,call:h}=n,d=e=>a?e:ft(e)||!1===a||0===a?Et(e,1):Et(e);let f,m,g,y,b=!1,_=!1;if(bt(e)?(m=()=>e.value,b=ft(e)):dt(e)?(m=()=>d(e),b=!0):p(e)?(_=!0,b=e.some((e=>dt(e)||ft(e))),m=()=>e.map((e=>bt(e)?e.value:dt(e)?d(e):v(e)?h?h(e,2):e():void 0))):m=v(e)?t?h?()=>h(e,2):e:()=>{if(g){be();try{g()}finally{_e()}}const t=St;St=f;try{return h?h(e,3,[y]):e(y)}finally{St=t}}:o,t&&a){const e=m,t=!0===a?1/0:a;m=()=>Et(e(),t)}const w=ee,k=()=>{f.stop(),w&&w.active&&u(w.effects,f)};if(s&&t){const e=t;t=(...t)=>{e(...t),k()}}let x=_?new Array(e.length).fill(xt):xt;const C=e=>{if(1&f.flags&&(f.dirty||e))if(t){const e=f.run();if(a||b||(_?e.some(((e,t)=>F(e,x[t]))):F(e,x))){g&&g();const n=St;St=f;try{const n=[e,
// pass undefined as the old value when it's changed for the first time
x===xt?void 0:_&&x[0]===xt?[]:x,y];h?h(t,3,n):
// @ts-expect-error
t(...n),x=e}finally{St=n}}}else f.run()};return c&&c(C),f=new ie(m),f.scheduler=l?()=>l(C,!1):C,y=e=>function(e,t=!1,n=St){if(n){let t=Ct.get(n);t||Ct.set(n,t=[]),t.push(e)}}(e,!1,f),g=f.onStop=()=>{const e=Ct.get(f);if(e){if(h)h(e,4);else for(const t of e)t();Ct.delete(f)}},t?i?C(!0):x=f.run():l?l(C.bind(null,!0),!0):f.run(),k.pause=f.pause.bind(f),k.resume=f.resume.bind(f),k.stop=k,k}function Et(e,t=1/0,n){if(t<=0||!_(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,bt(e))Et(e.value,t,n);else if(p(e))for(let r=0;r<e.length;r++)Et(e[r],t,n);else if(m(e)||f(e))e.forEach((e=>{Et(e,t,n)}));else if(C(e)){for(const r in e)Et(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Et(e[r],t,n)}return e}
/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function It(e,t,n,r){try{return r?e(...r):e()}catch(i){Dt(i,t,n)}}function At(e,t,n,r){if(v(e)){const i=It(e,t,n,r);return i&&w(i)&&i.catch((e=>{Dt(e,t,n)})),i}if(p(e)){const i=[];for(let o=0;o<e.length;o++)i.push(At(e[o],t,n,r));return i}}function Dt(e,t,n,i=!0){t&&t.vnode;const{errorHandler:o,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||r;if(t){let r=t.parent;const i=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,a))return;r=r.parent}if(o)return be(),It(o,null,10,[e,i,a]),void _e()}!function(e,t,n,r=!0,i=!1){if(i)throw e}(e,0,0,i,a)}const Bt=[];let Lt=-1;const Mt=[];let Ft=null,Ot=0;const Pt=Promise.resolve();let Nt=null;function jt(e){const t=Nt||Pt;return e?t.then(this?e.bind(this):e):t}function zt(e){if(!(1&e.flags)){const t=Ut(e),n=Bt[Bt.length-1];!n||// fast path when the job id is larger than the tail
!(2&e.flags)&&t>=Ut(n)?Bt.push(e):Bt.splice(function(e){let t=Lt+1,n=Bt.length;for(;t<n;){const r=t+n>>>1,i=Bt[r],o=Ut(i);o<e||o===e&&2&i.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,Rt()}}function Rt(){Nt||(Nt=Pt.then(Ht))}function qt(e,t,n=Lt+1){for(;n<Bt.length;n++){const t=Bt[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Bt.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function $t(e){if(Mt.length){const e=[...new Set(Mt)].sort(((e,t)=>Ut(e)-Ut(t)));if(Mt.length=0,Ft)return void Ft.push(...e);for(Ft=e,Ot=0;Ot<Ft.length;Ot++){const e=Ft[Ot];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Ft=null,Ot=0}}const Ut=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Ht(e){try{for(Lt=0;Lt<Bt.length;Lt++){const e=Bt[Lt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),It(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Lt<Bt.length;Lt++){const e=Bt[Lt];e&&(e.flags&=-2)}Lt=-1,Bt.length=0,$t(),Nt=null,(Bt.length||Mt.length)&&Ht()}}let Wt=null,Gt=null;function Vt(e){const t=Wt;return Wt=e,Gt=e&&e.type.__scopeId||null,t}function Yt(e,t=Wt,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Hr(-1);const i=Vt(t);let o;try{o=e(...n)}finally{Vt(i),r._d&&Hr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Kt(e,t){if(null===Wt)return e;const n=_i(Wt),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,a,s,l=r]=t[o];e&&(v(e)&&(e={mounted:e,updated:e}),e.deep&&Et(a),i.push({dir:e,instance:n,value:a,oldValue:void 0,arg:s,modifiers:l}))}return e}function Xt(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(be(),At(l,n,8,[e.el,s,e,t]),_e())}}const Zt=Symbol("_vte");function Jt(e,t){6&e.shapeFlag&&e.component?(e.transition=t,Jt(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Qt(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function en(e,t,n,i,o=!1){if(p(e))return void e.forEach(((e,r)=>en(e,t&&(p(t)?t[r]:t),n,i,o)));if(tn(i)&&!o)return void(512&i.shapeFlag&&i.type.__asyncResolved&&i.component.subTree.component&&en(e,t,n,i.component.subTree));const a=4&i.shapeFlag?_i(i.component):i.el,s=o?null:a,{i:l,r:c}=e,h=t&&t.r,f=l.refs===r?l.refs={}:l.refs,m=l.setupState,g=gt(m),b=m===r?()=>!1:e=>d(g,e);if(null!=h&&h!==c&&(y(h)?(f[h]=null,b(h)&&(m[h]=null)):bt(h)&&(h.value=null)),v(c))It(c,l,12,[s,f]);else{const t=y(c),r=bt(c);if(t||r){const i=()=>{if(e.f){const n=t?b(c)?m[c]:f[c]:c.value;o?p(n)&&u(n,a):p(n)?n.includes(a)||n.push(a):t?(f[c]=[a],b(c)&&(m[c]=f[c])):(c.value=[a],e.k&&(f[e.k]=c.value))}else t?(f[c]=s,b(c)&&(m[c]=s)):r&&(c.value=s,e.k&&(f[e.k]=s))};s?(i.id=-1,fr(i,n)):i()}}}z().requestIdleCallback,z().cancelIdleCallback;const tn=e=>!!e.type.__asyncLoader,nn=e=>e.type.__isKeepAlive;function rn(e,t){an(e,"a",t)}function on(e,t){an(e,"da",t)}function an(e,t,n=di){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(ln(t,r,n),n){let e=n.parent;for(;e&&e.parent;)nn(e.parent.vnode)&&sn(r,t,n,e),e=e.parent}}function sn(e,t,n,r){const i=ln(t,e,r,!0
/* prepend */);mn((()=>{u(r[t],i)}),n)}function ln(e,t,n=di,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{be();const i=pi(n),o=At(t,n,e,r);return i(),_e(),o});return r?i.unshift(o):i.push(o),o}}const cn=e=>(t,n=di)=>{gi&&"sp"!==e||ln(e,((...e)=>t(...e)),n)},un=cn("bm"),hn=cn("m"),dn=cn("bu"),pn=cn("u"),fn=cn("bum"),mn=cn("um"),gn=cn("sp"),vn=cn("rtg"),yn=cn("rtc");function bn(e,t=di){ln("ec",e,t)}const _n="components";function wn(e,t){return Sn(_n,e,!0,t)||e}const kn=Symbol.for("v-ndc");function xn(e){return y(e)?Sn(_n,e,!1)||e:e||kn}function Cn(e){return Sn("directives",e)}function Sn(e,t,n=!0,r=!1){const i=Wt||di;if(i){const n=i.type;if(e===_n){const e=wi(n,!1);if(e&&(e===t||e===A(t)||e===L(A(t))))return n}const o=
// local registration
// check instance[type] first which is resolved for options API
Tn(i[e]||n[e],t)||// global registration
Tn(i.appContext[e],t);return!o&&r?n:o}}function Tn(e,t){return e&&(e[t]||e[A(t)]||e[L(A(t))])}function En(e,t,n,r){let i;const o=n,a=p(e);if(a||y(e)){let n=!1;a&&dt(e)&&(n=!ft(e),e=Me(e)),i=new Array(e.length);for(let r=0,a=e.length;r<a;r++)i[r]=t(n?vt(e[r]):e[r],r,void 0,o)}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o)}else if(_(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,o)));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,o)}}else i=[];return i}function In(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(p(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function An(e,t,n={},r,i){if(Wt.ce||Wt.parent&&tn(Wt.parent)&&Wt.parent.ce)return"default"!==t&&(n.name=t),$r(),Vr(Pr,null,[Qr("slot",n,r)],64);let o=e[t];o&&o._c&&(o._d=!1),$r();const a=o&&Dn(o(n)),s=n.key||// slot content array of a dynamic conditional slot may have a branch
// key attached in the `createSlots` helper, respect that
a&&a.key,l=Vr(Pr,{key:(s&&!b(s)?s:`_${t}`)+// #7256 force differentiate fallback content from actual content
""},a||[],a&&1===e._?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function Dn(e){return e.some((e=>!Yr(e)||e.type!==jr&&!(e.type===Pr&&!Dn(e.children))))?e:null}const Bn=e=>e?mi(e)?_i(e):Bn(e.parent):null,Ln=
// Move PURE marker to new line to workaround compiler discarding it
// due to type annotation
c(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Bn(e.parent),$root:e=>Bn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Rn(e),$forceUpdate:e=>e.f||(e.f=()=>{zt(e.update)}),$nextTick:e=>e.n||(e.n=jt.bind(e.proxy)),$watch:e=>Sr.bind(e)}),Mn=(e,t)=>e!==r&&!e.__isScriptSetup&&d(e,t),Fn={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:i,data:o,props:a,accessCache:s,type:l,appContext:c}=e;let u;if("$"!==t[0]){const l=s[t];if(void 0!==l)switch(l){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(Mn(i,t))return s[t]=1,i[t];if(o!==r&&d(o,t))return s[t]=2,o[t];if(
// only cache other properties when instance has declared (thus stable)
// props
(u=e.propsOptions[0])&&d(u,t))return s[t]=3,a[t];if(n!==r&&d(n,t))return s[t]=4,n[t];Pn&&(s[t]=0)}}const h=Ln[t];let p,f;return h?("$attrs"===t&&De(e.attrs,0,""),h(e)):
// css module (injected by vue-loader)
(p=l.__cssModules)&&(p=p[t])?p:n!==r&&d(n,t)?(s[t]=4,n[t]):(
// global properties
f=c.config.globalProperties,d(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:o,ctx:a}=e;return Mn(o,t)?(o[t]=n,!0):i!==r&&d(i,t)?(i[t]=n,!0):!d(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:a}},s){let l;return!!n[s]||e!==r&&d(e,s)||Mn(t,s)||(l=a[0])&&d(l,s)||d(i,s)||d(Ln,s)||d(o.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:d(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function On(e){return p(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let Pn=!0;function Nn(e){const t=Rn(e),n=e.proxy,r=e.ctx;Pn=!1,t.beforeCreate&&jn(t.beforeCreate,e,"bc");const{
// state
data:i,computed:a,methods:s,watch:l,provide:c,inject:u,created:
// lifecycle
h,beforeMount:d,mounted:f,beforeUpdate:m,updated:g,activated:y,deactivated:b,beforeDestroy:w,beforeUnmount:k,destroyed:x,unmounted:C,render:S,renderTracked:T,renderTriggered:E,errorCaptured:I,serverPrefetch:A,expose:
// public API
D,inheritAttrs:B,components:
// assets
L,directives:M,filters:F}=t;if(u&&function(e,t){p(e)&&(e=Hn(e));for(const n in e){const r=e[n];let i;i=_(r)?"default"in r?Jn(r.from||n,r.default,!0):Jn(r.from||n):Jn(r),bt(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}(u,r,null),s)for(const o in s){const e=s[o];v(e)&&(r[o]=e.bind(n))}if(i){const t=i.call(n,n);_(t)&&(e.data=ct(t))}if(Pn=!0,a)for(const p in a){const e=a[p],t=v(e)?e.bind(n,n):v(e.get)?e.get.bind(n,n):o,i=!v(e)&&v(e.set)?e.set.bind(n):o,s=ki({get:t,set:i});Object.defineProperty(r,p,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e})}if(l)for(const o in l)zn(l[o],r,n,o);if(c){const e=v(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{!function(e,t){if(di){let n=di.provides;const r=di.parent&&di.parent.provides;r===n&&(n=di.provides=Object.create(r)),n[e]=t}else;}(t,e[t])}))}function O(e,t){p(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(h&&jn(h,e,"c"),O(un,d),O(hn,f),O(dn,m),O(pn,g),O(rn,y),O(on,b),O(bn,I),O(yn,T),O(vn,E),O(fn,k),O(mn,C),O(gn,A),p(D))if(D.length){const t=e.exposed||(e.exposed={});D.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});S&&e.render===o&&(e.render=S),null!=B&&(e.inheritAttrs=B),L&&(e.components=L),M&&(e.directives=M),A&&Qt(e)}function jn(e,t,n){At(p(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function zn(e,t,n,r){let i=r.includes(".")?Tr(n,r):()=>n[r];if(y(e)){const n=t[e];v(n)&&xr(i,n)}else if(v(e))xr(i,e.bind(n));else if(_(e))if(p(e))e.forEach((e=>zn(e,t,n,r)));else{const r=v(e.handler)?e.handler.bind(n):t[e.handler];v(r)&&xr(i,r,e)}}function Rn(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((e=>qn(l,e,a,!0))),qn(l,t,a)):l=t,_(t)&&o.set(t,l),l}function qn(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&qn(e,o,n,!0),i&&i.forEach((t=>qn(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=$n[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const $n={data:Un,props:Vn,emits:Vn,
// objects
methods:Gn,computed:Gn,
// lifecycle
beforeCreate:Wn,created:Wn,beforeMount:Wn,mounted:Wn,beforeUpdate:Wn,updated:Wn,beforeDestroy:Wn,beforeUnmount:Wn,destroyed:Wn,unmounted:Wn,activated:Wn,deactivated:Wn,errorCaptured:Wn,serverPrefetch:Wn,
// assets
components:Gn,directives:Gn,
// watch
watch:function(e,t){if(!e)return t;if(!t)return e;const n=c(Object.create(null),e);for(const r in t)n[r]=Wn(e[r],t[r]);return n},
// provide / inject
provide:Un,inject:function(e,t){return Gn(Hn(e),Hn(t))}};function Un(e,t){return t?e?function(){return c(v(e)?e.call(this,this):e,v(t)?t.call(this,this):t)}:t:e}function Hn(e){if(p(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Wn(e,t){return e?[...new Set([].concat(e,t))]:t}function Gn(e,t){return e?c(Object.create(null),e,t):t}function Vn(e,t){return e?p(e)&&p(t)?[...new Set([...e,...t])]:c(
Object.create(null),On(e),On(null!=t?t:{})):t}function Yn(){return{app:null,config:{isNativeTag:a,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Kn=0;function Xn(e,t){return function(t,n=null){v(t)||(t=c({},t)),null==n||_(n)||(n=null);const r=Yn(),i=new WeakSet,o=[];let a=!1;const s=r.app={_uid:Kn++,_component:t,_props:n,_container:null,_context:r,_instance:null,version:xi,get config(){return r.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&v(e.install)?(i.add(e),e.install(s,...t)):v(e)&&(i.add(e),e(s,...t))),s),mixin:e=>(r.mixins.includes(e)||r.mixins.push(e),s),component:(e,t)=>t?(r.components[e]=t,s):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,s):r.directives[e],mount(i,o,l){if(!a){const o=s._ceVNode||Qr(t,n);return o.appContext=r,!0===l?l="svg":!1===l&&(l=void 0),e(o,i,l),a=!0,s._container=i,i.__vue_app__=s,_i(o.component)}},onUnmount(e){o.push(e)},unmount(){a&&(At(o,s._instance,16),e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,s),runWithContext(e){const t=Zn;Zn=s;try{return e()}finally{Zn=t}}};return s}}let Zn=null;function Jn(e,t,n=!1){const r=di||Wt;if(r||Zn){const i=Zn?Zn._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&v(t)?t.call(r&&r.proxy):t}}const Qn={},er=()=>Object.create(Qn),tr=e=>Object.getPrototypeOf(e)===Qn;function nr(e,t,n,r=!1){const i={},o=er();e.propsDefaults=Object.create(null),rr(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:ht(i,!1,Ke,nt,ot):e.type.props?e.props=i:e.props=o,e.attrs=o}function rr(e,t,n,i){const[o,a]=e.propsOptions;let s,l=!1;if(t)for(let r in t){if(T(r))continue;const c=t[r];let u;o&&d(o,u=A(r))?a&&a.includes(u)?(s||(s={}))[u]=c:n[u]=c:Dr(e.emitsOptions,r)||r in i&&c===i[r]||(i[r]=c,l=!0)}if(a){const t=gt(n),i=s||r;for(let r=0;r<a.length;r++){const s=a[r];n[s]=ir(o,t,s,i[s],e,!d(i,s))}}return l}function ir(e,t,n,r,i,o){const a=e[n];if(null!=a){const e=d(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&!a.skipFactory&&v(e)){const{propsDefaults:o}=i;if(n in o)r=o[n];else{const a=pi(i);r=o[n]=e.call(null,t),a()}}else r=e;i.ce&&i.ce._setProp(n,r)}a[0
/* shouldCast */]&&(o&&!e?r=!1:!a[1
/* shouldCastTrue */]||""!==r&&r!==B(n)||(r=!0))}return r}const or=new WeakMap;function ar(e,t,n=!1){const o=n?or:t.propsCache,a=o.get(e);if(a)return a;const s=e.props,l={},u=[];let h=!1;if(!v(e)){const r=e=>{h=!0;const[n,r]=ar(e,t,!0);c(l,n),r&&u.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!s&&!h)return _(e)&&o.set(e,i),i;if(p(s))for(let i=0;i<s.length;i++){const e=A(s[i]);sr(e)&&(l[e]=r)}else if(s)for(const r in s){const e=A(r);if(sr(e)){const t=s[r],n=l[e]=p(t)||v(t)?{type:t}:c({},t),i=n.type;let o=!1,a=!0;if(p(i))for(let e=0;e<i.length;++e){const t=i[e],n=v(t)&&t.name;if("Boolean"===n){o=!0;break}"String"===n&&(a=!1)}else o=v(i)&&"Boolean"===i.name;n[0
/* shouldCast */]=o,n[1
/* shouldCastTrue */]=a,(o||d(n,"default"))&&u.push(e)}}const f=[l,u];return _(e)&&o.set(e,f),f}function sr(e){return"$"!==e[0]&&!T(e)}const lr=e=>"_"===e[0]||"$stable"===e,cr=e=>p(e)?e.map(ii):[ii(e)],ur=(e,t,n)=>{if(t._n)return t;const r=Yt(((...e)=>cr(t(...e))),n);return r._c=!1,r},hr=(e,t,n)=>{const r=e._ctx;for(const i in e){if(lr(i))continue;const n=e[i];if(v(n))t[i]=ur(0,n,r);else if(null!=n){const e=cr(n);t[i]=()=>e}}},dr=(e,t)=>{const n=cr(t);e.slots.default=()=>n},pr=(e,t,n)=>{for(const r in t)(n||"_"!==r)&&(e[r]=t[r])},fr=function(e,t){t&&t.pendingBranch?p(e)?t.effects.push(...e):t.effects.push(e):(p(n=e)?Mt.push(...n):Ft&&-1===n.id?Ft.splice(Ot+1,0,n):1&n.flags||(Mt.push(n),n.flags|=1),Rt());var n};function mr(e){return function(e){z().__VUE__=!0;const{insert:t,remove:n,patchProp:a,createElement:s,createText:l,createComment:c,setText:u,setElementText:h,parentNode:p,nextSibling:f,setScopeId:m=o,insertStaticContent:g}=e,v=(e,t,n,r=null,i=null,o=null,a=void 0,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Kr(e,t)&&(r=J(e),V(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=t;switch(c){case Nr:y(e,t,n,r);break;case jr:b(e,t,n,r);break;case zr:null==e&&_(t,n,r,a);break;case Pr:F(e,t,n,r,i,o,a,s,l);break;default:1&h?C(e,t,n,r,i,o,a,s,l):6&h?N(e,t,n,r,i,o,a,s,l):(64&h||128&h)&&c.process(e,t,n,r,i,o,a,s,l,te)}null!=u&&i&&en(u,e&&e.ref,o,t||e,!t)},y=(e,n,r,i)=>{if(null==e)t(n.el=l(n.children),r,i);else{const t=n.el=e.el;n.children!==e.children&&u(t,n.children)}},b=(e,n,r,i)=>{null==e?t(n.el=c(n.children||""),r,i):n.el=e.el},_=(e,t,n,r)=>{[e.el,e.anchor]=g(e.children,t,n,r,e.el,e.anchor)},k=({el:e,anchor:n},r,i)=>{let o;for(;e&&e!==n;)o=f(e),t(e,r,i),e=o;t(n,r,i)},x=({el:e,anchor:t})=>{let r;for(;e&&e!==t;)r=f(e),n(e),e=r;n(t)},C=(e,t,n,r,i,o,a,s,l)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?S(t,n,r,i,o,a,s,l):D(e,t,i,o,a,s,l)},S=(e,n,r,i,o,l,c,u)=>{let d,p;const{props:f,shapeFlag:m,transition:g,dirs:v}=e;if(d=e.el=s(e.type,l,f&&f.is,f),8&m?h(d,e.children):16&m&&I(e.children,d,null,i,o,gr(e,l),c,u),v&&Xt(e,null,i,"created"),E(d,e,e.scopeId,c,i),f){for(const e in f)"value"===e||T(e)||a(d,e,null,f[e],l,i);"value"in f&&a(d,"value",null,f.value,l),(p=f.onVnodeBeforeMount)&&si(p,i,e)}v&&Xt(e,null,i,"beforeMount");const y=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(o,g);y&&g.beforeEnter(d),t(d,n,r),((p=f&&f.onVnodeMounted)||y||v)&&fr((()=>{p&&si(p,i,e),y&&g.enter(d),v&&Xt(e,null,i,"mounted")}),o)},E=(e,t,n,r,i)=>{if(n&&m(e,n),r)for(let o=0;o<r.length;o++)m(e,r[o]);if(i){let n=i.subTree;if(t===n||Or(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=i.vnode;E(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},I=(e,t,n,r,i,o,a,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?oi(e[c]):ii(e[c]);v(null,l,t,n,r,i,o,a,s)}},D=(e,t,n,i,o,s,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||r,m=t.props||r;let g;if(n&&vr(n,!1),(g=m.onVnodeBeforeUpdate)&&si(g,n,t,e),p&&Xt(t,e,n,"beforeUpdate"),n&&vr(n,!0),(f.innerHTML&&null==m.innerHTML||f.textContent&&null==m.textContent)&&h(c,""),d?L(e.dynamicChildren,d,c,n,i,gr(t,o),s):l||U(e,t,c,null,n,i,gr(t,o),s,!1),u>0){if(16&u)M(c,f,m,n,o);else if(2&u&&f.class!==m.class&&a(c,"class",null,m.class,o),4&u&&a(c,"style",f.style,m.style,o),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],i=f[r],s=m[r];s===i&&"value"!==r||a(c,r,i,s,o,n)}}1&u&&e.children!==t.children&&h(c,t.children)}else l||null!=d||M(c,f,m,n,o);((g=m.onVnodeUpdated)||p)&&fr((()=>{g&&si(g,n,t,e),p&&Xt(t,e,n,"updated")}),i)},L=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],u=
// oldVNode may be an errored async setup() component inside Suspense
// which will not have a mounted element
l.el&&(// - In the case of a Fragment, we need to provide the actual parent
// of the Fragment itself so it can move its children.
l.type===Pr||// - In the case of different nodes, there is going to be a replacement
// which also requires the correct parent container
!Kr(l,c)||// - In the case of a component, it could contain anything.
70&l.shapeFlag)?p(l.el):
// In other cases, the parent container is not actually used so we
// just pass the block element here to avoid a DOM parentNode call.
n;v(l,c,u,null,r,i,o,a,!0)}},M=(e,t,n,i,o)=>{if(t!==n){if(t!==r)for(const r in t)T(r)||r in n||a(e,r,t[r],null,o,i);for(const r in n){if(T(r))continue;const s=n[r],l=t[r];s!==l&&"value"!==r&&a(e,r,l,s,o,i)}"value"in n&&a(e,"value",t.value,n.value,o)}},F=(e,n,r,i,o,a,s,c,u)=>{const h=n.el=e?e.el:l(""),d=n.anchor=e?e.anchor:l("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=n;m&&(c=c?c.concat(m):m),null==e?(t(h,r,i),t(d,r,i),I(
// #10007
// such fragment like `<></>` will be compiled into
// a fragment which doesn't have a children.
// In this case fallback to an empty array
n.children||[],r,d,o,a,s,c,u)):p>0&&64&p&&f&&// #2715 the previous fragment could've been a BAILed one as a result
// of renderSlot() with no valid children
e.dynamicChildren?(L(e.dynamicChildren,f,r,o,a,s,c),(
// #2080 if the stable fragment has a key, it's a <template v-for> that may
//  get moved around. Make sure all root level vnodes inherit el.
// #2134 or if it's a component root, it may also get moved around
// as the component is being moved.
null!=n.key||o&&n===o.subTree)&&yr(e,n,!0
/* shallow */)):U(e,n,r,d,o,a,s,c,u)},N=(e,t,n,r,i,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):j(t,n,r,i,o,a,l):R(e,t,l)},j=(e,t,n,i,o,a,s)=>{const l=e.component=function(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||li,a={uid:ci++,vnode:e,type:i,parent:t,appContext:o,root:null,
// to be immediately set
next:null,subTree:null,
// will be set synchronously right after creation
effect:null,update:null,
// will be set synchronously right after creation
job:null,scope:new ne(!0
/* detached */),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],
// local resolved assets
components:null,directives:null,
// resolved props and emits options
propsOptions:ar(i,o),emitsOptions:Ar(i,o),
// emit
emit:null,
// to be set immediately
emitted:null,
// props default value
propsDefaults:r,
// inheritAttrs
inheritAttrs:i.inheritAttrs,
// state
ctx:r,data:r,props:r,attrs:r,slots:r,refs:r,setupState:r,setupContext:null,
// suspense related
suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,
// lifecycle hooks
// not using enums here because it results in computed properties
isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};a.ctx={_:a},a.root=t?t.root:a,a.emit=Ir.bind(null,a),e.ce&&e.ce(a);return a}(e,i,o);if(nn(e)&&(l.ctx.renderer=te),function(e,t=!1,n=!1){t&&hi(t);const{props:r,children:i}=e.vnode,o=mi(e);nr(e,r,o,t),((e,t,n)=>{const r=e.slots=er();if(32&e.vnode.shapeFlag){const e=t._;e?(pr(r,t,n),n&&P(r,"_",e,!0)):hr(t,r)}else t&&dr(e,t)})(e,i,n);const a=o?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Fn);const{setup:r}=n;if(r){be();const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,bi),slots:e.slots,emit:e.emit,expose:t}}(e):null,i=pi(e),o=It(r,e,0,[e.props,n]),a=w(o);if(_e(),i(),!a&&!e.sp||tn(e)||Qt(e),a){if(o.then(fi,fi),t)return o.then((t=>{vi(e,t)})).catch((t=>{Dt(t,e,0)}));e.asyncDep=o}else vi(e,o)}else yi(e)}(e,t):void 0;t&&hi(!1)}(l,!1,s),l.asyncDep){if(o&&o.registerDep(l,q,s),!e.el){const e=l.subTree=Qr(jr);b(null,e,t,n)}}else q(l,e,t,n,o,a,s)},R=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||Fr(r,a,c):!!a);if(1024&l)return!0;if(16&l)return r?Fr(r,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!Dr(c,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void $(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},q=(e,t,n,r,i,o,a)=>{const s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:l,vnode:c}=e;{const n=br(e);if(n)return t&&(t.el=c.el,$(e,t,a)),void n.asyncDep.then((()=>{e.isUnmounted||s()}))}let u,h=t;vr(e,!1),t?(t.el=c.el,$(e,t,a)):t=c,n&&O(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&si(u,l,t,c),vr(e,!0);const d=Br(e),f=e.subTree;e.subTree=d,v(f,d,
// parent may have changed if it's in a teleport
p(f.el),
// anchor may have changed if it's in a fragment
J(f),e,i,o),t.el=d.el,null===h&&function({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,d.el),r&&fr(r,i),(u=t.props&&t.props.onVnodeUpdated)&&fr((()=>si(u,l,t,c)),i)}else{let a;const{el:s,props:l}=t,{bm:c,m:u,parent:h,root:d,type:p}=e,f=tn(t);vr(e,!1),c&&O(c),!f&&(a=l&&l.onVnodeBeforeMount)&&si(a,h,t),vr(e,!0);{d.ce&&d.ce._injectChildStyle(p);const a=e.subTree=Br(e);v(null,a,n,r,e,i,o),t.el=a.el}if(u&&fr(u,i),!f&&(a=l&&l.onVnodeMounted)){const e=t;fr((()=>si(a,h,e)),i)}(256&t.shapeFlag||h&&tn(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&fr(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();const l=e.effect=new ie(s);e.scope.off();const c=e.update=l.run.bind(l),u=e.job=l.runIfDirty.bind(l);u.i=e,u.id=e.uid,l.scheduler=()=>zt(u),vr(e,!0),c()},$=(e,t,n)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=gt(i),[l]=e.propsOptions;let c=!1;if(
// always force full diff in dev
// - #1942 if hmr is enabled with sfc component
// - vite#872 non-sfc component used by sfc component
!(r||a>0)||16&a){let r;rr(e,t,i,o)&&(c=!0);for(const o in s)t&&(// for camelCase
d(t,o)||// it's possible the original props was passed in as kebab-case
// and converted to camelCase (#955)
(r=B(o))!==o&&d(t,r))||(l?!n||// for camelCase
void 0===n[o]&&// for kebab-case
void 0===n[r]||(i[o]=ir(l,s,o,void 0,e,!0)):delete i[o]);if(o!==s)for(const e in o)t&&d(t,e)||(delete o[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(Dr(e.emitsOptions,a))continue;const u=t[a];if(l)if(d(o,a))u!==o[a]&&(o[a]=u,c=!0);else{const t=A(a);i[t]=ir(l,s,t,u,e,!1)}else u!==o[a]&&(o[a]=u,c=!0)}}c&&Be(e.attrs,"set","")}(e,t.props,i,n),((e,t,n)=>{const{vnode:i,slots:o}=e;let a=!0,s=r;if(32&i.shapeFlag){const e=t._;e?n&&1===e?a=!1:pr(o,t,n):(a=!t.$stable,hr(t,o)),s=t}else t&&(dr(e,t),s={default:1});if(a)for(const r in o)lr(r)||null!=s[r]||delete o[r]})(e,t.children,n),be(),qt(e),_e()},U=(e,t,n,r,i,o,a,s,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void W(c,d,n,r,i,o,a,s,l);if(256&p)return void H(c,d,n,r,i,o,a,s,l)}8&f?(16&u&&Z(c,i,o),d!==c&&h(n,d)):16&u?16&f?W(c,d,n,r,i,o,a,s,l):Z(c,i,o,!0):(8&u&&h(n,""),16&f&&I(d,n,r,i,o,a,s,l))},H=(e,t,n,r,o,a,s,l,c)=>{t=t||i;const u=(e=e||i).length,h=t.length,d=Math.min(u,h);let p;for(p=0;p<d;p++){const r=t[p]=c?oi(t[p]):ii(t[p]);v(e[p],r,n,null,o,a,s,l,c)}u>h?Z(e,o,a,!0,!1,d):I(t,n,r,o,a,s,l,c,d)},W=(e,t,n,r,o,a,s,l,c)=>{let u=0;const h=t.length;let d=e.length-1,p=h-1;for(;u<=d&&u<=p;){const r=e[u],i=t[u]=c?oi(t[u]):ii(t[u]);if(!Kr(r,i))break;v(r,i,n,null,o,a,s,l,c),u++}for(;u<=d&&u<=p;){const r=e[d],i=t[p]=c?oi(t[p]):ii(t[p]);if(!Kr(r,i))break;v(r,i,n,null,o,a,s,l,c),d--,p--}if(u>d){if(u<=p){const e=p+1,i=e<h?t[e].el:r;for(;u<=p;)v(null,t[u]=c?oi(t[u]):ii(t[u]),n,i,o,a,s,l,c),u++}}else if(u>p)for(;u<=d;)V(e[u],o,a,!0),u++;else{const f=u,m=u,g=new Map;for(u=m;u<=p;u++){const e=t[u]=c?oi(t[u]):ii(t[u]);null!=e.key&&g.set(e.key,u)}let y,b=0;const _=p-m+1;let w=!1,k=0;const x=new Array(_);for(u=0;u<_;u++)x[u]=0;for(u=f;u<=d;u++){const r=e[u];if(b>=_){V(r,o,a,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(y=m;y<=p;y++)if(0===x[y-m]&&Kr(r,t[y])){i=y;break}void 0===i?V(r,o,a,!0):(x[i-m]=u+1,i>=k?k=i:w=!0,v(r,t[i],n,null,o,a,s,l,c),b++)}const C=w?function(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}o=n.length,a=n[o-1];for(;o-- >0;)n[o]=a,a=t[a];return n}(x):i;for(y=C.length-1,u=_-1;u>=0;u--){const e=m+u,i=t[e],d=e+1<h?t[e+1].el:r;0===x[u]?v(null,i,n,d,o,a,s,l,c):w&&(y<0||u!==C[y]?G(i,n,d,2):y--)}}},G=(e,n,r,i,o=null)=>{const{el:a,type:s,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void G(e.component.subTree,n,r,i);if(128&u)return void e.suspense.move(n,r,i);if(64&u)return void s.move(e,n,r,te);if(s===Pr){t(a,n,r);for(let e=0;e<c.length;e++)G(c[e],n,r,i);return void t(e.anchor,n,r)}if(s===zr)return void k(e,n,r);if(2!==i&&1&u&&l)if(0===i)l.beforeEnter(a),t(a,n,r),fr((()=>l.enter(a)),o);else{const{leave:e,delayLeave:i,afterLeave:o}=l,s=()=>t(a,n,r),c=()=>{e(a,(()=>{s(),o&&o()}))};i?i(a,s,c):c()}else t(a,n,r)},V=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:p}=e;if(-2===h&&(i=!1),null!=s&&en(s,null,n,e,!0),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const f=1&u&&d,m=!tn(e);let g;if(m&&(g=a&&a.onVnodeBeforeUnmount)&&si(g,t,e),6&u)X(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);f&&Xt(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,te,r):c&&// #5154
// when v-once is used inside a block, setBlockTracking(-1) marks the
// parent block with hasOnce: true
// so that it doesn't take the fast path during unmount - otherwise
// components nested in v-once are never unmounted.
!c.hasOnce&&(// #1153: fast path should not be taken for non-stable (v-for) fragments
o!==Pr||h>0&&64&h)?Z(c,t,n,!1,!0):(o===Pr&&384&h||!i&&16&u)&&Z(l,t,n),r&&Y(e)}(m&&(g=a&&a.onVnodeUnmounted)||f)&&fr((()=>{g&&si(g,t,e),f&&Xt(e,null,t,"unmounted")}),n)},Y=e=>{const{type:t,el:r,anchor:i,transition:o}=e;if(t===Pr)return void K(r,i);if(t===zr)return void x(e);const a=()=>{n(r),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:n}=o,i=()=>t(r,a);n?n(e.el,a,i):i()}else a()},K=(e,t)=>{let r;for(;e!==t;)r=f(e),n(e),e=r;n(t)},X=(e,t,n)=>{const{bum:r,scope:i,job:o,subTree:a,um:s,m:l,a:c}=e;_r(l),_r(c),r&&O(r),i.stop(),o&&(o.flags|=8,V(a,e,t,n)),s&&fr(s,t),fr((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Z=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)V(e[a],t,n,r,i)},J=e=>{if(6&e.shapeFlag)return J(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),n=t&&t[Zt];return n?f(n):t};let Q=!1;const ee=(e,t,n)=>{null==e?t._vnode&&V(t._vnode,null,null,!0):v(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Q||(Q=!0,qt(),$t(),Q=!1)},te={p:v,um:V,m:G,r:Y,mt:j,mc:I,pc:U,pbc:L,n:J,o:e};let re;return{render:ee,hydrate:re,createApp:Xn(ee)}}(e)}function gr({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function vr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function yr(e,t,n=!1){const r=e.children,i=t.children;if(p(r)&&p(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=oi(i[o]),t.el=e.el),n||-2===t.patchFlag||yr(e,t)),t.type===Nr&&(t.el=e.el)}}function br(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:br(t)}function _r(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const wr=Symbol.for("v-scx"),kr=()=>Jn(wr);function xr(e,t,n){return Cr(e,t,n)}function Cr(e,t,n=r){const{immediate:i,deep:a,flush:s,once:l}=n,u=c({},n),h=t&&i||!t&&"post"!==s;let d;if(gi)if("sync"===s){const e=kr();d=e.__watcherHandles||(e.__watcherHandles=[])}else if(!h){const e=()=>{};return e.stop=o,e.resume=o,e.pause=o,e}const p=di;u.call=(e,t,n)=>At(e,p,t,n);let f=!1;"post"===s?u.scheduler=e=>{fr(e,p&&p.suspense)}:"sync"!==s&&(f=!0,u.scheduler=(e,t)=>{t?e():zt(e)}),u.augmentJob=e=>{t&&(e.flags|=4),f&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};const m=Tt(e,t,u);return gi&&(d?d.push(m):h&&m()),m}function Sr(e,t,n){const r=this.proxy,i=y(e)?e.includes(".")?Tr(r,e):()=>r[e]:e.bind(r,r);let o;v(t)?o=t:(o=t.handler,n=t);const a=pi(this),s=Cr(i,o.bind(r),n);return a(),s}function Tr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const Er=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${A(t)}Modifiers`]||e[`${B(t)}Modifiers`];function Ir(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r;let o=n;const a=t.startsWith("update:"),s=a&&Er(i,t.slice(7));let l;s&&(s.trim&&(o=n.map((e=>y(e)?e.trim():e))),s.number&&(o=n.map(N)));let c=i[l=M(t)]||// also try camelCase event handler (#2249)
i[l=M(A(t))];!c&&a&&(c=i[l=M(B(t))]),c&&At(c,e,6,o);const u=i[l+"Once"];if(u){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,At(u,e,6,o)}}function Ar(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let a={},s=!1;if(!v(e)){const r=e=>{const n=Ar(e,t,!0);n&&(s=!0,c(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||s?(p(o)?o.forEach((e=>a[e]=null)):c(a,o),_(e)&&r.set(e,a),a):(_(e)&&r.set(e,null),null)}function Dr(e,t){return!(!e||!s(t))&&(t=t.slice(2).replace(/Once$/,""),d(e,t[0].toLowerCase()+t.slice(1))||d(e,B(t))||d(e,t))}function Br(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:a,attrs:s,emit:c,render:u,renderCache:h,props:d,data:p,setupState:f,ctx:m,inheritAttrs:g}=e,v=Vt(e);let y,b;try{if(4&n.shapeFlag){const e=i||r,t=e;y=ii(u.call(t,e,h,d,f,p,m)),b=s}else{const e=t;0,y=ii(e.length>1?e(d,{attrs:s,slots:a,emit:c}):e(d,null)),b=t.props?s:Lr(s)}}catch(w){Rr.length=0,Dt(w,e,1),y=Qr(jr)}let _=y;if(b&&!1!==g){const e=Object.keys(b),{shapeFlag:t}=_;e.length&&7&t&&(o&&e.some(l)&&(b=Mr(b,o)),_=ei(_,b,!1,!0))}return n.dirs&&(_=ei(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Jt(_,n.transition),y=_,Vt(v),y}const Lr=e=>{let t;for(const n in e)("class"===n||"style"===n||s(n))&&((t||(t={}))[n]=e[n]);return t},Mr=(e,t)=>{const n={};for(const r in e)l(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Fr(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Dr(n,o))return!0}return!1}const Or=e=>e.__isSuspense;const Pr=Symbol.for("v-fgt"),Nr=Symbol.for("v-txt"),jr=Symbol.for("v-cmt"),zr=Symbol.for("v-stc"),Rr=[];let qr=null;function $r(e=!1){Rr.push(qr=e?null:[])}let Ur=1;function Hr(e,t=!1){Ur+=e,e<0&&qr&&t&&(qr.hasOnce=!0)}function Wr(e){return e.dynamicChildren=Ur>0?qr||i:null,Rr.pop(),qr=Rr[Rr.length-1]||null,Ur>0&&qr&&qr.push(e),e}function Gr(e,t,n,r,i,o){return Wr(Jr(e,t,n,r,i,o,!0))}function Vr(e,t,n,r,i){return Wr(Qr(e,t,n,r,i,!0))}function Yr(e){return!!e&&!0===e.__v_isVNode}function Kr(e,t){return e.type===t.type&&e.key===t.key}const Xr=({key:e})=>null!=e?e:null,Zr=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?y(e)||bt(e)||v(e)?{i:Wt,r:e,k:t,f:!!n}:e:null);function Jr(e,t=null,n=null,r=0,i=null,o=(e===Pr?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Xr(t),ref:t&&Zr(t),scopeId:Gt,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Wt};return s?(ai(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=y(n)?8:16),Ur>0&&// avoid a block node from tracking itself
!a&&// has current parent block
qr&&(// presence of a patch flag indicates this node needs patching on updates.
// component nodes also should always be patched, because even if the
// component doesn't need to update, it needs to persist the instance on to
// the next vnode so that it can be properly unmounted later.
l.patchFlag>0||6&o)&&// the EVENTS flag is only for hydration and if it is the only flag, the
// vnode should not be considered dynamic due to handler caching.
32!==l.patchFlag&&qr.push(l),l}const Qr=function(e,t=null,n=null,r=0,i=null,o=!1){e&&e!==kn||(e=jr);if(Yr(e)){const r=ei(e,t,!0
/* mergeRef: true */);return n&&ai(r,n),Ur>0&&!o&&qr&&(6&r.shapeFlag?qr[qr.indexOf(e)]=r:qr.push(r)),r.patchFlag=-2,r}a=e,v(a)&&"__vccOpts"in a&&(e=e.__vccOpts);var a;if(t){t=function(e){return e?mt(e)||tr(e)?c({},e):e:null}(t);let{class:e,style:n}=t;e&&!y(e)&&(t.class=W(e)),_(n)&&(mt(n)&&!p(n)&&(n=c({},n)),t.style=R(n))}const s=y(e)?1:Or(e)?128:(e=>e.__isTeleport)(e)?64:_(e)?4:v(e)?2:0;return Jr(e,t,n,r,i,s,o,!0)};function ei(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:a,children:l,transition:c}=e,u=t?function(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=W([t.class,r.class]));else if("style"===e)t.style=R([t.style,r.style]);else if(s(e)){const n=t[e],i=r[e];!i||n===i||p(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Xr(u),ref:t&&t.ref?
// #2078 in the case of <component :is="vnode" ref="extra"/>
// if the vnode itself already has a ref, cloneVNode will need to merge
// the refs so the single vnode can be set on multiple refs
n&&o?p(o)?o.concat(Zr(t)):[o,Zr(t)]:Zr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,
// if the vnode is cloned with extra props, we can no longer assume its
// existing patch flag to be reliable and need to add the FULL_PROPS flag.
// note: preserve flag for fragments since they use the flag for children
// fast paths only.
patchFlag:t&&e.type!==Pr?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,
// These should technically only be non-null on mounted VNodes. However,
// they *should* be copied for kept-alive vnodes. So we just always copy
// them since them being non-null during a mount doesn't affect the logic as
// they will simply be overwritten.
component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ei(e.ssContent),ssFallback:e.ssFallback&&ei(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Jt(h,c.clone(h)),h}function ti(e=" ",t=0){return Qr(Nr,null,e,t)}function ni(e,t){const n=Qr(zr,null,e);return n.staticCount=t,n}function ri(e="",t=!1){return t?($r(),Vr(jr,null,e)):Qr(jr,null,e)}function ii(e){return null==e||"boolean"==typeof e?Qr(jr):p(e)?Qr(Pr,null,
// #3666, avoid reference pollution when reusing vnode
e.slice()):Yr(e)?oi(e):Qr(Nr,null,String(e))}function oi(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:ei(e)}function ai(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(p(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),ai(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||tr(t)?3===r&&Wt&&(1===Wt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Wt}}else v(t)?(t={default:t,_ctx:Wt},n=32):(t=String(t),64&r?(n=16,t=[ti(t)]):n=8);e.children=t,e.shapeFlag|=n}function si(e,t,n,r=null){At(e,t,7,[n,r])}const li=Yn();let ci=0;let ui,hi,di=null;{const e=z(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};ui=t("__VUE_INSTANCE_SETTERS__",(e=>di=e)),hi=t("__VUE_SSR_SETTERS__",(e=>gi=e))}const pi=e=>{const t=di;return ui(e),e.scope.on(),()=>{e.scope.off(),ui(t)}},fi=()=>{di&&di.scope.off(),ui(null)};function mi(e){return 4&e.vnode.shapeFlag}let gi=!1;function vi(e,t,n){v(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_(t)&&(e.setupState=wt(t)),yi(e)}function yi(e,t,n){const r=e.type;e.render||(e.render=r.render||o);{const t=pi(e);be();try{Nn(e)}finally{_e(),t()}}}const bi={get:(e,t)=>(De(e,0,""),e[t])};function _i(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(wt((t=e.exposed,!d(t,"__v_skip")&&Object.isExtensible(t)&&P(t,"__v_skip",!0),t)),{get:(t,n)=>n in t?t[n]:n in Ln?Ln[n](e):void 0,has:(e,t)=>t in e||t in Ln})):e.proxy;var t}function wi(e,t=!0){return v(e)?e.displayName||e.name:e.name||t&&e.__name}const ki=(e,t)=>{const n=function(e,t,n=!1){let r,i;return v(e)?r=e:(r=e.get,i=e.set),new kt(r,i,n)}(e,0,gi);return n},xi="3.5.13";
/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let Ci;const Si="undefined"!=typeof window&&window.trustedTypes;if(Si)try{Ci=Si.createPolicy("vue",{createHTML:e=>e})}catch(i7){}const Ti=Ci?e=>Ci.createHTML(e):e=>e,Ei="undefined"!=typeof document?document:null,Ii=Ei&&Ei.createElement("template"),Ai={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i="svg"===t?Ei.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Ei.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?Ei.createElement(e,{is:n}):Ei.createElement(e);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>Ei.createTextNode(e),createComment:e=>Ei.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ei.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},
// __UNSAFE__
// Reason: innerHTML.
// Static content here can only come from compiled templates.
// As long as the user only uses trusted templates, this is safe.
insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{Ii.innerHTML=Ti("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const i=Ii.content;if("svg"===r||"mathml"===r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[
// first
a?a.nextSibling:t.firstChild,
// last
n?n.previousSibling:t.lastChild]}},Di=Symbol("_vtc");const Bi=Symbol("_vod"),Li=Symbol("_vsh"),Mi={beforeMount(e,{value:t},{transition:n}){e[Bi]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Fi(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Fi(e,!0),r.enter(e)):r.leave(e,(()=>{Fi(e,!1)})):Fi(e,t))},beforeUnmount(e,{value:t}){Fi(e,t)}};function Fi(e,t){e.style.display=t?e[Bi]:"none",e[Li]=!t}const Oi=Symbol(""),Pi=/(^|;)\s*display\s*:/;const Ni=/\s*!important$/;function ji(e,t,n){if(p(n))n.forEach((n=>ji(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Ri[t];if(n)return n;let r=A(t);if("filter"!==r&&r in e)return Ri[t]=r;r=L(r);for(let i=0;i<zi.length;i++){const n=zi[i]+r;if(n in e)return Ri[t]=n}return t}(e,t);Ni.test(n)?e.setProperty(B(r),n.replace(Ni,""),"important"):e[r]=n}}const zi=["Webkit","Moz","ms"],Ri={};const qi="http://www.w3.org/1999/xlink";function $i(e,t,n,r,i,o=G(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(qi,t.slice(6,t.length)):e.setAttributeNS(qi,t,n):null==n||o&&!V(n)?e.removeAttribute(t):e.setAttribute(t,o?"":b(n)?String(n):n)}function Ui(e,t,n,r,i){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?Ti(n):n));const o=e.tagName;if("value"===t&&"PROGRESS"!==o&&// custom elements may use _value internally
!o.includes("-")){const r="OPTION"===o?e.getAttribute("value")||"":e.value,i=null==n?
// #11647: value should be set as empty string for null and undefined,
// but <input type="checkbox"> should be set as 'on'.
"checkbox"===e.type?"on":"":String(n);return r===i&&"_value"in e||(e.value=i),null==n&&e.removeAttribute(t),void(e._value=n)}let a=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=V(n):null==n&&"string"===r?(n="",a=!0):"number"===r&&(n=0,a=!0)}try{e[t]=n}catch(i7){}a&&e.removeAttribute(i||t)}function Hi(e,t,n,r){e.addEventListener(t,n,r)}const Wi=Symbol("_vei");function Gi(e,t,n,r,i=null){const o=e[Wi]||(e[Wi]={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=function(e){let t;if(Vi.test(e)){let n;for(t={};n=e.match(Vi);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):B(e.slice(2));return[n,t]}(t);if(r){const a=o[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();At(function(e,t){if(p(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Xi(),n}(r,i);Hi(e,n,a,s)}else a&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,a,s),o[t]=void 0)}}const Vi=/(?:Once|Passive|Capture)$/;let Yi=0;const Ki=Promise.resolve(),Xi=()=>Yi||(Ki.then((()=>Yi=0)),Yi=Date.now());const Zi=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&// lowercase letter
e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Ji=e=>{const t=e.props["onUpdate:modelValue"]||!1;return p(t)?e=>O(t,e):t};function Qi(e){e.target.composing=!0}function eo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const to=Symbol("_assign"),no={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[to]=Ji(i);const o=r||i.props&&"number"===i.props.type;Hi(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=N(r)),e[to](r)})),n&&Hi(e,"change",(()=>{e.value=e.value.trim()})),t||(Hi(e,"compositionstart",Qi),Hi(e,"compositionend",eo),Hi(e,"change",eo))},
// set value on mounted so it's after min/max for type="range"
mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},a){if(e[to]=Ji(a),e.composing)return;const s=null==t?"":t;if((!o&&"number"!==e.type||/^0\d/.test(e.value)?e.value:N(e.value))!==s){if(document.activeElement===e&&"range"!==e.type){if(r&&t===n)return;if(i&&e.value.trim()===s)return}e.value=s}}},ro={
// #4096 array checkboxes need to be deep traversed
deep:!0,created(e,t,n){e[to]=Ji(n),Hi(e,"change",(()=>{const t=e._modelValue,n=lo(e),r=e.checked,i=e[to];if(p(t)){const e=K(t,n),o=-1!==e;if(r&&!o)i(t.concat(n));else if(!r&&o){const n=[...t];n.splice(e,1),i(n)}}else if(m(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(co(e,r))}))},
// set initial checked on mount to wait for true-value/false-value
mounted:io,beforeUpdate(e,t,n){e[to]=Ji(n),io(e,t,n)}};function io(e,{value:t,oldValue:n},r){let i;if(e._modelValue=t,p(t))i=K(t,r.props.value)>-1;else if(m(t))i=t.has(r.props.value);else{if(t===n)return;i=Y(t,co(e,!0))}e.checked!==i&&(e.checked=i)}const oo={created(e,{value:t},n){e.checked=Y(t,n.props.value),e[to]=Ji(n),Hi(e,"change",(()=>{e[to](lo(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e[to]=Ji(r),t!==n&&(e.checked=Y(t,r.props.value))}},ao={
// <select multiple> value need to be deep traversed
deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=m(t);Hi(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?N(lo(e)):lo(e)));e[to](e.multiple?i?new Set(t):t:t[0]),e._assigning=!0,jt((()=>{e._assigning=!1}))})),e[to]=Ji(r)},
// set value in mounted & updated because <select> relies on its children
// <option>s.
mounted(e,{value:t}){so(e,t)},beforeUpdate(e,t,n){e[to]=Ji(n)},updated(e,{value:t}){e._assigning||so(e,t)}};function so(e,t){const n=e.multiple,r=p(t);if(!n||r||m(t)){for(let i=0,o=e.options.length;i<o;i++){const o=e.options[i],a=lo(o);if(n)if(r){const e=typeof a;o.selected="string"===e||"number"===e?t.some((e=>String(e)===String(a))):K(t,a)>-1}else o.selected=t.has(a);else if(Y(lo(o),t))return void(e.selectedIndex!==i&&(e.selectedIndex=i))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function lo(e){return"_value"in e?e._value:e.value}function co(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const uo=["ctrl","shift","alt","meta"],ho={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>uo.some((n=>e[`${n}Key`]&&!t.includes(n)))},po=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=ho[t[e]];if(r&&r(n,t))return}return e(n,...r)})},fo={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mo=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=n=>{if(!("key"in n))return;const r=B(n.key);return t.some((e=>e===r||fo[e]===r))?e(n):void 0})},go=c({patchProp:(e,t,n,r,i,o)=>{const a="svg"===i;"class"===t?function(e,t,n){const r=e[Di];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,a):"style"===t?function(e,t,n){const r=e.style,i=y(n);let o=!1;if(n&&!i){if(t)if(y(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&ji(r,t,"")}else for(const e in t)null==n[e]&&ji(r,e,"");for(const e in n)"display"===e&&(o=!0),ji(r,e,n[e])}else if(i){if(t!==n){const e=r[Oi];e&&(n+=";"+e),r.cssText=n,o=Pi.test(n)}}else t&&e.removeAttribute("style");Bi in e&&(e[Bi]=o?r.display:"",e[Li]&&(r.display="none"))}(e,n,r):s(t)?l(t)||Gi(e,t,0,r,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Zi(t)&&v(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Zi(t)&&y(n))return!1;return t in e}(e,t,r,a))?(Ui(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||$i(e,t,r,a,0,"value"!==t)):
// #11081 force set props for possible async custom element
!e._isVueCE||!/[A-Z]/.test(t)&&y(r)?("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),$i(e,t,r,a)):Ui(e,A(t),r,0,t)}},Ai);let vo;var yo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function bo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _o(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var wo;
/*! indexeddbshim - v11.0.0 - 4/9/2023 */wo||(wo=1,function(){function e(e,t,n,r){var i={configurable:!0,enumerable:!0};return i[e]=r,Object.defineProperty(t,n,i)}function t(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t);else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),s=new T(i||[]);return r(a,"_invoke",{value:k(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var d={};function p(){}function f(){}function m(){}var g={};c(g,a,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,a)&&(g=y);var b=m.prototype=p.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,o,a,s){var l=h(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,l,"next",e)}function l(e){a(o,r,i,s,l,"throw",e)}s(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function u(e,t,n){return t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return(f=p()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function m(e,n){return y(e)||t(e,n)||_(e,n)||x()}function g(e){return v(e)||b(e)||_(e)||k()}function v(e){if(Array.isArray(e))return w(e)}function y(e){if(Array.isArray(e))return e}function b(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(e){var t=S(e,"string");return"symbol"==typeof t?t:String(t)}var E=void 0!==I?I:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},I=void 0!==E?E:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var D={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3},B="undefined"==typeof DOMException?function(e,t){var n=new Error(e);return n.name=t,n}:DOMException,L=new WeakMap,M=new WeakMap,F=function(e){this[Symbol.toStringTag]="Event",this.toString=function(){return"[object Event]"};var t=Array.prototype.slice.call(arguments),n=t[1],r=t[2];if(!arguments.length)throw new TypeError("Failed to construct 'Event': 1 argument required, but only 0 present.");r=r||{};var i={};"composed"in(n=n||{})&&(i.composed=n.composed),L.set(this,r),M.set(this,i),this.initEvent(e,n.bubbles,n.cancelable),Object.defineProperties(this,["target","currentTarget","eventPhase","defaultPrevented"].reduce((function(e,t){return e[t]={get:function(){
/* prop in _evCfg && */
return void 0!==i[t]?i[t]:t in r?r[t]:
// Defaults
"eventPhase"===t?0:"defaultPrevented"!==t&&null}},e}),{}));var o=[
// Event
"type","bubbles","cancelable",
// Defaults to false
"isTrusted","timeStamp","initEvent",
// Other event properties (not used by our code)
"composedPath","composed"];"[object CustomEvent]"===this.toString()&&o.push("detail","initCustomEvent"),Object.defineProperties(this,o.reduce((function(e,t){return e[t]={get:function(){return t in i?i[t]:t in r?r[t]:!["bubbles","cancelable","composed"].includes(t)&&void 0}},e}),{}))};F.prototype.preventDefault=function(){if(!(this instanceof F))throw new TypeError("Illegal invocation");var e=L.get(this),t=M.get(this);this.cancelable&&!t._passive&&(t.defaultPrevented=!0,"function"==typeof e.preventDefault&&e.preventDefault())},F.prototype.stopImmediatePropagation=function(){M.get(this)._stopImmediatePropagation=!0},F.prototype.stopPropagation=function(){M.get(this)._stopPropagation=!0},F.prototype.initEvent=function(e,t,n){var r=M.get(this);r._dispatched||(r.type=e,void 0!==t&&(r.bubbles=t),void 0!==n&&(r.cancelable=n))},["type","target","currentTarget"].forEach((function(e){Object.defineProperty(F.prototype,e,{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}})})),["eventPhase","defaultPrevented","bubbles","cancelable","timeStamp"].forEach((function(e){Object.defineProperty(F.prototype,e,{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}})})),["NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE"].forEach((function(e,t){Object.defineProperty(F,e,{enumerable:!0,writable:!1,value:t}),Object.defineProperty(F.prototype,e,{writable:!1,value:t})})),F[Symbol.toStringTag]="Function",F.prototype[Symbol.toStringTag]="EventPrototype",Object.defineProperty(F,"prototype",{writable:!1});var O=function(e){var t=Array.prototype.slice.call(arguments),n=t[1],r=t[2];F.call(this,e,n,r),this[Symbol.toStringTag]="CustomEvent",this.toString=function(){return"[object CustomEvent]"},n=n||{},this.initCustomEvent(e,n.bubbles,n.cancelable,"detail"in n?n.detail:null)};function P(e){var t=e.bubbles,n=e.cancelable,r=e.detail,i=e.type;return"detail"in e?new O(i,{bubbles:t,cancelable:n,detail:r},e):new F(i,{bubbles:t,cancelable:n},e)}function N(e,t,n){var r=e[t];void 0===r&&(e[t]=r=[]),n="boolean"==typeof n?{capture:n}:n||{};var i=JSON.stringify(n);return{listenersByTypeOptions:r.filter((function(e){return i===JSON.stringify(e.options)})),options:n,listenersByType:r}}Object.defineProperty(O.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:O}),O.prototype.initCustomEvent=function(e,t,n,r){if(!(this instanceof O))throw new TypeError("Illegal invocation");var i=M.get(this);O.call(this,e,{bubbles:t,cancelable:n,detail:r},arguments[4]),i._dispatched||(void 0!==r&&(i.detail=r),Object.defineProperty(this,"detail",{get:function(){return i.detail}}))},O[Symbol.toStringTag]="Function",O.prototype[Symbol.toStringTag]="CustomEventPrototype",Object.defineProperty(O.prototype,"detail",{enumerable:!0,configurable:!0,get:function(){throw new TypeError("Illegal invocation")}}),Object.defineProperty(O,"prototype",{writable:!1});var j={addListener:function(e,t,n,r){var i=N(e,n,r),o=i.listenersByTypeOptions;r=i.options;var a=i.listenersByType;o.some((function(e){return e.listener===t}))||a.push({listener:t,options:r})},removeListener:function(e,t,n,r){var i=N(e,n,r),o=i.listenersByType,a=JSON.stringify(i.options);o.some((function(r,i){return r.listener===t&&a===JSON.stringify(r.options)&&(o.splice(i,1),o.length||delete e[n],!0)}))},hasListener:function(e,t,n,r){return N(e,n,r).listenersByTypeOptions.some((function(e){return e.listener===t}))}};function z(){throw new TypeError("Illegal constructor")}Object.assign(z.prototype,["Early","","Late","Default"].reduce((function(e,t){return["add","remove","has"].forEach((function(n){e[n+t+"EventListener"]=function(e,r){var i=arguments[2];if(arguments.length<2)throw new TypeError("2 or more arguments required");if("string"!=typeof e)throw new B("UNSPECIFIED_EVENT_TYPE_ERR","UNSPECIFIED_EVENT_TYPE_ERR");try{r.handleEvent&&r.handleEvent.bind&&(r=r.handleEvent.bind(r))}catch(a){}var o="_"+t.toLowerCase()+(""===t?"l":"L")+"isteners";return this[o]||Object.defineProperty(this,o,{value:{}}),j[n+"Listener"](this[o],r,e,i)}})),e}),{})),Object.assign(z.prototype,{__setOptions:function(e){e=e||{},this._defaultSync=e.defaultSync,this._extraProperties=e.extraProperties||[],e.legacyOutputDidListenersThrowFlag&&(this._legacyOutputDidListenersThrowCheck=!0,this._extraProperties.push("__legacyOutputDidListenersThrowError"))},dispatchEvent:function(e){return this._dispatchEvent(e,!0)},_dispatchEvent:function(e,t){var n=this;["early","","late","default"].forEach((function(e){var t="_"+e+(""===e?"l":"L")+"isteners";n[t]||Object.defineProperty(n,t,{value:{}})}));var r,i=M.get(e);if(i&&t&&i._dispatched)throw new B("The object is in an invalid state.","InvalidStateError");i?r=e:(r=P(e),(i=M.get(r))._dispatched=!0,this._extraProperties.forEach((function(t){t in e&&(r[t]=e[t])})));var o=r.type;function a(){i.eventPhase=D.NONE,i.currentTarget=null,delete i._children}function s(){i._stopImmediatePropagation=void 0,i._stopPropagation=void 0,r.defaultPrevented&&i.cancelable||(i.eventPhase=D.AT_TARGET,r.target.invokeCurrentListeners(r.target._defaultListeners,r,o)),a()}var l=function(){return i._stopImmediatePropagation=void 0,i._stopPropagation=void 0,n._defaultSync?s():setTimeout(s,0),i.eventPhase=D.AT_TARGET,i._stopPropagation||(i._stopImmediatePropagation=void 0,i._stopPropagation=void 0,r.target.invokeCurrentListeners(r.target._lateListeners,r,o)),a(),!r.defaultPrevented};switch(t&&(i.target=this),r.eventPhase){default:case D.NONE:if(i.eventPhase=D.AT_TARGET,this.invokeCurrentListeners(this._earlyListeners,r,o),!this.__getParent)return i.eventPhase=D.AT_TARGET,this._dispatchEvent(r,!1);for(var c=this,u=this;c.__getParent&&null!==(c=c.__getParent());)i._children||(i._children=[]),i._children.push(u),u=c;return u._defaultSync=this._defaultSync,i.eventPhase=D.CAPTURING_PHASE,u._dispatchEvent(r,!1);case D.CAPTURING_PHASE:if(i._stopPropagation)return l();this.invokeCurrentListeners(this._listeners,r,o);var h=i._children&&i._children.length&&i._children.pop();return h&&h!==r.target||(i.eventPhase=D.AT_TARGET),h&&(h._defaultSync=this._defaultSync),(h||this)._dispatchEvent(r,!1);case D.AT_TARGET:return i._stopPropagation?l():(this.invokeCurrentListeners(this._listeners,r,o,!0),i.bubbles?(i.eventPhase=D.BUBBLING_PHASE,this._dispatchEvent(r,!1)):l());case D.BUBBLING_PHASE:if(i._stopPropagation)return l();var d=this.__getParent&&this.__getParent();return d?(d.invokeCurrentListeners(d._listeners,r,o,!0),d._defaultSync=this._defaultSync,d._dispatchEvent(r,!1)):l()}},invokeCurrentListeners:function(e,t,n,r){var i=this,o=M.get(t);o.currentTarget=this;var a=N(e,n,{}).listenersByType.concat(),s=a.length?1:0;return a.some((function(e,a){var l=r?i["on"+n]:null;if(o._stopImmediatePropagation)return!0;a===s&&"function"==typeof l&&i.tryCatch(t,(function(){!1===l.call(t.currentTarget,t)&&t.preventDefault()}));var c=e.options,u=c.once,h=c.passive,d=c.capture;if(o._passive=h,d&&t.target!==t.currentTarget&&t.eventPhase===D.CAPTURING_PHASE||t.eventPhase===D.AT_TARGET||!d&&t.target!==t.currentTarget&&t.eventPhase===D.BUBBLING_PHASE){var p=e.listener;i.tryCatch(t,(function(){p.call(t.currentTarget,t)})),u&&i.removeEventListener(n,p,c)}return!1})),this.tryCatch(t,(function(){var e=r?i["on"+n]:null;"function"==typeof e&&a.length<2&&!1===e.call(t.currentTarget,t)&&t.preventDefault()})),!t.defaultPrevented},
// eslint-disable-next-line promise/prefer-await-to-callbacks
tryCatch:function(e,t){try{t()}catch(n){this.triggerErrorEvent(n,e)}},triggerErrorEvent:function(e,t){var n,r=e;"string"==typeof e&&(r=new Error("Uncaught exception: "+e));var i=!1;"undefined"==typeof window||"undefined"==typeof ErrorEvent||window&&"object"===("undefined"==typeof window?"undefined":A(window))&&!window.dispatchEvent?(i=!0,n=function(){setTimeout((function(){throw r}))}):n=function(){var t=new ErrorEvent("error",{error:e,message:r.message||"",
// We can't get the actually useful user's values!
filename:r.fileName||"",lineno:r.lineNumber||0,colno:r.columnNumber||0});window.dispatchEvent(t)},i&&this._legacyOutputDidListenersThrowCheck||n(),this._legacyOutputDidListenersThrowCheck&&(t.__legacyOutputDidListenersThrowError=r)}}),z.prototype[Symbol.toStringTag]="EventTargetPrototype",Object.defineProperty(z,"prototype",{writable:!1});var R=z,q={createInstance:function(e){function t(){this.__setOptions(e)}return t.prototype=R.prototype,new t}};function $(){Object.setPrototypeOf(O,F),Object.setPrototypeOf(O.prototype,F.prototype)}z.ShimEvent=F,z.ShimCustomEvent=O,z.ShimDOMException=B,z.ShimEventTarget=z,z.EventTargetFactory=q;var U={},H={};[
// Boolean for verbose reporting
"DEBUG",
// Effectively defaults to false (ignored unless `true`)
// Boolean (effectively defaults to true) on whether to cache WebSQL
//  `openDatabase` instances
"cacheDatabaseInstances",
// Boolean on whether to auto-name databases (based on an
//   auto-increment) when the empty string is supplied; useful with
//   `memoryDatabase`; defaults to `false` which means the empty string
//   will be used as the (valid) database name
"autoName",
// Determines whether the slow-performing `Object.setPrototypeOf`
//    calls required for full WebIDL compliance will be used. Probably
//    only needed for testing or environments where full introspection
//    on class relationships is required; see
//    http://stackoverflow.com/questions/41927589/rationales-consequences-of-webidl-class-inheritance-requirements
"fullIDLSupport",
// Effectively defaults to false (ignored unless `true`)
// Boolean on whether to perform origin checks in `IDBFactory` methods
// Effectively defaults to `true` (must be set to `false` to cancel checks)
"checkOrigin",
// Used by `IDBCursor` continue methods for number of records to cache;
//  Defaults to 100
"cursorPreloadPackSize",
// See optional API (`shimIndexedDB.__setUnicodeIdentifiers`);
//    or just use the Unicode builds which invoke this method
//    automatically using the large, fully spec-compliant, regular
//    expression strings of `src/UnicodeIdentifiers.js`)
// In the non-Unicode builds, defaults to /[$A-Z_a-z]/
"UnicodeIDStart",
// In the non-Unicode builds, defaults to /[$0-9A-Z_a-z]/
"UnicodeIDContinue",
// Used by SCA.js for optional restructuring of typeson-registry
//   Structured Cloning Algorithm; should only be needed for ensuring data
//   created in 3.* versions of IndexedDBShim continue to work; see the
//   library `typeson-registry-sca-reverter` to get a function to do this
"registerSCA",
// BROWSER-SPECIFIC CONFIG
"avoidAutoShim",
// Where WebSQL is detected but where `indexedDB` is
//    missing or poor support is known (non-Chrome Android or
//    non-Safari iOS9), the shim will be auto-applied without
//   `shimIndexedDB.__useShim()`. Set this to `true` to avoid forcing
//    the shim for such cases.
// -----------SQL CONFIG----------
// Object (`window` in the browser) on which there may be an
//  `openDatabase` method (if any) for WebSQL. (The browser
//  throws if attempting to call `openDatabase` without the window
//  so this is why the config doesn't just allow the function.)
// Defaults to `window` or `self` in browser builds or
//  a singleton object with the `openDatabase` method set to
//  the "websql" package in Node.
"win",
// For internal `openDatabase` calls made by `IDBFactory` methods;
//  per the WebSQL spec, "User agents are expected to use the display name
//  and the estimated database size to optimize the user experience.
//  For example, a user agent could use the estimated size to suggest an
//  initial quota to the user. This allows a site that is aware that it
//  will try to use hundreds of megabytes to declare this upfront, instead
//  of the user agent prompting the user for permission to increase the
//  quota every five megabytes."
// Defaults to (4 * 1024 * 1024) or (25 * 1024 * 1024) in Safari
"DEFAULT_DB_SIZE",
// Whether to create indexes on SQLite tables (and also whether to try
//   dropping)
// Effectively defaults to `false` (ignored unless `true`)
"useSQLiteIndexes",
// NODE-IMPINGING SETTINGS (created for sake of limitations in Node
//    or desktop file system implementation but applied by default in
//    browser for parity)
// File system module with `unlink` to remove deleted database files
"fs",
// Used when setting global shims to determine whether to try to add
//   other globals shimmed by the library (`ShimDOMException`,
//   `ShimDOMStringList`, `ShimEvent`, `ShimCustomEvent`, `ShimEventTarget`)
// Effectively defaults to `false` (ignored unless `true`)
"addNonIDBGlobals",
// Used when setting global shims to determine whether to try to overwrite
//   other globals shimmed by the library (`DOMException`, `DOMStringList`,
//   `Event`, `CustomEvent`, `EventTarget`)
// Effectively defaults to `false` (ignored unless `true`)
"replaceNonIDBGlobals",
// Overcoming limitations with node-sqlite3/storing database name on
//   file systems
// https://en.wikipedia.org/wiki/Filename#Reserved_characters_and_words
// Defaults to prefixing database with `D_`, escaping
//   `databaseCharacterEscapeList`, escaping NUL, and
//   escaping upper case letters, as well as enforcing
//   `databaseNameLengthLimit`
"escapeDatabaseName",
// Not used internally; usable as a convenience method
"unescapeDatabaseName",
// Defaults to global regex representing the following
//   (characters nevertheless commonly reserved in modern,
//   Unicode-supporting systems): 0x00-0x1F 0x7F " * / : < > ? \ |
"databaseCharacterEscapeList",
// Defaults to 254 (shortest typical modern file length limit)
"databaseNameLengthLimit",
// Boolean defaulting to true on whether to escape NFD-escaping
//   characters to avoid clashes on MacOS which performs NFD on files
"escapeNFDForDatabaseNames",
// Boolean on whether to add the `.sqlite` extension to file names;
//   defaults to `true`
"addSQLiteExtension",
// Various types of in-memory databases that can auto-delete
["memoryDatabase",function(e){if(!/^(?::memory:|file::memory:(\?(?:[\0-"\$-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?(#(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?)?$/.test(e))throw new TypeError('`memoryDatabase` must be the empty string, ":memory:", or a "file::memory:[?queryString][#hash] URL".')}],
// NODE-SPECIFIC CONFIG
// Boolean on whether to delete the database file itself after
//   `deleteDatabase`; defaults to `true` as the database will be empty
"deleteDatabaseFiles","databaseBasePath","sysDatabaseBasePath",
// NODE-SPECIFIC WEBSQL CONFIG
"sqlBusyTimeout",
// Defaults to 1000
"sqlTrace",
// Callback not used by default
"sqlProfile"].forEach((function(e){var t;if(Array.isArray(e)){var n=m(e,2);e=n[0],t=n[1]}Object.defineProperty(H,e,{get:function(){return U[e]},set:function(n){t&&t(n),U[e]=n}})}));var W=/[\xC0-\xC5\xC7-\xCF\xD1-\xD6\xD9-\xDD\xE0-\xE5\xE7-\xEF\xF1-\xF6\xF9-\xFD\xFF-\u010F\u0112-\u0125\u0128-\u0130\u0134-\u0137\u0139-\u013E\u0143-\u0148\u014C-\u0151\u0154-\u0165\u0168-\u017E\u01A0\u01A1\u01AF\u01B0\u01CD-\u01DC\u01DE-\u01E3\u01E6-\u01F0\u01F4\u01F5\u01F8-\u021B\u021E\u021F\u0226-\u0233\u0344\u0385\u0386\u0388-\u038A\u038C\u038E-\u0390\u03AA-\u03B0\u03CA-\u03CE\u03D3\u03D4\u0400\u0401\u0403\u0407\u040C-\u040E\u0419\u0439\u0450\u0451\u0453\u0457\u045C-\u045E\u0476\u0477\u04C1\u04C2\u04D0-\u04D3\u04D6\u04D7\u04DA-\u04DF\u04E2-\u04E7\u04EA-\u04F5\u04F8\u04F9\u0622-\u0626\u06C0\u06C2\u06D3\u0929\u0931\u0934\u0958-\u095F\u09CB\u09CC\u09DC\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B48\u0B4B\u0B4C\u0B5C\u0B5D\u0B94\u0BCA-\u0BCC\u0C48\u0CC0\u0CC7\u0CC8\u0CCA\u0CCB\u0D4A-\u0D4C\u0DDA\u0DDC-\u0DDE\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u0F73\u0F75\u0F76\u0F78\u0F81\u0F93\u0F9D\u0FA2\u0FA7\u0FAC\u0FB9\u1026\u1B06\u1B08\u1B0A\u1B0C\u1B0E\u1B12\u1B3B\u1B3D\u1B40\u1B41\u1B43\u1E00-\u1E99\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FC1-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEE\u1FF2-\u1FF4\u1FF6-\u1FFC\u212B\u219A\u219B\u21AE\u21CD-\u21CF\u2204\u2209\u220C\u2224\u2226\u2241\u2244\u2247\u2249\u2260\u2262\u226D-\u2271\u2274\u2275\u2278\u2279\u2280\u2281\u2284\u2285\u2288\u2289\u22AC-\u22AF\u22E0-\u22E3\u22EA-\u22ED\u2ADC\u304C\u304E\u3050\u3052\u3054\u3056\u3058\u305A\u305C\u305E\u3060\u3062\u3065\u3067\u3069\u3070\u3071\u3073\u3074\u3076\u3077\u3079\u307A\u307C\u307D\u3094\u309E\u30AC\u30AE\u30B0\u30B2\u30B4\u30B6\u30B8\u30BA\u30BC\u30BE\u30C0\u30C2\u30C5\u30C7\u30C9\u30D0\u30D1\u30D3\u30D4\u30D6\u30D7\u30D9\u30DA\u30DC\u30DD\u30F4\u30F7-\u30FA\u30FE\uAC00-\uD7A3\uFB1D\uFB1F\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4E]|\uD804[\uDC9A\uDC9C\uDCAB\uDD2E\uDD2F\uDF4B\uDF4C]|\uD805[\uDCBB\uDCBC\uDCBE\uDDBA\uDDBB]|\uD806\uDD38|\uD834[\uDD5E-\uDD64\uDDBB-\uDDC0]/;function G(e){return e.replace(/((?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])))(?!(?:(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))|(^|(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))((?:(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,(function(e,t,n,r){return t?"^2"+t.codePointAt().toString(16).padStart(4,"0"):(n||"")+"^3"+r.codePointAt().toString(16).padStart(4,"0")}))}function V(e){return"_"+// Prevent empty string
G(e.replace(/\^/g,"^^").replace(/\0/g,"^0").replace(/([A-Z])/g,"^$1"))}function Y(e){return G(e.replace(/\^/g,"^^").replace(/\0/g,"^0"))}function K(e){return Q(e).replace(/(\^+)0/g,(function(e,t){return t.length%2?t.slice(1)+"\0":e})).replace(/\^\^/g,"^")}function X(e){return e.replace(/"/g,'""')}function Z(e){return'"'+X(e)+'"'}function J(e){if(H.escapeDatabaseName)return H.escapeDatabaseName(Y(e));if(e="D"+V(e),!1!==H.escapeNFDForDatabaseNames&&(e=e.replace(new RegExp(W,"gu"),(function(e){return"^4"+e.codePointAt().toString(16).padStart(6,"0")}))),!1!==H.databaseCharacterEscapeList&&(e=e.replace(H.databaseCharacterEscapeList?new RegExp(H.databaseCharacterEscapeList,"gu"):/[\0-\x1F"\*\/:<>\?\\\|\x7F]/g,(
// eslint-disable-line no-control-regex
function(e){return"^1"+e.charCodeAt().toString(16).padStart(2,"0")}))),!1!==H.databaseNameLengthLimit&&e.length>=(H.databaseNameLengthLimit||254)-(!1!==H.addSQLiteExtension?7:0))throw new Error("Unexpectedly long database name supplied; length limit required for Node compatibility; passed length: "+e.length+"; length limit setting: "+(H.databaseNameLengthLimit||254)+".");return e+(!1!==H.addSQLiteExtension?".sqlite":"")}function Q(e){return e.replace(/(\^+)3(d[0-9a-f]{3})/g,(function(e,t,n){return t.length%2?t.slice(1)+String.fromCodePoint(Number.parseInt(n,16)):e})).replace(/(\^+)2(d[0-9a-f]{3})/g,(function(e,t,n){return t.length%2?t.slice(1)+String.fromCodePoint(Number.parseInt(n,16)):e}))}function ee(e){return Z("S"+V(e))}function te(e){return Z("I"+V(e))}function ne(e){return"I"+V(e)}function re(e){return X(e).replace(/\^/g,"^^")}function ie(e,t){return t[Symbol.hasInstance](e)}function oe(e){return e&&"object"===o(e)}function ae(e){return oe(e)&&"function"==typeof e.getDate}function se(e){return oe(e)&&"number"==typeof e.size&&"function"==typeof e.slice&&!("lastModified"in e)}function le(e){return oe(e)&&"string"==typeof e.name&&"function"==typeof e.slice&&"lastModified"in e}function ce(e){return oe(e)&&"number"==typeof e.byteLength&&("function"==typeof e.slice||// `TypedArray` (view on buffer) or `ArrayBuffer`
"function"==typeof e.getFloat64)}function ue(e){return oe(e)&&"function"==typeof e[Symbol.iterator]}function he(t,n){n.forEach((function(n){var r,i=(e("get",r={},n,(function(){throw new TypeError("Illegal invocation")})),e("set",r,n,(function(e){throw new TypeError("Illegal invocation")})),r),o=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,o)}))}function de(t,n){n.forEach((function(n){var r=e("get",{},n,(function(){throw new TypeError("Illegal invocation")})),i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i)}))}function pe(t,n){(n="string"==typeof n?[n]:n).forEach((function(n){var r,i=(e("get",r={},n,(function(){return t["__"+n]})),e("set",r,n,(function(e){t["__"+n]=e})),r),o=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,o)})),n.forEach((function(e){t[e]=null}))}function fe(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(n="string"==typeof n?[n]:n).forEach((function(n){var i;r&&n in r?i=r[n]:(Object.defineProperty(t,"__"+n,{enumerable:!1,configurable:!1,writable:!0}),i=e("get",{},n,(function(){return this["__"+n]})));var o=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,o)}))}function me(e){var t=H.UnicodeIDStart||"[$A-Z_a-z]",n=H.UnicodeIDContinue||"[$0-9A-Z_a-z]";return new RegExp("^(?:"+t+"|[$_])(?:"+n+"|[$_])*$","u").test(e)}function ge(e){return"string"==typeof e&&(""===e||me(e)||e.split(".").every((function(e){return me(e)})))}function ve(e){return ge(e)||Array.isArray(e)&&e.length&&// Convert array from sparse to dense http://www.2ality.com/2012/06/dense-arrays.html
// See also https://heycam.github.io/webidl/#idl-DOMString
g(e).every((function(e){return ge(e)}))}function ye(e,t){var n,r;switch(e=Math.floor(Number(e)),t){case"unsigned long long":n=9007199254740991,r=0;break;case"unsigned long":n=4294967295,r=0;break;default:throw new Error("Unrecognized type supplied to enforceRange")}if(!Number.isFinite(e)||e>n||e<r)throw new TypeError("Invalid range: "+e);return e}function be(e,t){return null===e&&t?"":_e(e)}function _e(e){return""+e}function we(e){return ue(e)?g(e).map((function(e){return _e(e)})):_e(e)}function ke(e){return null==e}function xe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ce(e,t,n){var r=new F(e,n);return r.debug=t,r}Object.defineProperty(F,Symbol.hasInstance,{value:function(e){return oe(e)&&"target"in e&&"boolean"==typeof e.bubbles}});var Se=["oldVersion","newVersion"];function Te(e){F.call(this,e),this[Symbol.toStringTag]="IDBVersionChangeEvent",this.toString=function(){return"[object IDBVersionChangeEvent]"},this.__eventInitDict=arguments[1]||{}}function Ee(e,t){return new DOMException.prototype.constructor(t,e||"DOMException")}Te.prototype=Object.create(F.prototype),Te.prototype[Symbol.toStringTag]="IDBVersionChangeEventPrototype",Se.forEach((function(t){var n=e("get",{},t,(function(){if(!(this instanceof Te))throw new TypeError("Illegal invocation");return this.__eventInitDict&&this.__eventInitDict[t]||("oldVersion"===t?0:null)})),r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(Te.prototype,t,r)})),Object.defineProperty(Te,Symbol.hasInstance,{value:function(e){return oe(e)&&"oldVersion"in e&&"boolean"==typeof e.defaultPrevented}}),Object.defineProperty(Te.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:Te}),Object.defineProperty(Te,"prototype",{writable:!1});var Ie={IndexSizeError:1,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NoModificationAllowedError:7,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,SyntaxError:12,InvalidModificationError:13,NamespaceError:14,InvalidAccessError:15,TypeMismatchError:17,SecurityError:18,NetworkError:19,AbortError:20,URLMismatchError:21,QuotaExceededError:22,TimeoutError:23,InvalidNodeTypeError:24,DataCloneError:25,EncodingError:0,NotReadableError:0,UnknownError:0,ConstraintError:0,DataError:0,TransactionInactiveError:0,ReadOnlyError:0,VersionError:0,OperationError:0,NotAllowedError:0},Ae={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function De(){function e(e,t){this[Symbol.toStringTag]="DOMException",this._code=t in Ie?Ie[t]:Ae[t]||0,this._name=t||"Error",this._message=void 0===e?"":""+e,Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,writable:!0,value:this._code}),void 0!==t&&Object.defineProperty(this,"name",{configurable:!0,enumerable:!0,writable:!0,value:this._name}),void 0!==e&&Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,writable:!0,value:this._message})}var t=function(){};return t.prototype=Object.create(Error.prototype),["name","message"].forEach((function(n){Object.defineProperty(t.prototype,n,{enumerable:!0,get:function(){if(!(this instanceof e||this instanceof t||this instanceof Error))throw new TypeError("Illegal invocation");return this["_"+n]}})})),Object.defineProperty(t.prototype,"code",{configurable:!0,enumerable:!0,get:function(){throw new TypeError("Illegal invocation")}}),e.prototype=new t,e.prototype[Symbol.toStringTag]="DOMExceptionPrototype",Object.defineProperty(e,"prototype",{writable:!1}),Object.keys(Ie).forEach((function(t){Object.defineProperty(e.prototype,t,{enumerable:!0,configurable:!1,value:Ie[t]}),Object.defineProperty(e,t,{enumerable:!0,configurable:!1,value:Ie[t]})})),Object.keys(Ae).forEach((function(t){Object.defineProperty(e.prototype,t,{enumerable:!0,configurable:!1,value:Ae[t]}),Object.defineProperty(e,t,{enumerable:!0,configurable:!1,value:Ae[t]})})),Object.defineProperty(e.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:e}),e}var Be=De();function Le(e,t){return new Be(t,e)}function Me(e,t,n){H.DEBUG&&(n&&n.message&&(n=n.message),console.error,console.trace)}function Fe(e){return e&&"object"===o(e)&&// We don't use util.isObj here as mutual dependency causing problems in Babel with browser
"string"==typeof e.name}function Oe(e){var t;if(e){if(1===e.length)return e[0];var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(Fe(i))return i;i&&"string"==typeof i.message&&(t=i)}}catch(o){r.e(o)}finally{r.f()}}return t}function Pe(e){var t,n;4===e.code?(t="QuotaExceededError",n="The operation failed because there was not enough remaining storage space, or the storage quota was reached and the user declined to give more space to the database."):(t="UnknownError",n="The operation failed for reasons unrelated to the database itself and not covered by any other errors."),n+=" ("+e.message+")--("+e.code+")";var r=ze(t,n);return r.sqlError=e,r}var Ne,je=!1;try{Fe(Ne=Ee("test name","test message"))&&"test name"===Ne.name&&"test message"===Ne.message&&(je=!0)}catch(wi){}var ze=je?function(e,t,n){return Me(e,t,n),Ee(e,t)}:function(e,t,n){return Me(e,t,n),Le(e,t)},Re=je?DOMException:Be,qe=["onsuccess","onerror"],$e=["source","transaction","readyState"],Ue=["result","error"];function He(){throw new TypeError("Illegal constructor")}He.__super=function(){var e=this;this[Symbol.toStringTag]="IDBRequest",this.__setOptions({legacyOutputDidListenersThrowFlag:!0}),Ue.forEach((function(t){Object.defineProperty(e,"__"+t,{enumerable:!1,configurable:!1,writable:!0}),Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){if(!this.__done)throw ze("InvalidStateError","Can't get "+t+"; the request is still pending.");return this["__"+t]}})})),fe(this,$e,{readyState:{get readyState(){return this.__done?"done":"pending"}}}),pe(this,qe),this.__result=void 0,this.__error=this.__source=this.__transaction=null,this.__done=!1},He.__createInstance=function(){return new He.__super},He.prototype=q.createInstance({extraProperties:["debug"]}),He.prototype[Symbol.toStringTag]="IDBRequestPrototype",He.prototype.__getParent=function(){return"[object IDBOpenDBRequest]"===this.toString()?null:this.__transaction},de(He.prototype,$e),de(He.prototype,Ue),he(He.prototype,qe),Object.defineProperty(He.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:He}),He.__super.prototype=He.prototype,Object.defineProperty(He,"prototype",{writable:!1});var We=["onblocked","onupgradeneeded"];function Ge(){throw new TypeError("Illegal constructor")}Ge.prototype=Object.create(He.prototype),Object.defineProperty(Ge.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:Ge});var Ve=Ge;function Ye(e){return e&&"function"==typeof e.then}function Ke(e,t){e.then(null,t)}Ge.__createInstance=function(){function e(){He.__super.call(this),this[Symbol.toStringTag]="IDBOpenDBRequest",this.__setOptions({legacyOutputDidListenersThrowFlag:!0,
// Event hook for IndexedB
extraProperties:["oldVersion","newVersion","debug"]}),pe(this,We)}return e.prototype=Ve.prototype,new e},he(Ge.prototype,We),Ge.prototype[Symbol.toStringTag]="IDBOpenDBRequestPrototype",Object.defineProperty(Ge,"prototype",{writable:!1});var Xe=2,Ze=0,Je=1;function Qe(e){var t=this;function n(e,n){t.v=e,t.s=n,t.c[n].forEach((function(t){t(e)})),t.c[n].length&&(t.c=null)}function r(e){t.c&&(Ye(e)?Ke(e.then(r),i):n(e,Ze))}function i(e){t.c&&(Ye(e)?Ke(e.then(i),i):n(e,Je))}t.v=0,t.s=Xe,t.c=[[],[]];try{e(r,i)}catch(o){i(o)}}var et=Qe.prototype;et.then=function(e,t){var n=this;return new Qe((function(r,i){var o="function"==typeof t?t:i;function a(){try{r(e?e(n.v):n.v)}catch(wi){o(wi)}}n.s===Ze?a():n.s===Je?o(n.v):(n.c[Ze].push(a),n.c[Je].push(o))}))},et.catch=function(e){var t=this;return new Qe((function(n,r){function i(){try{n(e(t.v))}catch(wi){r(wi)}}t.s===Je?i():t.s===Ze?n(t.v):(t.c[Je].push(i),t.c[Ze].push(n))}))},Qe.all=function(e){return new Qe((function(t,n,r){r=e.length;var i=[];r?e.forEach((function(o,a){Ye(o)?Ke(o.then((function(e){i[a]=e,--r||t(i)})),n):(i[a]=o,--r||t(e))})):t(i)}))},Qe.race=function(e){var t=!1;return new Qe((function(n,r){e.some((function(e,i){if(!Ye(e))return n(e),t=!0,!0;Ke(e.then((function(e){t||(n(e),t=!0)})),r)}))}))},Qe.resolve=function(e){return new Qe((function(t,n){t(e)}))},Qe.reject=function(e){return new Qe((function(t,n){n(e)}))};var tt=Qe;function nt(e,t){var n=Lt(e),r=Lt(t),i=n>r?1:n===r?0:-1;if(H.DEBUG){var a=Mt(n),s=Mt(r);"object"===o(e)&&(e=JSON.stringify(e),a=JSON.stringify(a)),"object"===o(t)&&(t=JSON.stringify(t),s=JSON.stringify(s))}return i}var rt={invalid:100,number:200,date:300,string:400,binary:500,array:600},it=Object.keys(rt);it.forEach((function(e){rt[e]=String.fromCodePoint(rt[e])}));var ot=it.reduce((function(e,t){return e[rt[t]]=t,e}),{}),at=["negativeInfinity","bigNegative","smallNegative","smallPositive","bigPositive","positiveInfinity"],st={invalid:{encode:function(e){return rt.invalid+"-"},decode:function(e){}},
// Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa
// notation.
// sign: takes a value between zero and five, inclusive. Represents infinite cases
//     and the signs of both the exponent and the fractional part of the number.
// exponent: padded to two base-32 digits, represented by the 32's compliment in the
//     "smallPositive" and "bigNegative" cases to ensure proper lexical sorting.
// mantissa: also called the fractional part. Normed 11-digit base-32 representation.
//     Represented by the 32's compliment in the "smallNegative" and "bigNegative"
//     cases to ensure proper lexical sorting.
number:{
// The encode step checks for six numeric cases and generates 14-digit encoded
// sign-exponent-mantissa strings.
encode:function(e){var t,n,r,i=e===Number.MIN_VALUE?"0."+"0".repeat(214)+"2":Math.abs(e).toString(32),o=i.indexOf("."),a=(i=-1!==o?i.replace(".",""):i).search(/(?:[\0-\/1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/);return i=i.slice(a),Number.isFinite(Number(e))?e<0?e>-1?(t=at.indexOf("smallNegative"),n=lt(a),r=ut(ct(i))):(t=at.indexOf("bigNegative"),n=ut(lt(-1!==o?o:i.length)),r=ut(ct(i))):e<1?(t=at.indexOf("smallPositive"),n=ut(lt(a)),r=ct(i)):(t=at.indexOf("bigPositive"),n=lt(-1!==o?o:i.length),r=ct(i)):(n=pt(2),r=pt(11),t=at.indexOf(e>0?"positiveInfinity":"negativeInfinity")),rt.number+"-"+t+n+r},
// The decode step must interpret the sign, reflip values encoded as the 32's complements,
// apply signs to the exponent and mantissa, do the base-32 power operation, and return
// the original JavaScript number values.
decode:function(e){var t=Number(e.slice(2,3)),n=e.slice(3,5),r=e.slice(5,16);switch(at[t]){case"negativeInfinity":return Number.NEGATIVE_INFINITY;case"positiveInfinity":return Number.POSITIVE_INFINITY;case"bigPositive":return ht(r,n);case"smallPositive":return ht(r,n=ft(ut(n)));case"smallNegative":return n=ft(n),-ht(r=ut(r),n);case"bigNegative":return n=ut(n),-ht(r=ut(r),n);default:throw new Error("Invalid number.")}}},
// Strings are encoded as JSON strings (with quotes and unicode characters escaped).
// If the strings are in an array, then some extra encoding is done to make sorting work correctly:
// Since we can't force all strings to be the same length, we need to ensure that characters line-up properly
// for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.
// To do this, each character of the string is prepended with a dash ("-"), and a space is added to the end of the string.
// This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,
// the indexes of each string's characters line up with each other.
string:{encode:function(e,t){return t&&(e=e.replace(/((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,"-$1")+" "),rt.string+"-"+e},decode:function(e,t){return e=e.slice(2),t&&(e=e.slice(0,-1).replace(/\x2D((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,"$1")),e}},
// Arrays are encoded as JSON strings.
// An extra, value is added to each array during encoding to make
//  empty arrays sort correctly.
array:{encode:function(e){var t,n=[],r=C(e.entries());try{for(r.s();!(t=r.n()).done;){var i=m(t.value,2),o=i[0],a=Lt(i[1],!0);n[o]=a}}catch(s){r.e(s)}finally{r.f()}return n.push(rt.invalid+"-"),rt.array+"-"+JSON.stringify(n)},decode:function(e){var t=JSON.parse(e.slice(2));t.pop();for(var n=0;n<t.length;n++){var r=Mt(t[n],!0);t[n]=r}return t}},
// Dates are encoded as ISO 8601 strings, in UTC time zone.
date:{encode:function(e){return rt.date+"-"+e.toJSON()},decode:function(e){return new Date(e.slice(2))}},binary:{
// `ArrayBuffer`/Views on buffers (`TypedArray` or `DataView`)
encode:function(e){return rt.binary+"-"+(e.byteLength?g(yt(e)).map((function(e){return String(e).padStart(3,"0")})):"")},decode:function(e){var t=e.slice(2),n=t.length?t.split(",").map((function(e){return Number.parseInt(e)})):[],r=new ArrayBuffer(n.length);return new Uint8Array(r).set(n),r}}};function lt(e){return 1===(e=e.toString(32)).length?"0"+e:e}function ct(e){return(e+pt(11)).slice(0,11)}function ut(e){var t,n="",r=C(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=(31-Number.parseInt(i,32)).toString(32)}}catch(o){r.e(o)}finally{r.f()}return n}function ht(e,t){if((t=Number.parseInt(t,32))<0)return dt(Number.parseInt(e,32)*Math.pow(32,t-10));if(t<11){var n=e.slice(0,t);n=Number.parseInt(n,32);var r=e.slice(t);return dt(n+(r=Number.parseInt(r,32)*Math.pow(32,t-11)))}var i=e+pt(t-11);return Number.parseInt(i,32)}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return Number.parseFloat(e.toPrecision(t))}function pt(e){return"0".repeat(e)}function ft(e){return"-"+e}function mt(e){if(Array.isArray(e))return"array";if(ae(e))return"date";if(ce(e))return"binary";var t=o(e);return["string","number"].includes(t)?t:"invalid"}function gt(e,t){return bt(e,t,!1,!0)}function vt(e){return bt(e,null,!0,!0)}function yt(e){var t=0,n=0;if(ArrayBuffer.isView(e)){if(void 0===e.buffer)throw new TypeError("Could not copy the bytes held by a buffer source as the buffer was undefined.");t=e.byteOffset,n=e.byteLength}else n=e.byteLength;return new Uint8Array(e.buffer||e,t,n)}function bt(e,t,n,r){if((t=t||[]).includes(e))return{type:"array",invalid:!0,message:"An array key cannot be circular"};var i=mt(e),a={type:i,value:e};switch(i){case"number":return Number.isNaN(e)?{type:"NaN",invalid:!0}:a;case"string":return a;case"binary":return{type:"binary",value:yt(e)};case"array":var s=e.length;t.push(e);for(var l=[],c=function(){if(!n&&!Object.prototype.hasOwnProperty.call(e,u))return{v:{type:i,invalid:!0,message:"Does not have own index property"}};try{var o=bt(e[u],t,!1,r);if(o.invalid)return n?"continue":{v:{type:i,invalid:!0,message:"Bad array entry value-to-key conversion"}};(!n||!r&&l.every((function(e){return 0!==nt(e,o.value)}))||r&&l.every((function(e){return 0!==nt(e,o)})))&&l.push(r?o:o.value)}catch(a){if(!n)throw a}},u=0;u<s;u++){var h=c();if("continue"!==h&&"object"===o(h))return h.v}return{type:i,value:l};case"date":return Number.isNaN(e.getTime())?{type:i,invalid:!0,message:"Not a valid date"}:r?{type:i,value:e.getTime()}:{type:i,value:new Date(e.getTime())};default:var d=null===e?"null":o(e);return{type:d,invalid:!0,message:"Not a valid key; type "+d}}}function _t(e,t){return bt(e,null,!0,t)}function wt(e,t){var n=gt(e,t);if(n.invalid)throw ze("DataError",n.message||"Not a valid key; type: "+n.type);return n}function kt(e,t,n){return Ct(e,t,n,!0)}function xt(e,t,n){return St(e,t)}function Ct(e,t,n,r){var i=St(e,t);return i.failure?i:n?_t(i.value,r):bt(i.value,null,!1,r)}function St(e,t,n,r){if(Array.isArray(t)){var i=[];return t.some((function(t){var n=St(e,t);return!!n.failure||(i.push(n.value),!1)}))?{failure:!0}:{value:i}}return""===t?{value:e}:t.split(".").some((function(t,n){if("length"!==t||"string"!=typeof e&&!Array.isArray(e))if(se(e))switch(t){case"size":case"type":e=e[t]}else{if(!le(e))return!oe(e)||!Object.prototype.hasOwnProperty.call(e,t)||void 0===(e=e[t]);switch(t){case"name":case"lastModified":e=e[t];break;case"lastModifiedDate":e=new Date(e.lastModified)}}else e=e.length;return!1}))?{failure:!0}:{value:e}}function Tt(e,t,n){var r=n.split("."),i=r.pop();r.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)||(e[t]={}),e=e[t]})),e[i]=t}function Et(e,t){var n=t.split(".");n.pop();var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!oe(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,o))return!0;e=e[o]}}catch(a){i.e(a)}finally{i.f()}return oe(e)}function It(e,t,n){var r=void 0===t.lower,i=void 0===t.upper,o=Lt(e,!0),a=n?t.__lowerCached:Lt(t.lower,!0),s=n?t.__upperCached:Lt(t.upper,!0);return void 0!==t.lower&&(t.lowerOpen&&o>a&&(r=!0),!t.lowerOpen&&o>=a&&(r=!0)),void 0!==t.upper&&(t.upperOpen&&o<s&&(i=!0),!t.upperOpen&&o<=s&&(i=!0)),r&&i}function At(e,t){return"array"===ot[t.slice(0,1)]?t.indexOf(e)>1:t===e}function Dt(e,t){var n=[];if(Array.isArray(e)){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(Array.isArray(o)){if(t&&t.lower===t.upper)continue;if(1!==o.length){Dt(o,t).length>0&&n.push(o);continue}o=o[0]}(ke(t)||It(o,t,!0))&&n.push(o)}}catch(a){i.e(a)}finally{i.f()}}else(ke(t)||It(e,t,!0))&&n.push(e);return n}function Bt(e){var t=e.type,n=e.value;switch(t){case"number":case"string":return n;case"array":for(var r=[],i=n.length,o=0;o<i;){var a=Bt(n[o]);r[o]=a,o++}return r;case"date":return new Date(n);case"binary":var s=n.length,l=new ArrayBuffer(s);return new Uint8Array(l,n.byteOffset||0,n.byteLength).set(n),l;default:throw new Error("Bad key")}}function Lt(e,t){return void 0===e?null:st[mt(e)].encode(e,t)}function Mt(e,t){if("string"==typeof e)return st[ot[e.slice(0,1)]].decode(e,t)}function Ft(e,t){return Mt(Lt(e,t),t)}var Ot=9007199254740992;function Pt(e,t,n,r){e.executeSql('SELECT "currNum" FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],(function(e,t){1!==t.rows.length?n(1):n(t.rows.item(0).currNum)}),(function(e,t){r(ze("DataError","Could not get the auto increment value for key",t))}))}function Nt(e,t,n,r,i){var o='UPDATE __sys__ SET "currNum" = ? WHERE "name" = ?',a=[n,Y(t.__currentName)];H.DEBUG,e.executeSql(o,a,(function(e,t){r(n)}),(function(e,t){i(ze("UnknownError","Could not set the auto increment value for key",t))}))}function jt(e,t,n,r,i){return Nt(e,t,n=n===Ot?n+2:n+1,r,i)}function zt(e,t,n,r){Pt(e,t,(function(i){i>Ot?n("failure"):jt(e,t,i,(function(){n(null,i,i)}),r)}),r)}function Rt(e,t,n,r,i){"number"!=typeof n||n<1?r():Pt(e,t,(function(o){var a=Math.floor(Math.min(n,Ot));a>=o?jt(e,t,a,(function(){r(o)}),i):r()}),i)}var qt=Object.freeze({__proto__:null,assignCurrentNumber:Nt,checkKeyCouldBeInjectedIntoValue:Et,convertKeyToValue:Bt,convertValueToKey:gt,convertValueToKeyRethrowingAndIfInvalid:wt,convertValueToKeyValueDecoded:bt,convertValueToMultiEntryKey:vt,convertValueToMultiEntryKeyDecoded:_t,decode:Mt,encode:Lt,evaluateKeyPathOnValue:xt,extractKeyFromValueUsingKeyPath:kt,extractKeyValueDecodedFromValueUsingKeyPath:Ct,findMultiEntryMatches:Dt,generateKeyForStore:zt,injectKeyIntoValueUsingKeyPath:Tt,isKeyInRange:It,isMultiEntryMatch:At,possiblyUpdateKeyGenerator:Rt,roundTrip:Ft}),$t=["lower","upper","lowerOpen","upperOpen"];function Ut(){throw new TypeError("Illegal constructor")}var Ht,Wt=Ut;function Gt(e,t,n,r,i,o){if(e&&(void 0!==e.lower||void 0!==e.upper)){var a,s;i&&n.push("AND");var l=void 0!==e.lower,c=void 0!==e.upper;if(l&&(a=o?e.__lowerCached:Lt(e.lower)),c&&(s=o?e.__upperCached:Lt(e.upper)),l){if(r.push(Y(a)),c&&a===s&&!e.lowerOpen&&!e.upperOpen)return void n.push(t,"=","?");n.push(t,e.lowerOpen?">":">=","?")}l&&c&&n.push("AND"),c&&(n.push(t,e.upperOpen?"<":"<=","?"),r.push(Y(s)))}}function Vt(e,t){if(ie(e,Ut))return"[object IDBKeyRange]"!==e.toString()?Ut.__createInstance(e.lower,e.upper,e.lowerOpen,e.upperOpen):e;if(!ke(e))return wt(e),Ut.only(e);if(t)throw ze("DataError","No key or range was specified")}Ut.__createInstance=function(e,t,n,r){function i(){if(this[Symbol.toStringTag]="IDBKeyRange",void 0===e&&void 0===t)throw ze("DataError","Both arguments to the key range method cannot be undefined");var i,o;if(void 0!==e&&(i=Ft(e),wt(e)),void 0!==t&&(o=Ft(t),wt(t)),void 0!==e&&void 0!==t&&e!==t&&Lt(e)>Lt(t))throw ze("DataError","`lower` must not be greater than `upper` argument in `bound()` call.");this.__lower=i,this.__upper=o,this.__lowerOpen=Boolean(n),this.__upperOpen=Boolean(r)}return i.prototype=Wt.prototype,new i},Ut.prototype.includes=function(e){if(!oe(this)||"boolean"!=typeof this.__lowerOpen)throw new TypeError("Illegal invocation");if(!arguments.length)throw new TypeError("IDBKeyRange.includes requires a key argument");return wt(e),It(e,this)},Ut.only=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.only requires a value argument");return Ut.__createInstance(e,e,!1,!1)},Ut.lowerBound=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.lowerBound requires a value argument");return Ut.__createInstance(e,void 0,arguments[1],!0)},Ut.upperBound=function(e){if(!arguments.length)throw new TypeError("IDBKeyRange.upperBound requires a value argument");return Ut.__createInstance(void 0,e,!0,arguments[1])},Ut.bound=function(e,t){if(arguments.length<=1)throw new TypeError("IDBKeyRange.bound requires lower and upper arguments");return Ut.__createInstance(e,t,arguments[2],arguments[3])},Ut.prototype[Symbol.toStringTag]="IDBKeyRangePrototype",$t.forEach((function(t){Object.defineProperty(Ut.prototype,"__"+t,{enumerable:!1,configurable:!1,writable:!0});var n=e("get",{},t,(function(){if(!oe(this)||"boolean"!=typeof this.__lowerOpen)throw new TypeError("Illegal invocation");return this["__"+t]})),r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(Ut.prototype,t,r)})),Object.defineProperty(Ut,Symbol.hasInstance,{value:function(e){return oe(e)&&"upper"in e&&"boolean"==typeof e.lowerOpen}}),Object.defineProperty(Ut,"prototype",{writable:!1});var Yt=!1,Kt={test:!0};if(Object.defineProperty)try{Object.defineProperty(Kt,"test",{enumerable:!1}),Kt.test&&(Yt=!0)}catch(wi){}var Xt=function(){throw new TypeError("Illegal constructor")};Xt.prototype=(Ht={constructor:Xt,
// Interface.
contains:function(e){if(!arguments.length)throw new TypeError("DOMStringList.contains must be supplied a value");return this._items.includes(e)},item:function(e){if(!arguments.length)throw new TypeError("DOMStringList.item must be supplied a value");return e<0||e>=this.length||!Number.isInteger(e)?null:this._items[e]},
// Helpers. Should only be used internally.
clone:function(){var e=Xt.__createInstance();return e._items=this._items.slice(),e._length=this.length,e.addIndexes(),e},addIndexes:function(){for(var e=0;e<this._items.length;e++)this[e]=this._items[e]},sortList:function(){return this._items.sort(),this.addIndexes(),this._items},forEach:function(e,t){this._items.forEach(e,t)},map:function(e,t){return this._items.map(e,t)},indexOf:function(e){return this._items.indexOf(e)},push:function(e){this._items.push(e),this._length++,this.sortList()},splice:function(){var e;for(var t in(e=this._items).splice.apply(e,arguments),this._length=this._items.length,this)t===String(Number.parseInt(t))&&delete this[t];this.sortList()}},h(Ht,Symbol.toStringTag,"DOMStringListPrototype"),h(Ht,Symbol.iterator,i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this._items.length)){e.next=6;break}return e.next=4,this._items[t++];case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e,this)}))),Ht),Object.defineProperty(Xt,Symbol.hasInstance,{value:function(e){return"DOMStringListPrototype"===Object.prototype.toString.call(e)}});var Zt=Xt;Object.defineProperty(Xt,"__createInstance",{value:function(){var e=function(){this.toString=function(){return"[object DOMStringList]"},Object.defineProperty(this,"length",{enumerable:!0,get:function(){return this._length}}),this._items=[],this._length=0};return e.prototype=Zt.prototype,new e}}),Yt&&(Object.defineProperty(Xt,"prototype",{writable:!1}),["addIndexes","sortList","forEach","map","indexOf","push","splice","constructor","__createInstance"].forEach((function(e){Object.defineProperty(Xt.prototype,e,{enumerable:!1})})),Object.defineProperty(Xt.prototype,"length",{configurable:!0,enumerable:!0,get:function(){throw new TypeError("Illegal invocation")}}),["_items","_length"].forEach((function(e){Object.defineProperty(Xt.prototype,e,{enumerable:!1,writable:!0})})));var Jt=0,Qt=["onabort","oncomplete","onerror"],en=["objectStoreNames","mode","db","error"];function tn(){throw new TypeError("Illegal constructor")}var nn=tn;function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function an(e){return(an="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":o(e)})(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fn(r.key),r)}}function cn(e,t,n){return t&&ln(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function un(e,t,n){return(t=fn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||dn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){if(e){if("string"==typeof e)return pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e){var t=function(e,t){if("object"!=o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==o(t)?t:String(t)}tn.__createInstance=function(e,t,n){function r(){var r=this,i=this;i[Symbol.toStringTag]="IDBTransaction",fe(i,en),i.__id=++Jt,i.__active=!0,i.__running=!1,i.__errored=!1,i.__requests=[],i.__objectStoreNames=t,i.__mode=n,i.__db=e,i.__error=null,i.__setOptions({legacyOutputDidListenersThrowFlag:!0}),en.forEach((function(e){Object.defineProperty(r,e,{configurable:!0})})),pe(this,Qt),i.__storeHandles={},setTimeout((function(){i.__executeRequests()}),0)}return r.prototype=nn.prototype,new r},tn.prototype=q.createInstance({defaultSync:!0,
// Ensure EventTarget preserves our properties
extraProperties:["complete"]}),tn.prototype.__transFinishedCb=function(e,t){t(Boolean(e))},tn.prototype.__executeRequests=function(){var e=this;function t(){function t(){e.__completed=!0,H.DEBUG;var t=Ce("complete");try{e.__internal=!0,e.dispatchEvent(t),e.__internal=!1,e.dispatchEvent(Ce("__complete"))}catch(wi){throw e.__internal=!1,e.__errored=!0,wi}finally{e.__storeHandles={}}}if(e.__active=!1,e.__requestsFinished=!0,"readwrite"===e.mode)return e.__transactionFinished?void t():void(e.__transactionEndCallback=t);if("readonly"!==e.mode){var n=Ce("__beforecomplete");n.complete=t,e.dispatchEvent(n)}else t()}e.__running?H.DEBUG:(e.__running=!0,e.db.__db["readonly"===e.mode?"readTransaction":"transaction"]((
// `readTransaction` is optimized, at least in `node-websql`
function(n){e.__tx=n;var r=null,i=-1;function o(t,n){if(!e.__errored&&!e.__requestsFinished&&(n&&(r.req=n),!r.req.__done)){r.req.__done=!0,r.req.__result=t,r.req.__error=null,e.__active=!0;var i=Ce("success");if(r.req.dispatchEvent(i),i.__legacyOutputDidListenersThrowError)return Me("Error","An error occurred in a success handler attached to request chain",i.__legacyOutputDidListenersThrowError),void e.__abortTransaction(ze("AbortError","A request was aborted (in user handler after success)."));s()}}function a(){if(!(e.__errored||e.__requestsFinished||r.req&&r.req.__done)){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=Oe(n);if(r.req){r.req.__done=!0,r.req.__error=o,r.req.__result=void 0,r.req.addLateEventListener("error",(function(e){e.cancelable&&e.defaultPrevented&&!e.__legacyOutputDidListenersThrowError&&s()})),r.req.addDefaultEventListener("error",(function(){e.__abortTransaction(r.req.__error)})),e.__active=!0;var a=Ce("error",o,{bubbles:!0,cancelable:!0});r.req.dispatchEvent(a),a.__legacyOutputDidListenersThrowError&&(Me("Error","An error occurred in an error handler attached to request chain",a.__legacyOutputDidListenersThrowError),a.preventDefault(),e.__abortTransaction(ze("AbortError","A request was aborted (in user handler after error).")))}else e.__abortTransaction(o)}}function s(){if(!e.__errored&&!e.__requestsFinished)if(++i>=e.__requests.length)e.__requests=[],e.__active&&t();else try{if(!(r=e.__requests[i]).req)return void r.op(n,r.args,s,a);if(r.req.__done)return;r.op(n,r.args,o,a,s)}catch(wi){a(wi)}}s()}),(function(t){if(!0!==t){var n=Pe(t);e.__abortTransaction(n)}}),(function(){e.__transFinishedCb===tn.prototype.__transFinishedCb&&(e.__transactionEndCallback||e.__requestsFinished?e.__transactionEndCallback&&!e.__completed&&e.__transFinishedCb(e.__errored,e.__transactionEndCallback):e.__transactionFinished=!0)}),(function(t,n,r,i,o){return!(!t.readOnly&&!n&&(e.__transFinishedCb=function(e,t){e?i(e,t):o(t)},e.__transactionEndCallback&&!e.__completed&&e.__transFinishedCb(e.__errored,e.__transactionEndCallback),1))})))},tn.prototype.__createRequest=function(e){var t=this,n=He.__createInstance();return n.__source=void 0!==e?e:t.db,n.__transaction=t,n},tn.prototype.__addToTransactionQueue=function(e,t,n){var r=this.__createRequest(n);return this.__pushToQueue(r,e,t),r},tn.prototype.__addNonRequestToTransactionQueue=function(e,t,n){this.__pushToQueue(null,e,t)},tn.prototype.__pushToQueue=function(e,t,n){this.__assertActive(),this.__requests.push({op:t,args:n,req:e})},tn.prototype.__assertActive=function(){if(!this.__active)throw ze("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")},tn.prototype.__assertWritable=function(){if("readonly"===this.mode)throw ze("ReadOnlyError","The transaction is read only")},tn.prototype.__assertVersionChange=function(){tn.__assertVersionChange(this)},tn.prototype.objectStore=function(e){var t=this;if(!(t instanceof tn))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No object store name was specified");if(tn.__assertNotFinished(t),-1===t.__objectStoreNames.indexOf(e))throw ze("NotFoundError",e+" is not participating in this transaction");var n=t.db.__objectStores[e];if(!n)throw ze("NotFoundError",e+" does not exist in "+t.db.name);return(!t.__storeHandles[e]||// These latter conditions are to allow store
//   recreation to create new clone object
t.__storeHandles[e].__pendingDelete||t.__storeHandles[e].__deleted)&&(t.__storeHandles[e]=Dr.__clone(n,t)),t.__storeHandles[e]},tn.prototype.__abortTransaction=function(e){var t=this;function n(n,r){n?(r&&r.code,H.DEBUG):H.DEBUG,t.dispatchEvent(Ce("__preabort")),t.__requests.filter((function(e,t,n){return e.req&&!e.req.__done&&[t,-1].includes(n.map((function(e){return e.req})).lastIndexOf(e.req))})).reduce((function(e,t){return e.then((function(){t.req.__done=!0,t.req.__result=void 0,t.req.__error=ze("AbortError","A request was aborted (an unfinished request).");var e=Ce("error",t.req.__error,{bubbles:!0,cancelable:!0});return new tt((function(n){setTimeout((function(){t.req.dispatchEvent(e),n()}))}))}))}),tt.resolve()).then((function(){var n=Ce("abort",e,{bubbles:!0,cancelable:!1});setTimeout((function(){t.__abortFinished=!0,t.dispatchEvent(n),t.__storeHandles={},t.dispatchEvent(Ce("__abort"))}))})).catch((function(e){throw e}))}Me("Error","An error occurred in a transaction",e),t.__errored||(t.__errored=!0,"versionchange"===t.mode&&(t.db.__version=t.db.__oldVersion,t.db.__objectStoreNames=t.db.__oldObjectStoreNames,t.__objectStoreNames=t.db.__oldObjectStoreNames,Object.values(t.db.__objectStores).concat(Object.values(t.__storeHandles)).forEach((function(e){"__pendingName"in e&&t.db.__oldObjectStoreNames.indexOf(e.__pendingName)>-1&&(e.__name=e.__originalName),e.__indexNames=e.__oldIndexNames,delete e.__pendingDelete,Object.values(e.__indexes).concat(Object.values(e.__indexHandles)).forEach((function(t){"__pendingName"in t&&e.__oldIndexNames.indexOf(t.__pendingName)>-1&&(t.__name=t.__originalName),delete t.__pendingDelete}))}))),t.__active=!1,null!==e&&(t.__error=e),t.__requestsFinished&&setTimeout((function(){throw e}),0),t.__transFinishedCb(!0,(function(e){if(e&&t.__tx){if("readwrite"===t.mode)return t.__transactionFinished?void n():void(t.__transactionEndCallback=n);try{t.__tx.executeSql("ROLLBACK",[],n,n)}catch(r){n()}}else n(null,{code:0})})))},tn.prototype.abort=function(){var e=this;if(!(e instanceof tn))throw new TypeError("Illegal invocation");H.DEBUG,tn.__assertNotFinished(e),e.__abortTransaction(null)},tn.prototype[Symbol.toStringTag]="IDBTransactionPrototype",tn.__assertVersionChange=function(e){if(!e||"versionchange"!==e.mode)throw ze("InvalidStateError","Not a version transaction")},tn.__assertNotVersionChange=function(e){if(e&&"versionchange"===e.mode)throw ze("InvalidStateError","Cannot be called during a version transaction")},tn.__assertNotFinished=function(e){if(!e||e.__completed||e.__abortFinished||e.__errored)throw ze("InvalidStateError","Transaction finished by commit or abort")},tn.__assertNotFinishedObjectStoreMethod=function(e){try{tn.__assertNotFinished(e)}catch(t){if(e&&!e.__completed&&!e.__abortFinished)throw ze("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished");throw t}},tn.__assertActive=function(e){if(!e||!e.__active)throw ze("TransactionInactiveError","A request was placed against a transaction which is currently not active, or which is finished")},tn.prototype.__getParent=function(){return this.db},he(tn.prototype,Qt),de(tn.prototype,en),Object.defineProperty(tn.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:tn}),Object.defineProperty(tn,"prototype",{writable:!1});var mn=cn((function e(t){sn(this,e),this.p=new Promise(t)}));mn.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&(mn.prototype[Symbol.toStringTag]="TypesonPromise"),mn.prototype.then=function(e,t){var n=this;return new mn((function(r,i){n.p.then((function(t){r(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(r,i)}))},mn.prototype.catch=function(e){return this.then(null,e)},mn.resolve=function(e){return new mn((function(t){t(e)}))},mn.reject=function(e){return new mn((function(t,n){n(e)}))},["all","race","allSettled"].forEach((function(e){mn[e]=function(t){return new mn((function(n,r){Promise[e](t.map((function(e){return e&&e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(n,r)}))}}));var gn={}.toString,vn={}.hasOwnProperty,yn=Object.getPrototypeOf,bn=vn.toString;function _n(e,t){return Sn(e)&&"function"==typeof e.then&&!0}function wn(e){return gn.call(e).slice(8,-1)}function kn(e,t){if(!e||"object"!==an(e))return!1;var n=yn(e);if(!n)return null===t;var r=vn.call(n,"constructor")&&n.constructor;return"function"!=typeof r?null===t:t===r||null!==t&&bn.call(r)===bn.call(t)||"function"==typeof t&&"string"==typeof r.__typeson__type__&&r.__typeson__type__===t.__typeson__type__}function xn(e){return!(!e||"Object"!==wn(e))&&(!yn(e)||kn(e,Object))}function Cn(e){if(!e||"Object"!==wn(e))return!1;var t=yn(e);return!t||kn(e,Object)||Cn(t)}function Sn(e){return e&&"object"===an(e)}function Tn(e){return e.replace(/''/g,"''''").replace(/^$/,"''").replace(/~/g,"~0").replace(/\./g,"~1")}function En(e){return e.replace(/~1/g,".").replace(/~0/g,"~").replace(/^''$/,"").replace(/''''/g,"''")}function In(e,t){if(""===t)return e;var n=t.indexOf(".");if(n>-1){var r=e[En(t.slice(0,n))];return void 0===r?void 0:In(r,t.slice(n+1))}return e[En(t)]}function An(e,t,n){if(""===t)return n;var r=t.indexOf(".");return r>-1?An(e[En(t.slice(0,r))],t.slice(r+1),n):(e[En(t)]=n,e)}function Dn(e){return null===e?"null":Array.isArray(e)?"array":an(e)}function Bn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Ln=Object.keys,Mn=Array.isArray,Fn={}.hasOwnProperty,On=["type","replaced","iterateIn","iterateUnsetNumeric"];function Pn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function Nn(e,t){if(""===e.keypath)return-1;var n=e.keypath.match(/\./g)||0,r=t.keypath.match(/\./g)||0;return n&&(n=n.length),r&&(r=r.length),n>r?-1:n<r?1:e.keypath<t.keypath?-1:e.keypath>t.keypath}var jn=function(){function e(t){sn(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return cn(e,[{key:"stringify",value:function(e,t,n,r){r=on(on(on({},this.options),r),{},{stringification:!0});var i=this.encapsulate(e,null,r);return Mn(i)?JSON.stringify(i[0],t,n):i.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,r){return this.stringify(e,t,n,on(on({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,r){return this.stringify(e,t,n,on(on({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=on(on(on({},this.options),n),{},{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,on(on({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,on(on({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(e,t,n){var r=Pn((function(e,t){return Bn(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return Bn(Promise.all(n.map(Pn((function(n){var i,o,a,s=!1,l=[],c=hn(t.splice(0,1),1),u=hn(c[0],7),h=u[0],d=u[2],p=u[3],f=u[4],g=u[5],v=u[6],y=m(h,n,d,p,l,!0,v),b=kn(y,mn);return i=function(){if(h&&b)return Bn(y.p,(function(t){f[g]=t;var n=r(e,l);return s=!0,n}))},o=function(t){return s?t:(h?f[g]=y:e=b?y.p:y,r(e,l))},(a=i())&&a.then?a.then(o):o(a)})))),(function(){return e}))}))})),i=(n=on(on({sync:!0},this.options),n)).sync,o=this,a={},s=[],l=[],c=[],u=!("cyclic"in n)||n.cyclic,h=n.encapsulateObserver,d=m("",e,u,t||{},c);function p(e){var t,r=Object.values(a);if(n.iterateNone)return r.length?r[0]:Dn(e);if(r.length){if(n.returnTypeNames)return function(e){if(Array.isArray(e))return pn(e)}(t=new Set(r))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||dn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();e&&xn(e)&&!Fn.call(e,"$types")?e.$types=a:e={$:e,$types:{$:a}}}else Sn(e)&&Fn.call(e,"$types")&&(e={$:e,$types:!0});return!n.returnTypeNames&&e}function f(e,t,n){Object.assign(e,t);var r=On.map((function(t){var n=e[t];return delete e[t],n}));n(),On.forEach((function(t,n){e[t]=r[n]}))}function m(e,t,r,i,c,u,d){var p,v={},y=an(t),b=h?function(n){var o=d||i.type||Dn(t);h(Object.assign(n||v,{keypath:e,value:t,cyclic:r,stateObj:i,promisesData:c,resolvingTypesonPromise:u,awaitingTypesonPromise:kn(t,mn)},{type:o}))}:null;if(["string","boolean","number","undefined"].includes(y))return void 0===t||Number.isNaN(t)||t===Number.NEGATIVE_INFINITY||t===Number.POSITIVE_INFINITY?(p=i.replaced?t:g(e,t,i,c,!1,u,b))!==t&&(v={replaced:p}):p=t,b&&b(),p;if(null===t)return b&&b(),t;if(r&&!i.iterateIn&&!i.iterateUnsetNumeric&&t&&"object"===an(t)){var _=s.indexOf(t);if(!(_<0))return a[e]="#",b&&b({cyclicKeypath:l[_]}),"#"+l[_];!0===r&&(s.push(t),l.push(e))}var w,k=xn(t),x=Mn(t),C=(k||x)&&(!o.plainObjectReplacers.length||i.replaced)||i.iterateIn?t:g(e,t,i,c,k||x,null,b);if(C!==t?(p=C,v={replaced:C}):""===e&&kn(t,mn)?(c.push([e,t,r,i,void 0,void 0,i.type]),p=t):x&&"object"!==i.iterateIn||"array"===i.iterateIn?(w=new Array(t.length),v={clone:w}):(["function","symbol"].includes(an(t))||"toJSON"in t||kn(t,mn)||kn(t,Promise)||kn(t,ArrayBuffer))&&!k&&"object"!==i.iterateIn?p=t:(w={},i.addLength&&(w.length=t.length),v={clone:w}),b&&b(),n.iterateNone)return w||p;if(!w)return p;if(i.iterateIn){var S=function(n){var o={ownKeys:Fn.call(t,n)};f(i,o,(function(){var o=e+(e?".":"")+Tn(n),a=m(o,t[n],Boolean(r),i,c,u);kn(a,mn)?c.push([o,a,Boolean(r),i,w,n,i.type]):void 0!==a&&(w[n]=a)}))};for(var T in t)S(T);b&&b({endIterateIn:!0,end:!0})}else Ln(t).forEach((function(n){var o=e+(e?".":"")+Tn(n);f(i,{ownKeys:!0},(function(){var e=m(o,t[n],Boolean(r),i,c,u);kn(e,mn)?c.push([o,e,Boolean(r),i,w,n,i.type]):void 0!==e&&(w[n]=e)}))})),b&&b({endIterateOwn:!0,end:!0});if(i.iterateUnsetNumeric){for(var E=t.length,I=function(n){if(!(n in t)){var o=e+(e?".":"")+n;f(i,{ownKeys:!1},(function(){var e=m(o,void 0,Boolean(r),i,c,u);kn(e,mn)?c.push([o,e,Boolean(r),i,w,n,i.type]):void 0!==e&&(w[n]=e)}))}},A=0;A<E;A++)I(A);b&&b({endIterateUnsetNumeric:!0,end:!0})}return w}function g(e,t,n,r,s,l,c){for(var h=s?o.plainObjectReplacers:o.nonplainObjectReplacers,d=h.length;d--;){var p=h[d];if(p.test(t,n)){var f=p.type;if(o.revivers[f]){var g=a[e];a[e]=g?[f].concat(g):f}return Object.assign(n,{type:f,replaced:!0}),!i&&p.replaceAsync||p.replace?(c&&c({replacing:!0}),m(e,p[i||!p.replaceAsync?"replace":"replaceAsync"](t,n),u&&"readonly",n,r,l,f)):(c&&c({typeDetected:!0}),m(e,t,u&&"readonly",n,r,l,f))}}return t}return c.length?i&&n.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(r(d,c)).then(p):!i&&n.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():n.stringification&&i?[p(d)]:i?p(d):Promise.resolve(p(d))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,on(on({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,on(on({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"revive",value:function(e,t){var n=e&&e.$types;if(!n)return e;if(!0===n)return e.$;var r=(t=on(on({sync:!0},this.options),t)).sync,i=[],o={},a=!0;n.$&&xn(n.$)&&(e=e.$,n=n.$,a=!1);var s=this;function l(e,t){var n=hn(s.revivers[e]||[],1)[0];if(!n)throw new Error("Unregistered type: "+e);return r&&!("revive"in n)?t:n[r&&n.revive?"revive":!r&&n.reviveAsync?"reviveAsync":"revive"](t,o)}var c=[];function u(e){return kn(e,zn)?void 0:e}var h,d=function(){var t=[];if(Object.entries(n).forEach((function(e){var r=hn(e,2),i=r[0],o=r[1];"#"!==o&&[].concat(o).forEach((function(e){hn(s.revivers[e]||[null,{}],2)[1].plain&&(t.push({keypath:i,type:e}),delete n[i])}))})),t.length)return t.sort(Nn).reduce((function t(n,r){var i=r.keypath,o=r.type;if(_n(n))return n.then((function(e){return t(e,{keypath:i,type:o})}));var a=In(e,i);if(kn(a=l(o,a),mn))return a.then((function(t){var n=An(e,i,t);n===t&&(e=n)}));var s=An(e,i,a);s===a&&(e=s)}),void 0)}();return kn(d,mn)?h=d.then((function(){return e})):(h=function e(t,r,o,s,u){if(!a||"$types"!==t){var h=n[t],d=Mn(r);if(d||xn(r)){var p=d?new Array(r.length):{};for(Ln(r).forEach((function(n){var i=e(t+(t?".":"")+Tn(n),r[n],o||p,p,n),a=function(e){return kn(e,zn)?p[n]=void 0:void 0!==e&&(p[n]=e),e};kn(i,mn)?c.push(i.then((function(e){return a(e)}))):a(i)})),r=p;i.length;){var f=hn(i[0],4),m=f[0],g=f[1],v=f[2],y=f[3],b=In(m,g);if(void 0===b)break;v[y]=b,i.splice(0,1)}}if(!h)return r;if("#"===h){var _=In(o,r.slice(1));return void 0===_&&i.push([o,r.slice(1),s,u]),_}return[].concat(h).reduce((function e(t,n){return kn(t,mn)?t.then((function(t){return e(t,n)})):l(n,t)}),r)}}("",e,null),c.length&&(h=mn.resolve(h).then((function(e){return mn.all([e].concat(c))})).then((function(e){return hn(e,1)[0]})))),_n(h)?r&&t.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():kn(h,mn)?h.p.then(u):h:!r&&t.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?u(h):Promise.resolve(u(h))}},{key:"reviveSync",value:function(e,t){return this.revive(e,on(on({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,on(on({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(e,t){var n=this;t=t||{};var r=function e(r){Mn(r)?r.forEach((function(t){return e(t)})):r&&Ln(r).forEach((function(e){if("#"===e)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(Rn.includes(e))throw new TypeError("Plain JSON object types are reserved as type names");var i=r[e],o=i&&i.testPlainObjects?n.plainObjectReplacers:n.nonplainObjectReplacers,a=o.filter((function(t){return t.type===e}));if(a.length&&(o.splice(o.indexOf(a[0]),1),delete n.revivers[e],delete n.types[e]),"function"==typeof i){var s=i;i={test:function(e){return e&&e.constructor===s},replace:function(e){return on({},e)},revive:function(e){return Object.assign(Object.create(s.prototype),e)}}}else if(Mn(i)){var l=hn(i,3);i={test:l[0],replace:l[1],revive:l[2]}}if(i&&i.test){var c={type:e,test:i.test.bind(i)};i.replace&&(c.replace=i.replace.bind(i)),i.replaceAsync&&(c.replaceAsync=i.replaceAsync.bind(i));var u="number"==typeof t.fallback?t.fallback:t.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?n.plainObjectReplacers.splice(u,0,c):n.nonplainObjectReplacers.splice(u,0,c),i.revive||i.reviveAsync){var h={};i.revive&&(h.revive=i.revive.bind(i)),i.reviveAsync&&(h.reviveAsync=i.reviveAsync.bind(i)),n.revivers[e]=[h,{plain:i.testPlainObjects}]}n.types[e]=i}}))};return[].concat(e).forEach((function(e){return r(e)})),this}}]),e}(),zn=cn((function e(){sn(this,e)}));zn.__typeson__type__="TypesonUndefined";for(var Rn=["null","boolean","number","string","array","object"],qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$n=new Uint8Array(256),Un=0;Un<qn.length;Un++)$n[qn.codePointAt(Un)]=Un;var Hn=function(e,t,n){null==n&&(n=e.byteLength);for(var r=new Uint8Array(e,0,n),i=r.length,o="",a=0;a<i;a+=3)o+=qn[r[a]>>2],o+=qn[(3&r[a])<<4|r[a+1]>>4],o+=qn[(15&r[a+1])<<2|r[a+2]>>6],o+=qn[63&r[a+2]];return i%3==2?o=o.slice(0,-1)+"=":i%3==1&&(o=o.slice(0,-2)+"=="),o},Wn=function(e){var t,n,r,i,o=e.length,a=.75*e.length,s=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);for(var l=new ArrayBuffer(a),c=new Uint8Array(l),u=0;u<o;u+=4)t=$n[e.codePointAt(u)],n=$n[e.codePointAt(u+1)],r=$n[e.codePointAt(u+2)],i=$n[e.codePointAt(u+3)],c[s++]=t<<2|n>>4,c[s++]=(15&n)<<4|r>>2,c[s++]=(3&r)<<6|63&i;return l},Gn={arraybuffer:{test:function(e){return"ArrayBuffer"===wn(e)},replace:function(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),Hn(e))},revive:function(e,t){if(t.buffers||(t.buffers=[]),"object"==o(e))return t.buffers[e.index];var n=Wn(e);return t.buffers.push(n),n}}},Vn={bigintObject:{test:function(e){return"object"==o(e)&&kn(e,BigInt)},replace:String,revive:function(e){return new Object(BigInt(e))}}},Yn={bigint:{test:function(e){return"bigint"==typeof e},replace:String,revive:BigInt}};function Kn(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var Xn={blob:{test:function(e){return"Blob"===wn(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function(e){var t=e.type,n=e.stringContents;return new Blob([Kn(n)],{type:t})},replaceAsync:function(e){return new mn((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}},Zn={cryptokey:{test:function(e){return"CryptoKey"===wn(e)&&e.extractable},replaceAsync:function(e){return new mn(function(){var t=s(i().mark((function t(n,r){var o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,crypto.subtle.exportKey("jwk",e);case 3:o=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",void r(t.t0));case 9:n({jwk:o,algorithm:e.algorithm,usages:e.usages});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}())},revive:function(e){var t=e.jwk,n=e.algorithm,r=e.usages;return crypto.subtle.importKey("jwk",t,n,!0,r)}}},Jn={dataview:{test:function(e){return"DataView"===wn(e)},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:Hn(n),byteOffset:r,byteLength:i})},revive:function(e,t){t.buffers||(t.buffers=[]);var n,r=e.byteOffset,i=e.byteLength,o=e.encoded,a=e.index;return"index"in e?n=t.buffers[a]:(n=Wn(o),t.buffers.push(n)),new DataView(n,r,i)}}},Qn={date:{test:function(e){return"Date"===wn(e)},replace:function(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},er={error:{test:function(e){return"Error"===wn(e)},replace:function(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber}},revive:function(e){var t=new Error(e.message);return["name","cause","stack","fileName","lineNumber","columnNumber"].forEach((function(n){t[n]=e[n]})),t}}},tr={};function nr(e){tr[e.name.toLowerCase()]={test:function(t){return kn(t,e)},replace:function(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,errors:e.errors}},revive:function(t){var n="undefined"!=typeof AggregateError&&e===AggregateError,r=n?new e(t.errors,t.message):new e(t.message);return["name","cause","stack","fileName","lineNumber","columnNumber"].forEach((function(e){r[e]=t[e]})),n&&(r.errors=t.errors),r}}}[TypeError,RangeError,SyntaxError,ReferenceError,EvalError,URIError].forEach((function(e){return nr(e)})),"undefined"!=typeof AggregateError&&nr(AggregateError),"function"==typeof InternalError&&nr(InternalError);var rr={file:{test:function(e){return"File"===wn(e)},replace:function(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified;return new File([Kn(r)],t,{type:n,lastModified:i})},replaceAsync:function(e){return new mn((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified})})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(e)}))}}},ir={file:rr.file,filelist:{test:function(e){return"FileList"===wn(e)},replace:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function(e){var t=function(){function e(){l(this,e),this._files=arguments[0],this.length=this._files.length}return u(e,[{key:"item",value:function(e){return this._files[e]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),e}();return new t(e)}}},or={imagebitmap:{test:function(e){return"ImageBitmap"===wn(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),t.toDataURL()},revive:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,t},reviveAsync:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=document.createElement("img");return r.addEventListener("load",(function(){n.drawImage(r,0,0)})),r.src=e,createImageBitmap(t)}}},ar={imagedata:{test:function(e){return"ImageData"===wn(e)},replace:function(e){return{array:g(e.data),width:e.width,height:e.height}},revive:function(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},sr={infinity:{test:function(e){return e===Number.POSITIVE_INFINITY},replace:function(e){return"Infinity"},revive:function(e){return Number.POSITIVE_INFINITY}}},lr={IntlCollator:{test:function(e){return kn(e,Intl.Collator)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function(e){return kn(e,Intl.DateTimeFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function(e){return kn(e,Intl.NumberFormat)},replace:function(e){return e.resolvedOptions()},revive:function(e){return new Intl.NumberFormat(e.locale,e)}}},cr={map:{test:function(e){return"Map"===wn(e)},replace:function(e){return g(e.entries())},revive:function(e){return new Map(e)}}},ur={nan:{test:function(e){return Number.isNaN(e)},replace:function(e){return"NaN"},revive:function(e){return Number.NaN}}},hr={negativeInfinity:{test:function(e){return e===Number.NEGATIVE_INFINITY},replace:function(e){return"-Infinity"},revive:function(e){return Number.NEGATIVE_INFINITY}}},dr={StringObject:{test:function(e){return"String"===wn(e)&&"object"==o(e)},replace:String,revive:function(e){return new String(e)}},BooleanObject:{test:function(e){return"Boolean"===wn(e)&&"object"==o(e)},replace:Boolean,revive:function(e){return new Boolean(e)}},NumberObject:{test:function(e){return"Number"===wn(e)&&"object"==o(e)},replace:Number,revive:function(e){return new Number(e)}}},pr={regexp:{test:function(e){return"RegExp"===wn(e)},replace:function(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},fr={set:{test:function(e){return"Set"===wn(e)},replace:function(e){return g(e.values())},revive:function(e){return new Set(e)}}},mr={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((function(e){return n=(t=e).name,void(mr[n.toLowerCase()]={test:function(e){return wn(e)===n},replace:function(e){return(0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e:e.slice(0)).buffer},revive:function(e){return"ArrayBuffer"===wn(e)?new t(e):e}});var t,n}));var gr={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((function(e){return n=(t=e).name,void(gr[n.toLowerCase()]={test:function(e){return wn(e)===n},replace:function(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:Hn(n),byteOffset:r,length:i})},revive:function(e,n){n.buffers||(n.buffers=[]);var r,i=e.byteOffset,o=e.length,a=e.encoded,s=e.index;return"index"in e?r=n.buffers[s]:(r=Wn(a),n.buffers.push(r)),new t(r,i,o)}});var t,n}));var vr=[{userObject:{test:function(e,t){return Cn(e)},replace:function(e){return r({},e)},revive:function(e){return e}}},{undef:{test:function(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function(e){return 0},revive:function(e){return new zn}}},[{arrayNonindexKeys:{testPlainObjects:!0,test:function(e,t){return!!Array.isArray(e)&&(Object.keys(e).some((function(e){return String(Number.parseInt(e))!==e}))&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function(e,t){return t.iterateUnsetNumeric=!0,e},revive:function(e){if(Array.isArray(e))return e;var t=[];return Object.keys(e).forEach((function(n){var r=e[n];t[n]=r})),t}}},{sparseUndefined:{test:function(e,t){return void 0===e&&!1===t.ownKeys},replace:function(e){return 0},revive:function(e){}}}],dr,[ur,sr,hr],Qn,pr,ar,or,rr,ir,Xn,er,tr].concat("function"==typeof Map?cr:[],"function"==typeof Set?fr:[],"function"==typeof ArrayBuffer?Gn:[],"function"==typeof Uint8Array?gr:[],"function"==typeof DataView?Jn:[],"undefined"!=typeof Intl?lr:[],"undefined"!=typeof crypto?Zn:[],"undefined"!=typeof BigInt?[Yn,Vn]:[]).concat({checkDataCloneException:{test:function(e){var t={}.toString.call(e).slice(8,-1);if(["symbol","function"].includes(o(e))||["Arguments","Module","Error","Promise","WeakMap","WeakSet","Event","MessageChannel"].includes(t)||e&&"object"==o(e)&&"number"==typeof e.nodeType&&"function"==typeof e.insertBefore)throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}}}),yr=(new jn).register(vr);function br(e){yr=(new jn).register(e(vr))}function _r(e,t){var n;try{n=yr.stringifySync(e)}catch(r){if(kn(r,ReferenceError)||// SCA in typeson-registry threw a cloning error and we are in a
//   supporting environment (e.g., the browser) where `ShimDOMException` is
//   an alias for `DOMException`; if typeson-registry ever uses our shim
//   to throw, we can use this condition alone.
kn(r,Re))throw ze("DataCloneError","The object cannot be cloned.");throw r}return t&&t(n),n}function wr(e){return yr.parse(e)}function kr(e){return wr(_r(e))}var xr=Object.freeze({__proto__:null,clone:kr,decode:wr,encode:_r,register:br}),Cr=["objectStore","keyPath","multiEntry","unique"];function Sr(){throw new TypeError("Illegal constructor")}var Tr=Sr;function Er(e,t,n,r,i,o,a,s,l,c,u,h,d){t&&(e=1),e&&s.push("LIMIT",e);var p="count"===o;H.DEBUG,c.executeSql(s.join(" "),l,(function(e,s){var l=[],c=0,u=p?function(){}:"key"===o?function(e){return Mt(K(e.key))}:function(e){return wr(K(e.value))};if(n.multiEntry)for(var d=ne(n.name),f=Lt(i,n.multiEntry),m=function(){var e,n=s.rows.item(g),o=Mt(n[d]);if(r&&(a&&i.some((function(e){return o.includes(e)}))||// More precise than our SQL
At(f,n[d]))?(c++,e=n):r||a||void 0!==o&&(c+=Array.isArray(o)?o.length:1,e=n),e&&(l.push(u(e)),t))return"break"},g=0;g<s.rows.length&&"break"!==m();g++);else{for(var v=0;v<s.rows.length;v++){var y=s.rows.item(v);y&&l.push(u(y))}c=l.length}h(p?c:0===c?t?void 0:[]:t?l[0]:l)}),d)}function Ir(e,t,n,r,i){var o=e||!ke(n),a=["SELECT",Z("count"===r?"key":r)+(t.multiEntry?", "+te(t.name):""),"FROM",ee(t.objectStore.__currentName),"WHERE",te(t.name),"NOT NULL"],s=[];return o&&(i?(a.push("AND ("),n.forEach((function(e,n){n>0&&a.push("OR"),a.push(te(t.name),"LIKE ? ESCAPE '^' "),s.push("%"+re(Lt(e,t.multiEntry))+"%")})),a.push(")")):t.multiEntry?(a.push("AND",te(t.name),"LIKE ? ESCAPE '^'"),s.push("%"+re(Lt(n,t.multiEntry))+"%")):Gt(Vt(n,e),te(t.name),a,s,!0,!1)),[e,t,o,n,r,i,a,s]}Sr.__createInstance=function(e,t){function n(){var n=this;n[Symbol.toStringTag]="IDBIndex",fe(n,Cr),n.__objectStore=e,n.__name=n.__originalName=t.columnName,n.__keyPath=Array.isArray(t.keyPath)?t.keyPath.slice():t.keyPath;var r=t.optionalParams;n.__multiEntry=Boolean(r&&r.multiEntry),n.__unique=Boolean(r&&r.unique),n.__deleted=Boolean(t.__deleted),n.__objectStore.__cursors=t.cursors||[],Object.defineProperty(n,"__currentName",{get:function(){return"__pendingName"in n?n.__pendingName:n.name}}),Object.defineProperty(n,"name",{enumerable:!1,configurable:!1,get:function(){return this.__name},set:function(t){var n=this;t=be(t);var r=n.name;if(tn.__assertVersionChange(n.objectStore.transaction),tn.__assertActive(n.objectStore.transaction),Tr.__invalidStateIfDeleted(n),Dr.__invalidStateIfDeleted(n),t!==r){if(n.objectStore.__indexes[t]&&!n.objectStore.__indexes[t].__deleted&&!n.objectStore.__indexes[t].__pendingDelete)throw ze("ConstraintError",'Index "'+t+'" already exists on '+n.objectStore.__currentName);n.__name=t;var i=n.objectStore;delete i.__indexes[r],i.__indexes[t]=n,i.indexNames.splice(i.indexNames.indexOf(r),1,t);var o=i.transaction.__storeHandles[i.name],a=o.__indexHandles[r];a.__name=t,o.__indexHandles[t]=a,n.__pendingName=r;var s=[["key","BLOB "+(i.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY")],["value","BLOB"]].concat(g(i.indexNames).filter((function(e){return e!==t})).map((function(e){return[te(e),"BLOB"]})));n.__renameIndex(i,r,t,s,(function(t,n){Tr.__updateIndexList(e,t,(function(e){delete o.__pendingName,n(e)}))}))}}})}return n.prototype=Tr.prototype,new n},Sr.__invalidStateIfDeleted=function(e,t){if(e.__deleted||e.__pendingDelete||e.__pendingCreate&&e.objectStore.transaction&&e.objectStore.transaction.__errored)throw ze("InvalidStateError",t||"This index has been deleted")},Sr.__clone=function(e,t){var n=Sr.__createInstance(t,{columnName:e.name,keyPath:e.keyPath,optionalParams:{multiEntry:e.multiEntry,unique:e.unique}});return["__pendingCreate","__pendingDelete","__deleted","__originalName","__recreated"].forEach((function(t){n[t]=e[t]})),n},Sr.__createIndex=function(e,t){var n=t.name,r=e.__currentName,i=e.__indexes[n];t.__pendingCreate=!0,e.indexNames.push(n),e.__indexes[n]=t;var o=e.__indexHandles[n];(!o||t.__pendingDelete||t.__deleted||o.__pendingDelete||o.__deleted)&&(o=e.__indexHandles[n]=Sr.__clone(t,e)),e.transaction.__addNonRequestToTransactionQueue((function(a,s,l,c){var u=i&&(i.__deleted||i.__recreated),h={};function d(e,t){c(ze("UnknownError",'Could not create index "'+n+'"'+t.code+"::"+t.message,t))}function p(i){Sr.__updateIndexList(e,i,(function(){i.executeSql('SELECT "key", "value" FROM '+ee(r),[],(function(i,a){function s(u){if(u<a.rows.length)try{var p=Ct(wr(K(a.rows.item(u).value)),t.keyPath,t.multiEntry);if(p.invalid||p.failure)throw new Error("Go to catch; ignore bad indexKey");if(p=Lt(p.value,t.multiEntry),t.unique){if(h[p])return h={},void c(ze("ConstraintError","Duplicate values already exist within the store"));h[p]=!0}i.executeSql("UPDATE "+ee(r)+" SET "+te(n)+' = ? WHERE "key" = ?',[Y(p),a.rows.item(u).key],(function(e,t){s(u+1)}),d)}catch(wi){s(u+1)}else delete t.__pendingCreate,delete o.__pendingCreate,t.__deleted&&(delete t.__deleted,delete o.__deleted,t.__recreated=!0,o.__recreated=!0),h={},l(e)}H.DEBUG,s(0)}),d)}),d)}var f=ee(r),m=te(t.name);function g(e){H.useSQLiteIndexes?e.executeSql('CREATE INDEX IF NOT EXISTS "'+// The escaped index name must be unique among indexes in the whole database;
//    so we prefix with store name; as prefixed, will also not conflict with
//    index on `key`
// Avoid quotes and separate with special escape sequence
f.slice(1,-1)+"^5"+m.slice(1,-1)+'" ON '+f+"("+m+")",[],p,d):p(e)}if(u)p(a);else{var v=["ALTER TABLE",f,"ADD",m,"BLOB"].join(" ");H.DEBUG,a.executeSql(v,[],g,d)}}),void 0,e)},Sr.__deleteIndex=function(e,t){t.__pendingDelete=!0;var n=e.__indexHandles[t.name];n&&(n.__pendingDelete=!0),e.indexNames.splice(e.indexNames.indexOf(t.name),1),e.transaction.__addNonRequestToTransactionQueue((function(r,i,o,a){function s(e,n){a(ze("UnknownError",'Could not delete index "'+t.name+'"',n))}function l(){Sr.__updateIndexList(e,r,(function(e){delete t.__pendingDelete,delete t.__recreated,t.__deleted=!0,n&&(n.__deleted=!0,delete n.__pendingDelete),o(e)}),s)}H.useSQLiteIndexes?r.executeSql("DROP INDEX IF EXISTS "+Z(ee(e.name).slice(1,-1)+"^5"+te(t.name).slice(1,-1)),[],l,s):l()}),void 0,e)},Sr.__updateIndexList=function(e,t,n,r){for(var i={},o=0;o<e.indexNames.length;o++){var a=e.__indexes[e.indexNames[o]];i[a.name]={columnName:a.name,keyPath:a.keyPath,optionalParams:{unique:a.unique,multiEntry:a.multiEntry},deleted:Boolean(a.deleted)}}H.DEBUG,t.executeSql('UPDATE __sys__ SET "indexList" = ? WHERE "name" = ?',[JSON.stringify(i),Y(e.__currentName)],(function(){n(e)}),r)},Sr.prototype.__fetchIndexData=function(e,t,n,r){var i=this;if(void 0!==r&&(r=ye(r,"unsigned long")),Sr.__invalidStateIfDeleted(i),Dr.__invalidStateIfDeleted(i.objectStore),i.objectStore.__deleted)throw ze("InvalidStateError","This index's object store has been deleted");if(tn.__assertActive(i.objectStore.transaction),n&&ke(e))throw ze("DataError","No key or range was specified");var o=Ir(n,i,e,t,!1);return i.objectStore.transaction.__addToTransactionQueue((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Er.apply(void 0,[r].concat(g(o),t))}),void 0,i)},Sr.prototype.openCursor=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t[0],r=t[1],i=vi.__createInstance(n,r,e.objectStore,e,ne(e.name),"value");return e.__objectStore.__cursors.push(i),i.__request},Sr.prototype.openKeyCursor=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t[0],r=t[1],i=fi.__createInstance(n,r,e.objectStore,e,ne(e.name),"key");return e.__objectStore.__cursors.push(i),i.__request},Sr.prototype.get=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.get`.");return this.__fetchIndexData(e,"value",!0)},Sr.prototype.getKey=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBIndex.getKey`.");return this.__fetchIndexData(e,"key",!0)},Sr.prototype.getAll=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1];return this.__fetchIndexData(t,"value",!1,n)},Sr.prototype.getAllKeys=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1];return this.__fetchIndexData(t,"key",!1,n)},Sr.prototype.count=function(){var e=this,t=arguments[0];return ie(t,Ut)?vi.__createInstance(t,"next",e.objectStore,e,ne(e.name),"value",!0).__request:e.__fetchIndexData(t,"count",!1)},Sr.prototype.__renameIndex=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o="BLOB",a=e.__currentName,s=ee(a),l=te(n),c=Z("tmp_"+ee(a).slice(1,-1)),u=r.map((function(e){return e[0]})),h=r.map((function(e){return e.join(" ")})),d=h.length?h.join(", ")+", ":"",p=u.length?u.join(", ")+", ":"";e.transaction.__addNonRequestToTransactionQueue((function(e,n,r,a){function h(e,t){a(t)}function f(){i?i(e,r):r()}var m="CREATE TABLE "+c+"("+d+l+" "+o+")";H.DEBUG,e.executeSql(m,[],(function(){var n="INSERT INTO "+c+"("+p+l+") SELECT "+p+te(t)+" FROM "+s;H.DEBUG,e.executeSql(n,[],(function(){var t="DROP TABLE "+s;H.DEBUG,e.executeSql(t,[],(function(){var t="ALTER TABLE "+c+" RENAME TO "+s;H.DEBUG,e.executeSql(t,[],(function(e,t){if(H.useSQLiteIndexes){var n=u.slice(2).map((function(t){return new tt((function(n,r){var i="CREATE INDEX "+Z(s.slice(1,-1)+"^5"+t.slice(1,-1))+" ON "+s+"("+t+")";H.DEBUG,e.executeSql(i,[],n,(function(e,t){r(t)}))}))}));n.push(new tt((function(t,n){var r=Z("sk_"+s.slice(1,-1)),i="DROP INDEX IF EXISTS "+r;H.DEBUG,e.executeSql(i,[],(function(){var i="CREATE INDEX "+r+" ON "+s+'("key")';H.DEBUG,e.executeSql(i,[],t,(function(e,t){n(t)}))}),(function(e,t){n(t)}))}))),tt.all(n).then(f,a).catch((function(e){throw e}))}else f()}),h)}),h)}),h)}),h)}))},Object.defineProperty(Sr,Symbol.hasInstance,{value:function(e){return oe(e)&&"function"==typeof e.openCursor&&"boolean"==typeof e.multiEntry}}),de(Sr.prototype,Cr),he(Sr.prototype,["name"]),Sr.prototype[Symbol.toStringTag]="IDBIndexPrototype",Object.defineProperty(Sr,"prototype",{writable:!1});var Ar=["keyPath","indexNames","transaction","autoIncrement"];function Dr(){throw new TypeError("Illegal constructor")}var Br=Dr;function Lr(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Dr.__createInstance=function(e,t){function n(){var n=this;n[Symbol.toStringTag]="IDBObjectStore",fe(this,Ar),n.__name=n.__originalName=e.name,n.__keyPath=Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,n.__transaction=t,n.__idbdb=e.idbdb,n.__cursors=e.cursors||[],n.__autoIncrement=Boolean(e.autoInc),n.__indexes={},n.__indexHandles={},n.__indexNames=Xt.__createInstance();var r=e.indexList;for(var i in r)if(xe(r,i)){var o=Sr.__createInstance(n,r[i]);n.__indexes[o.name]=o,o.__deleted||n.indexNames.push(o.name)}n.__oldIndexNames=n.indexNames.clone(),Object.defineProperty(this,"__currentName",{get:function(){return"__pendingName"in this?this.__pendingName:this.name}}),Object.defineProperty(this,"name",{enumerable:!1,configurable:!1,get:function(){return this.__name},set:function(e){var t=this;e=be(e);var n=t.name;if(Br.__invalidStateIfDeleted(t),tn.__assertVersionChange(t.transaction),tn.__assertActive(t.transaction),n!==e){if(t.__idbdb.__objectStores[e]&&!t.__idbdb.__objectStores[e].__pendingDelete)throw ze("ConstraintError",'Object store "'+e+'" already exists in '+t.__idbdb.name);t.__name=e;var r=t.__idbdb.__objectStores[n];r.__name=e,t.__idbdb.__objectStores[e]=r,delete t.__idbdb.__objectStores[n],t.__idbdb.objectStoreNames.splice(t.__idbdb.objectStoreNames.indexOf(n),1,e);var i=t.transaction.__storeHandles[n];i.__name=e,t.transaction.__storeHandles[e]=i,t.__pendingName=n;var o='UPDATE __sys__ SET "name" = ? WHERE "name" = ?',a=[Y(e),Y(n)];H.DEBUG,t.transaction.__addNonRequestToTransactionQueue((function(r,i,s,l){r.executeSql(o,a,(function(r,i){var o="ALTER TABLE "+ee(n)+" RENAME TO "+ee(e);H.DEBUG,r.executeSql(o,[],(function(e,n){delete t.__pendingName,s()}))}),(function(e,t){l(t)}))}))}}})}return n.prototype=Br.prototype,new n},Dr.__clone=function(e,t){var n=Dr.__createInstance({name:e.__currentName,keyPath:Array.isArray(e.keyPath)?e.keyPath.slice():e.keyPath,autoInc:e.autoIncrement,indexList:{},idbdb:e.__idbdb,cursors:e.__cursors},t);return["__indexes","__indexNames","__oldIndexNames","__deleted","__pendingDelete","__pendingCreate","__originalName"].forEach((function(t){n[t]=e[t]})),n},Dr.__invalidStateIfDeleted=function(e,t){if(e.__deleted||e.__pendingDelete||e.__pendingCreate&&e.transaction&&e.transaction.__errored)throw ze("InvalidStateError",t||"This store has been deleted")},Dr.__createObjectStore=function(e,t){var n=t.__currentName;t.__pendingCreate=!0,e.__objectStores[n]=t,e.objectStoreNames.push(n);var r=e.__versionTransaction,i=r.__storeHandles;return(!i[n]||// These latter conditions are to allow store
//   recreation to create new clone object
i[n].__pendingDelete||i[n].__deleted)&&(i[n]=Dr.__clone(t,r)),r.__addNonRequestToTransactionQueue((function(e,r,i,o){function a(e,t){H.DEBUG,o(ze("UnknownError",'Could not create object store "'+n+'"',t))}var s=ee(n),l=["CREATE TABLE",s,"(key BLOB",t.autoIncrement?"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT":"PRIMARY KEY",", value BLOB)"].join(" ");H.DEBUG,e.executeSql(l,[],(function(e,r){function o(){var r=JSON.stringify(t.keyPath);e.executeSql("INSERT INTO __sys__ VALUES (?,?,?,?,?)",[Y(n),r,
// For why converting here, see comment and following
//  discussion at:
//  https://github.com/axemclion/IndexedDBShim/issues/313#issuecomment-590086778
Number(t.autoIncrement),"{}",1],(function(){delete t.__pendingCreate,delete t.__deleted,i(t)}),a)}H.useSQLiteIndexes?e.executeSql("CREATE INDEX IF NOT EXISTS "+Z("sk_"+s.slice(1,-1))+" ON "+s+'("key")',[],o,a):o()}),a)})),i[n]},Dr.__deleteObjectStore=function(e,t){t.__pendingDelete=!0,t.__indexNames=Xt.__createInstance(),e.objectStoreNames.splice(e.objectStoreNames.indexOf(t.__currentName),1);var n=e.__versionTransaction.__storeHandles[t.__currentName];n&&(n.__indexNames=Xt.__createInstance(),n.__pendingDelete=!0),e.__versionTransaction.__addNonRequestToTransactionQueue((function(e,r,i,o){function a(e,t){H.DEBUG,o(ze("UnknownError","Could not delete ObjectStore",t))}e.executeSql('SELECT "name" FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],(function(e,r){r.rows.length>0&&e.executeSql("DROP TABLE "+ee(t.__currentName),[],(function(){e.executeSql('DELETE FROM __sys__ WHERE "name" = ?',[Y(t.__currentName)],(function(){delete t.__pendingDelete,t.__deleted=!0,n&&(delete n.__pendingDelete,n.__deleted=!0),i()}),a)}),a)}))}))},Dr.prototype.__validateKeyAndValueAndCloneValue=function(e,t,n){var r=this;if(null!==r.keyPath){if(void 0!==t)throw ze("DataError","The object store uses in-line keys and the key parameter was provided",r);var i=kr(e);if((t=Ct(i,r.keyPath)).invalid)throw ze("DataError","KeyPath was specified, but key was invalid.");if(t.failure){if(!n){if(!r.autoIncrement)throw ze("DataError","Could not evaluate a key from keyPath and there is no key generator");if(!Et(i,r.keyPath))throw ze("DataError","A key could not be injected into a value");return[void 0,i]}throw ze("DataError","Could not evaluate a key from keyPath")}return[t.value,i]}if(void 0===t){if(!r.autoIncrement)throw ze("DataError","The object store uses out-of-line keys and has no key generator and the key parameter was not provided.",r);t=void 0}else wt(t);return[t,kr(e)]},Dr.prototype.__deriveKey=function(e,t,n,r,i){var o=this;function a(e){_r(n,(function(t){t=wr(t),r(t,e)}))}o.autoIncrement?void 0===n?zt(e,o,(function(e,n,a){e?i(ze("ConstraintError","The key generator's current number has reached the maximum safe integer limit")):(null!==o.keyPath&&Tt(t,n,o.keyPath),r(n,a))}),i):Rt(e,o,n,a,i):a()},Dr.prototype.__insertData=function(e,t,n,r,i,o,a){var s=this,l={},c=Object.keys(
// We do not iterate `indexNames` as those can be modified synchronously (e.g.,
//   `deleteIndex` could, by its synchronous removal from `indexNames`, prevent
//   iteration here of an index though per IndexedDB test
//   `idbobjectstore_createIndex4-deleteIndex-event_order.js`, `createIndex`
//   should be allowed to first fail even in such a case).
s.__indexes).map((function(t){return new tt((function(r,i){var o=s.__indexes[t];if(
// `createIndex` was called synchronously after the current insertion was added to
//  the transaction queue so although it was added to `__indexes`, it is not yet
//  ready to be checked here for the insertion as it will be when running the
//  `createIndex` operation (e.g., if two items with the same key were added and
//  *then* a unique index was created, it should not continue to err and abort
//  yet, as we're still handling the insertions which must be processed (e.g., to
//  add duplicates which then cause a unique index to fail))
o.__pendingCreate||// If already deleted (and not just slated for deletion (by `__pendingDelete`
//  after this add), we avoid checks
o.__deleted)r();else{var a;try{if((a=Ct(n,o.keyPath,o.multiEntry)).invalid||a.failure)throw new Error("Go to catch")}catch(d){return void r()}if(a=a.value,o.unique){var c=o.multiEntry&&Array.isArray(a),u=Ir(!0,o,a,"key",c);Er.apply(void 0,[null].concat(g(u),[e,null,function(e){if(void 0===e)return h(o),void r();i(ze("ConstraintError","Index already contains a record equal to "+(c?"one of the subkeys of":"")+"`indexKey`"))},i]))}else h(o),r()}function h(e){void 0!==a&&(l[e.__currentName]=Lt(a,e.multiEntry))}}))}));return tt.all(c).then((function(){var n=["INSERT INTO",ee(s.__currentName),"("],i=[" VALUES ("],c=[];void 0!==r&&(n.push(Z("key"),","),i.push("?,"),c.push(Y(Lt(r)))),Object.entries(l).forEach((function(e){var t=m(e,2),r=t[0],o=t[1];n.push(te(r)+","),i.push("?,"),c.push(Y(o))})),n.push(Z("value")+" )"),i.push("?)"),c.push(Y(t));var u=n.join(" ")+i.join(" ");H.DEBUG,e.executeSql(u,c,(function(e,t){o(r)}),(function(e,t){a(ze("ConstraintError",t.message,t))}))})).catch((function(t){function n(){a(t)}"number"!=typeof i?n():Nt(e,s,i,n,n)}))},Dr.prototype.add=function(e){var t=this,n=arguments[1];if(!(t instanceof Dr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No value was specified");Dr.__invalidStateIfDeleted(t),tn.__assertActive(t.transaction),t.transaction.__assertWritable();var r=t.transaction.__createRequest(t),i=m(t.__validateKeyAndValueAndCloneValue(e,n,!1),2),o=i[0],a=i[1];return Dr.__storingRecordObjectStore(r,t,!0,a,!0,o),r},Dr.prototype.put=function(e){var t=this,n=arguments[1];if(!(t instanceof Dr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No value was specified");Dr.__invalidStateIfDeleted(t),tn.__assertActive(t.transaction),t.transaction.__assertWritable();var r=t.transaction.__createRequest(t),i=m(t.__validateKeyAndValueAndCloneValue(e,n,!1),2),o=i[0],a=i[1];return Dr.__storingRecordObjectStore(r,t,!0,a,!1,o),r},Dr.prototype.__overwrite=function(e,t,n,r){var i="DELETE FROM "+ee(this.__currentName)+' WHERE "key" = ?',o=Lt(t);e.executeSql(i,[Y(o)],(function(e,t){H.DEBUG,n(e)}),(function(e,t){r(t)}))},Dr.__storingRecordObjectStore=function(e,t,n,r,i){var o=arguments[5];t.transaction.__pushToQueue(e,(function(e,a,s,l){t.__deriveKey(e,r,o,(function(o,a){_r(r,(function(c){function u(e){t.__insertData(e,c,r,o,a,(function(){n&&t.__cursors.forEach((function(e){e.__invalidateCache()})),s.apply(void 0,arguments)}),l)}i?u(e):t.__overwrite(e,o,u,l)}))}),l)}))},Dr.prototype.__get=function(e,t,n,r){var i=this;void 0!==r&&(r=ye(r,"unsigned long")),Dr.__invalidStateIfDeleted(i),tn.__assertActive(i.transaction);var o=Vt(e,!n),a=["SELECT",Z(t?"key":"value"),"FROM",ee(i.__currentName)],s=[];if(void 0!==o&&(a.push("WHERE"),Gt(o,Z("key"),a,s)),n||(r=1),r){if(!Number.isFinite(r))throw new TypeError("The count parameter must be a finite number");a.push("LIMIT",r)}return a=a.join(" "),i.transaction.__addToTransactionQueue((function(e,r,i,o){H.DEBUG,e.executeSql(a,s,(function(e,r){var o;H.DEBUG;try{if(0===r.rows.length)return void(n?i([]):i());if(o=[],t)for(var a=0;a<r.rows.length;a++)o.push(Mt(K(r.rows.item(a).key),!1));else for(var s=0;s<r.rows.length;s++)o.push(wr(K(r.rows.item(s).value)));n||(o=o[0])}catch(wi){H.DEBUG}i(o)}),(function(e,t){o(t)}))}),void 0,i)},Dr.prototype.get=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.get`.");return this.__get(e)},Dr.prototype.getKey=function(e){if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.getKey`.");return this.__get(e,!0)},Dr.prototype.getAll=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1];return this.__get(t,!1,!0,n)},Dr.prototype.getAllKeys=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1];return this.__get(t,!0,!0,n)},Dr.prototype.delete=function(e){var t=this;if(!(this instanceof Dr))throw new TypeError("Illegal invocation");if(!arguments.length)throw new TypeError("A parameter was missing for `IDBObjectStore.delete`.");Dr.__invalidStateIfDeleted(t),tn.__assertActive(t.transaction),t.transaction.__assertWritable();var n=Vt(e,!0),r=["DELETE FROM",ee(t.__currentName),"WHERE"],i=[];Gt(n,Z("key"),r,i);var o=r.join(" ");return t.transaction.__addToTransactionQueue((function(e,n,r,a){H.DEBUG,e.executeSql(o,i,(function(e,n){H.DEBUG,t.__cursors.forEach((function(e){e.__invalidateCache()})),r()}),(function(e,t){a(t)}))}),void 0,t)},Dr.prototype.clear=function(){var e=this;if(!(this instanceof Dr))throw new TypeError("Illegal invocation");return Dr.__invalidStateIfDeleted(e),tn.__assertActive(e.transaction),e.transaction.__assertWritable(),e.transaction.__addToTransactionQueue((function(t,n,r,i){t.executeSql("DELETE FROM "+ee(e.__currentName),[],(function(t,n){H.DEBUG,e.__cursors.forEach((function(e){e.__invalidateCache()})),r()}),(function(e,t){i(t)}))}),void 0,e)},Dr.prototype.count=function(){var e=this,t=arguments[0];if(!(e instanceof Dr))throw new TypeError("Illegal invocation");return Dr.__invalidStateIfDeleted(e),tn.__assertActive(e.transaction),vi.__createInstance(t,"next",e,e,"key","value",!0).__request},Dr.prototype.openCursor=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t[0],r=t[1];if(!(e instanceof Dr))throw new TypeError("Illegal invocation");Dr.__invalidStateIfDeleted(e);var i=vi.__createInstance(n,r,e,e,"key","value");return e.__cursors.push(i),i.__request},Dr.prototype.openKeyCursor=function(){var e=this;if(!(e instanceof Dr))throw new TypeError("Illegal invocation");Dr.__invalidStateIfDeleted(e);var t=Array.prototype.slice.call(arguments),n=t[0],r=t[1],i=fi.__createInstance(n,r,e,e,"key","key");return e.__cursors.push(i),i.__request},Dr.prototype.index=function(e){var t=this;if(!(t instanceof Dr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No index name was specified");Dr.__invalidStateIfDeleted(t),tn.__assertNotFinished(t.transaction);var n=t.__indexes[e];if(!n||n.__deleted)throw ze("NotFoundError",'Index "'+e+'" does not exist on '+t.__currentName);return(!t.__indexHandles[e]||t.__indexes[e].__pendingDelete||t.__indexes[e].__deleted)&&(t.__indexHandles[e]=Sr.__clone(n,t)),t.__indexHandles[e]},Dr.prototype.createIndex=function(e,t){var n=this,r=arguments[2];if(!(n instanceof Dr))throw new TypeError("Illegal invocation");if(e=String(e),0===arguments.length)throw new TypeError("No index name was specified");if(1===arguments.length)throw new TypeError("No key path was specified");if(tn.__assertVersionChange(n.transaction),Dr.__invalidStateIfDeleted(n),tn.__assertActive(n.transaction),n.__indexes[e]&&!n.__indexes[e].__deleted&&!n.__indexes[e].__pendingDelete)throw ze("ConstraintError",'Index "'+e+'" already exists on '+n.__currentName);if(!ve(t=we(t)))throw ze("SyntaxError","A valid keyPath must be supplied");if(Array.isArray(t)&&r&&r.multiEntry)throw ze("InvalidAccessError","The keyPath argument was an array and the multiEntry option is true.");r=r||{};var i={columnName:e,keyPath:t,optionalParams:{unique:Boolean(r.unique),multiEntry:Boolean(r.multiEntry)}},o=Sr.__createInstance(n,i);return Sr.__createIndex(n,o),o},Dr.prototype.deleteIndex=function(e){var t=this;if(!(t instanceof Dr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No index name was specified");tn.__assertVersionChange(t.transaction),Dr.__invalidStateIfDeleted(t),tn.__assertActive(t.transaction);var n=t.__indexes[e];if(!n)throw ze("NotFoundError",'Index "'+e+'" does not exist on '+t.__currentName);Sr.__deleteIndex(t,n)},de(Dr.prototype,Ar),he(Dr.prototype,["name"]),Dr.prototype[Symbol.toStringTag]="IDBObjectStorePrototype",Object.defineProperty(Dr,"prototype",{writable:!1});var Mr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Fr=function(e){return Mr.exec(e).slice(1)};function Or(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(e=r+"/"+e,t="/"===r.charAt(0))}return(t?"/":"")+(e=Lr(Hr(e.split("/"),(function(e){return!!e})),!t).join("/"))||"."}function Pr(e){var t=Nr(e),n="/"===Wr(e,-1);return(e=Lr(Hr(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Nr(e){return"/"===e.charAt(0)}function jr(){return Pr(Hr(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))}function zr(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Or(e).substr(1),t=Or(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(i.slice(a))).join("/")}function Rr(e){var t=Fr(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."}function qr(e,t){var n=Fr(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}function $r(e){return Fr(e)[3]}var Ur={extname:$r,basename:qr,dirname:Rr,sep:"/",delimiter:":",relative:zr,join:jr,isAbsolute:Nr,normalize:Pr,resolve:Or};function Hr(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var Wr="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)},Gr=["onabort","onclose","onerror","onversionchange"],Vr=["name","version","objectStoreNames"];function Yr(){throw new TypeError("Illegal constructor")}var Kr,Xr=Yr;Yr.__createInstance=function(e,t,n,r,i){function o(){var o=this;this[Symbol.toStringTag]="IDBDatabase",fe(this,Vr),this.__db=e,this.__closePending=!1,this.__oldVersion=n,this.__version=r,this.__name=t,this.__upgradeTransaction=null,pe(this,Gr),this.__setOptions({legacyOutputDidListenersThrowFlag:!0}),this.__transactions=[],this.__objectStores={},this.__objectStoreNames=Xt.__createInstance();for(var a={},s=function(){var e=i.rows.item(l);a.name=e.name,a.keyPath=JSON.parse(e.keyPath),["autoInc","indexList"].forEach((function(t){a[t]=JSON.parse(e[t])})),a.idbdb=o;var t=Dr.__createInstance(a);o.__objectStores[t.name]=t,o.objectStoreNames.push(t.name)},l=0;l<i.rows.length;l++)s();this.__oldObjectStoreNames=this.objectStoreNames.clone()}return o.prototype=Xr.prototype,new o},Yr.prototype=q.createInstance(),Yr.prototype[Symbol.toStringTag]="IDBDatabasePrototype",Yr.prototype.createObjectStore=function(e){var t=arguments[1];if(e=String(e),!(this instanceof Yr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No object store name was specified");tn.__assertVersionChange(this.__versionTransaction),this.throwIfUpgradeTransactionNull(),tn.__assertActive(this.__versionTransaction);var n=(t=r({},t)).keyPath;if(null!==(n=void 0===n?null:we(n))&&!ve(n))throw ze("SyntaxError","The keyPath argument contains an invalid key path.");if(this.__objectStores[e]&&!this.__objectStores[e].__pendingDelete)throw ze("ConstraintError",'Object store "'+e+'" already exists in '+this.name);var i=t.autoIncrement;if(i&&(""===n||Array.isArray(n)))throw ze("InvalidAccessError","With autoIncrement set, the keyPath argument must not be an array or empty string.");var o={name:e,keyPath:n,autoInc:i,indexList:{},idbdb:this},a=Dr.__createInstance(o,this.__versionTransaction);return Dr.__createObjectStore(this,a)},Yr.prototype.deleteObjectStore=function(e){if(!(this instanceof Yr))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("No object store name was specified");tn.__assertVersionChange(this.__versionTransaction),this.throwIfUpgradeTransactionNull(),tn.__assertActive(this.__versionTransaction);var t=this.__objectStores[e];if(!t)throw ze("NotFoundError",'Object store "'+e+'" does not exist in '+this.name);Dr.__deleteObjectStore(this,t)},Yr.prototype.close=function(){if(!(this instanceof Yr))throw new TypeError("Illegal invocation");this.__closePending=!0,this.__unblocking&&this.__unblocking.check()},Yr.prototype.transaction=function(e){var t=this;if(0===arguments.length)throw new TypeError("You must supply a valid `storeNames` to `IDBDatabase.transaction`");var n=arguments[1];if(e=ue(e)?g(new Set(
// to be unique
we(e))).sort():[be(e)],n=n||"readonly",tn.__assertNotVersionChange(this.__versionTransaction),this.__closePending)throw ze("InvalidStateError","An attempt was made to start a new transaction on a database connection that is not open");var r=Xt.__createInstance();if(e.forEach((function(e){if(!t.objectStoreNames.contains(e))throw ze("NotFoundError",'The "'+e+'" object store does not exist');r.push(e)})),0===e.length)throw ze("InvalidAccessError","No valid object store names were specified");if("readonly"!==n&&"readwrite"!==n)throw new TypeError("Invalid transaction mode: "+n);var i=tn.__createInstance(this,r,n);return this.__transactions.push(i),i},Yr.prototype.throwIfUpgradeTransactionNull=function(){if(null===this.__upgradeTransaction)throw ze("InvalidStateError","No upgrade transaction associated with database.")},Yr.prototype.__forceClose=function(e){var t=this;t.close();var n=0;t.__transactions.forEach((function(r){r.on__abort=function(){if(++n===t.__transactions.length){var e=Ce("close");setTimeout((function(){t.dispatchEvent(e)}))}},r.__abortTransaction(ze("AbortError","The connection was force-closed: "+(e||"")))}))},he(Yr.prototype,Gr),de(Yr.prototype,Vr),Object.defineProperty(Yr.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:Yr}),Object.defineProperty(Yr,"prototype",{writable:!1});var Zr=function(e){Kr=e},Jr=function(){return"object"===("undefined"==typeof location?"undefined":o(location))&&location?location.origin:"null"},Qr=function(){return!1!==H.checkOrigin&&"null"===Jr()},ei={};function ti(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr(),n=ei[t][e];if(n[0]){var r=n[0],i=r.req,o=r.cb;i.addEventListener("success",a),i.addEventListener("error",a),o(i)}function a(){n.shift(),ti(e,t)}}function ni(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jr(),r=arguments.length>3?arguments[3]:void 0;ei[n][t]||(ei[n][t]=[]),ei[n][t].push({req:e,cb:r}),1===ei[n][t].length&&ti(t,n)}function ri(e,t,n,r){var i=function(e){return e.__closePending},o=function(){return e.every((function(e){return i(e)}))};return e.reduce((function(e,t){return i(t)?e:e.then((function(){if(!i(t)){var e=new Te("versionchange",{oldVersion:n,newVersion:r});return new tt((function(n){setTimeout((function(){t.dispatchEvent(e),n()}))}))}}))}),tt.resolve()).then((function(){if(!o())return new tt((function(a){var s={check:function(){o()&&a()}},l=new Te("blocked",{oldVersion:n,newVersion:r});setTimeout((function(){t.dispatchEvent(l),o()?a():e.forEach((function(e){i(e)||(e.__unblocking=s)}))}))}))}))}var ii,oi={},ai=0;function si(e){return Object.keys(oi[e]).map(Number).reduce((function(e,t){return t>e?t:e}),0)}function li(e){return oi[e]&&oi[e][si(e)]}function ci(e,t,n,r,i){if("string"==typeof H.memoryDatabase){var o=oi[t]?li(t):null;if(!o)return void r();var a=o._db&&o._db._db;if(!a||!a.close)return;a.close((function(e){e||r()}))}else Kr&&!1!==H.deleteDatabaseFiles?Kr.unlink(Ur.join(H.databaseBasePath||"",n),(function(e){e&&"ENOENT"!==e.code?i({code:0,message:"Error removing database file: "+n+" "+e}):r()})):e(Ur.join(H.databaseBasePath||"",n),1,t,H.DEFAULT_DB_SIZE).transaction((function(e){e.executeSql('SELECT "name" FROM __sys__',[],(function(e,t){var n=t.rows;!function t(o){o>=n.length?e.executeSql("DROP TABLE IF EXISTS __sys__",[],(function(){r()}),i):e.executeSql("DROP TABLE "+ee(K(
// Avoid double-escaping
n.item(o).name)),[],(function(){t(o+1)}),(function(){t(o+1)}))}(0)}),(function(e){r()}))}))}function ui(e,t,n){function r(e,t){t=Pe(t||e),H.DEBUG,n(t)}ii?t():(ii=e("string"==typeof H.memoryDatabase?H.memoryDatabase:Ur.join("string"==typeof H.sysDatabaseBasePath?H.sysDatabaseBasePath:H.databaseBasePath||"","__sysdb__"+(!1!==H.addSQLiteExtension?".sqlite":"")),1,"System Database",H.DEFAULT_DB_SIZE)).transaction((function(e){e.executeSql("CREATE TABLE IF NOT EXISTS dbVersions (name BLOB, version INT);",[],(function(e){H.useSQLiteIndexes?e.executeSql("CREATE INDEX IF NOT EXISTS dbvname ON dbVersions(name)",[],t,r):t()}),r)}),r)}function hi(){throw new TypeError("Illegal constructor")}var di=hi;hi.__createInstance=function(){function e(){this[Symbol.toStringTag]="IDBFactory",this.__connections={}}return e.prototype=di.prototype,new e},hi.prototype.open=function(e){var t=this;if(!(t instanceof hi))throw new TypeError("Illegal invocation");var n=arguments[1];if(0===arguments.length)throw new TypeError("Database name is required");if(void 0!==n&&0===(n=ye(n,"unsigned long long")))throw new TypeError("Version cannot be 0");if(Qr())throw ze("SecurityError","Cannot open an IndexedDB database from an opaque origin.");var r=Ge.__createInstance(),i=!1;H.autoName&&""===e&&(e="autoNamedDatabase_"+ai++);var o,a=Y(e=String(e)),s="string"==typeof H.memoryDatabase,l=!1!==H.cacheDatabaseInstances||s;try{o=J(e)}catch(d){throw d}function c(e,t){if(!i){t=t?Pe(t):e,i=!0;var n=Ce("error",t,{bubbles:!0,cancelable:!0});r.__done=!0,r.__error=t,r.__result=void 0,r.dispatchEvent(n)}}function u(i,s,u){i.executeSql('SELECT "name", "keyPath", "autoInc", "indexList" FROM __sys__',[],(function(i,h){function d(){r.__result=p,r.__done=!0}var p=Yr.__createInstance(s,e,u,n,h);if(t.__connections[e]||(t.__connections[e]=[]),t.__connections[e].push(p),u<n)ri(t.__connections[e].slice(0,-1),r,u,n).then((function(){var i=function(e,t,n){if(t)try{e.executeSql("ROLLBACK",[],n,n)}catch(r){ii.transaction((function(e){function t(e){throw new Error("Unable to roll back upgrade transaction!"+(e||""))}0===u?e.executeSql('DELETE FROM dbVersions WHERE "name" = ?',[a],(function(){n(t)}),t):e.executeSql('UPDATE dbVersions SET "version" = ? WHERE "name" = ?',[u,a],n,t)}))}else n()};ii.transaction((function(s){function h(){var a=new Te("upgradeneeded",{oldVersion:u,newVersion:n});r.__result=p,p.__upgradeTransaction=r.__transaction=r.__result.__versionTransaction=tn.__createInstance(r.__result,r.__result.objectStoreNames,"versionchange"),r.__done=!0,r.transaction.__addNonRequestToTransactionQueue((function(e,t,n,i){if(r.dispatchEvent(a),a.__legacyOutputDidListenersThrowError)return Me("Error","An error occurred in an upgradeneeded handler attached to request chain",a.__legacyOutputDidListenersThrowError),void r.transaction.__abortTransaction(ze("AbortError","A request was aborted."));n()})),r.transaction.on__beforecomplete=function(e){p.__upgradeTransaction=null,r.__result.__versionTransaction=null,i(s,!1,(function(){r.transaction.__transFinishedCb(!1,(function(){e.complete(),r.__transaction=null}))}))},r.transaction.on__preabort=function(){p.__upgradeTransaction=null,l&&e in oi&&delete oi[e][n]},r.transaction.on__abort=function(){r.__transaction=null,r.__result=void 0,r.__done=!1,p.close(),setTimeout((function(){var n=ze("AbortError","The upgrade transaction was aborted.");i(s,n,(function(r){0!==u?c(n):ci(t.__openDatabase,e,o,c.bind(null,n),r||c)}))}))},r.transaction.on__complete=function(){if(r.__result.__closePending)return r.__transaction=null,void c(ze("AbortError","The connection has been closed."));d(),r.__transaction=null;var e=Ce("success");r.dispatchEvent(e)}}0===u?s.executeSql("INSERT INTO dbVersions VALUES (?,?)",[a,n],h,c):s.executeSql('UPDATE dbVersions SET "version" = ? WHERE "name" = ?',[n,a],h,c)}),c,null,(function(e,t,n,r,o){return!(!e.readOnly&&!t&&(i=function(e,t,n){t?r(t,n):o(n)},1))}))})).catch((function(e){throw e}));else{d();var f=Ce("success");r.dispatchEvent(f)}}),c)}function h(r){var i;if((s||l)&&e in oi&&oi[e][n]?i=oi[e][n]:(i=t.__openDatabase(s?H.memoryDatabase:Ur.join(H.databaseBasePath||"",o),1,e,H.DEFAULT_DB_SIZE),l&&(e in oi||(oi[e]={}),oi[e][n]=i)),void 0===n&&(n=r||1),r>n){var a=ze("VersionError","An attempt was made to open a database using a lower version than the existing version.",n);l?setTimeout((function(){c(a)})):c(a)}else i.transaction((function(e){e.executeSql("CREATE TABLE IF NOT EXISTS __sys__ (name BLOB, keyPath BLOB, autoInc BOOLEAN, indexList BLOB, currNum INTEGER)",[],(function(){function t(){u(e,i,r)}H.createIndexes?e.executeSql("CREATE INDEX IF NOT EXISTS sysname ON __sys__(name)",[],t,c):t()}),c)}),c)}return ni(r,e,
/* origin */
void 0,(function(n){var r;l&&(e in oi||(oi[e]={}),r=si(e)),r?h(r):ui(t.__openDatabase,(function(){ii.readTransaction((function(e){e.executeSql('SELECT "version" FROM dbVersions WHERE "name" = ?',[a],(function(e,t){0===t.rows.length?h(0):h(t.rows.item(0).version)}),c)}),c)}),c)})),r},hi.prototype.deleteDatabase=function(e){var t=this;if(!(t instanceof hi))throw new TypeError("Illegal invocation");if(0===arguments.length)throw new TypeError("Database name is required");if(Qr())throw ze("SecurityError","Cannot delete an IndexedDB database from an opaque origin.");var n,r=Y(e=String(e));try{n=J(e)}catch(h){throw h}var i="string"==typeof H.memoryDatabase,o=!1!==H.cacheDatabaseInstances||i,a=Ge.__createInstance(),s=!1,l=0,c=function(e,t){t(e)};function u(e,t){s||!0===t||(t=Pe(t||e),c(!0,(function(){a.__done=!0,a.__error=t,a.__result=void 0;var e=Ce("error",t,{bubbles:!0,cancelable:!0});a.dispatchEvent(e),s=!0})))}return ni(a,e,
/* origin */
void 0,(function(i){ui(t.__openDatabase,(function(){function a(){i.__result=void 0,i.__done=!0;var e=new Te("success",{oldVersion:l,newVersion:null});i.dispatchEvent(e)}function s(){c(!1,(function(){o&&e in oi&&delete oi[e],delete t.__connections[e],a()}))}ii.readTransaction((function(o){o.executeSql('SELECT "version" FROM dbVersions WHERE "name" = ?',[r],(function(o,h){if(0!==h.rows.length){var d=h.rows.item(0);l=d.version,ri(t.__connections[e]||[],i,l,null).then((function(){ii.transaction((function(i){i.executeSql('DELETE FROM dbVersions WHERE "name" = ? ',[r],(function(){ci(t.__openDatabase,e,n,s,u)}),u)}),u,null,(function(e,t,n,r,i){return!(!e.readOnly&&!t&&(c=function(e,t){e?r(e,t):i(t)},1))}))}),u)}else a()}),u)}))}),u)})),a},hi.prototype.cmp=function(e,t){if(!(this instanceof hi))throw new TypeError("Illegal invocation");if(arguments.length<2)throw new TypeError("You must provide two keys to be compared");return wt(e),wt(t),nt(e,t)},hi.prototype.databases=function(){var e=this,t=!1;return new Promise((function(n,r){if(!(e instanceof hi))throw new TypeError("Illegal invocation");if(Qr())throw ze("SecurityError","Cannot get IndexedDB database names from an opaque origin.");function i(e,n){t||(n=n?Pe(n):e,t=!0,r(n))}ui(e.__openDatabase,(function(){ii.readTransaction((function(e){e.executeSql('SELECT "name", "version" FROM dbVersions',[],(function(e,t){for(var r=[],i=0;i<t.rows.length;i++){var o=t.rows.item(i),a=o.name,s=o.version;r.push({name:K(a),version:s})}n(r)}),i)}),i)}),i)}))},hi.prototype.__forceClose=function(e,t,n){var r=this;function i(e){e.__forceClose(n)}if(ke(e))Object.values(r.__connections).forEach((function(e){i(e)}));else if(r.__connections[e])if(ke(t))r.__connections[e].forEach((function(e){i(e)}));else{if(!Number.isInteger(t)||t<0||t>r.__connections[e].length-1)throw new TypeError("If providing an argument, __forceClose must be called with a numeric index to indicate a specific connection to lose");i(r.__connections[e][t])}},hi.prototype.__setConnectionQueueOrigin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr();ei[e]={}},hi.prototype[Symbol.toStringTag]="IDBFactoryPrototype",Object.defineProperty(hi,"prototype",{writable:!1});var pi=hi.__createInstance();function fi(){throw new TypeError("Illegal constructor")}var mi=fi;fi.__super=function(e,t,n,r,i,o,a){this[Symbol.toStringTag]="IDBCursor",fe(this,["key","primaryKey","request"]),Dr.__invalidStateIfDeleted(n),this.__indexSource=ie(r,Sr),this.__indexSource&&Sr.__invalidStateIfDeleted(r),tn.__assertActive(n.transaction);var s=Vt(e);if(void 0!==t&&!["next","prev","nextunique","prevunique"].includes(t))throw new TypeError(t+"is not a valid cursor direction");Object.defineProperties(this,{
// Babel is not respecting default writable false here, so make explicit
source:{writable:!1,value:r},direction:{writable:!1,value:t||"next"}}),this.__key=void 0,this.__primaryKey=void 0,this.__store=n,this.__range=s,this.__request=He.__createInstance(),this.__request.__source=r,this.__request.__transaction=this.__store.transaction,this.__keyColumnName=i,this.__valueColumnName=o,this.__keyOnly="key"===o,this.__valueDecoder=this.__keyOnly?qt:xr,this.__count=a,this.__prefetchedIndex=-1,this.__multiEntryIndex=!!this.__indexSource&&r.multiEntry,this.__unique=this.direction.includes("unique"),this.__sqlDirection=["prev","prevunique"].includes(this.direction)?"DESC":"ASC",void 0!==s&&(s.__lowerCached=void 0!==s.lower&&Lt(s.lower,this.__multiEntryIndex),s.__upperCached=void 0!==s.upper&&Lt(s.upper,this.__multiEntryIndex)),this.__gotValue=!0,this.continue()},fi.__createInstance=function(){var e=mi.__super;e.prototype=mi.prototype;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f(e,n)},fi.prototype.__find=function(){this.__multiEntryIndex?this.__findMultiEntry.apply(this,arguments):this.__findBasic.apply(this,arguments)},fi.prototype.__findBasic=function(e,t,n,r,i,o){var a=void 0!==o;o=o||1;var s=this,l=Z(s.__keyColumnName),c=Z("key"),u=["SELECT * FROM",ee(s.__store.__currentName)],h=[];u.push("WHERE",l,"NOT NULL"),Gt(s.__range,l,u,h,!0,!0);var d=s.__sqlDirection,p="ASC"===d?">":"<";void 0!==t&&(u.push("AND",c,p+"= ?"),h.push(Lt(t))),void 0!==e?(u.push("AND",l,p+"= ?"),h.push(Lt(e))):a&&void 0!==s.__key&&(u.push("AND",l,p+" ?"),h.push(Lt(s.__key))),s.__count||(u.push("ORDER BY",l,d),"key"!==s.__keyColumnName&&(s.__unique?"prevunique"===s.direction&&u.push(",",c,"ASC"):u.push(",",c,d)),!s.__unique&&s.__indexSource&&u.push(",",Z(s.__valueColumnName),d),u.push("LIMIT",o)),u=u.join(" "),H.DEBUG,n.executeSql(u,h,(function(e,t){s.__count?r(void 0,t.rows.length,void 0):t.rows.length>1?(s.__prefetchedIndex=0,s.__prefetchedData=t.rows,H.DEBUG,s.__decode(t.rows.item(0),r)):1===t.rows.length?s.__decode(t.rows.item(0),r):(H.DEBUG,r(void 0,void 0,void 0))}),(function(e,t){H.DEBUG,i(t)}))};var gi=/\[/g;function vi(){throw new TypeError("Illegal constructor")}fi.prototype.__findMultiEntry=function(e,t,n,r,i){var o=this;if(o.__prefetchedData&&o.__prefetchedData.length===o.__prefetchedIndex)return H.DEBUG,void r(void 0,void 0,void 0);var a=Z(o.__keyColumnName),s=["SELECT * FROM",ee(o.__store.__currentName)],l=[];s.push("WHERE",a,"NOT NULL"),o.__range&&void 0!==o.__range.lower&&Array.isArray(o.__range.upper)&&0===o.__range.upper.indexOf(o.__range.lower)&&(s.push("AND",a,"LIKE ? ESCAPE '^'"),l.push("%"+re(o.__range.__lowerCached.slice(0,-1))+"%"));var c=o.__sqlDirection,u="ASC"===c?">":"<",h=Z("key");void 0!==t&&(s.push("AND",h,u+"= ?"),l.push(Lt(t))),void 0!==e?(s.push("AND",a,u+"= ?"),l.push(Lt(e))):void 0!==o.__key&&(s.push("AND",a,u+" ?"),l.push(Lt(o.__key))),o.__count||(s.push("ORDER BY",a,c),o.__unique||"key"===o.__keyColumnName||s.push(",",Z("key"),c),!o.__unique&&o.__indexSource&&s.push(",",Z(o.__valueColumnName),c)),s=s.join(" "),H.DEBUG,n.executeSql(s,l,(function(e,t){if(t.rows.length>0){if(o.__count){for(var n=0,i=0;i<t.rows.length;i++)n+=Dt(Mt(t.rows.item(i)[o.__keyColumnName],!0),o.__range).length;return void r(void 0,n,void 0)}for(var a=[],s=0;s<t.rows.length;s++){var l,c=t.rows.item(s),u=C(Dt(Mt(c[o.__keyColumnName],!0),o.__range));try{for(u.s();!(l=u.n()).done;){var h={matchingKey:Lt(l.value,!0),key:c.key};h[o.__keyColumnName]=c[o.__keyColumnName],h[o.__valueColumnName]=c[o.__valueColumnName],a.push(h)}}catch(p){u.e(p)}finally{u.f()}}var d=0===o.direction.indexOf("prev");a.sort((function(e,t){return e.matchingKey.replace(gi,"z")<t.matchingKey.replace(gi,"z")?d?1:-1:e.matchingKey.replace(gi,"z")>t.matchingKey.replace(gi,"z")?d?-1:1:e.key<t.key?"prev"===o.direction?1:-1:e.key>t.key?"prev"===o.direction?-1:1:0})),a.length>1?(o.__prefetchedIndex=0,o.__prefetchedData={data:a,length:a.length,item:function(e){return this.data[e]}},H.DEBUG,o.__decode(a[0],r)):1===a.length?(H.DEBUG,o.__decode(a[0],r)):(H.DEBUG,r(void 0,void 0,void 0))}else H.DEBUG,r(void 0,void 0,void 0)}),(function(e,t){H.DEBUG,i(t)}))},fi.prototype.__onsuccess=function(e){var t=this;return function(n,r,i){t.__count?e(r,t.__request):(void 0!==n&&(t.__gotValue=!0),t.__key=void 0===n?null:n,t.__primaryKey=void 0===i?null:i,t.__value=void 0===r?null:r,e(void 0===n?null:t,t.__request))}},fi.prototype.__decode=function(e,t){var n=this;if(n.__multiEntryIndex&&n.__unique){if(n.__matchedKeys||(n.__matchedKeys={}),n.__matchedKeys[e.matchingKey])return void t(void 0,void 0,void 0);n.__matchedKeys[e.matchingKey]=!0}var r=K(n.__multiEntryIndex?e.matchingKey:e[n.__keyColumnName]),i=K(e[n.__valueColumnName]),o=K(e.key);t(Mt(r,n.__multiEntryIndex),n.__valueDecoder.decode(i),Mt(o),r
/*, encVal, encPrimaryKey */)},fi.prototype.__sourceOrEffectiveObjStoreDeleted=function(){Dr.__invalidStateIfDeleted(this.__store,"The cursor's effective object store has been deleted"),this.__indexSource&&Sr.__invalidStateIfDeleted(this.source,"The cursor's index source has been deleted")},fi.prototype.__invalidateCache=function(){this.__prefetchedData=null},fi.prototype.__continue=function(e,t){var n=this,r=void 0!==n.__advanceCount;if(tn.__assertActive(n.__store.transaction),n.__sourceOrEffectiveObjStoreDeleted(),!n.__gotValue&&!t)throw ze("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(void 0!==e){wt(e);var i=nt(e,n.key);if(0===i||n.direction.includes("next")&&-1===i||n.direction.includes("prev")&&1===i)throw ze("DataError","Cannot "+(r?"advance":"continue")+" the cursor in an unexpected direction")}this.__continueFinish(e,void 0,r)},fi.prototype.__continueFinish=function(e,t,n){var r=this,i=r.__advanceCount||H.cursorPreloadPackSize||100;r.__gotValue=!1,r.__request.__done=!1,r.__store.transaction.__pushToQueue(r.__request,(function o(a,s,l,c,u){function h(e,t,i){if(n){if(r.__advanceCount>=2&&void 0!==e)return r.__advanceCount--,r.__key=e,r.__continue(void 0,!0),void u();r.__advanceCount=void 0}r.__onsuccess(l)(e,t,i)}r.__prefetchedData&&(r.__prefetchedIndex++,r.__prefetchedIndex<r.__prefetchedData.length)?r.__decode(r.__prefetchedData.item(r.__prefetchedIndex),(function(n,i,u,d){function p(){var d=void 0===e||nt(n,e);d>0||0===d&&(r.__unique||void 0===t||nt(u,t)>=0)?h(n,i,u):o(a,s,l,c)}!r.__unique||r.__multiEntryIndex||d!==Lt(r.key,r.__multiEntryIndex)?p():o(a,s,l,c)})):r.__find(e,t,a,h,(function(){r.__advanceCount=void 0,c.apply(void 0,arguments)}),i)}))},fi.prototype.continue=function(){this.__continue(arguments[0])},fi.prototype.continuePrimaryKey=function(e,t){var n=this;if(tn.__assertActive(n.__store.transaction),n.__sourceOrEffectiveObjStoreDeleted(),!n.__indexSource)throw ze("InvalidAccessError","`continuePrimaryKey` may only be called on an index source.");if(!["next","prev"].includes(n.direction))throw ze("InvalidAccessError","`continuePrimaryKey` may not be called with unique cursors.");if(!n.__gotValue)throw ze("InvalidStateError","The cursor is being iterated or has iterated past its end.");wt(e),wt(t);var r=nt(e,n.key);if("next"===n.direction&&-1===r||"prev"===n.direction&&1===r)throw ze("DataError","Cannot continue the cursor in an unexpected direction");function i(){n.__continueFinish(e,t,!1)}0===r?_r(t,(function(e){_r(n.primaryKey,(function(t){if(e===t||"next"===n.direction&&e<t||"prev"===n.direction&&e>t)throw ze("DataError","Cannot continue the cursor in an unexpected direction");i()}))})):i()},fi.prototype.advance=function(e){var t=this;if(0===(e=ye(e,"unsigned long")))throw new TypeError("Calling advance() with count argument 0");t.__gotValue&&(t.__advanceCount=e),t.__continue()},fi.prototype.update=function(e){var t=this;if(!arguments.length)throw new TypeError("A value must be passed to update()");if(tn.__assertActive(t.__store.transaction),t.__store.transaction.__assertWritable(),t.__sourceOrEffectiveObjStoreDeleted(),!t.__gotValue)throw ze("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(t.__keyOnly)throw ze("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");var n=t.__store.transaction.__createRequest(t),r=t.primaryKey;function i(e){Dr.__storingRecordObjectStore(n,t.__store,!1,e,!1,r)}if(null!==t.__store.keyPath){var o=m(t.__store.__validateKeyAndValueAndCloneValue(e,void 0,!0),2),a=o[0],s=o[1];if(0!==nt(t.primaryKey,a))throw ze("DataError","The key of the supplied value to `update` is not equal to the cursor's effective key");i(s)}else i(kr(e));return n},fi.prototype.delete=function(){var e=this;if(tn.__assertActive(e.__store.transaction),e.__store.transaction.__assertWritable(),e.__sourceOrEffectiveObjStoreDeleted(),!e.__gotValue)throw ze("InvalidStateError","The cursor is being iterated or has iterated past its end.");if(e.__keyOnly)throw ze("InvalidStateError","This cursor method cannot be called when the key only flag has been set.");return this.__store.transaction.__addToTransactionQueue((function(t,n,r,i){e.__find(void 0,void 0,t,(function(n,o,a){var s="DELETE FROM  "+ee(e.__store.__currentName)+' WHERE "key" = ?';H.DEBUG,t.executeSql(s,[Y(Lt(a))],(function(e,t){1===t.rowsAffected?r(void 0):i("No rows with key found"+n)}),(function(e,t){i(t)}))}),i)}),void 0,e)},fi.prototype[Symbol.toStringTag]="IDBCursorPrototype",de(fi.prototype,["source","direction","key","primaryKey","request"]),Object.defineProperty(fi,"prototype",{writable:!1}),vi.prototype=Object.create(fi.prototype),Object.defineProperty(vi.prototype,"constructor",{enumerable:!1,writable:!0,configurable:!0,value:vi});var yi=vi;function bi(e,t){if(e&&"object"===o(e))Object.entries(e).forEach((function(e){var t=m(e,2);bi(t[0],t[1])}));else{if(!(e in H))throw new Error(e+" is not a valid configuration property");H[e]=t,"registerSCA"===e&&"function"==typeof t&&br(t)}}function _i(t,n){var r="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==I?I:{};function i(t,n,i){if(!i||!Object.defineProperty)try{r[t]=n}catch(wi){}if(r[t]!==n&&Object.defineProperty)try{var o=i||{};if("get"in o){var a=e("get",{},t,(function(){return i.get.call(this)}));o=Object.getOwnPropertyDescriptor(a,t)}else"value"in o||(o.value=n),"writable"in o||(o.writable=!0);Object.defineProperty(r,t,o)}catch(wi){}r[t]!==n&&"undefined"!=typeof console&&console.warn}void 0!==H.win.openDatabase&&i("shimIndexedDB",pi,{enumerable:!1,configurable:!0}),r.shimIndexedDB?(r.shimIndexedDB.__useShim=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(e+"DOMException",Re),i(e+"DOMStringList",Xt,{enumerable:!1,configurable:!0,writable:!0,value:Xt}),i(e+"Event",F,{configurable:!0,writable:!0,value:F,enumerable:!1}),i(e+"CustomEvent",O,{configurable:!0,writable:!0,value:O,enumerable:!1}),i(e+"EventTarget",z,{configurable:!0,writable:!0,value:z,enumerable:!1})}var t=hi;void 0!==H.win.openDatabase&&(pi.__openDatabase=H.win.openDatabase.bind(H.win),i("indexedDB",pi,{enumerable:!0,configurable:!0,get:function(){if(this!==r&&!ke(this)&&!this.shimNS)throw new TypeError("Illegal invocation");return pi}}),[["IDBFactory",t],["IDBDatabase",Yr],["IDBObjectStore",Dr],["IDBIndex",Sr],["IDBTransaction",tn],["IDBCursor",fi],["IDBCursorWithValue",vi],["IDBKeyRange",Ut],["IDBRequest",He],["IDBOpenDBRequest",Ge],["IDBVersionChangeEvent",Te]].forEach((function(e){var t=m(e,2);i(t[0],t[1],{enumerable:!1,configurable:!0})})),H.fs&&Zr(H.fs),H.fullIDLSupport&&(Object.setPrototypeOf(r.IDBOpenDBRequest,r.IDBRequest),Object.setPrototypeOf(r.IDBCursorWithValue,r.IDBCursor),Object.setPrototypeOf(Yr,z),Object.setPrototypeOf(He,z),Object.setPrototypeOf(tn,z),Object.setPrototypeOf(Te,F),Object.setPrototypeOf(Re,Error),Object.setPrototypeOf(Re.prototype,Error.prototype),$()),r.indexedDB&&!r.indexedDB.toString().includes("[native code]")&&(H.addNonIDBGlobals&&e("Shim"),H.replaceNonIDBGlobals&&e()),r.shimIndexedDB.__setConnectionQueueOrigin())},r.shimIndexedDB.__debug=function(e){H.DEBUG=e},r.shimIndexedDB.__setConfig=bi,r.shimIndexedDB.__getConfig=function(e){if(!(e in H))throw new Error(e+" is not a valid configuration property");return H[e]},r.shimIndexedDB.__setUnicodeIdentifiers=function(e){bi({UnicodeIDStart:e.UnicodeIDStart,UnicodeIDContinue:e.UnicodeIDContinue})}):(r.shimIndexedDB={},["__useShim","__debug","__setConfig","__getConfig","__setUnicodeIdentifiers"].forEach((function(e){r.shimIndexedDB[e]=function(){}}))),"indexedDB"in r||"undefined"==typeof window||(r.indexedDB=r.indexedDB||r.webkitIndexedDB||r.mozIndexedDB||r.oIndexedDB||r.msIndexedDB);var o=!1;return"undefined"!=typeof navigator&&// Not apparently defined in React Native
navigator.userAgent&&(// Ignore Node or other environments
// Bad non-Chrome Android support
/Android (?:2|3|4\.[0-3])/.test(navigator.userAgent)&&!navigator.userAgent.includes("Chrome")||// Bad non-Safari iOS9 support (see <https://github.com/axemclion/IndexedDBShim/issues/252>)
(!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome"))&&// Exclude genuine Safari: http://stackoverflow.com/a/7768006/271577
// Detect iOS: http://stackoverflow.com/questions/9038625/detect-if-device-is-ios/9039885#9039885
// and detect version 9: http://stackoverflow.com/a/26363560/271577
/(iPad|iPhone|iPod)(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])* o[s\u017F] 9_/i.test(navigator.userAgent)&&!window.MSStream)&&(o=!0),H.DEFAULT_DB_SIZE||(H.DEFAULT_DB_SIZE=// Safari currently requires larger size: (We don't need a larger size for Node as node-websql doesn't use this info)
// https://github.com/axemclion/IndexedDBShim/issues/41
// https://github.com/axemclion/IndexedDBShim/issues/115
1024*("undefined"!=typeof navigator&&// React Native
navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?25:4)*1024),H.avoidAutoShim||r.indexedDB&&!o||void 0===H.win.openDatabase?(r.IDBDatabase=r.IDBDatabase||r.webkitIDBDatabase,r.IDBTransaction=r.IDBTransaction||r.webkitIDBTransaction||{},r.IDBCursor=r.IDBCursor||r.webkitIDBCursor,r.IDBKeyRange=r.IDBKeyRange||r.webkitIDBKeyRange):r.shimIndexedDB.__useShim(),r}vi.__createInstance=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){var e;(e=fi.__super).call.apply(e,[this].concat(t)),this[Symbol.toStringTag]="IDBCursorWithValue",fe(this,"value")}return r.prototype=yi.prototype,new r},de(vi.prototype,["value"]),vi.prototype[Symbol.toStringTag]="IDBCursorWithValuePrototype",Object.defineProperty(vi,"prototype",{writable:!1}),H.win="undefined"!=typeof window?window:self,_i()}());const ko={},xo=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));r=Promise.allSettled(t.map((t=>{if(t=function(e,t){return new URL(e,t).href}(t,n),t in ko)return;ko[t]=!0;const r=t.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(!!n)for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.href===t&&(!r||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const a=document.createElement("link");return a.rel=r?"stylesheet":"modulepreload",r||(a.as="script"),a.crossOrigin="",a.href=t,o&&a.setAttribute("nonce",o),document.head.appendChild(a),r?new Promise(((e,n)=>{a.addEventListener("load",e),a.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)}))};function Co(e,t){return e[t].content}function So(e,t){const n=function(e){let t=e.defs;e.enabled.length&&(t=Object.keys(t).reduce(((n,r)=>(e.enabled.indexOf(r)>=0&&(n[r]=t[r]),n)),{}));const n=Object.keys(e.shortcuts).reduce(((n,r)=>t[r]?Array.isArray(e.shortcuts[r])?(e.shortcuts[r].forEach((e=>{n[e]=r})),n):(n[e.shortcuts[r]]=r,n):n),{}),r=Object.keys(t);let i;i=0===r.length?"^$":r.map((e=>`:${e}:`)).concat(Object.keys(n)).sort().reverse().map((e=>e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&"))).join("|");const o=RegExp(i),a=RegExp(i,"g");return{defs:t,shortcuts:n,scanRE:o,replaceRE:a}}(e.utils.assign({},{defs:{},shortcuts:{},enabled:[]},t||{}));e.renderer.rules.emoji=Co,e.core.ruler.after("linkify","emoji",function(e,t,n,r,i){const o=e.utils.arrayReplaceAt,a=e.utils.lib.ucmicro,s=e.utils.has,l=new RegExp([a.Z.source,a.P.source,a.Cc.source].join("|"));function c(e,r,o){let a=0;const c=[];if(e.replace(i,(function(r,i,u){let h;if(s(n,r)){if(h=n[r],i>0&&!l.test(u[i-1]))return;if(i+r.length<u.length&&!l.test(u[i+r.length]))return}else h=r.slice(1,-1);if(i>a){const t=new o("text","",0);t.content=e.slice(a,i),c.push(t)}const d=new o("emoji","",0);d.markup=h,d.content=t[h],c.push(d),a=i+r.length})),a<e.length){const t=new o("text","",0);t.content=e.slice(a),c.push(t)}return c}return function(e){let t;const n=e.tokens;let i=0;for(let a=0,s=n.length;a<s;a++){if("inline"!==n[a].type)continue;let s=n[a].children;for(let l=s.length-1;l>=0;l--)t=s[l],"link_open"!==t.type&&"link_close"!==t.type||"auto"===t.info&&(i-=t.nesting),"text"===t.type&&0===i&&r.test(t.content)&&(n[a].children=s=o(s,l,c(t.content,t.level,e.Token)))}}}(e,n.defs,n.shortcuts,n.scanRE,n.replaceRE))}const To={angry:[">:(",">:-("],blush:[':")',':-")'],broken_heart:["</3","<\\3"],
// :\ and :-\ not used because of conflict with markdown escaping
confused:[":/",":-/"],
// twemoji shows question
cry:[":'(",":'-(",":,(",":,-("],frowning:[":(",":-("],heart:["<3"],imp:["]:(","]:-("],innocent:["o:)","O:)","o:-)","O:-)","0:)","0:-)"],joy:[":')",":'-)",":,)",":,-)",":'D",":'-D",":,D",":,-D"],kissing:[":*",":-*"],laughing:["x-)","X-)"],neutral_face:[":|",":-|"],open_mouth:[":o",":-o",":O",":-O"],rage:[":@",":-@"],smile:[":D",":-D"],smiley:[":)",":-)"],smiling_imp:["]:)","]:-)"],sob:[":,'(",":,'-(",";(",";-("],stuck_out_tongue:[":P",":-P"],sunglasses:["8-)","B-)"],sweat:[",:(",",:-("],sweat_smile:[",:)",",:-)"],unamused:[":s",":-S",":z",":-Z",":$",":-$"],wink:[";)",";-)"]},Eo={100:"",1234:"",grinning:"",smiley:"",smile:"",grin:"",laughing:"",satisfied:"",sweat_smile:"",rofl:"",joy:"",slightly_smiling_face:"",upside_down_face:"",melting_face:"",wink:"",blush:"",innocent:"",smiling_face_with_three_hearts:"",heart_eyes:"",star_struck:"",kissing_heart:"",kissing:"",relaxed:"",kissing_closed_eyes:"",kissing_smiling_eyes:"",smiling_face_with_tear:"",yum:"",stuck_out_tongue:"",stuck_out_tongue_winking_eye:"",zany_face:"",stuck_out_tongue_closed_eyes:"",money_mouth_face:"",hugs:"",hand_over_mouth:"",face_with_open_eyes_and_hand_over_mouth:"",face_with_peeking_eye:"",shushing_face:"",thinking:"",saluting_face:"",zipper_mouth_face:"",raised_eyebrow:"",neutral_face:"",expressionless:"",no_mouth:"",dotted_line_face:"",face_in_clouds:"",smirk:"",unamused:"",roll_eyes:"",grimacing:"",face_exhaling:"",lying_face:"",shaking_face:"",relieved:"",pensive:"",sleepy:"",drooling_face:"",sleeping:"",mask:"",face_with_thermometer:"",face_with_head_bandage:"",nauseated_face:"",vomiting_face:"",sneezing_face:"",hot_face:"",cold_face:"",woozy_face:"",dizzy_face:"",face_with_spiral_eyes:"",exploding_head:"",cowboy_hat_face:"",partying_face:"",disguised_face:"",sunglasses:"",nerd_face:"",monocle_face:"",confused:"",face_with_diagonal_mouth:"",worried:"",slightly_frowning_face:"",frowning_face:"",open_mouth:"",hushed:"",astonished:"",flushed:"",pleading_face:"",face_holding_back_tears:"",frowning:"",anguished:"",fearful:"",cold_sweat:"",disappointed_relieved:"",cry:"",sob:"",scream:"",confounded:"",persevere:"",disappointed:"",sweat:"",weary:"",tired_face:"",yawning_face:"",triumph:"",rage:"",pout:"",angry:"",cursing_face:"",smiling_imp:"",imp:"",skull:"",skull_and_crossbones:"",hankey:"",poop:"",shit:"",clown_face:"",japanese_ogre:"",japanese_goblin:"",ghost:"",alien:"",space_invader:"",robot:"",smiley_cat:"",smile_cat:"",joy_cat:"",heart_eyes_cat:"",smirk_cat:"",kissing_cat:"",scream_cat:"",crying_cat_face:"",pouting_cat:"",see_no_evil:"",hear_no_evil:"",speak_no_evil:"",love_letter:"",cupid:"",gift_heart:"",sparkling_heart:"",heartpulse:"",heartbeat:"",revolving_hearts:"",two_hearts:"",heart_decoration:"",heavy_heart_exclamation:"",broken_heart:"",heart_on_fire:"",mending_heart:"",heart:"",pink_heart:"",orange_heart:"",yellow_heart:"",green_heart:"",blue_heart:"",light_blue_heart:"",purple_heart:"",brown_heart:"",black_heart:"",grey_heart:"",white_heart:"",kiss:"",anger:"",boom:"",collision:"",dizzy:"",sweat_drops:"",dash:"",hole:"",speech_balloon:"",eye_speech_bubble:"",left_speech_bubble:"",right_anger_bubble:"",thought_balloon:"",zzz:"",wave:"",raised_back_of_hand:"",raised_hand_with_fingers_splayed:"",hand:"",raised_hand:"",vulcan_salute:"",rightwards_hand:"",leftwards_hand:"",palm_down_hand:"",palm_up_hand:"",leftwards_pushing_hand:"",rightwards_pushing_hand:"",ok_hand:"",pinched_fingers:"",pinching_hand:"",v:"",crossed_fingers:"",hand_with_index_finger_and_thumb_crossed:"",love_you_gesture:"",metal:"",call_me_hand:"",point_left:"",point_right:"",point_up_2:"",middle_finger:"",fu:"",point_down:"",point_up:"",index_pointing_at_the_viewer:"","+1":"",thumbsup:"","-1":"",thumbsdown:"",fist_raised:"",fist:"",fist_oncoming:"",facepunch:"",punch:"",fist_left:"",fist_right:"",clap:"",raised_hands:"",heart_hands:"",open_hands:"",palms_up_together:"",handshake:"",pray:"",writing_hand:"",nail_care:"",selfie:"",muscle:"",mechanical_arm:"",mechanical_leg:"",leg:"",foot:"",ear:"",ear_with_hearing_aid:"",nose:"",brain:"",anatomical_heart:"",lungs:"",tooth:"",bone:"",eyes:"",eye:"",tongue:"",lips:"",biting_lip:"",baby:"",child:"",boy:"",girl:"",adult:"",blond_haired_person:"",man:"",bearded_person:"",man_beard:"",woman_beard:"",red_haired_man:"",curly_haired_man:"",white_haired_man:"",bald_man:"",woman:"",red_haired_woman:"",person_red_hair:"",curly_haired_woman:"",person_curly_hair:"",white_haired_woman:"",person_white_hair:"",bald_woman:"",person_bald:"",blond_haired_woman:"",blonde_woman:"",blond_haired_man:"",older_adult:"",older_man:"",older_woman:"",frowning_person:"",frowning_man:"",frowning_woman:"",pouting_face:"",pouting_man:"",pouting_woman:"",no_good:"",no_good_man:"",ng_man:"",no_good_woman:"",ng_woman:"",ok_person:"",ok_man:"",ok_woman:"",tipping_hand_person:"",information_desk_person:"",tipping_hand_man:"",sassy_man:"",tipping_hand_woman:"",sassy_woman:"",raising_hand:"",raising_hand_man:"",raising_hand_woman:"",deaf_person:"",deaf_man:"",deaf_woman:"",bow:"",bowing_man:"",bowing_woman:"",facepalm:"",man_facepalming:"",woman_facepalming:"",shrug:"",man_shrugging:"",woman_shrugging:"",health_worker:"",man_health_worker:"",woman_health_worker:"",student:"",man_student:"",woman_student:"",teacher:"",man_teacher:"",woman_teacher:"",judge:"",man_judge:"",woman_judge:"",farmer:"",man_farmer:"",woman_farmer:"",cook:"",man_cook:"",woman_cook:"",mechanic:"",man_mechanic:"",woman_mechanic:"",factory_worker:"",man_factory_worker:"",woman_factory_worker:"",office_worker:"",man_office_worker:"",woman_office_worker:"",scientist:"",man_scientist:"",woman_scientist:"",technologist:"",man_technologist:"",woman_technologist:"",singer:"",man_singer:"",woman_singer:"",artist:"",man_artist:"",woman_artist:"",pilot:"",man_pilot:"",woman_pilot:"",astronaut:"",man_astronaut:"",woman_astronaut:"",firefighter:"",man_firefighter:"",woman_firefighter:"",police_officer:"",cop:"",policeman:"",policewoman:"",detective:"",male_detective:"",female_detective:"",guard:"",guardsman:"",guardswoman:"",ninja:"",construction_worker:"",construction_worker_man:"",construction_worker_woman:"",person_with_crown:"",prince:"",princess:"",person_with_turban:"",man_with_turban:"",woman_with_turban:"",man_with_gua_pi_mao:"",woman_with_headscarf:"",person_in_tuxedo:"",man_in_tuxedo:"",woman_in_tuxedo:"",person_with_veil:"",man_with_veil:"",woman_with_veil:"",bride_with_veil:"",pregnant_woman:"",pregnant_man:"",pregnant_person:"",breast_feeding:"",woman_feeding_baby:"",man_feeding_baby:"",person_feeding_baby:"",angel:"",santa:"",mrs_claus:"",mx_claus:"",superhero:"",superhero_man:"",superhero_woman:"",supervillain:"",supervillain_man:"",supervillain_woman:"",mage:"",mage_man:"",mage_woman:"",fairy:"",fairy_man:"",fairy_woman:"",vampire:"",vampire_man:"",vampire_woman:"",merperson:"",merman:"",mermaid:"",elf:"",elf_man:"",elf_woman:"",genie:"",genie_man:"",genie_woman:"",zombie:"",zombie_man:"",zombie_woman:"",troll:"",massage:"",massage_man:"",massage_woman:"",haircut:"",haircut_man:"",haircut_woman:"",walking:"",walking_man:"",walking_woman:"",standing_person:"",standing_man:"",standing_woman:"",kneeling_person:"",kneeling_man:"",kneeling_woman:"",person_with_probing_cane:"",man_with_probing_cane:"",woman_with_probing_cane:"",person_in_motorized_wheelchair:"",man_in_motorized_wheelchair:"",woman_in_motorized_wheelchair:"",person_in_manual_wheelchair:"",man_in_manual_wheelchair:"",woman_in_manual_wheelchair:"",runner:"",running:"",running_man:"",running_woman:"",woman_dancing:"",dancer:"",man_dancing:"",business_suit_levitating:"",dancers:"",dancing_men:"",dancing_women:"",sauna_person:"",sauna_man:"",sauna_woman:"",climbing:"",climbing_man:"",climbing_woman:"",person_fencing:"",horse_racing:"",skier:"",snowboarder:"",golfing:"",golfing_man:"",golfing_woman:"",surfer:"",surfing_man:"",surfing_woman:"",rowboat:"",rowing_man:"",rowing_woman:"",swimmer:"",swimming_man:"",swimming_woman:"",bouncing_ball_person:"",bouncing_ball_man:"",basketball_man:"",bouncing_ball_woman:"",basketball_woman:"",weight_lifting:"",weight_lifting_man:"",weight_lifting_woman:"",bicyclist:"",biking_man:"",biking_woman:"",mountain_bicyclist:"",mountain_biking_man:"",mountain_biking_woman:"",cartwheeling:"",man_cartwheeling:"",woman_cartwheeling:"",wrestling:"",men_wrestling:"",women_wrestling:"",water_polo:"",man_playing_water_polo:"",woman_playing_water_polo:"",handball_person:"",man_playing_handball:"",woman_playing_handball:"",juggling_person:"",man_juggling:"",woman_juggling:"",lotus_position:"",lotus_position_man:"",lotus_position_woman:"",bath:"",sleeping_bed:"",people_holding_hands:"",two_women_holding_hands:"",couple:"",two_men_holding_hands:"",couplekiss:"",couplekiss_man_woman:"",couplekiss_man_man:"",couplekiss_woman_woman:"",couple_with_heart:"",couple_with_heart_woman_man:"",couple_with_heart_man_man:"",couple_with_heart_woman_woman:"",family:"",family_man_woman_boy:"",family_man_woman_girl:"",family_man_woman_girl_boy:"",family_man_woman_boy_boy:"",family_man_woman_girl_girl:"",family_man_man_boy:"",family_man_man_girl:"",family_man_man_girl_boy:"",family_man_man_boy_boy:"",family_man_man_girl_girl:"",family_woman_woman_boy:"",family_woman_woman_girl:"",family_woman_woman_girl_boy:"",family_woman_woman_boy_boy:"",family_woman_woman_girl_girl:"",family_man_boy:"",family_man_boy_boy:"",family_man_girl:"",family_man_girl_boy:"",family_man_girl_girl:"",family_woman_boy:"",family_woman_boy_boy:"",family_woman_girl:"",family_woman_girl_boy:"",family_woman_girl_girl:"",speaking_head:"",bust_in_silhouette:"",busts_in_silhouette:"",people_hugging:"",footprints:"",monkey_face:"",monkey:"",gorilla:"",orangutan:"",dog:"",dog2:"",guide_dog:"",service_dog:"",poodle:"",wolf:"",fox_face:"",raccoon:"",cat:"",cat2:"",black_cat:"",lion:"",tiger:"",tiger2:"",leopard:"",horse:"",moose:"",donkey:"",racehorse:"",unicorn:"",zebra:"",deer:"",bison:"",cow:"",ox:"",water_buffalo:"",cow2:"",pig:"",pig2:"",boar:"",pig_nose:"",ram:"",sheep:"",goat:"",dromedary_camel:"",camel:"",llama:"",giraffe:"",elephant:"",mammoth:"",rhinoceros:"",hippopotamus:"",mouse:"",mouse2:"",rat:"",hamster:"",rabbit:"",rabbit2:"",chipmunk:"",beaver:"",hedgehog:"",bat:"",bear:"",polar_bear:"",koala:"",panda_face:"",sloth:"",otter:"",skunk:"",kangaroo:"",badger:"",feet:"",paw_prints:"",turkey:"",chicken:"",rooster:"",hatching_chick:"",baby_chick:"",hatched_chick:"",bird:"",penguin:"",dove:"",eagle:"",duck:"",swan:"",owl:"",dodo:"",feather:"",flamingo:"",peacock:"",parrot:"",wing:"",black_bird:"",goose:"",frog:"",crocodile:"",turtle:"",lizard:"",snake:"",dragon_face:"",dragon:"",sauropod:"","t-rex":"",whale:"",whale2:"",dolphin:"",flipper:"",seal:"",fish:"",tropical_fish:"",blowfish:"",shark:"",octopus:"",shell:"",coral:"",jellyfish:"",snail:"",butterfly:"",bug:"",ant:"",bee:"",honeybee:"",beetle:"",lady_beetle:"",cricket:"",cockroach:"",spider:"",spider_web:"",scorpion:"",mosquito:"",fly:"",worm:"",microbe:"",bouquet:"",cherry_blossom:"",white_flower:"",lotus:"",rosette:"",rose:"",wilted_flower:"",hibiscus:"",sunflower:"",blossom:"",tulip:"",hyacinth:"",seedling:"",potted_plant:"",evergreen_tree:"",deciduous_tree:"",palm_tree:"",cactus:"",ear_of_rice:"",herb:"",shamrock:"",four_leaf_clover:"",maple_leaf:"",fallen_leaf:"",leaves:"",empty_nest:"",nest_with_eggs:"",mushroom:"",grapes:"",melon:"",watermelon:"",tangerine:"",orange:"",mandarin:"",lemon:"",banana:"",pineapple:"",mango:"",apple:"",green_apple:"",pear:"",peach:"",cherries:"",strawberry:"",blueberries:"",kiwi_fruit:"",tomato:"",olive:"",coconut:"",avocado:"",eggplant:"",potato:"",carrot:"",corn:"",hot_pepper:"",bell_pepper:"",cucumber:"",leafy_green:"",broccoli:"",garlic:"",onion:"",peanuts:"",beans:"",chestnut:"",ginger_root:"",pea_pod:"",bread:"",croissant:"",baguette_bread:"",flatbread:"",pretzel:"",bagel:"",pancakes:"",waffle:"",cheese:"",meat_on_bone:"",poultry_leg:"",cut_of_meat:"",bacon:"",hamburger:"",fries:"",pizza:"",hotdog:"",sandwich:"",taco:"",burrito:"",tamale:"",stuffed_flatbread:"",falafel:"",egg:"",fried_egg:"",shallow_pan_of_food:"",stew:"",fondue:"",bowl_with_spoon:"",green_salad:"",popcorn:"",butter:"",salt:"",canned_food:"",bento:"",rice_cracker:"",rice_ball:"",rice:"",curry:"",ramen:"",spaghetti:"",sweet_potato:"",oden:"",sushi:"",fried_shrimp:"",fish_cake:"",moon_cake:"",dango:"",dumpling:"",fortune_cookie:"",takeout_box:"",crab:"",lobster:"",shrimp:"",squid:"",oyster:"",icecream:"",shaved_ice:"",ice_cream:"",doughnut:"",cookie:"",birthday:"",cake:"",cupcake:"",pie:"",chocolate_bar:"",candy:"",lollipop:"",custard:"",honey_pot:"",baby_bottle:"",milk_glass:"",coffee:"",teapot:"",tea:"",sake:"",champagne:"",wine_glass:"",cocktail:"",tropical_drink:"",beer:"",beers:"",clinking_glasses:"",tumbler_glass:"",pouring_liquid:"",cup_with_straw:"",bubble_tea:"",beverage_box:"",mate:"",ice_cube:"",chopsticks:"",plate_with_cutlery:"",fork_and_knife:"",spoon:"",hocho:"",knife:"",jar:"",amphora:"",earth_africa:"",earth_americas:"",earth_asia:"",globe_with_meridians:"",world_map:"",japan:"",compass:"",mountain_snow:"",mountain:"",volcano:"",mount_fuji:"",camping:"",beach_umbrella:"",desert:"",desert_island:"",national_park:"",stadium:"",classical_building:"",building_construction:"",bricks:"",rock:"",wood:"",hut:"",houses:"",derelict_house:"",house:"",house_with_garden:"",office:"",post_office:"",european_post_office:"",hospital:"",bank:"",hotel:"",love_hotel:"",convenience_store:"",school:"",department_store:"",factory:"",japanese_castle:"",european_castle:"",wedding:"",tokyo_tower:"",statue_of_liberty:"",church:"",mosque:"",hindu_temple:"",synagogue:"",shinto_shrine:"",kaaba:"",fountain:"",tent:"",foggy:"",night_with_stars:"",cityscape:"",sunrise_over_mountains:"",sunrise:"",city_sunset:"",city_sunrise:"",bridge_at_night:"",hotsprings:"",carousel_horse:"",playground_slide:"",ferris_wheel:"",roller_coaster:"",barber:"",circus_tent:"",steam_locomotive:"",railway_car:"",bullettrain_side:"",bullettrain_front:"",train2:"",metro:"",light_rail:"",station:"",tram:"",monorail:"",mountain_railway:"",train:"",bus:"",oncoming_bus:"",trolleybus:"",minibus:"",ambulance:"",fire_engine:"",police_car:"",oncoming_police_car:"",taxi:"",oncoming_taxi:"",car:"",red_car:"",oncoming_automobile:"",blue_car:"",pickup_truck:"",truck:"",articulated_lorry:"",tractor:"",racing_car:"",motorcycle:"",motor_scooter:"",manual_wheelchair:"",motorized_wheelchair:"",auto_rickshaw:"",bike:"",kick_scooter:"",skateboard:"",roller_skate:"",busstop:"",motorway:"",railway_track:"",oil_drum:"",fuelpump:"",wheel:"",rotating_light:"",traffic_light:"",vertical_traffic_light:"",stop_sign:"",construction:"",anchor:"",ring_buoy:"",boat:"",sailboat:"",canoe:"",speedboat:"",passenger_ship:"",ferry:"",motor_boat:"",ship:"",airplane:"",small_airplane:"",flight_departure:"",flight_arrival:"",parachute:"",seat:"",helicopter:"",suspension_railway:"",mountain_cableway:"",aerial_tramway:"",artificial_satellite:"",rocket:"",flying_saucer:"",bellhop_bell:"",luggage:"",hourglass:"",hourglass_flowing_sand:"",watch:"",alarm_clock:"",stopwatch:"",timer_clock:"",mantelpiece_clock:"",clock12:"",clock1230:"",clock1:"",clock130:"",clock2:"",clock230:"",clock3:"",clock330:"",clock4:"",clock430:"",clock5:"",clock530:"",clock6:"",clock630:"",clock7:"",clock730:"",clock8:"",clock830:"",clock9:"",clock930:"",clock10:"",clock1030:"",clock11:"",clock1130:"",new_moon:"",waxing_crescent_moon:"",first_quarter_moon:"",moon:"",waxing_gibbous_moon:"",full_moon:"",waning_gibbous_moon:"",last_quarter_moon:"",waning_crescent_moon:"",crescent_moon:"",new_moon_with_face:"",first_quarter_moon_with_face:"",last_quarter_moon_with_face:"",thermometer:"",sunny:"",full_moon_with_face:"",sun_with_face:"",ringed_planet:"",star:"",star2:"",stars:"",milky_way:"",cloud:"",partly_sunny:"",cloud_with_lightning_and_rain:"",sun_behind_small_cloud:"",sun_behind_large_cloud:"",sun_behind_rain_cloud:"",cloud_with_rain:"",cloud_with_snow:"",cloud_with_lightning:"",tornado:"",fog:"",wind_face:"",cyclone:"",rainbow:"",closed_umbrella:"",open_umbrella:"",umbrella:"",parasol_on_ground:"",zap:"",snowflake:"",snowman_with_snow:"",snowman:"",comet:"",fire:"",droplet:"",ocean:"",jack_o_lantern:"",christmas_tree:"",fireworks:"",sparkler:"",firecracker:"",sparkles:"",balloon:"",tada:"",confetti_ball:"",tanabata_tree:"",bamboo:"",dolls:"",flags:"",wind_chime:"",rice_scene:"",red_envelope:"",ribbon:"",gift:"",reminder_ribbon:"",tickets:"",ticket:"",medal_military:"",trophy:"",medal_sports:"","1st_place_medal":"","2nd_place_medal":"","3rd_place_medal":"",soccer:"",baseball:"",softball:"",basketball:"",volleyball:"",football:"",rugby_football:"",tennis:"",flying_disc:"",bowling:"",cricket_game:"",field_hockey:"",ice_hockey:"",lacrosse:"",ping_pong:"",badminton:"",boxing_glove:"",martial_arts_uniform:"",goal_net:"",golf:"",ice_skate:"",fishing_pole_and_fish:"",diving_mask:"",running_shirt_with_sash:"",ski:"",sled:"",curling_stone:"",dart:"",yo_yo:"",kite:"",gun:"","8ball":"",crystal_ball:"",magic_wand:"",video_game:"",joystick:"",slot_machine:"",game_die:"",jigsaw:"",teddy_bear:"",pinata:"",mirror_ball:"",nesting_dolls:"",spades:"",hearts:"",diamonds:"",clubs:"",chess_pawn:"",black_joker:"",mahjong:"",flower_playing_cards:"",performing_arts:"",framed_picture:"",art:"",thread:"",sewing_needle:"",yarn:"",knot:"",eyeglasses:"",dark_sunglasses:"",goggles:"",lab_coat:"",safety_vest:"",necktie:"",shirt:"",tshirt:"",jeans:"",scarf:"",gloves:"",coat:"",socks:"",dress:"",kimono:"",sari:"",one_piece_swimsuit:"",swim_brief:"",shorts:"",bikini:"",womans_clothes:"",folding_hand_fan:"",purse:"",handbag:"",pouch:"",shopping:"",school_satchel:"",thong_sandal:"",mans_shoe:"",shoe:"",athletic_shoe:"",hiking_boot:"",flat_shoe:"",high_heel:"",sandal:"",ballet_shoes:"",boot:"",hair_pick:"",crown:"",womans_hat:"",tophat:"",mortar_board:"",billed_cap:"",military_helmet:"",rescue_worker_helmet:"",prayer_beads:"",lipstick:"",ring:"",gem:"",mute:"",speaker:"",sound:"",loud_sound:"",loudspeaker:"",mega:"",postal_horn:"",bell:"",no_bell:"",musical_score:"",musical_note:"",notes:"",studio_microphone:"",level_slider:"",control_knobs:"",microphone:"",headphones:"",radio:"",saxophone:"",accordion:"",guitar:"",musical_keyboard:"",trumpet:"",violin:"",banjo:"",drum:"",long_drum:"",maracas:"",flute:"",iphone:"",calling:"",phone:"",telephone:"",telephone_receiver:"",pager:"",fax:"",battery:"",low_battery:"",electric_plug:"",computer:"",desktop_computer:"",printer:"",keyboard:"",computer_mouse:"",trackball:"",minidisc:"",floppy_disk:"",cd:"",dvd:"",abacus:"",movie_camera:"",film_strip:"",film_projector:"",clapper:"",tv:"",camera:"",camera_flash:"",video_camera:"",vhs:"",mag:"",mag_right:"",candle:"",bulb:"",flashlight:"",izakaya_lantern:"",lantern:"",diya_lamp:"",notebook_with_decorative_cover:"",closed_book:"",book:"",open_book:"",green_book:"",blue_book:"",orange_book:"",books:"",notebook:"",ledger:"",page_with_curl:"",scroll:"",page_facing_up:"",newspaper:"",newspaper_roll:"",bookmark_tabs:"",bookmark:"",label:"",moneybag:"",coin:"",yen:"",dollar:"",euro:"",pound:"",money_with_wings:"",credit_card:"",receipt:"",chart:"",envelope:"",email:"","e-mail":"",incoming_envelope:"",envelope_with_arrow:"",outbox_tray:"",inbox_tray:"",package:"",mailbox:"",mailbox_closed:"",mailbox_with_mail:"",mailbox_with_no_mail:"",postbox:"",ballot_box:"",pencil2:"",black_nib:"",fountain_pen:"",pen:"",paintbrush:"",crayon:"",memo:"",pencil:"",briefcase:"",file_folder:"",open_file_folder:"",card_index_dividers:"",date:"",calendar:"",spiral_notepad:"",spiral_calendar:"",card_index:"",chart_with_upwards_trend:"",chart_with_downwards_trend:"",bar_chart:"",clipboard:"",pushpin:"",round_pushpin:"",paperclip:"",paperclips:"",straight_ruler:"",triangular_ruler:"",scissors:"",card_file_box:"",file_cabinet:"",wastebasket:"",lock:"",unlock:"",lock_with_ink_pen:"",closed_lock_with_key:"",key:"",old_key:"",hammer:"",axe:"",pick:"",hammer_and_pick:"",hammer_and_wrench:"",dagger:"",crossed_swords:"",bomb:"",boomerang:"",bow_and_arrow:"",shield:"",carpentry_saw:"",wrench:"",screwdriver:"",nut_and_bolt:"",gear:"",clamp:"",balance_scale:"",probing_cane:"",link:"",chains:"",hook:"",toolbox:"",magnet:"",ladder:"",alembic:"",test_tube:"",petri_dish:"",dna:"",microscope:"",telescope:"",satellite:"",syringe:"",drop_of_blood:"",pill:"",adhesive_bandage:"",crutch:"",stethoscope:"",x_ray:"",door:"",elevator:"",mirror:"",window:"",bed:"",couch_and_lamp:"",chair:"",toilet:"",plunger:"",shower:"",bathtub:"",mouse_trap:"",razor:"",lotion_bottle:"",safety_pin:"",broom:"",basket:"",roll_of_paper:"",bucket:"",soap:"",bubbles:"",toothbrush:"",sponge:"",fire_extinguisher:"",shopping_cart:"",smoking:"",coffin:"",headstone:"",funeral_urn:"",nazar_amulet:"",hamsa:"",moyai:"",placard:"",identification_card:"",atm:"",put_litter_in_its_place:"",potable_water:"",wheelchair:"",mens:"",womens:"",restroom:"",baby_symbol:"",wc:"",passport_control:"",customs:"",baggage_claim:"",left_luggage:"",warning:"",children_crossing:"",no_entry:"",no_entry_sign:"",no_bicycles:"",no_smoking:"",do_not_litter:"","non-potable_water":"",no_pedestrians:"",no_mobile_phones:"",underage:"",radioactive:"",biohazard:"",arrow_up:"",arrow_upper_right:"",arrow_right:"",arrow_lower_right:"",arrow_down:"",arrow_lower_left:"",arrow_left:"",arrow_upper_left:"",arrow_up_down:"",left_right_arrow:"",leftwards_arrow_with_hook:"",arrow_right_hook:"",arrow_heading_up:"",arrow_heading_down:"",arrows_clockwise:"",arrows_counterclockwise:"",back:"",end:"",on:"",soon:"",top:"",place_of_worship:"",atom_symbol:"",om:"",star_of_david:"",wheel_of_dharma:"",yin_yang:"",latin_cross:"",orthodox_cross:"",star_and_crescent:"",peace_symbol:"",menorah:"",six_pointed_star:"",khanda:"",aries:"",taurus:"",gemini:"",cancer:"",leo:"",virgo:"",libra:"",scorpius:"",sagittarius:"",capricorn:"",aquarius:"",pisces:"",ophiuchus:"",twisted_rightwards_arrows:"",repeat:"",repeat_one:"",arrow_forward:"",fast_forward:"",next_track_button:"",play_or_pause_button:"",arrow_backward:"",rewind:"",previous_track_button:"",arrow_up_small:"",arrow_double_up:"",arrow_down_small:"",arrow_double_down:"",pause_button:"",stop_button:"",record_button:"",eject_button:"",cinema:"",low_brightness:"",high_brightness:"",signal_strength:"",wireless:"",vibration_mode:"",mobile_phone_off:"",female_sign:"",male_sign:"",transgender_symbol:"",heavy_multiplication_x:"",heavy_plus_sign:"",heavy_minus_sign:"",heavy_division_sign:"",heavy_equals_sign:"",infinity:"",bangbang:"",interrobang:"",question:"",grey_question:"",grey_exclamation:"",exclamation:"",heavy_exclamation_mark:"",wavy_dash:"",currency_exchange:"",heavy_dollar_sign:"",medical_symbol:"",recycle:"",fleur_de_lis:"",trident:"",name_badge:"",beginner:"",o:"",white_check_mark:"",ballot_box_with_check:"",heavy_check_mark:"",x:"",negative_squared_cross_mark:"",curly_loop:"",loop:"",part_alternation_mark:"",eight_spoked_asterisk:"",eight_pointed_black_star:"",sparkle:"",copyright:"",registered:"",tm:"",hash:"#",asterisk:"*",zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",keycap_ten:"",capital_abcd:"",abcd:"",symbols:"",abc:"",a:"",ab:"",b:"",cl:"",cool:"",free:"",information_source:"",id:"",m:"",new:"",ng:"",o2:"",ok:"",parking:"",sos:"",up:"",vs:"",koko:"",sa:"",ideograph_advantage:"",accept:"",congratulations:"",secret:"",u6e80:"",red_circle:"",orange_circle:"",yellow_circle:"",green_circle:"",large_blue_circle:"",purple_circle:"",brown_circle:"",black_circle:"",white_circle:"",red_square:"",orange_square:"",yellow_square:"",green_square:"",blue_square:"",purple_square:"",brown_square:"",black_large_square:"",white_large_square:"",black_medium_square:"",white_medium_square:"",black_medium_small_square:"",white_medium_small_square:"",black_small_square:"",white_small_square:"",large_orange_diamond:"",large_blue_diamond:"",small_orange_diamond:"",small_blue_diamond:"",small_red_triangle:"",small_red_triangle_down:"",diamond_shape_with_a_dot_inside:"",radio_button:"",white_square_button:"",black_square_button:"",checkered_flag:"",triangular_flag_on_post:"",crossed_flags:"",black_flag:"",white_flag:"",rainbow_flag:"",transgender_flag:"",pirate_flag:"",ascension_island:"",andorra:"",united_arab_emirates:"",afghanistan:"",antigua_barbuda:"",anguilla:"",albania:"",armenia:"",angola:"",antarctica:"",argentina:"",american_samoa:"",austria:"",australia:"",aruba:"",aland_islands:"",azerbaijan:"",bosnia_herzegovina:"",barbados:"",bangladesh:"",belgium:"",burkina_faso:"",bulgaria:"",bahrain:"",burundi:"",benin:"",st_barthelemy:"",bermuda:"",brunei:"",bolivia:"",caribbean_netherlands:"",brazil:"",bahamas:"",bhutan:"",bouvet_island:"",botswana:"",belarus:"",belize:"",canada:"",cocos_islands:"",congo_kinshasa:"",central_african_republic:"",congo_brazzaville:"",switzerland:"",cote_divoire:"",cook_islands:"",chile:"",cameroon:"",cn:"",colombia:"",clipperton_island:"",costa_rica:"",cuba:"",cape_verde:"",curacao:"",christmas_island:"",cyprus:"",czech_republic:"",de:"",diego_garcia:"",djibouti:"",denmark:"",dominica:"",dominican_republic:"",algeria:"",ceuta_melilla:"",ecuador:"",estonia:"",egypt:"",western_sahara:"",eritrea:"",es:"",ethiopia:"",eu:"",european_union:"",finland:"",fiji:"",falkland_islands:"",micronesia:"",faroe_islands:"",fr:"",gabon:"",gb:"",uk:"",grenada:"",georgia:"",french_guiana:"",guernsey:"",ghana:"",gibraltar:"",greenland:"",gambia:"",guinea:"",guadeloupe:"",equatorial_guinea:"",greece:"",south_georgia_south_sandwich_islands:"",guatemala:"",guam:"",guinea_bissau:"",guyana:"",hong_kong:"",heard_mcdonald_islands:"",honduras:"",croatia:"",haiti:"",hungary:"",canary_islands:"",indonesia:"",ireland:"",israel:"",isle_of_man:"",india:"",british_indian_ocean_territory:"",iraq:"",iran:"",iceland:"",it:"",jersey:"",jamaica:"",jordan:"",jp:"",kenya:"",kyrgyzstan:"",cambodia:"",kiribati:"",comoros:"",st_kitts_nevis:"",north_korea:"",kr:"",kuwait:"",cayman_islands:"",kazakhstan:"",laos:"",lebanon:"",st_lucia:"",liechtenstein:"",sri_lanka:"",liberia:"",lesotho:"",lithuania:"",luxembourg:"",latvia:"",libya:"",morocco:"",monaco:"",moldova:"",montenegro:"",st_martin:"",madagascar:"",marshall_islands:"",macedonia:"",mali:"",myanmar:"",mongolia:"",macau:"",northern_mariana_islands:"",martinique:"",mauritania:"",montserrat:"",malta:"",mauritius:"",maldives:"",malawi:"",mexico:"",malaysia:"",mozambique:"",namibia:"",new_caledonia:"",niger:"",norfolk_island:"",nigeria:"",nicaragua:"",netherlands:"",norway:"",nepal:"",nauru:"",niue:"",new_zealand:"",oman:"",panama:"",peru:"",french_polynesia:"",papua_new_guinea:"",philippines:"",pakistan:"",poland:"",st_pierre_miquelon:"",pitcairn_islands:"",puerto_rico:"",palestinian_territories:"",portugal:"",palau:"",paraguay:"",qatar:"",reunion:"",romania:"",serbia:"",ru:"",rwanda:"",saudi_arabia:"",solomon_islands:"",seychelles:"",sudan:"",sweden:"",singapore:"",st_helena:"",slovenia:"",svalbard_jan_mayen:"",slovakia:"",sierra_leone:"",san_marino:"",senegal:"",somalia:"",suriname:"",south_sudan:"",sao_tome_principe:"",el_salvador:"",sint_maarten:"",syria:"",swaziland:"",tristan_da_cunha:"",turks_caicos_islands:"",chad:"",french_southern_territories:"",togo:"",thailand:"",tajikistan:"",tokelau:"",timor_leste:"",turkmenistan:"",tunisia:"",tonga:"",tr:"",trinidad_tobago:"",tuvalu:"",taiwan:"",tanzania:"",ukraine:"",uganda:"",us_outlying_islands:"",united_nations:"",us:"",uruguay:"",uzbekistan:"",vatican_city:"",st_vincent_grenadines:"",venezuela:"",british_virgin_islands:"",us_virgin_islands:"",vietnam:"",vanuatu:"",wallis_futuna:"",samoa:"",kosovo:"",yemen:"",mayotte:"",south_africa:"",zambia:"",zimbabwe:"",england:"",scotland:"",wales:""};function Io(e,t){const n={defs:Eo,shortcuts:To,enabled:[]},r=e.utils.assign({},n,t||{});So(e,r)}const Ao=[],Do=[],Bo=[],Lo={onGetOptions(e){Ao.push(e)},onInitConverter(e,t){Do[e]=t},onSectionPreview(e){Bo.push(e)},getOptions:(e,t)=>Ao.reduce(((n,r)=>(r(n,e,t),n)),{}),initConverter(e,t){Do.forEach((n=>{n(e,t)}))},async sectionPreview(e,t,n){const r=Bo.map((r=>r(e,t,n))).filter((e=>e instanceof Promise));await Promise.all(r)}};var Mo,Fo,Oo,Po,No,jo,zo,Ro,qo,$o,Uo,Ho,Wo,Go,Vo,Yo,Ko,Xo,Zo,Jo,Qo,ea,ta,na,ra,ia,oa,aa,sa,la,ca,ua,ha,da,pa,fa,ma,ga,va,ya,ba,_a,wa,ka,xa,Ca,Sa,Ta,Ea,Ia,Aa,Da,Ba,La,Ma,Fa,Oa,Pa,Na,ja,za,Ra,qa,$a,Ua,Ha,Wa,Ga,Va,Ya,Ka,Xa,Za,Ja,Qa,es,ts,ns,rs,is,os,as,ss,ls,cs,us,hs,ds,ps,fs,ms,gs,vs,ys,bs,_s,ws,ks,xs,Cs,Ss,Ts,Es,Is,As,Ds,Bs,Ls,Ms,Fs,Os,Ps,Ns,js,zs,Rs,qs,$s,Us,Hs,Ws,Gs,Vs,Ys,Ks,Xs,Zs,Js,Qs,el,tl,nl,rl,il,ol,al,sl,ll,cl,ul,hl,dl,pl,fl,ml,gl,vl,yl,bl,_l,wl,kl,xl,Cl,Sl,Tl,El,Il,Al,Dl,Bl,Ll,Ml,Fl,Ol,Pl,Nl,jl,zl,Rl,ql,$l,Ul,Hl,Wl,Gl,Vl,Yl,Kl,Xl,Zl,Jl,Ql,ec,tc,nc,rc,ic,oc,ac,sc,lc,cc,uc,hc,dc,pc,fc,mc,gc,vc,yc,bc,_c,wc,kc,xc,Cc,Sc,Tc,Ec,Ic,Ac,Dc,Bc,Lc,Mc,Fc,Oc,Pc,Nc,jc,zc,Rc,qc,$c;function Uc(){if(Fo)return Mo;Fo=1;var e={clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},cloneArray:function(t){for(var n=[],r=0;r<t.length;r++)n.push(e.clone(t[r]));return n},cloneHashOfHash:function(t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e.clone(t[r]));return n},cloneHashOfArrayOfHash:function(t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e.cloneArray(t[r]));return n},strip:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},startsWith:function(e,t){return 0===e.indexOf(t)},endsWith:function(e,t){var n=e.length-t.length;return n>=0&&e.lastIndexOf(t)===n},last:function(e){return 0===e.length?null:e[e.length-1]}};return Mo=e}function Hc(){if(Po)return Oo;Po=1;var e=Uc(),t={};return function(){var n,r,i,o,a;t.initialize=function(e,t,s,l,c){n=e,r=t,o=l,a=c,(i=s).annotationfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},i.gchordfont={face:"Helvetica",size:12,weight:"normal",style:"normal",decoration:"none"},i.historyfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},i.infofont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},i.measurefont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},i.partsfont={face:'"Times New Roman"',size:15,weight:"normal",style:"normal",decoration:"none"},i.repeatfont={face:'"Times New Roman"',size:13,weight:"normal",style:"normal",decoration:"none"},i.textfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},i.tripletfont={face:"Times",size:11,weight:"normal",style:"italic",decoration:"none"},i.vocalfont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},i.wordsfont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},o.formatting.composerfont={face:'"Times New Roman"',size:14,weight:"normal",style:"italic",decoration:"none"},o.formatting.subtitlefont={face:'"Times New Roman"',size:16,weight:"normal",style:"normal",decoration:"none"},o.formatting.tempofont={face:'"Times New Roman"',size:15,weight:"bold",style:"normal",decoration:"none"},o.formatting.titlefont={face:'"Times New Roman"',size:20,weight:"normal",style:"normal",decoration:"none"},o.formatting.footerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},o.formatting.headerfont={face:'"Times New Roman"',size:12,weight:"normal",style:"normal",decoration:"none"},o.formatting.voicefont={face:'"Times New Roman"',size:13,weight:"bold",style:"normal",decoration:"none"},o.formatting.tablabelfont={face:'"Trebuchet MS"',size:16,weight:"normal",style:"normal",decoration:"none"},o.formatting.tabnumberfont={face:'"Arial"',size:11,weight:"normal",style:"normal",decoration:"none"},o.formatting.tabgracefont={face:'"Arial"',size:8,weight:"normal",style:"normal",decoration:"none"},o.formatting.annotationfont=i.annotationfont,o.formatting.gchordfont=i.gchordfont,o.formatting.historyfont=i.historyfont,o.formatting.infofont=i.infofont,o.formatting.measurefont=i.measurefont,o.formatting.partsfont=i.partsfont,o.formatting.repeatfont=i.repeatfont,o.formatting.textfont=i.textfont,o.formatting.tripletfont=i.tripletfont,o.formatting.vocalfont=i.vocalfont,o.formatting.wordsfont=i.wordsfont};var s={gchordfont:!0,measurefont:!0,partsfont:!0,annotationfont:!0,composerfont:!0,historyfont:!0,infofont:!0,subtitlefont:!0,textfont:!0,titlefont:!0,voicefont:!0},l=function(e,t,n,i,o){function a(){var a=parseInt(e[0].token);return e.shift(),t?0===e.length?{face:t.face,weight:t.weight,style:t.style,decoration:t.decoration,size:a}:1===e.length&&"box"===e[0].token&&s[o]?{face:t.face,weight:t.weight,style:t.style,decoration:t.decoration,size:a,box:!0}:(r("Extra parameters in font definition.",n,i),{face:t.face,weight:t.weight,style:t.style,decoration:t.decoration,size:a}):(r("Can't set just the size of the font since there is no default value.",n,i),{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none",size:a})}if("*"===e[0].token){if(e.shift(),"number"===e[0].type)return a();r("Expected font size number after *.",n,i)}if("number"===e[0].type)return a();for(var l,c=[],u="normal",h="normal",d="none",p=!1,f="face",m=!1;e.length;){var g=e.shift(),v=g.token.toLowerCase();switch(f){case"face":m||"utf"!==v&&"number"!==g.type&&"bold"!==v&&"italic"!==v&&"underline"!==v&&"box"!==v?c.length>0&&"-"===g.token?(m=!0,c[c.length-1]=c[c.length-1]+g.token):m?(m=!1,c[c.length-1]=c[c.length-1]+g.token):c.push(g.token):"number"===g.type?(l?r("Font size specified twice in font definition.",n,i):l=g.token,f="modifier"):"bold"===v?u="bold":"italic"===v?h="italic":"underline"===v?d="underline":"box"===v?(s[o]?p=!0:r('This font style doesn\'t support "box"',n,i),f="finished"):"utf"===v?(g=e.shift(),f="size"):r("Unknown parameter "+g.token+" in font definition.",n,i);break;case"size":"number"===g.type?l?r("Font size specified twice in font definition.",n,i):l=g.token:r("Expected font size in font definition.",n,i),f="modifier";break;case"modifier":"bold"===v?u="bold":"italic"===v?h="italic":"underline"===v?d="underline":"box"===v?(s[o]?p=!0:r('This font style doesn\'t support "box"',n,i),f="finished"):r("Unknown parameter "+g.token+" in font definition.",n,i);break;case"finished":r('Extra characters found after "box" in font definition.',n,i)}}void 0===l?t?l=t.size:(r("Must specify the size of the font since there is no default value.",n,i),l=12):l=parseFloat(l),""===(c=c.join(" "))&&(t?c=t.face:(r("Must specify the name of the font since there is no default value.",n,i),c="sans-serif"));var y=function(e){switch(e){case"Arial-Italic":return{face:"Arial",weight:"normal",style:"italic",decoration:"none"};case"Arial-Bold":return{face:"Arial",weight:"bold",style:"normal",decoration:"none"};case"Bookman-Demi":return{face:"Bookman,serif",weight:"bold",style:"normal",decoration:"none"};case"Bookman-DemiItalic":return{face:"Bookman,serif",weight:"bold",style:"italic",decoration:"none"};case"Bookman-Light":return{face:"Bookman,serif",weight:"normal",style:"normal",decoration:"none"};case"Bookman-LightItalic":return{face:"Bookman,serif",weight:"normal",style:"italic",decoration:"none"};case"Courier":return{face:'"Courier New"',weight:"normal",style:"normal",decoration:"none"};case"Courier-Oblique":return{face:'"Courier New"',weight:"normal",style:"italic",decoration:"none"};case"Courier-Bold":return{face:'"Courier New"',weight:"bold",style:"normal",decoration:"none"};case"Courier-BoldOblique":return{face:'"Courier New"',weight:"bold",style:"italic",decoration:"none"};case"AvantGarde-Book":return{face:"AvantGarde,Arial",weight:"normal",style:"normal",decoration:"none"};case"AvantGarde-BookOblique":return{face:"AvantGarde,Arial",weight:"normal",style:"italic",decoration:"none"};case"AvantGarde-Demi":case"Avant-Garde-Demi":return{face:"AvantGarde,Arial",weight:"bold",style:"normal",decoration:"none"};case"AvantGarde-DemiOblique":return{face:"AvantGarde,Arial",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Oblique":return{face:"Helvetica",weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Bold":return{face:"Helvetica",weight:"bold",style:"normal",decoration:"none"};case"Helvetica-BoldOblique":return{face:"Helvetica",weight:"bold",style:"italic",decoration:"none"};case"Helvetica-Narrow":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"normal",decoration:"none"};case"Helvetica-Narrow-Oblique":return{face:'"Helvetica Narrow",Helvetica',weight:"normal",style:"italic",decoration:"none"};case"Helvetica-Narrow-Bold":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"normal",decoration:"none"};case"Helvetica-Narrow-BoldOblique":return{face:'"Helvetica Narrow",Helvetica',weight:"bold",style:"italic",decoration:"none"};case"Palatino-Roman":return{face:"Palatino",weight:"normal",style:"normal",decoration:"none"};case"Palatino-Italic":return{face:"Palatino",weight:"normal",style:"italic",decoration:"none"};case"Palatino-Bold":return{face:"Palatino",weight:"bold",style:"normal",decoration:"none"};case"Palatino-BoldItalic":return{face:"Palatino",weight:"bold",style:"italic",decoration:"none"};case"NewCenturySchlbk-Roman":return{face:'"New Century",serif',weight:"normal",style:"normal",decoration:"none"};case"NewCenturySchlbk-Italic":return{face:'"New Century",serif',weight:"normal",style:"italic",decoration:"none"};case"NewCenturySchlbk-Bold":return{face:'"New Century",serif',weight:"bold",style:"normal",decoration:"none"};case"NewCenturySchlbk-BoldItalic":return{face:'"New Century",serif',weight:"bold",style:"italic",decoration:"none"};case"Times":case"Times-Roman":case"Times-Narrow":case"Times-Courier":case"Times-New-Roman":return{face:'"Times New Roman"',weight:"normal",style:"normal",decoration:"none"};case"Times-Italic":case"Times-Italics":return{face:'"Times New Roman"',weight:"normal",style:"italic",decoration:"none"};case"Times-Bold":return{face:'"Times New Roman"',weight:"bold",style:"normal",decoration:"none"};case"Times-BoldItalic":return{face:'"Times New Roman"',weight:"bold",style:"italic",decoration:"none"};case"ZapfChancery-MediumItalic":return{face:'"Zapf Chancery",cursive,serif',weight:"normal",style:"normal",decoration:"none"};default:return null}}(c),b={};return y?(b.face=y.face,b.weight=y.weight,b.style=y.style,b.decoration=y.decoration,b.size=l,p&&(b.box=!0),b):(b.face=c,b.weight=u,b.style=h,b.decoration=d,b.size=l,p&&(b.box=!0),b)},c=function(e,t,n){return 0===t.length?'Directive "'+e+'" requires a font as a parameter.':(i[e]=l(t,i[e],n,0,e),i.is_in_header&&(o.formatting[e]=i[e]),null)},u=function(e,t){var n="";t.forEach((function(e){n+=e.token}));var r=parseFloat(n);if(isNaN(r)||0===r)return'Directive "'+e+'" requires a number as a parameter.';o.formatting.scale=r},h=["acoustic-bass-drum","bass-drum-1","side-stick","acoustic-snare","hand-clap","electric-snare","low-floor-tom","closed-hi-hat","high-floor-tom","pedal-hi-hat","low-tom","open-hi-hat","low-mid-tom","hi-mid-tom","crash-cymbal-1","high-tom","ride-cymbal-1","chinese-cymbal","ride-bell","tambourine","splash-cymbal","cowbell","crash-cymbal-2","vibraslap","ride-cymbal-2","hi-bongo","low-bongo","mute-hi-conga","open-hi-conga","low-conga","high-timbale","low-timbale","high-agogo","low-agogo","cabasa","maracas","short-whistle","long-whistle","short-guiro","long-guiro","claves","hi-wood-block","low-wood-block","mute-cuica","open-cuica","mute-triangle","open-triangle"],d=function(e,t,n,r,o){if(1!==n.length||"number"!==n[0].type)return'Directive "'+t+'" requires a number as a parameter.';var a=n[0].intt;return void 0!==r&&a<r?'Directive "'+t+'" requires a number greater than or equal to '+r+" as a parameter.":void 0!==o&&a>o?'Directive "'+t+'" requires a number less than or equal to '+o+" as a parameter.":(i[e]=a,null)},p=function(e,t,n){if(1===n.length&&("true"===n[0].token||"false"===n[0].token))return i[e]="true"===n[0].token,null;var r=d(e,t,n,0,1);return null!==r?r:(i[e]=1===i[e],null)},f=function(e,t,n,r){if(1!==n.length)return'Directive "'+t+'" requires one of [ '+r.join(", ")+" ] as a parameter.";for(var o=n[0].token,a=!1,s=0;!a&&s<r.length;s++)r[s]===o&&(a=!0);return a?(i[e]=o,null):'Directive "'+t+'" requires one of [ '+r.join(", ")+" ] as a parameter."},m=["nobarlines","barlines","beataccents","nobeataccents","droneon","droneoff","drumon","drumoff","fermatafixed","fermataproportional","gchordon","gchordoff","controlcombo","temperamentnormal","noportamento"],g=["gchord","ptstress","beatstring"],v=["bassvol","chordvol","bassprog","chordprog","c","channel","beatmod","deltaloudness","drumbars","gracedivider","makechordchannels","randomchordattack","chordattack","stressmodel","transpose","rtranspose","vol","volinc"],y=["program"],b=["ratio","snt","bendvelocity","pitchbend","control","temperamentlinear"],_=["beat"],w=["drone"],k=["portamento"],x=["expand","grace","trim"],C=["drum","chordname"];t.parseFontChangeLine=function(e){var t=e.split("$");if(t.length>1&&i.setfont){for(var n=[{text:t[0]}],r=1;r<t.length;r++)"0"===t[r][0]?n.push({text:t[r].substring(1)}):"1"===t[r][0]&&i.setfont[1]?n.push({font:i.setfont[1],text:t[r].substring(1)}):"2"===t[r][0]&&i.setfont[2]?n.push({font:i.setfont[2],text:t[r].substring(1)}):"3"===t[r][0]&&i.setfont[3]?n.push({font:i.setfont[3],text:t[r].substring(1)}):"4"===t[r][0]&&i.setfont[4]?n.push({font:i.setfont[4],text:t[r].substring(1)}):n[n.length-1].text+="$"+t[r];if(n.length>1)return n}return e};var S=["auto","above","below","hidden"];function T(e){if(0===e.length)return{value:1};if(1===e.length)if("number"===e[0].type){if(e[0].floatt>=0||e[0].floatt<=1)return{value:e[0].floatt}}else{if("false"===e[0].token)return{value:0};if("true"===e[0].token)return{value:1}}return{error:"Directive stretchlast requires zero or one parameter: false, true, or number between 0 and 1 (received "+e[0].token+")"}}t.addDirective=function(s){var E=n.tokenize(s,0,s.length);if(0===E.length||"alpha"!==E[0].type)return null;var I=s.substring(s.indexOf(E[0].token)+E[0].token.length);I=n.stripComment(I);var A,D=E.shift().token.toLowerCase(),B="";switch(D){
// The following directives were added to abc_parser_lint, but haven't been implemented here.
// Most of them are direct translations from the directives that will be parsed in. See abcm2ps's format.txt for info on each of these.
//					alignbars: { type: "number", optional: true },
//					aligncomposer: { type: "string", Enum: [ 'left', 'center','right' ], optional: true },
//					bstemdown: { type: "boolean", optional: true },
//					continueall: { type: "boolean", optional: true },
//					dynalign: { type: "boolean", optional: true },
//					exprabove: { type: "boolean", optional: true },
//					exprbelow: { type: "boolean", optional: true },
//					gchordbox: { type: "boolean", optional: true },
//					gracespacebefore: { type: "number", optional: true },
//					gracespaceinside: { type: "number", optional: true },
//					gracespaceafter: { type: "number", optional: true },
//					infospace: { type: "number", optional: true },
//					lineskipfac: { type: "number", optional: true },
//					maxshrink: { type: "number", optional: true },
//					maxstaffsep: { type: "number", optional: true },
//					maxsysstaffsep: { type: "number", optional: true },
//					notespacingfactor: { type: "number", optional: true },
//					parskipfac: { type: "number", optional: true },
//					slurheight: { type: "number", optional: true },
//					splittune: { type: "boolean", optional: true },
//					squarebreve: { type: "boolean", optional: true },
//					stemheight: { type: "number", optional: true },
//					straightflags: { type: "boolean", optional: true },
//					stretchstaff: { type: "boolean", optional: true },
//					titleformat: { type: "string", optional: true },
case"bagpipes":o.formatting.bagpipes=!0;break;case"flatbeams":o.formatting.flatbeams=!0;break;case"jazzchords":o.formatting.jazzchords=!0;break;case"germanAlphabet":o.formatting.germanAlphabet=!0;break;case"landscape":i.landscape=!0;break;case"papersize":i.papersize=I;break;case"graceslurs":if(1!==E.length)return"Directive graceslurs requires one parameter: 0 or 1";if("0"===E[0].token||"false"===E[0].token)o.formatting.graceSlurs=!1;else{if("1"!==E[0].token&&"true"!==E[0].token)return"Directive graceslurs requires one parameter: 0 or 1 (received "+E[0].token+")";o.formatting.graceSlurs=!0}break;case"lineThickness":var L=T(E);if(void 0!==L.value&&(o.formatting.lineThickness=L.value),L.error)return L.error;break;case"stretchlast":var M=T(E);if(void 0!==M.value&&(o.formatting.stretchlast=M.value),M.error)return M.error;break;case"titlecaps":i.titlecaps=!0;break;case"titleleft":o.formatting.titleleft=!0;break;case"measurebox":o.formatting.measurebox=!0;break;case"vocal":return f("vocalPosition",D,E,S);case"dynamic":return f("dynamicPosition",D,E,S);case"gchord":return f("chordPosition",D,E,S);case"ornament":return f("ornamentPosition",D,E,S);case"volume":return f("volumePosition",D,E,S);case"botmargin":case"botspace":case"composerspace":case"indent":case"leftmargin":case"linesep":case"musicspace":case"partsspace":case"pageheight":case"pagewidth":case"rightmargin":case"staffsep":case"staffwidth":case"subtitlespace":case"sysstaffsep":case"systemsep":case"textspace":case"titlespace":case"topmargin":case"topspace":case"vocalspace":case"wordsspace":return function(e,t){var r=n.getMeasurement(t);return 0===r.used||0!==t.length?'Directive "'+e+'" requires a measurement as a parameter.':(o.formatting[e]=r.value,null)}(D,E);case"voicescale":if(1!==E.length||"number"!==E[0].type)return"voicescale requires one float as a parameter";var F=E.shift();return i.currentVoice&&(i.currentVoice.scale=F.floatt,a.changeVoiceScale(i.currentVoice.scale)),null;case"voicecolor":if(1!==E.length)return"voicecolor requires one string as a parameter";var O=E.shift();return i.currentVoice&&(i.currentVoice.color=O.token,a.changeVoiceColor(i.currentVoice.color)),null;case"vskip":var P=Math.round(function(e,t){var r=n.getMeasurement(t);return 0===r.used||0!==t.length?{error:'Directive "'+e+'" requires a measurement as a parameter.'}:r.value}(D,E));return P.error?P.error:(a.addSpacing(P),null);case"scale":u(D,E);break;case"sep":if(0===E.length)a.addSeparator(14,14,85,{startChar:i.iChar,endChar:i.iChar+5});else{var N=n.getMeasurement(E);if(0===N.used)return'Directive "'+D+'" requires 3 numbers: space above, space below, length of line';var j=N.value;if(0===(N=n.getMeasurement(E)).used)return'Directive "'+D+'" requires 3 numbers: space above, space below, length of line';var z=N.value;if(0===(N=n.getMeasurement(E)).used||0!==E.length)return'Directive "'+D+'" requires 3 numbers: space above, space below, length of line';var R=N.value;a.addSeparator(j,z,R,{startChar:i.iChar,endChar:i.iChar+I.length})}break;case"barsperstaff":if(null!==(B=d("barsperstaff",D,E)))return B;break;case"staffnonote":if(1!==E.length)return"Directive staffnonote requires one parameter: 0 or 1";if("0"===E[0].token)i.staffnonote=!0;else{if("1"!==E[0].token)return"Directive staffnonote requires one parameter: 0 or 1 (received "+E[0].token+")";i.staffnonote=!1}break;case"printtempo":if(null!==(B=p("printTempo",D,E)))return B;break;case"partsbox":if(null!==(B=p("partsBox",D,E)))return B;i.partsfont.box=i.partsBox;break;case"freegchord":if(null!==(B=p("freegchord",D,E)))return B;break;case"measurenb":case"barnumbers":if(null!==(B=d("barNumbers",D,E)))return B;break;case"setbarnb":if(1!==E.length||"number"!==E[0].type)return"Directive setbarnb requires a number as a parameter.";i.currBarNumber=a.setBarNumberImmediate(E[0].intt);break;case"begintext":var q="";for(A=n.nextLine();A&&0!==A.indexOf("%%endtext");)e.startsWith(A,"%%")?q+=A.substring(2)+"\n":q+=A+"\n",A=n.nextLine();a.addText(q,{startChar:i.iChar,endChar:i.iChar+q.length+7});break;case"continueall":i.continueall=!0;break;case"beginps":for(A=n.nextLine();A&&0!==A.indexOf("%%endps");)n.nextLine();r("Postscript ignored",s,0);break;case"deco":I.length>0&&i.ignoredDecorations.push(I.substring(0,I.indexOf(" "))),r("Decoration redefinition ignored",s,0);break;case"text":var $=n.translateString(I);a.addText(t.parseFontChangeLine($),{startChar:i.iChar,endChar:i.iChar+I.length+7});break;case"center":var U=n.translateString(I);a.addCentered(t.parseFontChangeLine(U));break;case"font":break;case"setfont":var H=n.tokenize(I,0,I.length);if(H.length>=4&&"-"===H[0].token&&"number"===H[1].type){var W=parseInt(H[1].token);W>=1&&W<=4&&(i.setfont||(i.setfont=[]),H.shift(),H.shift(),i.setfont[W]=l(H,i.setfont[W],s,0,"setfont"))}break;case"gchordfont":case"partsfont":case"tripletfont":case"vocalfont":case"textfont":case"annotationfont":case"historyfont":case"infofont":case"measurefont":case"repeatfont":case"wordsfont":return c(D,E,s);case"composerfont":case"subtitlefont":case"tempofont":case"titlefont":case"voicefont":case"footerfont":case"headerfont":return function(e,t,n){return 0===t.length?'Directive "'+e+'" requires a font as a parameter.':(o.formatting[e]=l(t,o.formatting[e],n,0,e),null)}(D,E,s);case"barlabelfont":case"barnumberfont":case"barnumfont":return c("measurefont",E,s);case"staves":case"score":i.score_is_present=!0;for(var G,V=function(t,n,r,o,a){(n||0===i.staves.length)&&i.staves.push({index:i.staves.length,numVoices:0});var s=e.last(i.staves);void 0!==r&&void 0===s.bracket&&(s.bracket=r),void 0!==o&&void 0===s.brace&&(s.brace=o),a&&(s.connectBarLines="end"),void 0===i.voices[t]&&(i.voices[t]={staffNum:s.index,index:s.numVoices},s.numVoices++)},Y=!1,K=!1,X=!1,Z=!1,J=!1,Q=!1,ee=!1,te=function(){if(ee=!0,G){var e="start";G.staffNum>0&&("start"!==i.staves[G.staffNum-1].connectBarLines&&"continue"!==i.staves[G.staffNum-1].connectBarLines||(e="continue")),i.staves[G.staffNum].connectBarLines=e}};E.length;){var ne=E.shift();switch(ne.token){case"(":Y?r("Can't nest parenthesis in %%score",s,ne.start):(Y=!0,Z=!0);break;case")":!Y||Z?r("Unexpected close parenthesis in %%score",s,ne.start):Y=!1;break;case"[":K?r("Can't nest brackets in %%score",s,ne.start):(K=!0,J=!0);break;case"]":!K||J?r("Unexpected close bracket in %%score",s,ne.start):(K=!1,i.staves[G.staffNum].bracket="end");break;case"{":X?r("Can't nest braces in %%score",s,ne.start):(X=!0,Q=!0);break;case"}":!X||Q?r("Unexpected close brace in %%score",s,ne.start):(X=!1,i.staves[G.staffNum].brace="end");break;case"|":te();break;default:for(var re="";("alpha"===ne.type||"number"===ne.type)&&(re+=ne.token,ne.continueId);)ne=E.shift();V(re,!Y||Z,J?"start":K?"continue":void 0,Q?"start":X?"continue":void 0,ee),Z=!1,J=!1,Q=!1,ee=!1,G=i.voices[re],"staves"===D&&te()}}break;case"newpage":var ie=n.getInt(I);a.addNewPage(0===ie.digits?-1:ie.value);break;case"abc":var oe=I.split(" ");switch(oe[0]){case"-copyright":case"-creator":case"-edited-by":case"-version":case"-charset":var ae=oe.shift();a.addMetaText(D+ae,oe.join(" "),{startChar:i.iChar,endChar:i.iChar+I.length+5});break;default:return"Unknown directive: "+D+oe[0]}break;case"header":case"footer":var se=n.getMeat(I,0,I.length);'"'===(se=I.substring(se.start,se.end))[0]&&'"'===se[se.length-1]&&(se=se.substring(1,se.length-1));var le=se.split("\t"),ce={};ce=1===le.length?{left:"",center:le[0],right:""}:2===le.length?{left:le[0],center:le[1],right:""}:{left:le[0],center:le[1],right:le[2]},le.length>3&&r("Too many tabs in "+D+": "+le.length+" found.",I,0),a.addMetaTextObj(D,ce,{startChar:i.iChar,endChar:i.iChar+s.length});break;case"midi":var ue=n.tokenize(I,0,I.length,!0);ue.length>0&&"="===ue[0].token&&ue.shift(),0===ue.length?r("Expected midi command",I,0):function(e,t,n){var i=e.shift().token,o=[];if(m.indexOf(i)>=0)0!==e.length&&r("Unexpected parameter in MIDI "+i,n,0);else if(g.indexOf(i)>=0)1!==e.length?r("Expected one parameter in MIDI "+i,n,0):o.push(e[0].token);else if(v.indexOf(i)>=0)1!==e.length?r("Expected one parameter in MIDI "+i,n,0):"number"!==e[0].type?r("Expected one integer parameter in MIDI "+i,n,0):o.push(e[0].intt);else if(y.indexOf(i)>=0)1!==e.length&&2!==e.length?r("Expected one or two parameters in MIDI "+i,n,0):"number"!==e[0].type||2===e.length&&"number"!==e[1].type?r("Expected integer parameter in MIDI "+i,n,0):(o.push(e[0].intt),2===e.length&&o.push(e[1].intt));else if(b.indexOf(i)>=0)2!==e.length?r("Expected two parameters in MIDI "+i,n,0):"number"!==e[0].type||"number"!==e[1].type?r("Expected two integer parameters in MIDI "+i,n,0):(o.push(e[0].intt),o.push(e[1].intt));else if(k.indexOf(i)>=0)2!==e.length?r("Expected two parameters in MIDI "+i,n,0):"alpha"!==e[0].type||"number"!==e[1].type?r("Expected one string and one integer parameters in MIDI "+i,n,0):(o.push(e[0].token),o.push(e[1].intt));else if("drummap"===i)2===e.length&&"alpha"===e[0].type&&"number"===e[1].type?(t.formatting||(t.formatting={}),t.formatting.midi||(t.formatting.midi={}),t.formatting.midi.drummap||(t.formatting.midi.drummap={}),t.formatting.midi.drummap[e[0].token]=e[1].intt,o=t.formatting.midi.drummap):3===e.length&&"punct"===e[0].type&&"alpha"===e[1].type&&"number"===e[2].type?(t.formatting||(t.formatting={}),t.formatting.midi||(t.formatting.midi={}),t.formatting.midi.drummap||(t.formatting.midi.drummap={}),t.formatting.midi.drummap[e[0].token+e[1].token]=e[2].intt,o=t.formatting.midi.drummap):r("Expected one note name and one integer parameter in MIDI "+i,n,0);else if(x.indexOf(i)>=0)3!==e.length||"number"!==e[0].type||"/"!==e[1].token||"number"!==e[2].type?r("Expected fraction parameter in MIDI "+i,n,0):(o.push(e[0].intt),o.push(e[2].intt));else if(_.indexOf(i)>=0)4!==e.length?r("Expected four parameters in MIDI "+i,n,0):"number"!==e[0].type||"number"!==e[1].type||"number"!==e[2].type||"number"!==e[3].type?r("Expected four integer parameters in MIDI "+i,n,0):(o.push(e[0].intt),o.push(e[1].intt),o.push(e[2].intt),o.push(e[3].intt));else if(w.indexOf(i)>=0)5!==e.length?r("Expected five parameters in MIDI "+i,n,0):"number"!==e[0].type||"number"!==e[1].type||"number"!==e[2].type||"number"!==e[3].type||"number"!==e[4].type?r("Expected five integer parameters in MIDI "+i,n,0):(o.push(e[0].intt),o.push(e[1].intt),o.push(e[2].intt),o.push(e[3].intt),o.push(e[4].intt));else if(y.indexOf(i)>=0)1!==e.length||4!==e.length?r("Expected one or two parameters in MIDI "+i,n,0):"number"!==e[0].type?r("Expected integer parameter in MIDI "+i,n,0):4===e.length?("octave"!==e[1].token&&r("Expected octave parameter in MIDI "+i,n,0),"="!==e[2].token&&r("Expected octave parameter in MIDI "+i,n,0),"number"!==e[3].type&&r("Expected integer parameter for octave in MIDI "+i,n,0)):(o.push(e[0].intt),4===e.length&&o.push(e[3].intt));else if(C.indexOf(i)>=0)if(e.length<2)r("Expected string parameter and at least one integer parameter in MIDI "+i,n,0);else if("alpha"!==e[0].type)r("Expected string parameter and at least one integer parameter in MIDI "+i,n,0);else{var s=e.shift();for(o.push(s.token);e.length>0;)"number"!==(s=e.shift()).type&&r("Expected integer parameter in MIDI "+i,n,0),o.push(s.intt)}a.hasBeginMusic()?a.appendElement("midi",-1,-1,{cmd:i,params:o}):(void 0===t.formatting.midi&&(t.formatting.midi={}),t.formatting.midi[i]=o)}(ue,o,I);break;case"percmap":var he=function(e){var t=e.split(/\s+/);if(2!==t.length&&3!==t.length)return{error:'Expected parameters "abc-note", "drum-sound", and optionally "note-head"'};var n=t[0],r=parseInt(t[1],10);if((isNaN(r)||r<35||r>81)&&t[1]&&(r=h.indexOf(t[1].toLowerCase())+35),isNaN(r)||r<35||r>81)return{error:'Expected drum name, received "'+t[1]+'"'};var i={sound:r};return 3===t.length&&(i.noteHead=t[2]),{key:n,value:i}}(I);he.error?r(he.error,s,8):(o.formatting.percmap||(o.formatting.percmap={}),o.formatting.percmap[he.key]=he.value);break;case"map":case"playtempo":case"auquality":case"continuous":case"nobarcheck":o.formatting[D]=I;break;default:return"Unknown directive: "+D}return null},t.globalFormatting=function(e){for(var t in e)if(e.hasOwnProperty(t)){var a,s=""+e[t],l=n.tokenize(s,0,s.length);switch(t){case"titlefont":case"gchordfont":case"composerfont":case"footerfont":case"headerfont":case"historyfont":case"infofont":case"measurefont":case"partsfont":case"repeatfont":case"subtitlefont":case"tempofont":case"textfont":case"voicefont":case"tripletfont":case"vocalfont":case"wordsfont":case"annotationfont":case"tablabelfont":case"tabnumberfont":case"tabgracefont":c(t,l,s);break;case"scale":u(t,l);break;case"partsbox":null!==(a=p("partsBox",t,l))&&r(a),i.partsfont.box=i.partsBox;break;case"freegchord":null!==(a=p("freegchord",t,l))&&r(a);break;case"fontboxpadding":1===l.length&&"number"===l[0].type||r('Directive "'+t+'" requires a number as a parameter.'),o.formatting.fontboxpadding=l[0].floatt;break;case"stretchlast":var h=T(l);if(void 0!==h.value&&(o.formatting.stretchlast=h.value),h.error)return h.error;break;default:r("Formatting directive unrecognized: ",t,0)}}}}(),Oo=t}function Wc(){if($o)return qo;$o=1;var e={C:{modes:["CMaj","Amin","Am","GMix","DDor","EPhr","FLyd","BLoc"],stepsFromC:0},Db:{modes:["DbMaj","Bbmin","Bbm","AbMix","EbDor","FPhr","GbLyd","CLoc"],stepsFromC:1},D:{modes:["DMaj","Bmin","Bm","AMix","EDor","F#Phr","GLyd","C#Loc"],stepsFromC:2},Eb:{modes:["EbMaj","Cmin","Cm","BbMix","FDor","GPhr","AbLyd","DLoc"],stepsFromC:3},E:{modes:["EMaj","C#min","C#m","BMix","F#Dor","G#Phr","ALyd","D#Loc"],stepsFromC:4},F:{modes:["FMaj","Dmin","Dm","CMix","GDor","APhr","BbLyd","ELoc"],stepsFromC:5},Gb:{modes:["GbMaj","Ebmin","Ebm","DbMix","AbDor","BbPhr","CbLyd","FLoc"],stepsFromC:6},G:{modes:["GMaj","Emin","Em","DMix","ADor","BPhr","CLyd","F#Loc"],stepsFromC:7},Ab:{modes:["AbMaj","Fmin","Fm","EbMix","BbDor","CPhr","DbLyd","GLoc"],stepsFromC:8},A:{modes:["AMaj","F#min","F#m","EMix","BDor","C#Phr","DLyd","G#Loc"],stepsFromC:9},Bb:{modes:["BbMaj","Gmin","Gm","FMix","CDor","DPhr","EbLyd","ALoc"],stepsFromC:10},B:{modes:["BMaj","G#min","G#m","F#Mix","C#Dor","D#Phr","ELyd","A#Loc"],stepsFromC:11},
// Enharmonic keys
"C#":{modes:["C#Maj","A#min","A#m","G#Mix","D#Dor","E#Phr","F#Lyd","B#Loc"],stepsFromC:1},"F#":{modes:["F#Maj","D#min","D#m","C#Mix","G#Dor","A#Phr","BLyd","E#Loc"],stepsFromC:6},Cb:{modes:["CbMaj","Abmin","Abm","GbMix","DbDor","EbPhr","FbLyd","BbLoc"],stepsFromC:11}},t=null;return qo={relativeMajor:function(n){t||function(){t={};for(var n=Object.keys(e),r=0;r<n.length;r++){var i=e[n[r]];t[n[r].toLowerCase()]=n[r];for(var o=0;o<i.modes.length;o++){var a=i.modes[o].toLowerCase();t[a]=n[r]}}}();var r=n.toLowerCase().match(/([a-g][b#]?)(maj|min|mix|dor|phr|lyd|loc|m)?/);if(!r||!r[2])return n;r=r[1]+r[2];var i=t[r];return i||n},relativeMode:function(t,n){var r=e[t];if(!r)return t;if(""===n)return t;var i=n.toLowerCase().match(/^(maj|min|mix|dor|phr|lyd|loc|m)/);if(!i)return t;for(var o=i[1],a=0;a<r.modes.length;a++){var s=r.modes[a],l=s.toLowerCase().indexOf(o);if(-1!==l&&l===s.length-o.length)return s.substring(0,s.length-o.length)}return t},transposeKey:function(t,n){var r=e[t];if(!r)return t;for(;n<0;)n+=12;for(var i=(r.stepsFromC+n)%12,o=0;o<Object.keys(e).length;o++){var a=Object.keys(e)[o];if(e[a].stepsFromC===i)return a}return t}},qo}function Gc(){if(Go)return Wo;Go=1;var e=function(){if(jo)return No;jo=1;var e={};const t=["C,,,","D,,,","E,,,","F,,,","G,,,","A,,,","B,,,","C,,","D,,","E,,","F,,","G,,","A,,","B,,","C,","D,","E,","F,","G,","A,","B,","C","D","E","F","G","A","B","c","d","e","f","g","a","b","c'","d'","e'","f'","g'","a'","b'","c''","d''","e''","f''","g''","a''","b''","c'''","d'''","e'''","f'''","g'''","a'''","b'''"];return e.pitchIndex=function(e){return t.indexOf(e)},e.noteName=function(e){return t[e]},No=e}(),t=function(){if(Ro)return zo;Ro=1;var e=["C","C","D","D","E","F","F","G","G","A","A","B"],t=["C","D","D","E","E","F","G","G","A","A","B","B"],n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];return zo=function(i,o,a,s){if(!o||o%12==0)return i;for(;o<0;)o+=12;o>11&&(o%=12);var l=i.match(/^([A-G][b#]?)([^\/]+)?\/?([A-G][b#]?)?(.+)?/);if(!l)return i;var c,u=l[1],h=l[2],d=l[3],p=l[4];return(c=e.indexOf(u))<0&&(c=t.indexOf(u)),c<0&&(c=n.indexOf(u)),c<0&&(c=r.indexOf(u)),c<0||(c+=o,c%=12,i=a?s?r[c]:t[c]:s?n[c]:e[c],h&&(i+=h),d&&((c=e.indexOf(d))<0&&(c=t.indexOf(d)),c<0&&(c=n.indexOf(d)),c<0&&(c=r.indexOf(d)),i+="/",c>=0?(c+=o,c%=12,i+=a?s?r[c]:t[c]:s?n[c]:e[c]):i+=d),p&&(i+=p)),i}}(),n=function(){if(Ho)return Uo;Ho=1;var{relativeMajor:e}=Wc(),t={acc:"sharp",note:"f"},n={acc:"sharp",note:"c"},r={acc:"sharp",note:"g"},i={acc:"sharp",note:"d"},o={acc:"sharp",note:"A"},a={acc:"sharp",note:"e"},s={acc:"flat",note:"B"},l={acc:"flat",note:"e"},c={acc:"flat",note:"A"},u={acc:"flat",note:"d"},h={acc:"flat",note:"G"},d={acc:"flat",note:"c"},p={"C#":[t,n,r,i,o,a,{acc:"sharp",note:"B"}],"F#":[t,n,r,i,o,a],B:[t,n,r,i,o],E:[t,n,r,i],A:[t,n,r],D:[t,n],G:[t],C:[],F:[s],Bb:[s,l],Eb:[s,l,c],Cm:[s,l,c],Ab:[s,l,c,u],Db:[s,l,c,u,h],Gb:[s,l,c,u,h,d],Cb:[s,l,c,u,h,d,{acc:"flat",note:"F"}],
// The following are not in the 2.0 spec, but seem normal enough.
// TODO-PER: These SOUND the same as what's written, but they aren't right
"A#":[s,l],"B#":[],"D#":[s,l,c],"E#":[s],"G#":[s,l,c,u],none:[]};return Uo=function(t){var n=p[e(t)];return n?JSON.parse(JSON.stringify(n)):null}}(),r={},i={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},o=["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],a=["C","C#","D","D#","E","F","F#","G","G#","A","Bb","B"];r.keySignature=function(e,t,r,s,l){if("perc"===e.clef.type||"none"===e.clef.type)return{accidentals:n(t),root:r,acc:s};l||(l=0),e.localTransposeVerticalMovement=0,e.localTransposePreferFlats=!1;var c=n(t);if(!c)return e.key;if(e.localTranspose=(e.globalTranspose?e.globalTranspose:0)+l,!e.localTranspose)return{accidentals:c,root:r,acc:s};if(e.globalTransposeOrigKeySig=c,e.localTranspose%12==0)return e.localTransposeVerticalMovement=e.localTranspose/12*7,{accidentals:c,root:r,acc:s};var u=t[0];"b"===t[1]||"#"===t[1]?(u+=t[1],t=t.substr(2)):t=t.substr(1);var h=i[u],d=void 0!==h;d||(h=0,u="C",t="");for(var p=h+e.localTranspose;p<0;)p+=12;p>11&&(p%=12);var f="m"===t[0]?a[p]:o[p],m=f+t,g=n(m);g.length>0&&"flat"===g[0].acc&&(e.localTransposePreferFlats=!0);var v=m.charCodeAt(0)-u.charCodeAt(0);return e.localTranspose>0?v<0?v+=7:0===v&&("#"!==u[1]&&"b"!==m[1]||(v+=7)):e.localTranspose<0&&(v>0?v-=7:0===v&&("b"!==u[1]&&"#"!==m[1]||(v-=7))),e.localTranspose>0?e.localTransposeVerticalMovement=v+7*Math.floor(e.localTranspose/12):e.localTransposeVerticalMovement=v+7*Math.ceil(e.localTranspose/12),d?{accidentals:g,root:f[0],acc:f.length>1?f[1]:""}:{accidentals:[],root:r,acc:s}},r.chordName=function(e,n){return t(n,e.localTranspose,e.localTransposePreferFlats,e.freegchord)};var s=["c","d","e","f","g","a","b"];var l={dblflat:-2,flat:-1,natural:0,sharp:1,dblsharp:2},c={"-2":"dblflat","-1":"flat",0:"natural",1:"sharp",2:"dblsharp"},u={"-2":"__","-1":"_",0:"=",1:"^",2:"^^"};return r.note=function(t,n){if(t.localTranspose&&"perc"!==t.clef.type){var r=n.pitch;if(t.localTransposeVerticalMovement&&(n.pitch=n.pitch+t.localTransposeVerticalMovement,n.name)){var i=n.accidental?n.name.substring(1):n.name,o=n.accidental?n.name[0]:"",a=e.pitchIndex(i);n.name=o+e.noteName(a+t.localTransposeVerticalMovement)}if(n.accidental){var h=function(e,t,n,r,i){for(var o=s[(e+49)%7],a=0,c=0;c<r.length;c++)r[c].note.toLowerCase()===o&&(a=l[r[c].acc]);for(var u=l[n]-a,h=s[(t+49)%7],d=0,p=0;p<i.accidentals.length;p++)i.accidentals[p].note.toLowerCase()===h&&(d=l[i.accidentals[p].acc]);var f=u+d;return f<-2&&(t--,f+="c"===h||"f"===h?1:2),f>2&&(t++,f-="b"===h||"e"===h?1:2),[t,f]}(r,n.pitch,n.accidental,t.globalTransposeOrigKeySig,t.targetKey);n.pitch=h[0],n.accidental=c[h[1]],n.name&&(n.name=u[h[1]]+n.name.replace(/[_^=]/g,""))}}},Wo=r}function Vc(){if(Yo)return Vo;Yo=1;var e=Uc(),t=Hc(),n=Gc(),r={};return function(){var i,o,a,s;r.initialize=function(e,t,n,r,l){i=e,o=t,a=n,s=l},r.standardKey=function(e,t,r,i){return n.keySignature(a,e,t,r,i)};var l={treble:{clef:"treble",pitch:4,mid:0},"treble+8":{clef:"treble+8",pitch:4,mid:0},"treble-8":{clef:"treble-8",pitch:4,mid:0},"treble^8":{clef:"treble+8",pitch:4,mid:0},treble_8:{clef:"treble-8",pitch:4,mid:0},treble1:{clef:"treble",pitch:2,mid:2},treble2:{clef:"treble",pitch:4,mid:0},treble3:{clef:"treble",pitch:6,mid:-2},treble4:{clef:"treble",pitch:8,mid:-4},treble5:{clef:"treble",pitch:10,mid:-6},perc:{clef:"perc",pitch:6,mid:0},none:{clef:"none",mid:0},bass:{clef:"bass",pitch:8,mid:-12},"bass+8":{clef:"bass+8",pitch:8,mid:-12},"bass-8":{clef:"bass-8",pitch:8,mid:-12},"bass^8":{clef:"bass+8",pitch:8,mid:-12},bass_8:{clef:"bass-8",pitch:8,mid:-12},"bass+16":{clef:"bass",pitch:8,mid:-12},"bass-16":{clef:"bass",pitch:8,mid:-12},"bass^16":{clef:"bass",pitch:8,mid:-12},bass_16:{clef:"bass",pitch:8,mid:-12},bass1:{clef:"bass",pitch:2,mid:-6},bass2:{clef:"bass",pitch:4,mid:-8},bass3:{clef:"bass",pitch:6,mid:-10},bass4:{clef:"bass",pitch:8,mid:-12},bass5:{clef:"bass",pitch:10,mid:-14},tenor:{clef:"alto",pitch:8,mid:-8},tenor1:{clef:"alto",pitch:2,mid:-2},tenor2:{clef:"alto",pitch:4,mid:-4},tenor3:{clef:"alto",pitch:6,mid:-6},tenor4:{clef:"alto",pitch:8,mid:-8},tenor5:{clef:"alto",pitch:10,mid:-10},alto:{clef:"alto",pitch:6,mid:-6},alto1:{clef:"alto",pitch:2,mid:-2},alto2:{clef:"alto",pitch:4,mid:-4},alto3:{clef:"alto",pitch:6,mid:-6},alto4:{clef:"alto",pitch:8,mid:-8},alto5:{clef:"alto",pitch:10,mid:-10},"alto+8":{clef:"alto+8",pitch:6,mid:-6},"alto-8":{clef:"alto-8",pitch:6,mid:-6},"alto^8":{clef:"alto+8",pitch:6,mid:-6},alto_8:{clef:"alto-8",pitch:6,mid:-6}},c=function(e,t){var n=l[e];return(n?n.mid:0)+t};r.fixClef=function(e){var t=l[e.type];t&&(e.clefPos=t.pitch,e.type=t.clef)},r.deepCopyKey=function(t){var n={accidentals:[],root:t.root,acc:t.acc,mode:t.mode};return t.accidentals.forEach((function(t){n.accidentals.push(e.clone(t))})),n};var u={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11};r.addPosToKey=function(e,t){var n=e.verticalPos;t.accidentals.forEach((function(e){var t=u[e.note];t-=n,e.verticalPos=t})),t.impliedNaturals&&t.impliedNaturals.forEach((function(e){var t=u[e.note];t-=n,e.verticalPos=t})),n<-10?(t.accidentals.forEach((function(e){e.verticalPos-=7,(e.verticalPos>=11||10===e.verticalPos&&"flat"===e.acc)&&(e.verticalPos-=7),"A"===e.note&&"sharp"===e.acc&&(e.verticalPos-=7),"G"!==e.note&&"F"!==e.note||"flat"!==e.acc||(e.verticalPos-=7)})),t.impliedNaturals&&t.impliedNaturals.forEach((function(e){e.verticalPos-=7,(e.verticalPos>=11||10===e.verticalPos&&"flat"===e.acc)&&(e.verticalPos-=7),"A"===e.note&&"sharp"===e.acc&&(e.verticalPos-=7),"G"!==e.note&&"F"!==e.note||"flat"!==e.acc||(e.verticalPos-=7)}))):n<-4?(t.accidentals.forEach((function(e){e.verticalPos-=7,-8!==n||"f"!==e.note&&"g"!==e.note||"sharp"!==e.acc||(e.verticalPos-=7)})),t.impliedNaturals&&t.impliedNaturals.forEach((function(e){e.verticalPos-=7,-8!==n||"f"!==e.note&&"g"!==e.note||"sharp"!==e.acc||(e.verticalPos-=7)}))):n>=7&&(t.accidentals.forEach((function(e){e.verticalPos+=7})),t.impliedNaturals&&t.impliedNaturals.forEach((function(e){e.verticalPos+=7})))},r.fixKey=function(t,n){var i=e.clone(n);return r.addPosToKey(t,i),i};var h=function(e){var t=0,n=e[t++];"^"!==n&&"_"!==n||(n=e[t++]);var r=u[n];for(void 0===r&&(r=6);t<e.length;t++)if(","===e[t])r-=7;else{if("'"!==e[t])break;r+=7}return{mid:r-6,str:e.substring(t)}};r.parseKey=function(e,n){0===e.length&&(e="none");var s=i.tokenize(e,0,e.length),l={};if(0===s.length)return o("Must pass in key signature.",e,0),l;switch(s[0].token){case"HP":t.addDirective("bagpipes"),a.key={root:"HP",accidentals:[],acc:"",mode:""},l.foundKey=!0,s.shift();break;case"Hp":t.addDirective("bagpipes"),a.key={root:"Hp",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}],acc:"",mode:""},l.foundKey=!0,s.shift();break;case"none":a.key={root:"none",accidentals:[],acc:"",mode:""},l.foundKey=!0,s.shift();break;default:var u=i.getKeyPitch(s[0].token);if(u.len>0){l.foundKey=!0;var h="",d="";s[0].token.length>1?s[0].token=s[0].token.substring(1):s.shift();var p=u.token;if(s.length>0){var f=i.getSharpFlat(s[0].token);if(f.len>0&&(s[0].token.length>1?s[0].token=s[0].token.substring(1):s.shift(),p+=f.token,h=f.token),s.length>0){var m=i.getMode(s[0].token);m.len>0&&(s.shift(),p+=m.token,d=m.token)}if(void 0===r.standardKey(p,u.token,h,0))return o("Unsupported key signature: "+p,e,0),l}var g,v=r.deepCopyKey(a.key),y=!n&&a.globalTranspose?-a.globalTranspose:0;if(n&&(g=a.globalTransposeOrigKeySig),a.key=r.deepCopyKey(r.standardKey(p,u.token,h,y)),n&&(a.globalTransposeOrigKeySig=g),a.key.mode=d,v){for(var b,_=0;_<a.key.accidentals.length;_++)for(b=0;b<v.accidentals.length;b++)v.accidentals[b].note&&a.key.accidentals[_].note.toLowerCase()===v.accidentals[b].note.toLowerCase()&&(v.accidentals[b].note=null);for(b=0;b<v.accidentals.length;b++)v.accidentals[b].note&&(a.key.impliedNaturals||(a.key.impliedNaturals=[]),a.key.impliedNaturals.push({acc:"natural",note:v.accidentals[b].note}))}}}if(0===s.length)return l;if("exp"===s[0].token&&s.shift(),0===s.length)return l;if("oct"===s[0].token&&s.shift(),0===s.length)return l;var w,k=i.getKeyAccidentals2(s);if(k.warn&&o(k.warn,e,0),k.accs){l.foundKey||(l.foundKey=!0,a.key={root:"none",acc:"",mode:"",accidentals:[]}),function(e){for(var t=0;t<e.length;t++)"b"===e[t].note?e[t].note="B":"a"===e[t].note?e[t].note="A":"F"===e[t].note?e[t].note="f":"E"===e[t].note?e[t].note="e":"D"===e[t].note?e[t].note="d":"C"===e[t].note?e[t].note="c":"G"===e[t].note&&"sharp"===e[t].acc?e[t].note="g":"g"===e[t].note&&"flat"===e[t].acc&&(e[t].note="G")}(k.accs);for(var x=0;x<k.accs.length;x++){for(var C=!1,S=0;S<a.key.accidentals.length&&!C;S++)a.key.accidentals[S].note===k.accs[x].note&&(C=!0,a.key.accidentals[S].acc!==k.accs[x].acc&&(a.key.accidentals[S].acc=k.accs[x].acc,a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(k.accs[x])));if(!C&&(a.key.explicitAccidentals||(a.key.explicitAccidentals=[]),a.key.explicitAccidentals.push(k.accs[x]),a.key.accidentals.push(k.accs[x]),a.key.impliedNaturals))for(var T=0;T<a.key.impliedNaturals.length;T++)a.key.impliedNaturals[T].note===k.accs[x].note&&a.key.impliedNaturals.splice(T,1)}}for(;s.length>0;)switch(s[0].token){case"m":case"middle":if(s.shift(),0===s.length)return o("Expected = after middle",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after middle",e,w.start);break}if(0===s.length)return o("Expected parameter after middle=",e,0),l;var E=i.getPitchFromTokens(s);E.warn&&o(E.warn,e,0),E.position&&(a.clef.verticalPos=E.position-6);break;case"transpose":if(s.shift(),0===s.length)return o("Expected = after transpose",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after transpose",e,w.start);break}if(0===s.length)return o("Expected parameter after transpose=",e,0),l;if("number"!==s[0].type){o("Expected number after transpose",e,s[0].start);break}a.clef.transpose=s[0].intt,s.shift();break;case"stafflines":if(s.shift(),0===s.length)return o("Expected = after stafflines",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after stafflines",e,w.start);break}if(0===s.length)return o("Expected parameter after stafflines=",e,0),l;if("number"!==s[0].type){o("Expected number after stafflines",e,s[0].start);break}a.clef.stafflines=s[0].intt,s.shift();break;case"staffscale":if(s.shift(),0===s.length)return o("Expected = after staffscale",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after staffscale",e,w.start);break}if(0===s.length)return o("Expected parameter after staffscale=",e,0),l;if("number"!==s[0].type){o("Expected number after staffscale",e,s[0].start);break}a.clef.staffscale=s[0].floatt,s.shift();break;case"octave":if(s.shift(),0===s.length)return o("Expected = after octave",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after octave",e,w.start);break}if(0===s.length)return o("Expected parameter after octave=",e,0),l;if("number"!==s[0].type){o("Expected number after octave",e,s[0].start);break}a.octave=s[0].intt,s.shift();break;case"style":if(s.shift(),0===s.length)return o("Expected = after style",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after style",e,w.start);break}if(0===s.length)return o("Expected parameter after style=",e,0),l;switch(s[0].token){case"normal":case"harmonic":case"rhythm":case"x":case"triangle":a.style=s[0].token,s.shift();break;default:o("error parsing style element: "+s[0].token,e,s[0].start)}break;case"clef":if(s.shift(),0===s.length)return o("Expected = after clef",e,0),l;if("="!==(w=s.shift()).token){o("Expected = after clef",e,w.start);break}if(0===s.length)return o("Expected parameter after clef=",e,0),l;
//break; yes, we want to fall through. That allows "clef=" to be optional.
case"treble":case"bass":case"alto":case"tenor":case"perc":case"none":var I=s.shift();switch(I.token){case"treble":case"tenor":case"alto":case"bass":case"perc":case"none":break;case"C":case"c":I.token="alto";break;case"F":case"f":I.token="bass";break;case"G":case"g":I.token="treble";break;default:o("Expected clef name. Found "+I.token,e,I.start)}s.length>0&&"number"===s[0].type&&(I.token+=s[0].token,s.shift()),s.length>1&&("-"===s[0].token||"+"===s[0].token||"^"===s[0].token||"_"===s[0].token)&&"8"===s[1].token&&(I.token+=s[0].token+s[1].token,s.shift(),s.shift()),a.clef={type:I.token,verticalPos:c(I.token,0)},a.currentVoice&&void 0!==a.currentVoice.transpose&&(a.clef.transpose=a.currentVoice.transpose),l.foundClef=!0;break;default:o("Unknown parameter: "+s[0].token,e,s[0].start),s.shift()}return l};r.parseVoice=function(e,t,n){var r=i.getMeat(e,t,n),l=r.start,u=r.end,d=i.getToken(e,l,u);if(0!==d.length){var p=!1;void 0===a.voices[d]&&(a.voices[d]={},p=!0,a.score_is_present&&o("Can't have an unknown V: id when the %score directive is present",e,l)),l+=d.length,l+=i.eatWhiteSpace(e,l);for(var f={startStaff:p},m=function(t){var n=i.getVoiceToken(e,l,u);void 0!==n.warn?o("Expected value for "+t+" in voice: "+n.warn,e,l):void 0!==n.err?o("Expected value for "+t+" in voice: "+n.err,e,l):0===n.token.length&&'"'!==e[l]?o("Expected value for "+t+" in voice",e,l):f[t]=n.token,l+=n.len},g=function(t,n,r){var s=i.getVoiceToken(e,l,u);void 0!==s.warn?o("Expected value for "+n+" in voice: "+s.warn,e,l):void 0!==s.err?o("Expected value for "+n+" in voice: "+s.err,e,l):0===s.token.length&&'"'!==e[l]?o("Expected value for "+n+" in voice",e,l):(s.token=parseFloat(s.token),a.voices[t][n]=s.token),l+=s.len},v=function(t,n){var r=i.getVoiceToken(e,l,u);if(void 0!==r.warn)o("Expected value for "+t+" in voice: "+r.warn,e,l);else if(void 0!==r.err)o("Expected value for "+t+" in voice: "+r.err,e,l);else{if(0!==r.token.length||'"'===e[l])return r.token;o("Expected value for "+t+" in voice",e,l)}l+=r.len},y=function(t,n){var r=i.getVoiceToken(e,l,u);if(void 0!==r.warn)o("Expected one of (_B, _E, _b, _e) for "+n+" in voice: "+r.warn,e,l);else if(0===r.token.length&&'"'!==e[l])o("Expected one of (_B, _E, _b, _e) for "+n+" in voice",e,l);else{var s={_B:2,_E:9,_b:-10,_e:-3}[r.token];s?a.voices[t][n]=s:o("Expected one of (_B, _E, _b, _e) for "+n+" in voice",e,l)}l+=r.len};l<u;){var b=i.getVoiceToken(e,l,u);if(l+=b.len,b.warn)o("Error parsing voice: "+b.warn,e,l);else{var _=null;switch(b.token){case"clef":case"cl":m("clef");var w=0;void 0!==f.clef&&(f.clef=f.clef.replace(/[',]/g,""),-1!==f.clef.indexOf("+16")&&(w+=14,f.clef=f.clef.replace("+16","")),f.verticalPos=c(f.clef,w));break;case"treble":case"bass":case"tenor":case"alto":case"perc":case"none":case"treble'":case"bass'":case"tenor'":case"alto'":case"none'":case"treble''":case"bass''":case"tenor''":case"alto''":case"none''":case"treble,":case"bass,":case"tenor,":case"alto,":case"none,":case"treble,,":case"bass,,":case"tenor,,":case"alto,,":case"none,,":f.clef=b.token.replace(/[',]/g,""),f.verticalPos=c(f.clef,0),a.voices[d].clef=b.token;break;case"staves":case"stave":case"stv":m("staves");break;case"brace":case"brc":m("brace");break;case"bracket":case"brk":m("bracket");break;case"name":case"nm":m("name");break;case"subname":case"sname":case"snm":m("subname");break;case"merge":f.startStaff=!1;break;case"stem":case"stems":void 0!==(_=i.getVoiceToken(e,l,u)).warn?o("Expected value for stems in voice: "+_.warn,e,l):void 0!==_.err?o("Expected value for stems in voice: "+_.err,e,l):"up"===_.token||"down"===_.token?a.voices[d].stem=_.token:o("Expected up or down for voice stem",e,l),l+=_.len;break;case"up":case"down":a.voices[d].stem=b.token;break;case"middle":case"m":m("verticalPos"),f.verticalPos=h(f.verticalPos).mid;break;case"gchords":case"gch":a.voices[d].suppressChords=!0,"0"===(_=i.getVoiceToken(e,l,u)).token&&(l+=_.len);break;case"space":case"spc":m("spacing");break;case"scale":g(d,"scale");break;case"score":y(d,"scoreTranspose");break;case"transpose":g(d,"transpose");break;case"stafflines":g(d,"stafflines");break;case"staffscale":g(d,"staffscale");break;case"octave":g(d,"octave");break;case"volume":g(d,"volume");break;case"cue":var k=v("cue");a.voices[d].scale="on"===k?.6:1;break;case"style":void 0!==(_=i.getVoiceToken(e,l,u)).warn?o("Expected value for style in voice: "+_.warn,e,l):void 0!==_.err?o("Expected value for style in voice: "+_.err,e,l):"normal"===_.token||"harmonic"===_.token||"rhythm"===_.token||"x"===_.token||"triangle"===_.token?a.voices[d].style=_.token:o("Expected one of [normal, harmonic, rhythm, x, triangle] for voice style",e,l),l+=_.len}}l+=i.eatWhiteSpace(e,l)}if((f.startStaff||0===a.staves.length)&&(a.staves.push({index:a.staves.length,meter:a.origMeter}),a.score_is_present||(a.staves[a.staves.length-1].numVoices=0)),void 0===a.voices[d].staffNum){a.voices[d].staffNum=a.staves.length-1;var x=0;for(var C in a.voices)a.voices.hasOwnProperty(C)&&a.voices[C].staffNum===a.voices[d].staffNum&&x++;a.voices[d].index=x-1}var S=a.staves[a.voices[d].staffNum];a.score_is_present||S.numVoices++,f.clef&&(S.clef={type:f.clef,verticalPos:f.verticalPos}),f.spacing&&(S.spacing_below_offset=f.spacing),f.verticalPos&&(S.verticalPos=f.verticalPos),f.name&&(S.name?S.name.push(f.name):S.name=[f.name]),f.subname&&(S.subname?S.subname.push(f.subname):S.subname=[f.subname]),function(e){a.currentVoice=a.voices[e],s.setCurrentVoice(a.currentVoice.staffNum,a.currentVoice.index)}(d)}else o("Expected a voice id",e,l)}}(),Vo=r}function Yc(){if(Xo)return Ko;Xo=1;var e=Uc(),t=Hc(),n=Vc();return Ko=function(r,i,o,a,s){this.reset=function(e,r,i,o){n.initialize(e,r,i,o,s),t.initialize(e,r,i,o,s)},this.reset(r,i,o,a),this.setTitle=function(e){if(o.hasMainTitle)s.addSubtitle(r.translateString(r.stripComment(e)),{startChar:o.iChar,endChar:o.iChar+e.length+2});else{var t=r.translateString(r.theReverser(r.stripComment(e)));o.titlecaps&&(t=t.toUpperCase()),s.addMetaText("title",t,{startChar:o.iChar,endChar:o.iChar+e.length+2}),o.hasMainTitle=!0}},this.setMeter=function(e){if("C"===(e=r.stripComment(e)))return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"common_time"};if("C|"===e)return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"cut_time"};if("o"===e)return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"tempus_perfectum"};if("c"===e)return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"tempus_imperfectum"};if("o."===e)return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"tempus_perfectum_prolatio"};if("c."===e)return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),{type:"tempus_imperfectum_prolatio"};if(0===e.length||"none"===e.toLowerCase())return!0===o.havent_set_length&&(o.default_length=.125,o.havent_set_length=!1),null;var t=r.tokenize(e,0,e.length);try{var n=function(){var e=function(){var e={value:0,num:""},n=t.shift();for("("===n.token&&(n=t.shift());;){if("number"!==n.type)throw"Expected top number of meter";if(e.value+=parseInt(n.token),e.num+=n.token,0===t.length||"/"===t[0].token)return e;if(")"===(n=t.shift()).token){if(0===t.length||"/"===t[0].token)return e;throw"Unexpected paren in meter"}if("."!==n.token&&"+"!==n.token)throw"Expected top number of meter";if(e.num+=n.token,0===t.length)throw"Expected top number of meter";n=t.shift()}return e}();if(0===t.length)return e;var n=t.shift();if("/"!==n.token)throw"Expected slash in meter";if("number"!==(n=t.shift()).type)throw"Expected bottom number of meter";return e.den=n.token,e.value=e.value/parseInt(e.den),e};if(0===t.length)throw"Expected meter definition in M: line";for(var a={type:"specified",value:[]},s=0;;){var l=n();s+=l.value;var c={num:l.num};if(void 0!==l.den&&(c.den=l.den),a.value.push(c),0===t.length)break}return!0===o.havent_set_length&&(o.default_length=s<.75?.0625:.125,o.havent_set_length=!1),a}catch(i7){i(i7,e,0)}return null},this.calcTempo=function(e){var t=1/4;o.meter&&"specified"===o.meter.type?t=1/parseInt(o.meter.value[0].den):o.origMeter&&"specified"===o.origMeter.type&&(t=1/parseInt(o.origMeter.value[0].den));for(var n=0;n<e.duration;n++)e.duration[n]=t*e.duration[n];return e},this.resolveTempo=function(){o.tempo&&(this.calcTempo(o.tempo),a.metaText.tempo=o.tempo,delete o.tempo)},this.addUserDefinition=function(t,n,r){var a=t.indexOf("=",n);if(-1!==a){var s=e.strip(t.substring(n,a)),l=e.strip(t.substring(a+1));if(1===s.length){-1!=="HIJKLMNOPQRSTUVWXYhijklmnopqrstuvw~".indexOf(s)?0!==l.length?(void 0===o.macros&&(o.macros={}),o.macros[s]=l):i("Missing macro definition",t,n):i("Macro definitions must be H-Y, h-w, or tilde",t,n)}else i("Macro definitions can only be one character",t,n)}else i("Need an = in a macro definition",t,n)},this.setDefaultLength=function(e,t,n){var r=e.substring(t,n).replace(/ /g,"").split("/");if(2===r.length){var i=parseInt(r[0]),a=parseInt(r[1]);a>0&&(o.default_length=i/a,o.havent_set_length=!1)}else 1===r.length&&"1"===r[0]&&(o.default_length=1,o.havent_set_length=!1)};var l={larghissimo:20,adagissimo:24,sostenuto:28,grave:32,largo:40,lento:50,larghetto:60,adagio:68,adagietto:74,andante:80,andantino:88,"marcia moderato":84,"andante moderato":100,moderato:112,allegretto:116,"allegro moderato":120,allegro:126,animato:132,agitato:140,veloce:148,"mosso vivo":156,vivace:164,vivacissimo:172,allegrissimo:176,presto:184,prestissimo:210};this.setTempo=function(e,t,n,a){try{var s=r.tokenize(e,t,n);if(0===s.length)throw"Missing parameter in Q: field";var c={startChar:a+t-2,endChar:a+n},u=!0,h=s.shift();if("quote"===h.type&&(c.preString=h.token,h=s.shift(),0===s.length))return l[c.preString.toLowerCase()]&&(c.bpm=l[c.preString.toLowerCase()],c.suppressBpm=!0),{type:"immediate",tempo:c};if("alpha"===h.type&&"C"===h.token){if(0===s.length)throw"Missing tempo after C in Q: field";if("punct"===(h=s.shift()).type&&"="===h.token){if(0===s.length)throw"Missing tempo after = in Q: field";if("number"!==(h=s.shift()).type)throw"Expected number after = in Q: field";c.duration=[1],c.bpm=parseInt(h.token)}else{if("number"!==h.type)throw"Expected number or equal after C in Q: field";if(c.duration=[parseInt(h.token)],0===s.length)throw"Missing = after duration in Q: field";if("punct"!==(h=s.shift()).type||"="!==h.token)throw"Expected = after duration in Q: field";if(0===s.length)throw"Missing tempo after = in Q: field";if("number"!==(h=s.shift()).type)throw"Expected number after = in Q: field";c.bpm=parseInt(h.token)}}else{if("number"!==h.type)throw"Unknown value in Q: field";var d=parseInt(h.token);if(0===s.length||"quote"===s[0].type)c.duration=[1],c.bpm=d;else{if(u=!1,"punct"!==(h=s.shift()).type&&"/"!==h.token)throw"Expected fraction in Q: field";if("number"!==(h=s.shift()).type)throw"Expected fraction in Q: field";var p=parseInt(h.token);for(c.duration=[d/p];s.length>0&&"="!==s[0].token&&"quote"!==s[0].type;){if("number"!==(h=s.shift()).type)throw"Expected fraction in Q: field";if(d=parseInt(h.token),"punct"!==(h=s.shift()).type&&"/"!==h.token)throw"Expected fraction in Q: field";if("number"!==(h=s.shift()).type)throw"Expected fraction in Q: field";p=parseInt(h.token),c.duration.push(d/p)}if("punct"!==(h=s.shift()).type&&"="!==h.token)throw"Expected = in Q: field";if("number"!==(h=s.shift()).type)throw"Expected tempo in Q: field";c.bpm=parseInt(h.token)}}if(0!==s.length&&("quote"===(h=s.shift()).type&&(c.postString=h.token,h=s.shift()),0!==s.length))throw"Unexpected string at end of Q: field";return!1===o.printTempo&&(c.suppress=!0),{type:u?"delaySet":"immediate",tempo:c}}catch(f){return i(f,e,t),{type:"none"}}},this.letter_to_inline_header=function(e,l,c){var u=r.eatWhiteSpace(e,l);if(l+=u,e.length>=l+5&&"["===e[l]&&":"===e[l+2]){var h=e.indexOf("]",l),d=o.iChar+l,p=o.iChar+h+1;switch(e.substring(l,l+3)){case"[I:":var f=t.addDirective(e.substring(l+3,h));return f&&i(f,e,l),[h-l+1+u];case"[M:":var m=this.setMeter(e.substring(l+3,h));return s.hasBeginMusic()&&m?s.appendStartingElement("meter",d,p,m):o.meter=m,[h-l+1+u];case"[K:":var g=n.parseKey(e.substring(l+3,h),!0);return g.foundClef&&s.hasBeginMusic()&&s.appendStartingElement("clef",d,p,o.clef),g.foundKey&&s.hasBeginMusic()&&s.appendStartingElement("key",d,p,n.fixKey(o.clef,o.key)),[h-l+1+u];case"[P:":return c||a.lines.length<=a.lineNum?o.partForNextLine={title:e.substring(l+3,h),startChar:d,endChar:p}:s.appendElement("part",d,p,{title:e.substring(l+3,h)}),[h-l+1+u];case"[L:":return this.setDefaultLength(e,l+3,h),[h-l+1+u];case"[Q:":if(h>0){var v=this.setTempo(e,l+3,h,o.iChar);return"delaySet"===v.type?s.hasBeginMusic()?s.appendElement("tempo",d,p,this.calcTempo(v.tempo)):o.tempoForNextLine=["tempo",d,p,this.calcTempo(v.tempo)]:"immediate"===v.type&&(!c&&s.hasBeginMusic()?s.appendElement("tempo",d,p,v.tempo):o.tempoForNextLine=["tempo",d,p,v.tempo]),[h-l+1+u,e[l+1],e.substring(l+3,h)]}break;case"[V:":if(h>0)return n.parseVoice(e,l+3,h),[h-l+1+u,e[l+1],e.substring(l+3,h)];break;case"[r:":return[h-l+1+u]}}return[0]},this.letter_to_body_header=function(r,a){if(r.length>=a+3)switch(r.substring(a,a+2)){case"I:":var l=t.addDirective(r.substring(a+2));return l&&i(l,r,a),[r.length];case"M:":var c=this.setMeter(r.substring(a+2));return s.hasBeginMusic()&&c&&s.appendStartingElement("meter",o.iChar+a,o.iChar+r.length,c),[r.length];case"K:":var u=n.parseKey(r.substring(a+2),s.hasBeginMusic());return u.foundClef&&s.hasBeginMusic()&&s.appendStartingElement("clef",o.iChar+a,o.iChar+r.length,o.clef),u.foundKey&&s.hasBeginMusic()&&s.appendStartingElement("key",o.iChar+a,o.iChar+r.length,n.fixKey(o.clef,o.key)),[r.length];case"P:":return s.hasBeginMusic()&&s.appendElement("part",o.iChar+a,o.iChar+r.length,{title:r.substring(a+2)}),[r.length];case"L:":return this.setDefaultLength(r,a+2,r.length),[r.length];case"Q:":var h=r.indexOf("",a+2);-1===h&&(h=r.length);var d=this.setTempo(r,a+2,h,o.iChar);return"delaySet"===d.type?s.appendElement("tempo",o.iChar+a,o.iChar+r.length,this.calcTempo(d.tempo)):"immediate"===d.type&&s.appendElement("tempo",o.iChar+a,o.iChar+r.length,d.tempo),[h,r[a],e.strip(r.substring(a+2))];case"V:":return n.parseVoice(r,a+2,r.length),[r.length,r[a],e.strip(r.substring(a+2))]}return[0]};var c={A:"author",B:"book",C:"composer",D:"discography",F:"url",G:"group",I:"instruction",N:"notes",O:"origin",R:"rhythm",S:"source",W:"unalignedWords",Z:"transcription"};this.parseHeader=function(e){var l=c[e[0]];if(void 0!==l)return"unalignedWords"===l?s.addMetaTextArray(l,t.parseFontChangeLine(r.translateString(r.stripComment(e.substring(2)))),{startChar:o.iChar,endChar:o.iChar+e.length}):s.addMetaText(l,r.translateString(r.stripComment(e.substring(2))),{startChar:o.iChar,endChar:o.iChar+e.length}),{};var u=o.iChar,h=u+e.length;switch(e[0]){case"H":for(s.addMetaText("history",r.translateString(r.stripComment(e.substring(2))),{startChar:o.iChar,endChar:o.iChar+e.length}),e=r.peekLine();e&&":"!==e[1];)r.nextLine(),s.addMetaText("history",r.translateString(r.stripComment(e)),{startChar:o.iChar,endChar:o.iChar+e.length}),e=r.peekLine();break;case"K":this.resolveTempo();var d=n.parseKey(e.substring(2),!1);!o.is_in_header&&s.hasBeginMusic()&&(d.foundClef&&s.appendStartingElement("clef",u,h,o.clef),d.foundKey&&s.appendStartingElement("key",u,h,n.fixKey(o.clef,o.key))),o.is_in_header=!1;break;case"L":this.setDefaultLength(e,2,e.length);break;case"M":o.origMeter=o.meter=this.setMeter(e.substring(2));break;case"P":o.is_in_header?s.addMetaText("partOrder",r.translateString(r.stripComment(e.substring(2))),{startChar:o.iChar,endChar:o.iChar+e.length}):o.partForNextLine={title:r.translateString(r.stripComment(e.substring(2))),startChar:u,endChar:h};break;case"Q":var p=this.setTempo(e,2,e.length,o.iChar);"delaySet"===p.type?o.tempo=p.tempo:"immediate"===p.type&&(a.metaText.tempo?o.tempoForNextLine=["tempo",u,h,p.tempo]:a.metaText.tempo=p.tempo);break;case"T":this.setTitle(e.substring(2));break;case"U":this.addUserDefinition(e,2,e.length);break;case"V":if(n.parseVoice(e,2,e.length),!o.is_in_header)return{newline:!0};break;case"s":return{symbols:!0};case"w":return{words:!0};case"X":break;case"E":case"m":i("Ignored header",e,0);break;default:return{regular:!0}}return{}}},Ko}function Kc(){if(na)return ta;function e(e,t){for(var n=[],r=[],i=0,o=0;o<e.length;o++){var a=e[o],s=i+a;if(s<t)i=s;else t-i<s-t&&i>0?(n.push(o-1),r.push(Math.round(i-a)),i=a):o<e.length-1&&(n.push(o),r.push(Math.round(i)),i=0)}return r.push(Math.round(i)),{lineBreaks:n,totals:r}}function t(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function n(e,n,r,i,o,a,s,l,c,u,h){for(var d=u;d<e.length;d++){var p=e[d];r+=p,i+=p;var f=Math.abs(r-n[l]);if(Math.abs(f-a)<n[0]/10)if(f<a){var m=t(o),g=t(c);g.push(d-1),m.push(i-p),h.push({accumulator:r,lineAccumulator:p,lineWidths:m,lastVariance:Math.abs(r-n[l+1]),highestVariance:Math.max(s,a),currLine:l+1,lineBreaks:g,startIndex:d+1})}else f>a&&d<e.length-1&&(m=t(o),g=t(c),h.push({accumulator:r,lineAccumulator:i,lineWidths:m,lastVariance:f,highestVariance:Math.max(s,f),currLine:l,lineBreaks:g,startIndex:d+1}));f>a?(c.push(d-1),l++,s=Math.max(s,a),a=Math.abs(r-n[l]),o.push(i-p),i=p):a=f}o.push(i)}function r(e,t,r,i){for(var o=Math.ceil(e.total/t),a=Math.floor(e.total/o),s=[],l=0;l<o;l++)s.push(a*(l+1));var c=[];c.push({accumulator:0,lineAccumulator:0,lineWidths:[],lastVariance:999999,highestVariance:0,currLine:0,lineBreaks:[],
// These are the zero-based last measure on each line
startIndex:0});for(var u=0;u<c.length;)n(e.measureWidths,s,c[u].accumulator,c[u].lineAccumulator,c[u].lineWidths,c[u].lastVariance,c[u].highestVariance,c[u].currLine,c[u].lineBreaks,c[u].startIndex,c),u++;for(l=0;l<c.length;l++){var h=c[l];h.variances=[],h.aveVariance=0;for(var d=0;d<h.lineWidths.length;d++){var p=h.lineWidths[d];h.variances.push(p-s[0]),h.aveVariance+=Math.abs(p-s[0])}h.aveVariance=h.aveVariance/h.lineWidths.length,i.attempts.push({type:"optimizeLineWidths",lineBreaks:h.lineBreaks,variances:h.variances,aveVariance:h.aveVariance,widths:e.measureWidths})}var f=9999999,m=-1;for(l=0;l<c.length;l++)(h=c[l]).aveVariance<f&&(f=h.aveVariance,m=l);return{failed:!1,lineBreaks:c[m].lineBreaks,variance:c[m].highestVariance}}function i(e,t,n){for(var r=[],i=[],o=0,a=!1,s=0;s<e.length;s++)(o+=e[s])>t&&(a=!0),s%n==n-1&&(s!==e.length-1&&r.push(s),i.push(Math.round(o)),o=0);return{failed:a,totals:i,lineBreaks:r}}return na=1,ta={wrapLines:function(e,t,n){if(t&&0!==e.lines.length){var r=e.deline({lineBreaks:!1}),i=function(e,t){for(var n=[],r=0,i=0,o=0,a=0;a<e.length;a++){var s=e[a];if(s.staff){var l=i,c=t[r];r++;for(var u=0;u<s.staff.length;u++)for(var h=s.staff[u],d=0;d<h.voices.length;d++){o=l;for(var p=0,f=0,m=h.voices[d],g=0,v=0;v<m.length;v++){"bar"===m[v].el_type&&(c[f]===p&&(n.push({ogLine:a,line:o,staff:u,voice:d,start:g,end:v}),g=v+1,o++,i=Math.max(i,o),f++),p++)}n.push({ogLine:a,line:o,staff:u,voice:d,start:g,end:m.length}),o++,i=Math.max(i,o)}}else n.push({ogLine:a,line:o}),o++,i=Math.max(i,o)}return n}(r,t);e.lines=function(e,t,n){for(var r=[],i=[],o=[],a=1,s=0;s<t.length;s++){var l=t[s];if(e[l.ogLine].staff){var c=e[l.ogLine].staff[l.staff];if(r[l.line]||(r[l.line]={staff:[]}),!r[l.line].staff[l.staff]){r[l.line].staff[l.staff]={voices:[]},void 0!==n&&0===l.staff&&l.line>0&&(r[l.line].staff[l.staff].barNumber=a);for(var u=Object.keys(c),h=0;h<u.length;h++){var d="voices"===u[h];"meter"===u[h]&&0!==l.line&&(d=!0),d||(r[l.line].staff[l.staff][u[h]]=c[u[h]])}i[l.staff]&&(r[l.line].staff[l.staff].key=i[l.staff])}r[l.line].staff[l.staff].voices[l.voice]||(r[l.line].staff[l.staff].voices[l.voice]=[]),r[l.line].staff[l.staff].voices[l.voice]=e[l.ogLine].staff[l.staff].voices[l.voice].slice(l.start,l.end+1),o[10*l.staff+l.voice]&&r[l.line].staff[l.staff].voices[l.voice].unshift({el_type:"stem",direction:o[10*l.staff+l.voice].direction});for(var p=r[l.line].staff[l.staff].voices[l.voice],f=p.length-1;f>=0;f--)if("key"===p[f].el_type){i[l.staff]={root:p[f].root,acc:p[f].acc,mode:p[f].mode,accidentals:p[f].accidentals.filter((function(e){return"natural"!==e.acc}))};break}for(f=p.length-1;f>=0;f--)if("stem"===p[f].el_type){o[10*l.staff+l.voice]={direction:p[f].direction};break}if(void 0!==n&&0===l.staff&&0===l.voice)for(f=0;f<p.length;f++)"bar"===p[f].el_type&&(a++,f===p.length-1?delete p[f].barNumber:p[f].barNumber=a)}else r[l.line]=e[l.ogLine]}for(var m=0;m<r.length;m++)r[m].staff&&(r[m].staff=r[m].staff.filter((function(e){return null!=e})));return r}(r,i,n),e.lineBreaks=i}},calcLineWraps:function(t,n,o){if(0===n.length||o.staffwidth<n[0].left)return{reParse:!1,explanation:"Staff width is narrower than the margin",revisedParams:o};var a=o.scale?Math.max(o.scale,.1):1,s=o.wrap.minSpacing?Math.max(parseFloat(o.wrap.minSpacing),1):1,l=o.wrap.minSpacingLimit?Math.max(parseFloat(o.wrap.minSpacingLimit),1):s-.1,c=o.wrap.maxSpacing?Math.max(parseFloat(o.wrap.maxSpacing),1):void 0;o.wrap.lastLineLimit&&!c&&(c=Math.max(parseFloat(o.wrap.lastLineLimit),1));for(var u=o.wrap.preferredMeasuresPerLine?Math.max(parseInt(o.wrap.preferredMeasuresPerLine,10),0):void 0,h=[],d=[],p=0;p<n.length;p++){var f=n[p],m=o.staffwidth-f.left,g=m/s/a,v=m/l/a,y={widths:f,lineBreakPoint:g,minLineSize:m/c/a,attempts:[],staffWidth:o.staffwidth,minWidth:Math.round(v)},b=null;if(u){var _=i(f.measureWidths,g,u);y.attempts.push({type:"Fixed Measures Per Line",preferredMeasuresPerLine:u,lineBreaks:_.lineBreaks,failed:_.failed,totals:_.totals}),_.failed||(b=_.lineBreaks)}if(!b){var w=e(f.measureWidths,g);y.attempts.push({type:"Free Form",lineBreaks:w.lineBreaks,totals:w.totals}),(b=w.lineBreaks).length>0&&f.measureWidths.length<25&&(w=r(f,g,0,y),y.attempts.push({type:"Optimize",failed:w.failed,reason:w.reason,lineBreaks:w.lineBreaks,totals:w.totals}),w.failed||(b=w.lineBreaks))}h.push(b),d.push(y)}var k=function(e,t,n){var r={lineBreaks:e,staffwidth:t};for(var i in n)n.hasOwnProperty(i)&&"wrap"!==i&&"staffwidth"!==i&&(r[i]=n[i]);return{revisedParams:r}}(h,o.staffwidth,o);return k.explanation=d,k.reParse=!0,k}},ta}function Xc(){if(ia)return ra;ia=1;var e={FONTEM:360,FONTSIZE:30};return e.STEP=93*e.FONTSIZE/720,e.SPACE=10,e.TOPNOTE=15,e.STAVEHEIGHT=100,e.INDENT=50,ra=e}function Zc(){if(aa)return oa;var e;aa=1;var t=Uc();return function(){var n=1,r=128;function i(e,t,n){for(var r=0,i=t+1;i<e.length;i++)if("note"===e[i].el_type&&r++,e[i].decoration&&e[i].decoration.indexOf(n)>=0)return r;return r}function o(e,t,n){for(var r=Math.min(e.length,t+3),i=t;i<r;i++)if("note"===e[i].el_type&&e[i].decoration)for(var o=0;o<e[i].decoration.length;o++)if(n.indexOf(e[i].decoration[o])>=0)return e[i].decoration[o];return null}function a(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=n.length-1;r>=0&&"bar"!==n[r].el_type;)n[r].noChordVoice=!0,r--}function s(e,t){if(e&&!(e.length<=t)&&e[t].title)return e[t].title.join(" ")}function l(e,t){var n=1/4;e.duration&&(n=e.duration[0]);var r=60;return e.bpm&&(r=e.bpm),n*r/t}function c(e){var t;switch(e.type){case"common_time":t={el_type:"meter",num:4,den:4};break;case"cut_time":t={el_type:"meter",num:2,den:2};break;case"specified":t={el_type:"meter",num:e.value[0].num,den:e.value[0].den};break;default:t={el_type:"meter"}}return n=t.num/t.den,t}function u(e){for(var t=[],n=0;n<e.length;n++)"natural"!==e[n].acc&&t.push(e[n]);return t}function h(e,t){p(e,"HP"===t.root?{el_type:"key",accidentals:[{acc:"natural",note:"g"},{acc:"sharp",note:"f"},{acc:"sharp",note:"c"}]}:{el_type:"key",accidentals:u(t.accidentals)})}function d(e,t){p(e,c(t))}function p(e,t){for(var n=e.length-1;n>=0;n--)if(e[n].el_type===t.el_type)return void(JSON.stringify(e[n])!==JSON.stringify(t)&&e.push(t));e.push(t)}e=function(e,u){var f,m=(u=u||{}).program||0,g=u.midiTranspose||0;e.visualTranspose&&(g-=e.visualTranspose);var v=u.channel||0,y=!1,b=u.drum||"",_=u.drumBars||1,w=u.drumIntro||0,k=""!==b,x=[];m=parseInt(m,10),g=parseInt(g,10),10===(v=parseInt(v,10))&&(m=r),b=b.split(" "),_=parseInt(_,10),w=parseInt(w,10);var C=e.formatting.bagpipes;C&&(m=71);var S=[];if(e.formatting.midi){var T=e.formatting.midi;T.program&&T.program.length>0&&(m=T.program[0],T.program.length>1&&(m=T.program[1],v=T.program[0]),y=!0),T.transpose&&(g=T.transpose[0]),T.channel&&(v=T.channel[0],y=!0),T.drum&&(b=T.drum),T.drumbars&&(_=T.drumbars[0]),T.drumon&&(k=!0),10===v&&(m=r),T.beat&&S.push({el_type:"beat",beats:T.beat}),T.nobeataccents&&S.push({el_type:"beataccents",value:!1})}f=u.qpm?parseInt(u.qpm,10):e.metaText.tempo?l(e.metaText.tempo,e.getBeatLength()):u.defaultQpm?u.defaultQpm:180;var E=[];C&&E.push({el_type:"bagpipes"}),E.push({el_type:"instrument",program:m}),v&&E.push({el_type:"channel",channel:v}),g&&E.push({el_type:"transpose",transpose:g}),E.push({el_type:"tempo",qpm:f});for(var I=0;I<S.length;I++)E.push(S[I]);var A,D=[],B=[],L=[],M=[0],F={};F[0]={el_type:"tempo",qpm:f,timing:0};for(var O=[],P=[],N=!1,j=e.lines,z=0;z<j.length;z++){var R=j[z];if(R.staff){let n=function(e){var t,n={pppp:[15,10,5,1],ppp:[30,20,10,1],pp:[45,35,20,1],p:[60,50,35,1],mp:[75,65,50,1],mf:[90,80,65,1],f:[105,95,80,1],ff:[120,110,95,1],fff:[127,125,110,1],ffff:[127,125,110,1]};if(e.decoration)if(e.decoration.indexOf("pppp")>=0?t="pppp":e.decoration.indexOf("ppp")>=0?t="ppp":e.decoration.indexOf("pp")>=0?t="pp":e.decoration.indexOf("p")>=0?t="p":e.decoration.indexOf("mp")>=0?t="mp":e.decoration.indexOf("mf")>=0?t="mf":e.decoration.indexOf("f")>=0?t="f":e.decoration.indexOf("ff")>=0?t="ff":e.decoration.indexOf("fff")>=0?t="fff":e.decoration.indexOf("ffff")>=0&&(t="ffff"),t&&(A=n[t].slice(0),D[$].push({el_type:"beat",beats:A.slice(0)}),B[W]=!1,L[W]=!1),e.decoration.indexOf("crescendo(")>=0){var r=i(G,Q,"crescendo)"),a=Math.min(127,A[0]+50),s=o(G,Q+r+1,Object.keys(n));s&&(a=n[s][0]),B[W]=r>0&&Math.floor((a-A[0])/r),L[W]=!1}else if(e.decoration.indexOf("crescendo)")>=0)B[W]=!1;else if(e.decoration.indexOf("diminuendo(")>=0){var l=i(G,Q,"diminuendo)"),c=Math.max(15,A[0]-50),u=o(G,Q+l+1,Object.keys(n));u&&(c=n[u][0]),B[W]=!1,L[W]=l>0&&Math.floor((c-A[0])/l)}else e.decoration.indexOf("diminuendo)")>=0&&(L[W]=!1)};for(var q=R.staff,$=0,U=0;U<q.length;U++){var H=q[U];if(!H.clef||"TAB"!==H.clef.type)for(var W=0;W<H.voices.length;W++){var G=H.voices[W];if(!D[$]){D[$]=[].concat(JSON.parse(JSON.stringify(E)));var V=s(R.staff,$);V&&D[$].unshift({el_type:"name",trackName:V})}if(g&&"perc"===H.clef.type&&D[$].push({el_type:"transpose",transpose:0}),H.clef&&"perc"===H.clef.type&&!y)for(var Y=0;Y<D[$].length;Y++)"instrument"===D[$][Y].el_type&&(D[$][Y].program=r);else H.key&&h(D[$],H.key);H.meter&&d(D[$],H.meter),!N&&k&&(D[$].push({el_type:"drum",params:{pattern:b,bars:_,on:k,intro:w}}),N=!0),H.clef&&"perc"!==H.clef.type&&H.clef.transpose&&(H.clef.el_type="clef",D[$].push({el_type:"transpose",transpose:H.clef.transpose})),H.clef&&H.clef.type&&(H.clef.type.indexOf("-8")>=0?D[$].push({el_type:"transpose",transpose:-12}):H.clef.type.indexOf("+8")>=0&&D[$].push({el_type:"transpose",transpose:12})),e.formatting.midi&&e.formatting.midi.drumoff&&(D[$].push({el_type:"bar"}),D[$].push({el_type:"drum",params:{pattern:"",on:!1}}));var K=0,X=0,Z=0,J=0;A=[105,95,85,1];for(var Q=0;Q<G.length;Q++){var ee=G[Q];switch(ee.el_type){case"note":if(B[W]&&(A[0]+=B[W],A[1]+=B[W],A[2]+=B[W],D[$].push({el_type:"beat",beats:A.slice(0)})),L[W]&&(A[0]+=L[W],A[1]+=L[W],A[2]+=L[W],D[$].push({el_type:"beat",beats:A.slice(0)})),n(ee),!ee.rest||"spacer"!==ee.rest.type){var te={elem:ee,el_type:"note",timing:M[$]};if(ee.style?te.style=ee.style:x[$]&&(te.style=x[$]),te.duration=0===ee.duration?.25:ee.duration,ee.startTriplet){if(X=ee.tripletMultiplier,Z=ee.startTriplet*X*ee.duration,ee.startTriplet!==ee.tripletR&&Q+ee.tripletR<=G.length){for(var ne=0,re=Q;re<Q+ee.tripletR;re++)ne+=G[re].duration;Z=X*ne}te.duration=te.duration*X,te.duration=Math.round(1e6*te.duration)/1e6,J=te.duration}else X&&(ee.endTriplet?(X=0,te.duration=Math.round(1e6*(Z-J))/1e6):(te.duration=te.duration*X,te.duration=Math.round(1e6*te.duration)/1e6,J+=te.duration));ee.rest&&(te.rest=ee.rest),ee.decoration&&(te.decoration=ee.decoration.slice(0)),ee.pitches&&(te.pitches=t.cloneArray(ee.pitches)),ee.gracenotes&&(te.gracenotes=t.cloneArray(ee.gracenotes)),ee.chord&&(te.chord=t.cloneArray(ee.chord)),D[$].push(te),"rhythm"===ee.style&&a(D),K++,M[$]+=te.duration}break;case"key":case"keySignature":h(D[$],ee);break;case"meter":d(D[$],ee);break;case"clef":ee.transpose&&D[$].push({el_type:"transpose",transpose:ee.transpose}),ee.type&&(ee.type.indexOf("-8")>=0?D[$].push({el_type:"transpose",transpose:-12}):ee.type.indexOf("+8")>=0&&D[$].push({el_type:"transpose",transpose:12}));break;case"tempo":f=l(ee,e.getBeatLength()),D[$].push({el_type:"tempo",qpm:f,timing:M[$]}),F[""+M[$]]={el_type:"tempo",qpm:f,timing:M[$]};break;case"bar":K>0&&D[$].push({el_type:"bar"}),n(ee),K=0;var ie="bar_right_repeat"===ee.type||"bar_dbl_repeat"===ee.type,oe="1"===ee.startEnding,ae="bar_left_repeat"===ee.type||"bar_dbl_repeat"===ee.type||"bar_right_repeat"===ee.type;if(ie){var se=O[$];se||(se=0);var le=P[$];le||(le=D[$].length);for(var ce=se;ce<le;ce++){var ue=t.clone(D[$][ce]);ue.pitches&&(ue.pitches=t.cloneArray(ue.pitches)),D[$].push(ue)}P[$]=void 0,O[$]=void 0}oe&&(P[$]=D[$].length),ae&&(O[$]=D[$].length);break;case"style":x[$]=ee.head;break;case"timeSignature":D[$].push(c(ee));break;case"part":case"stem":case"scale":case"break":case"font":break;case"midi":var he=!1;switch(ee.cmd){case"drumon":k=!0,he=!0;break;case"drumoff":k=!1,he=!0;break;case"drum":b=ee.params,he=!0;break;case"drumbars":_=ee.params[0],he=!0;break;case"drummap":break;case"channel":10===ee.params[0]&&D[$].push({el_type:"instrument",program:r});break;case"program":p(D[$],{el_type:"instrument",program:ee.params[0]}),y=!0;break;case"transpose":D[$].push({el_type:"transpose",transpose:ee.params[0]});break;case"gchordoff":D[$].push({el_type:"gchord",tacet:!0});break;case"gchordon":D[$].push({el_type:"gchord",tacet:!1});break;case"beat":D[$].push({el_type:"beat",beats:ee.params});break;case"nobeataccents":D[$].push({el_type:"beataccents",value:!1});break;case"beataccents":D[$].push({el_type:"beataccents",value:!0});break;case"vol":D[$].push({el_type:"vol",volume:ee.params[0]});break;case"volinc":D[$].push({el_type:"volinc",volume:ee.params[0]})}he&&(D[0].push({el_type:"drum",params:{pattern:b,bars:_,intro:w,on:k}}),N=!0)}}M[++$]||(M[$]=0)}}}}if(function(e,t){if(!t||0===t.length)return;for(var n=Object.keys(t),r=0;r<e.length;r++)for(var i=e[r],o=t[0]?t[0].qpm:0,a=0;a<i.length;a++){var s=i[a];"tempo"===s.el_type&&(o=s.qpm),n.indexOf(""+s.timing)>=0&&o!==t[""+s.timing].qpm&&(o=t[""+s.timing].qpm,"tempo"===s.el_type?(s.qpm=t[""+s.timing].qpm,a++):(e[r].splice(a,0,{el_type:"tempo",qpm:t[""+s.timing].qpm,timing:s.timing}),a+=2))}}(D,F),w)for(var de=e.getPickupLength(),pe=0;pe<D.length;pe++){for(var fe=0;"note"!==D[pe][fe].el_type&&D[pe].length>fe;)fe++;if(D[pe].length>fe)for(re=0;re<w;re++)0===de||re<w-1?D[pe].splice(fe,0,{el_type:"note",rest:{type:"rest"},duration:n},{el_type:"bar"}):D[pe].splice(fe,0,{el_type:"note",rest:{type:"rest"},duration:n-de})}return D.length>0&&D[0].length>0&&(D[0][0].pickupLength=e.getPickupLength()),D}}(),oa=e}function Jc(){if(la)return sa;la=1;var e={f0:"_C",n0:"=C",s0:"^C",x0:"C",f1:"_D",n1:"=D",s1:"^D",x1:"D",f2:"_E",n2:"=E",s2:"^E",x2:"E",f3:"_F",n3:"=F",s3:"^F",x3:"F",f4:"_G",n4:"=G",s4:"^G",x4:"G",f5:"_A",n5:"=A",s5:"^A",x5:"A",f6:"_B",n6:"=B",s6:"^B",x6:"B",f7:"_c",n7:"=c",s7:"^c",x7:"c",f8:"_d",n8:"=d",s8:"^d",x8:"d",f9:"_e",n9:"=e",s9:"^e",x9:"e",f10:"_f",n10:"=f",s10:"^f",x10:"f",f11:"_g",n11:"=g",s11:"^g",x11:"g",f12:"_a",n12:"=a",s12:"^a",x12:"a",f13:"_b",n13:"=b",s13:"^b",x13:"b",f14:"_c'",n14:"=c'",s14:"^c'",x14:"c'",f15:"_d'",n15:"=d'",s15:"^d'",x15:"d'",f16:"_e'",n16:"=e'",s16:"^e'",x16:"e'"};return sa=function(t){var n=(t.accidental?t.accidental[0]:"x")+t.verticalPos;return e[n]}}function Qc(){if(ua)return ca;var e;ua=1;var t=Uc(),n=Jc();return function(){var r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,b,_,w,k,x,C,S,T=1,E={num:4,den:4},I=0,A=0,D=128,B=64,L=48,M=!1,F=!1,O=!0,P=105,N=95,j=85,z=.25,R=0,q={},$=0;function U(e){for(var t=u.length-1;t>=0;t--)if("program"===u[t].cmd)return void(u[t].channel=e)}function H(){for(var e=!0,t=0;t<p.length&&e;t++)"note"===p[t].cmd&&(e=!1);return e}function W(e){return e/1e6}function G(e){return Math.round(e*T*1e6)/1e6}function V(e){switch(parseInt(e.den,10)){case 2:return.5;case 4:return.25;case 8:return e.num%3==0?.375:.125;case 16:return.125}return.25}e=function(e,t,n,D){t||(t={}),D||(D={}),r=[],i=[0,0,0,0,0,0,0],a=[],s=t.qpm,T=1,l=void 0,c=void 0,u=void 0,h=void 0,d=0,S=n,E={num:4,den:4},p=[],f=!1,g=e.length,m=!1,v=[],I=D.bassprog&&1===D.bassprog.length?D.bassprog[0]:0,A=D.chordprog&&1===D.chordprog.length?D.chordprog[0]:0,B=D.bassvol&&1===D.bassvol.length?D.bassvol[0]:64,L=D.chordvol&&1===D.chordvol.length?D.chordvol[0]:48,y=void 0,b=void 0,M=!!t.chordsOff,F=!1,O=!0,P=105,N=95,j=85,z=.25,w=void 0,k=void 0,R=0,x=[],q={},C=1,e.length>0&&e[0].length>0&&($=e[0][0].pickupLength),function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n],i={},o=t.qpm,a=0,s=1,l=0;l<r.length;l++){var c=r[l];if("tempo"!==c.el_type){c.time=a;var u=c.duration?c.duration:0;if(a+=Math.round(u*s*1e6),c.pitches){for(var h=0;h<c.pitches.length;h++){var d=c.pitches[h];if(d)if(d.duration=c.duration,d.startTie)void 0===i[d.pitch]?i[d.pitch]={el:l,pitch:h}:(r[i[d.pitch].el].pitches[i[d.pitch].pitch].duration+=d.duration,c.pitches[h]=null);else if(d.endTie){var p=i[d.pitch];if(p){var f=d.duration;delete r[p.el].pitches[p.pitch].startTie,r[p.el].pitches[p.pitch].duration+=f,c.pitches[h]=null,delete i[d.pitch]}else delete d.endTie}}delete c.duration}}else o?s=c.qpm?o/c.qpm:1:o=c.qpm}for(var m in i)if(i.hasOwnProperty(m)){var g=i[m];delete r[g.el].pitches[g.pitch].startTie}}}(e,t);for(var G=0;G<e.length;G++){o=0;var Y=e[G];u=[{cmd:"program",channel:G,instrument:l}],h=void 0,_=0;var K=!1;(!0===t.voicesOff||t.voicesOff&&t.voicesOff.length&&t.voicesOff.indexOf(G)>=0)&&(K=!0);for(var X=0;X<Y.length;X++){var Z=Y[X];switch(Z.el_type){case"name":h={cmd:"text",type:"name",text:Z.trackName};break;case"note":J(Z,K)&&(f=G);break;case"key":i=te(Z);break;case"meter":z=V(E=Z),de();break;case"tempo":s?T=Z.qpm?s/Z.qpm:1:s=Z.qpm;break;case"transpose":o=Z.transpose;break;case"bar":p.length>0&&(!1===f||G===f)&&(ue(_,W(Z.time)),v=[]),r=[],0===G&&pe(e.length+1),F=!1,b=y,_=W(Z.time);break;case"bagpipes":default:break;case"instrument":if(void 0===l&&(l=Z.program),c=Z.program,u.length>0&&"program"===u[u.length-1].cmd)u[u.length-1].instrument=Z.program;else{var Q;for(Q=u.length-1;Q>=0&&"program"!==u[Q].cmd;Q--);(Q<0||u[Q].instrument!==Z.program)&&u.push({cmd:"program",channel:0,instrument:Z.program})}break;case"channel":U(Z.channel);break;case"drum":q=he(Z.params),de();break;case"gchord":t.chordsOff||(M=Z.tacet);break;case"beat":P=Z.beats[0],N=Z.beats[1],j=Z.beats[2];break;case"vol":w=Z.volume;break;case"volinc":k=Z.volume;break;case"beataccents":O=Z.value}}void 0===u[0].instrument&&(u[0].instrument=l||0),h&&u.unshift(h),a.push(u),H()||(m=!0),x.length}return t.detuneOctave&&function(e,t){for(var n={},r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++){var o=e[r][i];"note"===o.cmd&&(void 0===n[o.start]&&(n[o.start]=[]),n[o.start].push({track:r,event:i,pitch:o.pitch}))}var a=Object.keys(n);for(r=0;r<a.length;r++){var s=n[a[r]];if(s.length>1){var l=(s=s.sort((function(e,t){return e.pitch-t.pitch})))[s.length-1],c=l.pitch%12,u=!1;for(i=0;!u&&i<s.length-1;i++)s[i].pitch%12===c&&(u=!0);if(u){var h=e[l.track][l.event];h.cents||(h.cents=0),h.cents+=t}}}}(a,parseInt(t.detuneOctave,10)),H()||a.push(p),x.length>0&&a.push(x),{tempo:s,instrument:l,tracks:a,totalDuration:d}};var Y=["break","(break)","no chord","n.c.","tacet"];function K(e,t,n){return(n-e)/t}function X(e){var t=!1,n=function(e){if(M)return"break";if(m||!e.chord||0===e.chord.length)return null;for(var t=0;t<e.chord.length;t++){var n=e.chord[t];if("default"===n.position)return n.name;if(Y.indexOf(n.name.toLowerCase())>=0)return"break"}return null}(e);if(n){var r=function(e){if(0===e.length)return;if("break"===e)return{chick:[]};var t=e.substring(0,1);if("("===t){if(0===(e=e.substring(1,e.length-2)).length)return;t=e.substring(0,1)}var n=ie[t];if(!n)return;var r=o;for(;r<-8;)r+=12;for(;r>8;)r-=12;var i,a=(n+=r)-5;1===e.length&&(i=ae(n,""));var s=e.substring(1),l=s.substring(0,1);"b"===l||""===l?(n--,a--,s=s.substring(1)):"#"!==l&&""!==l||(n++,a++,s=s.substring(1));var c=s.split("/");if((i=ae(n,c[0])).length>=3){a=a+(i[2]-i[0])-7}if(2===c.length){if(ie[c[1].substring(0,1)]){var u={"#":1,"":1,b:-1,"":-1}[c[1].substring(1)]||0;a=n=ie[c[1].substring(0,1)]+u+r}}return{boom:n,boom2:a,chick:i}}(n);if(r){0===p.length&&(t=!0,p.push({cmd:"program",channel:g,instrument:A})),y=r;var i=K(_,V(E),W(e.time));v.push({chord:y,beat:i,start:W(e.time)})}}return t}function Z(e,t){var n=t.start,r=t.duration,i=G(1/32);switch(e){case"trill":for(var o=1;r>0;)u.push({cmd:"note",pitch:t.pitch+o,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),o=1===o?0:1,r-=i,n+=i;break;case"mordent":u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),r-=i,n+=i,u.push({cmd:"note",pitch:t.pitch+1,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),r-=i,n+=i,u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:r,gap:0,instrument:c});break;case"lowermordent":u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),r-=i,n+=i,u.push({cmd:"note",pitch:t.pitch-1,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),r-=i,n+=i,u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:r,gap:0,instrument:c});break;case"turn":i=t.duration/5,u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),u.push({cmd:"note",pitch:t.pitch+1,volume:t.volume,start:n+i,duration:i,gap:0,instrument:c,style:"decoration"}),u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n+2*i,duration:i,gap:0,instrument:c,style:"decoration"}),u.push({cmd:"note",pitch:t.pitch+1,volume:t.volume,start:n+3*i,duration:i,gap:0,instrument:c,style:"decoration"}),u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n+4*i,duration:i,gap:0,instrument:c});break;case"roll":for(;r>0;)u.push({cmd:"note",pitch:t.pitch,volume:t.volume,start:n,duration:i,gap:0,instrument:c,style:"decoration"}),r-=2*i,n+=2*i}}function J(e,r){u.length;var i,o=function(e,t){if(t)return 0;var n;if(w)n=w,w=void 0;else if(O)if($>e)n=j;else{E.num,E.den;var r=K(_,V(E),e);n=0===r?P:parseInt(r,10)===r?N:j}else n=N;return k&&(n+=k,k=void 0),n<0&&(n=0),n>127&&(n=127),t?0:n}(W(e.time),r),a=X(e);if(e.gracenotes&&e.pitches&&e.pitches.length>0&&e.pitches[0]&&(i=function(e,t){for(var r,i=0,o=[],a=0;a<e.length;a++)i+=(r=e[a]).duration;var s=t/2/i;for(a=0;a<e.length;a++){var l=ee(r=e[a]);if(c===D&&S){var u=n(r);u&&S[u]&&(l=S[u].sound)}var h={pitch:l,duration:r.duration*s};h=ne(h),o.push(h)}return o}(e.gracenotes,e.pitches[0].duration),e.elem&&(e.elem.midiGraceNotePitches=function(e,t,n,r){var i=[];n=Math.round(n);for(var o=0;o<e.length;o++){var a=e[o];u.push({cmd:"note",pitch:a.pitch,volume:n,start:t,duration:a.duration,gap:0,instrument:r,style:"grace"}),i.push({pitch:a.pitch,durationInMeasures:a.duration,volume:n,instrument:r}),t+=a.duration}return i}(i,W(e.time),2*o/3,c))),e.elem){var l=W(e.time),h=l/z/s*60*1e3;if(void 0===e.elem.currentTrackMilliseconds)e.elem.currentTrackMilliseconds=h,e.elem.currentTrackWholeNotes=l;else if(void 0===e.elem.currentTrackMilliseconds.length)e.elem.currentTrackMilliseconds!==h&&(e.elem.currentTrackMilliseconds=[e.elem.currentTrackMilliseconds,h],e.elem.currentTrackWholeNotes=[e.elem.currentTrackWholeNotes,l]);else{for(var p=!1,f=0;f<e.elem.currentTrackMilliseconds.length;f++)e.elem.currentTrackMilliseconds[f]===h&&(p=!0);p||(e.elem.currentTrackMilliseconds.push(h),e.elem.currentTrackWholeNotes.push(l))}}if(e.pitches){var m="",g=function(e,t){var n={};if(e.decoration)for(var r=0;r<e.decoration.length;r++)"staccato"===e.decoration[r]?n.thisBreakBetweenNotes="staccato":"tenuto"===e.decoration[r]?n.thisBreakBetweenNotes="tenuto":"accent"===e.decoration[r]?n.velocity=Math.min(127,1.5*t):"trill"===e.decoration[r]?n.noteModification="trill":"lowermordent"===e.decoration[r]?n.noteModification="lowermordent":"uppermordent"===e.decoration[r]||"mordent"===e.decoration[r]?n.noteModification="mordent":"turn"===e.decoration[r]?n.noteModification="turn":"roll"===e.decoration[r]&&(n.noteModification="roll");return n}(e,o);g.thisBreakBetweenNotes&&(m=g.thisBreakBetweenNotes),g.velocity&&(o=g.velocity);var v=e.pitches;if("rhythm"===e.style&&(F=!0,y&&y.chick)){v=[];for(var b=0;b<y.chick.length;b++){var x=t.clone(e.pitches[0]);x.actualPitch=y.chick[b],v.push(x)}}e.elem&&(e.elem.midiPitches=[]);for(var C=0;C<v.length;C++){var T=v[C];if(T){T.startSlur&&(R+=T.startSlur.length),T.endSlur&&(R-=T.endSlur.length);var I=T.actualPitch?T.actualPitch:ee(T);if(c===D&&S){var A=n(T);A&&S[A]&&(I=S[A].sound)}var B={cmd:"note",pitch:I,volume:o,start:W(e.time),duration:G(T.duration),instrument:c,startChar:e.elem.startChar,endChar:e.elem.endChar};if(B=ne(B),e.gracenotes&&(B.duration=B.duration/2,B.start=B.start+B.duration),e.elem&&e.elem.midiPitches.push(B),g.noteModification)Z(g.noteModification,B);else{switch(R>0?B.endType="tenuto":m&&(B.endType=m),B.endType){case"tenuto":B.gap=-.001;break;case"staccato":var L=.4*B.duration;B.gap=s/60*L;break;default:B.gap=0}u.push(B)}}}u.length}var M=function(e){return e.pitches&&e.pitches.length>0&&e.pitches[0]?e.pitches[0].duration:e.elem?e.elem.duration:e.duration}(e);return d=Math.max(d,W(e.time)+G(M)),a}var Q=[0,2,4,5,7,9,11];function ee(e){if(void 0!==e.midipitch)return e.midipitch;var t=e.pitch;if(e.accidental)switch(e.accidental){
// change that pitch (not other octaves) for the rest of the bar
case"sharp":r[t]=1;break;case"flat":r[t]=-1;break;case"natural":r[t]=0;break;case"dblsharp":r[t]=2;break;case"dblflat":r[t]=-2;break;case"quartersharp":r[t]=.25;break;case"quarterflat":r[t]=-.25}var n=12*function(e){return Math.floor(e/7)}(t)+Q[re(t)]+60;return void 0!==r[t]?n+=r[t]:n+=i[re(t)],n+=o}function te(e){var t=[0,0,0,0,0,0,0];if(!e.accidentals)return t;for(var n=0;n<e.accidentals.length;n++){var r,i=e.accidentals[n];switch(i.acc){case"flat":r=-1;break;case"quarterflat":r=-.25;break;case"sharp":r=1;break;case"quartersharp":r=.25;break;default:r=0}t[re(i.note.toLowerCase().charCodeAt(0)-"c".charCodeAt(0))]+=r}return t}function ne(e){var t=""+e.pitch;return t.indexOf(".75")>=0?(e.pitch=Math.round(e.pitch),e.cents=-50):t.indexOf(".25")>=0&&(e.pitch=Math.round(e.pitch),e.cents=50),e}function re(e){return(e%=7)<0&&(e+=7),e}var ie={A:33,B:35,C:36,D:38,E:40,F:41,G:43};var oe={
// diminished (all flat 5 chords)
dim:[0,3,6],"":[0,3,6],"":[0,3,6],dim7:[0,3,6,9],"7":[0,3,6,9],"7":[0,3,6,9],"7":[0,3,6,10],"m7(b5)":[0,3,6,10],m7b5:[0,3,6,10],"m75":[0,3,6,10],"-7(b5)":[0,3,6,10],"-7b5":[0,3,6,10],"7b5":[0,4,6,10],"7(b5)":[0,4,6,10],"75":[0,4,6,10],"7(b9,b5)":[0,4,6,10,13],"7b9,b5":[0,4,6,10,13],"7(#9,b5)":[0,4,6,10,15],"7#9b5":[0,4,6,10,15],"maj7(b5)":[0,4,6,11],maj7b5:[0,4,6,11],"13(b5)":[0,4,6,10,14,21],"13b5":[0,4,6,10,14,21],
// minor (all normal 5, minor 3 chords)
m:[0,3,7],"-":[0,3,7],m6:[0,3,7,9],"-6":[0,3,7,9],m7:[0,3,7,10],"-7":[0,3,7,10],"-(b6)":[0,3,7,8],"-b6":[0,3,7,8],"-6/9":[0,3,7,9,14],"-7(b9)":[0,3,7,10,13],"-7b9":[0,3,7,10,13],"-maj7":[0,3,7,11],"-9+7":[0,3,7,11,13],"-11":[0,3,7,11,14,17],m11:[0,3,7,11,14,17],"-maj9":[0,3,7,11,14],"-9":[0,3,7,11,14],mM9:[0,3,7,11,14],
// major (all normal 5, major 3 chords)
M:[0,4,7],6:[0,4,7,9],"6/9":[0,4,7,9,14],"6add9":[0,4,7,9,14],69:[0,4,7,9,14],7:[0,4,7,10],9:[0,4,7,10,14],11:[0,7,10,14,17],13:[0,4,7,10,14,21],"7b9":[0,4,7,10,13],"79":[0,4,7,10,13],"7(b9)":[0,4,7,10,13],"7(#9)":[0,4,7,10,15],"7#9":[0,4,7,10,15],"(13)":[0,4,7,10,14,21],"7(9,13)":[0,4,7,10,14,21],"7(#9,b13)":[0,4,7,10,15,20],"7(#11)":[0,4,7,10,14,18],"7#11":[0,4,7,10,14,18],"7(b13)":[0,4,7,10,20],"7b13":[0,4,7,10,20],"9(#11)":[0,4,7,10,14,18],"9#11":[0,4,7,10,14,18],"13(#11)":[0,4,7,10,18,21],"13#11":[0,4,7,10,18,21],maj7:[0,4,7,11],"7":[0,4,7,11],"7":[0,4,7,11],maj9:[0,4,7,11,14],"maj7(9)":[0,4,7,11,14],"maj7(11)":[0,4,7,11,17],"maj7(#11)":[0,4,7,11,18],"maj7(13)":[0,4,7,14,21],"maj7(9,13)":[0,4,7,11,14,21],"7sus4":[0,5,7,10],m7sus4:[0,3,7,10,17],sus4:[0,5,7],sus2:[0,2,7],"7sus2":[0,2,7,10],"9sus4":[0,5,7,10,14],"13sus4":[0,5,7,10,14,21],
// augmented (all sharp 5 chords)
aug7:[0,4,8,10],"+7":[0,4,8,10],"+":[0,4,8],"7#5":[0,4,8,10],"75":[0,4,8,10],"7+5":[0,4,8,10],"9#5":[0,4,8,10,14],"95":[0,4,8,10,14],"9+5":[0,4,8,10,14],"-7(#5)":[0,3,8,10],"-7#5":[0,3,8,10],"7(#5)":[0,4,8,10],"7(b9,#5)":[0,4,8,10,13],"7b9#5":[0,4,8,10,13],"maj7(#5)":[0,4,8,11],"maj7#5":[0,4,8,11],"maj7(#5,#11)":[0,4,8,11,18],"maj7#5#11":[0,4,8,11,18],"9(#5)":[0,4,8,10,14],"13(#5)":[0,4,8,10,14,21],"13#5":[0,4,8,10,14,21]};function ae(e,t){var n=oe[t];n||(n="ma"===t.slice(0,2).toLowerCase()||"M"===t[0]?oe.M:"m"===t[0]||"-"===t[0]?oe.m:oe.M),e+=12;for(var r=[],i=0;i<n.length;i++)r.push(e+n[i]);return r}function se(e,t,n,r,i){void 0!==e&&p.push({cmd:"note",pitch:e,volume:n,start:_+r*G(t),duration:G(i),gap:0,instrument:I})}function le(e,t,n,r,i){for(var o=0;o<e.length;o++)p.push({cmd:"note",pitch:e[o],volume:n,start:_+r*G(t),duration:G(i),gap:0,instrument:A})}var ce={"2/2":["boom","chick"],"2/4":["boom","chick"],"3/4":["boom","chick","chick"],"4/4":["boom","chick","boom2","chick"],"5/4":["boom","chick","chick","boom2","chick"],"6/8":["boom","","chick","boom2","","chick"],"9/8":["boom","","chick","boom2","","chick","boom2","","chick"],"12/8":["boom","","chick","boom2","","chick","boom","","chick","boom2","","chick"]};function ue(e,t){var n=E.num,r=E.den,i=1/r,o=i/2,a=ce[n+"/"+r],s=parseInt(n,10)/parseInt(r,10)-(t-e)/T;if(Math.abs(s)<1e-5&&(s=!1),!a||s){a=[];for(var l=(t-e)/T/i,c=0;c<l;c++)a.push("chick")}if(0===v.length&&v.push({beat:0,chord:y}),0!==v[0].beat&&y&&b&&v.unshift({beat:0,chord:b}),1!==v.length){for(var u=.125===i?3:1,h={},d=0;d<v.length;d++){var p=v[d];h[""+Math.round(p.beat*u)]=p}for(var f=0;f<a.length;f++){var m,g;if(h[""+f]&&(m=h[""+f]),!F&&m)switch(a[f]){case"boom":h[""+(f+1)]?le(m.chord.chick,i,L,f,o):(se(m.chord.boom,i,B,f,o),g=m.chord.boom);break;case"boom2":h[""+(f+1)]?le(m.chord.chick,i,L,f,o):g===m.chord.boom?(se(m.chord.boom2,i,B,f,o),g=void 0):(se(m.chord.boom,i,B,f,o),g=m.chord.boom);break;case"chick":le(m.chord.chick,i,L,f,o);break;case"":h[""+f]&&le(m.chord.chick,i,L,f,o)}}}else for(var _=v[0].beat;_<a.length;_++)if(!F)switch(a[_]){case"boom":se(v[0].chord.boom,i,B,_,o);break;case"boom2":se(v[0].chord.boom2,i,B,_,o);break;case"chick":le(v[0].chord.chick,i,L,_,o)}}function he(e){if(0===e.pattern.length||!1===e.on)return{on:!1};for(var t=e.pattern[0],n=[],r="",i=0,o=0;o<t.length;o++)if("d"===t[o]&&i++,"d"===t[o]||"z"===t[o])0!==r.length?(n.push(r),r=t[o]):r+=t[o];else{if(0===r.length)return{on:!1};r+=t[o]}if(0!==r.length&&n.push(r),e.pattern.length!==2*i+1)return{on:!1};for(var a={on:!0,bars:e.bars,pattern:[]},s=V(E),l=0,c=0;c<n.length;c++){r=n[c];for(var u=1,h=!1,d=0,p=1;p<r.length;p++)switch(r[p]){case"/":0!==d&&(u*=d),d=0,h=!0;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d=10*d+r[p];break;default:return{on:!1}}h?(0===d&&(d=2),u/=d):d&&(u*=d),"d"===r[0]?(a.pattern.push({len:u*s,pitch:e.pattern[1+l],velocity:e.pattern[1+l+i]}),l++):a.pattern.push({len:u*s,pitch:null})}return C=e.bars?e.bars:1,a}function de(){if(q&&q.pattern){for(var e=q,t=0,n=E.num/E.den,r=0;r<e.pattern.length;r++)t+=e.pattern[r].len;var i=t/C/n;for(r=0;r<e.pattern.length;r++)e.pattern[r].len=e.pattern[r].len/i;q=e}}function pe(e){if(0!==x.length||q.on){var t=E.num/E.den;if(0===x.length){if(d<t)return;x.push({cmd:"program",channel:e,instrument:D})}if(q.on)for(var n=_,r=0;r<q.pattern.length;r++){var i=G(q.pattern[r].len);q.pattern[r].pitch&&x.push({cmd:"note",pitch:q.pattern[r].pitch,volume:q.pattern[r].velocity,start:n,duration:i,gap:0,instrument:D}),n+=i}}}}(),ca=e}function eu(){if(fa)return pa;fa=1;var e=Uc(),t=Xc(),n=Zc(),r=Qc(),i=function(){if(da)return ha;function e(e,t){return"abselem"===e?"abselem":t}function t(e,t){e.el_type="meter",e.startChar=-1,e.endChar=-1;for(var n=0;n<t.length;n++)t[n].unshift(e)}function n(e,t){e.el_type="key",e.startChar=-1,e.endChar=-1;for(var n=0;n<t.length;n++)t[n].unshift(e)}function r(e,t){e.el_type="clef",e.startChar=-1,e.endChar=-1;for(var n=0;n<t.length;n++)t[n].unshift(e)}function i(e,t,n){e.el_type="font",e.type=n,e.startChar=-1,e.endChar=-1;for(var r=0;r<t.length;r++)t[r].unshift(e)}function o(t,n){return!t||JSON.stringify(t,e)===JSON.stringify(n,e)}function a(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++)if("staff"!==n[r])t[n[r]]=e[n[r]];else{t.staff=[];for(var i=0;i<e.staff.length;i++){for(var o={},a=Object.keys(e.staff[i]),s=0;s<a.length;s++)if("voices"!==a[s])o[a[s]]=e.staff[i][a[s]];else{o.voices=[];for(var l=0;l<e.staff[i].voices.length;l++)o.voices.push([].concat(e.staff[i].voices[l]))}t.staff.push(o)}}return t}return da=1,ha=function(e,s){s||(s={});for(var l=!!s.lineBreaks,c=[],u=!1,h=[],d=[],p=[],f=[],m=[],g=[],v=[],y=0;y<e.length;y++){var b=e[y];if(b.staff){if(u&&!b.vskip)for(var _=c[c.length-1],w=0;w<_.staff.length;w++){var k=b.staff[w],x=_.staff[w];if(k&&(o(k.meter,h[w])||(t(k.meter,k.voices),h[w]=k.meter,delete k.meter),o(k.key,d[w])||(n(k.key,k.voices),d[w]=k.key,delete k.key),k.title&&(x.abbrevTitle=k.title),o(k.clef,p[w])||(r(k.clef,k.voices),p[w]=k.clef,delete k.clef),o(k.vocalfont,f[w])||(i(k.vocalfont,k.voices,"vocalfont"),f[w]=k.vocalfont,delete k.vocalfont),o(k.gchordfont,m[w])||(i(k.gchordfont,k.voices,"gchordfont"),m[w]=k.gchordfont,delete k.gchordfont),o(k.tripletfont,g[w])||(i(k.tripletfont,k.voices,"tripletfont"),g[w]=k.tripletfont,delete k.tripletfont),o(k.annotationfont,v[w])||(i(k.annotationfont,k.voices,"annotationfont"),v[w]=k.annotationfont,delete k.annotationfont)),k)for(var C=0;C<x.voices.length;C++){var S=x.voices[C],T=k.voices[C];l&&S.push({el_type:"break"}),T&&(x.voices[C]=S.concat(T))}}else{for(var E=0;E<b.staff.length;E++)d[E]=b.staff[E].key,h[E]=b.staff[E].meter,p[E]=b.staff[E].clef;c.push(a(b))}u=!0}else u=!1,c.push(b)}return c},ha}();return pa=function(){function o(e,t,n,r){for(var i=0;i<r.length;i++)e[n][r[i]]=t[n][r[i]]}function a(e,t){for(;t<e.length&&null===e[t].left;)t++;return e[t]}this.reset=function(){this.version="1.1.0",this.media="screen",this.metaText={},this.metaTextInfo={},this.formatting={},this.lines=[],this.staffNum=0,this.voiceNum=0,this.lineNum=0,this.runningFonts={},delete this.visualTranspose},this.reset(),this.copyTopInfo=function(e){var t=["tempo","title","header","rhythm","origin","composer","author","partOrder"];o(this,e,"metaText",t),o(this,e,"metaTextInfo",t)},this.copyBottomInfo=function(e){var t=["unalignedWords","book","source","discography","notes","transcription","history","abc-copyright","abc-creator","abc-edited-by","footer"];o(this,e,"metaText",t),o(this,e,"metaTextInfo",t)},this.getBeatLength=function(){var e=this.getMeterFraction(),t=1;return(6===e.num||9===e.num||12===e.num||3===e.num&&8===e.den)&&(t=3),t/e.den},this.getPickupLength=function(){var e=this.getBarLength(),t=function(e,t){for(var n=0,r=0;r<e.length;r++)if(e[r].staff)for(var i=0;i<e[r].staff.length;i++)for(var o=0;o<e[r].staff[i].voices.length;o++)for(var a=e[r].staff[i].voices[o],s=1,l=0;l<a.length;l++){var c=a[l].rest&&"spacer"===a[l].rest.type;if(a[l].startTriplet&&(s=a[l].tripletMultiplier),a[l].duration&&!c&&"tempo"!==a[l].el_type&&(n+=a[l].duration*s),a[l].endTriplet&&(s=1),n>=t&&(n-=t),"bar"===a[l].el_type)return n}return n}(this.lines,e);return t<1e-8||e-t<1e-8?0:t},this.getBarLength=function(){var e=this.getMeterFraction();return e.num/e.den},this.getTotalTime=function(){return this.totalTime},this.getTotalBeats=function(){return this.totalBeats},this.millisecondsPerMeasure=function(e){var t;if(e)t=e;else{var n=this.metaText?this.metaText.tempo:null;t=this.getBpm(n)}return t<=0&&(t=1),6e4*(this.getBeatsPerMeasure()/t)},this.getBeatsPerMeasure=function(){var e=this.getBeatLength();return this.getBarLength()/e},this.getMeter=function(){for(var e=0;e<this.lines.length;e++){var t=this.lines[e];if(t.staff)for(var n=0;n<t.staff.length;n++){var r=t.staff[n].meter;if(r)return r}}return{type:"common_time"}},this.getMeterFraction=function(){var e=this.getMeter(),t=4,n=4;return e&&("specified"===e.type?(t=parseInt(e.value[0].num,10),n=parseInt(e.value[0].den,10)):"cut_time"===e.type?(t=2,n=2):"common_time"===e.type&&(t=4,n=4)),this.meter={num:t,den:n},this.meter},this.getKeySignature=function(){for(var e=0;e<this.lines.length;e++){var t=this.lines[e];if(t.staff)for(var n=0;n<t.staff.length;n++)if(t.staff[n].key)return t.staff[n].key}return{}},this.getElementFromChar=function(e){for(var t=0;t<this.lines.length;t++){var n=this.lines[t];if(n.staff)for(var r=0;r<n.staff.length;r++)for(var i=n.staff[r],o=0;o<i.voices.length;o++)for(var a=i.voices[o],s=0;s<a.length;s++){var l=a[s];if(l.startChar&&l.endChar&&l.startChar<=e&&l.endChar>e)return l}}return null},this.addElementToEvents=function(t,n,r,i,o,a,s,l,c,u){if(n.hint)return{isTiedState:void 0,duration:0};var h=n.durationClass?n.durationClass:n.duration;if(n.abcelem.rest&&"spacer"===n.abcelem.rest.type&&(h=0),h>0){for(var d=[],p=0;p<n.elemset.length;p++)null!==n.elemset[p]&&d.push(n.elemset[p]);var f=n.startTie;if(void 0!==c)t["event"+c].elements.push(d),u&&(t["event"+r]||(t["event"+r]={type:"event",milliseconds:r,line:a,measureNumber:s,top:i,height:o,left:null,width:0,elements:[],startChar:null,endChar:null,startCharArray:[],endCharArray:[]}),t["event"+r].measureStart=!0,u=!1),f||(c=void 0);else{if(t["event"+r]){if(t["event"+r].left?t["event"+r].left=Math.min(t["event"+r].left,n.x):t["event"+r].left=n.x,t["event"+r].elements.push(d),t["event"+r].startCharArray.push(n.abcelem.startChar),t["event"+r].endCharArray.push(n.abcelem.endChar),null===t["event"+r].startChar&&(t["event"+r].startChar=n.abcelem.startChar),null===t["event"+r].endChar&&(t["event"+r].endChar=n.abcelem.endChar),n.abcelem.midiPitches&&n.abcelem.midiPitches.length){t["event"+r].midiPitches||(t["event"+r].midiPitches=[]);for(p=0;p<n.abcelem.midiPitches.length;p++)t["event"+r].midiPitches.push(n.abcelem.midiPitches[p])}if(n.abcelem.midiGraceNotePitches&&n.abcelem.midiGraceNotePitches.length){t["event"+r].midiGraceNotePitches||(t["event"+r].midiGraceNotePitches=[]);for(var m=0;m<n.abcelem.midiGraceNotePitches.length;m++)t["event"+r].midiGraceNotePitches.push(n.abcelem.midiGraceNotePitches[m])}}else t["event"+r]={type:"event",milliseconds:r,line:a,measureNumber:s,top:i,height:o,left:n.x,width:n.w,elements:[d],startChar:n.abcelem.startChar,endChar:n.abcelem.endChar,startCharArray:[n.abcelem.startChar],endCharArray:[n.abcelem.endChar],midiPitches:n.abcelem.midiPitches?e.cloneArray(n.abcelem.midiPitches):[]},n.abcelem.midiGraceNotePitches&&(t["event"+r].midiGraceNotePitches=e.cloneArray(n.abcelem.midiGraceNotePitches));u&&(t["event"+r].measureStart=!0,u=!1),f&&(c=r)}}return{isTiedState:c,duration:h/l,nextIsBar:u||"bar"===n.type}},this.makeVoicesArray=function(){for(var e=[],n=[],r={},i=0;i<this.engraver.staffgroups.length;i++){var o=this.engraver.staffgroups[i];if(o&&o.staffs&&o.staffs.length>0)for(var a=o.staffs[0],s=a.absoluteY,l=s-a.top*t.STEP,c=o.staffs[o.staffs.length-1],u=(s=c.absoluteY)-c.bottom*t.STEP-l,h=o.voices,d=0;d<h.length;d++)if(!h[d].staff||!h[d].staff.isTabStaff){var p=!1;e[d]||(e[d]=[]),void 0===n[d]&&(n[d]=0);for(var f=h[d].children,m=0;m<f.length;m++)"tempo"===f[m].type&&(r[n[d]]=this.getBpm(f[m].abcelem)),e[d].push({top:l,height:u,line:o.line,measureNumber:n[d],elem:f[m]}),"bar"===f[m].type&&p&&n[d]++,"note"!==f[m].type&&"rest"!==f[m].type||(p=!0)}}return this.tempoLocations=r,e},this.setupEvents=function(e,t,n,r){r||(r=1);for(var i,o=[],s={},l=e,c=!0,u=this.makeVoicesArray(),h=0,d=0;d<u.length;d++){var p=l,f=Math.round(1e3*p),m=0,g=-1,v=u[d],y=n;t=this.getBeatLength()*y/60;for(var b=-1,_=0;_<v.length;_++){var w=v[_].measureNumber;b!==w&&this.tempoLocations[w]&&(y=this.tempoLocations[w],t=r*this.getBeatLength()*y/60,b=w);var k,x=v[_].elem,C=this.addElementToEvents(s,x,f,v[_].top,v[_].height,v[_].line,v[_].measureNumber,t,i,c);if(i=C.isTiedState,c=C.nextIsBar,p+=C.duration,x.duration>0&&s["event"+f]&&(k="event"+f),f=Math.round(1e3*p),"bar"===x.type){var S=x.abcelem.type,T="bar_right_repeat"===S||"bar_dbl_repeat"===S,E="1"===x.abcelem.startEnding,I="bar_left_repeat"===S||"bar_dbl_repeat"===S||"bar_right_repeat"===S;if(T){_>0&&(s[k].endX=x.x),-1===g&&(g=_);var A=0;b=-1;for(var D=m;D<g;D++){b!==(w=v[D].measureNumber)&&this.tempoLocations[w]&&(y=this.tempoLocations[w],t=r*this.getBeatLength()*y/60,b=w);var B=v[D].elem;i=(C=this.addElementToEvents(s,B,f,v[D].top,v[D].height,v[D].line,v[D].measureNumber,t,i,c)).isTiedState,c=C.nextIsBar,p+=C.duration,A=f,f=Math.round(1e3*p)}s["event"+A]&&(s["event"+A].endX=v[g].elem.x),c=!0,g=-1}E&&(g=_),I&&(m=_)}}h=Math.max(h,f)}return function(e){for(var t,n,r,i,o=e.length-1;o>=0;o--){var a=e[o];"bar"===a.type?(a.top=r,a.nextTop=t,t=r,a.bottom=i,a.nextBottom=n,n=i):"event"===a.type&&(r=a.top,i=a.top+a.height)}}(o=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t.sort((function(e,t){var n=e.milliseconds-t.milliseconds;return 0!==n?n:"bar"===e.type?-1:1}))}(s)),function(e,t){if(t.length<1)return;for(var n=0;n<t.length-1;n++){var r=t[n],i=a(t,n+1);if(null!==r.left){var o=i&&r.top===i.top?i.left:e[r.line].staffGroup.w;void 0!==r.endX?o>r.left&&(r.endX=Math.min(r.endX,o)):r.endX=o}}var s=t[t.length-1];s.endX=e[s.line].staffGroup.w}(this.lines,o),o.push({type:"end",milliseconds:h}),this.addUsefulCallbackInfo(o,y*r),o},this.addUsefulCallbackInfo=function(e,t){for(var n=this.millisecondsPerMeasure(t),r=0;r<e.length;r++){e[r].millisecondsPerMeasure=n}},this.getBpm=function(e){var t;if(e){t=e.bpm;var n=this.getBeatLength();t=t*(e.duration&&e.duration.length>0?e.duration[0]:n)/n}if(!t){t=180;var r=this.getMeterFraction();r&&3!==r.num&&r.num%3==0&&(t=120)}return t},this.setTiming=function(e,t){if(t=t||0,this.engraver&&this.engraver.staffgroups){var n=this.metaText?this.metaText.tempo:null,r=this.getBpm(n),i=1;e?n&&(i=e/r):e=r;var o=this.getBeatLength(),a=e/60,s=this.getBarLength()/o*t/a;s&&(s-=this.getPickupLength()/o/a);var l=o*a;return this.noteTimings=this.setupEvents(s,l,e,i),this.noteTimings.length>0?(this.totalTime=this.noteTimings[this.noteTimings.length-1].milliseconds/1e3,this.totalBeats=this.totalTime*a):(this.totalTime=void 0,this.totalBeats=void 0),this.noteTimings}this.noteTimings=[]},this.setUpAudio=function(e){e||(e={});var t=n(this,e);return r(t,e,this.formatting.percmap,this.formatting.midi)},this.deline=function(e){return i(this.lines,e)}},pa}function tu(){if(ya)return va;ya=1;var e=Uc(),t=Hc(),n=Yc(),r=function(){if(Jo)return Zo;Jo=1;var e,t,n,r,i,o,a=Uc(),s=Vc(),l=Gc(),c=function(a,s,l,c,u,h){e=a,t=s,n=l,r=c,i=u,o=h,this.lineContinuation=!1},u=function(e,t,n){if(void 0===e.inTie[t])return!1;var r=e.currentVoice?100*e.currentVoice.staffNum+e.currentVoice.index:0;return!(!e.inTie[t][r]||void 0===n.pitches&&"spacer"===n.rest.type)},h={};c.prototype.parseMusic=function(a){o.resolveTempo(),n.is_in_header=!1;for(var s=0,l=n.iChar;e.isWhiteSpace(a[s])&&s<a.length;)s++;if(s!==a.length&&"%"!==a[s]){var c=n.start_new_line;void 0===n.continueall?n.start_new_line=!0:n.start_new_line=!1;var v=0,y=o.letter_to_body_header(a,s);y[0]>0&&(s+=y[0],"V"===y[1]&&this.startNewLine());for(var b=0;s<a.length;){var _=s;if("%"===a[s])break;var w=o.letter_to_inline_header(a,s,c);if(w[0]>0)s+=w[0],"V"===w[1]&&(c=!0);else{var S;for((!i.hasBeginMusic()||c&&!this.lineContinuation)&&(this.startNewLine(),c=!1);;)if((S=e.eatWhiteSpace(a,s))>0&&(s+=S),s>0&&""===a[s-1]&&(S=o.letter_to_body_header(a,s))[0]>0&&("V"===S[1]&&this.startNewLine(),s=S[0],n.start_new_line=!1),(S=x(a,s))[0]>0&&(s+=S[0]),(S=p(a,s))[0]>0){h.chord||(h.chord=[]);var I=e.translateString(S[1]);I=I.replace(/;/g,"\n");for(var A=!1,D=0;D<h.chord.length;D++)h.chord[D].position===S[2]&&(A=!0,h.chord[D].name+="\n"+I);!1===A&&(null===S[2]&&S[3]?h.chord.push({name:I,rel_position:S[3]}):h.chord.push({name:I,position:S[2]})),s+=S[0];var M=e.skipWhiteSpace(a.substring(s));M>0&&(h.force_end_beam_last=!0),s+=M}else if((S=-1==="ABCDEFGabcdefgxyzZ[]|^_{".indexOf(a[s])?k(a,s):[0])[0]>0)null===S[1]?s+1<a.length&&this.startNewLine():S[1].length>0&&(0===S[1].indexOf("style=")?h.style=S[1].substr(6):(void 0===h.decoration&&(h.decoration=[]),"beambr1"===S[1]?h.beambr=1:"beambr2"===S[1]?h.beambr=2:h.decoration.push(S[1]))),s+=S[0];else{if(!((S=f(a,s))[0]>0))break;h.gracenotes=S[1],s+=S[0]}if((S=C(a,s))[0]>0){b=0,void 0!==h.gracenotes&&(h.rest={type:"spacer"},h.duration=.125,n.addFormattingOptions(h,r.formatting,"note"),i.appendElement("note",l+s,l+s+S[0],h),n.measureNotEmpty=!0,h={});var F={type:S[1]};0===F.type.length?t("Unknown bar type",a,s):(n.inEnding&&"bar_thin"!==F.type&&(F.endEnding=!0,n.inEnding=!1),S[2]&&(F.startEnding=S[2],n.inEnding&&(F.endEnding=!0),n.inEnding=!0,"bar_right_repeat"===S[1]?n.restoreStartEndingHoldOvers():n.duplicateStartEndingHoldOvers()),void 0!==h.decoration&&(F.decoration=h.decoration),void 0!==h.chord&&(F.chord=h.chord),F.startEnding&&void 0===n.barFirstEndingNum?n.barFirstEndingNum=n.currBarNumber:F.startEnding&&F.endEnding&&n.barFirstEndingNum?n.currBarNumber=n.barFirstEndingNum:F.endEnding&&(n.barFirstEndingNum=void 0),"bar_invisible"!==F.type&&n.measureNotEmpty&&(void 0===n.currentVoice||0===n.currentVoice.staffNum&&0===n.currentVoice.index)&&(n.currBarNumber++,n.barNumbers&&n.currBarNumber%n.barNumbers==0&&(F.barNumber=n.currBarNumber)),n.addFormattingOptions(h,r.formatting,"bar"),i.appendElement("bar",l+_,l+s+S[0],F),n.measureNotEmpty=!1,h={}),s+=S[0]}else if("&"===a[s])(S=m(a,s))[0]>0&&(i.appendElement("overlay",l,l+1,{}),s+=1,b++);else{if((S=T(a,s)).consumed>0&&(void 0!==S.startSlur&&(h.startSlur=S.startSlur),S.dottedSlur&&(h.dottedSlur=!0),void 0!==S.triplet&&(v>0?t("Can't nest triplets",a,s):(h.startTriplet=S.triplet,h.tripletMultiplier=S.tripletQ/S.triplet,h.tripletR=S.num_notes,v=void 0===S.num_notes?S.triplet:S.num_notes)),s+=S.consumed),"["===a[s]){s++;for(var O=null,P=!1,N=!1;!N;){var j=k(a,s);j[0]>0&&(s+=j[0]);var z=B(a,s,{},!1);if(null!==z&&void 0!==z.pitch)j[0]>0&&0!==j[1].indexOf("style=")&&(void 0===h.decoration&&(h.decoration=[]),h.decoration.push(j[1])),z.end_beam&&(h.end_beam=!0,delete z.end_beam),void 0===h.pitches?(h.duration=z.duration,h.pitches=[z]):h.pitches.push(z),delete z.duration,j[0]>0&&0===j[1].indexOf("style=")&&(h.pitches[h.pitches.length-1].style=j[1].substr(6)),n.inTieChord[h.pitches.length]&&(z.endTie=!0,n.inTieChord[h.pitches.length]=void 0),z.startTie&&(n.inTieChord[h.pitches.length]=!0),s=z.endChar,delete z.endChar;else if(" "===a[s])t("Spaces are not allowed in chords",a,s),s++;else{if(s<a.length&&"]"===a[s]){s++,0!==n.next_note_duration&&(h.duration=h.duration*n.next_note_duration,n.next_note_duration=0),u(n,b,h)&&(h.pitches.forEach((function(e){e.endTie=!0})),d(n,b,!1)),v>0&&(!h.rest||"spacer"!==h.rest.type)&&0==--v&&(h.endTriplet=!0);for(var R=!1;s<a.length&&!R;){switch(a[s]){case" ":case"\t":E(h);break;case")":void 0===h.endSlur?h.endSlur=1:h.endSlur++;break;case"-":h.pitches.forEach((function(e){e.startTie={}})),d(n,b,!0);break;case">":case"<":var q=L(a,s);s+=q[0]-1,n.next_note_duration=q[2],O?O*=q[1]:O=q[1];break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"/":var $=e.getFraction(a,s);O=$.value;var U=a[s=$.index];" "===U&&(P=!0),"-"===U||")"===U||" "===U||"<"===U||">"===U?s--:R=!0;break;default:R=!0}R||s++}}else t("Expected ']' to end the chords",a,s);void 0!==h.pitches&&(null!==O&&(h.duration=h.duration*O,P&&E(h)),n.addFormattingOptions(h,r.formatting,"note"),i.appendElement("note",l+_,l+s,h),n.measureNotEmpty=!0,h={}),N=!0}}}else{var H={},W=B(a,s,H,!0);void 0!==H.endTie&&d(n,b,!0),null!==W&&(void 0!==W.pitch?(h.pitches=[{}],void 0!==W.accidental&&(h.pitches[0].accidental=W.accidental),h.pitches[0].pitch=W.pitch,h.pitches[0].name=W.name,(W.midipitch||0===W.midipitch)&&(h.pitches[0].midipitch=W.midipitch),void 0!==W.endSlur&&(h.pitches[0].endSlur=W.endSlur),void 0!==W.endTie&&(h.pitches[0].endTie=W.endTie),void 0!==W.startSlur&&(h.pitches[0].startSlur=W.startSlur),void 0!==h.startSlur&&(h.pitches[0].startSlur=h.startSlur),void 0!==h.dottedSlur&&(h.pitches[0].dottedSlur=!0),void 0!==W.startTie&&(h.pitches[0].startTie=W.startTie),void 0!==h.startTie&&(h.pitches[0].startTie=h.startTie)):(h.rest=W.rest,void 0!==W.endSlur&&(h.endSlur=W.endSlur),void 0!==W.endTie&&(h.rest.endTie=W.endTie),void 0!==W.startSlur&&(h.startSlur=W.startSlur),void 0!==W.startTie&&(h.rest.startTie=W.startTie),void 0!==h.startTie&&(h.rest.startTie=h.startTie)),void 0!==W.chord&&(h.chord=W.chord),void 0!==W.duration&&(h.duration=W.duration),void 0!==W.decoration&&(h.decoration=W.decoration),void 0!==W.graceNotes&&(h.graceNotes=W.graceNotes),delete h.startSlur,delete h.dottedSlur,u(n,b,h)&&(void 0!==h.pitches?h.pitches[0].endTie=!0:"spacer"!==h.rest.type&&(h.rest.endTie=!0),d(n,b,!1)),(W.startTie||h.startTie)&&d(n,b,!0),s=W.endChar,v>0&&(!W.rest||"spacer"!==W.rest.type)&&0==--v&&(h.endTriplet=!0),W.end_beam&&E(h),h.rest&&"rest"===h.rest.type&&1===h.duration&&g(n)<=1&&(h.rest.type="whole",h.duration=g(n)),h.duration<1&&-1===[.5,.75,.875,.9375,.96875,.984375,.25,.375,.4375,.46875,.484375,.4921875,.125,.1875,.21875,.234375,.2421875,.24609375,.0625,.09375,.109375,.1171875,.12109375,.123046875,.03125,.046875,.0546875,.05859375,.060546875,.0615234375,.015625,.0234375,.02734375,.029296875,.0302734375,.03076171875].indexOf(h.duration)&&0!==h.duration&&(h.rest&&"spacer"===h.rest.type||t("Duration not representable: "+a.substring(_,s),a,s)),n.addFormattingOptions(h,r.formatting,"note"),i.appendElement("note",l+_,l+s,h),n.measureNotEmpty=!0,h={})}s===_&&(" "!==a[s]&&"`"!==a[s]&&t("Unknown character ignored",a,s),s++)}}}this.lineContinuation=a.indexOf("")>=0||y[0]>0,this.lineContinuation||(h={})}};var d=function(e,t,n){var r=e.currentVoice?100*e.currentVoice.staffNum+e.currentVoice.index:0;void 0===e.inTie[t]&&(e.inTie[t]=[]),e.inTie[t][r]=n},p=function(r,i){if('"'===r[i]){var o=e.getBrackettedSubstring(r,i,5);if(o[2]||t("Missing the closing quote while parsing the chord symbol",r,i),o[0]>0&&o[1].length>0&&"^"===o[1][0])o[1]=o[1].substring(1),o[2]="above";else if(o[0]>0&&o[1].length>0&&"_"===o[1][0])o[1]=o[1].substring(1),o[2]="below";else if(o[0]>0&&o[1].length>0&&"<"===o[1][0])o[1]=o[1].substring(1),o[2]="left";else if(o[0]>0&&o[1].length>0&&">"===o[1][0])o[1]=o[1].substring(1),o[2]="right";else if(o[0]>0&&o[1].length>0&&"@"===o[1][0]){o[1]=o[1].substring(1);var a=e.getFloat(o[1]);0===a.digits&&t("Missing first position in absolutely positioned annotation.",r,i),o[1]=o[1].substring(a.digits),","!==o[1][0]&&t("Missing comma absolutely positioned annotation.",r,i),o[1]=o[1].substring(1);var s=e.getFloat(o[1]);0===s.digits&&t("Missing second position in absolutely positioned annotation.",r,i),o[1]=o[1].substring(s.digits);var c=e.skipWhiteSpace(o[1]);o[1]=o[1].substring(c),o[2]=null,o[3]={x:a.value,y:s.value}}else!0!==n.freegchord&&(o[1]=o[1].replace(/([ABCDEFG0-9])b/g,"$1"),o[1]=o[1].replace(/([ABCDEFG0-9])#/g,"$1"),o[1]=o[1].replace(/^([ABCDEFG])([]?)o([^A-Za-z])/g,"$1$2$3"),o[1]=o[1].replace(/^([ABCDEFG])([]?)o$/g,"$1$2"),o[1]=o[1].replace(/^([ABCDEFG])([]?)0([^A-Za-z])/g,"$1$2$3"),o[1]=o[1].replace(/^([ABCDEFG])([]?)\^([^A-Za-z])/g,"$1$2$3")),o[2]="default",o[1]=l.chordName(n,o[1]);return o}return[0,""]},f=function(r,i){if("{"===r[i]){var o=e.getBrackettedSubstring(r,i,1,"}");o[2]||t("Missing the closing '}' while parsing grace note",r,i),")"===r[i+o[0]]&&(o[0]++,o[1]+=")");for(var a=[],s=0,l=!1;s<o[1].length;){var c=!1;"/"===o[1][s]&&(c=!0,s++);var u=B(o[1],s,{},!1);null!==u?(u.duration=u.duration/(8*n.default_length),c&&(u.acciaccatura=!0),a.push(u),l&&(u.endTie=!0,l=!1),u.startTie&&(l=!0),s=u.endChar,delete u.endChar,u.end_beam&&(u.endBeam=!0,delete u.end_beam)):(" "===o[1][s]?a.length>0&&(a[a.length-1].endBeam=!0):t("Unknown character '"+o[1][s]+"' while parsing grace note",r,i),s++)}if(a.length)return[o[0],a]}return[0]};function m(e,t){if("&"===e[t]){for(var n=t;e[t]&&":"!==e[t]&&"|"!==e[t];)t++;return[t-n,e.substring(n+1,t)]}return[0]}function g(e){var t=e.origMeter;return t&&"specified"===t.type&&t.value&&0!==t.value.length?parseInt(t.value[0].num,10)/parseInt(t.value[0].den,10):1}var v=["trill","lowermordent","uppermordent","mordent","pralltriller","accent","fermata","invertedfermata","tenuto","0","1","2","3","4","5","+","wedge","open","thumb","snap","turn","roll","breath","shortphrase","mediumphrase","longphrase","segno","coda","D.S.","D.C.","fine","beambr1","beambr2","slide","marcato","upbow","downbow","/","//","///","////","trem1","trem2","trem3","trem4","turnx","invertedturn","invertedturnx","trill(","trill)","arpeggio","xstem","mark","umarcato","style=normal","style=harmonic","style=rhythm","style=x","style=triangle","D.C.alcoda","D.C.alfine","D.S.alcoda","D.S.alfine","editorial","courtesy"],y=["p","pp","f","ff","mf","mp","ppp","pppp","fff","ffff","sfz"],b=["crescendo(","crescendo)","diminuendo(","diminuendo)","glissando(","glissando)"],_=[["<","accent"],[">","accent"],["tr","trill"],["plus","+"],["emphasis","accent"],["^","umarcato"],["marcato","umarcato"]],w=[["<(","crescendo("],["<)","crescendo)"],[">(","diminuendo("],[">)","diminuendo)"]],k=function(r,i){var o=n.macros[r[i]];if(void 0!==o)return"!"!==o[0]&&"+"!==o[0]||(o=o.substring(1)),"!"!==o[o.length-1]&&"+"!==o[o.length-1]||(o=o.substring(0,o.length-1)),v.includes(o)?[1,o]:y.includes(o)?("hidden"===n.volumePosition&&(o=""),[1,o]):b.includes(o)?("hidden"===n.dynamicPosition&&(o=""),[1,o]):(n.ignoredDecorations.includes(o)||t("Unknown macro: "+o,r,i),[1,""]);switch(r[i]){case".":if("("===r[i+1]||"-"===r[i+1])break;return[1,"staccato"];case"u":return[1,"upbow"];case"v":return[1,"downbow"];case"~":return[1,"irishroll"];case"!":case"+":var a=e.getBrackettedSubstring(r,i,5);if(a[1].length>1&&("^"===a[1][0]||"_"===a[1][0])&&(a[1]=a[1].substring(1)),v.includes(a[1]))return a;if(y.includes(a[1]))return"hidden"===n.volumePosition&&(a[1]=""),a;if(b.includes(a[1]))return"hidden"===n.dynamicPosition&&(a[1]=""),a;var s=_.findIndex((function(e){return a[1]===e[0]}));return s>=0?(a[1]=_[s][1],a):(s=w.findIndex((function(e){return a[1]===e[0]})))>=0?(a[1]=w[s][1],"hidden"===n.dynamicPosition&&(a[1]=""),a):"!"!==r[i]||1!==a[0]&&"!"===r[i+a[0]-1]?(t("Unknown decoration: "+a[1],r,i),a[1]="",a):[1,null];case"H":return[1,"fermata"];case"J":return[1,"slide"];case"L":return[1,"accent"];case"M":return[1,"mordent"];case"O":return[1,"coda"];case"P":return[1,"pralltriller"];case"R":return[1,"roll"];case"S":return[1,"segno"];case"T":return[1,"trill"]}return[0,0]},x=function(t,n){for(var r=n;e.isWhiteSpace(t[n]);)n++;return[n-r]},C=function(n,r){var i=e.getBarLine(n,r);if(0===i.len)return[0,""];if(i.warn)return t(i.warn,n,r),[i.len,""];for(var o=0;o<n.length&&" "===n[r+i.len+o];o++);var a=i.len;if("["===n[r+i.len+o]&&(i.len+=o+1),'"'===n[r+i.len]&&"["===n[r+i.len-1]){var s=e.getBrackettedSubstring(n,r+i.len,5);return[i.len+s[0],i.token,s[1]]}var l=e.getTokenOf(n.substring(r+i.len),"1234567890-,");return 0===l.len||"-"===l.token[0]?[a,i.token]:[i.len+l.len,i.token,l.token]},S={2:3,3:2,4:3,5:2,
// TODO-PER: not handling 6/8 rhythm yet
6:2,7:2,
// TODO-PER: not handling 6/8 rhythm yet
8:3,9:2},T=function(n,r){var i={},o=r;for("."===n[r]&&"("===n[r+1]&&(i.dottedSlur=!0,r++);"("===n[r]||e.isWhiteSpace(n[r]);)"("===n[r]&&(r+1<n.length&&n[r+1]>="2"&&n[r+1]<="9"?(void 0!==i.triplet?t("Can't nest triplets",n,r):(i.triplet=n[r+1]-"0",i.tripletQ=S[i.triplet],i.num_notes=i.triplet,r+2<n.length&&":"===n[r+2]&&(r+3<n.length&&":"===n[r+3]?r+4<n.length&&n[r+4]>="1"&&n[r+4]<="9"?(i.num_notes=n[r+4]-"0",r+=3):t("expected number after the two colons after the triplet to mark the duration",n,r):r+3<n.length&&n[r+3]>="1"&&n[r+3]<="9"?(i.tripletQ=n[r+3]-"0",r+4<n.length&&":"===n[r+4]?r+5<n.length&&n[r+5]>="1"&&n[r+5]<="9"&&(i.num_notes=n[r+5]-"0",r+=4):r+=2):t("expected number after the triplet to mark the duration",n,r))),r++):void 0===i.startSlur?i.startSlur=1:i.startSlur++),r++;return i.consumed=r-o,i};c.prototype.startNewLine=function(){var e={startChar:-1,endChar:-1};n.partForNextLine.title&&(e.part=n.partForNextLine),e.clef=n.currentVoice&&void 0!==n.staves[n.currentVoice.staffNum].clef?a.clone(n.staves[n.currentVoice.staffNum].clef):a.clone(n.clef);var t=n.currentVoice?n.currentVoice.scoreTranspose:0;if(e.key=s.standardKey(n.key.root+n.key.acc+n.key.mode,n.key.root,n.key.acc,t),e.key.mode=n.key.mode,n.key.impliedNaturals&&(e.key.impliedNaturals=n.key.impliedNaturals),n.key.explicitAccidentals)for(var r=0;r<n.key.explicitAccidentals.length;r++){for(var o=!1,l=0;l<e.key.accidentals.length;l++)e.key.accidentals[l].note===n.key.explicitAccidentals[r].note&&(e.key.accidentals[l].acc=n.key.explicitAccidentals[r].acc,o=!0);o||e.key.accidentals.push(n.key.explicitAccidentals[r])}if(n.targetKey=e.key,e.key.explicitAccidentals&&delete e.key.explicitAccidentals,s.addPosToKey(e.clef,e.key),null!==n.meter?(n.currentVoice?(n.staves.forEach((function(e){e.meter=n.meter})),e.meter=n.staves[n.currentVoice.staffNum].meter,n.staves[n.currentVoice.staffNum].meter=null):e.meter=n.meter,n.meter=null):n.currentVoice&&n.staves[n.currentVoice.staffNum].meter&&(e.meter=n.staves[n.currentVoice.staffNum].meter,n.staves[n.currentVoice.staffNum].meter=null),n.currentVoice&&n.currentVoice.name&&(e.name=n.currentVoice.name),n.vocalfont&&(e.vocalfont=n.vocalfont),n.tripletfont&&(e.tripletfont=n.tripletfont),n.gchordfont&&(e.gchordfont=n.gchordfont),n.style&&(e.style=n.style),n.currentVoice){var c=n.staves[n.currentVoice.staffNum];c.brace&&(e.brace=c.brace),c.bracket&&(e.bracket=c.bracket),c.connectBarLines&&(e.connectBarLines=c.connectBarLines),c.name&&(e.name=c.name[n.currentVoice.index]),c.subname&&(e.subname=c.subname[n.currentVoice.index]),n.currentVoice.stem&&(e.stem=n.currentVoice.stem),n.currentVoice.stafflines&&(e.stafflines=n.currentVoice.stafflines),n.currentVoice.staffscale&&(e.staffscale=n.currentVoice.staffscale),n.currentVoice.scale&&(e.scale=n.currentVoice.scale),n.currentVoice.color&&(e.color=n.currentVoice.color),n.currentVoice.style&&(e.style=n.currentVoice.style),n.currentVoice.transpose&&(e.clef.transpose=n.currentVoice.transpose)}var u=void 0===n.currentVoice||0===n.currentVoice.staffNum&&0===n.currentVoice.index;0===n.barNumbers&&u&&1!==n.currBarNumber&&(e.barNumber=n.currBarNumber),i.startNewLine(e),n.key.impliedNaturals&&delete n.key.impliedNaturals,n.partForNextLine={},4===n.tempoForNextLine.length&&i.appendElement(n.tempoForNextLine[0],n.tempoForNextLine[1],n.tempoForNextLine[2],n.tempoForNextLine[3]),n.tempoForNextLine=[]};var E=function(e){return void 0!==e.duration&&e.duration<.25&&(e.end_beam=!0),e},I={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11},A={x:"invisible",X:"invisible-multimeasure",y:"spacer",z:"rest",Z:"multimeasure"},D={dblflat:"__",flat:"_",natural:"=",sharp:"^",dblsharp:"^^",quarterflat:"_/",quartersharp:"^/"},B=function(t,o,a,s){var c,u=function(e){return"octave"===e||"duration"===e||"Zduration"===e||"broken_rhythm"===e||"end_slur"===e};"."===t[o]&&"-"===t[o+1]&&(c=!0,o++);for(var h="startSlur",d=!1;;){switch(t[o]){case"(":if("startSlur"!==h)return u(h)?(a.endChar=o,a):null;void 0===a.startSlur?a.startSlur=1:a.startSlur++;break;case")":if(!u(h))return null;void 0===a.endSlur?a.endSlur=1:a.endSlur++;break;case"^":if("startSlur"===h)a.accidental="sharp",h="sharp2";else{if("sharp2"!==h)return u(h)?(a.endChar=o,a):null;a.accidental="dblsharp",h="pitch"}break;case"_":if("startSlur"===h)a.accidental="flat",h="flat2";else{if("flat2"!==h)return u(h)?(a.endChar=o,a):null;a.accidental="dblflat",h="pitch"}break;case"=":if("startSlur"!==h)return u(h)?(a.endChar=o,a):null;a.accidental="natural",h="pitch";break;case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"a":case"b":case"c":case"d":case"e":case"f":case"g":if("startSlur"!==h&&"sharp2"!==h&&"flat2"!==h&&"pitch"!==h)return u(h)?(a.endChar=o,a):null;if(a.pitch=I[t[o]],a.pitch+=7*(n.currentVoice&&void 0!==n.currentVoice.octave?n.currentVoice.octave:n.octave),a.name=t[o],a.accidental&&(a.name=D[a.accidental]+a.name),l.note(n,a),h="octave",s&&0!==n.next_note_duration?(a.duration=n.default_length*n.next_note_duration,n.next_note_duration=0,d=!0):a.duration=n.default_length,n.clef&&"perc"===n.clef.type||n.currentVoice&&"perc"===n.currentVoice.clef){var p=t[o];a.accidental&&(p=D[a.accidental]+p),r.formatting&&r.formatting.midi&&r.formatting.midi.drummap&&(a.midipitch=r.formatting.midi.drummap[p])}break;case",":if("octave"!==h)return u(h)?(a.endChar=o,a):null;a.pitch-=7,a.name+=",";break;case"'":if("octave"!==h)return u(h)?(a.endChar=o,a):null;a.pitch+=7,a.name+="'";break;case"x":case"X":case"y":case"z":case"Z":if("startSlur"!==h)return u(h)?(a.endChar=o,a):null;a.rest={type:A[t[o]]},delete a.accidental,delete a.startSlur,delete a.startTie,delete a.endSlur,delete a.endTie,delete a.end_beam,delete a.grace_notes,a.rest.type.indexOf("multimeasure")>=0?(a.duration=r.getBarLength(),a.rest.text=1,h="Zduration"):(s&&0!==n.next_note_duration?(a.duration=n.default_length*n.next_note_duration,n.next_note_duration=0,d=!0):a.duration=n.default_length,h="duration");break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"0":case"/":if("octave"===h||"duration"===h){var f=e.getFraction(t,o);for(a.duration=a.duration*f.value,a.endChar=f.index;f.index<t.length&&(e.isWhiteSpace(t[f.index])||"-"===t[f.index]);)"-"===t[f.index]?a.startTie={}:a=E(a),f.index++;o=f.index-1,h="broken_rhythm"}else if("sharp2"===h)a.accidental="quartersharp",h="pitch";else{if("flat2"!==h){if("Zduration"===h){var m=e.getNumber(t,o);return a.duration=m.num*r.getBarLength(),a.rest.text=m.num,a.endChar=m.index,a}return null}a.accidental="quarterflat",h="pitch"}break;case"-":if("startSlur"===h)i.addTieToLastNote(c),a.endTie=!0;else{if("octave"!==h&&"duration"!==h&&"end_slur"!==h)return"broken_rhythm"===h?(a.endChar=o,a):null;if(a.startTie={},d||!s)return e.isWhiteSpace(t[o+1])&&E(a),a.endChar=o+1,a;h="broken_rhythm"}break;case" ":case"\t":if(!u(h))return null;a.end_beam=!0,c=!1;do{"."===t[o]&&"-"===t[o+1]&&(c=!0,o++),"-"===t[o]&&(a.startTie={},c&&(a.startTie.style="dotted")),o++}while(o<t.length&&(e.isWhiteSpace(t[o])||"-"===t[o])||"."===t[o]&&"-"===t[o+1]);if(a.endChar=o,d||!s||"<"!==t[o]&&">"!==t[o])return a;o--,h="broken_rhythm";break;case">":case"<":if(!u(h))return null;if(!s)return a.endChar=o,a;var g=L(t,o);o+=g[0]-1,n.next_note_duration=g[2],a.duration=g[1]*a.duration,h="end_slur";break;default:return u(h)?(a.endChar=o,a):null}if(++o===t.length)return u(h)?(a.endChar=o,a):null}return null},L=function(e,t){switch(e[t]){case">":return t<e.length-2&&">"===e[t+1]&&">"===e[t+2]?[3,1.875,.125]:t<e.length-1&&">"===e[t+1]?[2,1.75,.25]:[1,1.5,.5];case"<":return t<e.length-2&&"<"===e[t+1]&&"<"===e[t+2]?[3,.125,1.875]:t<e.length-1&&"<"===e[t+1]?[2,.25,1.75]:[1,.5,1.5]}return null};return Zo=c}(),i=function(){if(ea)return Qo;ea=1;var e=Uc(),t=function(t,n){this.lineIndex=0,this.lines=t,this.multilineVars=n,this.skipWhiteSpace=function(e){for(var t=0;t<e.length;t++)if(!this.isWhiteSpace(e[t]))return t;return e.length};var r=function(e,t){return t>=e.length};this.eatWhiteSpace=function(e,t){for(var n=t;n<e.length;n++)if(!this.isWhiteSpace(e[n]))return n-t;return n-t},this.getKeyPitch=function(e){var t=this.skipWhiteSpace(e);if(r(e,t))return{len:0};switch(e[t]){case"A":return{len:t+1,token:"A"};case"B":return{len:t+1,token:"B"};case"C":return{len:t+1,token:"C"};case"D":return{len:t+1,token:"D"};case"E":return{len:t+1,token:"E"};case"F":return{len:t+1,token:"F"};case"G":return{len:t+1,token:"G"}}return{len:0}},this.getSharpFlat=function(e){if("bass"===e)return{len:0};switch(e[0]){case"#":return{len:1,token:"#"};case"b":return{len:1,token:"b"}}return{len:0}},this.getMode=function(e){var t=function(e,t){for(;t<e.length&&(e[t]>="a"&&e[t]<="z"||e[t]>="A"&&e[t]<="Z");)t++;return t},n=this.skipWhiteSpace(e);if(r(e,n))return{len:0};var i=e.substring(n,n+3).toLowerCase();switch((i.length>1&&" "===i[1]||"^"===i[1]||"_"===i[1]||"="===i[1])&&(i=i[0]),i){case"mix":return{len:t(e,n),token:"Mix"};case"dor":return{len:t(e,n),token:"Dor"};case"phr":return{len:t(e,n),token:"Phr"};case"lyd":return{len:t(e,n),token:"Lyd"};case"loc":return{len:t(e,n),token:"Loc"};case"aeo":case"min":case"m":return{len:t(e,n),token:"m"};case"maj":case"ion":return{len:t(e,n),token:""}}return{len:0}},this.getClef=function(t,n){var i=t,o=this.skipWhiteSpace(t);if(r(t,o))return{len:0};var a=!1,s=t.substring(o);if(e.startsWith(s,"clef=")&&(a=!0,s=s.substring(5),o+=5),0===s.length&&a)return{len:o+5,warn:"No clef specified: "+i};var l=this.skipWhiteSpace(s);if(r(s,l))return{len:0};l>0&&(o+=l,s=s.substring(l));var c=null;if(e.startsWith(s,"treble"))c="treble";else if(e.startsWith(s,"bass3"))c="bass3";else if(e.startsWith(s,"bass"))c="bass";else if(e.startsWith(s,"tenor"))c="tenor";else if(e.startsWith(s,"alto2"))c="alto2";else if(e.startsWith(s,"alto1"))c="alto1";else if(e.startsWith(s,"alto"))c="alto";else if(!n&&a&&e.startsWith(s,"none"))c="none";else if(e.startsWith(s,"perc"))c="perc";else if(!n&&a&&e.startsWith(s,"C"))c="tenor";else if(!n&&a&&e.startsWith(s,"F"))c="bass";else{if(n||!a||!e.startsWith(s,"G"))return{len:o+5,warn:"Unknown clef specified: "+i};c="treble"}return s=s.substring(c.length),(l=this.isMatch(s,"+8"))>0?c+="+8":(l=this.isMatch(s,"-8"))>0&&(c+="-8"),{len:o+c.length,token:c,explicit:a}},this.getBarLine=function(e,t){switch(e[t]){case"]":switch(e[++t]){case"|":return{len:2,token:"bar_thick_thin"};case"[":return e[++t]>="1"&&e[t]<="9"||'"'===e[t]?{len:2,token:"bar_invisible"}:{len:1,warn:"Unknown bar symbol"};default:return{len:1,token:"bar_invisible"}}case":":switch(e[++t]){case":":return{len:2,token:"bar_dbl_repeat"};case"|":switch(e[++t]){case"]":return"|"===e[++t]&&":"===e[++t]?{len:5,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};case"|":return":"===e[++t]?{len:4,token:"bar_dbl_repeat"}:{len:3,token:"bar_right_repeat"};default:return{len:2,token:"bar_right_repeat"}}default:return{len:1,warn:"Unknown bar symbol"}}case"[":if("|"!==e[++t])return e[t]>="1"&&e[t]<="9"||'"'===e[t]?{len:1,token:"bar_invisible"}:{len:0};switch(e[++t]){case":":return{len:3,token:"bar_left_repeat"};case"]":return{len:3,token:"bar_invisible"};default:return{len:2,token:"bar_thick_thin"}}case"|":switch(e[++t]){case"]":return{len:2,token:"bar_thin_thick"};case"|":return":"===e[++t]?{len:3,token:"bar_left_repeat"}:{len:2,token:"bar_thin_thin"};case":":for(var n=0;":"===e[t+n];)n++;return{len:1+n,token:"bar_left_repeat"};default:return{len:1,token:"bar_thin"}}}return{len:0}},this.getTokenOf=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])<0)return{len:n,token:e.substring(0,n)};return{len:n,token:e}},this.getToken=function(e,t,n){for(var r=t;r<n&&!this.isWhiteSpace(e[r]);)r++;return e.substring(t,r)},this.isMatch=function(t,n){var i=this.skipWhiteSpace(t);return r(t,i)?0:e.startsWith(t.substring(i),n)?i+n.length:0},this.getPitchFromTokens=function(e){var t={};if(t.position={A:5,B:6,C:0,D:1,E:2,F:3,G:4,a:12,b:13,c:7,d:8,e:9,f:10,g:11}[e[0].token],void 0===t.position)return{warn:"Pitch expected. Found: "+e[0].token};for(e.shift();e.length;)switch(e[0].token){case",":t.position-=7,e.shift();break;case"'":t.position+=7,e.shift();break;default:return t}return t},this.getKeyAccidentals2=function(e){for(var t;e.length>0;){var n;if("^"===e[0].token){if(n="sharp",e.shift(),0===e.length)return{accs:t,warn:"Expected note name after "+n};switch(e[0].token){case"^":n="dblsharp",e.shift();break;case"/":n="quartersharp",e.shift()}}else if("="===e[0].token)n="natural",e.shift();else{if("_"!==e[0].token)return{accs:t};if(n="flat",e.shift(),0===e.length)return{accs:t,warn:"Expected note name after "+n};switch(e[0].token){case"_":n="dblflat",e.shift();break;case"/":n="quarterflat",e.shift()}}if(0===e.length)return{accs:t,warn:"Expected note name after "+n};switch(e[0].token[0]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":void 0===t&&(t=[]),t.push({acc:n,note:e[0].token[0]}),1===e[0].token.length?e.shift():e[0].token=e[0].token.substring(1);break;default:return{accs:t,warn:"Expected note name after "+n+" Found: "+e[0].token}}}return{accs:t}},this.getKeyAccidental=function(e){var t={"^":"sharp","^^":"dblsharp","=":"natural",_:"flat",__:"dblflat","_/":"quarterflat","^/":"quartersharp"},n=this.skipWhiteSpace(e);if(r(e,n))return{len:0};var i=null;switch(e[n]){case"^":case"_":case"=":i=e[n];break;default:return{len:0}}if(n++,r(e,n))return{len:1,warn:"Expected note name after accidental"};switch(e[n]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:n+1,token:{acc:t[i],note:e[n]}};case"^":case"_":case"/":if(i+=e[n],n++,r(e,n))return{len:2,warn:"Expected note name after accidental"};switch(e[n]){case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"A":case"B":case"C":case"D":case"E":case"F":case"G":return{len:n+1,token:{acc:t[i],note:e[n]}};default:return{len:2,warn:"Expected note name after accidental"}}break;default:return{len:1,warn:"Expected note name after accidental"}}},this.isWhiteSpace=function(e){return" "===e||"\t"===e||""===e},this.getMeat=function(e,t,n){var r=e.indexOf("%",t);for(r>=0&&r<n&&(n=r);t<n&&(" "===e[t]||"\t"===e[t]||""===e[t]);)t++;for(;t<n&&(" "===e[n-1]||"\t"===e[n-1]||""===e[n-1]);)n--;return{start:t,end:n}};var i=function(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"},o=function(e){return e>="0"&&e<="9"};this.tokenize=function(e,t,n,r){var a=this.getMeat(e,t,n);t=a.start,n=a.end;for(var s,l=[];t<n;){if('"'===e[t]){for(s=t+1;s<n&&'"'!==e[s];)s++;l.push({type:"quote",token:e.substring(t+1,s),start:t+1,end:s}),s++}else if(i(e[t])){if(s=t+1,r)for(;s<n&&!this.isWhiteSpace(e[s]);)s++;else for(;s<n&&i(e[s]);)s++;l.push({type:"alpha",token:e.substring(t,s),continueId:o(e[s]),start:t,end:s}),t=s+1}else if("."===e[t]&&o(e[s+1])){s=t+1;for(var c;s<n&&o(e[s]);)s++;c=parseFloat(e.substring(t,s)),l.push({type:"number",token:e.substring(t,s),intt:null,floatt:c,continueId:i(e[s]),start:t,end:s}),t=s+1}else if(o(e[t])||"-"===e[t]&&o(e[s+1])){s=t+1;for(var u,h=null;s<n&&o(e[s]);)s++;if("."===e[s]&&o(e[s+1]))for(s++;s<n&&o(e[s]);)s++;else h=parseInt(e.substring(t,s));u=parseFloat(e.substring(t,s)),l.push({type:"number",token:e.substring(t,s),intt:h,floatt:u,continueId:i(e[s]),start:t,end:s}),t=s+1}else" "===e[t]||"\t"===e[t]||l.push({type:"punct",token:e[t],start:t,end:t+1}),s=t+1;t=s}return l},this.getVoiceToken=function(e,t,n){for(var r=t;r<n&&this.isWhiteSpace(e[r])||"="===e[r];)r++;if('"'===e[r]){var i=e.indexOf('"',r+1);return-1===i||i>=n?{len:1,err:"Missing close quote"}:{len:i-t+1,token:this.translateString(e.substring(r+1,i))}}for(var o=r;o<n&&!this.isWhiteSpace(e[o])&&"="!==e[o];)o++;return{len:o-t+1,token:e.substring(r,o)}};var a={"`a":"","'a":"","^a":"","~a":"",'"a':"",oa:"",aa:"","=a":"",ua:"",";a":"","`e":"","'e":"","^e":"",'"e':"","=e":"",ue:"",";e":"",".e":"","`i":"","'i":"","^i":"",'"i':"","=i":"",ui:"",";i":"","`o":"","'o":"","^o":"","~o":"",'"o':"","=o":"",uo:"","/o":"","`u":"","'u":"","^u":"","~u":"",'"u':"",ou:"","=u":"",uu:"",";u":"","`A":"","'A":"","^A":"","~A":"",'"A':"",oA:"",AA:"","=A":"",uA:"",";A":"","`E":"","'E":"","^E":"",'"E':"","=E":"",uE:"",";E":"",".E":"","`I":"","'I":"","^I":"","~I":"",'"I':"","=I":"",uI:"",";I":"",".I":"","`O":"","'O":"","^O":"","~O":"",'"O':"","=O":"",uO:"","/O":"","`U":"","'U":"","^U":"","~U":"",'"U':"",oU:"","=U":"",uU:"",";U":"",ae:"",AE:"",oe:"",OE:"",ss:"","'c":"","^c":"",uc:"",cc:"",".c":"",cC:"","'C":"","^C":"",uC:"",".C":"","~N":"","~n":"","=s":"",vs:"",DH:"",dh:"",HO:"",Ho:"",HU:"",Hu:"","'Y":"","'y":"","^Y":"","^y":"",'"Y':"",'"y':"",vS:"",vZ:"",vz:""},s={"#":"",b:"","=":""},l={201:"",202:"",203:"",241:"",242:"",252:"a",262:"2",272:"o",302:"",312:"",322:"",332:"",342:"",352:"",362:"",372:"",243:"",253:"",263:"3",273:"",303:"",313:"",323:"",333:"",343:"",353:"",363:"",373:"",244:"",254:"",264:"  ",274:"14",304:"",314:"",324:"",334:"",344:"",354:"",364:"",374:"",245:"",255:"-",265:"",275:"12",305:"",315:"",325:"",335:"",345:"",355:"",365:"",375:"",246:"",256:"",266:"",276:"34",306:"",316:"",326:"",336:"",346:"",356:"",366:"",376:"",247:"",257:" ",267:"",277:"",307:"",317:"",327:"",337:"",347:"",357:"",367:"",377:"",250:" ",260:"",270:" ",300:"",310:"",320:"",330:"",340:"",350:"",360:"",370:"",251:"",261:"",271:"1",301:"",311:"",321:"",331:"",341:"",351:"",361:"",371:""};this.translateString=function(e){var t=e.split("\\");if(1===t.length)return e;var n=null;return t.forEach((function(e){if(null===n)n=e;else{var t=a[e.substring(0,2)];void 0!==t?n+=t+e.substring(2):void 0!==(t=l[e.substring(0,3)])?n+=t+e.substring(3):(t=s[e.substring(0,1)],n+=void 0!==t?t+e.substring(1):"\\"+e)}})),n},this.getNumber=function(e,t){for(var n=0;t<e.length;)switch(e[t]){case"0":n*=10,t++;break;case"1":n=10*n+1,t++;break;case"2":n=10*n+2,t++;break;case"3":n=10*n+3,t++;break;case"4":n=10*n+4,t++;break;case"5":n=10*n+5,t++;break;case"6":n=10*n+6,t++;break;case"7":n=10*n+7,t++;break;case"8":n=10*n+8,t++;break;case"9":n=10*n+9,t++;break;default:return{num:n,index:t}}return{num:n,index:t}},this.getFraction=function(e,t){var n=1,r=1;if("/"!==e[t]){var i=this.getNumber(e,t);n=i.num,t=i.index}if("/"===e[t]){if("/"===e[++t]){for(var o=.5;"/"===e[t++];)o/=2;return{value:n*o,index:t-1}}var a=t,s=this.getNumber(e,t);0===s.num&&a===t&&(s.num=2),0!==s.num&&(r=s.num),t=s.index}return{value:n/r,index:t}},this.theReverser=function(t){return e.endsWith(t,", The")?"The "+t.substring(0,t.length-5):e.endsWith(t,", A")?"A "+t.substring(0,t.length-3):t},this.stripComment=function(t){var n=t.indexOf("%");return n>=0?e.strip(t.substring(0,n)):e.strip(t)},this.getInt=function(e){var t=parseInt(e);if(isNaN(t))return{digits:0};var n=""+t;return{value:t,digits:e.indexOf(n)+n.length}},this.getFloat=function(e){var t=parseFloat(e);if(isNaN(t))return{digits:0};var n=""+t;return{value:t,digits:e.indexOf(n)+n.length}},this.getMeasurement=function(e){if(0===e.length)return{used:0};var t=1,n="";if("-"===e[0].token)e.shift(),n="-",t++;else if("number"!==e[0].type)return{used:0};if(n+=e.shift().token,0===e.length)return{used:1,value:parseInt(n)};var r=e.shift();if("."===r.token){if(t++,0===e.length)return{used:t,value:parseInt(n)};if("number"===e[0].type&&(n=n+"."+(r=e.shift()).token,t++,0===e.length))return{used:t,value:parseFloat(n)};r=e.shift()}switch(r.token){case"pt":case"px":return{used:t+1,value:parseFloat(n)};case"cm":return{used:t+1,value:parseFloat(n)/2.54*72};case"in":return{used:t+1,value:72*parseFloat(n)};default:return e.unshift(r),{used:t,value:parseFloat(n)}}};var c=function(e){return(e=e.replace(/\\n/g,"\n")).replace(/\\"/g,'"')};this.getBrackettedSubstring=function(e,t,n,r){for(var i=r||e[t],o=t+1,a=!1;o<e.length&&(a||e[o]!==i);)a="\\"===e[o],++o;return e[o]===i?[o-t+1,c(e.substring(t+1,o)),!0]:((o=t+n)>e.length-1&&(o=e.length-1),[o-t+1,c(e.substring(t+1,o)),!1])}};return t.prototype.peekLine=function(){return this.lines[this.lineIndex]},t.prototype.nextLine=function(){if(this.lineIndex>0&&(this.multilineVars.iChar+=this.lines[this.lineIndex-1].length+1),this.lineIndex<this.lines.length){var e=this.lines[this.lineIndex];return this.lineIndex++,e}return null},Qo=t}(),o=Kc(),a=eu(),s=function(){if(ga)return ma;ga=1;var e=Vc(),t=Uc();return ma=function(n){var r=this;function i(e,t){for(var n=t-1;n>0&&"bar"!==e[n].el_type;n--);return n}this.setVisualTranspose=function(e){e&&(n.visualTranspose=e)},this.resolveOverlays=function(){for(var e=!1,r=[],o=0;o<n.lines.length;o++){var a=n.lines[o];if(a.staff)for(var s=0;s<a.staff.length;s++){for(var l=a.staff[s],c=[],u=0;u<l.voices.length;u++){var h=l.voices[u];c.push({hasOverlay:!1,voice:[],snip:[]}),r[o]=0;for(var d=0,p=!1,f=-1,m=0;m<h.length;m++){var g=h[m];if("overlay"!==g.el_type||p)"bar"===g.el_type?(p?(p=!1,c[u].snip.push({start:f,len:m-f}),c[u].voice.push(g)):(d>0&&c[u].voice.push({el_type:"note",duration:d,rest:{type:"invisible"},startChar:g.startChar,endChar:g.endChar}),c[u].voice.push(g)),d=0):"note"===g.el_type?p?c[u].voice.push(g):(d+=g.duration,r[o]+=g.duration):"scale"!==g.el_type&&"stem"!==g.el_type&&"overlay"!==g.el_type&&"style"!==g.el_type&&"transpose"!==g.el_type&&"color"!==g.el_type||c[u].voice.push(g);else{e=!0,p=!0,f=m,c[u].hasOverlay=!0;for(var v=0;v<o;v++)r[v]&&n.lines[v].staff&&l.voices.length>=n.lines[v].staff[0].voices.length&&n.lines[v].staff[0].voices.push([{el_type:"note",duration:r[v],rest:{type:"invisible"},startChar:g.startChar,endChar:g.endChar}])}}c[u].hasOverlay&&0===c[u].snip.length&&c[u].snip.push({start:f,len:h.length-f})}for(u=0;u<c.length;u++){var y=c[u];if(y.hasOverlay){y.voice.splice(0,0,{el_type:"stem",direction:"down"}),l.voices.push(y.voice);for(var b=y.snip.length-1;b>=0;b--){var _=y.snip[b];l.voices[u].splice(_.start,_.len),l.voices[u].splice(_.start+1,0,{el_type:"stem",direction:"auto"});var w=i(l.voices[u],_.start);l.voices[u].splice(w,0,{el_type:"stem",direction:"up"})}for(b=0;b<l.voices[l.voices.length-1].length;b++){l.voices[l.voices.length-1][b]=t.clone(l.voices[l.voices.length-1][b]);var k=l.voices[l.voices.length-1][b];"bar"===k.el_type&&k.startEnding&&delete k.startEnding,"bar"===k.el_type&&k.endEnding&&delete k.endEnding}}}}}return e},this.cleanUp=function(r,i,o){this.closeLine(),delete n.runningFonts,n.metaText.tempo&&n.metaText.tempo.bpm&&!n.metaText.tempo.duration&&(n.metaText.tempo.duration=[n.getBeatLength()]);var a,s,l,c=!1;for(a=0;a<n.lines.length;a++)if(void 0!==n.lines[a].staff){var u=!1;for(s=0;s<n.lines[a].staff.length;s++)if(void 0===n.lines[a].staff[s])c=!0,n.lines[a].staff[s]=null;else for(l=0;l<n.lines[a].staff[s].voices.length;l++)void 0===n.lines[a].staff[s].voices[l]?n.lines[a].staff[s].voices[l]=[]:this.containsNotes(n.lines[a].staff[s].voices[l])&&(u=!0);u||(n.lines[a]=null,c=!0)}if(c&&(n.lines=n.lines.filter((function(e){return!!e})),n.lines.forEach((function(e){e.staff&&(e.staff=e.staff.filter((function(e){return!!e})))}))),r)for(;f(n.lines,r););if(i){for(c=!1,a=0;a<n.lines.length;a++)if(void 0!==n.lines[a].staff)for(s=0;s<n.lines[a].staff.length;s++){var h=!1;for(l=0;l<n.lines[a].staff[s].voices.length;l++)this.containsNotesStrict(n.lines[a].staff[s].voices[l])&&(h=!0);h||(c=!0,n.lines[a].staff[s]=null)}c&&n.lines.forEach((function(e){e.staff&&(e.staff=e.staff.filter((function(e){return!!e})))}))}for(function(e){for(var t=!0,n=0;n<e.length;n++){var r=e[n];if(r.staff){for(var i=0;i<r.staff.length;i++){var o=r.staff[i];if(o.title){for(var a=!1,s=0;s<o.title.length;s++)o.title[s]?(o.title[s]=t?o.title[s].name:o.title[s].subname,o.title[s]?a=!0:o.title[s]=""):o.title[s]="";a||delete o.title}}t=!1}}}(n.lines),a=0;a<n.lines.length;a++)if(n.lines[a].staff)for(s=0;s<n.lines[a].staff.length;s++)delete n.lines[a].staff[s].workingClef;for(;this.resolveOverlays(););function d(e,t,n){var r;o[t]||(o[t]=[]),o[t][n]||(o[t][n]=[]);for(var i=function(e,i,a){if(void 0===o[t][n][a]){for(r=0;r<o[t][n].length;r++)if(void 0!==o[t][n][r]){a=r;break}if(void 0===o[t][n][a]){var s=100*a+1;e.endSlur.forEach((function(e){s===e&&--s})),o[t][n][a]=[s]}}for(var l,c=0;c<i;c++)l=o[t][n][a].pop(),e.endSlur.push(l);return 0===o[t][n][a].length&&delete o[t][n][a],l},a=function(e,r,i,a){e.startSlur=[],void 0===o[t][n][i]&&(o[t][n][i]=[]);for(var s=100*i+1,l=0;l<r;l++)a&&(a.forEach((function(e){s===e&&++s})),a.forEach((function(e){s===e&&++s})),a.forEach((function(e){s===e&&++s}))),o[t][n][i].forEach((function(e){s===e&&++s})),o[t][n][i].forEach((function(e){s===e&&++s})),o[t][n][i].push(s),e.startSlur.push({label:s}),e.dottedSlur&&(e.startSlur[e.startSlur.length-1].style="dotted",delete e.dottedSlur),s++},s=0;s<e.length;s++){var l=e[s];if("note"===l.el_type){if(l.gracenotes)for(var c=0;c<l.gracenotes.length;c++){if(l.gracenotes[c].endSlur){var u=l.gracenotes[c].endSlur;l.gracenotes[c].endSlur=[];for(var h=0;h<u;h++)i(l.gracenotes[c],1,20)}l.gracenotes[c].startSlur&&(r=l.gracenotes[c].startSlur,a(l.gracenotes[c],r,20))}if(l.endSlur&&(r=l.endSlur,l.endSlur=[],i(l,r,0)),l.startSlur&&a(l,r=l.startSlur,0),l.pitches){for(var d=[],p=0;p<l.pitches.length;p++)if(l.pitches[p].endSlur){var f=l.pitches[p].endSlur;l.pitches[p].endSlur=[];for(var m=0;m<f;m++){var g=i(l.pitches[p],1,p+1);d.push(g)}}for(p=0;p<l.pitches.length;p++)l.pitches[p].startSlur&&(r=l.pitches[p].startSlur,a(l.pitches[p],r,p+1,d));l.gracenotes&&l.pitches[0].endSlur&&100===l.pitches[0].endSlur[0]&&l.pitches[0].startSlur&&(l.gracenotes[0].endSlur?l.gracenotes[0].endSlur.push(l.pitches[0].startSlur[0].label):l.gracenotes[0].endSlur=[l.pitches[0].startSlur[0].label],1===l.pitches[0].endSlur.length?delete l.pitches[0].endSlur:100===l.pitches[0].endSlur[0]?l.pitches[0].endSlur.shift():100===l.pitches[0].endSlur[l.pitches[0].endSlur.length-1]&&l.pitches[0].endSlur.pop(),1===o[t][n][1].length?delete o[t][n][1]:o[t][n][1].pop())}}}}function p(t){e.fixClef(t)}function f(e,n){for(a=0;a<e.length;a++)if(void 0!==e[a].staff)for(s=0;s<e[a].staff.length;s++){var r=[];for(l=0;l<e[a].staff[s].voices.length;l++)for(var i=e[a].staff[s].voices[l],o=0,c=0;c<i.length;c++)if("bar"===i[c].el_type){if(++o>=n&&c<i.length-1){var u=m(e,a);if(!u){var h=JSON.parse(JSON.stringify(e[a]));e.push(t.clone(h)),u=e[e.length-1];for(var d=0;d<u.staff.length;d++)for(var p=0;p<u.staff[d].voices.length;p++)u.staff[d].voices[p]=[]}var f=c+1,g=e[a].staff[s].voices[l].slice(f);return e[a].staff[s].voices[l]=e[a].staff[s].voices[l].slice(0,f),u.staff[s].voices[l]=r.concat(g.concat(u.staff[s].voices[l])),!0}}else i[c].duration||r.push(i[c])}return!1}function m(e,t){for(t++;e.length>t;){if(e[t].staff)return e[t];t++}return null}for(n.lineNum=0;n.lineNum<n.lines.length;n.lineNum++){var g=n.lines[n.lineNum].staff;if(g)for(n.staffNum=0;n.staffNum<g.length;n.staffNum++)for(g[n.staffNum].clef&&p(g[n.staffNum].clef),n.voiceNum=0;n.voiceNum<g[n.staffNum].voices.length;n.voiceNum++){var v=g[n.staffNum].voices[n.voiceNum];d(v,n.staffNum,n.voiceNum);for(var y=0;y<v.length;y++)"clef"===v[y].el_type&&p(v[y]);if(v.length>0&&v[v.length-1].barNumber){var b=m(n.lines,n.lineNum);b&&(b.staff[0].barNumber=v[v.length-1].barNumber),delete v[v.length-1].barNumber}}}return delete n.staffNum,delete n.voiceNum,delete n.lineNum,delete n.potentialStartBeam,delete n.potentialEndBeam,delete n.vskipPending,o},n.reset(),this.getLastNote=function(){if(n.lines[n.lineNum]&&n.lines[n.lineNum].staff&&n.lines[n.lineNum].staff[n.staffNum]&&n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum])for(var e=n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum].length-1;e>=0;e--){var t=n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum][e];if("note"===t.el_type)return t}return null},this.addTieToLastNote=function(e){var t=this.getLastNote();return!!(t&&t.pitches&&t.pitches.length>0)&&(t.pitches[0].startTie={},e&&(t.pitches[0].startTie.style="dotted"),!0)},this.getDuration=function(e){return e.duration?e.duration:0},this.closeLine=function(){n.potentialStartBeam&&n.potentialEndBeam&&(n.potentialStartBeam.startBeam=!0,n.potentialEndBeam.endBeam=!0),delete n.potentialStartBeam,delete n.potentialEndBeam},this.appendElement=function(e,t,i,o){var a=n;o.el_type=e,null!==t&&(o.startChar=t),null!==i&&(o.endChar=i);var s=function(){void 0!==a.potentialStartBeam&&void 0!==a.potentialEndBeam&&(a.potentialStartBeam.startBeam=!0,a.potentialEndBeam.endBeam=!0),delete a.potentialStartBeam,delete a.potentialEndBeam};"note"===e?r.getDuration(o)>=.25||o.force_end_beam_last&&void 0!==a.potentialStartBeam?s():o.end_beam&&void 0!==a.potentialStartBeam?void 0===o.rest?(a.potentialStartBeam.startBeam=!0,o.endBeam=!0,delete a.potentialStartBeam,delete a.potentialEndBeam):s():void 0===o.rest&&(void 0===a.potentialStartBeam?o.end_beam||(a.potentialStartBeam=o,delete a.potentialEndBeam):a.potentialEndBeam=o):s(),delete o.end_beam,delete o.force_end_beam_last,function(e){var t=a.lines[a.lineNum].staff[a.staffNum];if(t){if(void 0!==e.pitches){var n=t.workingClef.verticalPos;e.pitches.forEach((function(e){e.verticalPos=e.pitch-n}))}if(void 0!==e.gracenotes){var r=t.workingClef.verticalPos;e.gracenotes.forEach((function(e){e.verticalPos=e.pitch-r}))}t.voices[a.voiceNum].push(e)}}(o)},this.appendStartingElement=function(e,r,i,o){var a;this.closeLine(),"key"===e&&(a=o.impliedNaturals,delete o.impliedNaturals,delete o.explicitAccidentals);var s=t.clone(o);if(n.lines[n.lineNum]&&n.lines[n.lineNum].staff){n.lines[n.lineNum].staff.length<=n.staffNum&&(n.lines[n.lineNum].staff[n.staffNum]={},n.lines[n.lineNum].staff[n.staffNum].clef=t.clone(n.lines[n.lineNum].staff[0].clef),n.lines[n.lineNum].staff[n.staffNum].key=t.clone(n.lines[n.lineNum].staff[0].key),n.lines[n.lineNum].staff[0].meter&&(n.lines[n.lineNum].staff[n.staffNum].meter=t.clone(n.lines[n.lineNum].staff[0].meter)),n.lines[n.lineNum].staff[n.staffNum].workingClef=t.clone(n.lines[n.lineNum].staff[0].workingClef),n.lines[n.lineNum].staff[n.staffNum].voices=[[]]),"clef"===e&&(n.lines[n.lineNum].staff[n.staffNum].workingClef=s);for(var l=n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum],c=0;c<l.length;c++){if("note"===l[c].el_type||"bar"===l[c].el_type)return s.el_type=e,s.startChar=r,s.endChar=i,a&&(s.accidentals=a.concat(s.accidentals)),void l.push(s);if(l[c].el_type===e)return s.el_type=e,s.startChar=r,s.endChar=i,a&&(s.accidentals=a.concat(s.accidentals)),void(l[c]=s)}n.lines[n.lineNum].staff[n.staffNum][e]=o}},this.pushLine=function(e){n.vskipPending&&(e.vskip=n.vskipPending,delete n.vskipPending),n.lines.push(e)},this.addSubtitle=function(e,t){this.pushLine({subtitle:{text:e,startChar:t.startChar,endChar:t.endChar}})},this.addSpacing=function(e){n.vskipPending=e},this.addNewPage=function(e){this.pushLine({newpage:e})},this.addSeparator=function(e,t,n,r){this.pushLine({separator:{spaceAbove:Math.round(e),spaceBelow:Math.round(t),lineLength:Math.round(n),startChar:r.startChar,endChar:r.endChar}})},this.addText=function(e,t){this.pushLine({text:{text:e,startChar:t.startChar,endChar:t.endChar}})},this.addCentered=function(e){this.pushLine({text:[{text:e,center:!0}]})},this.containsNotes=function(e){for(var t=0;t<e.length;t++)if("note"===e[t].el_type||"bar"===e[t].el_type)return!0;return!1},this.containsNotesStrict=function(e){for(var t=0;t<e.length;t++)if("note"===e[t].el_type&&(void 0===e[t].rest||void 0!==e[t].chord))return!0;return!1},this.changeVoiceScale=function(e){r.appendElement("scale",null,null,{size:e})},this.changeVoiceColor=function(e){r.appendElement("color",null,null,{color:e})},this.startNewLine=function(e){var t=n;this.closeLine();var i,o=function(e){var n=t.lines[t.lineNum].staff[t.staffNum];if(n.voices[t.voiceNum]=[],n.title||(n.title=[]),n.title[t.voiceNum]={name:e.name,subname:e.subname},e.style&&r.appendElement("style",null,null,{head:e.style}),e.stem)r.appendElement("stem",null,null,{direction:e.stem});else if(t.voiceNum>0){if(void 0!==n.voices[0]){for(var i=!1,o=0;o<n.voices[0].length;o++)"stem"===n.voices[0].el_type&&(i=!0);i||n.voices[0].splice(0,0,{el_type:"stem",direction:"up"})}r.appendElement("stem",null,null,{direction:"down"})}e.scale&&r.appendElement("scale",null,null,{size:e.scale}),e.color&&r.appendElement("color",null,null,{color:e.color})},a=function(e){e.key&&e.key.impliedNaturals&&(e.key.accidentals=e.key.accidentals.concat(e.key.impliedNaturals),delete e.key.impliedNaturals),t.lines[t.lineNum].staff[t.staffNum]={voices:[],clef:e.clef,key:e.key,workingClef:e.clef},void 0!==e.stafflines&&(t.lines[t.lineNum].staff[t.staffNum].clef.stafflines=e.stafflines,t.lines[t.lineNum].staff[t.staffNum].workingClef.stafflines=e.stafflines),e.staffscale&&(t.lines[t.lineNum].staff[t.staffNum].staffscale=e.staffscale),e.annotationfont&&r.setLineFont("annotationfont",e.annotationfont),e.gchordfont&&r.setLineFont("gchordfont",e.gchordfont),e.tripletfont&&r.setLineFont("tripletfont",e.tripletfont),e.vocalfont&&r.setLineFont("vocalfont",e.vocalfont),e.bracket&&(t.lines[t.lineNum].staff[t.staffNum].bracket=e.bracket),e.brace&&(t.lines[t.lineNum].staff[t.staffNum].brace=e.brace),e.connectBarLines&&(t.lines[t.lineNum].staff[t.staffNum].connectBarLines=e.connectBarLines),e.barNumber&&(t.lines[t.lineNum].staff[t.staffNum].barNumber=e.barNumber),o(e),e.part&&r.appendElement("part",e.part.startChar,e.part.endChar,{title:e.part.title}),void 0!==e.meter&&(t.lines[t.lineNum].staff[t.staffNum].meter=e.meter),t.vskipPending&&(t.lines[t.lineNum].vskip=t.vskipPending,delete t.vskipPending)};void 0===n.lines[n.lineNum]?(i=e,t.lines[t.lineNum]={staff:[]},a(i)):void 0===n.lines[n.lineNum].staff?(n.lineNum++,this.startNewLine(e)):void 0===n.lines[n.lineNum].staff[n.staffNum]?a(e):void 0===n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum]?o(e):this.containsNotes(n.lines[n.lineNum].staff[n.staffNum].voices[n.voiceNum])?(n.lineNum++,this.startNewLine(e)):e.part&&r.appendElement("part",e.part.startChar,e.part.endChar,{title:e.part.title})},this.setRunningFont=function(e,t){n.runningFonts[e]=t},this.setLineFont=function(e,t){if(n.runningFonts[e]){for(var r=!1,i=Object.keys(t),o=0;o<i.length;o++)n.runningFonts[e][i[o]]!==t[i[o]]&&(r=!0);r&&(n.lines[n.lineNum].staff[n.staffNum][e]=t)}n.runningFonts[e]=t},this.setBarNumberImmediate=function(e){var t=this.getCurrentVoice();if(t&&t.length>0){var n=t[t.length-1];if("bar"!==n.el_type)return e-1;void 0!==n.barNumber&&(n.barNumber=e)}return e},this.hasBeginMusic=function(){for(var e=0;e<n.lines.length;e++)if(n.lines[e].staff)return!0;return!1},this.isFirstLine=function(e){for(var t=e-1;t>=0;t--)if(void 0!==n.lines[t].staff)return!1;return!0},this.getCurrentVoice=function(){var e=n.lines[n.lineNum];if(!e)return null;var t=e.staff[n.staffNum];return t&&void 0!==t.voices[n.voiceNum]?t.voices[n.voiceNum]:null},this.setCurrentVoice=function(e,t){n.staffNum=e,n.voiceNum=t;for(var r=0;r<n.lines.length;r++)if(n.lines[r].staff&&(void 0===n.lines[r].staff[e]||void 0===n.lines[r].staff[e].voices[t]||!this.containsNotes(n.lines[r].staff[e].voices[t])))return void(n.lineNum=r);n.lineNum=r},this.addMetaText=function(e,t,r){void 0===n.metaText[e]?(n.metaText[e]=t,n.metaTextInfo[e]=r):(n.metaText[e]+="\n"+t,n.metaTextInfo[e].endChar=r.endChar)},this.addMetaTextArray=function(e,t,r){void 0===n.metaText[e]?(n.metaText[e]=[t],n.metaTextInfo[e]=r):(n.metaText[e].push(t),n.metaTextInfo[e].endChar=r.endChar)},this.addMetaTextObj=function(e,t,r){n.metaText[e]=t,n.metaTextInfo[e]=r}},ma}();return va=function(){var l,c=new a,u=new s(c),h="",d="";function p(e,t,n){e.positioning||(e.positioning={}),e.positioning[t]=n}function f(e,t,n){e.fonts||(e.fonts={}),e.fonts[t]=n}this.getTune=function(){var e={formatting:c.formatting,lines:c.lines,media:c.media,metaText:c.metaText,metaTextInfo:c.metaTextInfo,version:c.version,addElementToEvents:c.addElementToEvents,addUsefulCallbackInfo:c.addUsefulCallbackInfo,getTotalTime:c.getTotalTime,getTotalBeats:c.getTotalBeats,getBarLength:c.getBarLength,getBeatLength:c.getBeatLength,getBeatsPerMeasure:c.getBeatsPerMeasure,getBpm:c.getBpm,getMeter:c.getMeter,getMeterFraction:c.getMeterFraction,getPickupLength:c.getPickupLength,getKeySignature:c.getKeySignature,getElementFromChar:c.getElementFromChar,makeVoicesArray:c.makeVoicesArray,millisecondsPerMeasure:c.millisecondsPerMeasure,setupEvents:c.setupEvents,setTiming:c.setTiming,setUpAudio:c.setUpAudio,deline:c.deline};return c.lineBreaks&&(e.lineBreaks=c.lineBreaks),c.visualTranspose&&(e.visualTranspose=c.visualTranspose),e};var m,g,v={reset:function(){for(var e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&delete this[e];this.iChar=0,this.key={accidentals:[],root:"none",acc:"",mode:""},this.meter=null,this.origMeter=null,this.hasMainTitle=!1,this.default_length=.125,this.clef={type:"treble",verticalPos:0},this.octave=0,this.next_note_duration=0,this.start_new_line=!0,this.is_in_header=!0,this.partForNextLine={},this.tempoForNextLine=[],this.havent_set_length=!0,this.voices={},this.staves=[],this.macros={},this.currBarNumber=1,this.barCounter={},this.ignoredDecorations=[],this.score_is_present=!1,this.inEnding=!1,this.inTie=[],this.inTieChord={},this.vocalPosition="auto",this.dynamicPosition="auto",this.chordPosition="auto",this.ornamentPosition="auto",this.volumePosition="auto",this.openSlurs=[],this.freegchord=!1,this.endingHoldOver={}},differentFont:function(e,t){return this[e].decoration!==t[e].decoration||(this[e].face!==t[e].face||(this[e].size!==t[e].size||(this[e].style!==t[e].style||this[e].weight!==t[e].weight)))},addFormattingOptions:function(e,t,n){"note"===n?("auto"!==this.vocalPosition&&p(e,"vocalPosition",this.vocalPosition),"auto"!==this.dynamicPosition&&p(e,"dynamicPosition",this.dynamicPosition),"auto"!==this.chordPosition&&p(e,"chordPosition",this.chordPosition),"auto"!==this.ornamentPosition&&p(e,"ornamentPosition",this.ornamentPosition),"auto"!==this.volumePosition&&p(e,"volumePosition",this.volumePosition),this.differentFont("annotationfont",t)&&f(e,"annotationfont",this.annotationfont),this.differentFont("gchordfont",t)&&f(e,"gchordfont",this.gchordfont),this.differentFont("vocalfont",t)&&f(e,"vocalfont",this.vocalfont),this.differentFont("tripletfont",t)&&f(e,"tripletfont",this.tripletfont)):"bar"===n&&("auto"!==this.dynamicPosition&&p(e,"dynamicPosition",this.dynamicPosition),"auto"!==this.chordPosition&&p(e,"chordPosition",this.chordPosition),"auto"!==this.ornamentPosition&&p(e,"ornamentPosition",this.ornamentPosition),"auto"!==this.volumePosition&&p(e,"volumePosition",this.volumePosition),this.differentFont("measurefont",t)&&f(e,"measurefont",this.measurefont),this.differentFont("repeatfont",t)&&f(e,"repeatfont",this.repeatfont))},duplicateStartEndingHoldOvers:function(){this.endingHoldOver={inTie:[],inTieChord:{}};for(var e=0;e<this.inTie.length;e++)if(this.endingHoldOver.inTie.push([]),this.inTie[e])for(var t=0;t<this.inTie[e].length;t++)this.endingHoldOver.inTie[e].push(this.inTie[e][t]);for(var n in this.inTieChord)this.inTieChord.hasOwnProperty(n)&&(this.endingHoldOver.inTieChord[n]=this.inTieChord[n])},restoreStartEndingHoldOvers:function(){if(this.endingHoldOver.inTie){this.inTie=[],this.inTieChord={};for(var e=0;e<this.endingHoldOver.inTie.length;e++){this.inTie.push([]);for(var t=0;t<this.endingHoldOver.inTie[e].length;t++)this.inTie[e].push(this.endingHoldOver.inTie[e][t])}for(var n in this.endingHoldOver.inTieChord)this.endingHoldOver.inTieChord.hasOwnProperty(n)&&(this.inTieChord[n]=this.endingHoldOver.inTieChord[n])}}},y=function(e){var t=e.replace(/\x12/g," ");return(t=(t=t.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")},b=function(e,t,n){t||(t=" ");var r=t[n];" "!==r&&r||(r="SPACE");var i,o=y(t.substring(n-64,n))+'<span style="text-decoration:underline;font-size:1.3em;font-weight:bold;">'+r+"</span>"+y(t.substring(n+1).substring(0,64));!function(e){v.warnings||(v.warnings=[]),v.warnings.push(e)}("Music Line:"+l.lineIndex+":"+(n+1)+": "+e+":  "+o),i={message:e,line:t,startChar:v.iChar+n,column:n},v.warningObjects||(v.warningObjects=[]),v.warningObjects.push(i)};this.getWarnings=function(){return v.warnings},this.getWarningObjects=function(){return v.warningObjects};var _=function(t,n){if(n.indexOf("")>=0)h+=n;else if(n=h+n,h="",t){"-"!==(n=e.strip(n))[n.length-1]&&(n+=" ");for(var r=[],i=0,o=!1,a=function(t){var a=e.strip(n.substring(i,t));if(a=a.replace(/\\([-_*|~])/g,"$1"),i=t+1,a.length>0){o&&(a=a.replace(/~/g," "));var s=n[t];return"_"!==s&&"-"!==s&&(s=" "),r.push({syllable:l.translateString(a),divider:s}),o=!1,!0}return!1},s=!1,c=0;c<n.length;c++){switch(n[c]){case" ":case"":a(c);break;case"-":!s&&!a(c)&&r.length>0&&(e.last(r).divider="-",r.push({skip:!0,to:"next"}));break;case"_":s||(a(c),r.push({skip:!0,to:"slur"}));break;case"*":s||(a(c),r.push({skip:!0,to:"next"}));break;case"|":s||(a(c),r.push({skip:!0,to:"bar"}));break;case"~":s||(o=!0)}s="\\"===n[c]}t.forEach((function(e){if(0!==r.length)if(r[0].skip){switch(r[0].to){case"next":case"slur":"note"===e.el_type&&null!==e.pitches&&r.shift();break;case"bar":"bar"===e.el_type&&r.shift()}"bar"!==e.el_type&&(void 0===e.lyric?e.lyric=[{syllable:"",divider:" "}]:e.lyric.push({syllable:"",divider:" "}))}else if("note"===e.el_type&&void 0===e.rest){var t=r.shift();t.syllable&&(t.syllable=t.syllable.replace(/ +/g,"")),void 0===e.lyric?e.lyric=[t]:e.lyric.push(t)}}))}else b("Can't add words before the first line of music",t,0)},w=function(t,n){if(n.indexOf("")>=0)d+=n;else if(n=d+n,d="",t){"-"!==(n=e.strip(n))[n.length-1]&&(n+=" ");for(var r=[],i=0,o=!1,a=function(t){var a=e.strip(n.substring(i,t));if(i=t+1,a.length>0){o&&(a=a.replace(/~/g," "));var s=n[t];return"_"!==s&&"-"!==s&&(s=" "),r.push({syllable:l.translateString(a),divider:s}),o=!1,!0}return!1},s=0;s<n.length;s++)switch(n[s]){case" ":case"":a(s);break;case"-":!a(s)&&r.length>0&&(e.last(r).divider="-",r.push({skip:!0,to:"next"}));break;case"_":a(s),r.push({skip:!0,to:"slur"});break;case"*":a(s),r.push({skip:!0,to:"next"});break;case"|":a(s),r.push({skip:!0,to:"bar"});break;case"~":o=!0}t.forEach((function(e){if(0!==r.length)if(r[0].skip)switch(r[0].to){case"next":case"slur":"note"===e.el_type&&null!==e.pitches&&r.shift();break;case"bar":"bar"===e.el_type&&r.shift()}else if("note"===e.el_type&&void 0===e.rest){var t=r.shift();void 0===e.lyric?e.lyric=[t]:e.lyric.push(t)}}))}else b("Can't add symbols before the first line of music",t,0)},k=function(n){if(e.startsWith(n,"%%")){var r=t.addDirective(n.substring(2));r&&b(r,n,2)}else{var i=n.indexOf("%");if(i>=0&&(n=n.substring(0,i)),0!==(n=n.replace(/\s+$/,"")).length)if(h)_(u.getCurrentVoice(),n.substring(2));else if(d)w(u.getCurrentVoice(),n.substring(2));else if(n.length<2||":"!==n[1]||g.lineContinuation)g.parseMusic(n);else{var o=m.parseHeader(n);o.regular&&g.parseMusic(n),o.newline&&g.startNewLine(),o.words&&_(u.getCurrentVoice(),n.substring(2)),o.symbols&&w(u.getCurrentVoice(),n.substring(2))}}};function x(t,n){t.push({el_type:"hint"});for(var r=0;r<n.length;r++){var i=n[r],o=e.clone(i);if(t.push(o),"bar"===i.el_type)return}}function C(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(i)for(var o=0;o<i.voices.length;o++){var a=i.voices[o],s=r.voices[o];s&&x(s,a)}}}this.parse=function(a,s,p){s||(s={}),p||(p=0),c.reset();var f=(a=a.replace(/\r\n?/g,"\n")+"\n").split("\n\\");if(f.length>1){for(var y=1;y<f.length;y++)for(;f[y].length>0&&"\n"!==f[y][0];)f[y]=f[y].substr(1),f[y-1]+=" ";a=f.join("  ")}var x=(a=a.replace(/\\([ \t]*)(%.*)*\n/g,(function(e,t,n){return t+""+(n?Array(n.length+1).join(" "):"")+"\n"}))).split("\n");0===e.last(x).length&&x.pop(),l=new i(x,v),m=new n(l,b,v,c,u),g=new r(l,b,v,c,u,m),s.print&&(c.media="print"),v.reset(),v.iChar=p,s.visualTranspose?(v.globalTranspose=parseInt(s.visualTranspose),0===v.globalTranspose?v.globalTranspose=void 0:u.setVisualTranspose(s.visualTranspose)):v.globalTranspose=void 0,s.lineBreaks&&(v.lineBreaks=s.lineBreaks),m.reset(l,b,v,c);try{s.format&&t.globalFormatting(s.format);for(var S=l.nextLine();S;){if(s.header_only&&!1===v.is_in_header)throw"normal_abort";if(s.stop_on_warning&&v.warnings)throw"normal_abort";var T=v.is_in_header;k(S),T&&!v.is_in_header&&(u.setRunningFont("annotationfont",v.annotationfont),u.setRunningFont("gchordfont",v.gchordfont),u.setRunningFont("tripletfont",v.tripletfont),u.setRunningFont("vocalfont",v.vocalfont)),S=l.nextLine()}h&&_(u.getCurrentVoice(),""),d&&w(u.getCurrentVoice(),""),v.openSlurs=u.cleanUp(v.barsperstaff,v.staffnonote,v.openSlurs)}catch(D){if("normal_abort"!==D)throw D}var E=792,I=612;switch(v.papersize){
//case "letter": ph = 11*72; pl = 8.5*72; break;
case"legal":E=1008,I=612;break;case"A4":E=842.4,I=597.6}if(v.landscape){var A=E;E=I,I=A}c.formatting.pagewidth||(c.formatting.pagewidth=I),c.formatting.pageheight||(c.formatting.pageheight=E),s.hint_measures&&function(){for(var e=0;e<c.lines.length;e++){var t=c.lines[e].staff;if(t){for(var n=e+1;n<c.lines.length&&void 0===c.lines[n].staff;)n++;n<c.lines.length&&C(t,c.lines[n].staff)}}}(),o.wrapLines(c,v.lineBreaks,v.barNumbers)}},va}function nu(){if(ka)return wa;function e(e,t){this.numLines=e,this.lineSpace=t,this.verticalSize=this.numLines*this.lineSpace;this.bar={pitch:3,pitch2:t*e,height:5}}return ka=1,e.prototype.bypass=function(e){var t=e.staffGroup.voices;return!!(t.length>0&&t[0].isPercussion)},e.prototype.setRelative=function(e,t,n){switch(e.type){case"bar":t.pitch=this.bar.pitch,t.pitch2=this.bar.pitch2,t.height=this.height;break;case"symbol":var r=this.bar.pitch2/2;if("dots.dot"==e.name)return n?(t.pitch=r,!1):(t.pitch=r+this.lineSpace,!0)}return n},wa=e}function ru(){if(Ca)return xa;function e(e,t,n){this.tune=e,this.params=n,this.tuneNumber=t,this.inError=!1}return Ca=1,e.prototype.setError=function(e){var t=this.tune;e&&(this.error=e,this.inError=!0,t.warnings?t.warnings.push(e):t.warnings=[e])},xa=e}function iu(){if(Ta)return Sa;Ta=1;var e=function(e,t){this.children=[],this.beams=[],this.otherchildren=[],this.w=0,this.duplicate=!1,this.voicenumber=e,this.voicetotal=t,this.bottom=7,this.top=7,this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return e.prototype.addChild=function(e){if("bar"===e.type){for(var t=!0,n=0;t&&n<this.children.length;n++)this.children[n].type.indexOf("staff-extra")<0&&"tempo"!==this.children[n].type&&(t=!1);t||(this.beams.push("bar"),this.otherchildren.push("bar"))}this.children[this.children.length]=e,this.setRange(e)},e.prototype.setLimit=function(e,t){var n=t.specialY;n||(n=t),n[e]&&(this.specialY[e]?this.specialY[e]=Math.max(this.specialY[e],n[e]):this.specialY[e]=n[e])},e.prototype.adjustRange=function(e){void 0!==e.bottom&&(this.bottom=Math.min(this.bottom,e.bottom)),void 0!==e.top&&(this.top=Math.max(this.top,e.top))},e.prototype.setRange=function(e){this.adjustRange(e),this.setLimit("tempoHeightAbove",e),this.setLimit("partHeightAbove",e),this.setLimit("volumeHeightAbove",e),this.setLimit("dynamicHeightAbove",e),this.setLimit("endingHeightAbove",e),this.setLimit("chordHeightAbove",e),this.setLimit("lyricHeightAbove",e),this.setLimit("lyricHeightBelow",e),this.setLimit("chordHeightBelow",e),this.setLimit("volumeHeightBelow",e),this.setLimit("dynamicHeightBelow",e)},e.prototype.addOther=function(e){this.otherchildren.push(e),this.setRange(e)},e.prototype.addBeam=function(e){this.beams.push(e)},e.prototype.setWidth=function(e){this.w=e},Sa=e}function ou(){if(Ia)return Ea;Ia=1;return Ea=function(e,t,n,r){if(e)for(var i=0;i<e.length;i++){var o=e[i],a=o.getAttribute("highlight");a||(a="fill"),o.setAttribute(a,r);var s=o.getAttribute("class");s||(s=""),s=(s=s.replace(n,"")).replace(t,""),t.length>0&&(s.length>0&&" "!==s[s.length-1]&&(s+=" "),s+=t),o.setAttribute("class",s)}},Ea}function au(){if(Da)return Aa;Da=1;var e=ou();return Aa=function(t,n){void 0===t&&(t="abcjs-note_selected"),void 0===n&&(n="#ff0000"),e(this.elemset,t,"",n)}}function su(){if(La)return Ba;La=1;var e=ou();return Ba=function(t,n){void 0===t&&(t="abcjs-note_selected"),void 0===n&&(n="#000000"),e(this.elemset,"",t,n)}}function lu(){if(Fa)return Ma;Fa=1;var e=au(),t=su(),n=function(e,t,n,r,i,o){o||(o={}),this.tuneNumber=i,this.abcelem=e,this.duration=t,this.durationClass=o.durationClassOveride?o.durationClassOveride:this.duration,this.minspacing=n||0,this.x=0,this.children=[],this.heads=[],this.extra=[],this.extraw=0,this.w=0,this.right=[],this.invisible=!1,this.bottom=void 0,this.top=void 0,this.type=r,this.fixed={w:0,t:void 0,b:void 0},this.specialY={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}};return n.prototype.getFixedCoords=function(){return{x:this.x,w:this.fixed.w,t:this.fixed.t,b:this.fixed.b}},n.prototype.addExtra=function(e){this.fixed.w=Math.max(this.fixed.w,e.dx+e.w),void 0===this.fixed.t?this.fixed.t=e.top:this.fixed.t=Math.max(this.fixed.t,e.top),void 0===this.fixed.b?this.fixed.b=e.bottom:this.fixed.b=Math.min(this.fixed.b,e.bottom),e.dx<this.extraw&&(this.extraw=e.dx),this.extra[this.extra.length]=e,this._addChild(e)},n.prototype.addHead=function(e){e.dx<this.extraw&&(this.extraw=e.dx),this.heads[this.heads.length]=e,this.addRight(e)},n.prototype.addRight=function(e){this.fixed.w=Math.max(this.fixed.w,e.dx+e.w),void 0!==e.top&&(void 0===this.fixed.t?this.fixed.t=e.top:this.fixed.t=Math.max(this.fixed.t,e.top)),void 0!==e.bottom&&(void 0===this.fixed.b?this.fixed.b=e.bottom:this.fixed.b=Math.min(this.fixed.b,e.bottom)),e.dx+e.w>this.w&&(this.w=e.dx+e.w),this.right[this.right.length]=e,this._addChild(e)},n.prototype.addFixed=function(e){this._addChild(e)},n.prototype.addFixedX=function(e){this._addChild(e)},n.prototype.addCentered=function(e){var t=e.w/2;-t<this.extraw&&(this.extraw=-t),this.extra[this.extra.length]=e,e.dx+t>this.w&&(this.w=e.dx+t),this.right[this.right.length]=e,this._addChild(e)},n.prototype.setLimit=function(e,t){t[e]&&(this.specialY[e]?this.specialY[e]=Math.max(this.specialY[e],t[e]):this.specialY[e]=t[e])},n.prototype._addChild=function(e){e.parent=this,this.children[this.children.length]=e,this.pushTop(e.top),this.pushBottom(e.bottom),this.setLimit("tempoHeightAbove",e),this.setLimit("partHeightAbove",e),this.setLimit("volumeHeightAbove",e),this.setLimit("dynamicHeightAbove",e),this.setLimit("endingHeightAbove",e),this.setLimit("chordHeightAbove",e),this.setLimit("lyricHeightAbove",e),this.setLimit("lyricHeightBelow",e),this.setLimit("chordHeightBelow",e),this.setLimit("volumeHeightBelow",e),this.setLimit("dynamicHeightBelow",e)},n.prototype.pushTop=function(e){void 0!==e&&(void 0===this.top?this.top=e:this.top=Math.max(e,this.top))},n.prototype.pushBottom=function(e){void 0!==e&&(void 0===this.bottom?this.bottom=e:this.bottom=Math.min(e,this.bottom))},n.prototype.setX=function(e){this.x=e;for(var t=0;t<this.children.length;t++)this.children[t].setX(e)},n.prototype.center=function(e,t){var n=(t.x-e.x)/2+e.x;this.x=n-this.w/2;for(var r=0;r<this.children.length;r++)this.children[r].setX(this.x)},n.prototype.setHint=function(){this.hint=!0},n.prototype.highlight=function(t,n){e.bind(this)(t,n)},n.prototype.unhighlight=function(e,n){t.bind(this)(e,n)},Ma=n}function cu(){if(Pa)return Oa;Pa=1;var e=function(e,t,n,r,i){switch(i=i||{},this.x=0,this.c=e,this.dx=t,this.w=n,this.pitch=r,this.scalex=i.scalex||1,this.scaley=i.scaley||1,this.type=i.type||"symbol",this.pitch2=i.pitch2,this.linewidth=i.linewidth,this.klass=i.klass,this.anchor=i.anchor?i.anchor:"middle",this.top=r,void 0!==this.pitch2&&this.pitch2>this.top&&(this.top=this.pitch2),this.bottom=r,void 0!==this.pitch2&&this.pitch2<this.bottom&&(this.bottom=this.pitch2),i.thickness&&(this.top+=i.thickness/2,this.bottom-=i.thickness/2),i.stemHeight&&(i.stemHeight>0?this.top+=i.stemHeight:this.bottom+=i.stemHeight),i.dim&&(this.dim=i.dim),i.position&&(this.position=i.position),this.height=i.height?i.height:4,i.top&&(this.top=i.top),i.bottom&&(this.bottom=i.bottom),i.name?this.name=i.name:this.c?this.name=this.c:this.name=this.type,i.realWidth?this.realWidth=i.realWidth:this.realWidth=this.w,this.centerVertically=!1,this.type){case"debug":this.chordHeightAbove=this.height;break;case"lyric":i.position&&"below"===i.position?this.lyricHeightBelow=this.height:this.lyricHeightAbove=this.height;break;case"chord":i.position&&"below"===i.position?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height;break;case"text":void 0===this.pitch?i.position&&"below"===i.position?this.chordHeightBelow=this.height:this.chordHeightAbove=this.height:this.centerVertically=!0;break;case"part":this.partHeightAbove=this.height}};return e.prototype.getChordDim=function(){if("debug"===this.type)return null;if(!this.chordHeightAbove&&!this.chordHeightBelow)return null;var e="chord"===this.type?this.realWidth/2:0,t=this.x-e-0;return{left:t,right:t+this.realWidth+0}},e.prototype.invertLane=function(e){void 0===this.lane&&(this.lane=0),this.lane=e-this.lane-1},e.prototype.putChordInLane=function(e){this.lane=e,this.chordHeightAbove?this.chordHeightAbove=1.25*this.height*this.lane:this.chordHeightBelow=1.25*this.height*this.lane},e.prototype.getLane=function(){return void 0===this.lane?0:this.lane},e.prototype.setX=function(e){this.x=e+this.dx},Oa=e}function uu(){if(Ra)return za;Ra=1;var e=iu(),t=function(){if(ja)return Na;ja=1;var e=lu(),t=cu();function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(Array.isArray(t[n])||null!=(r=t[n])&&r.constructor===Object||(e[n]=t[n]));var r}function r(t){var r=new e("",0,0,"",0);return n(r,t),r.top=0,r.bottom=-1,t.abcelem&&(r.abcelem={},n(r.abcelem,t.abcelem),"note"===r.abcelem.el_type&&(r.abcelem.el_type="tabNumber")),t.cloned=r,r}function i(e,i){var o=r(e);if(i)for(var a=e.children,s=!0,l=0;l<a.length;l++){var c=a[l],u=new t("",0,0,0,"");n(u,c),s=i.tablature.setRelative(c,u,s),o.children.push(u)}return o}function o(n,r,i){var o="tab.tiny",a=7.5;n.isTabBig&&(o="tab.big",a=10);var s=new e({el_type:"tab",icon:o,Ypos:a},0,0,"symbol",0);s.x=r;var l=new t(o,0,0,7.5,"tab");return l.x=i,s.children.push(l),"tab"==s.abcelem.el_type&&(l.pitch=a),s}function a(e){if(e.extra)for(var t=0;t<e.extra.length;t++){var n=e.extra[t];if("lyric"==n.type)return{bottom:n.bottom,height:n.height}}return null}function s(){this.accidentals=null}function l(e,n,r,i,o){var a=i.num;null!=i.note.quarter&&(a=a.toString(),a+=i.note.quarter);var s=e.semantics.stringToPitch(i.str);r.notes.push({num:a,str:i.str,pitch:i.note.emit()});var l=new t(a,0,0,s+.3,{type:"tabNumber"});return l.x=n,l.isGrace=o,l.isAltered=i.note.isAltered,l}function c(e,t){var n=0;if(e.extra)for(var r=0;r<e.extra.length;r++)if(e.extra[r].c.indexOf("noteheads")>=0){if(n===t)return e.extra[r].x+e.extra[r].w/2;n++}return-1}function u(e){if(e.abcelem){var t=e.abcelem;if(t.rest)return t.gracenotes}return null}function h(e,t,n){var r=e.semantics.notesToNumber(t,n);if(r.error)return e._super.setError(r.error),r;if(r.graces&&r.notes){var i=r.notes.length-1;r.notes[i].graces=r.graces}return r}function d(e,t,n,r,i){for(var o=0;o<r.length;o++){var a={el_type:"note",startChar:n.abcelem.startChar,endChar:n.abcelem.endChar,notes:[],grace:!0},s=l(e,c(n,o),a,r[o],!0);t.children.push(s),i.push(a)}}return s.prototype.build=function(e,t,n,s,p,f){var m=function(e){for(var t=0,n=0;n<e.length;n++)e[n].tabNameInfos||t++;return t}(t),g=t[p+s],v=t[m+p+s],y=null,b=null;"clef"!=g.children[0].abcelem.el_type&&"none"!=f&&g.children.splice(0,0,f);for(var _=0;_<g.children.length;_++){var w=g.children[_],k=w.x,x=k;switch(w.isClef&&(v.children.push(o(e,k,x)),w.abcelem.type.indexOf("-8")>=0&&(e.semantics.strings.clefTranspose=-12),w.abcelem.type.indexOf("+8")>=0&&(e.semantics.strings.clefTranspose=12)),w.type){case"staff-extra key-signature":this.accidentals=w.abcelem.accidentals,e.semantics.strings.accidentals=this.accidentals;break;case"bar":e.semantics.strings.measureAccidentals={};var C=!1;_===g.children.length-1&&(C=!0);var S=i(w,e);if(S.abcelem.barNumber){delete S.abcelem.barNumber;for(var T=0;T<S.children.length;T++)if("barNumber"===S.children[T].type){S.children.splice(T,1);break}}S.abcelem.lastBar=C,v.children.push(S),n.push({el_type:w.abcelem.el_type,type:w.abcelem.type,endChar:w.abcelem.endChar,startChar:w.abcelem.startChar,abselem:S});break;case"rest":var E=u(w);if(E){if((y=h(e,null,E)).error)return;O={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[],grace:!0},d(e,I,w,y.graces,n)}break;case"note":var I=r(w);I.x=w.heads[0].x+w.heads[0].w/2,I.lyricDim=a(w);var A=w.abcelem.pitches,D=w.abcelem.gracenotes;if(I.type="tabNumber",(y=h(e,A,D)).error)return;if(y.graces){var B=y.notes.length-1;y.notes[B].graces=y.graces}b={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[]};for(var L=0;L<y.notes.length;L++){var M=y.notes[L];if(M.graces)for(var F=0;F<M.graces.length;F++){var O={el_type:"note",startChar:w.abcelem.startChar,endChar:w.abcelem.endChar,notes:[],grace:!0},P=l(e,c(w,F),O,M.graces[F],!0);I.children.push(P),n.push(O)}var N=l(e,I.x+w.heads[L].dx,b,M,!1);I.children.push(N)}b.notes.length>0&&(b.abselem=I,n.push(b),v.children.push(I))}}},Na=s}(),n=Xc();function r(e,n,r,i){this.renderer=n,this.plugin=e,this.line=r,this.absolutes=new t,this.staffIndex=i,this.tabStaff={clef:{type:"TAB"}},this.tabSize=e.linePitch*e.nbLines}function i(e,t){return!!t[e].isTabStaff&&(e===t.length-1||!t[e+1].isTabStaff)}function o(e,t){for(var n=t;n>=0;n--)if(!e[n].isTabStaff)return n;return-1}function a(e,t){return"clef"===e[t].children[0].abcelem.el_type?null:0==t?"none":e[t-1].children[0]}return r.prototype.doLayout=function(){var t=this.line.staff;if(t){var r=t[0];if(r&&r.clef&&0==r.clef.stafflines)return void this.plugin._super.setError("No tablatures when stafflines=0");t.splice(t.length,0,this.tabStaff)}var s=this.line.staffGroup,l=s.voices,c=function(e){for(var t=0,n=0;n<e.children.length;n++){var r=e.children[n];r.specialY&&r.specialY.lyricHeightBelow>t&&(t=r.specialY.lyricHeightBelow)}return t}(l[0]),u=this.staffIndex,h=s.staffs[u],d=this.tabSize+3-h.bottom-c;h.isTabStaff&&(d=h.top);var p={bottom:-1,isTabStaff:!0,specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0},lines:this.plugin.nbLines,linePitch:this.plugin.linePitch,dy:.15,top:d},f=function(e,t){for(var n=e.staffIndex,r=0,o=0,a=0;;){if(!t[r])return-1;if(t[r].isTabStaff||(a=t[r].voices.length),t[r].isTabStaff){if(o++,i(r,t)&&o<a)return r+1}else if(o=0,r>=n){if(r+1==t.length)return r+1;if(!t[r+1].isTabStaff)return r+1}if(++r>t.length)return-1}}(this,s.staffs);if(-1!==f){p.parentIndex=f-1,s.staffs.splice(f,0,p),s.height+=this.tabSize+3;var m,g,v,y,b,_,w=function(e,t){for(var n=t;n>=0;n--)if(!e[n].isTabStaff)return e[n];return null}(s.staffs,f),k=1;(function(e,t){return 1===function(e){for(var t=0,n=0;n<e.length;n++)e[n].isTabStaff||t++;return t}(e)&&t.voices.length>1})(s.staffs,w)&&(k=w.voices.length),this.tabStaff.voices=[];for(var x=0;x<k;x++){var C=new e(0,0),S=(g=C,v=void 0,y=void 0,b=void 0,_=void 0,v=(m=this).plugin.semantics.strings,y=m.renderer.controller.getTextSize,b=v.tabInfos(m.plugin),_=y.calc(b,"tablabelfont","text instrumentname"),g.tabNameInfos={textSize:_,name:b},_.height/n.STEP);S=Math.max(S,1),s.staffs[this.staffIndex].top+=S,s.height+=S*n.STEP,C.staff=p,l.splice(l.length,0,C);var T=a(l,x+this.staffIndex);this.tabStaff.voices[x]=[],this.absolutes.build(this.plugin,l,this.tabStaff.voices[x],x,this.staffIndex,T)}!function(e){for(var t=0;t<e.length;t++)if(e[t].isTabStaff){var n=o(e,t);e[t].hasStaff=e[n],e[n].hasTab||(e[n].hasTab=[]),e[n].hasTab.push(e[t])}}(s.staffs)}},za=r}function hu(){if($a)return qa;$a=1;var e={__:-2,_:-1,"_/":-.5,"=":0,"":0,"^/":.5,"^":1,"^^":2},t=["C","-","D","-","E","F","-","G","-","A","-","B","c","-","d","-","e","f","-","g","-","a","-","b"];return qa={noteToMidi:function(n){var r=n.match(/([_^\/]*)([ABCDEFGabcdefg])(,*)('*)/);if(r&&5===r.length){var i=e[r[1]];return 48+t.indexOf(r[2])+i+12*(r[4].length-r[3].length)}return 0},midiToNote:function(e){e=parseInt(e,10);var n=Math.floor(e/12),r=e%12,i=t[r];if("-"===i&&(i="^"+t[r-1]),n>4)for(i=i.toLowerCase(),n-=5;n>0;)i+="'",n--;else for(;n<4;)i+=",",n++;return i}}}function du(){if(Ha)return Ua;Ha=1;var{noteToMidi:e,midiToNote:t}=hu();function n(n,r){var i=e(n);r&&(i+=r);var o,a=t(i),s=!1,l=!1,c=null,u=null,h=!1,d=0;n.startsWith("_")?(s=!0,d=-1,"/"==n[1]?(s=!1,u="v",d=0):"_"==n[1]&&(h=!0,d-=1)):n.startsWith("^")?(l=!0,d=1,"/"==n[1]?(l=!1,u="^",d=0):"^"==n[1]&&(h=!0,d+=1)):n.startsWith("=")&&(c=!0,d=0),((o=s||l||null!=u)||c)&&(a=null!=u||h?n.slice(2):n.slice(1));var p=(a.match(/,/g)||[]).length,f=(a.match(/'/g)||[]).length;this.pitch=i,this.pitchAltered=0,this.name=a,this.acc=d,this.isSharp=l,this.isKeySharp=!1,this.isDouble=h,this.isAltered=o,this.isFlat=s,this.isKeyFlat=!1,this.natural=c,this.quarter=u,this.isLower=this.name==this.name.toLowerCase(),this.name=this.name[0].toUpperCase(),this.hasComma=p,this.isQuoted=f}return n.prototype.sameNoteAs=function(e){return e.pitch===this.pitch},n.prototype.isLowerThan=function(e){return e.pitch>this.pitch},n.prototype.checkKeyAccidentals=function(e,t){if(!this.isAltered&&!this.natural)if(t[this.name.toUpperCase()])switch(t[this.name.toUpperCase()]){case"__":return this.acc=-2,void(this.pitchAltered=-2);case"_":return this.acc=-1,void(this.pitchAltered=-1);case"=":return this.acc=0,void(this.pitchAltered=0);case"^":return this.acc=1,void(this.pitchAltered=1);case"^^":return this.acc=2,void(this.pitchAltered=2)}else if(e)for(var n=this.name,r=0;r<e.length;r++){var i=e[r];n==i.note.toUpperCase()&&("flat"==i.acc&&(this.acc=-1,this.isKeyFlat=!0,this.pitchAltered=-1),"sharp"==i.acc&&(this.acc=1,this.isKeySharp=!0,this.pitchAltered=1))}},n.prototype.getAccidentalEquiv=function(){var e,t,r=((t=new n((e=this).name)).pitch=e.pitch,t.hasComma=e.hasComma,t.isLower=e.isLower,t.isQuoted=e.isQuoted,t.isSharp=e.isSharp,t.isKeySharp=e.isKeySharp,t.isFlat=e.isFlat,t.isKeyFlat=e.isKeyFlat,t);return r.isSharp||r.isKeySharp?((r=r.nextNote()).isFlat=!0,r.isSharp=!1,r.isKeySharp=!1):(r.isFlat||r.isKeyFlat)&&((r=r.prevNote()).isSharp=!0,r.isFlat=!1,r.isKeyFlat=!1),r},n.prototype.nextNote=function(){return new n(t(this.pitch+1+this.pitchAltered))},n.prototype.prevNote=function(){return new n(t(this.pitch-1+this.pitchAltered))},n.prototype.emitNoAccidentals=function(){var e=this.name;this.isLower&&(e=e.toLowerCase());for(var t=0;t<this.isQuoted;t++)e+="'";for(var n=0;n<this.hasComma;n++)e+=",";return e},n.prototype.emit=function(){var e=this.name;(this.isSharp||this.isKeySharp)&&(e="^"+e,this.isDouble&&(e="^"+e)),(this.isFlat||this.isKeyFlat)&&(e="_"+e,this.isDouble&&(e="_"+e)),this.quarter&&(e="^"==this.quarter?"^/"+e:"_/"+e),this.natural&&(e="="+e);for(var t=1;t<=this.hasComma;t++)e+=",";if(this.isLower){e=e.toLowerCase();for(var n=1;n<=this.isQuoted;n++)e+="'"}return e},Ua={TabNote:n,notes:["A","B","C","D","E","F","G"]}}function pu(){if(Ya)return Va;Ya=1;const{noteToMidi:e}=hu();var t=du(),n=function(){if(Ga)return Wa;Ga=1;var e=du(),t=e.notes;function n(t,n){this.fromN=new e.TabNote(t),this.toN=new e.TabNote(n)}return n.prototype.build=function(){var e=this.fromN,n=this.toN;if(n.isLowerThan(e)){var r=e.emit();return{error:"Invalid string Instrument tuning : "+n.emit()+" string lower than "+r+" string"}}var i=[],o=t.indexOf(e.name),a=t.indexOf(n.name);if(-1==o||-1==a)return i;for(var s=!1;!s;)i.push(e.emit()),(e=e.nextNote()).sameNoteAs(n)&&(s=!0);return i},Wa=n}();function r(e,n){for(var r=[],a=0;a<n.length;a++)if(!n[a].endTie){var s=new t.TabNote(n[a].name,e.clefTranspose);s.checkKeyAccidentals(e.accidentals,e.measureAccidentals);var l=o(e,s);r.push(l)}return function(e,t){for(var n=0;n<t.length-1;n++){var r=t[n],o=t[n+1];if(r.str==o.str){if(r.str==e.strings.length-1)return r.num="?",void(o.num="?");o.num<r.num?(o.str++,o=i(e,o.note,o.str,e.secondPos,e.strings[o.str].length)):(r.str++,r=i(e,r.note,r.str,e.secondPos,e.strings[r.str].length)),t[n]=r,t[n+1]=o}}}(e,r),r}function i(e,t,n,r,i){var o=e.strings;t.checkKeyAccidentals(e.accidentals,e.measureAccidentals),r&&(o=r);var a=t.emitNoAccidentals(),s=o[n].indexOf(a),l=t.acc;if(-1!=s){if(r&&(s+=i),(t.isFlat||-1==t.acc)&&0==s){var c=t.getAccidentalEquiv();s=o[++n].indexOf(c.emit()),l=0}return{num:s+l,str:n,note:t}}return null}function o(e,t){var n;(t.isAltered||t.natural)&&(t.isFlat?n=t.isDouble?"__":"_":t.isSharp?n=t.isDouble?"^^":"^":t.natural&&(n="="),e.measureAccidentals[t.name.toUpperCase()]=n);for(var r=e.stringPitches.length-1;r>=0;r--)if(t.pitch+t.pitchAltered>=e.stringPitches[r]){var i=t.pitch+t.pitchAltered-e.stringPitches[r];return"^"===t.quarter?i-=.5:"v"===t.quarter&&(i+=.5),{num:Math.round(i),str:e.stringPitches.length-1-r,
// reverse the strings because string 0 is on the bottom
note:t}}return{num:"?",str:e.stringPitches.length-1,note:t}}function a(e,t){var n={num:"?",str:0,note:t};e.push(n),e.error=t.emit()+": unexpected note for instrument"}function s(r){var i=r.tuning,o=r.capo,a=r._super.params.highestNote;this.linePitch=r.linePitch,this.highestNote="a'",a&&(this.highestNote=a),this.measureAccidentals={},this.capo=0,o&&(this.capo=o),this.transpose=r.transpose?r.transpose:0,this.tuning=i,this.stringPitches=[];for(var s=0;s<this.tuning.length;s++){var l=e(this.tuning[s])+this.capo;this.stringPitches.push(l)}if(this.capo>0&&(this.capoTuning=function(e){var n=null,r=e.tuning;if(e.capo>0){n=[];for(var i=0;i<r.length;i++){for(var o=new t.TabNote(r[i]),a=0;a<e.capo;a++)o=o.nextNote();n[i]=o.emit()}}return n}(this)),this.strings=function(e){var t=[],r=e.tuning;e.capo>0&&(r=e.capoTuning);for(var i=r.length-1,o=0;o<r.length;o++){var a=e.highestNote;o!=r.length-1&&(a=r[o+1]);var s=new n(r[o],a).build();if(s.error)return s;t[i--]=s}return t}(this),this.strings.error)return r._super.setError(this.strings.error),void(r.inError=!0);this.secondPos=function(e){var t=[];t[0]=[];for(var n=e.strings,r=1;r<n.length;r++)t[r]=n[r-1];return t}(this)}return s.prototype.stringToPitch=function(e){return 5.3+(this.strings.length-1-e)*this.linePitch},s.prototype.notesToNumber=function(e,n){var i,s,l=null,c=null;if(e&&(c=[],e.length>1?(c=r(this,e)).error&&(l=c.error):e[0].endTie||((i=new t.TabNote(e[0].name,this.clefTranspose)).checkKeyAccidentals(this.accidentals,this.measureAccidentals),(s=o(this,i))?c.push(s):(a(c,i),l=c.error))),l)return c;var u=null;if(n){u=[];for(var h=0;h<n.length;h++)(i=new t.TabNote(n[h].name,this.clefTranspose)).checkKeyAccidentals(this.accidentals,this.measureAccidentals),(s=o(this,i))?u.push(s):(a(u,i),l=c.error)}return{notes:c,graces:u,error:l}},s.prototype.toString=function(){for(var e=[],t=0;t<this.tuning.length;t++){var n=this.tuning[t].replaceAll(",","").replaceAll("'","").toUpperCase();"_"===n[0]?n=n[1]+"b ":"^"===n[0]&&(n=n[1]+"# "),e.push(n)}return e.join("")},s.prototype.tabInfos=function(e){var t=e._super.params.label;if(t){var n="";return-1!=t.indexOf("%T")&&(n=this.toString(),e.capo>0&&(n+=" capo:"+e.capo),t=t.replace("%T",n)),t}return""},Va=s}function fu(){if(Ja)return Za;Ja=1;var e=nu(),t=ru(),n=uu(),r=function(){if(Xa)return Ka;Xa=1;var e=pu();function t(t){this.tuning=t._super.params.tuning,this.tuning||(this.tuning=["G,","D","A","e"]),t.tuning=this.tuning,this.strings=new e(t)}return t.prototype.notesToNumber=function(e,t){return this.strings.notesToNumber(e,t)},t.prototype.stringToPitch=function(e){return this.strings.stringToPitch(e)},Ka=t}();function i(){}i.prototype.init=function(n,i,o){var a=new t(n,i,o);this.abcTune=n,this._super=a,this.linePitch=3,this.nbLines=4,this.isTabBig=!1,this.capo=o.capo,this.transpose=o.visualTranspose,this.tablature=new e(this.nbLines,this.linePitch);var s=new r(this);this.semantics=s},i.prototype.render=function(e,t,r){this._super.inError||(this.tablature.bypass(t)||new n(this,e,t,r).doLayout())};return Za=function(){return{name:"ViolinTab",tablature:i}}}function mu(){if(ns)return ts;ns=1;var e=nu(),t=ru(),n=uu(),r=function(){if(es)return Qa;es=1;var e=pu();function t(t){this.tuning=t._super.params.tuning,this.tuning||(this.tuning=["E,","A,","D","G","B","e"]),t.tuning=this.tuning,this.strings=new e(t)}return t.prototype.notesToNumber=function(e,t){return this.strings.notesToNumber(e,t)},t.prototype.stringToPitch=function(e){return this.strings.stringToPitch(e)},Qa=t}();function i(){}i.prototype.init=function(n,i,o){var a=new t(n,i,o);this._super=a,this.abcTune=n,this.linePitch=3,this.nbLines=6,this.isTabBig=!0,this.capo=o.capo,this.transpose=o.visualTranspose,this.tablature=new e(this.nbLines,this.linePitch);var s=new r(this);this.semantics=s},i.prototype.render=function(e,t,r){this._super.inError||(this.tablature.bypass(t)||new n(this,e,t,r).doLayout())};return ts=function(){return{name:"GuitarTab",tablature:i}}}function gu(){if(is)return rs;is=1;var e=fu(),t=mu(),n={violin:"ViolinTab",guitar:"GuitarTab"};return rs={inited:!1,plugins:{},
/**
     * to be called once per plugin for registration 
     * @param {*} plugin 
     */
register:function(e){var t=e.name,n=e.tablature;this.plugins[t]=n},setError:function(e,t){e.warnings?e.warning.push(t):e.warnings=[t]},
/**
     * handle params for current processed score
     * @param {*} tune current tune 
     * @param {*} tuneNumber number in tune list
     * @param {*} params params to be processed for tablature
     * @return prepared tablatures plugin instances for current tune
     */
preparePlugins:function(e,t,r){var i=null;if(r.tablature){var o=r.tablature;i=[];for(var a=0;a<o.length;a++){var s=o[a],l=s.instrument;if(null==l)return this.setError(e,"tablature 'instrument' is missing"),i;var c=n[l],u=null;if(c&&(u=this.plugins[c]),!u)return this.setError(e,"Undefined tablature plugin: "+l),i;0!=r.visualTranspose&&(s.visualTranspose=r.visualTranspose),s.abcSrc=r.tablature.abcSrc;var h={classz:u,tuneNumber:t,params:s,instance:null};i.push(h)}}return i},
/**
     * Call requested plugin
     * @param {*} renderer 
     * @param {*} abcTune 
     */
layoutTablatures:function(e,t){for(var n=t.tablatures,r=0;r<t.lines.length;r++){var i=t.lines[r],o=i.staff;if(o)for(var a=0;a<o.length;a++)if(n[a]){var s=n[a];null==s.instance&&(s.instance=new s.classz,s.instance.init(t,s.tuneNumber,s.params,a)),s.instance.render(e,i,a)}}},
/**
     * called once internally to register internal plugins
     */
init:function(){this.inited||(this.register(new e),this.register(new t),this.inited=!0)}}}function vu(){if(as)return os;as=1;var e=tu(),t=function(){if(_a)return ba;_a=1;var e=Uc();return ba=function(t){for(var n="",r=t.match(/(\s*)/),i=(t=e.strip(t)).split("\nX:"),o=1;o<i.length;o++)i[o]="X:"+i[o];var a=r?r[0].length:0,s=[];i.forEach((function(e){s.push({abc:e,startPos:a}),a+=e.length+1})),s.length>1&&!e.startsWith(s[0].abc,"X:")&&s.shift().abc.split("\n").forEach((function(t){e.startsWith(t,"%%")&&(n+=t+"\n")}));var l=n;return s.forEach((function(t){var r=t.abc.indexOf("\n\n");r>0&&(t.abc=t.abc.substring(0,r)),t.pure=t.abc,t.abc=n+t.abc,t.title="";var i=t.pure.split("T:");i.length>1&&(i=i[1].split("\n"),t.title=e.strip(i[0]));var o=t.pure.substring(2,t.pure.indexOf("\n"));t.id=e.strip(o)})),{header:l,tunes:s}},ba}(),n=gu(),r={};return function(){r.numberOfTunes=function(e){var t=e.split("\nX:").length;return 0===t&&(t=1),t};var i=r.TuneBook=function(e){var n=t(e);this.header=n.header,this.tunes=n.tunes};i.prototype.getTuneById=function(e){for(var t=0;t<this.tunes.length;t++)if(this.tunes[t].id===""+e)return this.tunes[t];return null},i.prototype.getTuneByTitle=function(e){for(var t=0;t<this.tunes.length;t++)if(this.tunes[t].title===e)return this.tunes[t];return null},r.parseOnly=function(e,t){for(var n=r.numberOfTunes(e),i=[],o=0;o<n;o++)i.push(1);return r.renderEngine((function(){}),i,e,t)},r.renderEngine=function(t,r,o,a){var s=[];if(void 0!==r&&void 0!==o){var l;(!(l=r)||l.propertyIsEnumerable("length")||"object"!=typeof l||"number"!=typeof l.length)&&(r=[r]),void 0===a&&(a={});for(var c=a.startingTune?parseInt(a.startingTune,10):0,u=new i(o),h=new e,d=0;d<r.length;d++){var p=r[d];if("*"===p||"string"==typeof p&&(p=document.getElementById(p)),p)if(c>=0&&c<u.tunes.length){h.parse(u.tunes[c].abc,a,u.tunes[c].startPos-u.header.length);var f=h.getTune();a.tablature&&(n.init(),f.tablatures=n.preparePlugins(f,c,a));var m=h.getWarnings();m&&(f.warnings=m);var g=t(p,f,d,u.tunes[c].abc);s.push(g||f)}else p.innerHTML&&(p.innerHTML="");c++}return s}},r.extractMeasures=function(e){for(var t=[],n=new i(e),o=0;o<n.tunes.length;o++){for(var a=n.tunes[o],s=a.abc.split("K:"),l=s[1].split("\n"),c=s[0]+"K:"+l[0]+"\n",u=null,h=null,d=null,p=[],f=!1,m=r.parseOnly(a.abc)[0],g=m.getPickupLength()>0,v=0;v<m.lines.length;v++){var y=m.lines[v];if(y.staff)for(var b=0;b<1;b++)for(var _=y.staff[b],w=0;w<1;w++)for(var k=_.voices[w],x=0;x<k.length;x++){var C=k[x];if(null===d&&C.startChar>=0&&(d=C.startChar,h=void 0===C.chord?u:null),C.chord&&(u=C),"bar"===C.el_type){if(f){var S={abc:a.abc.substring(d,C.endChar)};(u=h&&h.chord&&h.chord.length>0?h.chord[0].name:null)&&(S.lastChord=u),C.startEnding&&(S.startEnding=C.startEnding),C.endEnding&&(S.endEnding=C.endEnding),p.push(S),d=null,f=!1}}else"note"===C.el_type&&(f=!0)}}t.push({header:c,measures:p,hasPickup:g})}return t}}(),os=r}function yu(){if(ds)return hs;ds=1;var e=Xc(),t={0:{d:[["M",4.83,-14.97],["c",.33,-.03,1.11,0,1.47,.06],["c",1.68,.36,2.97,1.59,3.78,3.6],["c",1.2,2.97,.81,6.96,-.9,9.27],["c",-.78,1.08,-1.71,1.71,-2.91,1.95],["c",-.45,.09,-1.32,.09,-1.77,0],["c",-.81,-.18,-1.47,-.51,-2.07,-1.02],["c",-2.34,-2.07,-3.15,-6.72,-1.74,-10.2],["c",.87,-2.16,2.28,-3.42,4.14,-3.66],["z"],["m",1.11,.87],["c",-.21,-.06,-.69,-.09,-.87,-.06],["c",-.54,.12,-.87,.42,-1.17,.99],["c",-.36,.66,-.51,1.56,-.6,3],["c",-.03,.75,-.03,4.59,0,5.31],["c",.09,1.5,.27,2.4,.6,3.06],["c",.24,.48,.57,.78,.96,.9],["c",.27,.09,.78,.09,1.05,0],["c",.39,-.12,.72,-.42,.96,-.9],["c",.33,-.66,.51,-1.56,.6,-3.06],["c",.03,-.72,.03,-4.56,0,-5.31],["c",-.09,-1.47,-.27,-2.37,-.6,-3.03],["c",-.24,-.48,-.54,-.78,-.93,-.9],["z"]],w:10.78,h:14.959},1:{d:[["M",3.3,-15.06],["c",.06,-.06,.21,-.03,.66,.15],["c",.81,.39,1.08,.39,1.83,.03],["c",.21,-.09,.39,-.15,.42,-.15],["c",.12,0,.21,.09,.27,.21],["c",.06,.12,.06,.33,.06,5.94],["c",0,3.93,0,5.85,.03,6.03],["c",.06,.36,.15,.69,.27,.96],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.12,-.27,.21,-.6,.27,-.96],["c",.03,-.18,.03,-1.59,.03,-4.29],["c",0,-3.87,0,-4.05,-.06,-4.14],["c",-.09,-.15,-.18,-.24,-.39,-.24],["c",-.12,0,-.15,.03,-.21,.06],["c",-.03,.06,-.45,.99,-.96,2.13],["c",-.48,1.14,-.9,2.1,-.93,2.16],["c",-.06,.15,-.21,.24,-.33,.24],["c",-.24,0,-.42,-.18,-.42,-.39],["c",0,-.06,3.27,-7.62,3.33,-7.74],["z"]],w:8.94,h:15.058},2:{d:[["M",4.23,-14.97],["c",.57,-.06,1.68,0,2.34,.18],["c",.69,.18,1.5,.54,2.01,.9],["c",1.35,.96,1.95,2.25,1.77,3.81],["c",-.15,1.35,-.66,2.34,-1.68,3.15],["c",-.6,.48,-1.44,.93,-3.12,1.65],["c",-1.32,.57,-1.8,.81,-2.37,1.14],["c",-.57,.33,-.57,.33,-.24,.27],["c",.39,-.09,1.26,-.09,1.68,0],["c",.72,.15,1.41,.45,2.1,.9],["c",.99,.63,1.86,.87,2.55,.75],["c",.24,-.06,.42,-.15,.57,-.3],["c",.12,-.09,.3,-.42,.3,-.51],["c",0,-.09,.12,-.21,.24,-.24],["c",.18,-.03,.39,.12,.39,.3],["c",0,.12,-.15,.57,-.3,.87],["c",-.54,1.02,-1.56,1.74,-2.79,2.01],["c",-.42,.09,-1.23,.09,-1.62,.03],["c",-.81,-.18,-1.32,-.45,-2.01,-1.11],["c",-.45,-.45,-.63,-.57,-.96,-.69],["c",-.84,-.27,-1.89,.12,-2.25,.9],["c",-.12,.21,-.21,.54,-.21,.72],["c",0,.12,-.12,.21,-.27,.24],["c",-.15,0,-.27,-.03,-.33,-.15],["c",-.09,-.21,.09,-1.08,.33,-1.71],["c",.24,-.66,.66,-1.26,1.29,-1.89],["c",.45,-.45,.9,-.81,1.92,-1.56],["c",1.29,-.93,1.89,-1.44,2.34,-1.98],["c",.87,-1.05,1.26,-2.19,1.2,-3.63],["c",-.06,-1.29,-.39,-2.31,-.96,-2.91],["c",-.36,-.33,-.72,-.51,-1.17,-.54],["c",-.84,-.03,-1.53,.42,-1.59,1.05],["c",-.03,.33,.12,.6,.57,1.14],["c",.45,.54,.54,.87,.42,1.41],["c",-.15,.63,-.54,1.11,-1.08,1.38],["c",-.63,.33,-1.2,.33,-1.83,0],["c",-.24,-.12,-.33,-.18,-.54,-.39],["c",-.18,-.18,-.27,-.3,-.36,-.51],["c",-.24,-.45,-.27,-.84,-.21,-1.38],["c",.12,-.75,.45,-1.41,1.02,-1.98],["c",.72,-.72,1.74,-1.17,2.85,-1.32],["z"]],w:10.764,h:14.97},3:{d:[["M",3.78,-14.97],["c",.3,-.03,1.41,0,1.83,.06],["c",2.22,.3,3.51,1.32,3.72,2.91],["c",.03,.33,.03,1.26,-.03,1.65],["c",-.12,.84,-.48,1.47,-1.05,1.77],["c",-.27,.15,-.36,.24,-.45,.39],["c",-.09,.21,-.09,.36,0,.57],["c",.09,.15,.18,.24,.51,.39],["c",.75,.42,1.23,1.14,1.41,2.13],["c",.06,.42,.06,1.35,0,1.71],["c",-.18,.81,-.48,1.38,-1.02,1.95],["c",-.75,.72,-1.8,1.2,-3.18,1.38],["c",-.42,.06,-1.56,.06,-1.95,0],["c",-1.89,-.33,-3.18,-1.29,-3.51,-2.64],["c",-.03,-.12,-.03,-.33,-.03,-.6],["c",0,-.36,0,-.42,.06,-.63],["c",.12,-.3,.27,-.51,.51,-.75],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.51,.36,-.63,.54,-.6,.87],["c",.06,.54,.54,.9,1.38,.99],["c",.36,.06,.72,.03,.96,-.06],["c",.81,-.27,1.29,-1.23,1.44,-2.79],["c",.03,-.45,.03,-1.95,-.03,-2.37],["c",-.09,-.75,-.33,-1.23,-.75,-1.44],["c",-.33,-.18,-.45,-.18,-1.98,-.18],["c",-1.35,0,-1.41,0,-1.5,-.06],["c",-.18,-.12,-.24,-.39,-.12,-.6],["c",.12,-.15,.15,-.15,1.68,-.15],["c",1.5,0,1.62,0,1.89,-.15],["c",.18,-.09,.42,-.36,.54,-.57],["c",.18,-.42,.27,-.9,.3,-1.95],["c",.03,-1.2,-.06,-1.8,-.36,-2.37],["c",-.24,-.48,-.63,-.81,-1.14,-.96],["c",-.3,-.06,-1.08,-.06,-1.38,.03],["c",-.6,.15,-.9,.42,-.96,.84],["c",-.03,.3,.06,.45,.63,.84],["c",.33,.24,.42,.39,.45,.63],["c",.03,.72,-.57,1.5,-1.32,1.65],["c",-1.05,.27,-2.1,-.57,-2.1,-1.65],["c",0,-.45,.15,-.96,.39,-1.38],["c",.12,-.21,.54,-.63,.81,-.81],["c",.57,-.42,1.38,-.69,2.25,-.81],["z"]],w:9.735,h:14.967},4:{d:[["M",8.64,-14.94],["c",.27,-.09,.42,-.12,.54,-.03],["c",.09,.06,.15,.21,.15,.3],["c",-.03,.06,-1.92,2.31,-4.23,5.04],["c",-2.31,2.73,-4.23,4.98,-4.26,5.01],["c",-.03,.06,.12,.06,2.55,.06],["l",2.61,0],["l",0,-2.37],["c",0,-2.19,.03,-2.37,.06,-2.46],["c",.03,-.06,.21,-.18,.57,-.42],["c",1.08,-.72,1.38,-1.08,1.86,-2.16],["c",.12,-.3,.24,-.54,.27,-.57],["c",.12,-.12,.39,-.06,.45,.12],["c",.06,.09,.06,.57,.06,3.96],["l",0,3.9],["l",1.08,0],["c",1.05,0,1.11,0,1.2,.06],["c",.24,.15,.24,.54,0,.69],["c",-.09,.06,-.15,.06,-1.2,.06],["l",-1.08,0],["l",0,.33],["c",0,.57,.09,1.11,.3,1.53],["c",.36,.75,.93,1.17,1.68,1.26],["c",.3,.03,.39,.09,.39,.3],["c",0,.15,-.03,.18,-.09,.24],["c",-.06,.06,-.09,.06,-.48,.06],["c",-.42,0,-.69,-.03,-2.1,-.24],["c",-.9,-.15,-1.77,-.15,-2.67,0],["c",-1.41,.21,-1.68,.24,-2.1,.24],["c",-.39,0,-.42,0,-.48,-.06],["c",-.06,-.06,-.06,-.09,-.06,-.24],["c",0,-.21,.06,-.27,.36,-.3],["c",.75,-.09,1.32,-.51,1.68,-1.26],["c",.21,-.42,.3,-.96,.3,-1.53],["l",0,-.33],["l",-2.7,0],["c",-2.91,0,-2.85,0,-3.09,-.15],["c",-.18,-.12,-.3,-.39,-.27,-.54],["c",.03,-.06,.18,-.24,.33,-.45],["c",.75,-.9,1.59,-2.07,2.13,-3.03],["c",.33,-.54,.84,-1.62,1.05,-2.16],["c",.57,-1.41,.84,-2.64,.9,-4.05],["c",.03,-.63,.06,-.72,.24,-.81],["l",.12,-.06],["l",.45,.12],["c",.66,.18,1.02,.24,1.47,.27],["c",.6,.03,1.23,-.09,2.01,-.33],["z"]],w:11.795,h:14.994},5:{d:[["M",1.02,-14.94],["c",.12,-.09,.03,-.09,1.08,.06],["c",2.49,.36,4.35,.36,6.96,-.06],["c",.57,-.09,.66,-.06,.81,.06],["c",.15,.18,.12,.24,-.15,.51],["c",-1.29,1.26,-3.24,2.04,-5.58,2.31],["c",-.6,.09,-1.2,.12,-1.71,.12],["c",-.39,0,-.45,0,-.57,.06],["c",-.09,.06,-.15,.12,-.21,.21],["l",-.06,.12],["l",0,1.65],["l",0,1.65],["l",.21,-.21],["c",.66,-.57,1.41,-.96,2.19,-1.14],["c",.33,-.06,1.41,-.06,1.95,0],["c",2.61,.36,4.02,1.74,4.26,4.14],["c",.03,.45,.03,1.08,-.03,1.44],["c",-.18,1.02,-.78,2.01,-1.59,2.7],["c",-.72,.57,-1.62,1.02,-2.49,1.2],["c",-1.38,.27,-3.03,.06,-4.2,-.54],["c",-1.08,-.54,-1.71,-1.32,-1.86,-2.28],["c",-.09,-.69,.09,-1.29,.57,-1.74],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.36,.33,.57,.75,.6,1.2],["c",0,.21,0,.27,-.06,.42],["c",-.09,.18,-.12,.24,-.54,.54],["c",-.18,.12,-.36,.3,-.42,.33],["c",-.36,.42,-.18,.99,.36,1.26],["c",.51,.27,1.47,.36,2.01,.27],["c",.93,-.21,1.47,-1.17,1.65,-2.91],["c",.06,-.45,.06,-1.89,0,-2.31],["c",-.15,-1.2,-.51,-2.1,-1.05,-2.55],["c",-.21,-.18,-.54,-.36,-.81,-.39],["c",-.3,-.06,-.84,-.03,-1.26,.06],["c",-.93,.18,-1.65,.6,-2.16,1.2],["c",-.15,.21,-.27,.3,-.39,.3],["c",-.15,0,-.3,-.09,-.36,-.18],["c",-.06,-.09,-.06,-.15,-.06,-3.66],["c",0,-3.39,0,-3.57,.06,-3.66],["c",.03,-.06,.09,-.15,.15,-.18],["z"]],w:10.212,h:14.997},6:{d:[["M",4.98,-14.97],["c",.36,-.03,1.2,0,1.59,.06],["c",.9,.15,1.68,.51,2.25,1.05],["c",.57,.51,.87,1.23,.84,1.98],["c",-.03,.51,-.21,.9,-.6,1.26],["c",-.24,.24,-.45,.39,-.75,.51],["c",-.21,.06,-.27,.06,-.6,.06],["c",-.33,0,-.39,0,-.6,-.06],["c",-.3,-.12,-.51,-.27,-.75,-.51],["c",-.39,-.36,-.57,-.78,-.57,-1.26],["c",0,-.27,0,-.3,.09,-.42],["c",.03,-.09,.18,-.21,.3,-.3],["c",.12,-.09,.3,-.21,.39,-.27],["c",.09,-.06,.21,-.18,.27,-.24],["c",.06,-.12,.09,-.15,.09,-.33],["c",0,-.18,-.03,-.24,-.09,-.36],["c",-.24,-.39,-.75,-.6,-1.38,-.57],["c",-.54,.03,-.9,.18,-1.23,.48],["c",-.81,.72,-1.08,2.16,-.96,5.37],["l",0,.63],["l",.3,-.12],["c",.78,-.27,1.29,-.33,2.1,-.27],["c",1.47,.12,2.49,.54,3.27,1.29],["c",.48,.51,.81,1.11,.96,1.89],["c",.06,.27,.06,.42,.06,.93],["c",0,.54,0,.69,-.06,.96],["c",-.15,.78,-.48,1.38,-.96,1.89],["c",-.54,.51,-1.17,.87,-1.98,1.08],["c",-1.14,.3,-2.4,.33,-3.24,.03],["c",-1.5,-.48,-2.64,-1.89,-3.27,-4.02],["c",-.36,-1.23,-.51,-2.82,-.42,-4.08],["c",.3,-3.66,2.28,-6.3,4.95,-6.66],["z"],["m",.66,7.41],["c",-.27,-.09,-.81,-.12,-1.08,-.06],["c",-.72,.18,-1.08,.69,-1.23,1.71],["c",-.06,.54,-.06,3,0,3.54],["c",.18,1.26,.72,1.77,1.8,1.74],["c",.39,-.03,.63,-.09,.9,-.27],["c",.66,-.42,.9,-1.32,.9,-3.24],["c",0,-2.22,-.36,-3.12,-1.29,-3.42],["z"]],w:9.956,h:14.982},7:{d:[["M",.21,-14.97],["c",.21,-.06,.45,0,.54,.15],["c",.06,.09,.06,.15,.06,.39],["c",0,.24,0,.33,.06,.42],["c",.06,.12,.21,.24,.27,.24],["c",.03,0,.12,-.12,.24,-.21],["c",.96,-1.2,2.58,-1.35,3.99,-.42],["c",.15,.12,.42,.3,.54,.45],["c",.48,.39,.81,.57,1.29,.6],["c",.69,.03,1.5,-.3,2.13,-.87],["c",.09,-.09,.27,-.3,.39,-.45],["c",.12,-.15,.24,-.27,.3,-.3],["c",.18,-.06,.39,.03,.51,.21],["c",.06,.18,.06,.24,-.27,.72],["c",-.18,.24,-.54,.78,-.78,1.17],["c",-2.37,3.54,-3.54,6.27,-3.87,9],["c",-.03,.33,-.03,.66,-.03,1.26],["c",0,.9,0,1.08,.15,1.89],["c",.06,.45,.06,.48,.03,.6],["c",-.06,.09,-.21,.21,-.3,.21],["c",-.03,0,-.27,-.06,-.54,-.15],["c",-.84,-.27,-1.11,-.3,-1.65,-.3],["c",-.57,0,-.84,.03,-1.56,.27],["c",-.6,.18,-.69,.21,-.81,.15],["c",-.12,-.06,-.21,-.18,-.21,-.3],["c",0,-.15,.6,-1.44,1.2,-2.61],["c",1.14,-2.22,2.73,-4.68,5.1,-8.01],["c",.21,-.27,.36,-.48,.33,-.48],["c",0,0,-.12,.06,-.27,.12],["c",-.54,.3,-.99,.39,-1.56,.39],["c",-.75,.03,-1.2,-.18,-1.83,-.75],["c",-.99,-.9,-1.83,-1.17,-2.31,-.72],["c",-.18,.15,-.36,.51,-.45,.84],["c",-.06,.24,-.06,.33,-.09,1.98],["c",0,1.62,-.03,1.74,-.06,1.8],["c",-.15,.24,-.54,.24,-.69,0],["c",-.06,-.09,-.06,-.15,-.06,-3.57],["c",0,-3.42,0,-3.48,.06,-3.57],["c",.03,-.06,.09,-.12,.15,-.15],["z"]],w:10.561,h:15.093},8:{d:[["M",4.98,-14.97],["c",.33,-.03,1.02,-.03,1.32,0],["c",1.32,.12,2.49,.6,3.21,1.32],["c",.39,.39,.66,.81,.78,1.29],["c",.09,.36,.09,1.08,0,1.44],["c",-.21,.84,-.66,1.59,-1.59,2.55],["l",-.3,.3],["l",.27,.18],["c",1.47,.93,2.31,2.31,2.25,3.75],["c",-.03,.75,-.24,1.35,-.63,1.95],["c",-.45,.66,-1.02,1.14,-1.83,1.53],["c",-1.8,.87,-4.2,.87,-6,.03],["c",-1.62,-.78,-2.52,-2.16,-2.46,-3.66],["c",.06,-.99,.54,-1.77,1.8,-2.97],["c",.54,-.51,.54,-.54,.48,-.57],["c",-.39,-.27,-.96,-.78,-1.2,-1.14],["c",-.75,-1.11,-.87,-2.4,-.3,-3.6],["c",.69,-1.35,2.25,-2.25,4.2,-2.4],["z"],["m",1.53,.69],["c",-.42,-.09,-1.11,-.12,-1.38,-.06],["c",-.3,.06,-.6,.18,-.81,.3],["c",-.21,.12,-.6,.51,-.72,.72],["c",-.51,.87,-.42,1.89,.21,2.52],["c",.21,.21,.36,.3,1.95,1.23],["c",.96,.54,1.74,.99,1.77,1.02],["c",.09,0,.63,-.6,.99,-1.11],["c",.21,-.36,.48,-.87,.57,-1.23],["c",.06,-.24,.06,-.36,.06,-.72],["c",0,-.45,-.03,-.66,-.15,-.99],["c",-.39,-.81,-1.29,-1.44,-2.49,-1.68],["z"],["m",-1.44,8.07],["l",-1.89,-1.08],["c",-.03,0,-.18,.15,-.39,.33],["c",-1.2,1.08,-1.65,1.95,-1.59,3],["c",.09,1.59,1.35,2.85,3.21,3.24],["c",.33,.06,.45,.06,.93,.06],["c",.63,0,.81,-.03,1.29,-.27],["c",.9,-.42,1.47,-1.41,1.41,-2.4],["c",-.06,-.66,-.39,-1.29,-.9,-1.65],["c",-.12,-.09,-1.05,-.63,-2.07,-1.23],["z"]],w:10.926,h:14.989},9:{d:[["M",4.23,-14.97],["c",.42,-.03,1.29,0,1.62,.06],["c",.51,.12,.93,.3,1.38,.57],["c",1.53,1.02,2.52,3.24,2.73,5.94],["c",.18,2.55,-.48,4.98,-1.83,6.57],["c",-1.05,1.26,-2.4,1.89,-3.93,1.83],["c",-1.23,-.06,-2.31,-.45,-3.03,-1.14],["c",-.57,-.51,-.87,-1.23,-.84,-1.98],["c",.03,-.51,.21,-.9,.6,-1.26],["c",.24,-.24,.45,-.39,.75,-.51],["c",.21,-.06,.27,-.06,.6,-.06],["c",.33,0,.39,0,.6,.06],["c",.3,.12,.51,.27,.75,.51],["c",.39,.36,.57,.78,.57,1.26],["c",0,.27,0,.3,-.09,.42],["c",-.03,.09,-.18,.21,-.3,.3],["c",-.12,.09,-.3,.21,-.39,.27],["c",-.09,.06,-.21,.18,-.27,.24],["c",-.06,.12,-.06,.15,-.06,.33],["c",0,.18,0,.24,.06,.36],["c",.24,.39,.75,.6,1.38,.57],["c",.54,-.03,.9,-.18,1.23,-.48],["c",.81,-.72,1.08,-2.16,.96,-5.37],["l",0,-.63],["l",-.3,.12],["c",-.78,.27,-1.29,.33,-2.1,.27],["c",-1.47,-.12,-2.49,-.54,-3.27,-1.29],["c",-.48,-.51,-.81,-1.11,-.96,-1.89],["c",-.06,-.27,-.06,-.42,-.06,-.96],["c",0,-.51,0,-.66,.06,-.93],["c",.15,-.78,.48,-1.38,.96,-1.89],["c",.15,-.12,.33,-.27,.42,-.36],["c",.69,-.51,1.62,-.81,2.76,-.93],["z"],["m",1.17,.66],["c",-.21,-.06,-.57,-.06,-.81,-.03],["c",-.78,.12,-1.26,.69,-1.41,1.74],["c",-.12,.63,-.15,1.95,-.09,2.79],["c",.12,1.71,.63,2.4,1.77,2.46],["c",1.08,.03,1.62,-.48,1.8,-1.74],["c",.06,-.54,.06,-3,0,-3.54],["c",-.15,-1.05,-.51,-1.53,-1.26,-1.68],["z"]],w:9.959,h:14.986},"rests.multimeasure":{d:[["M",0,-4],["l",0,16],["l",1,0],["l",0,-5],["l",40,0],["l",0,5],["l",1,0],["l",0,-16],["l",-1,0],["l",0,5],["l",-40,0],["l",0,-5],["z"]],w:42,h:18},"rests.whole":{d:[["M",.06,.03],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.half":{d:[["M",.06,-4.62],["l",.09,-.06],["l",5.46,0],["l",5.49,0],["l",.09,.06],["l",.06,.09],["l",0,2.19],["l",0,2.19],["l",-.06,.09],["l",-.09,.06],["l",-5.49,0],["l",-5.46,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-2.19],["l",0,-2.19],["z"]],w:11.25,h:4.68},"rests.quarter":{d:[["M",1.89,-11.82],["c",.12,-.06,.24,-.06,.36,-.03],["c",.09,.06,4.74,5.58,4.86,5.82],["c",.21,.39,.15,.78,-.15,1.26],["c",-.24,.33,-.72,.81,-1.62,1.56],["c",-.45,.36,-.87,.75,-.96,.84],["c",-.93,.99,-1.14,2.49,-.6,3.63],["c",.18,.39,.27,.48,1.32,1.68],["c",1.92,2.25,1.83,2.16,1.83,2.34],["c",0,.18,-.18,.36,-.36,.39],["c",-.15,0,-.27,-.06,-.48,-.27],["c",-.75,-.75,-2.46,-1.29,-3.39,-1.08],["c",-.45,.09,-.69,.27,-.9,.69],["c",-.12,.3,-.21,.66,-.24,1.14],["c",-.03,.66,.09,1.35,.3,2.01],["c",.15,.42,.24,.66,.45,.96],["c",.18,.24,.18,.33,.03,.42],["c",-.12,.06,-.18,.03,-.45,-.3],["c",-1.08,-1.38,-2.07,-3.36,-2.4,-4.83],["c",-.27,-1.05,-.15,-1.77,.27,-2.07],["c",.21,-.12,.42,-.15,.87,-.15],["c",.87,.06,2.1,.39,3.3,.9],["l",.39,.18],["l",-1.65,-1.95],["c",-2.52,-2.97,-2.61,-3.09,-2.7,-3.27],["c",-.09,-.24,-.12,-.48,-.03,-.75],["c",.15,-.48,.57,-.96,1.83,-2.01],["c",.45,-.36,.84,-.72,.93,-.78],["c",.69,-.75,1.02,-1.8,.9,-2.79],["c",-.06,-.33,-.21,-.84,-.39,-1.11],["c",-.09,-.15,-.45,-.6,-.81,-1.05],["c",-.36,-.42,-.69,-.81,-.72,-.87],["c",-.09,-.18,0,-.42,.21,-.51],["z"]],w:7.888,h:21.435},"rests.8th":{d:[["M",1.68,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.33,-.09],["c",.39,-.18,1.32,-1.29,1.68,-1.98],["c",.09,-.21,.24,-.3,.39,-.3],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.27,1.11,-1.86,6.42],["c",-1.02,3.48,-1.89,6.39,-1.92,6.42],["c",0,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.15,-.57,1.68,-4.92],["c",.96,-2.67,1.74,-4.89,1.71,-4.89],["l",-.51,.15],["c",-1.08,.36,-1.74,.48,-2.55,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:7.534,h:13.883},"rests.16th":{d:[["M",3.33,-6.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.87,.42],["c",.39,-.18,1.2,-1.23,1.62,-2.07],["c",.06,-.15,.24,-.24,.36,-.24],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.45,1.86,-2.67,10.17],["c",-1.5,5.55,-2.73,10.14,-2.76,10.17],["c",-.03,.03,-.12,.12,-.24,.15],["c",-.18,.09,-.21,.09,-.45,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.12,-.57,1.44,-4.92],["c",.81,-2.67,1.47,-4.86,1.47,-4.89],["c",-.03,0,-.27,.06,-.54,.15],["c",-1.08,.36,-1.77,.48,-2.58,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.12,0,.18,0,.33,-.09],["c",.33,-.15,1.02,-.93,1.41,-1.59],["c",.12,-.21,.18,-.39,.39,-1.08],["c",.66,-2.1,1.17,-3.84,1.17,-3.87],["c",0,0,-.21,.06,-.42,.15],["c",-.51,.15,-1.2,.33,-1.68,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:9.724,h:21.383},"rests.32nd":{d:[["M",4.23,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.12,0,.18,0,.27,-.06],["c",.33,-.21,.99,-1.11,1.44,-1.98],["c",.09,-.24,.21,-.33,.39,-.33],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.57,2.67,-3.21,13.89],["c",-1.8,7.62,-3.3,13.89,-3.3,13.92],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.09,-.57,1.23,-4.92],["c",.69,-2.67,1.26,-4.86,1.29,-4.89],["c",0,-.03,-.12,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.12,.09,.3,.18,.48,.21],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.29,-1.29,1.56,-1.89],["c",.03,-.12,1.23,-4.59,1.23,-4.65],["c",0,-.03,-.18,.03,-.39,.12],["c",-.63,.18,-1.2,.36,-1.74,.45],["c",-.39,.06,-.54,.06,-1.02,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.18,.18,.51,.27,.72,.15],["c",.3,-.12,.69,-.57,1.08,-1.17],["c",.42,-.6,.39,-.51,1.05,-3.03],["c",.33,-1.26,.6,-2.31,.6,-2.34],["c",0,0,-.21,.03,-.45,.12],["c",-.57,.18,-1.14,.33,-1.62,.42],["c",-.33,.06,-.51,.06,-.96,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:11.373,h:28.883},"rests.64th":{d:[["M",5.13,-13.62],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.54,.3,.75,.18],["c",.24,-.12,.63,-.66,1.08,-1.56],["c",.33,-.66,.39,-.72,.6,-.72],["c",.12,0,.27,.09,.33,.18],["c",.03,.06,-.69,3.66,-3.54,17.64],["c",-1.95,9.66,-3.57,17.61,-3.57,17.64],["c",-.03,.06,-.12,.12,-.24,.18],["c",-.21,.09,-.24,.09,-.48,.09],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.06,-.57,1.05,-4.95],["c",.6,-2.7,1.08,-4.89,1.08,-4.92],["c",0,0,-.24,.06,-.51,.15],["c",-.66,.24,-1.2,.36,-1.77,.48],["c",-.42,.06,-.57,.06,-1.05,.06],["c",-.69,0,-.87,-.03,-1.35,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.72,-1.05,2.22,-1.23,3.06,-.42],["c",.3,.33,.42,.6,.6,1.38],["c",.09,.45,.21,.78,.33,.9],["c",.09,.09,.27,.18,.45,.21],["c",.21,.03,.39,-.09,.72,-.42],["c",.45,-.45,1.02,-1.26,1.17,-1.65],["c",.03,-.09,.27,-1.14,.54,-2.34],["c",.27,-1.2,.48,-2.19,.51,-2.22],["c",0,-.03,-.09,-.03,-.48,.12],["c",-1.17,.39,-2.22,.57,-3,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.15,.39,.57,.57,.9,.42],["c",.36,-.18,1.2,-1.26,1.47,-1.89],["c",.03,-.09,.3,-1.2,.57,-2.43],["l",.51,-2.28],["l",-.54,.18],["c",-1.11,.36,-1.8,.48,-2.61,.48],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.21,.21,.54,.3,.75,.18],["c",.36,-.18,.93,-.93,1.29,-1.68],["c",.12,-.24,.18,-.48,.63,-2.55],["l",.51,-2.31],["c",0,-.03,-.18,.03,-.39,.12],["c",-1.14,.36,-2.1,.54,-2.82,.51],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.453,h:36.383},"rests.128th":{d:[["M",6.03,-21.12],["c",.66,-.09,1.23,.09,1.68,.51],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.21,0,.33,-.06,.54,-.36],["c",.15,-.21,.54,-.93,.78,-1.47],["c",.15,-.33,.18,-.39,.3,-.48],["c",.18,-.09,.45,0,.51,.15],["c",.03,.09,-7.11,42.75,-7.17,42.84],["c",-.03,.03,-.15,.09,-.24,.15],["c",-.18,.06,-.24,.06,-.45,.06],["c",-.24,0,-.3,0,-.48,-.06],["c",-.09,-.06,-.21,-.12,-.21,-.15],["c",-.06,-.03,.03,-.57,.84,-4.98],["c",.51,-2.7,.93,-4.92,.9,-4.92],["c",0,0,-.15,.06,-.36,.12],["c",-.78,.27,-1.62,.48,-2.31,.57],["c",-.15,.03,-.54,.03,-.81,.03],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.63,.48],["c",.12,0,.18,0,.3,-.09],["c",.42,-.21,1.14,-1.11,1.5,-1.83],["c",.12,-.27,.12,-.27,.54,-2.52],["c",.24,-1.23,.42,-2.25,.39,-2.25],["c",0,0,-.24,.06,-.51,.18],["c",-1.26,.39,-2.25,.57,-3.06,.54],["c",-.42,-.03,-.75,-.12,-1.11,-.3],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.21,.51,.3,.75,.18],["c",.36,-.15,1.05,-.99,1.41,-1.77],["l",.15,-.3],["l",.42,-2.25],["c",.21,-1.26,.42,-2.28,.39,-2.28],["l",-.51,.15],["c",-1.11,.39,-1.89,.51,-2.7,.51],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.15,.63,.21,.81,.33,.96],["c",.18,.18,.48,.27,.72,.21],["c",.33,-.12,1.14,-1.26,1.41,-1.95],["c",0,-.09,.21,-1.11,.45,-2.34],["c",.21,-1.2,.39,-2.22,.39,-2.28],["c",.03,-.03,0,-.03,-.45,.12],["c",-.57,.18,-1.2,.33,-1.71,.42],["c",-.3,.06,-.51,.06,-.93,.06],["c",-.66,0,-.84,-.03,-1.32,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.36,-.54,.96,-.87,1.65,-.93],["c",.54,-.03,1.02,.15,1.41,.54],["c",.27,.3,.39,.54,.57,1.26],["c",.09,.33,.18,.66,.21,.72],["c",.12,.27,.33,.45,.6,.48],["c",.18,0,.36,-.09,.57,-.33],["c",.33,-.36,.78,-1.14,.93,-1.56],["c",.03,-.12,.24,-1.2,.45,-2.4],["c",.24,-1.2,.42,-2.22,.42,-2.28],["c",.03,-.03,0,-.03,-.39,.09],["c",-1.05,.36,-1.8,.48,-2.58,.48],["c",-.63,0,-.84,-.03,-1.29,-.27],["c",-1.32,-.63,-1.77,-2.16,-1.02,-3.3],["c",.33,-.45,.84,-.81,1.38,-.9],["z"]],w:12.992,h:43.883},"accidentals.sharp":{d:[["M",5.73,-11.19],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.31],["c",0,1.23,0,2.22,.03,2.22],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.43],["c",0,1.32,0,2.43,.03,2.43],["c",0,0,.27,-.12,.6,-.24],["c",.69,-.27,.78,-.3,.96,-.15],["c",.21,.15,.21,.18,.21,1.38],["c",0,1.02,0,1.11,-.06,1.2],["c",-.03,.06,-.09,.12,-.12,.15],["c",-.06,.03,-.42,.21,-.84,.36],["l",-.75,.33],["l",-.03,2.52],["c",0,2.28,-.03,2.55,-.06,2.64],["c",-.21,.36,-.72,.36,-.93,0],["c",-.03,-.09,-.06,-.33,-.06,-2.43],["l",0,-2.31],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.43],["c",0,2.58,0,2.52,-.15,2.67],["c",-.06,.09,-.27,.18,-.36,.18],["c",-.12,0,-.33,-.09,-.39,-.18],["c",-.15,-.15,-.15,-.09,-.15,-2.43],["c",0,-1.23,0,-2.22,-.03,-2.22],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.43],["c",0,-1.32,0,-2.43,-.03,-2.43],["c",0,0,-.27,.12,-.6,.24],["c",-.69,.27,-.78,.3,-.96,.15],["c",-.21,-.15,-.21,-.18,-.21,-1.38],["c",0,-1.02,0,-1.11,.06,-1.2],["c",.03,-.06,.09,-.12,.12,-.15],["c",.06,-.03,.42,-.21,.84,-.36],["l",.78,-.33],["l",0,-2.52],["c",0,-2.28,.03,-2.55,.06,-2.64],["c",.21,-.36,.72,-.36,.93,0],["c",.03,.09,.06,.33,.06,2.43],["l",.03,2.31],["l",1.26,-.51],["l",1.26,-.51],["l",0,-2.43],["c",0,-2.28,0,-2.43,.06,-2.55],["c",.06,-.12,.12,-.18,.27,-.24],["z"],["m",-.33,10.65],["l",0,-2.43],["l",-1.29,.51],["l",-1.26,.51],["l",0,2.46],["l",0,2.43],["l",.09,-.03],["c",.06,-.03,.63,-.27,1.29,-.51],["l",1.17,-.48],["l",0,-2.46],["z"]],w:8.25,h:22.462},"accidentals.halfsharp":{d:[["M",2.43,-10.05],["c",.21,-.12,.54,-.03,.66,.24],["c",.06,.12,.06,.21,.06,2.01],["c",0,1.05,0,1.89,.03,1.89],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.37],["c",0,1.32,0,2.37,.03,2.37],["l",.72,-.48],["c",.69,-.48,.69,-.51,.87,-.51],["c",.15,0,.18,.03,.27,.09],["c",.21,.15,.21,.18,.21,1.41],["c",0,1.11,-.03,1.14,-.09,1.23],["c",-.03,.03,-.48,.39,-1.02,.75],["l",-.99,.66],["l",0,2.25],["c",0,1.95,0,2.28,-.06,2.37],["c",-.06,.12,-.12,.21,-.24,.27],["c",-.27,.12,-.54,.03,-.69,-.24],["c",-.06,-.12,-.06,-.21,-.06,-2.01],["c",0,-1.05,0,-1.89,-.03,-1.89],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.37],["c",0,-1.32,0,-2.37,-.03,-2.37],["l",-.72,.48],["c",-.69,.48,-.69,.48,-.87,.48],["c",-.15,0,-.18,0,-.27,-.06],["c",-.21,-.15,-.21,-.18,-.21,-1.41],["c",0,-1.11,.03,-1.14,.09,-1.23],["c",.03,-.03,.48,-.39,1.02,-.75],["l",.99,-.66],["l",0,-2.25],["c",0,-2.13,0,-2.28,.06,-2.4],["c",.06,-.12,.12,-.18,.27,-.24],["z"]],w:5.25,h:20.174},"accidentals.nat":{d:[["M",.21,-11.4],["c",.24,-.06,.78,0,.99,.15],["c",.03,.03,.03,.48,0,2.61],["c",-.03,1.44,-.03,2.61,-.03,2.61],["c",0,.03,.75,-.09,1.68,-.24],["c",.96,-.18,1.71,-.27,1.74,-.27],["c",.15,.03,.27,.15,.36,.3],["l",.06,.12],["l",.09,8.67],["c",.09,6.96,.12,8.67,.09,8.67],["c",-.03,.03,-.12,.06,-.21,.09],["c",-.24,.09,-.72,.09,-.96,0],["c",-.09,-.03,-.18,-.06,-.21,-.09],["c",-.03,-.03,-.03,-.48,0,-2.61],["c",.03,-1.44,.03,-2.61,.03,-2.61],["c",0,-.03,-.75,.09,-1.68,.24],["c",-.96,.18,-1.71,.27,-1.74,.27],["c",-.15,-.03,-.27,-.15,-.36,-.3],["l",-.06,-.15],["l",-.09,-7.53],["c",-.06,-4.14,-.09,-8.04,-.12,-8.67],["l",0,-1.11],["l",.15,-.06],["c",.09,-.03,.21,-.06,.27,-.09],["z"],["m",3.75,8.4],["c",0,-.33,0,-.42,-.03,-.42],["c",-.12,0,-2.79,.45,-2.79,.48],["c",-.03,0,-.09,6.3,-.09,6.33],["c",.03,0,2.79,-.45,2.82,-.48],["c",0,0,.09,-4.53,.09,-5.91],["z"]],w:5.4,h:22.8},"accidentals.flat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:6.75,h:18.801},"accidentals.halfflat":{d:[["M",4.83,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.6,-.12,9.06],["c",-.09,5.55,-.15,9.06,-.18,9.12],["c",-.03,.09,-.09,.18,-.15,.27],["c",-.24,.21,-.54,.24,-.81,.06],["c",-.06,-.03,-.27,-.24,-.45,-.42],["c",-.36,-.42,-.66,-.66,-1.8,-1.44],["c",-1.23,-.84,-1.83,-1.32,-2.25,-1.77],["c",-.66,-.78,-.96,-1.56,-.93,-2.46],["c",.09,-1.41,1.11,-2.58,2.4,-2.79],["c",.3,-.06,.84,-.03,1.23,.06],["c",.54,.12,1.08,.33,1.53,.63],["c",.12,.09,.24,.15,.24,.12],["c",0,0,-.12,-8.37,-.18,-9.75],["l",0,-.66],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",-1.65,10.95],["c",-.6,-.18,-1.08,.09,-1.38,.69],["c",-.27,.6,-.36,1.38,-.18,2.07],["c",.12,.42,.42,.99,.72,1.41],["c",.3,.42,.93,1.05,1.56,1.59],["l",.48,.39],["l",0,-.12],["c",.03,-.09,.03,-.48,.06,-.9],["c",.03,-.57,.03,-1.08,0,-2.22],["c",-.03,-1.62,-.03,-1.62,-.24,-2.07],["c",-.21,-.42,-.6,-.75,-1.02,-.84],["z"]],w:6.728,h:18.801},"accidentals.dblflat":{d:[["M",-.36,-14.07],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"],["m",3,-11],["c",.33,-.06,.87,0,1.08,.15],["c",.06,.03,.06,.36,-.03,5.25],["c",-.06,2.85,-.09,5.19,-.09,5.19],["c",0,.03,.12,-.03,.24,-.12],["c",.63,-.42,1.41,-.66,2.19,-.72],["c",.81,-.03,1.47,.21,2.04,.78],["c",.57,.54,.87,1.26,.93,2.04],["c",.03,.57,-.09,1.08,-.36,1.62],["c",-.42,.81,-1.02,1.38,-2.82,2.61],["c",-1.14,.78,-1.44,1.02,-1.8,1.44],["c",-.18,.18,-.39,.39,-.45,.42],["c",-.27,.18,-.57,.15,-.81,-.06],["c",-.06,-.09,-.12,-.18,-.15,-.27],["c",-.03,-.06,-.09,-3.27,-.18,-8.34],["c",-.09,-4.53,-.15,-8.58,-.18,-9.03],["l",0,-.78],["l",.12,-.06],["c",.06,-.03,.18,-.09,.27,-.12],["z"],["m",3.18,11.01],["c",-.21,-.12,-.54,-.15,-.81,-.06],["c",-.54,.15,-.99,.63,-1.17,1.26],["c",-.06,.3,-.12,2.88,-.06,3.87],["c",.03,.42,.03,.81,.06,.9],["l",.03,.12],["l",.45,-.39],["c",.63,-.54,1.26,-1.17,1.56,-1.59],["c",.3,-.42,.6,-.99,.72,-1.41],["c",.18,-.69,.09,-1.47,-.18,-2.07],["c",-.15,-.3,-.33,-.51,-.6,-.63],["z"]],w:12.1,h:18.804},"accidentals.dblsharp":{d:[["M",-.18,-3.96],["c",.06,-.03,.12,-.06,.15,-.06],["c",.09,0,2.76,.27,2.79,.3],["c",.12,.03,.15,.12,.15,.51],["c",.06,.96,.24,1.59,.57,2.1],["c",.06,.09,.15,.21,.18,.24],["l",.09,.06],["l",.09,-.06],["c",.03,-.03,.12,-.15,.18,-.24],["c",.33,-.51,.51,-1.14,.57,-2.1],["c",0,-.39,.03,-.45,.12,-.51],["c",.03,0,.66,-.09,1.44,-.15],["c",1.47,-.15,1.5,-.15,1.56,-.03],["c",.03,.06,0,.42,-.09,1.44],["c",-.09,.72,-.15,1.35,-.15,1.38],["c",0,.03,-.03,.09,-.06,.12],["c",-.06,.06,-.12,.09,-.51,.09],["c",-1.08,.06,-1.8,.3,-2.28,.75],["l",-.12,.09],["l",.09,.09],["c",.12,.15,.39,.33,.63,.45],["c",.42,.18,.96,.27,1.68,.33],["c",.39,0,.45,.03,.51,.09],["c",.03,.03,.06,.09,.06,.12],["c",0,.03,.06,.66,.15,1.38],["c",.09,1.02,.12,1.38,.09,1.44],["c",-.06,.12,-.09,.12,-1.56,-.03],["c",-.78,-.06,-1.41,-.15,-1.44,-.15],["c",-.09,-.06,-.12,-.12,-.12,-.54],["c",-.06,-.93,-.24,-1.56,-.57,-2.07],["c",-.06,-.09,-.15,-.21,-.18,-.24],["l",-.09,-.06],["l",-.09,.06],["c",-.03,.03,-.12,.15,-.18,.24],["c",-.33,.51,-.51,1.14,-.57,2.07],["c",0,.42,-.03,.48,-.12,.54],["c",-.03,0,-.66,.09,-1.44,.15],["c",-1.47,.15,-1.5,.15,-1.56,.03],["c",-.03,-.06,0,-.42,.09,-1.44],["c",.09,-.72,.15,-1.35,.15,-1.38],["c",0,-.03,.03,-.09,.06,-.12],["c",.06,-.06,.12,-.09,.51,-.09],["c",.72,-.06,1.26,-.15,1.68,-.33],["c",.24,-.12,.51,-.3,.63,-.45],["l",.09,-.09],["l",-.12,-.09],["c",-.48,-.45,-1.2,-.69,-2.28,-.75],["c",-.39,0,-.45,-.03,-.51,-.09],["c",-.03,-.03,-.06,-.09,-.06,-.12],["c",0,-.03,-.06,-.63,-.12,-1.38],["c",-.09,-.72,-.15,-1.35,-.15,-1.38],["z"]],w:7.95,h:7.977},"dots.dot":{d:[["M",1.32,-1.68],["c",.09,-.03,.27,-.06,.39,-.06],["c",.96,0,1.74,.78,1.74,1.71],["c",0,.96,-.78,1.74,-1.71,1.74],["c",-.96,0,-1.74,-.78,-1.74,-1.71],["c",0,-.78,.54,-1.5,1.32,-1.68],["z"]],w:3.45,h:3.45},"noteheads.dbl":{d:[["M",-.69,-4.02],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["c",.06,.15,.06,.18,.06,1.41],["l",0,1.23],["l",.12,-.18],["c",.72,-1.26,2.64,-2.31,4.86,-2.64],["c",.81,-.15,1.11,-.15,2.13,-.15],["c",.99,0,1.29,0,2.1,.15],["c",.75,.12,1.38,.27,2.04,.54],["c",1.35,.51,2.34,1.26,2.82,2.1],["l",.12,.18],["l",0,-1.23],["c",0,-1.2,0,-1.26,.06,-1.38],["c",.09,-.18,.15,-.24,.33,-.33],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,3.54],["l",0,3.54],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.38],["l",0,-1.23],["l",-.12,.18],["c",-.48,.84,-1.47,1.59,-2.82,2.1],["c",-.84,.33,-1.71,.54,-2.85,.66],["c",-.45,.06,-2.16,.06,-2.61,0],["c",-1.14,-.12,-2.01,-.33,-2.85,-.66],["c",-1.35,-.51,-2.34,-1.26,-2.82,-2.1],["l",-.12,-.18],["l",0,1.23],["c",0,1.23,0,1.26,-.06,1.38],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-3.54],["c",0,-3.48,0,-3.54,.06,-3.66],["c",.09,-.18,.15,-.24,.33,-.33],["z"],["m",7.71,.63],["c",-.36,-.06,-.9,-.06,-1.14,0],["c",-.3,.03,-.66,.24,-.87,.42],["c",-.6,.54,-.9,1.62,-.75,2.82],["c",.12,.93,.51,1.68,1.11,2.31],["c",.75,.72,1.83,1.2,2.85,1.26],["c",1.05,.06,1.83,-.54,2.1,-1.65],["c",.21,-.9,.12,-1.95,-.24,-2.82],["c",-.36,-.81,-1.08,-1.53,-1.95,-1.95],["c",-.3,-.15,-.78,-.3,-1.11,-.39],["z"]],w:16.83,h:8.145},"noteheads.whole":{d:[["M",6.51,-4.05],["c",.51,-.03,2.01,0,2.52,.03],["c",1.41,.18,2.64,.51,3.72,1.08],["c",1.2,.63,1.95,1.41,2.19,2.31],["c",.09,.33,.09,.9,0,1.23],["c",-.24,.9,-.99,1.68,-2.19,2.31],["c",-1.08,.57,-2.28,.9,-3.75,1.08],["c",-.66,.06,-2.31,.06,-2.97,0],["c",-1.47,-.18,-2.67,-.51,-3.75,-1.08],["c",-1.2,-.63,-1.95,-1.41,-2.19,-2.31],["c",-.09,-.33,-.09,-.9,0,-1.23],["c",.24,-.9,.99,-1.68,2.19,-2.31],["c",1.2,-.63,2.61,-.99,4.23,-1.11],["z"],["m",.57,.66],["c",-.87,-.15,-1.53,0,-2.04,.51],["c",-.15,.15,-.24,.27,-.33,.48],["c",-.24,.51,-.36,1.08,-.33,1.77],["c",.03,.69,.18,1.26,.42,1.77],["c",.6,1.17,1.74,1.98,3.18,2.22],["c",1.11,.21,1.95,-.15,2.34,-.99],["c",.24,-.51,.36,-1.08,.33,-1.8],["c",-.06,-1.11,-.45,-2.04,-1.17,-2.76],["c",-.63,-.63,-1.47,-1.05,-2.4,-1.2],["z"]],w:14.985,h:8.097},"noteheads.half":{d:[["M",7.44,-4.05],["c",.06,-.03,.27,-.03,.48,-.03],["c",1.05,0,1.71,.24,2.1,.81],["c",.42,.6,.45,1.35,.18,2.4],["c",-.42,1.59,-1.14,2.73,-2.16,3.39],["c",-1.41,.93,-3.18,1.44,-5.4,1.53],["c",-1.17,.03,-1.89,-.21,-2.28,-.81],["c",-.42,-.6,-.45,-1.35,-.18,-2.4],["c",.42,-1.59,1.14,-2.73,2.16,-3.39],["c",.63,-.42,1.23,-.72,1.98,-.96],["c",.9,-.3,1.65,-.42,3.12,-.54],["z"],["m",1.29,.87],["c",-.27,-.09,-.63,-.12,-.9,-.03],["c",-.72,.24,-1.53,.69,-3.27,1.8],["c",-2.34,1.5,-3.3,2.25,-3.57,2.79],["c",-.36,.72,-.06,1.5,.66,1.77],["c",.24,.12,.69,.09,.99,0],["c",.84,-.3,1.92,-.93,4.14,-2.37],["c",1.62,-1.08,2.37,-1.71,2.61,-2.19],["c",.36,-.72,.06,-1.5,-.66,-1.77],["z"]],w:10.37,h:8.132},"noteheads.quarter":{d:[["M",6.09,-4.05],["c",.36,-.03,1.2,0,1.53,.06],["c",1.17,.24,1.89,.84,2.16,1.83],["c",.06,.18,.06,.3,.06,.66],["c",0,.45,0,.63,-.15,1.08],["c",-.66,2.04,-3.06,3.93,-5.52,4.38],["c",-.54,.09,-1.44,.09,-1.83,.03],["c",-1.23,-.27,-1.98,-.87,-2.25,-1.86],["c",-.06,-.18,-.06,-.3,-.06,-.66],["c",0,-.45,0,-.63,.15,-1.08],["c",.24,-.78,.75,-1.53,1.44,-2.22],["c",1.2,-1.2,2.85,-2.01,4.47,-2.22],["z"]],w:9.81,h:8.094},"noteheads.slash.nostem":{d:[["M",9.3,-7.77],["c",.06,-.06,.18,-.06,1.71,-.06],["l",1.65,0],["l",.09,.09],["c",.06,.06,.06,.09,.06,.15],["c",-.03,.12,-9.21,15.24,-9.3,15.33],["c",-.06,.06,-.18,.06,-1.71,.06],["l",-1.65,0],["l",-.09,-.09],["c",-.06,-.06,-.06,-.09,-.06,-.15],["c",.03,-.12,9.21,-15.24,9.3,-15.33],["z"]],w:12.81,h:15.63},"noteheads.indeterminate":{d:[["M",.78,-4.05],["c",.12,-.03,.24,-.03,.36,.03],["c",.03,.03,.93,.72,1.95,1.56],["l",1.86,1.5],["l",1.86,-1.5],["c",1.02,-.84,1.92,-1.53,1.95,-1.56],["c",.21,-.12,.33,-.09,.75,.24],["c",.3,.27,.36,.36,.36,.54],["c",0,.03,-.03,.12,-.06,.18],["c",-.03,.06,-.9,.75,-1.89,1.56],["l",-1.8,1.47],["c",0,.03,.81,.69,1.8,1.5],["c",.99,.81,1.86,1.5,1.89,1.56],["c",.03,.06,.06,.15,.06,.18],["c",0,.18,-.06,.27,-.36,.54],["c",-.42,.33,-.54,.36,-.75,.24],["c",-.03,-.03,-.93,-.72,-1.95,-1.56],["l",-1.86,-1.5],["l",-1.86,1.5],["c",-1.02,.84,-1.92,1.53,-1.95,1.56],["c",-.21,.12,-.33,.09,-.75,-.24],["c",-.3,-.27,-.36,-.36,-.36,-.54],["c",0,-.03,.03,-.12,.06,-.18],["c",.03,-.06,.9,-.75,1.89,-1.56],["l",1.8,-1.47],["c",0,-.03,-.81,-.69,-1.8,-1.5],["c",-.99,-.81,-1.86,-1.5,-1.89,-1.56],["c",-.06,-.12,-.09,-.21,-.03,-.36],["c",.03,-.09,.57,-.57,.72,-.63],["z"]],w:9.843,h:8.139},"scripts.ufermata":{d:[["M",-.75,-10.77],["c",.12,0,.45,-.03,.69,-.03],["c",2.91,-.03,5.55,1.53,7.41,4.35],["c",1.17,1.71,1.95,3.72,2.43,6.03],["c",.12,.51,.12,.57,.03,.69],["c",-.12,.21,-.48,.27,-.69,.12],["c",-.12,-.09,-.18,-.24,-.27,-.69],["c",-.78,-3.63,-3.42,-6.54,-6.78,-7.38],["c",-.78,-.21,-1.2,-.24,-2.07,-.24],["c",-.63,0,-.84,0,-1.2,.06],["c",-1.83,.27,-3.42,1.08,-4.8,2.37],["c",-1.41,1.35,-2.4,3.21,-2.85,5.19],["c",-.09,.45,-.15,.6,-.27,.69],["c",-.21,.15,-.57,.09,-.69,-.12],["c",-.09,-.12,-.09,-.18,.03,-.69],["c",.33,-1.62,.78,-3,1.47,-4.38],["c",1.77,-3.54,4.44,-5.67,7.56,-5.97],["z"],["m",.33,7.47],["c",1.38,-.3,2.58,.9,2.31,2.25],["c",-.15,.72,-.78,1.35,-1.47,1.5],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.748,h:11.289},"scripts.dfermata":{d:[["M",-9.63,-.42],["c",.15,-.09,.36,-.06,.51,.03],["c",.12,.09,.18,.24,.27,.66],["c",.78,3.66,3.42,6.57,6.78,7.41],["c",.78,.21,1.2,.24,2.07,.24],["c",.63,0,.84,0,1.2,-.06],["c",1.83,-.27,3.42,-1.08,4.8,-2.37],["c",1.41,-1.35,2.4,-3.21,2.85,-5.22],["c",.09,-.42,.15,-.57,.27,-.66],["c",.21,-.15,.57,-.09,.69,.12],["c",.09,.12,.09,.18,-.03,.69],["c",-.33,1.62,-.78,3,-1.47,4.38],["c",-1.92,3.84,-4.89,6,-8.31,6],["c",-3.42,0,-6.39,-2.16,-8.31,-6],["c",-.48,-.96,-.84,-1.92,-1.14,-2.97],["c",-.18,-.69,-.42,-1.74,-.42,-1.92],["c",0,-.12,.09,-.27,.24,-.33],["z"],["m",9.21,0],["c",1.2,-.27,2.34,.63,2.34,1.86],["c",0,.9,-.66,1.68,-1.5,1.89],["c",-1.38,.27,-2.58,-.93,-2.31,-2.31],["c",.15,-.69,.78,-1.29,1.47,-1.44],["z"]],w:19.744,h:11.274},"scripts.sforzato":{d:[["M",-6.45,-3.69],["c",.06,-.03,.15,-.06,.18,-.06],["c",.06,0,2.85,.72,6.24,1.59],["l",6.33,1.65],["c",.33,.06,.45,.21,.45,.51],["c",0,.3,-.12,.45,-.45,.51],["l",-6.33,1.65],["c",-3.39,.87,-6.18,1.59,-6.21,1.59],["c",-.21,0,-.48,-.24,-.51,-.45],["c",0,-.15,.06,-.36,.18,-.45],["c",.09,-.06,.87,-.27,3.84,-1.05],["c",2.04,-.54,3.84,-.99,4.02,-1.02],["c",.15,-.06,1.14,-.24,2.22,-.42],["c",1.05,-.18,1.92,-.36,1.92,-.36],["c",0,0,-.87,-.18,-1.92,-.36],["c",-1.08,-.18,-2.07,-.36,-2.22,-.42],["c",-.18,-.03,-1.98,-.48,-4.02,-1.02],["c",-2.97,-.78,-3.75,-.99,-3.84,-1.05],["c",-.12,-.09,-.18,-.3,-.18,-.45],["c",.03,-.15,.15,-.3,.3,-.39],["z"]],w:13.5,h:7.5},"scripts.staccato":{d:[["M",-.36,-1.47],["c",.93,-.21,1.86,.51,1.86,1.47],["c",0,.93,-.87,1.65,-1.8,1.47],["c",-.54,-.12,-1.02,-.57,-1.14,-1.08],["c",-.21,-.81,.27,-1.65,1.08,-1.86],["z"]],w:2.989,h:3.004},"scripts.tenuto":{d:[["M",-4.2,-.48],["l",.12,-.06],["l",4.08,0],["l",4.08,0],["l",.12,.06],["c",.39,.21,.39,.75,0,.96],["l",-.12,.06],["l",-4.08,0],["l",-4.08,0],["l",-.12,-.06],["c",-.39,-.21,-.39,-.75,0,-.96],["z"]],w:8.985,h:1.08},"scripts.umarcato":{d:[["M",-.15,-8.19],["c",.15,-.12,.36,-.03,.45,.15],["c",.21,.42,3.45,7.65,3.45,7.71],["c",0,.12,-.12,.27,-.21,.3],["c",-.03,.03,-.51,.03,-1.14,.03],["c",-1.05,0,-1.08,0,-1.17,-.06],["c",-.09,-.06,-.24,-.36,-1.17,-2.4],["c",-.57,-1.29,-1.05,-2.34,-1.08,-2.34],["c",0,-.03,-.51,1.02,-1.08,2.34],["c",-.93,2.07,-1.08,2.34,-1.14,2.4],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.06,3.24,-7.32,3.45,-7.71],["c",.03,-.06,.09,-.15,.15,-.15],["z"]],w:7.5,h:8.245},"scripts.dmarcato":{d:[["M",-3.57,.03],["c",.03,0,.57,-.03,1.17,-.03],["c",1.05,0,1.08,0,1.17,.06],["c",.09,.06,.24,.36,1.17,2.4],["c",.57,1.29,1.05,2.34,1.08,2.34],["c",0,.03,.51,-1.02,1.08,-2.34],["c",.93,-2.07,1.08,-2.34,1.14,-2.4],["c",.06,-.03,.15,-.06,.18,-.06],["c",.15,0,.33,.18,.33,.33],["c",0,.09,-3.45,7.74,-3.54,7.83],["c",-.12,.12,-.3,.12,-.42,0],["c",-.09,-.09,-3.54,-7.74,-3.54,-7.83],["c",0,-.09,.12,-.27,.18,-.3],["z"]],w:7.5,h:8.25},"scripts.stopped":{d:[["M",-.27,-4.08],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.5],["l",0,1.47],["l",1.47,0],["l",1.5,0],["l",.15,.06],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.09,.36,0,.54],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.12,.06,-.18,.06,-1.62,.06],["l",-1.47,0],["l",0,1.47],["l",0,1.47],["l",-.06,.15],["c",-.09,.18,-.15,.24,-.33,.33],["c",-.18,.09,-.36,.09,-.54,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["l",-.06,-.15],["l",0,-1.47],["l",0,-1.47],["l",-1.47,0],["c",-1.44,0,-1.5,0,-1.62,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.47,0],["l",1.47,0],["l",0,-1.47],["c",0,-1.44,0,-1.5,.06,-1.62],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:8.295,h:8.295},"scripts.upbow":{d:[["M",-4.65,-15.54],["c",.12,-.09,.36,-.06,.48,.03],["c",.03,.03,.09,.09,.12,.15],["c",.03,.06,.66,2.13,1.41,4.62],["c",1.35,4.41,1.38,4.56,2.01,6.96],["l",.63,2.46],["l",.63,-2.46],["c",.63,-2.4,.66,-2.55,2.01,-6.96],["c",.75,-2.49,1.38,-4.56,1.41,-4.62],["c",.06,-.15,.18,-.21,.36,-.24],["c",.15,0,.3,.06,.39,.18],["c",.15,.21,.24,-.18,-2.1,7.56],["c",-1.2,3.96,-2.22,7.32,-2.25,7.41],["c",0,.12,-.06,.27,-.09,.3],["c",-.12,.21,-.6,.21,-.72,0],["c",-.03,-.03,-.09,-.18,-.09,-.3],["c",-.03,-.09,-1.05,-3.45,-2.25,-7.41],["c",-2.34,-7.74,-2.25,-7.35,-2.1,-7.56],["c",.03,-.03,.09,-.09,.15,-.12],["z"]],w:9.73,h:15.608},"scripts.downbow":{d:[["M",-5.55,-9.93],["l",.09,-.06],["l",5.46,0],["l",5.46,0],["l",.09,.06],["l",.06,.09],["l",0,4.77],["c",0,5.28,0,4.89,-.18,5.01],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.06,-.09,-.06,-.18,-.06,-2.97],["l",0,-2.85],["l",-4.83,0],["l",-4.83,0],["l",0,2.85],["c",0,2.79,0,2.88,-.06,2.97],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.21,-.06,-4.89],["l",0,-4.77],["z"]],w:11.22,h:9.992},"scripts.turn":{d:[["M",-4.77,-3.9],["c",.36,-.06,1.05,-.06,1.44,.03],["c",.78,.15,1.5,.51,2.34,1.14],["c",.6,.45,1.05,.87,2.22,2.01],["c",1.11,1.08,1.62,1.5,2.22,1.86],["c",.6,.36,1.32,.57,1.92,.57],["c",.9,0,1.71,-.57,1.89,-1.35],["c",.24,-.93,-.39,-1.89,-1.35,-2.1],["l",-.15,-.06],["l",-.09,.15],["c",-.03,.09,-.15,.24,-.24,.33],["c",-.72,.72,-2.04,.54,-2.49,-.36],["c",-.48,-.93,.03,-1.86,1.17,-2.19],["c",.3,-.09,1.02,-.09,1.35,0],["c",.99,.27,1.74,.87,2.25,1.83],["c",.69,1.41,.63,3,-.21,4.26],["c",-.21,.3,-.69,.81,-.99,1.02],["c",-.3,.21,-.84,.45,-1.17,.54],["c",-1.23,.36,-2.49,.15,-3.72,-.6],["c",-.75,-.48,-1.41,-1.02,-2.85,-2.46],["c",-1.11,-1.08,-1.62,-1.5,-2.22,-1.86],["c",-.6,-.36,-1.32,-.57,-1.92,-.57],["c",-.9,0,-1.71,.57,-1.89,1.35],["c",-.24,.93,.39,1.89,1.35,2.1],["l",.15,.06],["l",.09,-.15],["c",.03,-.09,.15,-.24,.24,-.33],["c",.72,-.72,2.04,-.54,2.49,.36],["c",.48,.93,-.03,1.86,-1.17,2.19],["c",-.3,.09,-1.02,.09,-1.35,0],["c",-.99,-.27,-1.74,-.87,-2.25,-1.83],["c",-.69,-1.41,-.63,-3,.21,-4.26],["c",.21,-.3,.69,-.81,.99,-1.02],["c",.48,-.33,1.11,-.57,1.74,-.66],["z"]],w:16.366,h:7.893},"scripts.trill":{d:[["M",-.51,-16.02],["c",.12,-.09,.21,-.18,.21,-.18],["l",-.81,4.02],["l",-.81,4.02],["c",.03,0,.51,-.27,1.08,-.6],["c",.6,-.3,1.14,-.63,1.26,-.66],["c",1.14,-.54,2.31,-.6,3.09,-.18],["c",.27,.15,.54,.36,.6,.51],["l",.06,.12],["l",.21,-.21],["c",.9,-.81,2.22,-.99,3.12,-.42],["c",.6,.42,.9,1.14,.78,2.07],["c",-.15,1.29,-1.05,2.31,-1.95,2.25],["c",-.48,-.03,-.78,-.3,-.96,-.81],["c",-.09,-.27,-.09,-.9,-.03,-1.2],["c",.21,-.75,.81,-1.23,1.59,-1.32],["l",.24,-.03],["l",-.09,-.12],["c",-.51,-.66,-1.62,-.63,-2.31,.03],["c",-.39,.42,-.3,.09,-1.23,4.77],["l",-.81,4.14],["c",-.03,0,-.12,-.03,-.21,-.09],["c",-.33,-.15,-.54,-.18,-.99,-.18],["c",-.42,0,-.66,.03,-1.05,.18],["c",-.12,.06,-.21,.09,-.21,.09],["c",0,-.03,.36,-1.86,.81,-4.11],["c",.9,-4.47,.87,-4.26,.69,-4.53],["c",-.21,-.36,-.66,-.51,-1.17,-.36],["c",-.15,.06,-2.22,1.14,-2.58,1.38],["c",-.12,.09,-.12,.09,-.21,.6],["l",-.09,.51],["l",.21,.24],["c",.63,.75,1.02,1.47,1.2,2.19],["c",.06,.27,.06,.36,.06,.81],["c",0,.42,0,.54,-.06,.78],["c",-.15,.54,-.33,.93,-.63,1.35],["c",-.18,.24,-.57,.63,-.81,.78],["c",-.24,.15,-.63,.36,-.84,.42],["c",-.27,.06,-.66,.06,-.87,.03],["c",-.81,-.18,-1.32,-1.05,-1.38,-2.46],["c",-.03,-.6,.03,-.99,.33,-2.46],["c",.21,-1.08,.24,-1.32,.21,-1.29],["c",-1.2,.48,-2.4,.75,-3.21,.72],["c",-.69,-.06,-1.17,-.3,-1.41,-.72],["c",-.39,-.75,-.12,-1.8,.66,-2.46],["c",.24,-.18,.69,-.42,1.02,-.51],["c",.69,-.18,1.53,-.15,2.31,.09],["c",.3,.09,.75,.3,.99,.45],["c",.12,.09,.15,.09,.15,.03],["c",.03,-.03,.33,-1.59,.72,-3.45],["c",.36,-1.86,.66,-3.42,.69,-3.45],["c",0,-.03,.03,-.03,.21,.03],["c",.21,.06,.27,.06,.48,.06],["c",.42,-.03,.78,-.18,1.26,-.48],["c",.15,-.12,.36,-.27,.48,-.39],["z"],["m",-5.73,7.68],["c",-.27,-.03,-.96,-.06,-1.2,-.03],["c",-.81,.12,-1.35,.57,-1.5,1.2],["c",-.18,.66,.12,1.14,.75,1.29],["c",.66,.12,1.92,-.12,3.18,-.66],["l",.33,-.15],["l",.09,-.39],["c",.06,-.21,.09,-.42,.09,-.45],["c",0,-.03,-.45,-.3,-.75,-.45],["c",-.27,-.15,-.66,-.27,-.99,-.36],["z"],["m",4.29,3.63],["c",-.24,-.39,-.51,-.75,-.51,-.69],["c",-.06,.12,-.39,1.92,-.45,2.28],["c",-.09,.54,-.12,1.14,-.06,1.38],["c",.06,.42,.21,.6,.51,.57],["c",.39,-.06,.75,-.48,.93,-1.14],["c",.09,-.33,.09,-1.05,0,-1.38],["c",-.09,-.39,-.24,-.69,-.42,-1.02],["z"]],w:17.963,h:16.49},"scripts.segno":{d:[["M",-3.72,-11.22],["c",.78,-.09,1.59,.03,2.31,.42],["c",1.2,.6,2.01,1.71,2.31,3.09],["c",.09,.42,.09,1.2,.03,1.5],["c",-.15,.45,-.39,.81,-.66,.93],["c",-.33,.18,-.84,.21,-1.23,.15],["c",-.81,-.18,-1.32,-.93,-1.26,-1.89],["c",.03,-.36,.09,-.57,.24,-.9],["c",.15,-.33,.45,-.6,.72,-.75],["c",.12,-.06,.18,-.09,.18,-.12],["c",0,-.03,-.03,-.15,-.09,-.24],["c",-.18,-.45,-.54,-.87,-.96,-1.08],["c",-1.11,-.57,-2.34,-.18,-2.88,.9],["c",-.24,.51,-.33,1.11,-.24,1.83],["c",.27,1.92,1.5,3.54,3.93,5.13],["c",.48,.33,1.26,.78,1.29,.78],["c",.03,0,1.35,-2.19,2.94,-4.89],["l",2.88,-4.89],["l",.84,0],["l",.87,0],["l",-.03,.06],["c",-.15,.21,-6.15,10.41,-6.15,10.44],["c",0,0,.21,.15,.48,.27],["c",2.61,1.47,4.35,3.03,5.13,4.65],["c",1.14,2.34,.51,5.07,-1.44,6.39],["c",-.66,.42,-1.32,.63,-2.13,.69],["c",-2.01,.09,-3.81,-1.41,-4.26,-3.54],["c",-.09,-.42,-.09,-1.2,-.03,-1.5],["c",.15,-.45,.39,-.81,.66,-.93],["c",.33,-.18,.84,-.21,1.23,-.15],["c",.81,.18,1.32,.93,1.26,1.89],["c",-.03,.36,-.09,.57,-.24,.9],["c",-.15,.33,-.45,.6,-.72,.75],["c",-.12,.06,-.18,.09,-.18,.12],["c",0,.03,.03,.15,.09,.24],["c",.18,.45,.54,.87,.96,1.08],["c",1.11,.57,2.34,.18,2.88,-.9],["c",.24,-.51,.33,-1.11,.24,-1.83],["c",-.27,-1.92,-1.5,-3.54,-3.93,-5.13],["c",-.48,-.33,-1.26,-.78,-1.29,-.78],["c",-.03,0,-1.35,2.19,-2.91,4.89],["l",-2.88,4.89],["l",-.87,0],["l",-.87,0],["l",.03,-.06],["c",.15,-.21,6.15,-10.41,6.15,-10.44],["c",0,0,-.21,-.15,-.48,-.3],["c",-2.61,-1.44,-4.35,-3,-5.13,-4.62],["c",-.9,-1.89,-.72,-4.02,.48,-5.52],["c",.69,-.84,1.68,-1.41,2.73,-1.53],["z"],["m",8.76,9.09],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"],["m",-10.53,2.61],["c",.03,-.03,.15,-.03,.27,-.03],["c",.33,.03,.57,.18,.72,.48],["c",.09,.18,.09,.57,0,.75],["c",-.09,.18,-.21,.3,-.36,.39],["c",-.15,.06,-.21,.06,-.39,.06],["c",-.21,0,-.27,0,-.39,-.06],["c",-.3,-.15,-.48,-.45,-.48,-.75],["c",0,-.39,.24,-.72,.63,-.84],["z"]],w:15,h:22.504},"scripts.coda":{d:[["M",-.21,-10.47],["c",.18,-.12,.42,-.06,.54,.12],["c",.06,.09,.06,.18,.06,1.5],["l",0,1.38],["l",.18,0],["c",.39,.06,.96,.24,1.38,.48],["c",1.68,.93,2.82,3.24,3.03,6.12],["c",.03,.24,.03,.45,.03,.45],["c",0,.03,.6,.03,1.35,.03],["c",1.5,0,1.47,0,1.59,.18],["c",.09,.12,.09,.3,0,.42],["c",-.12,.18,-.09,.18,-1.59,.18],["c",-.75,0,-1.35,0,-1.35,.03],["c",0,0,0,.21,-.03,.42],["c",-.24,3.15,-1.53,5.58,-3.45,6.36],["c",-.27,.12,-.72,.24,-.96,.27],["l",-.18,0],["l",0,1.38],["c",0,1.32,0,1.41,-.06,1.5],["c",-.15,.24,-.51,.24,-.66,0],["c",-.06,-.09,-.06,-.18,-.06,-1.5],["l",0,-1.38],["l",-.18,0],["c",-.39,-.06,-.96,-.24,-1.38,-.48],["c",-1.68,-.93,-2.82,-3.24,-3.03,-6.15],["c",-.03,-.21,-.03,-.42,-.03,-.42],["c",0,-.03,-.6,-.03,-1.35,-.03],["c",-1.5,0,-1.47,0,-1.59,-.18],["c",-.09,-.12,-.09,-.3,0,-.42],["c",.12,-.18,.09,-.18,1.59,-.18],["c",.75,0,1.35,0,1.35,-.03],["c",0,0,0,-.21,.03,-.45],["c",.24,-3.12,1.53,-5.55,3.45,-6.33],["c",.27,-.12,.72,-.24,.96,-.27],["l",.18,0],["l",0,-1.38],["c",0,-1.53,0,-1.5,.18,-1.62],["z"],["m",-.18,6.93],["c",0,-2.97,0,-3.15,-.06,-3.15],["c",-.09,0,-.51,.15,-.66,.21],["c",-.87,.51,-1.38,1.62,-1.56,3.51],["c",-.06,.54,-.12,1.59,-.12,2.16],["l",0,.42],["l",1.2,0],["l",1.2,0],["l",0,-3.15],["z"],["m",1.17,-3.06],["c",-.09,-.03,-.21,-.06,-.27,-.09],["l",-.12,0],["l",0,3.15],["l",0,3.15],["l",1.2,0],["l",1.2,0],["l",0,-.81],["c",-.06,-2.4,-.33,-3.69,-.93,-4.59],["c",-.27,-.39,-.66,-.69,-1.08,-.81],["z"],["m",-1.17,10.14],["l",0,-3.15],["l",-1.2,0],["l",-1.2,0],["l",0,.81],["c",.03,.96,.06,1.47,.15,2.13],["c",.24,2.04,.96,3.12,2.13,3.36],["l",.12,0],["l",0,-3.15],["z"],["m",3.18,-2.34],["l",0,-.81],["l",-1.2,0],["l",-1.2,0],["l",0,3.15],["l",0,3.15],["l",.12,0],["c",1.17,-.24,1.89,-1.32,2.13,-3.36],["c",.09,-.66,.12,-1.17,.15,-2.13],["z"]],w:16.035,h:21.062},"scripts.comma":{d:[["M",1.14,-4.62],["c",.3,-.12,.69,-.03,.93,.15],["c",.12,.12,.36,.45,.51,.78],["c",.9,1.77,.54,4.05,-1.08,6.75],["c",-.36,.63,-.87,1.38,-.96,1.44],["c",-.18,.12,-.42,.06,-.54,-.12],["c",-.09,-.18,-.09,-.3,.12,-.6],["c",.96,-1.44,1.44,-2.97,1.38,-4.35],["c",-.06,-.93,-.3,-1.68,-.78,-2.46],["c",-.27,-.39,-.33,-.63,-.24,-.96],["c",.09,-.27,.36,-.54,.66,-.63],["z"]],w:3.042,h:9.237},"scripts.roll":{d:[["M",1.95,-6],["c",.21,-.09,.36,-.09,.57,0],["c",.39,.15,.63,.39,1.47,1.35],["c",.66,.75,.78,.87,1.08,1.05],["c",.75,.45,1.65,.42,2.4,-.06],["c",.12,-.09,.27,-.27,.54,-.6],["c",.42,-.54,.51,-.63,.69,-.63],["c",.09,0,.3,.12,.36,.21],["c",.09,.12,.12,.3,.03,.42],["c",-.06,.12,-3.15,3.9,-3.3,4.08],["c",-.06,.06,-.18,.12,-.27,.18],["c",-.27,.12,-.6,.06,-.99,-.27],["c",-.27,-.21,-.42,-.39,-1.08,-1.14],["c",-.63,-.72,-.81,-.9,-1.17,-1.08],["c",-.36,-.18,-.57,-.21,-.99,-.21],["c",-.39,0,-.63,.03,-.93,.18],["c",-.36,.15,-.51,.27,-.9,.81],["c",-.24,.27,-.45,.51,-.48,.54],["c",-.12,.09,-.27,.06,-.39,0],["c",-.24,-.15,-.33,-.39,-.21,-.6],["c",.09,-.12,3.18,-3.87,3.33,-4.02],["c",.06,-.06,.18,-.15,.24,-.21],["z"]],w:10.817,h:6.125},"scripts.prall":{d:[["M",-4.38,-3.69],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.57,-.84,1.23,-1.83],["c",1.14,-1.68,1.23,-1.83,1.35,-1.89],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["c",-.03,0,-.57,.84,-1.23,1.83],["c",-1.14,1.68,-1.23,1.83,-1.35,1.89],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["z"]],w:15.011,h:7.5},"scripts.arpeggio":{d:[["M",1.5,0],["c",1.5,2,1.5,3,1.5,3],["s",0,1,-2,1.5],["s",-.5,3,1,5.5],["l",1.5,0],["s",-1.75,-2,-1.9,-3.25],["s",2.15,-.6,2.95,-1.6],["s",.45,-1,.5,-1.25],["s",0,-1,-2,-3.9],["l",-1.5,0],["z"]],w:5,h:10},"scripts.mordent":{d:[["M",-.21,-4.95],["c",.27,-.15,.63,0,.75,.27],["c",.06,.12,.06,.24,.06,1.44],["l",0,1.29],["l",.57,-.84],["c",.51,-.75,.57,-.84,.69,-.9],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["l",.48,-.69],["c",.51,-.78,.54,-.84,.69,-.9],["c",.42,-.18,.87,.15,.81,.6],["c",-.03,.12,-.3,.51,-1.5,2.37],["c",-1.38,2.07,-1.5,2.22,-1.62,2.28],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.83,-1.89],["c",-.81,-.99,-1.5,-1.8,-1.53,-1.86],["c",-.06,-.03,-.06,-.03,-.12,.03],["c",-.06,.06,-.06,.15,-.06,2.28],["c",0,1.95,0,2.25,-.06,2.34],["c",-.18,.45,-.81,.48,-1.05,.03],["c",-.03,-.06,-.06,-.24,-.06,-1.41],["l",0,-1.35],["l",-.57,.84],["c",-.54,.78,-.6,.87,-.72,.93],["c",-.06,.03,-.18,.06,-.24,.06],["c",-.3,0,-.27,.03,-1.89,-1.95],["l",-1.53,-1.83],["l",-.48,.69],["c",-.51,.78,-.54,.84,-.69,.9],["c",-.42,.18,-.87,-.15,-.81,-.6],["c",.03,-.12,.3,-.51,1.5,-2.37],["c",1.38,-2.07,1.5,-2.22,1.62,-2.28],["c",.06,-.03,.18,-.06,.24,-.06],["c",.3,0,.27,-.03,1.89,1.95],["l",1.53,1.83],["c",.03,0,.06,-.06,.09,-.09],["c",.06,-.12,.06,-.15,.06,-2.28],["c",0,-1.92,0,-2.22,.06,-2.31],["c",.06,-.15,.15,-.24,.3,-.3],["z"]],w:15.011,h:10.012},"flags.u8th":{d:[["M",-.42,3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",0,.18],["c",0,.3,.06,.84,.12,1.23],["c",.24,1.53,.9,3.12,2.13,5.16],["l",.99,1.59],["c",.87,1.44,1.38,2.34,1.77,3.09],["c",.81,1.68,1.2,3.06,1.26,4.53],["c",.03,1.53,-.21,3.27,-.75,5.01],["c",-.21,.69,-.51,1.5,-.6,1.59],["c",-.09,.12,-.27,.21,-.42,.21],["c",-.15,0,-.42,-.12,-.51,-.21],["c",-.15,-.18,-.18,-.42,-.09,-.66],["c",.15,-.33,.45,-1.2,.57,-1.62],["c",.42,-1.38,.6,-2.58,.6,-3.9],["c",0,-.66,0,-.81,-.06,-1.11],["c",-.39,-2.07,-1.8,-4.26,-4.59,-7.14],["l",-.42,-.45],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["z"]],w:6.692,h:22.59},"flags.u16th":{d:[["M",-.42,7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,.39],["c",.06,1.08,.39,2.19,.99,3.39],["c",.45,.9,.87,1.59,1.95,3.12],["c",1.29,1.86,1.77,2.64,2.22,3.57],["c",.45,.93,.72,1.8,.87,2.64],["c",.06,.51,.06,1.5,0,1.92],["c",-.12,.6,-.3,1.2,-.54,1.71],["l",-.09,.24],["l",.18,.45],["c",.51,1.2,.72,2.22,.69,3.42],["c",-.06,1.53,-.39,3.03,-.99,4.53],["c",-.3,.75,-.36,.81,-.57,.9],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.12,-.75],["c",.66,-1.41,1.02,-2.88,1.08,-4.32],["c",0,-.6,-.03,-1.05,-.18,-1.59],["c",-.3,-1.2,-.99,-2.4,-2.25,-3.87],["c",-.42,-.48,-1.53,-1.62,-2.19,-2.22],["l",-.45,-.42],["l",-.03,1.11],["l",0,1.11],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["z"],["m",1.65,.09],["c",-.3,-.3,-.69,-.72,-.9,-.87],["l",-.33,-.33],["l",0,.15],["c",0,.3,.06,.81,.15,1.26],["c",.27,1.29,.87,2.61,2.04,4.29],["c",.15,.24,.6,.87,.96,1.38],["l",1.08,1.53],["l",.42,.63],["c",.03,0,.12,-.36,.21,-.72],["c",.06,-.33,.06,-1.2,0,-1.62],["c",-.33,-1.71,-1.44,-3.48,-3.63,-5.7],["z"]],w:6.693,h:26.337},"flags.u32nd":{d:[["M",-.42,11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,.36],["c",.09,1.68,.69,3.27,2.07,5.46],["l",.87,1.35],["c",1.02,1.62,1.47,2.37,1.86,3.18],["c",.48,1.02,.78,1.92,.93,2.88],["c",.06,.48,.06,1.5,0,1.89],["c",-.09,.42,-.21,.87,-.36,1.26],["l",-.12,.3],["l",.15,.39],["c",.69,1.56,.84,2.88,.54,4.38],["c",-.09,.45,-.27,1.08,-.45,1.47],["l",-.12,.24],["l",.18,.36],["c",.33,.72,.57,1.56,.69,2.34],["c",.12,1.02,-.06,2.52,-.42,3.84],["c",-.27,.93,-.75,2.13,-.93,2.31],["c",-.18,.15,-.45,.18,-.66,.09],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.06,-.6],["c",.21,-.36,.42,-.9,.57,-1.38],["c",.51,-1.41,.69,-3.06,.48,-4.08],["c",-.15,-.81,-.57,-1.68,-1.2,-2.55],["c",-.72,-.99,-1.83,-2.13,-3.3,-3.33],["l",-.48,-.42],["l",-.03,1.53],["l",0,1.56],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["z"],["m",1.26,-3.96],["c",-.27,-.3,-.54,-.6,-.66,-.72],["l",-.18,-.21],["l",0,.42],["c",.06,.87,.24,1.74,.66,2.67],["c",.36,.87,.96,1.86,1.92,3.18],["c",.21,.33,.63,.87,.87,1.23],["c",.27,.39,.6,.84,.75,1.08],["l",.27,.39],["l",.03,-.12],["c",.12,-.45,.15,-1.05,.09,-1.59],["c",-.27,-1.86,-1.38,-3.78,-3.75,-6.33],["z"],["m",-.27,6.09],["c",-.27,-.21,-.48,-.42,-.51,-.45],["c",-.06,-.03,-.06,-.03,-.06,.21],["c",0,.9,.3,2.04,.81,3.09],["c",.48,1.02,.96,1.77,2.37,3.63],["c",.6,.78,1.05,1.44,1.29,1.77],["c",.06,.12,.15,.21,.15,.18],["c",.03,-.03,.18,-.57,.24,-.87],["c",.06,-.45,.06,-1.32,-.03,-1.74],["c",-.09,-.48,-.24,-.9,-.51,-1.44],["c",-.66,-1.35,-1.83,-2.7,-3.75,-4.38],["z"]],w:6.697,h:32.145},"flags.u64th":{d:[["M",-.42,15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,.36],["c",.06,1.2,.39,2.37,1.02,3.66],["c",.39,.81,.84,1.56,1.8,3.09],["c",.81,1.26,1.05,1.68,1.35,2.22],["c",.87,1.5,1.35,2.79,1.56,4.08],["c",.06,.54,.06,1.56,-.03,2.04],["c",-.09,.48,-.21,.99,-.36,1.35],["l",-.12,.27],["l",.12,.27],["c",.09,.15,.21,.45,.27,.66],["c",.69,1.89,.63,3.66,-.18,5.46],["l",-.18,.39],["l",.15,.33],["c",.3,.66,.51,1.44,.63,2.1],["c",.06,.48,.06,1.35,0,1.71],["c",-.15,.57,-.42,1.2,-.78,1.68],["l",-.21,.27],["l",.18,.33],["c",.57,1.05,.93,2.13,1.02,3.18],["c",.06,.72,0,1.83,-.21,2.79],["c",-.18,1.02,-.63,2.34,-1.02,3.09],["c",-.15,.33,-.48,.45,-.78,.3],["c",-.18,-.09,-.27,-.18,-.33,-.33],["c",-.09,-.18,-.06,-.3,.03,-.54],["c",.75,-1.5,1.23,-3.45,1.17,-4.89],["c",-.06,-1.02,-.42,-2.01,-1.17,-3.15],["c",-.48,-.72,-1.02,-1.35,-1.89,-2.22],["c",-.57,-.57,-1.56,-1.5,-1.92,-1.77],["l",-.12,-.09],["l",0,1.68],["l",0,1.68],["l",-.21,0],["l",-.21,0],["l",0,-15],["z"],["m",.93,-8.07],["c",-.27,-.3,-.48,-.54,-.51,-.54],["c",0,0,0,.69,.03,1.02],["c",.15,1.47,.75,2.94,2.04,4.83],["l",1.08,1.53],["c",.39,.57,.84,1.2,.99,1.44],["c",.15,.24,.3,.45,.3,.45],["c",0,0,.03,-.09,.06,-.21],["c",.36,-1.59,-.15,-3.33,-1.47,-5.4],["c",-.63,-.93,-1.35,-1.83,-2.52,-3.12],["z"],["m",.06,6.72],["c",-.24,-.21,-.48,-.42,-.51,-.45],["l",-.06,-.06],["l",0,.33],["c",0,1.2,.3,2.34,.93,3.6],["c",.45,.9,.96,1.68,2.25,3.51],["c",.39,.54,.84,1.17,1.02,1.44],["c",.21,.33,.33,.51,.33,.48],["c",.06,-.09,.21,-.63,.3,-.99],["c",.06,-.33,.06,-.45,.06,-.96],["c",0,-.6,-.03,-.84,-.18,-1.35],["c",-.3,-1.08,-1.02,-2.28,-2.13,-3.57],["c",-.39,-.45,-1.44,-1.47,-2.01,-1.98],["z"],["m",0,6.72],["c",-.24,-.21,-.48,-.39,-.51,-.42],["l",-.06,-.06],["l",0,.33],["c",0,1.41,.45,2.82,1.38,4.35],["c",.42,.72,.72,1.14,1.86,2.73],["c",.36,.45,.75,.99,.87,1.2],["c",.15,.21,.3,.36,.3,.36],["c",.06,0,.3,-.48,.39,-.75],["c",.09,-.36,.12,-.63,.12,-1.05],["c",-.06,-1.05,-.45,-2.04,-1.2,-3.18],["c",-.57,-.87,-1.11,-1.53,-2.07,-2.49],["c",-.36,-.33,-.84,-.78,-1.08,-1.02],["z"]],w:6.682,h:39.694},"flags.d8th":{d:[["M",5.67,-21.63],["c",.24,-.12,.54,-.06,.69,.15],["c",.06,.06,.21,.36,.39,.66],["c",.84,1.77,1.26,3.36,1.32,5.1],["c",.03,1.29,-.21,2.37,-.81,3.63],["c",-.6,1.23,-1.26,2.13,-3.21,4.38],["c",-1.35,1.53,-1.86,2.19,-2.4,2.97],["c",-.63,.93,-1.11,1.92,-1.38,2.79],["c",-.15,.54,-.27,1.35,-.27,1.8],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-3.75],["l",0,-3.75],["l",.21,0],["l",.21,0],["l",.48,-.3],["c",1.83,-1.11,3.12,-2.1,4.17,-3.12],["c",.78,-.81,1.32,-1.53,1.71,-2.31],["c",.45,-.93,.6,-1.74,.51,-2.88],["c",-.12,-1.56,-.63,-3.18,-1.47,-4.68],["c",-.12,-.21,-.15,-.33,-.06,-.51],["c",.06,-.15,.15,-.24,.33,-.33],["z"]],w:8.492,h:21.691},"flags.ugrace":{d:[["M",6.03,6.93],["c",.15,-.09,.33,-.06,.51,0],["c",.15,.09,.21,.15,.3,.33],["c",.09,.18,.06,.39,-.03,.54],["c",-.06,.15,-10.89,8.88,-11.07,8.97],["c",-.15,.09,-.33,.06,-.48,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.06,-.39,.03,-.54],["c",.06,-.15,10.89,-8.88,11.07,-8.97],["z"]],w:12.019,h:9.954},"flags.dgrace":{d:[["M",-6.06,-15.93],["c",.18,-.09,.33,-.12,.48,-.06],["c",.18,.09,14.01,8.04,14.1,8.1],["c",.12,.12,.18,.33,.18,.51],["c",-.03,.21,-.15,.39,-.36,.48],["c",-.18,.09,-.33,.12,-.48,.06],["c",-.18,-.09,-14.01,-8.04,-14.1,-8.1],["c",-.12,-.12,-.18,-.33,-.18,-.51],["c",.03,-.21,.15,-.39,.36,-.48],["z"]],w:15.12,h:9.212},"flags.d16th":{d:[["M",6.84,-22.53],["c",.27,-.12,.57,-.06,.72,.15],["c",.15,.15,.33,.87,.45,1.56],["c",.06,.33,.06,1.35,0,1.65],["c",-.06,.33,-.15,.78,-.27,1.11],["c",-.12,.33,-.45,.96,-.66,1.32],["l",-.18,.27],["l",.09,.18],["c",.48,1.02,.72,2.25,.69,3.3],["c",-.06,1.23,-.42,2.28,-1.26,3.45],["c",-.57,.87,-.99,1.32,-3,3.39],["c",-1.56,1.56,-2.22,2.4,-2.76,3.45],["c",-.42,.84,-.66,1.8,-.66,2.55],["l",0,.15],["l",-.21,0],["l",-.21,0],["l",0,-7.5],["l",0,-7.5],["l",.21,0],["l",.21,0],["l",0,1.14],["l",0,1.11],["l",.27,-.15],["c",1.11,-.57,1.77,-.99,2.52,-1.47],["c",2.37,-1.56,3.69,-3.15,4.05,-4.83],["c",.03,-.18,.03,-.39,.03,-.78],["c",0,-.6,-.03,-.93,-.24,-1.5],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.5],["c",-.06,-.18,-.15,-.36,-.15,-.36],["c",-.03,0,-.03,.03,-.06,.06],["c",-.06,.12,-.96,1.02,-1.95,1.98],["c",-.63,.57,-1.26,1.17,-1.44,1.35],["c",-1.53,1.62,-2.28,2.85,-2.55,4.32],["c",-.03,.18,-.03,.54,-.06,.99],["l",0,.69],["l",.18,-.09],["c",.93,-.54,2.1,-1.29,2.82,-1.83],["c",.69,-.51,1.02,-.81,1.53,-1.29],["c",1.86,-1.89,2.37,-3.66,1.68,-5.82],["z"]],w:8.475,h:22.591},"flags.d32nd":{d:[["M",6.84,-29.13],["c",.27,-.12,.57,-.06,.72,.15],["c",.12,.12,.27,.63,.36,1.11],["c",.33,1.59,.06,3.06,-.81,4.47],["l",-.18,.27],["l",.09,.15],["c",.12,.24,.33,.69,.45,1.05],["c",.63,1.83,.45,3.57,-.57,5.22],["l",-.18,.3],["l",.15,.27],["c",.42,.87,.6,1.71,.57,2.61],["c",-.06,1.29,-.48,2.46,-1.35,3.78],["c",-.54,.81,-.93,1.29,-2.46,3],["c",-.51,.54,-1.05,1.17,-1.26,1.41],["c",-1.56,1.86,-2.25,3.36,-2.37,5.01],["l",0,.33],["l",-.21,0],["l",-.21,0],["l",0,-11.25],["l",0,-11.25],["l",.21,0],["l",.21,0],["l",0,1.35],["l",.03,1.35],["l",.78,-.39],["c",1.38,-.69,2.34,-1.26,3.24,-1.92],["c",1.38,-1.02,2.28,-2.13,2.64,-3.21],["c",.15,-.48,.18,-.72,.18,-1.29],["c",0,-.57,-.06,-.9,-.24,-1.47],["c",-.06,-.18,-.12,-.39,-.15,-.45],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.63,7.2],["c",-.09,-.18,-.12,-.21,-.12,-.15],["c",-.03,.09,-1.02,1.08,-2.04,2.04],["c",-1.17,1.08,-1.65,1.56,-2.07,2.04],["c",-.84,.96,-1.38,1.86,-1.68,2.76],["c",-.21,.57,-.27,.99,-.3,1.65],["l",0,.54],["l",.66,-.33],["c",3.57,-1.86,5.49,-3.69,5.94,-5.7],["c",.06,-.39,.06,-1.2,-.03,-1.65],["c",-.06,-.39,-.24,-.9,-.36,-1.2],["z"],["m",-.06,7.2],["c",-.06,-.15,-.12,-.33,-.15,-.45],["l",-.06,-.18],["l",-.18,.21],["l",-1.83,1.83],["c",-.87,.9,-1.77,1.8,-1.95,2.01],["c",-1.08,1.29,-1.62,2.31,-1.89,3.51],["c",-.06,.3,-.06,.51,-.09,.93],["l",0,.57],["l",.09,-.06],["c",.75,-.45,1.89,-1.26,2.52,-1.74],["c",.81,-.66,1.74,-1.53,2.22,-2.16],["c",1.26,-1.53,1.68,-3.06,1.32,-4.47],["z"]],w:8.385,h:29.191},"flags.d64th":{d:[["M",7.08,-32.88],["c",.3,-.12,.66,-.03,.78,.24],["c",.18,.33,.27,2.1,.15,2.64],["c",-.09,.39,-.21,.78,-.39,1.08],["l",-.15,.3],["l",.09,.27],["c",.03,.12,.09,.45,.12,.69],["c",.27,1.44,.18,2.55,-.3,3.6],["l",-.12,.33],["l",.06,.42],["c",.27,1.35,.33,2.82,.21,3.63],["c",-.12,.6,-.3,1.23,-.57,1.8],["l",-.15,.27],["l",.03,.42],["c",.06,1.02,.06,2.7,.03,3.06],["c",-.15,1.47,-.66,2.76,-1.74,4.41],["c",-.45,.69,-.75,1.11,-1.74,2.37],["c",-1.05,1.38,-1.5,1.98,-1.95,2.73],["c",-.93,1.5,-1.38,2.82,-1.44,4.2],["l",0,.42],["l",-.21,0],["l",-.21,0],["l",0,-15],["l",0,-15],["l",.21,0],["l",.21,0],["l",0,1.86],["l",0,1.89],["c",0,0,.21,-.03,.45,-.09],["c",2.22,-.39,4.08,-1.11,5.19,-2.01],["c",.63,-.54,1.02,-1.14,1.2,-1.8],["c",.06,-.3,.06,-1.14,-.03,-1.65],["c",-.03,-.18,-.06,-.39,-.09,-.48],["c",-.03,-.24,.12,-.48,.36,-.6],["z"],["m",-.45,6.15],["c",-.03,-.18,-.06,-.42,-.06,-.54],["l",-.03,-.18],["l",-.33,.3],["c",-.42,.36,-.87,.72,-1.68,1.29],["c",-1.98,1.38,-2.25,1.59,-2.85,2.16],["c",-.75,.69,-1.23,1.44,-1.47,2.19],["c",-.15,.45,-.18,.63,-.21,1.35],["l",0,.66],["l",.39,-.18],["c",1.83,-.9,3.45,-1.95,4.47,-2.91],["c",.93,-.9,1.53,-1.83,1.74,-2.82],["c",.06,-.33,.06,-.87,.03,-1.32],["z"],["m",-.27,4.86],["c",-.03,-.21,-.06,-.36,-.06,-.36],["c",0,-.03,-.12,.09,-.24,.24],["c",-.39,.48,-.99,1.08,-2.16,2.19],["c",-1.47,1.38,-1.92,1.83,-2.46,2.49],["c",-.66,.87,-1.08,1.74,-1.29,2.58],["c",-.09,.42,-.15,.87,-.15,1.44],["l",0,.54],["l",.48,-.33],["c",1.5,-1.02,2.58,-1.89,3.51,-2.82],["c",1.47,-1.47,2.25,-2.85,2.4,-4.26],["c",.03,-.39,.03,-1.17,-.03,-1.71],["z"],["m",-.66,7.68],["c",.03,-.15,.03,-.6,.03,-.99],["l",0,-.72],["l",-.27,.33],["l",-1.74,1.98],["c",-1.77,1.92,-2.43,2.76,-2.97,3.9],["c",-.51,1.02,-.72,1.77,-.75,2.91],["c",0,.63,0,.63,.06,.6],["c",.03,-.03,.3,-.27,.63,-.54],["c",.66,-.6,1.86,-1.8,2.31,-2.31],["c",1.65,-1.89,2.52,-3.54,2.7,-5.16],["z"]],w:8.485,h:32.932},"clefs.C":{d:[["M",.06,-14.94],["l",.09,-.06],["l",1.92,0],["l",1.92,0],["l",.09,.06],["l",.06,.09],["l",0,14.85],["l",0,14.82],["l",-.06,.09],["l",-.09,.06],["l",-1.92,0],["l",-1.92,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"],["m",5.37,0],["c",.09,-.06,.09,-.06,.57,-.06],["c",.45,0,.45,0,.54,.06],["l",.06,.09],["l",0,7.14],["l",0,7.11],["l",.09,-.06],["c",.18,-.18,.72,-.84,.96,-1.2],["c",.3,-.45,.66,-1.17,.84,-1.65],["c",.36,-.9,.57,-1.83,.6,-2.79],["c",.03,-.48,.03,-.54,.09,-.63],["c",.12,-.18,.36,-.21,.54,-.12],["c",.18,.09,.21,.15,.24,.66],["c",.06,.87,.21,1.56,.57,2.22],["c",.51,1.02,1.26,1.68,2.22,1.92],["c",.21,.06,.33,.06,.78,.06],["c",.45,0,.57,0,.84,-.06],["c",.45,-.12,.81,-.33,1.08,-.6],["c",.57,-.57,.87,-1.41,.99,-2.88],["c",.06,-.54,.06,-3,0,-3.57],["c",-.21,-2.58,-.84,-3.87,-2.16,-4.5],["c",-.48,-.21,-1.17,-.36,-1.77,-.36],["c",-.69,0,-1.29,.27,-1.5,.72],["c",-.06,.15,-.06,.21,-.06,.42],["c",0,.24,0,.3,.06,.45],["c",.12,.24,.24,.39,.63,.66],["c",.42,.3,.57,.48,.69,.72],["c",.06,.15,.06,.21,.06,.48],["c",0,.39,-.03,.63,-.21,.96],["c",-.3,.6,-.87,1.08,-1.5,1.26],["c",-.27,.06,-.87,.06,-1.14,0],["c",-.78,-.24,-1.44,-.87,-1.65,-1.68],["c",-.12,-.42,-.09,-1.17,.09,-1.71],["c",.51,-1.65,1.98,-2.82,3.81,-3.09],["c",.84,-.09,2.46,.03,3.51,.27],["c",2.22,.57,3.69,1.8,4.44,3.75],["c",.36,.93,.57,2.13,.57,3.36],["c",0,1.44,-.48,2.73,-1.38,3.81],["c",-1.26,1.5,-3.27,2.43,-5.28,2.43],["c",-.48,0,-.51,0,-.75,-.09],["c",-.15,-.03,-.48,-.21,-.78,-.36],["c",-.69,-.36,-.87,-.42,-1.26,-.42],["c",-.27,0,-.3,0,-.51,.09],["c",-.57,.3,-.81,.9,-.81,2.1],["c",0,1.23,.24,1.83,.81,2.13],["c",.21,.09,.24,.09,.51,.09],["c",.39,0,.57,-.06,1.26,-.42],["c",.3,-.15,.63,-.33,.78,-.36],["c",.24,-.09,.27,-.09,.75,-.09],["c",2.01,0,4.02,.93,5.28,2.4],["c",.9,1.11,1.38,2.4,1.38,3.84],["c",0,1.5,-.3,2.88,-.84,3.96],["c",-.78,1.59,-2.19,2.64,-4.17,3.15],["c",-1.05,.24,-2.67,.36,-3.51,.27],["c",-1.83,-.27,-3.3,-1.44,-3.81,-3.09],["c",-.18,-.54,-.21,-1.29,-.09,-1.74],["c",.15,-.6,.63,-1.2,1.23,-1.47],["c",.36,-.18,.57,-.21,.99,-.21],["c",.42,0,.63,.03,1.02,.21],["c",.42,.21,.84,.63,1.05,1.05],["c",.18,.36,.21,.6,.21,.96],["c",0,.3,0,.36,-.06,.51],["c",-.12,.24,-.27,.42,-.69,.72],["c",-.57,.42,-.69,.63,-.69,1.08],["c",0,.24,0,.3,.06,.45],["c",.12,.21,.3,.39,.57,.54],["c",.42,.18,.87,.21,1.53,.15],["c",1.08,-.15,1.8,-.57,2.34,-1.32],["c",.54,-.75,.84,-1.83,.99,-3.51],["c",.06,-.57,.06,-3.03,0,-3.57],["c",-.12,-1.47,-.42,-2.31,-.99,-2.88],["c",-.27,-.27,-.63,-.48,-1.08,-.6],["c",-.27,-.06,-.39,-.06,-.84,-.06],["c",-.45,0,-.57,0,-.78,.06],["c",-1.14,.27,-2.01,1.17,-2.46,2.49],["c",-.21,.57,-.3,.99,-.33,1.65],["c",-.03,.51,-.06,.57,-.24,.66],["c",-.12,.06,-.27,.06,-.39,0],["c",-.21,-.09,-.21,-.15,-.24,-.75],["c",-.09,-1.92,-.78,-3.72,-2.01,-5.19],["c",-.18,-.21,-.36,-.42,-.39,-.45],["l",-.09,-.06],["l",0,7.11],["l",0,7.14],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.54,.06],["c",-.48,0,-.48,0,-.57,-.06],["l",-.06,-.09],["l",0,-14.82],["l",0,-14.85],["z"]],w:20.31,h:29.97},"clefs.F":{d:[["M",6.3,-7.8],["c",.36,-.03,1.65,0,2.13,.03],["c",3.6,.42,6.03,2.1,6.93,4.86],["c",.27,.84,.36,1.5,.36,2.58],["c",0,.9,-.03,1.35,-.18,2.16],["c",-.78,3.78,-3.54,7.08,-8.37,9.96],["c",-1.74,1.05,-3.87,2.13,-6.18,3.12],["c",-.39,.18,-.75,.33,-.81,.36],["c",-.06,.03,-.15,.06,-.18,.06],["c",-.15,0,-.33,-.18,-.33,-.33],["c",0,-.15,.06,-.21,.51,-.48],["c",3,-1.77,5.13,-3.21,6.84,-4.74],["c",.51,-.45,1.59,-1.5,1.95,-1.95],["c",1.89,-2.19,2.88,-4.32,3.15,-6.78],["c",.06,-.42,.06,-1.77,0,-2.19],["c",-.24,-2.01,-.93,-3.63,-2.04,-4.71],["c",-.63,-.63,-1.29,-1.02,-2.07,-1.2],["c",-1.62,-.39,-3.36,.15,-4.56,1.44],["c",-.54,.6,-1.05,1.47,-1.32,2.22],["l",-.09,.21],["l",.24,-.12],["c",.39,-.21,.63,-.24,1.11,-.24],["c",.3,0,.45,0,.66,.06],["c",1.92,.48,2.85,2.55,1.95,4.38],["c",-.45,.99,-1.41,1.62,-2.46,1.71],["c",-1.47,.09,-2.91,-.87,-3.39,-2.25],["c",-.18,-.57,-.21,-1.32,-.03,-2.28],["c",.39,-2.25,1.83,-4.2,3.81,-5.19],["c",.69,-.36,1.59,-.6,2.37,-.69],["z"],["m",11.58,2.52],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.3,1.17,-.72,2.19,-1.89,1.89],["c",-.99,-.21,-1.5,-1.32,-1.02,-2.25],["c",.18,-.39,.6,-.69,1.02,-.78],["z"],["m",0,7.5],["c",.84,-.21,1.71,.3,1.89,1.14],["c",.21,.87,-.3,1.71,-1.14,1.89],["c",-.87,.21,-1.71,-.3,-1.89,-1.14],["c",-.21,-.84,.3,-1.71,1.14,-1.89],["z"]],w:20.153,h:23.142},"clefs.G":{d:[["M",9.69,-37.41],["c",.09,-.09,.24,-.06,.36,0],["c",.12,.09,.57,.6,.96,1.11],["c",1.77,2.34,3.21,5.85,3.57,8.73],["c",.21,1.56,.03,3.27,-.45,4.86],["c",-.69,2.31,-1.92,4.47,-4.23,7.44],["c",-.3,.39,-.57,.72,-.6,.75],["c",-.03,.06,0,.15,.18,.78],["c",.54,1.68,1.38,4.44,1.68,5.49],["l",.09,.42],["l",.39,0],["c",1.47,.09,2.76,.51,3.96,1.29],["c",1.83,1.23,3.06,3.21,3.39,5.52],["c",.09,.45,.12,1.29,.06,1.74],["c",-.09,1.02,-.33,1.83,-.75,2.73],["c",-.84,1.71,-2.28,3.06,-4.02,3.72],["l",-.33,.12],["l",.03,1.26],["c",0,1.74,-.06,3.63,-.21,4.62],["c",-.45,3.06,-2.19,5.49,-4.47,6.21],["c",-.57,.18,-.9,.21,-1.59,.21],["c",-.69,0,-1.02,-.03,-1.65,-.21],["c",-1.14,-.27,-2.13,-.84,-2.94,-1.65],["c",-.99,-.99,-1.56,-2.16,-1.71,-3.54],["c",-.09,-.81,.06,-1.53,.45,-2.13],["c",.63,-.99,1.83,-1.56,3,-1.53],["c",1.5,.09,2.64,1.32,2.73,2.94],["c",.06,1.47,-.93,2.7,-2.37,2.97],["c",-.45,.06,-.84,.03,-1.29,-.09],["l",-.21,-.09],["l",.09,.12],["c",.39,.54,.78,.93,1.32,1.26],["c",1.35,.87,3.06,1.02,4.35,.36],["c",1.44,-.72,2.52,-2.28,2.97,-4.35],["c",.15,-.66,.24,-1.5,.3,-3.03],["c",.03,-.84,.03,-2.94,0,-3],["c",-.03,0,-.18,0,-.36,.03],["c",-.66,.12,-.99,.12,-1.83,.12],["c",-1.05,0,-1.71,-.06,-2.61,-.3],["c",-4.02,-.99,-7.11,-4.35,-7.8,-8.46],["c",-.12,-.66,-.12,-.99,-.12,-1.83],["c",0,-.84,0,-1.14,.15,-1.92],["c",.36,-2.28,1.41,-4.62,3.3,-7.29],["l",2.79,-3.6],["c",.54,-.66,.96,-1.2,.96,-1.23],["c",0,-.03,-.09,-.33,-.18,-.69],["c",-.96,-3.21,-1.41,-5.28,-1.59,-7.68],["c",-.12,-1.38,-.15,-3.09,-.06,-3.96],["c",.33,-2.67,1.38,-5.07,3.12,-7.08],["c",.36,-.42,.99,-1.05,1.17,-1.14],["z"],["m",2.01,4.71],["c",-.15,-.3,-.3,-.54,-.3,-.54],["c",-.03,0,-.18,.09,-.3,.21],["c",-2.4,1.74,-3.87,4.2,-4.26,7.11],["c",-.06,.54,-.06,1.41,-.03,1.89],["c",.09,1.29,.48,3.12,1.08,5.22],["c",.15,.42,.24,.78,.24,.81],["c",0,.03,.84,-1.11,1.23,-1.68],["c",1.89,-2.73,2.88,-5.07,3.15,-7.53],["c",.09,-.57,.12,-1.74,.06,-2.37],["c",-.09,-1.23,-.27,-1.92,-.87,-3.12],["z"],["m",-2.94,20.7],["c",-.21,-.72,-.39,-1.32,-.42,-1.32],["c",0,0,-1.2,1.47,-1.86,2.37],["c",-2.79,3.63,-4.02,6.3,-4.35,9.3],["c",-.03,.21,-.03,.69,-.03,1.08],["c",0,.69,0,.75,.06,1.11],["c",.12,.54,.27,.99,.51,1.47],["c",.69,1.38,1.83,2.55,3.42,3.42],["c",.96,.54,2.07,.9,3.21,1.08],["c",.78,.12,2.04,.12,2.94,-.03],["c",.51,-.06,.45,-.03,.42,-.3],["c",-.24,-3.33,-.72,-6.33,-1.62,-10.08],["c",-.09,-.39,-.18,-.75,-.18,-.78],["c",-.03,-.03,-.42,0,-.81,.09],["c",-.9,.18,-1.65,.57,-2.22,1.14],["c",-.72,.72,-1.08,1.65,-1.05,2.64],["c",.06,.96,.48,1.83,1.23,2.58],["c",.36,.36,.72,.63,1.17,.9],["c",.33,.18,.36,.21,.42,.33],["c",.18,.42,-.18,.9,-.6,.87],["c",-.18,-.03,-.84,-.36,-1.26,-.63],["c",-.78,-.51,-1.38,-1.11,-1.86,-1.83],["c",-1.77,-2.7,-.99,-6.42,1.71,-8.19],["c",.3,-.21,.81,-.48,1.17,-.63],["c",.3,-.09,1.02,-.3,1.14,-.3],["c",.06,0,.09,0,.09,-.03],["c",.03,-.03,-.51,-1.92,-1.23,-4.26],["z"],["m",3.78,7.41],["c",-.18,-.03,-.36,-.06,-.39,-.06],["c",-.03,0,0,.21,.18,1.02],["c",.75,3.18,1.26,6.3,1.5,9.09],["c",.06,.72,0,.69,.51,.42],["c",.78,-.36,1.44,-.96,1.98,-1.77],["c",1.08,-1.62,1.2,-3.69,.3,-5.55],["c",-.81,-1.62,-2.31,-2.79,-4.08,-3.15],["z"]],w:19.051,h:57.057},"clefs.perc":{d:[["M",5.07,-7.44],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"],["m",6.63,0],["l",.09,-.06],["l",1.53,0],["l",1.53,0],["l",.09,.06],["l",.06,.09],["l",0,7.35],["l",0,7.32],["l",-.06,.09],["l",-.09,.06],["l",-1.53,0],["l",-1.53,0],["l",-.09,-.06],["l",-.06,-.09],["l",0,-7.32],["l",0,-7.35],["z"]],w:21,h:14.97},"tab.big":{d:[["M",20.16,-21.66],["c",.24,-.09,.66,.09,.78,.36],["c",.09,.21,.09,.24,-.18,.54],["c",-.78,.81,-1.86,1.44,-2.94,1.71],["c",-.87,.24,-1.71,.24,-2.55,.03],["l",-.06,-.03],["l",-.18,.99],["c",-.33,1.98,-.75,4.26,-.96,5.04],["c",-.42,1.65,-1.26,3.18,-2.28,4.14],["c",-.57,.57,-1.17,.9,-1.86,1.08],["c",-.18,.06,-.33,.06,-.66,.06],["c",-.54,0,-.78,-.03,-1.23,-.27],["c",-.39,-.18,-.66,-.39,-1.38,-.99],["c",-.3,-.24,-.66,-.51,-.75,-.57],["c",-.21,-.15,-.27,-.24,-.24,-.45],["c",.06,-.27,.36,-.6,.6,-.66],["c",.18,-.03,.33,.06,.9,.57],["c",.48,.42,.72,.57,.93,.69],["c",.66,.33,1.38,.21,1.95,-.36],["c",.63,-.6,1.05,-1.62,1.23,-3],["c",.03,-.18,.09,-.66,.09,-1.11],["c",.09,-1.56,.33,-3.81,.57,-5.49],["c",.06,-.33,.09,-.63,.09,-.63],["c",-.03,-.03,-.81,-.12,-1.02,-.12],["c",-.57,0,-1.32,.12,-1.8,.33],["c",-.87,.3,-1.35,.78,-1.5,1.41],["c",-.18,.63,.09,1.26,.66,1.65],["c",.12,.06,.15,.12,.18,.24],["c",.09,.27,.06,.57,-.09,.75],["c",-.03,.06,-.12,.09,-.27,.15],["c",-.72,.21,-1.44,.15,-2.1,-.18],["c",-.54,-.27,-.96,-.66,-1.2,-1.14],["c",-.39,-.75,-.33,-1.74,.15,-2.52],["c",.27,-.42,.84,-.93,1.41,-1.23],["c",1.17,-.57,2.88,-.9,4.8,-.9],["c",.69,0,.78,0,1.08,.06],["c",.45,.09,1.11,.3,2.07,.6],["c",1.47,.48,1.83,.57,2.55,.54],["c",1.02,-.06,2.04,-.45,2.94,-1.11],["c",.12,-.09,.24,-.18,.27,-.18],["z"],["m",-5.88,13.05],["c",.21,-.03,.81,0,1.08,.06],["c",.48,.12,.9,.42,.99,.69],["c",.03,.09,.03,.15,0,.27],["c",0,.09,-.03,.57,-.06,1.08],["c",-.09,2.19,-.24,5.76,-.39,8.28],["c",-.06,1.53,-.06,1.77,.03,2.01],["c",.09,.18,.15,.24,.3,.3],["c",.24,.12,.54,.06,1.23,-.27],["c",.57,-.27,.66,-.3,.75,-.24],["c",.09,.06,.18,.3,.18,.45],["c",0,.33,-.15,.51,-.45,.63],["c",-.12,.03,-.39,.15,-.6,.27],["c",-1.17,.6,-1.38,.69,-1.8,.72],["c",-.45,.03,-.78,-.09,-1.08,-.39],["c",-.39,-.42,-.66,-1.2,-1.02,-3.12],["c",-.24,-1.23,-.36,-2.07,-.54,-3.75],["l",0,-.18],["l",-.36,.45],["c",-.6,.75,-1.32,1.59,-1.95,2.25],["c",-.15,.18,-.27,.3,-.27,.33],["c",0,0,.06,.09,.15,.18],["c",.24,.33,.6,.57,1.05,.69],["c",.18,.06,.3,.06,.69,.06],["l",.48,.03],["l",.06,.12],["c",.15,.27,.03,.72,-.21,.9],["c",-.18,.12,-.93,.27,-1.41,.27],["c",-.84,0,-1.59,-.3,-1.98,-.84],["l",-.12,-.15],["l",-.45,.42],["c",-.99,.87,-1.53,1.32,-2.16,1.74],["c",-.78,.51,-1.5,.84,-2.1,.93],["c",-.69,.12,-1.2,.03,-1.95,-.42],["c",-.21,-.12,-.51,-.27,-.66,-.36],["c",-.24,-.12,-.3,-.18,-.33,-.24],["c",-.12,-.27,.15,-.78,.45,-.93],["c",.24,-.12,.33,-.09,.9,.18],["c",.6,.3,.84,.39,1.2,.36],["c",.87,-.09,1.77,-.69,3.24,-2.31],["c",2.67,-2.85,4.59,-5.94,5.7,-9.15],["c",.15,-.45,.24,-.63,.42,-.81],["c",.21,-.24,.6,-.45,.99,-.51],["z"],["m",-3.99,16.05],["c",.18,0,.69,-.03,1.17,0],["c",3.27,.03,5.37,.75,6,2.07],["c",.45,.99,.12,2.4,-.81,3.42],["c",-.24,.27,-.57,.57,-.84,.75],["c",-.09,.06,-.18,.09,-.18,.12],["c",0,0,.18,.03,.42,.09],["c",1.23,.3,2.01,.81,2.37,1.59],["c",.27,.54,.3,1.32,.09,2.1],["c",-.12,.36,-.45,1.05,-.69,1.35],["c",-.87,1.17,-2.1,1.92,-3.54,2.25],["c",-.36,.06,-.48,.06,-.96,.06],["c",-.45,0,-.66,0,-.84,-.03],["c",-.84,-.18,-1.47,-.51,-2.07,-1.11],["c",-.33,-.33,-.45,-.51,-.45,-.63],["c",0,-.06,.03,-.15,.06,-.24],["c",.18,-.33,.69,-.6,.93,-.48],["c",.03,.03,.15,.12,.27,.24],["c",.39,.42,.99,.57,1.62,.45],["c",1.05,-.21,1.98,-1.02,2.31,-2.01],["c",.48,-1.53,-.48,-2.55,-2.58,-2.67],["c",-.21,0,-.36,-.03,-.42,-.06],["c",-.15,-.09,-.21,-.51,-.06,-.78],["c",.12,-.27,.24,-.33,.6,-.36],["c",.57,-.06,1.11,-.42,1.5,-.99],["c",.48,-.72,.54,-1.59,.18,-2.31],["c",-.12,-.21,-.45,-.54,-.69,-.69],["c",-.33,-.21,-.93,-.45,-1.35,-.51],["l",-.12,-.03],["l",-.06,.48],["c",-.54,2.94,-1.14,6.24,-1.29,6.75],["c",-.33,1.35,-.93,2.61,-1.65,3.6],["c",-.3,.36,-.81,.9,-1.14,1.14],["c",-.3,.24,-.84,.48,-1.14,.57],["c",-.33,.09,-.96,.09,-1.26,.03],["c",-.45,-.12,-.87,-.39,-1.53,-.96],["c",-.24,-.15,-.51,-.39,-.63,-.48],["c",-.3,-.21,-.33,-.33,-.21,-.63],["c",.12,-.18,.27,-.36,.42,-.45],["c",.27,-.12,.36,-.09,.87,.33],["c",.78,.6,1.08,.75,1.65,.72],["c",.45,-.03,.81,-.21,1.17,-.54],["c",.87,-.9,1.38,-2.85,1.38,-5.37],["c",0,-.6,.03,-1.11,.12,-2.04],["c",.06,-.69,.24,-2.01,.33,-2.58],["c",.06,-.24,.06,-.42,.06,-.42],["c",0,0,-.12,.03,-.21,.09],["c",-1.44,.57,-2.16,1.65,-1.74,2.55],["c",.09,.15,.18,.24,.27,.33],["c",.24,.21,.3,.27,.33,.39],["c",.06,.24,0,.63,-.15,.78],["c",-.09,.12,-.54,.21,-.96,.24],["c",-1.02,.03,-2.01,-.48,-2.43,-1.32],["c",-.21,-.45,-.27,-.9,-.15,-1.44],["c",.06,-.27,.21,-.66,.39,-.93],["c",.87,-1.29,3,-2.22,5.64,-2.43],["z"]],w:19.643,h:43.325},"tab.tiny":{d:[["M",16.02,-17.25],["c",.12,-.09,.15,-.09,.27,-.09],["c",.21,.03,.51,.3,.51,.45],["c",0,.06,-.12,.18,-.3,.36],["c",-1.11,1.08,-2.55,1.59,-3.84,1.41],["c",-.15,-.03,-.33,-.06,-.39,-.09],["c",-.06,-.03,-.09,-.03,-.12,-.03],["c",0,0,-.06,.42,-.15,.93],["c",-.33,2.01,-.66,3.69,-.84,4.26],["c",-.42,1.41,-1.23,2.67,-2.16,3.33],["c",-.27,.18,-.75,.42,-.99,.48],["c",-.3,.09,-.72,.09,-1.02,.06],["c",-.45,-.09,-.84,-.33,-1.53,-.9],["c",-.21,-.18,-.51,-.39,-.63,-.48],["c",-.27,-.21,-.3,-.24,-.3,-.36],["c",0,-.12,.09,-.36,.18,-.45],["c",.09,-.09,.27,-.18,.36,-.18],["c",.12,0,.3,.12,.66,.45],["c",.57,.51,.87,.69,1.23,.72],["c",.93,.06,1.68,-.78,1.98,-2.37],["c",.09,-.39,.15,-.75,.18,-1.53],["c",.06,-.99,.24,-2.79,.42,-4.05],["c",.03,-.3,.06,-.57,.06,-.6],["c",0,-.06,-.03,-.09,-.15,-.12],["c",-.9,-.18,-2.13,.06,-2.76,.57],["c",-.36,.3,-.51,.6,-.51,1.02],["c",0,.45,.15,.75,.48,.99],["c",.06,.06,.15,.18,.18,.24],["c",.12,.24,.03,.63,-.15,.69],["c",-.24,.12,-.6,.15,-.9,.15],["c",-.36,-.03,-.57,-.09,-.87,-.24],["c",-.78,-.36,-1.23,-1.11,-1.2,-1.92],["c",.12,-1.53,1.74,-2.49,4.62,-2.7],["c",1.2,-.09,1.47,-.03,3.33,.57],["c",.9,.3,1.14,.36,1.56,.39],["c",.45,0,.93,-.06,1.38,-.21],["c",.51,-.18,.81,-.33,1.41,-.75],["z"],["m",-4.68,10.38],["c",.39,-.06,.84,0,1.2,.15],["c",.24,.12,.36,.21,.45,.36],["l",.09,.09],["l",-.06,1.41],["c",-.09,2.19,-.18,3.96,-.27,5.49],["c",-.03,.78,-.06,1.59,-.06,1.86],["c",0,.42,0,.48,.06,.57],["c",.06,.18,.18,.24,.36,.27],["c",.18,0,.39,-.06,.84,-.27],["c",.45,-.21,.54,-.24,.63,-.18],["c",.12,.12,.15,.54,.03,.69],["c",-.03,.03,-.15,.12,-.27,.18],["c",-.15,.03,-.3,.12,-.36,.15],["c",-.87,.45,-1.02,.51,-1.26,.57],["c",-.33,.09,-.6,.06,-.84,-.06],["c",-.42,-.18,-.63,-.6,-.87,-1.44],["c",-.3,-1.23,-.57,-2.97,-.66,-4.08],["c",0,-.18,-.03,-.3,-.03,-.33],["l",-.06,.06],["c",-.18,.27,-1.11,1.38,-1.68,2.01],["l",-.33,.33],["l",.06,.09],["c",.06,.15,.27,.33,.48,.42],["c",.27,.18,.51,.24,.96,.27],["l",.39,0],["l",.03,.12],["c",.12,.21,.03,.57,-.15,.69],["c",-.03,.03,-.21,.09,-.36,.15],["c",-.27,.06,-.39,.06,-.75,.06],["c",-.48,0,-.75,-.03,-1.08,-.21],["c",-.21,-.12,-.51,-.36,-.57,-.48],["l",-.03,-.09],["l",-.39,.36],["c",-1.47,1.35,-2.49,1.98,-3.42,2.13],["c",-.54,.09,-.96,-.03,-1.62,-.39],["c",-.21,-.15,-.45,-.27,-.54,-.3],["c",-.18,-.09,-.21,-.21,-.12,-.45],["c",.06,-.27,.33,-.48,.54,-.48],["c",.03,0,.27,.09,.48,.21],["c",.48,.24,.69,.27,.99,.27],["c",.6,-.06,1.17,-.42,2.1,-1.35],["c",2.22,-2.22,4.02,-4.98,4.95,-7.59],["c",.21,-.57,.3,-.78,.48,-.93],["c",.15,-.15,.42,-.27,.66,-.33],["z"],["m",-3.06,12.84],["c",.27,-.03,1.68,0,2.01,.03],["c",1.92,.18,3.15,.69,3.63,1.5],["c",.18,.33,.24,.51,.21,.93],["c",0,.45,-.06,.72,-.24,1.11],["c",-.24,.51,-.69,1.02,-1.17,1.35],["c",-.21,.15,-.21,.15,-.12,.18],["c",.72,.15,1.11,.3,1.5,.57],["c",.39,.24,.63,.57,.75,.96],["c",.09,.3,.09,.96,0,1.29],["c",-.15,.57,-.39,1.05,-.78,1.5],["c",-.66,.75,-1.62,1.32,-2.61,1.53],["c",-.27,.06,-.42,.06,-.84,.06],["c",-.48,0,-.57,0,-.81,-.06],["c",-.6,-.18,-1.05,-.42,-1.47,-.81],["c",-.36,-.39,-.42,-.51,-.3,-.75],["c",.12,-.21,.39,-.39,.6,-.39],["c",.09,0,.15,.03,.33,.18],["c",.12,.12,.27,.24,.36,.27],["c",.96,.48,2.46,-.33,2.82,-1.5],["c",.24,-.81,-.03,-1.44,-.69,-1.77],["c",-.39,-.21,-1.02,-.33,-1.53,-.33],["c",-.18,0,-.21,0,-.27,-.09],["c",-.06,-.09,-.06,-.3,-.03,-.48],["c",.06,-.18,.18,-.36,.33,-.36],["c",.39,-.06,.51,-.09,.72,-.18],["c",.69,-.36,1.11,-1.23,.99,-2.01],["c",-.09,-.51,-.42,-.9,-.93,-1.17],["c",-.24,-.12,-.6,-.27,-.87,-.3],["c",-.09,-.03,-.09,-.03,-.12,.12],["c",0,.09,-.21,1.11,-.42,2.25],["c",-.66,3.75,-.72,3.99,-1.26,5.07],["c",-.9,1.89,-2.25,2.85,-3.48,2.61],["c",-.39,-.09,-.69,-.27,-1.38,-.84],["c",-.63,-.51,-.63,-.48,-.63,-.6],["c",0,-.18,.18,-.48,.39,-.57],["c",.21,-.12,.3,-.09,.81,.33],["c",.15,.15,.39,.3,.54,.36],["c",.18,.12,.27,.12,.48,.15],["c",.99,.06,1.71,-.78,2.04,-2.46],["c",.12,-.66,.18,-1.14,.21,-2.22],["c",.03,-1.23,.12,-2.25,.36,-3.63],["c",.03,-.24,.06,-.45,.06,-.48],["c",-.06,-.03,-.66,.27,-.9,.42],["c",-.06,.06,-.21,.18,-.33,.3],["c",-.57,.57,-.6,1.35,-.06,1.74],["c",.18,.12,.24,.24,.21,.51],["c",-.03,.3,-.15,.42,-.57,.48],["c",-1.11,.24,-2.22,-.42,-2.43,-1.38],["c",-.09,-.45,.03,-1.02,.3,-1.47],["c",.18,-.24,.6,-.63,.9,-.84],["c",.9,-.6,2.28,-1.02,3.69,-1.11],["z"]],w:15.709,h:34.656},"timesig.common":{d:[["M",6.66,-7.83],["c",.72,-.06,1.41,-.03,1.98,.09],["c",1.2,.27,2.34,.96,3.09,1.92],["c",.63,.81,1.08,1.86,1.14,2.73],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,0,-.09,-.12,-.24,-.27],["c",-1.02,-1.11,-2.55,-1.68,-4.08,-1.5],["c",-1.29,.15,-2.04,.69,-2.4,1.74],["c",-.36,.93,-.42,1.89,-.42,5.37],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.63,1.68,1.41,2.07],["c",.81,.39,2.16,.45,3.18,.09],["c",1.29,-.45,2.37,-1.53,3.03,-2.97],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.06,.39,-.42,1.38,-.69,1.89],["c",-.96,1.8,-2.49,2.94,-4.23,3.18],["c",-.99,.12,-2.58,-.06,-3.63,-.45],["c",-.96,-.36,-1.71,-.84,-2.4,-1.5],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.9,-3.45,2.01,-4.56],["c",.69,-.66,1.44,-1.11,2.37,-1.47],["c",.63,-.24,1.47,-.42,2.22,-.48],["z"]],w:13.038,h:15.689},"timesig.cut":{d:[["M",6.24,-10.44],["c",.09,-.06,.09,-.06,.48,-.06],["c",.36,0,.36,0,.45,.06],["l",.06,.09],["l",0,1.23],["l",0,1.26],["l",.27,0],["c",1.26,0,2.49,.45,3.48,1.29],["c",1.05,.87,1.8,2.28,1.89,3.48],["c",.06,1.02,-.51,1.92,-1.44,2.22],["c",-.24,.09,-.3,.09,-.63,.09],["c",-.33,0,-.42,0,-.63,-.06],["c",-.66,-.24,-1.14,-.63,-1.41,-1.2],["c",-.15,-.3,-.21,-.51,-.24,-.9],["c",-.06,-1.08,.57,-2.04,1.56,-2.37],["c",.18,-.06,.27,-.06,.63,-.06],["l",.45,0],["c",.06,.03,.09,.03,.09,0],["c",0,-.03,-.45,-.51,-.66,-.69],["c",-.87,-.69,-1.83,-1.05,-2.94,-1.11],["l",-.42,0],["l",0,7.17],["l",0,7.14],["l",.42,0],["c",.69,-.03,1.23,-.18,1.86,-.51],["c",1.05,-.51,1.89,-1.47,2.46,-2.7],["c",.15,-.33,.33,-.87,.39,-1.17],["c",.09,-.24,.15,-.36,.3,-.39],["c",.21,-.03,.42,.15,.39,.36],["c",-.03,.24,-.21,.78,-.39,1.2],["c",-.96,2.37,-2.94,3.9,-5.13,3.9],["l",-.3,0],["l",0,1.26],["l",0,1.23],["l",-.06,.09],["c",-.09,.06,-.09,.06,-.45,.06],["c",-.39,0,-.39,0,-.48,-.06],["l",-.06,-.09],["l",0,-1.29],["l",0,-1.29],["l",-.21,-.03],["c",-1.23,-.21,-2.31,-.63,-3.21,-1.29],["c",-.15,-.09,-.45,-.36,-.66,-.57],["c",-1.11,-1.11,-1.8,-2.61,-2.04,-4.56],["c",-.06,-.6,-.06,-2.01,0,-2.61],["c",.24,-1.95,.93,-3.45,2.04,-4.59],["c",.42,-.39,.78,-.66,1.26,-.93],["c",.75,-.45,1.65,-.75,2.61,-.9],["l",.21,-.03],["l",0,-1.29],["l",0,-1.29],["z"],["m",-.06,10.44],["c",0,-5.58,0,-6.99,-.03,-6.99],["c",-.15,0,-.63,.27,-.87,.45],["c",-.45,.36,-.75,.93,-.93,1.77],["c",-.18,.81,-.24,1.8,-.24,4.74],["c",0,2.97,.06,3.96,.24,4.77],["c",.24,1.08,.66,1.68,1.41,2.07],["c",.12,.06,.3,.12,.33,.15],["l",.09,0],["l",0,-6.96],["z"]],w:13.038,h:20.97},"timesig.imperfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.imperfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},"timesig.perfectum2":{d:[["M",13,-5],["a",8,8,0,1,0,0,10]],w:13.038,h:20.97},f:{d:[["M",9.93,-14.28],["c",1.53,-.18,2.88,.45,3.12,1.5],["c",.12,.51,0,1.32,-.27,1.86],["c",-.15,.3,-.42,.57,-.63,.69],["c",-.69,.36,-1.56,.03,-1.83,-.69],["c",-.09,-.24,-.09,-.69,0,-.87],["c",.06,-.12,.21,-.24,.45,-.42],["c",.42,-.24,.57,-.45,.6,-.72],["c",.03,-.33,-.09,-.39,-.63,-.42],["c",-.3,0,-.45,0,-.6,.03],["c",-.81,.21,-1.35,.93,-1.74,2.46],["c",-.06,.27,-.48,2.25,-.48,2.31],["c",0,.03,.39,.03,.9,.03],["c",.72,0,.9,0,.99,.06],["c",.42,.15,.45,.72,.03,.9],["c",-.12,.06,-.24,.06,-1.17,.06],["l",-1.05,0],["l",-.78,2.55],["c",-.45,1.41,-.87,2.79,-.96,3.06],["c",-.87,2.37,-2.37,4.74,-3.78,5.91],["c",-1.05,.9,-2.04,1.23,-3.09,1.08],["c",-1.11,-.18,-1.89,-.78,-2.04,-1.59],["c",-.12,-.66,.15,-1.71,.54,-2.19],["c",.69,-.75,1.86,-.54,2.22,.39],["c",.06,.15,.09,.27,.09,.48],["c",0,.24,-.03,.27,-.12,.42],["c",-.03,.09,-.15,.18,-.27,.27],["c",-.09,.06,-.27,.21,-.36,.27],["c",-.24,.18,-.36,.36,-.39,.6],["c",-.03,.33,.09,.39,.63,.42],["c",.42,0,.63,-.03,.9,-.15],["c",.6,-.3,.96,-.96,1.38,-2.64],["c",.09,-.42,.63,-2.55,1.17,-4.77],["l",1.02,-4.08],["c",0,-.03,-.36,-.03,-.81,-.03],["c",-.72,0,-.81,0,-.93,-.06],["c",-.42,-.18,-.39,-.75,.03,-.9],["c",.09,-.06,.27,-.06,1.05,-.06],["l",.96,0],["l",0,-.09],["c",.06,-.18,.3,-.72,.51,-1.17],["c",1.2,-2.46,3.3,-4.23,5.34,-4.5],["z"]],w:16.155,h:19.445},m:{d:[["M",2.79,-8.91],["c",.09,0,.3,-.03,.45,-.03],["c",.24,.03,.3,.03,.45,.12],["c",.36,.15,.63,.54,.75,1.02],["l",.03,.21],["l",.33,-.3],["c",.69,-.69,1.38,-1.02,2.07,-1.02],["c",.27,0,.33,0,.48,.06],["c",.21,.09,.48,.36,.63,.6],["c",.03,.09,.12,.27,.18,.42],["c",.03,.15,.09,.27,.12,.27],["c",0,0,.09,-.09,.18,-.21],["c",.33,-.39,.87,-.81,1.29,-.99],["c",.78,-.33,1.47,-.21,2.01,.33],["c",.3,.33,.48,.69,.6,1.14],["c",.09,.42,.06,.54,-.54,3.06],["c",-.33,1.29,-.57,2.4,-.57,2.43],["c",0,.12,.09,.21,.21,.21],["c",.24,0,.75,-.3,1.2,-.72],["c",.45,-.39,.6,-.45,.78,-.27],["c",.18,.18,.09,.36,-.45,.87],["c",-1.05,.96,-1.83,1.47,-2.58,1.71],["c",-.93,.33,-1.53,.21,-1.8,-.33],["c",-.06,-.15,-.06,-.21,-.06,-.45],["c",0,-.24,.03,-.48,.6,-2.82],["c",.42,-1.71,.6,-2.64,.63,-2.79],["c",.03,-.57,-.3,-.75,-.84,-.48],["c",-.24,.12,-.54,.39,-.66,.63],["c",-.03,.09,-.42,1.38,-.9,3],["c",-.9,3.15,-.84,3,-1.14,3.15],["l",-.15,.09],["l",-.78,0],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.36,-1.38,.84,-2.97],["c",.57,-2.04,.81,-2.97,.84,-3.12],["c",.03,-.54,-.3,-.72,-.84,-.45],["c",-.24,.12,-.57,.42,-.66,.63],["c",-.06,.09,-.51,1.44,-1.05,2.97],["c",-.51,1.56,-.99,2.85,-.99,2.91],["c",-.06,.12,-.21,.24,-.36,.3],["c",-.12,.06,-.21,.06,-.9,.06],["c",-.6,0,-.78,0,-.84,-.06],["c",-.09,-.03,-.18,-.18,-.18,-.27],["c",0,-.03,.45,-1.38,.99,-2.97],["c",1.05,-3.18,1.05,-3.18,.93,-3.45],["c",-.12,-.27,-.39,-.3,-.72,-.15],["c",-.54,.27,-1.14,1.17,-1.56,2.4],["c",-.06,.15,-.15,.3,-.18,.36],["c",-.21,.21,-.57,.27,-.72,.09],["c",-.09,-.09,-.06,-.21,.06,-.63],["c",.48,-1.26,1.26,-2.46,2.01,-3.21],["c",.57,-.54,1.2,-.87,1.83,-1.02],["z"]],w:14.687,h:9.126},p:{d:[["M",1.92,-8.7],["c",.27,-.09,.81,-.06,1.11,.03],["c",.54,.18,.93,.51,1.17,.99],["c",.09,.15,.15,.33,.18,.36],["l",0,.12],["l",.3,-.27],["c",.66,-.6,1.35,-1.02,2.13,-1.2],["c",.21,-.06,.33,-.06,.78,-.06],["c",.45,0,.51,0,.84,.09],["c",1.29,.33,2.07,1.32,2.25,2.79],["c",.09,.81,-.09,2.01,-.45,2.79],["c",-.54,1.26,-1.86,2.55,-3.18,3.03],["c",-.45,.18,-.81,.24,-1.29,.24],["c",-.69,-.03,-1.35,-.18,-1.86,-.45],["c",-.3,-.15,-.51,-.18,-.69,-.09],["c",-.09,.03,-.18,.09,-.18,.12],["c",-.09,.12,-1.05,2.94,-1.05,3.06],["c",0,.24,.18,.48,.51,.63],["c",.18,.06,.54,.15,.75,.15],["c",.21,0,.36,.06,.42,.18],["c",.12,.18,.06,.42,-.12,.54],["c",-.09,.03,-.15,.03,-.78,0],["c",-1.98,-.15,-3.81,-.15,-5.79,0],["c",-.63,.03,-.69,.03,-.78,0],["c",-.24,-.15,-.24,-.57,.03,-.66],["c",.06,-.03,.48,-.09,.99,-.12],["c",.87,-.06,1.11,-.09,1.35,-.21],["c",.18,-.06,.33,-.18,.39,-.3],["c",.06,-.12,3.24,-9.42,3.27,-9.6],["c",.06,-.33,.03,-.57,-.15,-.69],["c",-.09,-.06,-.12,-.06,-.3,-.06],["c",-.69,.06,-1.53,1.02,-2.28,2.61],["c",-.09,.21,-.21,.45,-.27,.51],["c",-.09,.12,-.33,.24,-.48,.24],["c",-.18,0,-.36,-.15,-.36,-.3],["c",0,-.24,.78,-1.83,1.26,-2.55],["c",.72,-1.11,1.47,-1.74,2.28,-1.92],["z"],["m",5.37,1.47],["c",-.27,-.12,-.75,-.03,-1.14,.21],["c",-.75,.48,-1.47,1.68,-1.89,3.15],["c",-.45,1.47,-.42,2.34,0,2.7],["c",.45,.39,1.26,.21,1.83,-.36],["c",.51,-.51,.99,-1.68,1.38,-3.27],["c",.3,-1.17,.33,-1.74,.15,-2.13],["c",-.09,-.15,-.15,-.21,-.33,-.3],["z"]],w:14.689,h:13.127},r:{d:[["M",6.33,-9.12],["c",.27,-.03,.93,0,1.2,.06],["c",.84,.21,1.23,.81,1.02,1.53],["c",-.24,.75,-.9,1.17,-1.56,.96],["c",-.33,-.09,-.51,-.3,-.66,-.75],["c",-.03,-.12,-.09,-.24,-.12,-.3],["c",-.09,-.15,-.3,-.24,-.48,-.24],["c",-.57,0,-1.38,.54,-1.65,1.08],["c",-.06,.15,-.33,1.17,-.9,3.27],["c",-.57,2.31,-.81,3.12,-.87,3.21],["c",-.03,.06,-.12,.15,-.18,.21],["l",-.12,.06],["l",-.81,.03],["c",-.69,0,-.81,0,-.9,-.03],["c",-.09,-.06,-.18,-.21,-.18,-.3],["c",0,-.06,.39,-1.62,.9,-3.51],["c",.84,-3.24,.87,-3.45,.87,-3.72],["c",0,-.21,0,-.27,-.03,-.36],["c",-.12,-.15,-.21,-.24,-.42,-.24],["c",-.24,0,-.45,.15,-.78,.42],["c",-.33,.36,-.45,.54,-.72,1.14],["c",-.03,.12,-.21,.24,-.36,.27],["c",-.12,0,-.15,0,-.24,-.06],["c",-.18,-.12,-.18,-.21,-.06,-.54],["c",.21,-.57,.42,-.93,.78,-1.32],["c",.54,-.51,1.2,-.81,1.95,-.87],["c",.81,-.03,1.53,.3,1.92,.87],["l",.12,.18],["l",.09,-.09],["c",.57,-.45,1.41,-.84,2.19,-.96],["z"]],w:9.41,h:9.132},s:{d:[["M",4.47,-8.73],["c",.09,0,.36,-.03,.57,-.03],["c",.75,.03,1.29,.24,1.71,.63],["c",.51,.54,.66,1.26,.36,1.83],["c",-.24,.42,-.63,.57,-1.11,.42],["c",-.33,-.09,-.6,-.36,-.6,-.57],["c",0,-.03,.06,-.21,.15,-.39],["c",.12,-.21,.15,-.33,.18,-.48],["c",0,-.24,-.06,-.48,-.15,-.6],["c",-.15,-.21,-.42,-.24,-.75,-.15],["c",-.27,.06,-.48,.18,-.69,.36],["c",-.39,.39,-.51,.96,-.33,1.38],["c",.09,.21,.42,.51,.78,.72],["c",1.11,.69,1.59,1.11,1.89,1.68],["c",.21,.39,.24,.78,.15,1.29],["c",-.18,1.2,-1.17,2.16,-2.52,2.52],["c",-1.02,.24,-1.95,.12,-2.7,-.42],["c",-.72,-.51,-.99,-1.47,-.6,-2.19],["c",.24,-.48,.72,-.63,1.17,-.42],["c",.33,.18,.54,.45,.57,.81],["c",0,.21,-.03,.3,-.33,.51],["c",-.33,.24,-.39,.42,-.27,.69],["c",.06,.15,.21,.27,.45,.33],["c",.3,.09,.87,.09,1.2,0],["c",.75,-.21,1.23,-.72,1.29,-1.35],["c",.03,-.42,-.15,-.81,-.54,-1.2],["c",-.24,-.24,-.48,-.42,-1.41,-1.02],["c",-.69,-.42,-1.05,-.93,-1.05,-1.47],["c",0,-.39,.12,-.87,.3,-1.23],["c",.27,-.57,.78,-1.05,1.38,-1.35],["c",.24,-.12,.63,-.27,.9,-.3],["z"]],w:6.632,h:8.758},z:{d:[["M",2.64,-7.95],["c",.36,-.09,.81,-.03,1.71,.27],["c",.78,.21,.96,.27,1.74,.3],["c",.87,.06,1.02,.03,1.38,-.21],["c",.21,-.15,.33,-.15,.48,-.06],["c",.15,.09,.21,.3,.15,.45],["c",-.03,.06,-1.26,1.26,-2.76,2.67],["l",-2.73,2.55],["l",.54,.03],["c",.54,.03,.72,.03,2.01,.15],["c",.36,.03,.9,.06,1.2,.09],["c",.66,0,.81,-.03,1.02,-.24],["c",.3,-.3,.39,-.72,.27,-1.23],["c",-.06,-.27,-.06,-.27,-.03,-.39],["c",.15,-.3,.54,-.27,.69,.03],["c",.15,.33,.27,1.02,.27,1.5],["c",0,1.47,-1.11,2.7,-2.52,2.79],["c",-.57,.03,-1.02,-.09,-2.01,-.51],["c",-1.02,-.42,-1.23,-.48,-2.13,-.54],["c",-.81,-.06,-.96,-.03,-1.26,.18],["c",-.12,.06,-.24,.12,-.27,.12],["c",-.27,0,-.45,-.3,-.36,-.51],["c",.03,-.06,1.32,-1.32,2.91,-2.79],["l",2.88,-2.73],["c",-.03,0,-.21,.03,-.42,.06],["c",-.21,.03,-.78,.09,-1.23,.12],["c",-1.11,.12,-1.23,.15,-1.95,.27],["c",-.72,.15,-1.17,.18,-1.29,.09],["c",-.27,-.18,-.21,-.75,.12,-1.26],["c",.39,-.6,.93,-1.02,1.59,-1.2],["z"]],w:8.573,h:8.743},"+":{d:[["M",3.48,-9.3],["c",.18,-.09,.36,-.09,.54,0],["c",.18,.09,.24,.15,.33,.3],["l",.06,.15],["l",0,1.29],["l",0,1.29],["l",1.29,0],["c",1.23,0,1.29,0,1.41,.06],["c",.06,.03,.15,.09,.18,.12],["c",.12,.09,.21,.33,.21,.48],["c",0,.15,-.09,.39,-.21,.48],["c",-.03,.03,-.12,.09,-.18,.12],["c",-.12,.06,-.18,.06,-1.41,.06],["l",-1.29,0],["l",0,1.29],["c",0,1.23,0,1.29,-.06,1.41],["c",-.09,.18,-.15,.24,-.3,.33],["c",-.21,.09,-.39,.09,-.57,0],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.06,-.12,-.06,-.18,-.06,-1.41],["l",0,-1.29],["l",-1.29,0],["c",-1.23,0,-1.29,0,-1.41,-.06],["c",-.18,-.09,-.24,-.15,-.33,-.33],["c",-.09,-.18,-.09,-.36,0,-.54],["c",.09,-.18,.15,-.24,.33,-.33],["l",.15,-.06],["l",1.26,0],["l",1.29,0],["l",0,-1.29],["c",0,-1.23,0,-1.29,.06,-1.41],["c",.09,-.18,.15,-.24,.33,-.33],["z"]],w:7.507,h:7.515},",":{d:[["M",1.32,-3.36],["c",.57,-.15,1.17,.03,1.59,.45],["c",.45,.45,.6,.96,.51,1.89],["c",-.09,1.23,-.42,2.46,-.99,3.93],["c",-.3,.72,-.72,1.62,-.78,1.68],["c",-.18,.21,-.51,.18,-.66,-.06],["c",-.03,-.06,-.06,-.15,-.06,-.18],["c",0,-.06,.12,-.33,.24,-.63],["c",.84,-1.8,1.02,-2.61,.69,-3.24],["c",-.12,-.24,-.27,-.36,-.75,-.6],["c",-.36,-.15,-.42,-.21,-.6,-.39],["c",-.69,-.69,-.69,-1.71,0,-2.4],["c",.21,-.21,.51,-.39,.81,-.45],["z"]],w:3.452,h:8.143},"-":{d:[["M",.18,-5.34],["c",.09,-.06,.15,-.06,2.31,-.06],["c",2.46,0,2.37,0,2.46,.21],["c",.12,.21,.03,.42,-.15,.54],["c",-.09,.06,-.15,.06,-2.28,.06],["c",-2.16,0,-2.22,0,-2.31,-.06],["c",-.27,-.15,-.27,-.54,-.03,-.69],["z"]],w:5.001,h:.81},".":{d:[["M",1.32,-3.36],["c",1.05,-.27,2.1,.57,2.1,1.65],["c",0,1.08,-1.05,1.92,-2.1,1.65],["c",-.9,-.21,-1.5,-1.14,-1.26,-2.04],["c",.12,-.63,.63,-1.11,1.26,-1.26],["z"]],w:3.413,h:3.402},"scripts.wedge":{d:[["M",-3.66,-7.44],["c",.06,-.09,0,-.09,.81,.03],["c",1.86,.3,3.84,.3,5.73,0],["c",.78,-.12,.72,-.12,.78,-.03],["c",.15,.15,.12,.24,-.24,.6],["c",-.93,.93,-1.98,2.76,-2.67,4.62],["c",-.3,.78,-.51,1.71,-.51,2.13],["c",0,.15,0,.18,-.06,.27],["c",-.12,.09,-.24,.09,-.36,0],["c",-.06,-.09,-.06,-.12,-.06,-.27],["c",0,-.42,-.21,-1.35,-.51,-2.13],["c",-.69,-1.86,-1.74,-3.69,-2.67,-4.62],["c",-.36,-.36,-.39,-.45,-.24,-.6],["z"]],w:7.49,h:7.752},"scripts.thumb":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.27,1.41,-1.08,2.43,-2.16,2.73],["l",-.18,.06],["l",0,.12],["c",.03,.06,.06,.45,.09,.87],["c",.03,.57,.03,.78,0,.84],["c",-.09,.27,-.39,.48,-.66,.48],["c",-.27,0,-.57,-.21,-.66,-.48],["c",-.03,-.06,-.03,-.27,0,-.84],["c",.03,-.42,.06,-.81,.09,-.87],["l",0,-.12],["l",-.18,-.06],["c",-1.08,-.3,-1.89,-1.32,-2.16,-2.73],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.05,.9],["c",-.15,-.09,-.21,-.09,-.45,-.12],["c",-.15,0,-.3,.03,-.39,.03],["c",-.57,.18,-.9,.72,-1.08,1.74],["c",-.06,.48,-.06,1.8,0,2.28],["c",.15,.9,.42,1.44,.9,1.65],["c",.18,.09,.21,.09,.51,.09],["c",.3,0,.33,0,.51,-.09],["c",.48,-.21,.75,-.75,.9,-1.65],["c",.03,-.27,.03,-.54,.03,-1.14],["c",0,-.6,0,-.87,-.03,-1.14],["c",-.15,-.9,-.45,-1.44,-.9,-1.65],["z"]],w:5.955,h:9.75},"scripts.open":{d:[["M",-.54,-3.69],["c",.15,-.03,.36,-.06,.51,-.06],["c",1.44,0,2.58,1.11,2.94,2.85],["c",.09,.48,.09,1.32,0,1.8],["c",-.33,1.74,-1.47,2.85,-2.91,2.85],["c",-1.44,0,-2.58,-1.11,-2.91,-2.85],["c",-.09,-.48,-.09,-1.32,0,-1.8],["c",.15,-.84,.51,-1.53,1.02,-2.04],["c",.39,-.39,.84,-.63,1.35,-.75],["z"],["m",1.11,.9],["c",-.21,-.09,-.27,-.09,-.51,-.12],["c",-.3,0,-.42,.03,-.66,.15],["c",-.24,.12,-.51,.39,-.66,.63],["c",-.54,.93,-.63,2.64,-.21,3.81],["c",.21,.54,.51,.9,.93,1.11],["c",.21,.09,.24,.09,.54,.09],["c",.3,0,.33,0,.54,-.09],["c",.42,-.21,.72,-.57,.93,-1.11],["c",.36,-.99,.36,-2.37,0,-3.36],["c",-.21,-.54,-.51,-.9,-.9,-1.11],["z"]],w:5.955,h:7.5},"scripts.longphrase":{d:[["M",1.47,-15.09],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.54,.06,11.25],["l",0,11.25],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-3.39,-.03,-11.25],["l",0,-11.25],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:23.04},"scripts.mediumphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.39,.06,7.5],["l",0,7.5],["l",-.63,.15],["c",-.66,.18,-1.44,.39,-1.5,.39],["c",-.03,0,-.03,-2.28,-.03,-7.5],["l",0,-7.5],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:15.54},"scripts.shortphrase":{d:[["M",1.47,-7.59],["c",.36,-.09,.66,-.18,.69,-.18],["c",.06,0,.06,.21,.06,3.75],["l",0,3.75],["l",-.42,.09],["c",-.57,.18,-1.65,.45,-1.71,.45],["c",-.03,0,-.03,-.72,-.03,-3.75],["l",0,-3.75],["l",.36,-.09],["c",.21,-.06,.66,-.18,1.05,-.27],["z"]],w:2.16,h:8.04},"scripts.snap":{d:[["M",4.5,-3.39],["c",.36,-.03,.96,-.03,1.35,0],["c",1.56,.15,3.15,.9,4.2,2.01],["c",.24,.27,.33,.42,.33,.6],["c",0,.27,.03,.24,-2.46,2.22],["c",-1.29,1.02,-2.4,1.86,-2.49,1.92],["c",-.18,.09,-.3,.09,-.48,0],["c",-.09,-.06,-1.2,-.9,-2.49,-1.92],["c",-2.49,-1.98,-2.46,-1.95,-2.46,-2.22],["c",0,-.18,.09,-.33,.33,-.6],["c",1.05,-1.08,2.64,-1.86,4.17,-2.01],["z"],["m",1.29,1.17],["c",-1.47,-.15,-2.97,.3,-4.14,1.2],["l",-.18,.15],["l",.06,.09],["c",.15,.12,3.63,2.85,3.66,2.85],["c",.03,0,3.51,-2.73,3.66,-2.85],["l",.06,-.09],["l",-.18,-.15],["c",-.84,-.66,-1.89,-1.08,-2.94,-1.2],["z"]],w:10.38,h:6.84},"noteheads.slash.whole":{d:[["M",5,-5],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"],["m",0,-2],["l",1,1],["l",-5,5],["l",-1,-1],["z"],["m",-4,6],["l",-5,-5],["l",2,-2],["l",5,5],["z"]],w:10.81,h:15.63},"noteheads.slash.quarter":{d:[["M",9,-6],["l",0,4],["l",-9,9],["l",0,-4],["z"]],w:9,h:9},"noteheads.harmonic.quarter":{d:[["M",3.63,-4.02],["c",.09,-.06,.18,-.09,.24,-.03],["c",.03,.03,.87,.93,1.83,2.01],["c",1.5,1.65,1.8,1.98,1.8,2.04],["c",0,.06,-.3,.39,-1.8,2.04],["c",-.96,1.08,-1.8,1.98,-1.83,2.01],["c",-.06,.06,-.15,.03,-.24,-.03],["c",-.12,-.09,-3.54,-3.84,-3.6,-3.93],["c",-.03,-.03,-.03,-.09,-.03,-.15],["c",.03,-.06,3.45,-3.84,3.63,-3.96],["z"]],w:7.5,h:8.165},"noteheads.triangle.quarter":{d:[["M",0,0],["l",9,0],["l",-4.5,-9],["z"]],w:9,h:9}},n=function(e){for(var t=[],n=0,r=e.length;n<r;n++){t[n]=[];for(var i=0,o=e[n].length;i<o;i++)t[n][i]=e[n][i]}return t},r={printSymbol:function(e,r,i,o,a){if(!t[i])return null;var s=n(t[i].d);s[0][1]+=e,s[0][2]+=r;for(var l="",c=0;c<s.length;c++)l+=s[c].join(" ");return a.path=l,o.path(a)},getPathForSymbol:function(e,r,i,o,a){if(o=o||1,a=a||1,!t[i])return null;var s=n(t[i].d);return 1===o&&1===a||function(e,t,n){for(var r=0,i=e.length;r<i;r++){var o,a,s=e[r];for(o=1,a=s.length;o<a;o++)s[o]*=o%2?t:n}}(s,o,a),s[0][1]+=e,s[0][2]+=r,s},getSymbolWidth:function(e){return t[e]?t[e].w:0},symbolHeightInPitches:function(n){return(t[n]?t[n].h:0)/e.STEP},getSymbolAlign:function(e){return"scripts"===e.substring(0,7)&&"scripts.roll"!==e?"center":"left"},getYCorr:function(e){switch(e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"flags.d64th":case"scripts.trill":case"scripts.upbow":case"scripts.downbow":return-2;case"timesig.common":case"timesig.cut":default:return 0;case"flags.d32nd":case"rests.half":case"rests.8th":case"rests.quarter":case"rests.16th":case"rests.32nd":case"rests.64th":case"scripts.ufermata":case"scripts.wedge":case"scripts.roll":case"scripts.shortphrase":case"scripts.longphrase":return-1;case"flags.u32nd":case"rests.whole":case"scripts.dfermata":return 1;case"flags.u64th":return 3;case"f":case"m":case"p":case"s":case"z":return-4}},setSymbol:function(e,n){t[e]=n}};return hs=r}function bu(){if(Is)return Es;Is=1;var e=function(e){this.type="TieElem",this.anchor1=e.anchor1,this.anchor2=e.anchor2,e.isGrace&&(this.isGrace=!0),e.fixedY&&(this.fixedY=!0),e.stemDir&&(this.stemDir=e.stemDir),void 0!==e.voiceNumber&&(this.voiceNumber=e.voiceNumber),void 0!==e.style&&(this.dotted=!0),this.internalNotes=[]};return e.prototype.addInternalNote=function(e){this.internalNotes.push(e)},e.prototype.setEndAnchor=function(e){this.anchor2=e,this.anchor1?(this.top=Math.max(this.anchor1.pitch,this.anchor2.pitch)+4,this.bottom=Math.min(this.anchor1.pitch,this.anchor2.pitch)-4):(this.top=this.anchor2.pitch+4,this.bottom=this.anchor2.pitch-4)},e.prototype.setStartX=function(e){this.startLimitX=e},e.prototype.setEndX=function(e){this.endLimitX=e},e.prototype.setHint=function(){this.hint=!0},e.prototype.calcTieDirection=function(){if(this.isGrace)this.above=!1;else if(0===this.voiceNumber)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var e;e=this.anchor1?this.anchor1.pitch:this.anchor2?this.anchor2.pitch:14,this.anchor1&&"down"===this.anchor1.stemDir&&this.anchor2&&"down"===this.anchor2.stemDir?this.above=!0:this.anchor1&&"up"===this.anchor1.stemDir&&this.anchor2&&"up"===this.anchor2.stemDir?this.above=!1:this.anchor1&&this.anchor2?this.above=e>=6:this.anchor1?this.above="down"===this.anchor1.stemDir:this.anchor2?this.above="down"===this.anchor2.stemDir:this.above=e>=6}},e.prototype.calcSlurDirection=function(){if(this.isGrace)this.above=!1;else if(0===this.voiceNumber)this.above=!0;else if(this.voiceNumber>0)this.above=!1;else{var e=!1;this.anchor1&&"down"===this.anchor1.stemDir&&(e=!0),this.anchor2&&"down"===this.anchor2.stemDir&&(e=!0);for(var t=0;t<this.internalNotes.length;t++){"down"===this.internalNotes[t].stemDir&&(e=!0)}this.above=e}},e.prototype.calcX=function(e,t){this.anchor1?(this.startX=this.anchor1.x,this.anchor1.scalex<1&&(this.startX-=3)):this.startLimitX?this.startX=this.startLimitX.x+this.startLimitX.w:this.anchor2?this.startX=this.anchor2.x-20:this.startX=e,!this.anchor1&&this.dotted&&(this.startX-=3),this.anchor2?this.endX=this.anchor2.x:this.endLimitX?this.endX=this.endLimitX.x:this.endX=t},e.prototype.calcTieY=function(){this.anchor1?this.startY=this.anchor1.pitch:this.anchor2?this.startY=this.anchor2.pitch:this.startY=this.above?14:0,this.anchor2?this.endY=this.anchor2.pitch:this.anchor1?this.endY=this.anchor1.pitch:this.endY=this.above?14:0},e.prototype.calcSlurY=function(){if(this.anchor1&&this.anchor2){this.above&&"up"===this.anchor1.stemDir&&!this.fixedY?(this.startY=(this.anchor1.highestVert+this.anchor1.pitch)/2,this.startX+=this.anchor1.w/2):this.startY=this.anchor1.pitch;var e=this.anchor2.parent.beam&&this.anchor2.parent.beam.stemsUp&&this.anchor2.parent.beam.elems[0]!==this.anchor2.parent,t=(this.anchor2.highestVert+this.anchor2.pitch)/2;this.above&&"up"===this.anchor2.stemDir&&!this.fixedY&&!e&&t<this.startY?(this.endY=t,this.endX+=Math.round(this.anchor2.w/2)):this.endY=this.above&&e?this.anchor2.highestVert:this.anchor2.pitch}else this.anchor1?this.startY=this.endY=this.anchor1.pitch:this.anchor2?this.startY=this.endY=this.anchor2.pitch:(this.startY=this.above?14:0,this.endY=this.above?14:0)},e.prototype.avoidCollisionAbove=function(){if(this.above){for(var e=-50,t=0;t<this.internalNotes.length;t++)this.internalNotes[t].highestVert>e&&(e=this.internalNotes[t].highestVert);e>this.startY&&e>this.endY&&(this.startY=this.endY=e-1)}},Es=e}function _u(){if(Ds)return As;Ds=1;var e=ks?ws:(ks=1,ws=function(e,t,n){this.type="DynamicDecoration",this.anchor=e,this.dec=t,"below"===n?this.volumeHeightBelow=6:this.volumeHeightAbove=6,this.pitch=void 0}),t=Cs?xs:(Cs=1,xs=function(e,t,n,r){this.type="CrescendoElem",this.anchor1=e,this.anchor2=t,this.dir=n,"above"===r?this.dynamicHeightAbove=6:this.dynamicHeightBelow=6,this.pitch=void 0}),n=Ts?Ss:(Ts=1,Ss=function(e,t){this.type="GlissandoElem",this.anchor1=e,this.anchor2=t}),r=yu(),i=cu(),o=bu(),a=function(){this.startDiminuendoX=void 0,this.startCrescendoX=void 0,this.minTop=12,this.minBottom=0},s=function(e,t,n,o,a){function s(e,t){var s="down"===a?function(){if(0===o.heads.length)return 2;for(var e=o.heads[0].pitch,t=1;t<o.heads.length;t++)e=Math.min(e,o.heads[t].pitch);return e}()+1:function(){if(0===o.heads.length)return 10;for(var e=o.heads[0].pitch,t=1;t<o.heads.length;t++)e=Math.max(e,o.heads[t].pitch);return e}()+9;"down"!==a&&1===t&&s--;var l=n/2;l+="down"===a?-5:3;for(var c=0;c<t;c++)s-=1,o.addFixedX(new i(e,l,r.getSymbolWidth(e),s))}for(var l=0;l<e.length;l++)switch(e[l]){case"/":s("flags.ugrace",1);break;case"//":s("flags.ugrace",2);break;case"///":s("flags.ugrace",3);break;case"////":s("flags.ugrace",4)}};return a.prototype.dynamicDecoration=function(e,r,i,o){for(var a,s,l,c=0;c<r.length;c++)switch(r[c]){case"diminuendo(":this.startDiminuendoX=i,a=void 0;break;case"diminuendo)":a={start:this.startDiminuendoX,stop:i},this.startDiminuendoX=void 0;break;case"crescendo(":this.startCrescendoX=i,s=void 0;break;case"crescendo)":s={start:this.startCrescendoX,stop:i},this.startCrescendoX=void 0;break;case"glissando(":this.startGlissandoX=i,l=void 0;break;case"glissando)":l={start:this.startGlissandoX,stop:i},this.startGlissandoX=void 0}a&&e.addOther(new t(a.start,a.stop,">",o)),s&&e.addOther(new t(s.start,s.stop,"<",o)),l&&e.addOther(new n(l.start,l.stop))},a.prototype.createDecoration=function(t,n,a,l,c,u,h,d,p,f){p||(p={ornamentPosition:"above",volumePosition:f?"above":"below",dynamicPosition:f?"above":"below"}),function(t,n,r,i){for(var o=0;o<n.length;o++)switch(n[o]){case"p":case"mp":case"pp":case"ppp":case"pppp":case"f":case"ff":case"fff":case"ffff":case"sfz":case"mf":var a=new e(r,n[o],i);t.addOther(a)}}(t,n,c,p.volumePosition),this.dynamicDecoration(t,n,c,p.dynamicPosition),s(n,0,l,c,h);var m=function(e,t,n,a,s,l,c,u){for(var h,d=0;d<t.length;d++){if("staccato"===t[d]||"tenuto"===t[d]||"accent"===t[d]){var p="scripts."+t[d];if("accent"===t[d]&&(p="scripts.sforzato"),h=void 0===h?"down"===c?n+2:u-2:"down"===c?h+2:h-2,"accent"===t[d])"up"===c?h--:h++;else switch(h){case 2:case 4:case 6:case 8:case 10:"up"===c?h--:h++}n>9&&h++;var f=a/2;"center"!==r.getSymbolAlign(p)&&(f-=r.getSymbolWidth(p)/2),s.addFixedX(new i(p,f,r.getSymbolWidth(p),h))}if("slide"===t[d]&&s.heads[0]){var m=s.heads[0].pitch,g=new i("",-l-15,0,(m-=2)-1),v=new i("",-l-5,0,m+1);s.addFixedX(g),s.addFixedX(v),e.addOther(new o({anchor1:g,anchor2:v,fixedY:!0}))}}return void 0===h&&(h=n),{above:h,below:s.bottom}}(t,n,a,l,c,u,h,d);m.above=Math.max(m.above,this.minTop),function(e,t,n,o,a,s,l){function c(e,t){"above"===e?o.above+=t:o.below-=t}function u(e){var t;return"above"===e?(t=o.above)<s&&(t=s):(t=o.below)>l&&(t=l),t}function h(e,r,o){var a=u(r);n.addFixedX(new i(e,t/2,0,a+2,{type:"decoration",klass:"ornament",thickness:3,anchor:o})),c(r,5)}function d(e,o){var a=t/2;"center"!==r.getSymbolAlign(e)&&(a-=r.getSymbolWidth(e)/2);var s=r.symbolHeightInPitches(e)+1,l=u(o);l="above"===o?l+s/2:l-s/2,n.addFixedX(new i(e,a,r.getSymbolWidth(e),l,{klass:"ornament",thickness:r.symbolHeightInPitches(e)})),c(o,s)}for(var p={"+":"scripts.stopped",open:"scripts.open",snap:"scripts.snap",wedge:"scripts.wedge",thumb:"scripts.thumb",shortphrase:"scripts.shortphrase",mediumphrase:"scripts.mediumphrase",longphrase:"scripts.longphrase",trill:"scripts.trill",roll:"scripts.roll",irishroll:"scripts.roll",marcato:"scripts.umarcato",dmarcato:"scripts.dmarcato",umarcato:"scripts.umarcato",turn:"scripts.turn",uppermordent:"scripts.prall",pralltriller:"scripts.prall",mordent:"scripts.mordent",lowermordent:"scripts.mordent",downbow:"scripts.downbow",upbow:"scripts.upbow",fermata:"scripts.ufermata",invertedfermata:"scripts.dfermata",breath:",",coda:"scripts.coda",segno:"scripts.segno"},f=!1,m=0;m<e.length;m++)switch(e[m]){case"0":case"1":case"2":case"3":case"4":case"5":case"D.C.":case"D.S.":h(e[m],a,"middle"),f=!0;break;case"D.C.alcoda":h("D.C. al coda",a,"end"),f=!0;break;case"D.C.alfine":h("D.C. al fine",a,"end"),f=!0;break;case"D.S.alcoda":h("D.S. al coda",a,"end"),f=!0;break;case"D.S.alfine":h("D.S. al fine",a,"end"),f=!0;break;case"fine":h("FINE",a,"middle"),f=!0;break;case"+":case"open":case"snap":case"wedge":case"thumb":case"shortphrase":case"mediumphrase":case"longphrase":case"trill":case"roll":case"irishroll":case"marcato":case"dmarcato":case"turn":case"uppermordent":case"pralltriller":case"mordent":case"lowermordent":case"downbow":case"upbow":case"fermata":case"breath":case"umarcato":case"coda":case"segno":d(p[e[m]],a),f=!0;break;case"invertedfermata":d(p[e[m]],"below"),f=!0;break;case"mark":n.klass="mark"}}(n,l,c,m,p.ornamentPosition,this.minTop,this.minBottom),function(e,t,n){for(var o=0;o<e.length;o++)if("arpeggio"===e[o])for(var a=t.abcelem.minpitch-1;a<=t.abcelem.maxpitch;a+=2)t.addExtra(new i("scripts.arpeggio",2*-r.getSymbolWidth("scripts.arpeggio")-n,0,a+2,{klass:"ornament",thickness:r.symbolHeightInPitches("scripts.arpeggio")}))}(n,c,u)},As=a}function wu(){if(Ps)return Os;Ps=1;var e=(Fs||(Fs=1,Ms=function(e){for(var t=0,n=0;n<e.voices.length;n++){var r=e.voices[n].staff;e.voices[n].duplicate||(t+=r.top,t+=-r.bottom)}return t}),Ms),t=function(e){this.getTextSize=e,this.voices=[],this.staffs=[],this.brace=void 0,this.bracket=void 0};return t.prototype.setLimit=function(e,t){t.specialY[e]&&(t.staff.specialY[e]?t.staff.specialY[e]=Math.max(t.staff.specialY[e],t.specialY[e]):t.staff.specialY[e]=t.specialY[e])},t.prototype.addVoice=function(e,t,n){var r=this.voices.length;this.voices[r]=e,this.staffs[t]?this.staffs[t].voices.push(r):this.staffs[this.staffs.length]={top:10,bottom:2,lines:n,voices:[r],specialY:{tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0}},e.staff=this.staffs[t]},t.prototype.setHeight=function(){this.height=e(this)},t.prototype.setWidth=function(e){this.w=e;for(var t=0;t<this.voices.length;t++)this.voices[t].setWidth(e)},t.prototype.setStaffLimits=function(e){e.staff.top=Math.max(e.staff.top,e.top),e.staff.bottom=Math.min(e.staff.bottom,e.bottom),this.setLimit("tempoHeightAbove",e),this.setLimit("partHeightAbove",e),this.setLimit("volumeHeightAbove",e),this.setLimit("dynamicHeightAbove",e),this.setLimit("endingHeightAbove",e),this.setLimit("chordHeightAbove",e),this.setLimit("lyricHeightAbove",e),this.setLimit("lyricHeightBelow",e),this.setLimit("chordHeightBelow",e),this.setLimit("volumeHeightBelow",e),this.setLimit("dynamicHeightBelow",e)},Os=t}function ku(){if(Hs)return Us;Hs=1;var e=cu(),t=Xc();const n=function(){if($s)return qs;function e(e){switch(e){case"B#":return"H#";case"B":return"H";case"B":return"H";case"Bb":case"B":return"B"}return e}return $s=1,qs=function(t,n,r){var i=t.split("\n");for(let o=0;o<i.length;o++){let t=i[o].match(/^([ABCDEFG][]?)?([^\/]+)?(\/([ABCDEFG][#b]?))?/);if(!t)continue;let a=t[1]||"",s=t[2]||"",l=t[4]||"";r&&(a=e(a),l=e(l));const c=n?"":"",u=l?"/"+l:"";i[o]=[a,s,u].join(c)}return i.join("\n")},qs}();return Us=function(r,i,o,a,s,l,c,u){for(var h=0;h<o.chord.length;h++)for(var d=o.chord[h].position,p=o.chord[h].rel_position,f=o.chord[h].name.split("\n"),m=f.length-1;m>=0;m--){var g,v,y,b=f[m],_=0;"left"===d||"right"===d||"below"===d||"above"===d||p?(v="annotationfont",y="annotation"):(v="gchordfont",y="chord",b=n(b,c,u));var w=r.attr(v,y),k=r.calc(b,v,y),x=k.width,C=k.height/t.STEP;switch(d){case"left":_=-(a+=x+7),g=o.averagepitch,i.addExtra(new e(b,_,x+4,g,{type:"text",height:C,dim:w,position:"left"}));break;case"right":_=s+=4,g=o.averagepitch,i.addRight(new e(b,_,x+4,g,{type:"text",height:C,dim:w,position:"right"}));break;case"below":i.addRight(new e(b,0,0,void 0,{type:"text",position:"below",height:C,dim:w,realWidth:x}));break;case"above":i.addRight(new e(b,0,0,void 0,{type:"text",position:"above",height:C,dim:w,realWidth:x}));break;default:if(p){var S=p.y+3*t.STEP;i.addRight(new e(b,_+p.x,0,o.minpitch+S/t.STEP,{position:"relative",type:"text",height:C,dim:w}))}else{var T="above";o.positioning&&o.positioning.chordPosition&&(T=o.positioning.chordPosition),"hidden"!==T&&i.addCentered(new e(b,l/2,x,void 0,{type:"chord",position:T,height:C,dim:w,realWidth:x}))}}}return{roomTaken:a,roomTakenRight:s}},Us}function xu(){if(Gs)return Ws;Gs=1;var e=lu(),t=function(){if(ls)return ss;ls=1;var e=function(e,t,n,r){this.type="BeamElem",this.isflat=!!n,this.isgrace=!(!t||"grace"!==t),this.forceup=!!(this.isgrace||t&&"up"===t),this.forcedown=!(!t||"down"!==t),this.elems=[],this.total=0,this.average=6,this.allrests=!0,this.stemHeight=e,this.beams=[],r&&r.duration?(this.duration=r.duration,r.startTriplet&&(this.duration*=r.tripletMultiplier),this.duration=Math.round(1e3*this.duration)/1e3):this.duration=0};function t(e,t){return t?e/t:0}return e.prototype.setHint=function(){this.hint=!0},e.prototype.runningDirection=function(e){var t=e.averagepitch;void 0!==t&&(this.total=Math.round(this.total+t),this.count||(this.count=0),this.count++)},e.prototype.add=function(e){var t=e.abcelem.averagepitch;void 0!==t&&(e.abcelem.rest||(this.allrests=!1),e.beam=this,this.elems.push(e),this.total=Math.round(this.total+t),(void 0===this.min||e.abcelem.minpitch<this.min)&&(this.min=e.abcelem.minpitch),(void 0===this.max||e.abcelem.maxpitch>this.max)&&(this.max=e.abcelem.maxpitch))},e.prototype.addBeam=function(e){this.beams.push(e)},e.prototype.setStemDirection=function(){this.average=t(this.total,this.count),this.forceup?this.stemsUp=!0:this.forcedown?this.stemsUp=!1:this.stemsUp=this.average<6,delete this.count,this.total=0},e.prototype.calcDir=function(){this.average=t(this.total,this.elems.length),this.forceup?this.stemsUp=!0:this.forcedown?this.stemsUp=!1:this.stemsUp=this.average<6;for(var e=this.stemsUp?"up":"down",n=0;n<this.elems.length;n++)for(var r=0;r<this.elems[n].heads.length;r++)this.elems[n].heads[r].stemDir=e},ss=e}(),n=function(){if(us)return cs;us=1;var e=function(e,t){this.startVoice=e,this.type=t};return e.prototype.setBottomStaff=function(e){this.endVoice=e,this.startVoice.header&&!this.endVoice.header&&(this.header=this.startVoice.header,delete this.startVoice.header)},e.prototype.continuing=function(e){this.lastContinuedVoice=e},e.prototype.getWidth=function(){return 10},e.prototype.isStartVoice=function(e){return!!(this.startVoice&&this.startVoice.staff&&this.startVoice.staff.voices.length>0&&this.startVoice.staff.voices[0]===e)},cs=e}(),r=function(){if(fs)return ps;fs=1;var e=lu(),t=yu(),n=cu();return ps=function(r,i){var o,a=0;r.el_type="clef";var s=new e(r,0,10,"staff-extra clef",i);switch(s.isClef=!0,r.type){case"treble":o="clefs.G";break;case"tenor":case"alto":o="clefs.C";break;case"bass":o="clefs.F";break;case"treble+8":o="clefs.G",a=1;break;case"tenor+8":case"alto+8":o="clefs.C",a=1;break;case"bass+8":o="clefs.F",a=1;break;case"treble-8":o="clefs.G",a=-1;break;case"tenor-8":case"alto-8":o="clefs.C",a=-1;break;case"bass-8":o="clefs.F",a=-1;break;case"none":return null;case"perc":o="clefs.perc";break;default:s.addFixed(new n("clef="+r.type,0,0,void 0,{type:"debug"}))}if(o){var l=t.symbolHeightInPitches(o),c=function(e){switch(e){case"clefs.G":return-5;case"clefs.C":case"clefs.F":return-4;case"clefs.perc":return-2;default:return 0}}(o);if(s.addRight(new n(o,5,t.getSymbolWidth(o),r.clefPos,{top:l+r.clefPos+c,bottom:r.clefPos+c})),0!==a){var u=2/3,h=(t.getSymbolWidth(o)-t.getSymbolWidth("8")*u)/2,d=a>0?s.top+3:s.bottom-1,p=a>0?s.top+3:s.bottom-3,f=p-2;"bass-8"===r.type&&(d=3,h=0),s.addRight(new n("8",5+h,t.getSymbolWidth("8")*u,d,{scalex:u,scaley:u,top:p,bottom:f}))}}return s}}(),i=function(){if(gs)return ms;gs=1;var e=lu(),t=yu(),n=cu();return ms=function(r,i){if(r.el_type="keySignature",!r.accidentals||0===r.accidentals.length)return null;var o=new e(r,0,10,"staff-extra key-signature",i);o.isKeySig=!0;var a=0;return r.accidentals.forEach((function(e){var r,i=0;switch(e.acc){case"sharp":r="accidentals.sharp",i=-3;break;case"natural":r="accidentals.nat";break;case"flat":r="accidentals.flat",i=-1.2;break;case"quartersharp":r="accidentals.halfsharp",i=-2.5;break;case"quarterflat":r="accidentals.halfflat",i=-1.2;break;default:r="accidentals.flat"}o.addRight(new n(r,a,t.getSymbolWidth(r),e.verticalPos,{thickness:t.symbolHeightInPitches(r),top:e.verticalPos+t.symbolHeightInPitches(r)+i,bottom:e.verticalPos+i})),a+=t.getSymbolWidth(r)+2}),this),o}}(),o=function(){if(ys)return vs;ys=1;var e=yu(),t=cu();return vs=function(n,r,i,o){o||(o={});var a,s=void 0!==o.dir?o.dir:null,l=void 0!==o.headx?o.headx:0,c=void 0!==o.extrax?o.extrax:0,u=void 0!==o.flag?o.flag:null,h=void 0!==o.dot?o.dot:0,d=void 0!==o.dotshiftx?o.dotshiftx:0,p=void 0!==o.scale?o.scale:1,f=void 0!==o.accidentalSlot?o.accidentalSlot:[],m=void 0!==o.shouldExtendStem&&o.shouldExtendStem,g=void 0===o.printAccidentals||o.printAccidentals,v=i.verticalPos,y=0,b=0,_=0;if(void 0===r)n.addFixed(new t("pitch is undefined",0,0,0,{type:"debug"}));else if(""===r)a=new t(null,0,0,v);else{var w=l;if(i.printer_shift){var k="same"===i.printer_shift?1:0;w="down"===s?-e.getSymbolWidth(r)*p+k:e.getSymbolWidth(r)*p-k}var x={scalex:p,scaley:p,thickness:e.symbolHeightInPitches(r)*p,name:i.name};if((a=new t(r,w,e.getSymbolWidth(r)*p,v,x)).stemDir=s,u){var C=v+("down"===s?-7:7)*p;m&&("down"===s&&C>6&&(C=6),"up"===s&&C<6&&(C=6));var S="down"===s?l:l+a.w-.6;n.addRight(new t(u,S,e.getSymbolWidth(u)*p,C,{scalex:p,scaley:p}))}for(b=a.w+d-2+5*h;h>0;h--){var T=1-Math.abs(v)%2;n.addRight(new t("dots.dot",a.w+d-2+5*h,e.getSymbolWidth("dots.dot"),v+T))}}if(a&&(a.highestVert=i.highestVert),g&&i.accidental){var E;switch(i.accidental){case"quartersharp":E="accidentals.halfsharp";break;case"dblsharp":E="accidentals.dblsharp";break;case"sharp":E="accidentals.sharp";break;case"quarterflat":E="accidentals.halfflat";break;case"flat":E="accidentals.flat";break;case"dblflat":E="accidentals.dblflat";break;case"natural":E="accidentals.nat"}for(var I=!1,A=c,D=0;D<f.length;D++)if(v-f[D][0]>=6){f[D][0]=v,A=f[D][1],I=!0;break}!1===I&&(A-=e.getSymbolWidth(E)*p+2,f.push([v,A]),y=e.getSymbolWidth(E)*p+2);var B=e.symbolHeightInPitches(E);n.addExtra(new t(E,A,e.getSymbolWidth(E),v,{scalex:p,scaley:p,top:v+B/2,bottom:v-B/2})),_=e.getSymbolWidth(E)/2}return{notehead:a,accidentalshiftx:y,dotshiftx:b,extraLeft:_}}}(),a=function(){if(_s)return bs;_s=1;var e=lu(),t=yu(),n=cu();return bs=function(r,i){r.el_type="timeSignature";var o=new e(r,0,10,"staff-extra time-signature",i);if("specified"===r.type)for(var a=0,s=0;s<r.value.length;s++)if(0!==s&&(o.addRight(new n("+",a+1,t.getSymbolWidth("+"),6,{thickness:t.symbolHeightInPitches("+")})),a+=t.getSymbolWidth("+")+2),r.value[s].den){for(var l=0,c=0;c<r.value[s].num.length;c++)l+=t.getSymbolWidth(r.value[s].num[c]);var u=0;for(c=0;c<r.value[s].num.length;c++)u+=t.getSymbolWidth(r.value[s].den[c]);var h=Math.max(l,u);o.addRight(new n(r.value[s].num,a+(h-l)/2,l,8,{thickness:t.symbolHeightInPitches(r.value[s].num[0])})),o.addRight(new n(r.value[s].den,a+(h-u)/2,u,4,{thickness:t.symbolHeightInPitches(r.value[s].den[0])})),a+=h}else{for(var d=0,p=0;p<r.value[s].num.length;p++)d+=t.getSymbolWidth(r.value[s].num[p]);o.addRight(new n(r.value[s].num,a,d,6,{thickness:t.symbolHeightInPitches(r.value[s].num[0])})),a+=d}else"common_time"===r.type?o.addRight(new n("timesig.common",0,t.getSymbolWidth("timesig.common"),6,{thickness:t.symbolHeightInPitches("timesig.common")})):"cut_time"===r.type?o.addRight(new n("timesig.cut",0,t.getSymbolWidth("timesig.cut"),6,{thickness:t.symbolHeightInPitches("timesig.cut")})):"tempus_imperfectum"===r.type?o.addRight(new n("timesig.imperfectum",0,t.getSymbolWidth("timesig.imperfectum"),6,{thickness:t.symbolHeightInPitches("timesig.imperfectum")})):"tempus_imperfectum_prolatio"===r.type?o.addRight(new n("timesig.imperfectum2",0,t.getSymbolWidth("timesig.imperfectum2"),6,{thickness:t.symbolHeightInPitches("timesig.imperfectum2")})):"tempus_perfectum"===r.type?o.addRight(new n("timesig.perfectum",0,t.getSymbolWidth("timesig.perfectum"),6,{thickness:t.symbolHeightInPitches("timesig.perfectum")})):"tempus_perfectum_prolatio"===r.type&&o.addRight(new n("timesig.perfectum2",0,t.getSymbolWidth("timesig.perfectum2"),6,{thickness:t.symbolHeightInPitches("timesig.perfectum2")}));return o},bs}(),s=_u(),l=Ls?Bs:(Ls=1,Bs=function(e,t,n){this.type="EndingElem",this.text=e,this.anchor1=t,this.anchor2=n,this.endingHeightAbove=5,this.pitch=void 0}),c=yu(),u=cu(),h=Xc(),d=wu(),p=function(){if(js)return Ns;js=1;var e=lu(),t=cu(),n=function(e,t,n){this.type="TempoElement",this.tempo=e,this.tempo.type="tempo",this.tuneNumber=t,this.totalHeightInPitches=6,this.tempoHeightAbove=this.totalHeightInPitches,this.pitch=void 0,this.tempo.duration&&!this.tempo.suppressBpm&&(this.note=this.createNote(n,e,t))};return n.prototype.setX=function(e){this.x=e},n.prototype.createNote=function(n,r,i){var o,a,s,l=.75,c=r.duration[0],u=new e(r,c,1,"tempo",i);c<=1/32?(s="noteheads.quarter",a="flags.u32nd",o=0):c<=1/16?(s="noteheads.quarter",a="flags.u16th",o=0):c<=3/32?(s="noteheads.quarter",a="flags.u16nd",o=1):c<=1/8?(s="noteheads.quarter",a="flags.u8th",o=0):c<=3/16?(s="noteheads.quarter",a="flags.u8th",o=1):c<=1/4?(s="noteheads.quarter",o=0):c<=3/8?(s="noteheads.quarter",o=1):c<=.5?(s="noteheads.half",o=0):c<=3/4?(s="noteheads.half",o=1):c<=1?(s="noteheads.whole",o=0):c<=1.5?(s="noteheads.whole",o=1):c<=2?(s="noteheads.dbl",o=0):(s="noteheads.dbl",o=1);var h,d=n(u,s,{verticalPos:0},
// This is just temporary: we'll offset the vertical positioning when we get the actual vertical spot.
{dir:"up",flag:a,dot:o,scale:l}).notehead;if(u.addHead(d),"noteheads.whole"!==s&&"noteheads.dbl"!==s){var p=d.dx+d.w;h=new t(null,p,0,.25,{type:"stem",pitch2:3.75,linewidth:-.6}),u.addRight(h)}return u},Ns=n}(),f=bu(),m=function(){if(Rs)return zs;Rs=1;var e=function(e,t,n){this.type="TripletElem",this.anchor1=t,this.number=e,this.durationClass=("d"+Math.round(1e3*t.parent.durationClass)/1e3).replace(/\./,"-"),this.middleElems=[],this.flatBeams=n.flatBeams};return e.prototype.isClosed=function(){return!!this.anchor2},e.prototype.middleNote=function(e){this.middleElems.push(e)},e.prototype.setCloseAnchor=function(e){this.anchor2=e,this.anchor1.parent.beam&&"up"!==this.anchor1.stemDir||(this.endingHeightAbove=4)},zs=e}(),g=iu(),v=ku(),y=Jc(),b=Uc(),_=function(e){var t=0;return e.duration&&(t=e.duration),t},w=!1,k={rest:{0:"rests.whole",1:"rests.half",2:"rests.quarter",3:"rests.8th",4:"rests.16th",5:"rests.32nd",6:"rests.64th",7:"rests.128th",multi:"rests.multimeasure"},note:{"-1":"noteheads.dbl",0:"noteheads.whole",1:"noteheads.half",2:"noteheads.quarter",3:"noteheads.quarter",4:"noteheads.quarter",5:"noteheads.quarter",6:"noteheads.quarter",7:"noteheads.quarter",nostem:"noteheads.quarter"},rhythm:{"-1":"noteheads.slash.whole",0:"noteheads.slash.whole",1:"noteheads.slash.whole",2:"noteheads.slash.quarter",3:"noteheads.slash.quarter",4:"noteheads.slash.quarter",5:"noteheads.slash.quarter",6:"noteheads.slash.quarter",7:"noteheads.slash.quarter",nostem:"noteheads.slash.nostem"},x:{"-1":"noteheads.indeterminate",0:"noteheads.indeterminate",1:"noteheads.indeterminate",2:"noteheads.indeterminate",3:"noteheads.indeterminate",4:"noteheads.indeterminate",5:"noteheads.indeterminate",6:"noteheads.indeterminate",7:"noteheads.indeterminate",nostem:"noteheads.indeterminate"},harmonic:{"-1":"noteheads.harmonic.quarter",0:"noteheads.harmonic.quarter",1:"noteheads.harmonic.quarter",2:"noteheads.harmonic.quarter",3:"noteheads.harmonic.quarter",4:"noteheads.harmonic.quarter",5:"noteheads.harmonic.quarter",6:"noteheads.harmonic.quarter",7:"noteheads.harmonic.quarter",nostem:"noteheads.harmonic.quarter"},triangle:{"-1":"noteheads.triangle.quarter",0:"noteheads.triangle.quarter",1:"noteheads.triangle.quarter",2:"noteheads.triangle.quarter",3:"noteheads.triangle.quarter",4:"noteheads.triangle.quarter",5:"noteheads.triangle.quarter",6:"noteheads.triangle.quarter",7:"noteheads.triangle.quarter",nostem:"noteheads.triangle.quarter"},uflags:{3:"flags.u8th",4:"flags.u16th",5:"flags.u32nd",6:"flags.u64th"},dflags:{3:"flags.d8th",4:"flags.d16th",5:"flags.d32nd",6:"flags.d64th"}},x=function(e,t,n){this.decoration=new s,this.getTextSize=e,this.tuneNumber=t,this.isBagpipes=n.bagpipes,this.flatBeams=n.flatbeams,this.graceSlurs=n.graceSlurs,this.percmap=n.percmap,this.initialClef=n.initialClef,this.jazzchords=!!n.jazzchords,this.germanAlphabet=!!n.germanAlphabet,this.reset()};function C(e,t){var n=e[t];if("note"!==n.el_type||!n.startBeam||n.endBeam)return{count:1,elem:n};for(var r=[];t<e.length&&"note"===e[t].el_type&&(r.push(e[t]),!e[t].endBeam);)t++;return{count:r.length,elem:r}}function S(e){if(e.pitches){T(e);for(var t=0,n=0;n<e.pitches.length;n++)t+=e.pitches[n].verticalPos;e.averagepitch=t/e.pitches.length,e.minpitch=e.pitches[0].verticalPos,e.maxpitch=e.pitches[e.pitches.length-1].verticalPos}}x.prototype.reset=function(){this.slurs={},this.ties=[],this.voiceScale=1,this.voiceColor=void 0,this.slursbyvoice={},this.tiesbyvoice={},this.endingsbyvoice={},this.scaleByVoice={},this.colorByVoice={},this.tripletmultiplier=1,this.abcline=void 0,this.accidentalSlot=void 0,this.accidentalshiftx=void 0,this.dotshiftx=void 0,this.hasVocals=!1,this.minY=void 0,this.partstartelem=void 0,this.startlimitelem=void 0,this.stemdir=void 0},x.prototype.setStemHeight=function(e){this.stemHeight=Math.round(10*e/h.STEP)/10},x.prototype.getCurrentVoiceId=function(e,t){return"s"+e+"v"+t},x.prototype.pushCrossLineElems=function(e,t){this.slursbyvoice[this.getCurrentVoiceId(e,t)]=this.slurs,this.tiesbyvoice[this.getCurrentVoiceId(e,t)]=this.ties,this.endingsbyvoice[this.getCurrentVoiceId(e,t)]=this.partstartelem,this.scaleByVoice[this.getCurrentVoiceId(e,t)]=this.voiceScale,this.voiceColor&&(this.colorByVoice[this.getCurrentVoiceId(e,t)]=this.voiceColor)},x.prototype.popCrossLineElems=function(e,t){this.slurs=this.slursbyvoice[this.getCurrentVoiceId(e,t)]||{},this.ties=this.tiesbyvoice[this.getCurrentVoiceId(e,t)]||[],this.partstartelem=this.endingsbyvoice[this.getCurrentVoiceId(e,t)],this.voiceScale=this.scaleByVoice[this.getCurrentVoiceId(e,t)],void 0===this.voiceScale&&(this.voiceScale=1),this.voiceColor=this.colorByVoice[this.getCurrentVoiceId(e,t)]},x.prototype.containsLyrics=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].voices.length;n++)for(var r=0;r<e[t].voices[n].length;r++){var i=e[t].voices[n][r];if(i.lyric)return void(i.positioning&&"below"!==i.positioning.vocalPosition||(this.hasVocals=!0))}},x.prototype.createABCLine=function(e,t,n){this.minY=2,this.containsLyrics(e);var r=new d(this.getTextSize);this.tempoSet=!1;for(var i=0;i<e.length;i++)w&&this.restoreState(),w=!1,this.createABCStaff(r,e[i],t,i,n);return r},x.prototype.createABCStaff=function(e,t,o,s,l){e.getTextSize.updateFonts(t);for(var c=0;c<t.voices.length;c++){var u=new g(c,t.voices.length);0===c?(u.barfrom="start"===t.connectBarLines||"continue"===t.connectBarLines,u.barto="continue"===t.connectBarLines||"end"===t.connectBarLines):u.duplicate=!0,t.title&&t.title[c]&&(u.header=t.title[c].replace(/\\n/g,"\n"),u.headerPosition=6+e.getTextSize.baselineToCenter(u.header,"voicefont","staff-extra voice-name",c,t.voices.length)/h.STEP),t.clef&&"perc"===t.clef.type&&(u.isPercussion=!0);var d=(!this.initialClef||0===l)&&r(t.clef,this.tuneNumber);d&&(0===c&&t.barNumber&&this.addMeasureNumber(t.barNumber,d),u.addChild(d),this.startlimitelem=d);var p=i(t.key,this.tuneNumber);if(p&&(u.addChild(p),this.startlimitelem=p),t.meter){"specified"===t.meter.type?this.measureLength=t.meter.value[0].num/t.meter.value[0].den:this.measureLength=1;var f=a(t.meter,this.tuneNumber);u.addChild(f),this.startlimitelem=f}u.duplicate&&(u.children=[]);var m=t.clef.stafflines||0===t.clef.stafflines?t.clef.stafflines:5;e.addVoice(u,s,m);var v=1===m;this.createABCVoice(t.voices[c],o,s,c,v,u),e.setStaffLimits(u),0===c&&("start"===t.brace||!e.brace&&t.brace?(e.brace||(e.brace=[]),e.brace.push(new n(u,"brace"))):"end"===t.brace&&e.brace?e.brace[e.brace.length-1].setBottomStaff(u):"continue"===t.brace&&e.brace&&e.brace[e.brace.length-1].continuing(u),"start"===t.bracket||!e.bracket&&t.bracket?(e.bracket||(e.bracket=[]),e.bracket.push(new n(u,"bracket"))):"end"===t.bracket&&e.bracket?e.bracket[e.bracket.length-1].setBottomStaff(u):"continue"===t.bracket&&e.bracket&&e.bracket[e.bracket.length-1].continuing(u))}},x.prototype.createABCVoice=function(t,n,r,i,a,s){this.popCrossLineElems(r,i),this.stemdir=this.isBagpipes?"down":null,this.abcline=t,this.partstartelem&&(this.partstartelem=new l("",null,null),s.addOther(this.partstartelem));var c=s.voicetotal<2?-1:s.voicenumber;for(var u in this.slurs)this.slurs.hasOwnProperty(u)&&(this.slurs[u]=new f({force:this.slurs[u].force,voiceNumber:c,stemDir:this.slurs[u].stemDir,style:this.slurs[u].dotted}),w&&this.slurs[u].setHint(),s.addOther(this.slurs[u]));for(var h=0;h<this.ties.length;h++)this.ties[h]=new f({force:this.ties[h].force,stemDir:this.ties[h].stemDir,voiceNumber:c,style:this.ties[h].dotted}),w&&this.ties[h].setHint(),s.addOther(this.ties[h]);for(var d=0;d<this.abcline.length;d++)S(this.abcline[d]),this.minY=Math.min(this.abcline[d].minpitch,this.minY);for(var m=0===r,g=0;g<this.abcline.length;){var v=C(this.abcline,g),y=this.createABCElement(m,a,s,v.elem);if(y)for(h=0;h<y.length;h++){if(!this.tempoSet&&n&&!n.suppress){this.tempoSet=!0;var b=new e(n,0,0,"tempo",this.tuneNumber,{});b.addFixedX(new p(n,this.tuneNumber,o)),s.addChild(b)}s.addChild(y[h])}g+=v.count}this.pushCrossLineElems(r,i)},x.prototype.saveState=function(){this.tiesSave=b.cloneArray(this.ties),this.slursSave=b.cloneHashOfHash(this.slurs),this.slursbyvoiceSave=b.cloneHashOfHash(this.slursbyvoice),this.tiesbyvoiceSave=b.cloneHashOfArrayOfHash(this.tiesbyvoice)},x.prototype.restoreState=function(){this.ties=b.cloneArray(this.tiesSave),this.slurs=b.cloneHashOfHash(this.slursSave),this.slursbyvoice=b.cloneHashOfHash(this.slursbyvoiceSave),this.tiesbyvoice=b.cloneHashOfArrayOfHash(this.tiesbyvoiceSave)},x.prototype.createABCElement=function(t,n,s,l){var c=[];switch(l.el_type){case void 0:c=this.createBeam(n,s,l);break;case"note":c[0]=this.createNote(l,!1,n,s),this.triplet&&this.triplet.isClosed()&&(s.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1);break;case"bar":c[0]=this.createBarLine(s,l,t),s.duplicate&&c.length>0&&(c[0].invisible=!0);break;case"meter":c[0]=a(l,this.tuneNumber),this.startlimitelem=c[0],s.duplicate&&c.length>0&&(c[0].invisible=!0);break;case"clef":if(c[0]=r(l,this.tuneNumber),!c[0])return null;s.duplicate&&c.length>0&&(c[0].invisible=!0);break;case"key":var d=i(l,this.tuneNumber);d&&(c[0]=d,this.startlimitelem=c[0]),s.duplicate&&c.length>0&&(c[0].invisible=!0);break;case"stem":this.stemdir="auto"===l.direction?void 0:l.direction;break;case"part":var f=new e(l,0,0,"part",this.tuneNumber),m=this.getTextSize.calc(l.title,"partsfont","part");f.addFixedX(new u(l.title,0,0,void 0,{type:"part",height:m.height/h.STEP})),c[0]=f;break;case"tempo":var g=new e(l,0,0,"tempo",this.tuneNumber);g.addFixedX(new p(l,this.tuneNumber,o)),c[0]=g;break;case"style":"normal"===l.head?delete this.style:this.style=l.head;break;case"hint":w=!0,this.saveState();break;case"midi":break;case"scale":this.voiceScale=l.size;break;case"color":this.voiceColor=l.color,s.color=this.voiceColor;break;default:var v=new e(l,0,0,"unsupported",this.tuneNumber);v.addFixed(new u("element type "+l.el_type,0,0,void 0,{type:"debug"})),c[0]=v}return c},x.prototype.createBeam=function(e,n,r){var i=[],o=new t(this.stemHeight*this.voiceScale,this.stemdir,this.flatBeams,r[0]);w&&o.setHint();for(var a=0;a<r.length;a++)o.runningDirection(r[a]);o.setStemDirection();var s=this.stemdir;for(this.stemdir=o.stemsUp?"up":"down",a=0;a<r.length;a++){var l=r[a],c=this.createNote(l,!0,e,n);i.push(c),o.add(c),this.triplet&&this.triplet.isClosed()&&(n.addOther(this.triplet),this.triplet=null,this.tripletmultiplier=1)}return o.calcDir(),n.addBeam(o),this.stemdir=s,i};var T=function(e){var t;do{t=!0;for(var n=0;n<e.pitches.length-1;n++)if(e.pitches[n].pitch>e.pitches[n+1].pitch){t=!1;var r=e.pitches[n];e.pitches[n]=e.pitches[n+1],e.pitches[n+1]=r}}while(!t)},E=function(e,t,n,r,i,o,a,s,l){for(var c=n;c>11;c--)c%2!=0||r||e.addFixed(new u(null,s,(i+4)*l,c,{type:"ledger"}));for(c=t;c<1;c++)c%2!=0||r||e.addFixed(new u(null,s,(i+4)*l,c,{type:"ledger"}));for(c=0;c<o.length;c++){var h=i;"down"===a&&(h=-h),e.addFixed(new u(null,h+s,(i+4)*l,o[c],{type:"ledger"}))}};function I(e,t){for(var n=0;n<e.length;n++)if(JSON.stringify(e[n])===JSON.stringify(t))return;e.push(t)}return x.prototype.addGraceNotes=function(e,n,r,i,a,s,l){var h=.6;a=Math.round(.7*a);var d,p,m=null;e.gracenotes.length>1&&(m=new t(a,"grace",s),w&&m.setHint(),m.mainNote=r);var g=[];for(p=e.gracenotes.length-1;p>=0;p--)l+=10,g[p]=l,e.gracenotes[p].accidental&&(l+=7);for(p=0;p<e.gracenotes.length;p++){var v=e.gracenotes[p].verticalPos;d=m?null:k.uflags[s?5:3];var y=o(r,"noteheads.quarter",e.gracenotes[p],{dir:"up",headx:-g[p],extrax:-g[p],flag:d,scale:h*this.voiceScale,accidentalSlot:[]});y.notehead.highestVert=y.notehead.pitch+a;var b=y.notehead;if(this.addSlursAndTies(r,e.gracenotes[p],b,n,"up",!0),r.addExtra(b),e.gracenotes[p].acciaccatura){var _=e.gracenotes[p].verticalPos+4.2,x=m?5:6;r.addRight(new u("flags.ugrace",-g[p]+x,0,_,{scalex:h,scaley:h}))}if(m){var C=e.gracenotes[p].duration/2;s&&(C/=2);var S={heads:[b],abcelem:{averagepitch:v,minpitch:v,maxpitch:v,duration:C}};m.add(S)}else{var T=v+1/3*h,I=v+4.2,A=b.dx+b.w;r.addExtra(new u(null,A,0,T,{type:"stem",pitch2:I,linewidth:-.6}))}E(r,v,v,!1,c.getSymbolWidth("noteheads.quarter"),[],!0,b.dx-1,.6);var D=e.rest&&("spacer"===e.rest.type||"invisible"===e.rest.type);0!==p||s||!this.graceSlurs||D||n.addOther(new f({anchor1:b,anchor2:i,isGrace:!0}))}return m&&(m.calcDir(),n.addBeam(m)),l},x.prototype.addNoteToAbcElement=function(e,t,n,r,i,a,s,l,h){var d,p,f,m,g,v=0,b=0,w=0,x=[],C=[],S=0,T=t.averagepitch>=6?"down":"up";for(r&&(T=r),(i=t.style?t.style:i)&&"normal"!==i||(i="note"),m=a?k[i].nostem:k[i][-s],g="down"===T?t.pitches.length-2:1;"down"===T?g>=0:g<t.pitches.length;g="down"===T?g-1:g+1){var E=t.pitches["down"===T?g+1:g-1],A=t.pitches[g],D="down"===T?E.pitch-A.pitch:A.pitch-E.pitch;D<=1&&!E.printer_shift&&(A.printer_shift=D?"different":"same",(A.verticalPos>11||A.verticalPos<1)&&x.push(A.verticalPos-A.verticalPos%2),"down"===T?b=c.getSymbolWidth(m)+2:v=c.getSymbolWidth(m)+2)}var B=t.pitches.length;for(g=0;g<t.pitches.length;g++){var L,M;if(!l)L="down"===T&&0!==g||"up"===T&&g!==B-1?null:k["down"===T?"dflags":"uflags"][-s];if(t.pitches[g].style)M=k[t.pitches[g].style][-s];else if(h.isPercussion&&this.percmap){M=m;var F=this.percmap[y(t.pitches[g])];F&&F.noteHead&&k[F.noteHead]&&(M=k[F.noteHead][-s])}else M=m;if(t.pitches[g].highestVert=t.pitches[g].verticalPos,("up"===r||"up"===T)&&0===g||("down"===r||"down"===T)&&g===B-1){if((t.startSlur||1===B)&&(t.pitches[g].highestVert=t.pitches[B-1].verticalPos,_(t)<1&&("up"===r||"up"===T)&&(t.pitches[g].highestVert+=6)),t.startSlur)for(t.pitches[g].startSlur||(t.pitches[g].startSlur=[]),f=0;f<t.startSlur.length;f++)I(t.pitches[g].startSlur,t.startSlur[f]);if(t.endSlur)for(t.pitches[g].highestVert=t.pitches[B-1].verticalPos,_(t)<1&&("up"===r||"up"===T)&&(t.pitches[g].highestVert+=6),t.pitches[g].endSlur||(t.pitches[g].endSlur=[]),f=0;f<t.endSlur.length;f++)I(t.pitches[g].endSlur,t.endSlur[f])}var O=!l&&s<=-1,P=o(e,M,t.pitches[g],{dir:T,extrax:-b,flag:L,dot:n,dotshiftx:v,scale:this.voiceScale,accidentalSlot:C,shouldExtendStem:!r,printAccidentals:!h.isPercussion});S=Math.max(c.getSymbolWidth(M),S),e.extraw-=P.extraLeft,(d=P.notehead)&&(this.addSlursAndTies(e,t.pitches[g],d,h,O?T:null,!1),t.gracenotes&&t.gracenotes.length>0&&(d.bottom=d.bottom-1),e.addHead(d)),b+=P.accidentalshiftx,w=Math.max(w,P.dotshiftx)}if(O){var N=Math.round(70*this.voiceScale)/10,j="down"===T?t.minpitch-N:t.minpitch+1/3;j>6&&!r&&(j=6);var z="down"===T?t.maxpitch-1/3:t.maxpitch+N;z<6&&!r&&(z=6);var R="down"===T||0===e.heads.length?0:e.heads[0].w,q="down"===T?1:-1;d&&"noteheads.slash.quarter"===d.c&&("down"===T?z-=1:j+=1),e.addRight(new u(null,R,0,j,{type:"stem",pitch2:z,linewidth:q,bottom:j-1})),p=Math.min(j,z)}return{noteHead:d,roomTaken:b,roomTakenRight:w,min:p,additionalLedgers:x,dir:T,symbolWidth:S}},x.prototype.addLyric=function(e,t){var n="";t.lyric.forEach((function(e){var t=" "===e.divider?"":e.divider;n+=e.syllable+t+"\n"}));var r=this.getTextSize.calc(n,"vocalfont","lyric"),i=t.positioning?t.positioning.vocalPosition:"below";e.addCentered(new u(n,0,r.width,void 0,{type:"lyric",position:i,height:r.height/h.STEP,dim:this.getTextSize.attr("vocalfont","lyric")}))},x.prototype.createNote=function(t,n,r,i){var a,s=null,l=0,h=0,d=0,p=[],f=_(t),g=!1;0===f&&(g=!0,f=.25,n=!0);for(var y=Math.floor(Math.log(f)/Math.log(2)),b=0,x=Math.pow(2,y),C=x/2;x<f;b++,x+=C,C/=2);t.startTriplet&&(this.tripletmultiplier=t.tripletMultiplier);var S=f*this.tripletmultiplier;t.rest&&"multimeasure"===t.rest.type&&(S=1),t.rest&&"invisible-multimeasure"===t.rest.type&&(S=this.measureLength*t.rest.text);var T=t.rest?"rest":"note",I=new e(t,S,1,T,this.tuneNumber,{durationClassOveride:t.duration*this.tripletmultiplier});if(w&&I.setHint(),t.rest){this.measureLength===f&&"invisible"!==t.rest.type&&"spacer"!==t.rest.type&&t.rest.type.indexOf("multimeasure")<0&&(t.rest.type="whole");var A=function(e,t,n,r,i,a,s,l,h){var d,p,f,m,g=7;switch(i&&("down"===a&&(g=3),"up"===a&&(g=11)),s&&(g=n<.5||n<1?7:5),t.rest.type){case"whole":d=k.rest[0],t.averagepitch=g,t.minpitch=g,t.maxpitch=g,r=0;break;case"rest":d="rhythm"===t.style?k.rhythm[-l]:k.rest[-l],t.averagepitch=g,t.minpitch=g,t.maxpitch=g;break;case"invisible":case"invisible-multimeasure":case"spacer":d="",t.averagepitch=g,t.minpitch=g,t.maxpitch=g;break;case"multimeasure":d=k.rest.multi,t.averagepitch=g,t.minpitch=g,t.maxpitch=g,r=0;var v=c.getSymbolWidth(d);e.addHead(new u(d,v,2*v,7));var y=new u(""+t.rest.text,v,v,16,{type:"multimeasure-text"});e.addExtra(y)}if(t.rest.type.indexOf("multimeasure")<0&&"invisible"!==t.rest.type){var b=o(e,d,{verticalPos:g},{dot:r,scale:h});(p=b.notehead)&&(e.addHead(p),f=b.accidentalshiftx,m=b.dotshiftx)}return{noteHead:p,roomTaken:f,roomTakenRight:m}}(I,t,f,b,i.voicetotal>1,this.stemdir,r,y,this.voiceScale);s=A.noteHead,l=A.roomTaken,h=A.roomTakenRight}else{var D=this.addNoteToAbcElement(I,t,b,this.stemdir,this.style,g,y,n,i);void 0!==D.min&&(this.minY=Math.min(D.min,this.minY)),s=D.noteHead,l=D.roomTaken,h=D.roomTakenRight,p=D.additionalLedgers,a=D.dir,d=D.symbolWidth}if(void 0!==t.lyric&&this.addLyric(I,t),void 0!==t.gracenotes&&(l+=this.addGraceNotes(t,i,I,s,this.stemHeight*this.voiceScale,this.isBagpipes,l)),t.decoration&&this.decoration.createDecoration(i,t.decoration,I.top,s?s.w:0,I,l,a,I.bottom,t.positioning,this.hasVocals),t.barNumber&&I.addFixed(new u(t.barNumber,-10,0,0,{type:"barNumber"})),E(I,t.minpitch,t.maxpitch,t.rest,d,p,a,-2,1),void 0!==t.chord){var B=v(this.getTextSize,I,t,l,h,d,this.jazzchords,this.germanAlphabet);l=B.roomTaken,h=B.roomTakenRight}return t.startTriplet&&(this.triplet=new m(t.startTriplet,s,{flatBeams:this.flatBeams})),t.endTriplet&&this.triplet&&this.triplet.setCloseAnchor(s),!this.triplet||t.startTriplet||t.endTriplet||t.rest&&"spacer"===t.rest.type||this.triplet.middleNote(s),I},x.prototype.addSlursAndTies=function(e,t,n,r,i,o){if(t.endTie&&this.ties.length>0){for(var a=!1,s=0;s<this.ties.length;s++)if(this.ties[s].anchor1&&this.ties[s].anchor1.pitch===n.pitch){this.ties[s].setEndAnchor(n),r.setRange(this.ties[s]),this.ties.splice(s,1),a=!0;break}a||(this.ties[0].setEndAnchor(n),r.setRange(this.ties[0]),this.ties.splice(0,1))}var l,c,u=r.voicetotal<2?-1:r.voicenumber;if(t.startTie){var h=new f({anchor1:n,force:"down"===this.stemdir||"up"===this.stemdir,stemDir:this.stemdir,isGrace:o,voiceNumber:u,style:t.startTie.style});w&&h.setHint(),this.ties[this.ties.length]=h,r.addOther(h),e.startTie=!0}if(t.endSlur)for(var d=0;d<t.endSlur.length;d++)c=t.endSlur[d],this.slurs[c]?((l=this.slurs[c]).setEndAnchor(n),r.setRange(l),delete this.slurs[c]):(l=new f({anchor2:n,stemDir:this.stemdir,voiceNumber:u}),w&&l.setHint(),r.addOther(l)),this.startlimitelem&&l.setStartX(this.startlimitelem);else if(!o)for(var p in this.slurs)this.slurs.hasOwnProperty(p)&&this.slurs[p].addInternalNote(n);if(t.startSlur)for(d=0;d<t.startSlur.length;d++)c=t.startSlur[d].label,l=new f({anchor1:n,stemDir:this.stemdir,voiceNumber:u,style:t.startSlur[d].style}),w&&l.setHint(),this.slurs[c]=l,r.addOther(l)},x.prototype.addMeasureNumber=function(e,t){var n=this.getTextSize.calc(e,"measurefont","bar-number"),r=0;t.isClef&&(r+=n.width/2);var i=n.width>10&&"treble"===t.abcelem.type?13:11;t.addFixed(new u(e,r,n.width,i+n.height/h.STEP,{type:"barNumber",dim:this.getTextSize.attr("measurefont","bar-number")}))},x.prototype.createBarLine=function(t,n,r){var i=new e(n,0,10,"bar",this.tuneNumber),o=null,a=0;n.barNumber&&this.addMeasureNumber(n.barNumber,i);var s="bar_right_repeat"===n.type||"bar_dbl_repeat"===n.type,c="bar_left_repeat"!==n.type&&"bar_thick_thin"!==n.type&&"bar_invisible"!==n.type,h="bar_right_repeat"===n.type||"bar_dbl_repeat"===n.type||"bar_left_repeat"===n.type||"bar_thin_thick"===n.type||"bar_thick_thin"===n.type,d="bar_left_repeat"===n.type||"bar_thick_thin"===n.type||"bar_thin_thin"===n.type||"bar_dbl_repeat"===n.type,p="bar_left_repeat"===n.type||"bar_dbl_repeat"===n.type;if(s||p){for(var f in this.slurs)this.slurs.hasOwnProperty(f)&&this.slurs[f].setEndX(i);this.startlimitelem=i}if(s&&(i.addRight(new u("dots.dot",a,1,7)),i.addRight(new u("dots.dot",a,1,5)),a+=6),c&&(o=new u(null,a,1,2,{type:"bar",pitch2:10,linewidth:.6}),i.addRight(o)),"bar_invisible"===n.type&&(o=new u(null,a,1,2,{type:"none",pitch2:10,linewidth:.6}),i.addRight(o)),n.decoration&&this.decoration.createDecoration(t,n.decoration,12,h?3:1,i,0,"down",2,n.positioning,this.hasVocals),h&&(o=new u(null,a+=4,4,2,{type:"bar",pitch2:10,linewidth:4}),i.addRight(o),a+=5),this.partstartelem&&n.endEnding&&(this.partstartelem.anchor2=o,this.partstartelem=null),d&&(o=new u(null,a+=3,1,2,{type:"bar",pitch2:10,linewidth:.6}),i.addRight(o)),p&&(a+=3,i.addRight(new u("dots.dot",a,1,7)),i.addRight(new u("dots.dot",a,1,5))),n.startEnding&&r){var m=this.getTextSize.calc(n.startEnding,"repeatfont","").width;i.minspacing+=m+10,this.partstartelem=new l(n.startEnding,o,null),t.addOther(this.partstartelem)}return i.extraw-=5,void 0!==n.chord&&v(this.getTextSize,i,n,0,0,0,!1,this.germanAlphabet),i},Ws=x}function Cu(){if(Xs)return Ks;Xs=1;var e=Xc(),t=function(){if(Ys)return Vs;Ys=1;var e="http://www.w3.org/2000/svg";function t(e){this.svg=o(),this.currentGroup=[],e.appendChild(this.svg)}function n(e,t,n){var r=n-e;return"M "+e+" "+t+" l "+r+" 0 l 0 1  l "+-r+" 0  z "}function r(e,t,n){var r=n-t;return"M "+e+" "+t+" l 0 "+r+" l 1 0  l 0 "+-r+"  z "}t.prototype.clear=function(){if(this.svg){var e=this.svg.parentNode;this.svg=o(),this.currentGroup=[],e&&(e.innerHTML="",e.appendChild(this.svg))}},t.prototype.setTitle=function(e){var t=document.createElement("title"),n=document.createTextNode(e);t.appendChild(n),this.svg.insertBefore(t,this.svg.firstChild)},t.prototype.setResponsiveWidth=function(e,t){if(this.svg.setAttribute("viewBox","0 0 "+e+" "+t),this.svg.setAttribute("preserveAspectRatio","xMinYMin meet"),this.svg.removeAttribute("height"),this.svg.removeAttribute("width"),this.svg.style.display="inline-block",this.svg.style.position="absolute",this.svg.style.top="0",this.svg.style.left="0",this.svg.parentNode){var n=this.svg.parentNode.getAttribute("class");n?n.indexOf("abcjs-container")<0&&this.svg.parentNode.setAttribute("class",n+" abcjs-container"):this.svg.parentNode.setAttribute("class","abcjs-container"),this.svg.parentNode.style.display="inline-block",this.svg.parentNode.style.position="relative",this.svg.parentNode.style.width="100%";var r=t/e*100;this.svg.parentNode.style["padding-bottom"]=r+"%",this.svg.parentNode.style["vertical-align"]="middle",this.svg.parentNode.style.overflow="hidden"}},t.prototype.setSize=function(e,t){this.svg.setAttribute("width",e),this.svg.setAttribute("height",t)},t.prototype.setAttribute=function(e,t){this.svg.setAttribute(e,t)},t.prototype.setScale=function(e){1!==e?(this.svg.style.transform="scale("+e+","+e+")",this.svg.style["-ms-transform"]="scale("+e+","+e+")",this.svg.style["-webkit-transform"]="scale("+e+","+e+")",this.svg.style["transform-origin"]="0 0",this.svg.style["-ms-transform-origin-x"]="0",this.svg.style["-ms-transform-origin-y"]="0",this.svg.style["-webkit-transform-origin-x"]="0",this.svg.style["-webkit-transform-origin-y"]="0"):(this.svg.style.transform="",this.svg.style["-ms-transform"]="",this.svg.style["-webkit-transform"]="")},t.prototype.insertStyles=function(t){var n=document.createElementNS(e,"style");n.textContent=t,this.svg.insertBefore(n,this.svg.firstChild)},t.prototype.setParentStyles=function(e){for(var t in e)e.hasOwnProperty(t)&&this.svg.parentNode&&(this.svg.parentNode.style[t]=e[t]);this.dummySvg&&(document.querySelector("body").removeChild(this.dummySvg),this.dummySvg=null)},t.prototype.rect=function(e){var t=[],i=e.x,o=e.y,a=e.x+e.width,s=e.y+e.height;return t.push(n(i,o,a)),t.push(n(i,s,a)),t.push(r(a,o,s)),t.push(r(i,s,o)),this.path({path:t.join(" "),stroke:"none","data-name":e["data-name"]})},t.prototype.dottedLine=function(t){var n=document.createElementNS(e,"line");n.setAttribute("x1",t.x1),n.setAttribute("x2",t.x2),n.setAttribute("y1",t.y1),n.setAttribute("y2",t.y2),n.setAttribute("stroke",t.stroke),n.setAttribute("stroke-dasharray","5,5"),this.svg.insertBefore(n,this.svg.firstChild)},t.prototype.rectBeneath=function(t){var n=document.createElementNS(e,"rect");n.setAttribute("x",t.x),n.setAttribute("width",t.width),n.setAttribute("y",t.y),n.setAttribute("height",t.height),t.stroke&&n.setAttribute("stroke",t.stroke),t["stroke-opacity"]&&n.setAttribute("stroke-opacity",t["stroke-opacity"]),t.fill&&n.setAttribute("fill",t.fill),t["fill-opacity"]&&n.setAttribute("fill-opacity",t["fill-opacity"]),this.svg.insertBefore(n,this.svg.firstChild)},t.prototype.text=function(t,n,r){var i=document.createElementNS(e,"text");for(var o in i.setAttribute("stroke","none"),n)n.hasOwnProperty(o)&&i.setAttribute(o,n[o]);for(var a=(""+t).split("\n"),s=0;s<a.length;s++){var l=document.createElementNS(e,"tspan");if(l.setAttribute("x",n.x?n.x:0),0!==s&&l.setAttribute("dy","1.2em"),-1!==a[s].indexOf("")){var c=a[s].split("");if(l.textContent=c[0],c[1]){var u=document.createElementNS(e,"tspan");u.setAttribute("dy","-0.3em"),u.setAttribute("style","font-size:0.7em"),u.textContent=c[1],l.appendChild(u)}if(c[2]){var h=c[1]?"0.4em":"0.1em",d=document.createElementNS(e,"tspan");d.setAttribute("dy",h),d.setAttribute("style","font-size:0.7em"),d.textContent=c[2],l.appendChild(d)}}else l.textContent=a[s];i.appendChild(l)}return r?r.appendChild(i):this.append(i),i},t.prototype.guessWidth=function(e,t){var n,r=this.createDummySvg(),i=this.text(e,t,r);try{n=i.getBBox(),n=isNaN(n.height)||!n.height?{width:t["font-size"]/2,height:t["font-size"]+2}:{width:n.width,height:n.height}}catch(o){n={width:t["font-size"]/2,height:t["font-size"]+2}}return r.removeChild(i),n},t.prototype.createDummySvg=function(){return this.dummySvg||(this.dummySvg=o(),this.dummySvg.setAttribute("style",["display: block !important;","height: 1px;","width: 1px;","position: absolute;"].join("")),document.querySelector("body").appendChild(this.dummySvg)),this.dummySvg};var i={};function o(){var t=document.createElementNS(e,"svg");return t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),t.setAttribute("role","img"),t.setAttribute("fill","currentColor"),t.setAttribute("stroke","currentColor"),t}return t.prototype.getTextSize=function(e,t,n){if("number"==typeof e&&(e=""+e),!e||e.match(/^\s+$/))return{width:0,height:0};var r;if(e.length<20&&(r=e+JSON.stringify(t),i[r]))return i[r];var o,a=!n;n||(n=this.text(e,t));try{o=n.getBBox(),o=isNaN(o.height)||!o.height?this.guessWidth(e,t):{width:o.width,height:o.height}}catch(s){o=this.guessWidth(e,t)}return a&&(this.currentGroup.length>0?this.currentGroup[0].removeChild(n):this.svg.removeChild(n)),r&&(i[r]=o),o},t.prototype.openGroup=function(t){t=t||{};var n=document.createElementNS(e,"g");return t.klass&&n.setAttribute("class",t.klass),t.fill&&n.setAttribute("fill",t.fill),t.stroke&&n.setAttribute("stroke",t.stroke),t["data-name"]&&n.setAttribute("data-name",t["data-name"]),t.prepend?this.prepend(n):this.append(n),this.currentGroup.unshift(n),n},t.prototype.closeGroup=function(){var e=this.currentGroup.shift();return e&&0===e.children.length?(e.parentElement.removeChild(e),null):e},t.prototype.path=function(t){var n=document.createElementNS(e,"path");for(var r in t)t.hasOwnProperty(r)&&("path"===r?n.setAttributeNS(null,"d",t.path):"klass"===r?n.setAttributeNS(null,"class",t[r]):void 0!==t[r]&&n.setAttributeNS(null,r,t[r]));return this.append(n),n},t.prototype.pathToBack=function(t){var n=document.createElementNS(e,"path");for(var r in t)t.hasOwnProperty(r)&&("path"===r?n.setAttributeNS(null,"d",t.path):"klass"===r?n.setAttributeNS(null,"class",t[r]):n.setAttributeNS(null,r,t[r]));return this.prepend(n),n},t.prototype.append=function(e){this.currentGroup.length>0?this.currentGroup[0].appendChild(e):this.svg.appendChild(e)},t.prototype.prepend=function(e){this.currentGroup.length>0?this.currentGroup[0].appendChild(e):this.svg.insertBefore(e,this.svg.firstChild)},t.prototype.setAttributeOnElement=function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttributeNS(null,n,t[n])},t.prototype.moveElementToChild=function(e,t){e.appendChild(t)},Vs=t}(),n=function(n){this.paper=new t(n),this.controller=null,this.space=3*e.SPACE,this.padding={},this.reset()};return n.prototype.reset=function(){this.paper.clear(),this.y=0,this.abctune=null,this.path=null,this.isPrint=!1,this.lineThickness=0,this.initVerticalSpace()},n.prototype.newTune=function(e){this.abctune=e,this.setVerticalSpace(e.formatting),this.isPrint="print"===e.media,this.setPadding(e)},n.prototype.setLineThickness=function(e){this.lineThickness=e},n.prototype.setPaddingOverride=function(e){this.paddingOverride={top:e.paddingtop,bottom:e.paddingbottom,right:e.paddingright,left:e.paddingleft}},n.prototype.setPadding=function(e){function t(t,n,r,i,o){void 0!==e.formatting[r]?t.padding[n]=e.formatting[r]:void 0!==t.paddingOverride[n]?t.padding[n]=t.paddingOverride[n]:t.isPrint?t.padding[n]=i:t.padding[n]=o}t(this,"top","topmargin",38,15),t(this,"bottom","botmargin",38,15),t(this,"left","leftmargin",68,15),t(this,"right","rightmargin",68,15)},n.prototype.adjustNonScaledItems=function(e){this.padding.top/=e,this.padding.bottom/=e,this.padding.left/=e,this.padding.right/=e,this.abctune.formatting.headerfont.size/=e,this.abctune.formatting.footerfont.size/=e},n.prototype.initVerticalSpace=function(){this.spacing={composer:7.56,
// Set the vertical space above the composer.
graceBefore:8.67,
// Define the space before, inside and after the grace notes.
graceInside:10.67,graceAfter:16,info:0,
// Set the vertical space above the infoline.
lineSkipFactor:1.1,
// Set the factor for spacing between lines of text. (multiply this by the font size)
music:7.56,
// Set the vertical space above the first staff.
paragraphSkipFactor:.4,
// Set the factor for spacing between text paragraphs. (multiply this by the font size)
parts:11.33,
// Set the vertical space above a new part.
slurHeight:1,
// Set the slur height factor.
staffSeparation:61.33,
// Do not put a staff system closer than <unit> from the previous system.
stemHeight:36.67,
// Set the stem height.
subtitle:3.78,
// Set the vertical space above the subtitle.
systemStaffSeparation:48,
// Do not place the staves closer than <unit> inside a system. * This values applies to all staves when in the tune header. Otherwise, it applies to the next staff
text:18.9,
// Set the vertical space above the history.
title:7.56,
// Set the vertical space above the title.
top:30.24,
//Set the vertical space above the tunes and on the top of the continuation pages.
vocal:0,
// Set the vertical space above the lyrics under the staves.
words:0}},n.prototype.setVerticalSpace=function(e){void 0!==e.staffsep&&(this.spacing.staffSeparation=4*e.staffsep/3),void 0!==e.composerspace&&(this.spacing.composer=4*e.composerspace/3),void 0!==e.partsspace&&(this.spacing.parts=4*e.partsspace/3),void 0!==e.textspace&&(this.spacing.text=4*e.textspace/3),void 0!==e.musicspace&&(this.spacing.music=4*e.musicspace/3),void 0!==e.titlespace&&(this.spacing.title=4*e.titlespace/3),void 0!==e.sysstaffsep&&(this.spacing.systemStaffSeparation=4*e.sysstaffsep/3),void 0!==e.subtitlespace&&(this.spacing.subtitle=4*e.subtitlespace/3),void 0!==e.topspace&&(this.spacing.top=4*e.topspace/3),void 0!==e.vocalspace&&(this.spacing.vocal=4*e.vocalspace/3),void 0!==e.wordsspace&&(this.spacing.words=4*e.wordsspace/3)},n.prototype.calcY=function(t){return this.y-t*e.STEP},n.prototype.moveY=function(e,t){void 0===t&&(t=1),this.y+=e*t},n.prototype.absolutemoveY=function(e){this.y=e},Ks=n}function Su(){if(il)return rl;return il=1,rl=function(e,t,n){if(t.text){t.marginLeft||(t.marginLeft=0),t.klass||(t.klass=""),t.anchor||(t.anchor="start"),t.info||(t.info={startChar:-2,endChar:-2}),t.marginTop&&e.push({move:t.marginTop});var r={left:t.marginLeft,text:t.text,font:t.font,anchor:t.anchor,startChar:t.info.startChar,endChar:t.info.endChar};t.absElemType&&(r.absElemType=t.absElemType),t.inGroup||(r.klass=t.klass),t.name&&(r.name=t.name),e.push(r);var i=n.calc("A",t.font,t.klass),o=t.text.split("\n").length;if("\n"===t.text[t.text.length-1]&&o--,!t.noMove){var a=1.1*i.height*o;e.push({move:Math.round(a)}),t.marginBottom&&e.push({move:t.marginBottom})}}}}function Tu(){if(ul)return cl;ul=1;var e=Xc();function t(e){"keyboard"===this.dragMechanism&&0!==this.dragYStep&&this.dragTarget&&u.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,e),this.dragYStep=0}function n(e){switch(e.keyCode){case 38:case 40:e.preventDefault()}}function r(t){var n=!1,r=t.target.dataset.index;switch(t.keyCode){case 13:case 32:n=!0,this.dragTarget=this.selectables[r],this.dragIndex=r,this.dragMechanism="keyboard",l.bind(this)(t);break;case 38:n=!0,this.dragTarget=this.selectables[r],this.dragIndex=r,this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep--,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*e.STEP+")"));break;case 40:n=!0,this.dragTarget=this.selectables[r],this.dragIndex=r,this.dragMechanism="keyboard",this.dragTarget&&this.dragTarget.isDraggable&&(this.dragging&&this.dragTarget.isDraggable&&this.dragTarget.absEl.highlight(void 0,this.dragColor),this.dragYStep++,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+this.dragYStep*e.STEP+")"));break;case 9:0!==this.dragYStep&&l.bind(this)(t)}n&&t.preventDefault()}function i(e,t){var n,r,i,o=function(e,t){for(var n=0;n<e.length;n++)if(t.dataset.index===e[n].svgEl.dataset.index)return n;return-1}(e.selectables,function(e){if("svg"===e.tagName)return e;for(var t=e.getAttribute("selectable");!t;)t=!e.parentElement||"svg"===(e=e.parentElement).tagName||e.getAttribute("selectable");return e}(t.target));return o>=0?(i=function(e,t,n){return e.x<=t.offsetX&&e.x+e.width>=t.offsetX&&e.y<=t.offsetY&&e.y+e.height>=t.offsetY||Math.abs(t.layerY/n-t.offsetY)<3?[t.offsetX,t.offsetY]:[t.layerX,t.layerY]}(e.selectables[o].svgEl.getBBox(),t,e.scale),n=i[0],r=i[1]):(i=function(e){var t,n,r=1,i=1,o=e.target.closest("svg"),a=0;return o&&o.viewBox&&o.viewBox.baseVal&&(0!==o.viewBox.baseVal.width&&(r=o.viewBox.baseVal.width/o.clientWidth),0!==o.viewBox.baseVal.height&&(i=o.viewBox.baseVal.height/o.clientHeight),a=o.viewBox.baseVal.y),e.target&&"svg"===e.target.tagName?(t=e.offsetX,n=e.offsetY):(t=e.layerX,n=e.layerY),[t*=r,(n*=i)+a]}(t),o=function(e,t,n){for(var r=9999999,i=-1,o=0;o<e.selectables.length&&r>0;o++){var a=e.selectables[o];if(e.getDim(a),a.dim.left<t&&a.dim.right>t&&a.dim.top<n&&a.dim.bottom>n)i=o,r=0;else if(a.dim.top<n&&a.dim.bottom>n){var s=Math.min(Math.abs(a.dim.left-t),Math.abs(a.dim.right-t));s<r&&(r=s,i=o)}else if(a.dim.left<t&&a.dim.right>t){var l=Math.min(Math.abs(a.dim.top-n),Math.abs(a.dim.bottom-n));l<r&&(r=l,i=o)}else{var c=Math.abs(t-a.dim.left)>Math.abs(t-a.dim.right)?Math.abs(t-a.dim.right):Math.abs(t-a.dim.left),u=Math.abs(n-a.dim.top)>Math.abs(n-a.dim.bottom)?Math.abs(n-a.dim.bottom):Math.abs(n-a.dim.top),h=Math.sqrt(c*c+u*u);h<r&&(r=h,i=o)}}return i>=0&&r<=12?i:-1}(e,n=i[0],r=i[1])),{x:n,y:r,clickedOn:o}}function o(e){if(e&&e.target&&e.touches&&!(e.touches.length<1)){var t=e.target.getBoundingClientRect(),n=e.touches[0].pageX-t.left,r=e.touches[0].pageY-t.top;e.touches[0].offsetX=n,e.touches[0].offsetY=r,e.touches[0].layerX=e.touches[0].pageX,e.touches[0].layerY=e.touches[0].pageY}}function a(e){var t=e;"touchstart"===e.type&&(o(e),e.touches.length>0&&(t=e.touches[0]));var n=i(this,t);n.clickedOn>=0&&("touchstart"===e.type||0===e.button)&&this.selectables[n.clickedOn]&&(this.dragTarget=this.selectables[n.clickedOn],this.dragIndex=n.clickedOn,this.dragMechanism="mouse",this.dragMouseStart={x:n.x,y:n.y},this.dragging&&this.dragTarget.isDraggable&&(!function(e,t){if(e){var n=f(e.svg);n[t]=!0,m(e.svg,n)}}(this.renderer.paper,"abcjs-dragging-in-progress"),this.dragTarget.absEl.highlight(void 0,this.dragColor)))}function s(t){var n=t;if("touchmove"===t.type&&(o(t),t.touches.length>0&&(n=t.touches[0])),this.lastTouchMove=t,this.dragTarget&&this.dragging&&this.dragTarget.isDraggable&&"mouse"===this.dragMechanism&&this.dragMouseStart){var r=i(this,n),a=Math.round((r.y-this.dragMouseStart.y)/e.STEP);a!==this.dragYStep&&(this.dragYStep=a,this.dragTarget.svgEl.setAttribute("transform","translate(0,"+a*e.STEP+")"))}}function l(e){var t=e;"touchend"===e.type&&this.lastTouchMove&&(o(this.lastTouchMove),this.lastTouchMove&&this.lastTouchMove.touches&&this.lastTouchMove.touches.length>0&&(t=this.lastTouchMove.touches[0])),this.dragTarget&&(d.bind(this)(),this.dragTarget.absEl&&this.dragTarget.absEl.highlight&&(this.selected=[this.dragTarget.absEl],this.dragTarget.absEl.highlight(void 0,this.selectionColor)),u.bind(this)(this.dragTarget,this.dragYStep,this.selectables.length,this.dragIndex,t),this.dragTarget.svgEl&&this.dragTarget.svgEl.focus&&(this.dragTarget.svgEl.focus(),this.dragTarget=null,this.dragIndex=-1),function(e,t){if(e){var n=f(e.svg);delete n[t],m(e.svg,n)}}(this.renderer.svg,"abcjs-dragging-in-progress"))}function c(e){e>=0&&e<this.selectables.length&&(this.dragTarget=this.selectables[e],this.dragIndex=e,this.dragMechanism="keyboard",l.bind(this)({target:this.dragTarget.svgEl}))}function u(e,t,n,r,i){var o=[];if(e.absEl.elemset){for(var a={},s=0;s<e.absEl.elemset.length;s++){var l=e.absEl.elemset[s];if(l)for(var u=l.getAttribute("class").split(" "),d=0;d<u.length;d++)a[u[d]]=!0}for(var p=0;p<Object.keys(a).length;p++)o.push(Object.keys(a)[p])}for(var f={},m=0;m<o.length;m++)h(o[m],"abcjs-v",f,"voice"),h(o[m],"abcjs-l",f,"line"),h(o[m],"abcjs-m",f,"measure");e.staffPos&&(f.staffPos=e.staffPos);for(var g=i.target;g&&g.dataset&&!g.dataset.name&&"svg"!==g.tagName.toLowerCase();)g=g.parentNode;for(var v=i.target;v&&v.dataset&&!v.dataset.index&&"svg"!==v.tagName.toLowerCase();)v=v.parentNode;f.name=v.dataset.name,f.clickedName=g.dataset.name,f.parentClasses=v.classList,f.clickedClasses=g.classList,f.selectableElement=e.svgEl;for(var y=0;y<this.listeners.length;y++)this.listeners[y](e.absEl.abcelem,e.absEl.tuneNumber,o.join(" "),f,{step:t,max:n,index:r,setSelection:c.bind(this)},i)}function h(e,t,n,r){if(0===e.indexOf(t)){var i=e.replace(t,""),o=parseInt(i,10);""+o===i&&(n[r]=o)}}function d(){for(var e=0;e<this.selected.length;e++)this.selected[e].unhighlight(void 0,this.renderer.foregroundColor);this.selected=[]}function p(e,t){d.bind(this)();for(var n=0;n<this.staffgroups.length;n++)for(var r=this.staffgroups[n].voices,i=0;i<r.length;i++)for(var o=r[i].children,a=0;a<o.length;a++){var s=o[a].abcelem.startChar,l=o[a].abcelem.endChar;(t>s&&e<l||t===e&&t===l)&&(this.selected[this.selected.length]=o[a],o[a].highlight(void 0,this.selectionColor))}}function f(e){var t=e.getAttribute("class");t||(t="");for(var n=t.split(" "),r={},i=0;i<n.length;i++)r[n[i]]=!0;return r}function m(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r);e.setAttribute("class",n.join(" "))}return cl=function(e,i){if(e.rangeHighlight=p,e.dragging)for(var o=0;o<e.selectables.length;o++){var c=e.selectables[o];"true"===c.svgEl.getAttribute("selectable")&&(c.svgEl.setAttribute("tabindex",0),c.svgEl.setAttribute("data-index",o),c.svgEl.addEventListener("keydown",n.bind(e)),c.svgEl.addEventListener("keyup",r.bind(e)),c.svgEl.addEventListener("focus",t.bind(e)))}for(var u=0;u<i.length;u++)i[u].addEventListener("touchstart",a.bind(e),{passive:!0}),i[u].addEventListener("touchmove",s.bind(e),{passive:!0}),i[u].addEventListener("touchend",l.bind(e),{passive:!0}),i[u].addEventListener("mousedown",a.bind(e)),i[u].addEventListener("mousemove",s.bind(e)),i[u].addEventListener("mouseup",l.bind(e))},cl}function Eu(){if(dl)return hl;return dl=1,hl=function(e,t,n,r,i){return t+(r-t)/(n-e)*(i-e)}}function Iu(){if(fl)return pl;fl=1;var e=cu(),t=Xc(),n=Eu(),r=function(e){return void 0===e?0:Math.floor(Math.log(e)/Math.log(2))};function i(e,t,n,r){if(!e.children)return r;for(var i=0;i<e.children.length;i++){var o=e.children[i];t&&void 0!==o.top&&"flags.ugrace"===o.c?r=Math.max(r,o.top-n):t||void 0===o.bottom||"flags.ugrace"!==o.c||(r=Math.max(r,n-o.bottom+7))}return r}function o(e,t,n){var r=t.heads[e?0:t.heads.length-1],i=n.heads[e?0:n.heads.length-1],o=r.x;e&&(o+=r.w-.6);var a=i.x;return[o,a+=e?i.w:.6]}return pl=function(a){if(0!==a.elems.length&&!a.allrests){var s=function(e,n){var r=e?t.STEP:-t.STEP;n&&(r*=.4);return r}(a.stemsUp,a.isgrace),l=a.elems[0],c=a.elems[a.elems.length-1],u=0,h=a.stemsUp?l.abcelem.maxpitch:l.abcelem.minpitch;u=i(l,a.stemsUp,h,u),u=i(c,a.stemsUp,h,u),u=Math.max(a.stemHeight,u+3);var d=function(e,t,n,r,i,o,a,s,l,c){var u=n-2,h=n-2,d=Math.round(r?Math.max(e+u,l+h):Math.min(e-u,s-h)),p=function(e,t,n,r){if(r)return 0;var i=e-t,o=n/2;i>o&&(i=o);i<-o&&(i=-o);return i}(i,o,t,a),f=d+Math.floor(p/2),m=d+Math.floor(-p/2);c||(r&&d<6||!r&&d>6)&&(f=6,m=6);return[f,m]}(a.average,a.elems.length,u,a.stemsUp,l.abcelem.averagepitch,c.abcelem.averagepitch,a.isflat,a.min,a.max,a.isgrace),p=o(a.stemsUp,l,c);a.addBeam({startX:p[0],endX:p[1],startY:d[0],endY:d[1],dy:s});for(var f=function(e,t,i,a,s){for(var l=[],c=[],u=0;u<e.length;u++){var h=e[u];if(!h.abcelem.rest){var d=h.heads[t?0:h.heads.length-1],p=d.x+(t?d.w:0),f=n(i.startX,i.startY,i.endX,i.endY,p),m=t?-1.5:1.5;a&&(m=2*m/3);var g=h.abcelem.duration;0===g&&(g=.25);for(var v=r(g);v<-3;v++){var y=-4-v;if(c[y]?c[y].single=!1:c[y]={x:p+(t?-.6:0),y:f+m*(y+1),durlog:v,single:!0},u>0&&h.abcelem.beambr&&h.abcelem.beambr<=y+1){c[y].split||(c[y].split=[c[y].x]);var b=o(t,e[u-1],h);c[y].split[c[y].split.length-1]>=b[0]&&(b[0]+=h.w),c[y].split.push(b[0]),c[y].split.push(b[1])}}for(var _=c.length-1;_>=0;_--)if(u===e.length-1||r(e[u+1].abcelem.duration)>-_-4){var w=p,k=f+m*(_+1);c[_].single&&(w=0===u?p+5:p-5,k=n(i.startX,i.startY,i.endX,i.endY,w)+m*(_+1));var x={startX:c[_].x,endX:w,startY:c[_].y,endY:k,dy:s};if(void 0!==c[_].split){var C=c[_].split;x.endX<=C[C.length-1]&&(C[C.length-1]-=h.w),C.push(x.endX),x.split=c[_].split}l.push(x),c=c.slice(0,_)}}}return l}(a.elems,a.stemsUp,a.beams[0],a.isgrace,s),m=0;m<f.length;m++)a.addBeam(f[m]);!function(r,i,o,a,s){for(var l=0;l<r.length;l++){var c=r[l];if(!c.abcelem.rest){var u=!c.addExtra,h=u?s:c,d=c.heads[i?0:c.heads.length-1],p=.2,f=d.pitch+(i?p:-p),m=i?d.w:0;u||(m+=d.dx);var g=d.x+m,v=n(o.startX,o.startY,o.endX,o.endY,g),y=i?-.6:.6;i||(v-=a/2/t.STEP),u&&(m+=c.heads[0].dx),"noteheads.slash.quarter"===d.c&&(i?f+=1:f-=1);var b=new e(null,m,0,f,{type:"stem",pitch2:v,linewidth:y});b.setX(h.x),h.addRight(b)}}}(a.elems,a.stemsUp,a.beams[0],s,a.mainNote)}},pl}function Au(){if(gl)return ml;gl=1;var e=Eu();function t(e){return e.stemsUp}return ml=function(n){if(n.anchor1&&n.anchor2){n.hasBeam=!!n.anchor1.parent.beam&&n.anchor1.parent.beam===n.anchor2.parent.beam;var r=n.anchor1.parent.beam;if(!n.hasBeam||r.elems[0]===n.anchor1.parent&&r.elems[r.elems.length-1]===n.anchor2.parent||(n.hasBeam=!1),n.hasBeam){var i=t(r)?n.anchor1.x+n.anchor1.w:n.anchor1.x;n.yTextPos=function(t,n,r){if(0===r.beams.length)return 0;r=r.beams[0];var i=t+(n-t)/2;return e(r.startX,r.startY,r.endX,r.endY,i)}(i,n.anchor2.x,r),n.yTextPos+=t(r)?3:-2,n.xTextPos=(s=i,l=n.anchor2.x,s+(l-s)/2),n.top=n.yTextPos+1,n.bottom=n.yTextPos-2,t(r)&&(n.endingHeightAbove=4)}else{n.startNote=Math.max(n.anchor1.parent.top,9)+4,n.endNote=Math.max(n.anchor2.parent.top,9)+4,"rest"===n.anchor1.parent.type&&"rest"!==n.anchor2.parent.type?n.startNote=n.endNote:"rest"===n.anchor2.parent.type&&"rest"!==n.anchor1.parent.type&&(n.endNote=n.startNote);for(var o=0,a=0;a<n.middleElems.length;a++)o=Math.max(o,n.middleElems[a].top);((o+=4)>n.startNote||o>n.endNote)&&(n.startNote=o,n.endNote=o),n.flatBeams&&(n.startNote=Math.max(n.startNote,n.endNote),n.endNote=Math.max(n.startNote,n.endNote)),n.yTextPos=n.startNote+(n.endNote-n.startNote)/2,n.xTextPos=n.anchor1.x+(n.anchor2.x+n.anchor2.w-n.anchor1.x)/2,n.top=n.yTextPos+1}}var s,l;delete n.middleElems,delete n.flatBeams},ml}function Du(){if(yl)return vl;yl=1;var e=Iu(),t=Eu(),n=Au();function r(e){for(var t=0;t<e.elems.length;t++){var n=e.elems[t];if(n.top)for(var r=a(n,e),i=0;i<n.children.length;i++){var o=n.children[i];if("ornament"===o.klass&&o.bottom-1.5<r){var s=r-o.bottom+1.5;o.bottom+=s,o.top+=s,o.pitch+=s,r=n.top=o.top}}}}function i(e,t){var n=t.getChordDim();if(n){for(var r=0;r<e.length;r++){if(e[r]<n.left)return r>0&&t.putChordInLane(r),void(e[r]=n.right)}e.push(n.right),t.putChordInLane(e.length-1)}}function o(e){for(var t=0,n=0;n<e.children.length;n++){e.children[n].chordHeightBelow&&t++}return t}function a(e,n){return n=n.beams[0],t(n.startX,n.startY,n.endX,n.endY,e.x)}return vl=function(t){for(var a=0;a<t.beams.length;a++)if("BeamElem"===t.beams[a].type){e(t.beams[a]),r(t.beams[a]);for(var s=0;s<t.beams[a].elems.length;s++)t.adjustRange(t.beams[a].elems[s])}for(t.staff.specialY.chordLines=function(e){var t,n,r,a=[0],s=[0];for(t=0;t<e.length;t++){for(n=0;n<e[t].children.length;n++)(r=e[t].children[n]).chordHeightAbove&&i(a,r);for(n=e[t].children.length-1;n>=0;n--)(r=e[t].children[n]).chordHeightBelow&&i(s,r)}(a.length>1||s.length>1)&&function(e,t){for(var n=0;n<e.length;n++){o(e[n]);for(var r=0;r<e[n].children.length;r++){var i=e[n].children[r];i.chordHeightAbove&&i.invertLane(t)}}}(e,a.length,s.length);return{above:a.length,below:s.length}}(t.children),a=0;a<t.otherchildren.length;a++){var l=t.otherchildren[a];"TripletElem"===l.type&&(n(l),t.adjustRange(l))}t.staff.top=Math.max(t.staff.top,t.top),t.staff.bottom=Math.min(t.staff.bottom,t.bottom)},vl}function Bu(){if(Cl)return xl;Cl=1;var e=function(){if(kl)return wl;kl=1;var e=function(){};return e.beginLayout=function(e,t){t.i=0,t.durationindex=0,t.startx=e,t.minx=e,t.nextx=e,t.spacingduration=0},e.layoutEnded=function(e){return e.i>=e.children.length},e.getNextX=function(e){return Math.max(e.minx,e.nextx)},e.getSpacingUnits=function(e){return Math.sqrt(8*e.spacingduration)},e.layoutOneItem=function(e,t,n,r,i){var o=n.children[n.i];if(!o)return 0;var a=e-n.minx,s=n.durationindex+o.duration>0?r:0;if("note"===o.abcelem.el_type&&!o.abcelem.rest&&0!==n.voicenumber&&i){var l=i.children[i.i],c=l&&(o.abcelem.maxpitch<=l.abcelem.maxpitch+1&&o.abcelem.maxpitch>=l.abcelem.minpitch-1||o.abcelem.minpitch<=l.abcelem.maxpitch+1&&o.abcelem.minpitch>=l.abcelem.minpitch-1);if(c&&o.abcelem.minpitch===l.abcelem.minpitch&&o.abcelem.maxpitch===l.abcelem.maxpitch&&l.heads&&l.heads.length>0&&o.heads&&o.heads.length>0&&l.heads[0].c===o.heads[0].c&&(c=!1),c){var u=l.heads&&l.heads.length>0?l.heads[0].realWidth:l.fixed.w;o.adjustedWidth||(o.adjustedWidth=u+o.w),o.w=o.adjustedWidth;for(var h=0;h<o.children.length;h++){var d=o.children[h];d.name.indexOf("accidental")<0&&(d.adjustedWidth||(d.adjustedWidth=d.dx+u),d.dx=d.adjustedWidth)}}}var p=function(e,t){var n=0;return"note"!==e.type&&"bar"!==e.type||(n=t),-e.extraw+n}(o,s);return a<p&&(0===n.i||"bar"!==o.type||"part"!==n.children[n.i-1].type&&"tempo"!==n.children[n.i-1].type)&&(e+=p-a),o.setX(e),n.spacingduration=o.duration,n.minx=e+function(e){return e.w}(o),n.i!==n.children.length-1&&(n.minx+=o.minspacing),this.updateNextX(e,t,n),e},e.shiftRight=function(e,t){var n=t.children[t.i];n&&(n.setX(n.x+e),t.minx+=e,t.nextx+=e)},e.updateNextX=function(e,t,n){n.nextx=e+t*Math.sqrt(8*n.spacingduration)},e.updateIndices=function(e){this.layoutEnded(e)||(e.durationindex+=e.children[e.i].duration,"bar"===e.children[e.i].type&&(e.durationindex=Math.round(64*e.durationindex)/64),e.i++)},wl=e}();function t(t){for(var n=0;n<t.length;n++)if(!e.layoutEnded(t[n]))return!1;return!0}function n(e){return e.durationindex-(e.children[e.i]&&e.children[e.i].duration>0?0:5e-7)}function r(e,t){return!!(e&&e.staff&&e.staff.voices&&0!==e.staff.voices.length)&&(!!(t&&t.staff&&t.staff.voices&&0!==t.staff.voices.length)&&e.staff.voices[0]===t.staff.voices[0])}return xl=function(i,o,a,s,l){var c,u=0,h=1e3,d=l;s.startx=d;var p=0;for(c=0;c<s.voices.length;c++)e.beginLayout(d,s.voices[c]);for(var f=0;!t(s.voices);){for(p=null,c=0;c<s.voices.length;c++)e.layoutEnded(s.voices[c])||p&&!(n(s.voices[c])<p)||(p=n(s.voices[c]));var m=[],g=[];for(c=0;c<s.voices.length;c++){n(s.voices[c])-p>1e-7?g.push(s.voices[c]):m.push(s.voices[c])}f=0;var v=0;for(c=0;c<m.length;c++)e.getNextX(m[c])>d&&(d=e.getNextX(m[c]),f=e.getSpacingUnits(m[c]),v=m[c].spacingduration);u+=f,h=Math.min(h,f);var y=void 0;for(c=0;c<m.length;c++){var b=m[c];0===b.voicenumber&&(y=c);var _=void 0!==y&&m[y].voicenumber!==b.voicenumber?m[y]:void 0;r(b,_)||(_=void 0);var w=e.layoutOneItem(d,i,b,o.minPadding,_),k=w-d;if(k>0){d=w;for(var x=0;x<c;x++)e.shiftRight(k,m[x])}}for(c=0;c<g.length;c++)g[c].spacingduration-=v,e.updateNextX(d,i,g[c]);for(c=0;c<m.length;c++){var C=m[c];e.updateIndices(C)}}for(c=0;c<s.voices.length;c++)e.getNextX(s.voices[c])>d&&(d=e.getNextX(s.voices[c]),f=e.getSpacingUnits(s.voices[c]));return function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(r.children.length>0){var i=r.children.length-1,o=r.children[i];if("bar"===o.abcelem.el_type){var a=o.children[0].x;a>t?t=a:o.children[0].x=t}}}}(s.voices),u+=f,s.setWidth(d),{spacingUnits:u,minSpace:h}},xl}function Lu(){if(Il)return El;Il=1;var e=Du(),t=function(){if(_l)return bl;_l=1;var e=Xc(),t=1;function n(e,n,r,i){if(e.specialY[r]){var o=e.specialY[r];i&&(o*=i),e.top+=o+t,n[r]=e.top}}function r(e,t,n){var r,l;for(r=0;r<t.children.length;r++)i(e,l=t.children[r],n);for(r=0;r<t.otherchildren.length;r++)switch((l=t.otherchildren[r]).type){case"CrescendoElem":o(e,l);break;case"DynamicDecoration":a(e,l);break;case"EndingElem":s(e,l)}}function i(e,t,n){for(var r=0;r<t.children.length;r++){var i=t.children[r];for(var o in t.specialY)t.specialY.hasOwnProperty(o)&&i[o]&&(i.pitch=e[o],void 0===i.top&&("TempoElement"===i.type?l(e,i):c(e,i,n),t.pushTop(i.top),t.pushBottom(i.bottom)))}}function o(e,t){t.dynamicHeightAbove?t.pitch=e.dynamicHeightAbove:t.pitch=e.dynamicHeightBelow}function a(e,t){t.volumeHeightAbove?t.pitch=e.volumeHeightAbove:t.pitch=e.volumeHeightBelow}function s(e,t){t.pitch=e.endingHeightAbove-2}function l(e,t){if(t.pitch=e.tempoHeightAbove,t.top=e.tempoHeightAbove,t.bottom=e.tempoHeightAbove,t.note){var n=t.pitch-t.totalHeightInPitches+1;t.note.top=n,t.note.bottom=n;for(var r=0;r<t.note.children.length;r++){var i=t.note.children[r];i.top+=n,i.bottom+=n,i.pitch+=n,void 0!==i.pitch2&&(i.pitch2+=n)}}}function c(t,n,r){switch(n.type){case"part":n.top=t.partHeightAbove+n.height,n.bottom=t.partHeightAbove;break;case"text":case"chord":n.chordHeightAbove?(n.top=t.chordHeightAbove,n.bottom=t.chordHeightAbove):(n.top=t.chordHeightBelow,n.bottom=t.chordHeightBelow);break;case"lyric":n.lyricHeightAbove?(n.top=t.lyricHeightAbove,n.bottom=t.lyricHeightAbove):(n.top=t.lyricHeightBelow+r.vocal/e.STEP,n.bottom=t.lyricHeightBelow+r.vocal/e.STEP,n.pitch-=r.vocal/e.STEP);break;case"debug":n.top=t.chordHeightAbove,n.bottom=t.chordHeightAbove}void 0===n.pitch||n.top}return bl=function(i,o){for(var a,s=0;s<o.staffs.length;s++){var l=o.staffs[s],c={tempoHeightAbove:0,partHeightAbove:0,volumeHeightAbove:0,dynamicHeightAbove:0,endingHeightAbove:0,chordHeightAbove:0,lyricHeightAbove:0,lyricHeightBelow:0,chordHeightBelow:0,volumeHeightBelow:0,dynamicHeightBelow:0};if(i.showDebug&&i.showDebug.indexOf("box")>=0&&(l.originalTop=l.top,l.originalBottom=l.bottom),n(l,c,"lyricHeightAbove"),n(l,c,"chordHeightAbove",l.specialY.chordLines.above),l.specialY.endingHeightAbove&&(l.specialY.chordHeightAbove?l.top+=2:l.top+=l.specialY.endingHeightAbove+t,c.endingHeightAbove=l.top),l.specialY.dynamicHeightAbove&&l.specialY.volumeHeightAbove?(l.top+=Math.max(l.specialY.dynamicHeightAbove,l.specialY.volumeHeightAbove)+t,c.dynamicHeightAbove=l.top,c.volumeHeightAbove=l.top):(n(l,c,"dynamicHeightAbove"),n(l,c,"volumeHeightAbove")),n(l,c,"partHeightAbove"),n(l,c,"tempoHeightAbove"),l.specialY.lyricHeightBelow&&(l.specialY.lyricHeightBelow+=i.spacing.vocal/e.STEP,c.lyricHeightBelow=l.bottom,l.bottom-=l.specialY.lyricHeightBelow+t),l.specialY.chordHeightBelow){c.chordHeightBelow=l.bottom;var u=l.specialY.chordHeightBelow;l.specialY.chordLines.below&&(u*=l.specialY.chordLines.below),l.bottom-=u+t}l.specialY.volumeHeightBelow&&l.specialY.dynamicHeightBelow?(c.volumeHeightBelow=l.bottom,c.dynamicHeightBelow=l.bottom,l.bottom-=Math.max(l.specialY.volumeHeightBelow,l.specialY.dynamicHeightBelow)+t):l.specialY.volumeHeightBelow?(c.volumeHeightBelow=l.bottom,l.bottom-=l.specialY.volumeHeightBelow+t):l.specialY.dynamicHeightBelow&&(c.dynamicHeightBelow=l.bottom,l.bottom-=l.specialY.dynamicHeightBelow+t),i.showDebug&&i.showDebug.indexOf("box")>=0&&(l.positionY=c);for(var h=0;h<l.voices.length;h++)r(c,o.voices[l.voices[h]],i.spacing);if(void 0!==a){var d=a+(l.top-10),p=i.spacing.systemStaffSeparation/e.STEP-d;p>0&&(l.top+=p)}a=2-l.bottom}},bl}(),n=Bu(),r=function(){if(Tl)return Sl;function e(e,t,n){if(t)for(var r=0;r<t.length;r++)if(t[r].header){var i=n.calc(t[r].header,"voicefont","");e=Math.max(e,i.width)}return e}function t(e,t,r){if(e)for(var i=0;i<e.length;i++)n(t,e[i]),r=Math.max(r,e[i].getWidth());return r}function n(e,t){t.x=e}return Tl=1,Sl=function(n,r,i,o,a){var s,l,c=n.padding.left,u=0;for(s=0;s<i.length;s++)i[s].header&&(l=r.calc(i[s].header,"voicefont",""),u=Math.max(u,l.width));u=e(u,o,r),(u=e(u,a,r))&&(u+=r.calc("A","voicefont","").width);var h=0;return h=t(o,c+=u,h),c+t(a,c,h)},Sl}(),i=function(e,t,i,a,s,l,c){for(var u=r(e,a.getTextSize,a.voices,a.brace,a.bracket),h=i,d=0;d<8;d++){var p=n(h,e,c,a,u);if(null===(h=o(l,s.stretchlast,t+e.padding.left,a.w,h,p.spacingUnits,p.minSpace,e.padding.left+e.padding.right)))break}!function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=1;r<n.children.length-1;r++){var i=n.children[r];if(i.abcelem.rest&&("whole"===i.abcelem.rest.type||"multimeasure"===i.abcelem.rest.type)){var o=n.children[r-1],a=n.children[r+1];i.center(o,a)}}}(a.voices)};function o(e,t,n,r,i,o,a,s){if(e)if(void 0===t){if(r/n<.66)return null}else if(!(1-(r+s)/n<t))return null;return Math.abs(n-r)<2?null:o>0?((i=(n-(r-o*i))/o)*a>50&&(i=50/a),i):null}return El=function(n,r,o,a){var s,l,c=o;for(s=0;s<r.lines.length;s++)(l=r.lines[s]).staff&&(i(n,o,a,l.staffGroup,r.formatting,s===r.lines.length-1,!1),l.staffGroup.w>c&&(c=l.staffGroup.w));for(s=0;s<r.lines.length;s++)if((l=r.lines[s]).staffGroup&&l.staffGroup.voices){for(var u=0;u<l.staffGroup.voices.length;u++)e(l.staffGroup.voices[u]);t(n,l.staffGroup)}for(s=0;s<r.lines.length;s++)(l=r.lines[s]).staffGroup&&l.staffGroup.setHeight();return c},El}function Mu(){if(Pl)return Ol;Pl=1;return Ol=function(){for(var e,t,n,r,i,o=0,a=arguments[o++],s=[];a;){if(t=/^[^\x25]+/.exec(a))s.push(t[0]);else if(t=/^\x25{2}/.exec(a))s.push("%");else{if(!(t=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a)))throw"Huh ?!";if(null==(e=arguments[t[1]||o++])||null==e)throw"Too few arguments.";if(/[^s]/.test(t[7])&&"number"!=typeof e)throw"Expecting number but found "+typeof e;switch(t[7]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e);break;case"e":e=t[6]?e.toExponential(t[6]):e.toExponential();break;case"f":e=t[6]?parseFloat(e).toFixed(t[6]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&t[6]?e.substring(0,t[6]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(t[7])&&t[2]&&e>0?"+"+e:e,r=t[3]?"0"==t[3]?"0":t[3][1]:" ",i=t[5]-String(e).length,n=t[5]?str_repeat(r,i):"",s.push(t[4]?e+n:n+e)}a=a.substring(t[0].length)}return s.join("")},Ol}function Fu(){if(jl)return Nl;return jl=1,Nl=function(e){return parseFloat(e.toFixed(2))}}function Ou(){if(Rl)return zl;Rl=1;var e=Fu();return zl=function(t,n,r){var i,o=n.y;if(n.lane){var a=.25*n.dim.font.size;o+=(n.dim.font.size+a)*n.lane}n.dim?(i=n.dim).attr.class=n.klass:i=t.controller.getFontAndAttr.calc(n.type,n.klass),n.anchor&&(i.attr["text-anchor"]=n.anchor),i.attr.x=n.x,i.attr.y=o,n.centerVertically||(i.attr.y+=i.font.size),"debugfont"===n.type&&(i.attr.stroke="#ff0000"),n.cursor&&(i.attr.cursor=n.cursor);var s=n.text.replace(/\n\n/g,"\n \n");s=s.replace(/^\n/,"\n"),i.font.box&&(r||t.paper.openGroup({klass:i.attr.class,fill:t.foregroundColor,"data-name":n.name}),"end"===i.attr["text-anchor"]?i.attr.x-=i.font.padding:"start"===i.attr["text-anchor"]&&(i.attr.x+=i.font.padding),i.attr.y+=i.font.padding,delete i.attr.class),n.noClass&&delete i.attr.class,i.attr.x=e(i.attr.x),i.attr.y=e(i.attr.y),n.name&&(i.attr["data-name"]=n.name);var l=t.paper.text(s,i.attr);if(i.font.box){var c=l.getBBox(),u=0;"middle"===i.attr["text-anchor"]?u=c.width/2+i.font.padding:"end"===i.attr["text-anchor"]&&(u=c.width+2*i.font.padding);var h=0;n.centerVertically&&(h=c.height-i.font.padding),t.paper.rect({"data-name":"box",x:Math.round(n.x-u),y:Math.round(o-h),width:Math.round(c.width+2*i.font.padding),height:Math.round(c.height+2*i.font.padding)}),r||(l=t.paper.closeGroup())}return l}}function Pu(){if($l)return ql;$l=1;var e=Mu(),t=Xc(),n=Ou();function r(t,n,r,i){return e("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",t+r[0],n+i[0],t+r[1],n+i[1],t+r[2],n+i[2],t+r[3],n+i[3],t+r[4],n+i[4],t+r[5],n+i[5],t+r[6],n+i[6])}var i=function(i,o,a,s,l,c,u){var h;if(c){i.paper.openGroup({klass:i.controller.classes.generate("staff-extra voice-name"),"data-name":l});var d=a+(s-a)/2;d-=i.controller.getTextSize.baselineToCenter(c,"voicefont","staff-extra voice-name",0,1),n(i,{x:i.padding.left,y:d,text:c,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0})}return"brace"===l?h=function(e,t,n,i,o){var a=i-n,s=r(t,n,[7.5,-8,21,0,18.5,-10.5,7.5],[0,a/5.5,a/3.14,a/2,a/2.93,a/4.88,0]);return s+=r(t,n,[0,17.5,-7.5,6.6,-5,20,0],[a/2,a/1.46,a/1.22,a,a/1.19,a/1.42,a/2]),e.paper.path({path:s,stroke:e.foregroundColor,fill:e.foregroundColor,class:e.controller.classes.generate(o),"data-name":o})}(i,o,a,s,l):"bracket"===l&&(h=function(n,r,i,o,a){r+=t.STEP;var s=.75*t.STEP,l=.75*t.STEP,c=o-i,u=e("M %f %f l %f %f l %f %f l %f %f z",r,i-l,
// top left line
0,c+2*l,
// bottom left line
s,0,
// bottom right line
0,-(c+2*l)),h=2*t.STEP,d=t.STEP;return u+=e("M %f %f q %f %f %f %f q %f %f %f %f z",r+s,i-l,
// top left arm
.6*h,.2*d,h,-d,
// right point
.1*-h,.3*d,-h,d+t.STEP),u+=e("M %f %f q %f %f %f %f q %f %f %f %f z",r+s,i+l+c,
// bottom left arm
.6*h,.2*-d,h,d,
// right point
.1*-h,.3*-d,-h,-d-t.STEP),n.paper.path({path:u,stroke:n.foregroundColor,fill:n.foregroundColor,class:n.controller.classes.generate(a),"data-name":a})}(i,o,a,s,l)),c&&(h=i.paper.closeGroup()),u.wrapSvgEl({el_type:l,startChar:-1,endChar:-1},h),h};return ql=function(e,n,r){var o=n.startVoice.staff.absoluteY-10*t.STEP;return n.endVoice&&n.endVoice.staff?n.endY=n.endVoice.staff.absoluteY-2*t.STEP:n.lastContinuedVoice&&n.lastContinuedVoice.staff?n.endY=n.lastContinuedVoice.staff.absoluteY-2*t.STEP:n.endY=n.startVoice.staff.absoluteY-2*t.STEP,i(e,n.x,o,n.endY,n.type,n.header,r)}}function Nu(){if(Hl)return Ul;return Hl=1,Ul=function(e,t,n){return e.paper.path(t)}}function ju(){if(Gl)return Wl;Gl=1;var e=Mu(),t=Nu(),n=Fu();function r(e,t,r){return n(e+r*t)}var i=[[3.5,-4.8]],o=[[1.5,-1],[.3,-.3],[-3.5,3.8]],a=[[-1.5,2]],s=[[3,4],[3,-4]],l=[[-3,4],[-3,-4]];function c(e,t){for(var n="",i=0;i<e.length;i++)n+="l"+e[i][0]+" "+r(e[i][1],t,e[i][0]);return n}var u=function(n,r,u,h,d){var p,f=e("M %f %f",r,u);for(f+=c(i,d),p=0;p<h;p++)f+=c(s,d);for(f+=c(o,d),p=0;p<h;p++)f+=c(l,d);return f+=c(a,d)+"z",t(n,{path:f,highlight:"stroke",stroke:n.foregroundColor,class:n.controller.classes.generate("decoration"),"data-name":"glissando"})};return Wl=function(e,t,n){t.anchor1&&t.anchor2&&t.anchor1.heads&&t.anchor2.heads&&0!==t.anchor1.heads.length&&0!==t.anchor2.heads.length||window.console.error("Glissando Element not set.");var i=e.calcY(t.anchor1.heads[0].pitch),o=e.calcY(t.anchor2.heads[0].pitch),a=t.anchor1.x+t.anchor1.w/2,s=t.anchor2.x+t.anchor2.w/2,l=function(e,t,n,r){var i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}(a,i,s,o),c=t.anchor1.w/2+4,h=t.anchor2.w/2+4,d=function(e,t,n,r){return(r-t)/(n-e)}(a,i,s,o),p=r(i,d,c);r(o,d,-h);var f,m,g=(f=l-c-h,m=5,Math.max(2,Math.floor((f-2*m)/6))),v=u(e,a+c,p,g,d);return n.wrapSvgEl({el_type:"glissando",startChar:-1,endChar:-1},v),[v]}}function zu(){if(Xl)return Kl;Xl=1;var e=Fu();function t(){this.ingroup=!1}t.prototype.beginGroup=function(e,t){this.paper=e,this.controller=t,this.path=[],this.lastM=[0,0],this.ingroup=!0,this.paper.openGroup()},t.prototype.isInGroup=function(){return this.ingroup},t.prototype.addPath=function(t){if(0!==(t=t||[]).length){t[0][0]="m",t[0][1]=e(t[0][1]-this.lastM[0]),t[0][2]=e(t[0][2]-this.lastM[1]),this.lastM[0]+=t[0][1],this.lastM[1]+=t[0][2],this.path.push(t[0]);for(var n=1,r=t.length;n<r;n++)"m"===t[n][0]&&(this.lastM[0]+=t[n][1],this.lastM[1]+=t[n][2]),this.path.push(t[n])}},t.prototype.endGroup=function(e,t){this.ingroup=!1;for(var n=0;n<this.path.length;n++)this.path[n].join(" ");this.path=[];var r=this.paper.closeGroup();return r&&(r.setAttribute("class",this.controller.classes.generate(e)),r.setAttribute("fill",this.controller.renderer.foregroundColor),r.setAttribute("stroke","none"),r.setAttribute("data-name",t)),r};var n=new t;return Kl=n}function Ru(){if(Jl)return Zl;Jl=1;var e=Ou(),t=yu(),n=zu();function r(e,t,n){var r=n;return"f"===e&&"f"===t&&(r=2*r/3),"p"===e&&"p"===t&&(r=5*r/6),"f"===e&&"z"===t&&(r=5*r/8),r}return Zl=function(i,o,a,s,l){var c,u;if(!s)return null;if(s.length>1&&s.indexOf(".")<0){var h=n.isInGroup()?"":l.klass;i.paper.openGroup({"data-name":l.name,klass:h});for(var d=0,p=0;p<s.length;p++){var f=s[p];u=t.getYCorr(f),(c=t.printSymbol(o+d,i.calcY(a+u),f,i.paper,{stroke:l.stroke,fill:l.fill}))?p<s.length-1&&(d+=r(f,s[p+1],t.getSymbolWidth(f))):e(i,{x:o,y:i.y,text:"no symbol:"+s,type:"debugfont",klass:"debug-msg",anchor:"start"},!1)}return i.paper.closeGroup()}return u=t.getYCorr(s),(c=n.isInGroup()?t.printSymbol(o,i.calcY(a+u),s,i.paper,{"data-name":l.name}):t.printSymbol(o,i.calcY(a+u),s,i.paper,{klass:l.klass,stroke:l.stroke,fill:l.fill,"data-name":l.name}))?c:(e(i,{x:o,y:i.y,text:"no symbol:"+s,type:"debugfont",klass:"debug-msg",anchor:"start"},!1),null)},Zl}function qu(){if(nc)return tc;nc=1;var e=Mu(),t=Ou(),n=Nu(),r=Fu();function i(t,n,i,o){return e("M %f %f L %f %f",r(t),r(n),r(i),r(o))}return tc=function(e,r,o){e.paper.openGroup({klass:e.controller.classes.generate("triplet "+r.durationClass),"data-name":"triplet"}),r.hasBeam||function(e,t,r,o,a){r=e.calcY(r),a=e.calcY(a);var s=5,l="";l+=i(t,r,t,r+s),l+=i(o,a,o,a+s);var c=t+(o-t)/2,u=8,h=(a-r)/(o-t),d=c-u;l+=i(t,r,d,r+(d-t)*h);var p=c+u;l+=i(p,r+(p-t)*h,o,a),n(e,{path:l,stroke:e.foregroundColor,"data-name":"triplet-bracket"})}(e,r.anchor1.x,r.startNote,r.anchor2.x+r.anchor2.w,r.endNote),t(e,{x:r.xTextPos,y:e.calcY(r.yTextPos-1),text:""+r.number,type:"tripletfont",anchor:"middle",centerVertically:!0,noClass:!0,name:""+r.number},!0);var a=e.paper.closeGroup();return o.wrapSvgEl({el_type:"triplet",startChar:-1,endChar:-1},a),a}}function $u(){if(uc)return cc;uc=1;var e=zu(),t=Fu();return cc=function(n,r,i,o,a,s,l){if(i<0||o<a){var c=t(a);a=t(o),o=c}else o=t(o),a=t(a);r=t(r);for(var u=t(r+i),h=[["M",r,o],["L",r,a],["L",u,a],["L",u,o],["z"]],d={path:""},p=0;p<h.length;p++)d.path+=h[p].join(" ");return s&&(d.class=s),l&&(d["data-name"]=l),e.isInGroup()||(d.stroke="none",d.fill=n.foregroundColor),n.paper.pathToBack(d)},cc}function Uu(){if(fc)return pc;fc=1;var e=function(){if(dc)return hc;dc=1;var e=Mu(),t=Fu();return hc=function(n,r,i,o,a,s,l){var c=n.foregroundColor;r=t(r),i=t(i);var u=t(o-l),h=t(o+l),d={path:e("M %f %f L %f %f L %f %f L %f %f z",r,u,i,u,i,h,r,h),stroke:"none",fill:c};return s&&(d["data-name"]=s),a&&(d.class=a),n.paper.pathToBack(d)}}();return pc=function(t,n,r,i,o,a,s){var l=t.calcY(i);return e(t,n,r,l,o,a,s)}}function Hu(){if(gc)return mc;gc=1;var e=Ou(),t=$u(),n=Uu(),r=Ru();return mc=function(i,o,a){void 0===o.pitch&&window.console.error(o.type+" Relative Element y-coordinate not set.");var s=i.calcY(o.pitch);switch(o.type){case"symbol":if(null===o.c)return null;var l="symbol";o.klass&&(l+=" "+o.klass),o.graphelem=r(i,o.x,o.pitch,o.c,{scalex:o.scalex,scaley:o.scaley,klass:i.controller.classes.generate(l),
//				fill:"none",
//				stroke: renderer.foregroundColor,
name:o.name});break;case"debug":o.graphelem=e(i,{x:o.x,y:i.calcY(15),text:""+o.c,type:"debugfont",klass:i.controller.classes.generate("debug-msg"),anchor:"start",centerVertically:!1,dim:o.dim},!1);break;case"tabNumber":var c="tabnumberfont",u="tab-number";o.isGrace&&(c="tabgracefont",s+=2.5,u="tab-grace"),o.graphelem=e(i,{x:o.x,y:s,text:""+o.c,type:c,klass:i.controller.classes.generate(u),anchor:"middle",centerVertically:!1,dim:o.dim,cursor:"default"},!1);break;case"barNumber":o.graphelem=e(i,{x:o.x,y:s,text:""+o.c,type:"measurefont",klass:i.controller.classes.generate("bar-number"),anchor:"middle",dim:o.dim,name:"bar-number"},!0);break;case"lyric":o.graphelem=e(i,{x:o.x,y:s,text:o.c,type:"vocalfont",klass:i.controller.classes.generate("lyric"),anchor:"middle",dim:o.dim,name:"lyric"},!1);break;case"chord":o.graphelem=e(i,{x:o.x,y:s,text:o.c,type:"gchordfont",klass:i.controller.classes.generate("chord"),anchor:"middle",dim:o.dim,lane:o.getLane(),name:"chord"},!1);break;case"decoration":o.graphelem=e(i,{x:o.x,y:s+6,text:o.c,type:"annotationfont",klass:i.controller.classes.generate("annotation"),anchor:o.anchor,centerVertically:!0,dim:o.dim},!1);break;case"text":o.graphelem=e(i,{x:o.x,y:s,text:o.c,type:"annotationfont",klass:i.controller.classes.generate("annotation"),anchor:"start",centerVertically:o.centerVertically,dim:o.dim,lane:o.getLane(),name:"annotation"},!1);break;case"multimeasure-text":o.graphelem=e(i,{x:o.x+o.w/2,y:s,text:o.c,type:"tempofont",klass:i.controller.classes.generate("rest"),anchor:"middle",centerVertically:!1,dim:o.dim},!1);break;case"part":o.graphelem=e(i,{x:o.x,y:s,text:o.c,type:"partsfont",klass:i.controller.classes.generate("part"),anchor:"start",dim:o.dim,name:o.c},!0);break;case"bar":o.graphelem=t(i,o.x,o.linewidth+i.lineThickness,s,a||i.calcY(o.pitch2),null,"bar");break;
// bartop can't be 0
case"stem":var h=o.linewidth>0?o.linewidth+i.lineThickness:o.linewidth-i.lineThickness;o.graphelem=t(i,o.x,h,s,i.calcY(o.pitch2),"abcjs-stem","stem");break;case"ledger":o.graphelem=n(i,o.x,o.x+o.w,o.pitch,"abcjs-ledger","ledger",.35+i.lineThickness)}return 1!==o.scalex&&o.graphelem&&function(e,t,n,r,i,o){e.setAttributeOnElement(t,{style:"transform:scale("+n+","+r+");transform-origin:"+i+"px "+o+"px;"})}(i.paper,o.graphelem,o.scalex,o.scaley,o.x,s),o.graphelem}}function Wu(){if(_c)return bc;_c=1;var e=function(){if(yc)return vc;yc=1;var e=Hu(),t=Ou();return vc=function(n,r){var i=r.x;void 0===r.pitch&&window.console.error("Tempo Element y-coordinate not set."),r.tempo.el_type="tempo";var o,a=n.calcY(r.pitch)+2;if(r.tempo.preString){o=t(n,{x:i,y:a,text:r.tempo.preString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,"dominant-baseline":"ideographic",name:"pre"},!0);var s=n.controller.getTextSize.calc(r.tempo.preString,"tempofont","tempo",o).width;i+=s+s/r.tempo.preString.length}if(r.note){r.note.setX(i);for(var l=0;l<r.note.children.length;l++)e(n,r.note.children[l],i);i+=r.note.w+5;var c="= "+r.tempo.bpm;o=t(n,{x:i,y:a,text:c,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"beats"});var u=n.controller.getTextSize.calc(c,"tempofont","tempo",o).width;i+=u+u/c.length}r.tempo.postString&&t(n,{x:i,y:a,text:r.tempo.postString,type:"tempofont",klass:"abcjs-tempo",anchor:"start",noClass:!0,name:"post"},!0)},vc}(),t=Hu(),n=Xc(),r=ou(),i=zu();return bc=function(o,a,s,l,c){if(!a.invisible){var u=a.children.length>0&&"TempoElement"===a.children[0].type;a.elemset=[],i.beginGroup(o.paper,o.controller);for(var h=0;h<a.children.length;h++){var d=a.children[h];if("TempoElement"===d.type)e(o,d);else t(o,d,s)}var p=a.type;if(("note"===a.type||"rest"===a.type)&&(a.counters=o.controller.classes.getCurrent(),p=(p+=" d"+Math.round(1e3*a.durationClass)/1e3).replace(/\./g,"-"),a.abcelem.pitches))for(var f=0;f<a.abcelem.pitches.length;f++)p+=" p"+a.abcelem.pitches[f].pitch;var m=i.endGroup(p,a.type);if(m){if(a.cloned&&(a.cloned.overrideClasses=m.className.baseVal),a.overrideClasses){var g=m.classList&&m.classList.length>0?m.classList[0]+" ":"";m.setAttribute("class",g+a.overrideClasses)}if(u)a.startChar=a.abcelem.startChar,a.endChar=a.abcelem.endChar,l.add(a,m,!1,c);else{a.elemset.push(m);var v=!1;"note"!==a.type&&"tabNumber"!==a.type||(v=!0),l.add(a,m,v,c)}}else a.elemset.length>0&&l.add(a,a.elemset[0],"note"===a.type,c);if(a.klass&&r(a.elemset,"mark","","#00ff00"),a.hint&&r(a.elemset,"abcjs-hint","",null),a.abcelem.abselem=a,a.heads&&a.heads.length>0){a.notePositions=[];for(var y=0;y<a.heads.length;y++)a.notePositions.push({x:a.heads[y].x+a.heads[y].w/2,y:c.zero-a.heads[y].pitch*n.STEP})}}},bc}function Gu(){if(kc)return wc;kc=1;var e=ju(),t=function(){if(Yl)return Vl;Yl=1;var e=Mu(),t=Nu(),n=Fu(),r=function(r,i,o,a,s,l,c){i=n(i),o=n(o),a=n(a),s=n(s),l=n(l),c=n(c);var u=e("M %f %f L %f %f M %f %f L %f %f",l,i,c,o,l,a,c,s);return t(r,{path:u,highlight:"stroke",stroke:r.foregroundColor,class:r.controller.classes.generate("dynamics decoration"),"data-name":"dynamics"})};return Vl=function(e,t,n){void 0===t.pitch&&window.console.error("Crescendo Element y-coordinate not set.");var i,o=e.calcY(t.pitch)+4,a=t.anchor1?t.anchor1.x:0,s=t.anchor2?t.anchor2.x:800;return i="<"===t.dir?r(e,o+4,o,o+4,o+8,a,s):r(e,o,o+4,o+8,o+4,a,s),n.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1},i),[i]}}(),n=function(){if(ec)return Ql;ec=1;var e=Ru();return Ql=function(t,n,r){void 0===n.pitch&&window.console.error("Dynamic Element y-coordinate not set.");var i=e(t,n.anchor.x,n.pitch,n.dec,{scalex:1,scaley:1,klass:t.controller.classes.generate("decoration dynamics"),fill:t.foregroundColor,stroke:"none",name:"dynamics"});return r.wrapSvgEl({el_type:"dynamicDecoration",startChar:-1,endChar:-1,decoration:n.dec},i),[i]}}(),r=qu(),i=function(){if(ic)return rc;ic=1;var e=Mu(),t=Ou(),n=Nu(),r=Fu();return rc=function(i,o,a,s,l){void 0===o.pitch&&window.console.error("Ending Element y-coordinate not set.");var c=r(i.calcY(o.pitch)),u="";o.anchor1&&(a=r(o.anchor1.x+o.anchor1.w),u+=e("M %f %f L %f %f ",a,c,a,r(c+20))),o.anchor2&&(s=r(o.anchor2.x),u+=e("M %f %f L %f %f ",s,c,s,r(c+20))),u+=e("M %f %f L %f %f ",a,c,s,c),i.paper.openGroup({klass:i.controller.classes.generate("ending"),"data-name":"ending"}),n(i,{path:u,stroke:i.foregroundColor,fill:i.foregroundColor,"data-name":"line"}),o.anchor1&&t(i,{x:r(a+5),y:r(i.calcY(o.pitch-.5)),text:o.text,type:"repeatfont",klass:"ending",anchor:"start",noClass:!0,name:o.text});var h=i.paper.closeGroup();return l.wrapSvgEl({el_type:"ending",startChar:-1,endChar:-1},h),[h]}}(),o=function(){if(ac)return oc;ac=1;var e=Mu(),t=Fu(),n=function(e,t,n){e.anchor1&&e.anchor2?e.anchor1.pitch===e.anchor2.pitch&&0===e.internalNotes.length?e.isTie=!0:e.isTie=!1:e.isTie=!0,e.isTie?(e.calcTieDirection(),e.calcX(t,n),e.calcTieY()):(e.calcSlurDirection(),e.calcX(t,n),e.calcSlurY()),e.avoidCollisionAbove()},r=function(n,r,i,o,a,s,l,c,u){var h=c?1.2:1.5;r=t(r+6),i=t(i+4),o+=s?h:-h,a+=s?h:-h;var d,p=t(n.calcY(o)),f=t(n.calcY(a)),m=i-r,g=f-p,v=Math.sqrt(m*m+g*g),y=m/v,b=g/v,_=v/3.5,w=c?10:25,k=(s?-1:1)*Math.min(w,Math.max(4,_)),x=t(r+_*y-k*b),C=t(p+_*b+k*y),S=t(i-_*y-k*b),T=t(f-_*b+k*y);if(l?l+=" slur":l="slur",l+=c?" tie":" legato",u){l+=" dotted";var E=e("M %f %f C %f %f %f %f %f %f",r,p,x,C,S,T,i,f);d=n.paper.path({path:E,stroke:n.foregroundColor,fill:"none","stroke-dasharray":"5 5",class:n.controller.classes.generate(l),"data-name":c?"tie":"slur"})}else{var I=e("M %f %f C %f %f %f %f %f %f C %f %f %f %f %f %f z",r,p,x,C,S,T,i,f,t(S-2*b),t(T+2*y),t(x-2*b),t(C+2*y),r,p);d=n.paper.path({path:I,stroke:"none",fill:n.foregroundColor,class:n.controller.classes.generate(l),"data-name":c?"tie":"slur"})}return d};return oc=function(e,t,i,o,a){n(t,i,o);var s="";t.anchor1?s+="abcjs-start-m"+t.anchor1.parent.counters.measure+"-n"+t.anchor1.parent.counters.note:s+="abcjs-start-edge",t.anchor2?s+=" abcjs-end-m"+t.anchor2.parent.counters.measure+"-n"+t.anchor2.parent.counters.note:s+=" abcjs-end-edge",t.hint&&(s="abcjs-hint");var l=t.fixedY?1.5:0,c=r(e,t.startX,t.endX,t.startY+l,t.endY+l,t.above,s,t.isTie,t.dotted);return a.wrapSvgEl({el_type:"slur",startChar:-1,endChar:-1},c),[c]}}(),a=function(){if(lc)return sc;lc=1;var e=Nu(),t=Fu();function n(e,n,r,i,o,a){r=t(e.calcY(r)),o=t(e.calcY(o)),n=t(n),i=t(i);var s=t(r+a);return"M"+n+" "+r+" L"+i+" "+o+"L"+i+" "+t(o+a)+" L"+n+" "+s+"z"}function r(e,t,n,r,i){return(i-n)/(r-t)}function i(e,t,n,r){return t+(r-e)*n}return sc=function(t,o){if(0!==o.beams.length){for(var a="",s=0;s<o.beams.length;s++){var l=o.beams[s];if(l.split){for(var c=r(t,l.startX,l.startY,l.endX,l.endY),u=[],h=0;h<l.split.length;h+=2)u.push([l.split[h],l.split[h+1]]);for(h=0;h<u.length;h++){var d=i(l.startX,l.startY,c,u[h][0]),p=i(l.startX,l.startY,c,u[h][1]);a+=n(t,u[h][0],d,u[h][1],p,l.dy)}}else a+=n(t,l.startX,l.startY,l.endX,l.endY,l.dy)}var f=("abcjs-d"+o.duration).replace(/\./g,"-"),m=t.controller.classes.generate("beam-elem "+f);return[e(t,{path:a,stroke:"none",fill:t.foregroundColor,class:m})]}},sc}(),s=Ou(),l=Wu();function c(e){return"rest"===e.type&&!(!e.abcelem||!e.abcelem.rest||"spacer"===e.abcelem.rest.type)}return wc=function(u,h,d,p,f){var m=h.w-1;u.staffbottom=h.staff.bottom;var g,v,y=u.foregroundColor;if(h.color&&(u.foregroundColor=h.color),h.header){var b=s(u,{x:u.padding.left,y:u.calcY(h.headerPosition),text:h.header,type:"voicefont",klass:"staff-extra voice-name",anchor:"start",centerVertically:!0,name:"voice-name"},!0);p.wrapSvgEl({el_type:"voiceName",startChar:-1,endChar:-1,text:h.header},b)}var _=!1;for(g=0;g<h.children.length;g++){"note"!==(v=h.children[g]).type&&"rest"!==v.type||(_=!0);var w=!1;"staff-extra"===v.type||u.controller.classes.isInMeasure()||(u.controller.classes.startMeasure(),w=!0),h.staff.isTabStaff&&(v.invisible=!1,"bar"==v.type&&v.abcelem.lastBar&&(d=h.topLine)),l(u,v,h.barto||g===h.children.length-1?d:0,p,f),("note"===v.type||c(v))&&u.controller.classes.incrNote(),"bar"===v.type&&!w&&_&&u.controller.classes.incrMeasure()}for(u.controller.classes.startMeasure(),g=0;g<h.beams.length;g++){var k=h.beams[g];"bar"===k?u.controller.classes.incrMeasure():a(u,k,p)}for(u.controller.classes.startMeasure(),g=0;g<h.otherchildren.length;g++)if("bar"===(v=h.otherchildren[g]))u.controller.classes.incrMeasure();else switch(v.type){case"GlissandoElem":v.elemset=e(u,v,p);break;case"CrescendoElem":v.elemset=t(u,v,p);break;case"DynamicDecoration":v.elemset=n(u,v,p);break;case"TripletElem":r(u,v,p);break;case"EndingElem":v.elemset=i(u,v,h.startx+10,m,p);break;case"TieElem":v.elemset=o(u,v,h.startx+10,m,p);break;default:l(u,v,h.startx+10,m,p,f)}u.foregroundColor=y},wc}function Vu(){if(Dc)return Ac;Dc=1;var e=Ic?Ec:(Ic=1,Ec=function(e,t){var n=Math.round(e.y),r=(e.controller.width-t)/2,i=r+t,o="M "+r+" "+n+" L "+i+" "+n+" L "+i+" "+(n+1)+" L "+r+" "+(n+1)+" L "+r+" "+n+" z";e.paper.pathToBack({path:o,stroke:"rgba(0,0,0,0)",fill:"rgba(0,0,0,255)",class:e.controller.classes.generate("defined-text")})}),t=Ou();return Ac=function(n,r,i){for(var o=0;o<r.rows.length;o++){var a=r.rows[o];if(a.absmove)n.absolutemoveY(a.absmove);else if(a.move)n.moveY(a.move);else if(a.text){var s=a.left?a.left:0,l=t(n,{x:s,y:n.y,text:a.text,type:a.font,klass:a.klass,name:a.name,anchor:a.anchor});a.absElemType&&i.wrapSvgEl({el_type:a.absElemType,name:a.name,startChar:a.startChar,endChar:a.endChar,text:a.text},l)}else if(a.separator)e(n,a.separator);else if(a.startGroup)n.paper.openGroup({klass:a.klass,"data-name":a.name});else if(a.endGroup){var c=n.paper.closeGroup();a.absElemType&&i.wrapSvgEl({el_type:a.absElemType,name:a.name,startChar:a.startChar,endChar:a.endChar,text:""},c)}}},Ac}function Yu(){if(Lc)return Bc;Lc=1;var e=Xc(),t=Pu(),n=Gu(),r=function(){if(Cc)return xc;Cc=1;var e=Uu();return xc=function(t,n,r,i,o,a){var s="abcjs-top-line",l=2;o&&(l=o),t.paper.openGroup({prepend:!0,klass:t.controller.classes.generate("abcjs-staff")});var c=0,u=0;if(1===i)e(t,n,r,6,s,null,a+t.lineThickness),c=t.calcY(10),u=t.calcY(2);else for(var h=i-1;h>=0;h--){var d=(h+1)*l;u=t.calcY(d),0===c&&(c=u),e(t,n,r,d,s,null,a+t.lineThickness),s=void 0}return t.paper.closeGroup(),[c,u]},xc}(),i=Tc?Sc:(Tc=1,Sc=function(e,t,n){var r=e.paper.rectBeneath(t);return n&&e.paper.text(n,{x:0,y:t.y+7,"text-anchor":"start","font-size":"14px",fill:"rgba(0,0,255,.4)",stroke:"rgba(0,0,255,.4)"}),r}),o=$u(),a=Vu();function s(n,r,i,o,a){if(i)for(var s=0;s<i.length;s++)i[s].isStartVoice(o)&&(i[s].startY=r-10*e.STEP,i[s].elemset=t(n,i[s],a))}function l(t,n,r){for(var o=0;o<r.length;o++)for(var a=n[r[o]].children,s=0;s<a.length;s++){var l=a[s],c=l.getFixedCoords();if(!l.invisible&&void 0!==c.t&&void 0!==c.b){var u=(c.t-c.b)*e.STEP;i(t,{x:c.x,y:t.calcY(c.t),width:c.w,height:u,fill:"#88e888","fill-opacity":.4,stroke:"#4aa93d","stroke-opacity":.8});for(var h=0;h<l.children.length;h++){var d=l.children[h],p=d.getChordDim();if(p){var f=t.calcY(d.pitch);f+=d.dim.font.size*d.getLane(),i(t,{x:p.left,y:f,width:p.right-p.left,height:d.dim.font.size,fill:"none",stroke:"#4aa93d","stroke-opacity":.8})}}}}}return Bc=function(t,c,u,h){for(var d,p,f,m=t.y,g=0;g<c.staffs.length;g++){var v=c.staffs[g];t.moveY(e.STEP,v.top),v.absoluteY=t.y,t.showDebug&&(t.showDebug.indexOf("box")>=0&&v.voices&&l(t,c.voices,v.voices),t.showDebug.indexOf("grid")>=0&&(t.paper.dottedLine({x1:t.padding.left,x2:t.padding.left+t.controller.width,y1:m,y2:m,stroke:"#0000ff"}),i(t,{x:t.padding.left,y:t.calcY(v.originalTop),width:t.controller.width,height:t.calcY(v.originalBottom)-t.calcY(v.originalTop),fill:t.foregroundColor,stroke:t.foregroundColor,"fill-opacity":.1,"stroke-opacity":.1}),d=0,E(v,"chordHeightAbove"),E(v,"chordHeightBelow"),E(v,"dynamicHeightAbove"),E(v,"dynamicHeightBelow"),E(v,"endingHeightAbove"),E(v,"lyricHeightAbove"),E(v,"lyricHeightBelow"),E(v,"partHeightAbove"),E(v,"tempoHeightAbove"),E(v,"volumeHeightAbove"),E(v,"volumeHeightBelow"))),t.moveY(e.STEP,-v.bottom),t.showDebug&&t.showDebug.indexOf("grid")>=0&&t.paper.dottedLine({x1:t.padding.left,x2:t.padding.left+t.controller.width,y1:t.y,y2:t.y,stroke:"#0000aa"})}for(var y=2,b=0,_=0;_<c.voices.length;_++){var w=c.voices[_].staff,k=c.voices[_].tabNameInfos;if(t.y=w.absoluteY,t.controller.classes.incrVoice(),!c.voices[_].duplicate){if(p||(p=t.calcY(10)),f=t.calcY(y),0!==w.lines){w.linePitch&&(y=w.linePitch),t.controller.classes.newMeasure();var x=r(t,c.startx,c.w,w.lines,w.linePitch,.35);f=x[1],w.bottomLine=f,w.topLine=x[0],w.hasTab&&(b=w.topLine),w.hasStaff&&(b=w.hasStaff.topLine,c.voices[_].barto=!0,c.voices[_].topLine=p)}s(t,w.absoluteY,c.brace,_,u),s(t,w.absoluteY,c.bracket,_,u)}n(t,c.voices[_],b,u,{top:m,zero:t.y,height:c.height*e.STEP});var C=0;if(k){var S={rows:[]};S.rows.push({absmove:f+2});S.rows.push({left:c.startx+8,text:k.name,font:"tablabelfont",klass:"text instrument-name",anchor:"start"}),S.rows.push({move:k.textSize.height}),a(t,S),C=k.textSize.height}t.controller.classes.newMeasure(),c.voices[_].duplicate||(b=t.calcY(2+C))}t.controller.classes.newMeasure();var T=c.staffs.length;function E(n,r){var o=["rgb(207,27,36)","rgb(168,214,80)","rgb(110,161,224)","rgb(191,119,218)","rgb(195,30,151)","rgb(31,170,177)","rgb(220,166,142)"];if(n.positionY&&n.positionY[r]){var a=n.specialY[r]*e.STEP;"chordHeightAbove"===r&&n.specialY.chordLines&&n.specialY.chordLines.above&&(a*=n.specialY.chordLines.above),"chordHeightBelow"===r&&n.specialY.chordLines&&n.specialY.chordLines.below&&(a*=n.specialY.chordLines.below),i(t,{x:t.padding.left,y:t.calcY(n.positionY[r]),width:t.controller.width,height:a,fill:o[d],stroke:o[d],"fill-opacity":.4,"stroke-opacity":.4},r.substr(0,4)),(d+=1)>6&&(d=0)}}T>1&&(p=c.staffs[0].topLine,f=c.staffs[T-1].bottomLine,o(t,c.startx,.6,p,f,null)),t.y=m},Bc}function Ku(){if(jc)return Nc;jc=1;var e=Yu(),t=Fc?Mc:(Fc=1,Mc=function(e,t,n,r){var i=(t+e.padding.right)*n,o=(e.y+e.padding.bottom)*n;if(e.isPrint&&(o=Math.max(o,1056)),""!==e.ariaLabel){var a="Sheet Music";e.abctune&&e.abctune.metaText&&e.abctune.metaText.title&&(a+=' for "'+e.abctune.metaText.title+'"'),e.paper.setTitle(a);var s=e.ariaLabel?e.ariaLabel:a;e.paper.setAttribute("aria-label",s)}e.paper.insertStyles(".abcjs-dragging-in-progress text, .abcjs-dragging-in-progress tspan {"+["-webkit-touch-callout: none;","-webkit-user-select: none;","-khtml-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","user-select: none;"].join(" ")+"}");var l={overflow:"hidden"};"resize"===r?e.paper.setResponsiveWidth(i,o):(l.width="",l.height=o+"px",n<1?(l.width=i+"px",e.paper.setSize(i/n,o/n)):e.paper.setSize(i,o)),e.paper.setScale(n),e.paper.setParentStyles(l)}),n=Vu(),r=Xc(),i=function(){if(Pc)return Oc;Pc=1;var e=au(),t=su();function n(e,t,n){this.elements=[],this.paper=e,this.tuneNumber=n,this.selectTypes=t}return n.prototype.getElements=function(){return this.elements},n.prototype.add=function(e,t,n,r){if(this.canSelect(e)){var i;i=void 0===this.selectTypes?{selectable:!1,"data-index":this.elements.length}:{selectable:!0,tabindex:0,"data-index":this.elements.length},this.paper.setAttributeOnElement(t,i);var o={absEl:e,svgEl:t,isDraggable:n};void 0!==r&&(o.staffPos=r),this.elements.push(o)}},n.prototype.canSelect=function(e){return!(!1===this.selectTypes||!e||!e.abcelem||!0!==this.selectTypes&&!(void 0===this.selectTypes?"note"===e.abcelem.el_type||"tabNumber"===e.abcelem.el_type:this.selectTypes.indexOf(e.abcelem.el_type)>=0))},n.prototype.wrapSvgEl=function(n,r){var i={tuneNumber:this.tuneNumber,abcelem:n,elemset:[r],highlight:e,unhighlight:t};this.add(i,r,!1)},Oc=n}();function o(t,n,i,o){e(t,n,i,o);var a=n.height*r.STEP;return t.y+=a,n}function a(e,t,n,i){var o=-(n.staffs[n.staffs.length-1].bottom-2),a=(i.staffs[0].top-10+o)*r.STEP;a<t&&e.moveY(t-a)}return Nc=function(e,r,s,l,c,u,h,d,p,f){var m=new i(e.paper,d,p);e.paper.openGroup(),e.moveY(e.padding.top),n(e,s.topText,m),e.paper.closeGroup(),e.moveY(e.spacing.music);for(var g=[],v=0;v<s.lines.length;v++){r.incrLine();var y=s.lines[v];if(y.staff){e.paper.openGroup(),y.vskip&&e.moveY(y.vskip),g.length>=1&&a(e,e.spacing.staffSeparation,g[g.length-1],y.staffGroup);var b=o(e,y.staffGroup,m,v);b.line=f+v,g.push(b),e.paper.closeGroup()}else y.nonMusic&&(e.paper.openGroup(),n(e,y.nonMusic,m),e.paper.closeGroup())}return r.reset(),s.bottomText&&s.bottomText.rows&&s.bottomText.rows.length>0&&(e.paper.openGroup(),e.moveY(24),n(e,s.bottomText,m),e.paper.closeGroup()),t(e,c,h,u),{staffgroups:g,selectables:m.getElements()}}}function Xu(){if(Rc)return zc;Rc=1;var e=Xc(),t=xu(),n=Cu(),r=(Js||(Js=1,Zs=function(e,t,n,r,i,o){var a,s=e.text;this.rows=[],t&&this.rows.push({move:t});var l=n.calc("textfont","defined-text");if(""===s)this.rows.push({move:2*l.attr["font-size"]});else if("string"==typeof s)this.rows.push({move:l.attr["font-size"]/2}),this.rows.push({left:r,text:s,font:"textfont",klass:"defined-text",anchor:"start",startChar:e.startChar,endChar:e.endChar,absElemType:"freeText",name:"free-text"}),a=o.calc(s,"textfont","defined-text"),this.rows.push({move:a.height});else if(s){for(var c=0,u=r,h="textfont",d=0;d<s.length;d++)h=s[d].font?s[d].font:"textfont",this.rows.push({left:u,text:s[d].text,font:h,klass:"defined-text",anchor:"start",startChar:e.startChar,endChar:e.endChar,absElemType:"freeText",name:"free-text"}),u+=(a=o.calc(s[d].text,n.calc(h,"defined-text").font,"defined-text")).width+a.height/2,c=Math.max(c,a.height);this.rows.push({move:c})}else if(1===e.length){var p=i/2;this.rows.push({left:p,text:e[0].text,font:"textfont",klass:"defined-text",anchor:"middle",startChar:e.startChar,endChar:e.endChar,absElemType:"freeText",name:"free-text"}),a=o.calc(e[0].text,"textfont","defined-text"),this.rows.push({move:a.height})}}),Zs),i=el?Qs:(el=1,Qs=function(e,t,n){this.rows=[],e&&this.rows.push({move:e}),this.rows.push({separator:t,absElemType:"separator"}),n&&this.rows.push({move:n})}),o=nl?tl:(nl=1,tl=function(e,t,n,r,i,o){this.rows=[],e&&this.rows.push({move:e});var a=t.titleleft?"start":"middle",s=t.titleleft?i:r;this.rows.push({left:s,text:n.text,font:"subtitlefont",klass:"text subtitle",anchor:a,startChar:n.startChar,endChar:n.endChar,absElemType:"subtitle",name:"subtitle"});var l=o.calc(n.text,"subtitlefont","text subtitle");this.rows.push({move:l.height})}),a=function(){if(al)return ol;al=1;const e=Su();return ol=function(t,n,r,i,o,a,s,l,c){if(this.rows=[],t.header&&a){var u=c.calc("X","headerfont","abcjs-header abcjs-meta-top").height;e(this.rows,{marginLeft:s,text:t.header.left,font:"headerfont",klass:"header meta-top",marginTop:-u,info:n.header,name:"header"},c),e(this.rows,{marginLeft:s+o/2,text:t.header.center,font:"headerfont",klass:"header meta-top",marginTop:-u,anchor:"middle",info:n.header,name:"header"},c),e(this.rows,{marginLeft:s+o,text:t.header.right,font:"headerfont",klass:"header meta-top",marginTop:-u,anchor:"end",info:n.header,name:"header"},c)}a&&this.rows.push({move:l.top});var h=r.titleleft?"start":"middle",d=r.titleleft?s:s+o/2;if(t.title&&e(this.rows,{marginLeft:d,text:t.title,font:"titlefont",klass:"title meta-top",marginTop:l.title,anchor:h,absElemType:"title",info:n.title,name:"title"},c),i.length)for(var p=0;p<i.length&&i[p].subtitle;)e(this.rows,{marginLeft:d,text:i[p].subtitle.text,font:"subtitlefont",klass:"text meta-top subtitle",marginTop:l.subtitle,anchor:h,absElemType:"subtitle",info:i[p].subtitle,name:"subtitle"},c),p++;if(t.rhythm||t.origin||t.composer){if(this.rows.push({move:l.composer}),t.rhythm&&t.rhythm.length>0){var f=!(!t.composer&&!t.origin);e(this.rows,{marginLeft:s,text:t.rhythm,font:"infofont",klass:"meta-top rhythm",absElemType:"rhythm",noMove:f,info:n.rhythm,name:"rhythm"},c)}var m="";t.composer&&(m+=t.composer),t.origin&&(m+=" ("+t.origin+")"),m.length>0&&e(this.rows,{marginLeft:s+o,text:m,font:"composerfont",klass:"meta-top composer",anchor:"end",absElemType:"composer",info:n.composer,name:"composer"},c)}t.author&&t.author.length>0&&e(this.rows,{marginLeft:s+o,text:t.author,font:"composerfont",klass:"meta-top author",anchor:"end",absElemType:"author",info:n.author,name:"author"},c),t.partOrder&&t.partOrder.length>0&&e(this.rows,{marginLeft:s,text:t.partOrder,font:"partsfont",klass:"meta-top part-order",absElemType:"partOrder",info:n.partOrder,name:"part-order"},c)}}(),s=function(){if(ll)return sl;ll=1;const e=Su();function t(e,t,n,r,i,o){this.rows=[],e.unalignedWords&&e.unalignedWords.length>0&&this.unalignedWords(e.unalignedWords,r,i,o),this.extraText(e,r,i,o),e.footer&&n&&this.footer(e.footer,t,r,o)}return t.prototype.unalignedWords=function(t,n,r,i){var o="meta-bottom unaligned-words",a="wordsfont";this.rows.push({startGroup:"unalignedWords",klass:"abcjs-meta-bottom abcjs-unaligned-words",name:"words"});var s=i.calc("i",a,o);this.rows.push({move:r.words});for(var l=0;l<t.length;l++)if(""===t[l])this.rows.push({move:s.height});else if("string"==typeof t[l])e(this.rows,{marginLeft:n,text:t[l],font:a,klass:o,inGroup:!0,name:"words"},i);else{for(var c=0,u=0,h=0;h<t[l].length;h++){var d=t[l][h],p=d.font?d.font:a;this.rows.push({left:n+u,text:d.text,font:p,anchor:"start"});var f=i.calc(d.text,a,o);c=Math.max(c,f.height),u+=f.width," "===d.text[d.text.length-1]&&(u+=s.width)}this.rows.push({move:c})}this.rows.push({move:2*s.height}),this.rows.push({endGroup:"unalignedWords",absElemType:"unalignedWords",startChar:-1,endChar:-1,name:"unalignedWords"})},t.prototype.extraText=function(t,n,r,i){var o="";t.book&&(o+="Book: "+t.book+"\n"),t.source&&(o+="Source: "+t.source+"\n"),t.discography&&(o+="Discography: "+t.discography+"\n"),t.notes&&(o+="Notes: "+t.notes+"\n"),t.transcription&&(o+="Transcription: "+t.transcription+"\n"),t.history&&(o+="History: "+t.history+"\n"),t["abc-copyright"]&&(o+="Copyright: "+t["abc-copyright"]+"\n"),t["abc-creator"]&&(o+="Creator: "+t["abc-creator"]+"\n"),t["abc-edited-by"]&&(o+="Edited By: "+t["abc-edited-by"]+"\n"),o.length>0&&e(this.rows,{marginLeft:n,text:o,font:"historyfont",klass:"meta-bottom extra-text",marginTop:r.info,absElemType:"extraText",name:"description"},i)},t.prototype.footer=function(t,n,r,i){var o="header meta-bottom",a="footerfont";this.rows.push({startGroup:"footer",klass:o}),e(this.rows,{marginLeft:r,text:t.left,font:a,klass:o,name:"footer"},i),e(this.rows,{marginLeft:r+n/2,text:t.center,font:a,klass:o,anchor:"middle",name:"footer"},i),e(this.rows,{marginLeft:r+n,text:t.right,font:a,klass:o,anchor:"end",name:"footer"},i)},sl=t}(),l=Tu(),c=Lu(),u=function(){if(Dl)return Al;Dl=1;var e=function(e){this.shouldAddClasses=e.shouldAddClasses,this.reset()};return e.prototype.reset=function(){this.lineNumber=null,this.voiceNumber=null,this.measureNumber=null,this.measureTotalPerLine=[],this.noteNumber=null},e.prototype.incrLine=function(){null===this.lineNumber?this.lineNumber=0:this.lineNumber++,this.voiceNumber=null,this.measureNumber=null,this.noteNumber=null},e.prototype.incrVoice=function(){null===this.voiceNumber?this.voiceNumber=0:this.voiceNumber++,this.measureNumber=null,this.noteNumber=null},e.prototype.isInMeasure=function(){return null!==this.measureNumber},e.prototype.newMeasure=function(){this.measureNumber&&(this.measureTotalPerLine[this.lineNumber]=this.measureNumber),this.measureNumber=null,this.noteNumber=null},e.prototype.startMeasure=function(){this.measureNumber=0,this.noteNumber=0},e.prototype.incrMeasure=function(){this.measureNumber++,this.noteNumber=0},e.prototype.incrNote=function(){this.noteNumber++},e.prototype.measureTotal=function(){for(var e=0,t=0;t<this.lineNumber;t++)e+=this.measureTotalPerLine[t]?this.measureTotalPerLine[t]:0;return this.measureNumber&&(e+=this.measureNumber),e},e.prototype.getCurrent=function(e){return{line:this.lineNumber,measure:this.measureNumber,measureTotal:this.measureTotal(),voice:this.voiceNumber,note:this.noteNumber}},e.prototype.generate=function(e){if(!this.shouldAddClasses)return"";var t=[];if(e&&e.length>0&&t.push(e),"tab-number"===e)return t.join(" ");if("text instrument-name"===e)return"abcjs-text abcjs-instrument-name";if(null!==this.lineNumber&&t.push("l"+this.lineNumber),null!==this.measureNumber&&t.push("m"+this.measureNumber),null!==this.measureNumber&&t.push("mm"+this.measureTotal()),null!==this.voiceNumber&&t.push("v"+this.voiceNumber),e&&(e.indexOf("note")>=0||e.indexOf("rest")>=0||e.indexOf("lyric")>=0)&&null!==this.noteNumber&&t.push("n"+this.noteNumber),t.length>0){t=(t=t.join(" ")).split(" ");for(var n=0;n<t.length;n++)0!==t[n].indexOf("abcjs-")&&t[n].length>0&&(t[n]="abcjs-"+t[n])}return t.join(" ")},Al=e}(),h=function(){if(Ll)return Bl;Ll=1;var e=function(e,t){this.formatting=e,this.classes=t};return e.prototype.updateFonts=function(e){e.gchordfont&&(this.formatting.gchordfont=e.gchordfont),e.tripletfont&&(this.formatting.tripletfont=e.tripletfont),e.annotationfont&&(this.formatting.annotationfont=e.annotationfont),e.vocalfont&&(this.formatting.vocalfont=e.vocalfont)},e.prototype.calc=function(e,t){var n;n="string"==typeof e?(n=this.formatting[e])?{face:n.face,size:Math.round(4*n.size/3),decoration:n.decoration,style:n.style,weight:n.weight,box:n.box}:{face:"Arial",size:Math.round(16),decoration:"underline",style:"normal",weight:"normal"}:{face:e.face,size:Math.round(4*e.size/3),decoration:e.decoration,style:e.style,weight:e.weight,box:e.box};var r=this.formatting.fontboxpadding?this.formatting.fontboxpadding:.1;return n.padding=n.size*r,{font:n,attr:{"font-size":n.size,"font-style":n.style,"font-family":n.face,"font-weight":n.weight,"text-decoration":n.decoration,class:this.classes.generate(t)}}},Bl=e}(),d=function(){if(Fl)return Ml;Fl=1;var e=function(e,t){this.getFontAndAttr=e,this.svg=t};return e.prototype.updateFonts=function(e){this.getFontAndAttr.updateFonts(e)},e.prototype.attr=function(e,t){return this.getFontAndAttr.calc(e,t)},e.prototype.calc=function(e,t,n,r){var i;i="string"==typeof t?this.attr(t,n):{font:{face:t.face,size:t.size,decoration:t.decoration,style:t.style,weight:t.weight},attr:{"font-size":t.size,"font-style":t.style,"font-family":t.face,"font-weight":t.weight,"text-decoration":t.decoration,class:this.getFontAndAttr.classes.generate(n)}};var o=this.svg.getTextSize(e,i.attr,r);return i.font.box?{height:o.height+4*i.font.padding,width:o.width+4*i.font.padding}:o},e.prototype.baselineToCenter=function(e,t,n,r,i){return.5*this.calc(e,t,n).height+(i-r-2)*this.attr(t,n).font.size},Ml=e}(),p=Ku(),f=gu(),m=function(t,r){r=r||{},this.oneSvgPerLine=r.oneSvgPerLine,this.selectionColor=r.selectionColor,this.dragColor=r.dragColor?r.dragColor:r.selectionColor,this.dragging=!!r.dragging,this.selectTypes=r.selectTypes,this.responsive=r.responsive,this.space=3*e.SPACE,this.initialClef=r.initialClef,this.scale=r.scale?parseFloat(r.scale):0,this.classes=new u({shouldAddClasses:r.add_classes}),this.scale>.1||(this.scale=void 0),r.staffwidth?(this.staffwidthScreen=r.staffwidth,this.staffwidthPrint=r.staffwidth):(this.staffwidthScreen=740,this.staffwidthPrint=680),this.listeners=[],r.clickListener&&this.addSelectListener(r.clickListener),this.renderer=new n(t),this.renderer.setPaddingOverride(r),r.showDebug&&(this.renderer.showDebug=r.showDebug),r.jazzchords&&(this.jazzchords=r.jazzchords),r.germanAlphabet&&(this.germanAlphabet=r.germanAlphabet),r.lineThickness&&(this.lineThickness=r.lineThickness),this.renderer.controller=this,this.renderer.foregroundColor=r.foregroundColor?r.foregroundColor:"currentColor",void 0!==r.ariaLabel&&(this.renderer.ariaLabel=r.ariaLabel),this.renderer.minPadding=r.minPadding?r.minPadding:0,this.reset()};function g(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=0;n<e.attributes.length;n++){var r=e.attributes[n];"height"!==r.name&&"aria-label"!=r.name&&t.setAttribute(r.name,r.value)}return t}return m.prototype.reset=function(){this.selected=[],this.staffgroups=[],this.engraver&&this.engraver.reset(),this.engraver=null,this.renderer.reset(),this.dragTarget=null,this.dragIndex=-1,this.dragMouseStart={x:-1,y:-1},this.dragYStep=0,this.lineThickness&&this.renderer.setLineThickness(this.lineThickness)},m.prototype.engraveABC=function(e,t,n){void 0===e[0]&&(e=[e]),this.reset();for(var r=0;r<e.length;r++)void 0===t&&(t=r),this.getFontAndAttr=new h(e[r].formatting,this.classes),this.getTextSize=new d(this.getFontAndAttr,this.renderer.paper),this.engraveTune(e[r],t,n)},m.prototype.adjustNonScaledItems=function(e){this.width/=e,this.renderer.adjustNonScaledItems(e)},m.prototype.getMeasureWidths=function(e){this.reset(),this.getFontAndAttr=new h(e.formatting,this.classes),this.getTextSize=new d(this.getFontAndAttr,this.renderer.paper),this.setupTune(e,0),this.constructTuneElements(e),c(this.renderer,e,0,this.space);for(var t,n=[],r=!0,i=0;i<e.lines.length;i++){var o=e.lines[i];if(o.staff){if(r&&(t={left:0,measureWidths:[],
//height: this.renderer.padding.top + this.renderer.spacing.music + this.renderer.padding.bottom + 24, // the 24 is the empirical value added to the bottom of all tunes.
total:0},n.push(t),r=!1),o.staffGroup.voices.length>0)for(var a=o.staffGroup.voices[0],s=!1,l=0,u=0;u<a.children.length;u++){var p=a.children[u];s||p.isClef||p.isKeySig||(s=!0,t.left=p.x,l=p.x),"bar"===p.type&&(t.measureWidths.push(p.x-l),t.total+=p.x-l,l=p.x)}}else r=!0}return n},m.prototype.setupTune=function(e,n){this.classes.reset(),void 0!==e.formatting.jazzchords&&(this.jazzchords=e.formatting.jazzchords),this.renderer.newTune(e),this.engraver=new t(this.getTextSize,n,{bagpipes:e.formatting.bagpipes,flatbeams:e.formatting.flatbeams,graceSlurs:!1!==e.formatting.graceSlurs,
// undefined is the default, which is true
percmap:e.formatting.percmap,initialClef:this.initialClef,jazzchords:this.jazzchords,germanAlphabet:this.germanAlphabet}),this.engraver.setStemHeight(this.renderer.spacing.stemHeight),this.engraver.measureLength=e.getMeterFraction().num/e.getMeterFraction().den,e.formatting.staffwidth?this.width=1.33*e.formatting.staffwidth:this.width=this.renderer.isPrint?this.staffwidthPrint:this.staffwidthScreen;var r=e.formatting.scale?e.formatting.scale:this.scale;return"resize"===this.responsive&&(r=void 0),void 0===r&&(r=this.renderer.isPrint?.75:1),this.adjustNonScaledItems(r),r},m.prototype.constructTuneElements=function(e){var t,n;e.topText=new a(e.metaText,e.metaTextInfo,e.formatting,e.lines,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.getTextSize);var l=!1,c=!1;for(t=0;t<e.lines.length;t++)if((n=e.lines[t]).staff)c=!0,n.staffGroup=this.engraver.createABCLine(n.staff,l?null:e.metaText.tempo,t),l=!0;else if(n.subtitle){if(c){var u=this.width/2+this.renderer.padding.left;n.nonMusic=new o(this.renderer.spacing.subtitle,e.formatting,n.subtitle,u,this.renderer.padding.left,this.getTextSize)}}else void 0!==n.text?(c=!0,n.nonMusic=new r(n.text,n.vskip,this.getFontAndAttr,this.renderer.padding.left,this.width,this.getTextSize)):void 0!==n.separator&&n.separator.lineLength&&(c=!0,n.nonMusic=new i(n.separator.spaceAbove,n.separator.lineLength,n.separator.spaceBelow));e.bottomText=new s(e.metaText,this.width,this.renderer.isPrint,this.renderer.padding.left,this.renderer.spacing,this.getTextSize)},m.prototype.engraveTune=function(e,t,n){var r=this.setupTune(e,t);this.constructTuneElements(e);var i=c(this.renderer,e,this.width,this.space);e.tablatures&&f.layoutTablatures(this.renderer,e);var o=p(this.renderer,this.classes,e,this.width,i,this.responsive,r,this.selectTypes,t,n);if(this.staffgroups=o.staffgroups,this.selectables=o.selectables,this.oneSvgPerLine){var a=this.renderer.paper.svg.parentNode;this.svgs=function(e,t,n){t||(t="Untitled");var r=e.querySelector("svg");"resize"===n&&(e.style.paddingBottom="");for(var i=r.querySelector("style"),o="resize"===n?r.viewBox.baseVal.width:r.getAttribute("width"),a=e.querySelectorAll("svg > g"),s=0,l=[],c=0;c<a.length;c++){var u=a[c],h=u.getBBox(),d=h.y-s,p=h.height+d,f=document.createElement("div"),m="overflow: hidden;";"resize"!==n&&(m+="height:"+p+"px;"),f.setAttribute("style",m);var v=g(r),y='Sheet Music for "'+t+'" section '+(c+1);v.setAttribute("aria-label",y),"resize"!==n&&v.setAttribute("height",p),"resize"===n&&(v.style.position=""),v.setAttribute("viewBox","0 "+s+" "+o+" "+p),v.appendChild(i.cloneNode(!0));var b=document.createElement("title");b.innerText=y,v.appendChild(b),v.appendChild(u),f.appendChild(v),l.push(v),e.appendChild(f),s=h.y+h.height}return e.removeChild(r),l}(a,e.metaText.title,this.responsive)}else this.svgs=[this.renderer.paper.svg];l(this,this.svgs)},m.prototype.getDim=function(e){if(!e.dim){var t=e.svgEl.getBBox();e.dim={left:Math.round(t.x),top:Math.round(t.y),right:Math.round(t.x+t.width),bottom:Math.round(t.y+t.height)}}return e.dim},m.prototype.addSelectListener=function(e){this.listeners[this.listeners.length]=e},zc=m}Lo.onGetOptions(((e,t)=>{e.emoji=t.extensions.emoji.enabled,e.emojiShortcuts=t.extensions.emoji.shortcuts})),Lo.onInitConverter(1,((e,t)=>{t.emoji&&e.use(Io,t.emojiShortcuts?{}:{shortcuts:{}})}));const Zu=bo(function(){if($c)return qc;$c=1;var e=vu();eu();var t=Xu(),n=tu(),r=Kc(),i={};function o(){var e=window.innerWidth;for(var t in i)if(i.hasOwnProperty(t)){var n=i[t];e-=2*n.offsetLeft,n.style.width=e+"px"}}try{window.addEventListener("resize",o),window.addEventListener("orientationChange",o)}catch(i7){}function a(e,n,r,o,a){r.viewportHorizontal?(e.innerHTML='<div class="abcjs-inner"></div>',r.scrollHorizontal?(e.style.overflowX="auto",e.style.overflowY="hidden"):e.style.overflow="hidden",i[e.id]=e,e=e.children[0]):r.viewportVertical?(e.innerHTML='<div class="abcjs-inner scroll-amount"></div>',e.style.overflowX="hidden",e.style.overflowY="auto",e=e.children[0]):e.innerHTML="";var s=new t(e,r);(s.engraveABC(n,o,a),n.engraver=s,r.viewportVertical||r.viewportHorizontal)&&(e.parentNode.style.width=e.style.width)}return qc=function(i,o,s,l,c){var u,h={};if(s){for(u in s)s.hasOwnProperty(u)&&(h[u]=s[u]);h.warnings_id&&h.tablature&&(h.tablature.warning_id=h.warnings_id)}if(l)for(u in l)l.hasOwnProperty(u)&&("listener"===u?l[u].highlight&&(h.clickListener=l[u].highlight):h[u]=l[u]);if(c)for(u in c)c.hasOwnProperty(u)&&(h[u]=c[u]);return e.renderEngine((function(e,i,o,s){var l=!1;return"*"===e&&(l=!0,(e=document.createElement("div")).setAttribute("style","visibility: hidden;"),document.body.appendChild(e)),h.afterParsing&&h.afterParsing(i,o,s),!l&&h.wrap&&h.staffwidth?(i=function(e,i,o,s,l){var c=new t(e,l),u=c.getMeasureWidths(i),h=r.calcLineWraps(i,u,l);if(h.reParse){var d=new n;d.parse(s,h.revisedParams),i=d.getTune();var p=d.getWarnings();p&&(i.warnings=p)}return a(e,i,h.revisedParams,o,0),i.explanation=h.explanation,i}(e,i,o,s,h),i):(a(e,i,h,o,0),l&&e.parentNode.removeChild(e),null)}),i,o,h)}}());Lo.onGetOptions(((e,t)=>{e.abc=t.extensions.abc.enabled})),Lo.onSectionPreview((e=>{e.querySelectorAll(".prism.language-abc").cl_each((e=>(e=>{const t=e.textContent,n=document.createElement("div");n.className="abc-notation-block",e.parentNode.parentNode.replaceChild(n,e.parentNode),Zu(n,t,{})})(e)))}));class Ju{
// The + prefix indicates that these fields aren't writeable
// Lexer holding the input string.
// Start offset, zero-based inclusive.
// End offset, zero-based exclusive.
constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}
/**
   * Merges two `SourceLocation`s from location providers, given they are
   * provided in order of appearance.
   * - Returns the first one's location if only the first is provided.
   * - Returns a merged range of the first and the last if both are provided
   *   and their lexers match.
   * - Otherwise, returns null.
   */static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new Ju(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}let Qu=class e{
// don't expand the token
// used in \noexpand
constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}
/**
   * Given a pair of tokens (this and endToken), compute a `Token` encompassing
   * the whole input range enclosed by these two.
   */range(t,n){return new e(n,Ju.range(this,t))}};class eh{
// Error start position based on passed-in Token or ParseNode.
// Length of affected text based on passed-in Token or ParseNode.
// The underlying error message without any context added.
constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n,r,i="KaTeX parse error: "+e,o=t&&t.loc;if(o&&o.start<=o.end){var a=o.lexer.input;n=o.start,r=o.end,n===a.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var s=a.slice(n,r).replace(/[^]/g,"$&");i+=(n>15?""+a.slice(n-15,n):a.slice(0,n))+s+(r+15<a.length?a.slice(r,r+15)+"":a.slice(r))}var l=new Error(i);return l.name="ParseError",l.__proto__=eh.prototype,l.position=n,null!=n&&null!=r&&(l.length=r-n),l.rawMessage=e,l}}eh.prototype.__proto__=Error.prototype;var th=/([A-Z])/g,nh={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},rh=/[&><"']/g;var ih=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},oh={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(rh,(e=>nh[e]))},hyphenate:function(e){return e.replace(th,"-$1").toLowerCase()},getBaseElem:ih,isCharacterBox:function(e){var t=ih(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},ah={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function sh(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if("string"!=typeof n)return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}let lh=class{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},ah)if(ah.hasOwnProperty(t)){var n=ah[t];this[t]=void 0!==e[t]?n.processor?n.processor(e[t]):e[t]:sh(n)}}
/**
   * Report nonstrict (non-LaTeX-compatible) input.
   * Can safely not be called if `this.strict` is false in JavaScript.
   */reportNonstrict(e,t,n){var r=this.strict;if("function"==typeof r&&(r=r(e,t,n)),r&&"ignore"!==r&&(!0===r||"error"===r))throw new eh("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",n)}
/**
   * Check whether to apply strict (LaTeX-adhering) behavior for unusual
   * input (like `\\`).  Unlike `nonstrict`, will not throw an error;
   * instead, "error" translates to a return value of `true`, while "ignore"
   * translates to a return value of `false`.  May still print a warning:
   * "warn" prints a warning and returns `false`.
   * This is for the second category of `errorCode`s listed in the README.
   */useStrictBehavior(e,t,n){var r=this.strict;if("function"==typeof r)try{r=r(e,t,n)}catch(i){r="error"}return!(!r||"ignore"===r)&&(!0===r||"error"===r)}
/**
   * Check whether to test potentially dangerous input, and return
   * `true` (trusted) or `false` (untrusted).  The sole argument `context`
   * should be an object with `command` field specifying the relevant LaTeX
   * command (as a string starting with `\`), and any other arguments, etc.
   * If `context` has a `url` field, a `protocol` field will automatically
   * get added by this function (changing the specified object).
   */isTrusted(e){if(e.url&&!e.protocol){var t=oh.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}var n="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(n)}};class ch{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}
/**
   * Get the style of a superscript given a base in the current style.
   */sup(){return uh[hh[this.id]]}
/**
   * Get the style of a subscript given a base in the current style.
   */sub(){return uh[dh[this.id]]}
/**
   * Get the style of a fraction numerator given the fraction in the current
   * style.
   */fracNum(){return uh[ph[this.id]]}
/**
   * Get the style of a fraction denominator given the fraction in the current
   * style.
   */fracDen(){return uh[fh[this.id]]}
/**
   * Get the cramped version of a style (in particular, cramping a cramped style
   * doesn't change the style).
   */cramp(){return uh[mh[this.id]]}
/**
   * Get a text or display version of this style.
   */text(){return uh[gh[this.id]]}
/**
   * Return true if this style is tightly spaced (scriptstyle/scriptscriptstyle)
   */isTight(){return this.size>=2}}var uh=[new ch(0,0,!1),new ch(1,0,!0),new ch(2,1,!1),new ch(3,1,!0),new ch(4,2,!1),new ch(5,2,!0),new ch(6,3,!1),new ch(7,3,!0)],hh=[4,5,4,5,6,7,6,7],dh=[5,5,5,5,7,7,7,7],ph=[2,3,4,5,6,7,6,7],fh=[3,3,5,5,7,7,7,7],mh=[1,1,3,3,5,5,7,7],gh=[0,1,2,3,2,3,2,3],vh={DISPLAY:uh[0],TEXT:uh[2],SCRIPT:uh[4],SCRIPTSCRIPT:uh[6]},yh=[{
// Latin characters beyond the Latin-1 characters we have metrics for.
// Needed for Czech, Hungarian and Turkish text, for example.
name:"latin",blocks:[[256,591],
// Latin Extended-A and Latin Extended-B
[768,879]]},{
// The Cyrillic script used by Russian and related languages.
// A Cyrillic subset used to be supported as explicitly defined
// symbols in symbols.js
name:"cyrillic",blocks:[[1024,1279]]},{
// Armenian
name:"armenian",blocks:[[1328,1423]]},{
// The Brahmic scripts of South and Southeast Asia
// Devanagari (0900097F)
// Bengali (098009FF)
// Gurmukhi (0A000A7F)
// Gujarati (0A800AFF)
// Oriya (0B000B7F)
// Tamil (0B800BFF)
// Telugu (0C000C7F)
// Kannada (0C800CFF)
// Malayalam (0D000D7F)
// Sinhala (0D800DFF)
// Thai (0E000E7F)
// Lao (0E800EFF)
// Tibetan (0F000FFF)
// Myanmar (1000109F)
name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{
// Chinese and Japanese.
// The "k" in cjk is for Korean, but we've separated Korean out
name:"cjk",blocks:[[12288,12543],
// CJK symbols and punctuation, Hiragana, Katakana
[19968,40879],
// CJK ideograms
[65280,65376]]},{
// Korean
name:"hangul",blocks:[[44032,55215]]}];var bh=[];function _h(e){for(var t=0;t<bh.length;t+=2)if(e>=bh[t]&&e<=bh[t+1])return!0;return!1}yh.forEach((e=>e.blocks.forEach((e=>bh.push(...e)))));var wh=80,kh={
// The doubleleftarrow geometry is from glyph U+21D0 in the font KaTeX Main
doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",
// doublerightarrow is from glyph U+21D2 in font KaTeX Main
doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",
// leftarrow is from glyph U+2190 in font KaTeX Main
leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",
// overbrace is from glyphs U+23A9/23A8/23A7 in font KaTeX_Size4-Regular
leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",
// overgroup is from the MnSymbol package (public domain)
leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",
// Harpoons are from glyph U+21BD in font KaTeX Main
leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",
// hook is from glyph U+21A9 in font KaTeX Main
lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",
// tofrom is from glyph U+21C4 in font KaTeX AMS Regular
leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",
// twoheadleftarrow is from glyph U+219E in font KaTeX AMS Regular
twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",
// tilde1 is a modified version of a glyph from the MnSymbol package
tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",
// ditto tilde2, tilde3, & tilde4
tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",
// vec is from glyph U+20D7 in font KaTeX Main
vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",
// widehat1 is a modified version of a glyph from the MnSymbol package
widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",
// ditto widehat2, widehat3, & widehat4
widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",
// widecheck paths are all inverted versions of widehat
widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",
// The next ten paths support reaction arrows from the mhchem package.
// Arrows for \ce{<-->} are offset from xAxis by 0.22ex, per mhchem in LaTeX
// baraboveleftarrow is mostly from glyph U+2190 in font KaTeX Main
baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",
// rightarrowabovebar is mostly from glyph U+2192, KaTeX Main
rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",
// The short left harpoon has 0.5em (i.e. 500 units) kern on the left end.
// Ref from mhchem.sty: \rlap{\raisebox{-.22ex}{$\kern0.5em
baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class xh{
// HtmlDomNode
// Never used; needed for satisfying interface.
constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return oh.contains(this.classes,e)}
/** Convert the fragment into a node. */toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}
/** Convert the fragment into HTML markup. */toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}
/**
   * Converts the math node into a string, similar to innerText. Applies to
   * MathDomNode's only.
   */toText(){return this.children.map((e=>e.toText())).join("")}}var Ch={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Sh={slant:[.25,.25,.25],
// sigma1
space:[0,0,0],
// sigma2
stretch:[0,0,0],
// sigma3
shrink:[0,0,0],
// sigma4
xHeight:[.431,.431,.431],
// sigma5
quad:[1,1.171,1.472],
// sigma6
extraSpace:[0,0,0],
// sigma7
num1:[.677,.732,.925],
// sigma8
num2:[.394,.384,.387],
// sigma9
num3:[.444,.471,.504],
// sigma10
denom1:[.686,.752,1.025],
// sigma11
denom2:[.345,.344,.532],
// sigma12
sup1:[.413,.503,.504],
// sigma13
sup2:[.363,.431,.404],
// sigma14
sup3:[.289,.286,.294],
// sigma15
sub1:[.15,.143,.2],
// sigma16
sub2:[.247,.286,.4],
// sigma17
supDrop:[.386,.353,.494],
// sigma18
subDrop:[.05,.071,.1],
// sigma19
delim1:[2.39,1.7,1.98],
// sigma20
delim2:[1.01,1.157,1.42],
// sigma21
axisHeight:[.25,.25,.25],
// sigma22
// These font metrics are extracted from TeX by using tftopl on cmex10.tfm;
// they correspond to the font parameters of the extension fonts (family 3).
// See the TeXbook, page 441. In AMSTeX, the extension fonts scale; to
// match cmex7, we'd use cmex7.tfm values for script and scriptscript
// values.
defaultRuleThickness:[.04,.049,.049],
// xi8; cmex7: 0.049
bigOpSpacing1:[.111,.111,.111],
// xi9
bigOpSpacing2:[.166,.166,.166],
// xi10
bigOpSpacing3:[.2,.2,.2],
// xi11
bigOpSpacing4:[.6,.611,.611],
// xi12; cmex7: 0.611
bigOpSpacing5:[.1,.143,.143],
// xi13; cmex7: 0.143
// The \sqrt rule width is taken from the height of the surd character.
// Since we use the same font at all sizes, this thickness doesn't scale.
sqrtRuleThickness:[.04,.04,.04],
// This value determines how large a pt is, for metrics which are defined
// in terms of pts.
// This value is also used in katex.scss; if you change it make sure the
// values match.
ptPerEm:[10,10,10],
// The space between adjacent `|` columns in an array definition. From
// `\showthe\doublerulesep` in LaTeX. Equals 2.0 / ptPerEm.
doubleRuleSep:[.2,.2,.2],
// The width of separator lines in {array} environments. From
// `\showthe\arrayrulewidth` in LaTeX. Equals 0.4 / ptPerEm.
arrayRuleWidth:[.04,.04,.04],
// Two values from LaTeX source2e:
fboxsep:[.3,.3,.3],
//        3 pt / ptPerEm
fboxrule:[.04,.04,.04]},Th={
// Latin-1
"":"A","":"D","":"o","":"a","":"d","":"o",
// Cyrillic
"":"A","":"B","":"B","":"F","":"A","":"E","":"K","":"3","":"N","":"N","":"K","":"N","":"M","":"H","":"O","":"N","":"P","":"C","":"T","":"y","":"O","":"X","":"U","":"h","":"W","":"W","":"B","":"X","":"B","":"3","":"X","":"R","":"a","":"b","":"a","":"r","":"y","":"e","":"m","":"e","":"n","":"n","":"n","":"n","":"m","":"n","":"o","":"n","":"p","":"c","":"o","":"y","":"b","":"x","":"n","":"n","":"w","":"w","":"a","":"m","":"a","":"e","":"m","":"r"};function Eh(e,t){Ch[e]=t}function Ih(e,t,n){if(!Ch[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=Ch[t][r];if(!i&&e[0]in Th&&(r=Th[e[0]].charCodeAt(0),i=Ch[t][r]),i||"text"!==n||_h(r)&&(i=Ch[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Ah={};var Dh=[
// Each element contains [textsize, scriptsize, scriptscriptsize].
// The size mappings are taken from TeX with \normalsize=10pt.
[1,1,1],
// size1: [5, 5, 5]              \tiny
[2,1,1],
// size2: [6, 5, 5]
[3,1,1],
// size3: [7, 5, 5]              \scriptsize
[4,2,1],
// size4: [8, 6, 5]              \footnotesize
[5,2,1],
// size5: [9, 6, 5]              \small
[6,3,1],
// size6: [10, 7, 5]             \normalsize
[7,4,2],
// size7: [12, 8, 6]             \large
[8,6,3],
// size8: [14.4, 10, 7]          \Large
[9,7,6],
// size9: [17.28, 12, 10]        \LARGE
[10,8,7],
// size10: [20.74, 14.4, 12]     \huge
[11,10,9]],Bh=[
// fontMetrics.js:getGlobalMetrics also uses size indexes, so if
// you change size indexes, change that function.
.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Lh=function(e,t){return t.size<2?e:Dh[e-1][t.size-1]};class Mh{
// A font family applies to a group of fonts (i.e. SansSerif), while a font
// represents a specific font (i.e. SansSerif Bold).
// See: https://tex.stackexchange.com/questions/22350/difference-between-textrm-and-mathrm
/**
   * The base size index.
   */
constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Mh.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=Bh[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}
/**
   * Returns a new options object with the same properties as "this".  Properties
   * from "extension" will be copied to the new options object.
   */extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new Mh(t)}
/**
   * Return an options object with the given style. If `this.style === style`,
   * returns `this`.
   */havingStyle(e){return this.style===e?this:this.extend({style:e,size:Lh(this.textSize,e)})}
/**
   * Return an options object with a cramped version of the current style. If
   * the current style is cramped, returns `this`.
   */havingCrampedStyle(){return this.havingStyle(this.style.cramp())}
/**
   * Return an options object with the given size and in at least `\textstyle`.
   * Returns `this` if appropriate.
   */havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:Bh[e-1]})}
/**
   * Like `this.havingSize(BASESIZE).havingStyle(style)`. If `style` is omitted,
   * changes to at least `\textstyle`.
   */havingBaseStyle(e){e=e||this.style.text();var t=Lh(Mh.BASESIZE,e);return this.size===t&&this.textSize===Mh.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}
/**
   * Remove the effect of sizing changes such as \Huge.
   * Keep the effect of the current style, such as \scriptstyle.
   */havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}
/**
   * Create a new options object with the given color.
   */withColor(e){return this.extend({color:e})}
/**
   * Create a new options object with "phantom" set to true.
   */withPhantom(){return this.extend({phantom:!0})}
/**
   * Creates a new options object with the given math font or old text font.
   * @type {[type]}
   */withFont(e){return this.extend({font:e})}
/**
   * Create a new options objects with the given fontFamily.
   */withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}
/**
   * Creates a new options object with the given font weight
   */withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}
/**
   * Creates a new options object with the given font weight
   */withTextFontShape(e){return this.extend({fontShape:e,font:""})}
/**
   * Return the CSS sizing classes required to switch from enclosing options
   * `oldOptions` to `this`. Returns an array of classes.
   */sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}
/**
   * Return the CSS sizing classes required to switch to the base size. Like
   * `this.havingSize(BASESIZE).sizingClasses(this)`.
   */baseSizingClasses(){return this.size!==Mh.BASESIZE?["sizing","reset-size"+this.size,"size"+Mh.BASESIZE]:[]}
/**
   * Return the font metrics for this size.
   */fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!Ah[t=e>=5?0:e>=3?1:2]){var n=Ah[t]={cssEmPerMu:Sh.quad[t]/18};for(var r in Sh)Sh.hasOwnProperty(r)&&(n[r]=Sh[r][t])}return Ah[t]}(this.size)),this._fontMetrics}
/**
   * Gets the CSS color of the current options object
   */getColor(){return this.phantom?"transparent":this.color}}Mh.BASESIZE=6;var Fh={
// https://en.wikibooks.org/wiki/LaTeX/Lengths and
// https://tex.stackexchange.com/a/8263
pt:1,
// TeX point
mm:7227/2540,
// millimeter
cm:7227/254,
// centimeter
in:72.27,
// inch
bp:1.00375,
// big (PostScript) points
pc:12,
// pica
dd:1238/1157,
// didot
cc:14856/1157,
// cicero (12 didot)
nd:685/642,
// new didot
nc:1370/107,
// new cicero (12 new didot)
sp:1/65536,
// scaled point (TeX's internal smallest unit)
// https://tex.stackexchange.com/a/41371
px:1.00375},Oh={ex:!0,em:!0,mu:!0},Ph=function(e){return"string"!=typeof e&&(e=e.unit),e in Fh||e in Oh||"ex"===e},Nh=function(e,t){var n;if(e.unit in Fh)n=Fh[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{var r;if(r=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=r.fontMetrics().xHeight;else{if("em"!==e.unit)throw new eh("Invalid unit: '"+e.unit+"'");n=r.fontMetrics().quad}r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},jh=function(e){return+e.toFixed(4)+"em"},zh=function(e){return e.filter((e=>e)).join(" ")},Rh=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},qh=function(e){var t=document.createElement(e);for(var n in t.className=zh(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},$h=/[\s"'>/=\x00-\x1f]/,Uh=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+oh.escape(zh(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=oh.hyphenate(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+oh.escape(n)+'"'),this.attributes)if(this.attributes.hasOwnProperty(i)){if($h.test(i))throw new eh("Invalid attribute name '"+i+"'");t+=" "+i+'="'+oh.escape(this.attributes[i])+'"'}t+=">";for(var o=0;o<this.children.length;o++)t+=this.children[o].toMarkup();return t+="</"+e+">"};class Hh{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Rh.call(this,e,n,r),this.children=t||[]}
/**
   * Sets an arbitrary attribute on the span. Warning: use this wisely. Not
   * all browsers support attributes the same, and having too many custom
   * attributes is probably bad.
   */setAttribute(e,t){this.attributes[e]=t}hasClass(e){return oh.contains(this.classes,e)}toNode(){return qh.call(this,"span")}toMarkup(){return Uh.call(this,"span")}}class Wh{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Rh.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return oh.contains(this.classes,e)}toNode(){return qh.call(this,"a")}toMarkup(){return Uh.call(this,"a")}}class Gh{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return oh.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+oh.escape(this.src)+'" alt="'+oh.escape(this.alt)+'"',t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=oh.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+oh.escape(t)+'"'),e+="'/>"}}var Vh={"":"","":"","":"",
// '': '\u0131\u0304', // enable when we add Extended Latin
"":""};class Yh{constructor(e,t,n,r,i,o,a,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=o||0,this.classes=a||[],this.style=s||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<yh.length;t++)for(var n=yh[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=Vh[this.text])}hasClass(e){return oh.contains(this.classes,e)}
/**
   * Creates a text node or span from a symbol node. Note that a span is only
   * created if it is needed.
   */toNode(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=jh(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=zh(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e}
/**
   * Creates markup for a symbol node.
   */toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=oh.escape(zh(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=oh.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+oh.escape(n)+'"');var i=oh.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class Kh{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+oh.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>"}}class Xh{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",kh[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+oh.escape(this.alternate)+'"/>':'<path d="'+oh.escape(kh[this.pathName])+'"/>'}}class Zh{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+oh.escape(this.attributes[t])+'"');return e+="/>"}}function Jh(e){if(e instanceof Yh)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var Qh={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ed={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},td={math:{},text:{}};function nd(e,t,n,r,i,o){td[e][i]={font:t,group:n,replace:r},o&&r&&(td[e][r]=td[e][i])}var rd="math",id="text",od="main",ad="ams",sd="accent-token",ld="bin",cd="close",ud="inner",hd="mathord",dd="op-token",pd="open",fd="punct",md="rel",gd="spacing",vd="textord";nd(rd,od,md,"","\\equiv",!0),nd(rd,od,md,"","\\prec",!0),nd(rd,od,md,"","\\succ",!0),nd(rd,od,md,"","\\sim",!0),nd(rd,od,md,"","\\perp"),nd(rd,od,md,"","\\preceq",!0),nd(rd,od,md,"","\\succeq",!0),nd(rd,od,md,"","\\simeq",!0),nd(rd,od,md,"","\\mid",!0),nd(rd,od,md,"","\\ll",!0),nd(rd,od,md,"","\\gg",!0),nd(rd,od,md,"","\\asymp",!0),nd(rd,od,md,"","\\parallel"),nd(rd,od,md,"","\\bowtie",!0),nd(rd,od,md,"","\\smile",!0),nd(rd,od,md,"","\\sqsubseteq",!0),nd(rd,od,md,"","\\sqsupseteq",!0),nd(rd,od,md,"","\\doteq",!0),nd(rd,od,md,"","\\frown",!0),nd(rd,od,md,"","\\ni",!0),nd(rd,od,md,"","\\propto",!0),nd(rd,od,md,"","\\vdash",!0),nd(rd,od,md,"","\\dashv",!0),nd(rd,od,md,"","\\owns"),nd(rd,od,fd,".","\\ldotp"),nd(rd,od,fd,"","\\cdotp"),nd(rd,od,vd,"#","\\#"),nd(id,od,vd,"#","\\#"),nd(rd,od,vd,"&","\\&"),nd(id,od,vd,"&","\\&"),nd(rd,od,vd,"","\\aleph",!0),nd(rd,od,vd,"","\\forall",!0),nd(rd,od,vd,"","\\hbar",!0),nd(rd,od,vd,"","\\exists",!0),nd(rd,od,vd,"","\\nabla",!0),nd(rd,od,vd,"","\\flat",!0),nd(rd,od,vd,"","\\ell",!0),nd(rd,od,vd,"","\\natural",!0),nd(rd,od,vd,"","\\clubsuit",!0),nd(rd,od,vd,"","\\wp",!0),nd(rd,od,vd,"","\\sharp",!0),nd(rd,od,vd,"","\\diamondsuit",!0),nd(rd,od,vd,"","\\Re",!0),nd(rd,od,vd,"","\\heartsuit",!0),nd(rd,od,vd,"","\\Im",!0),nd(rd,od,vd,"","\\spadesuit",!0),nd(rd,od,vd,"","\\S",!0),nd(id,od,vd,"","\\S"),nd(rd,od,vd,"","\\P",!0),nd(id,od,vd,"","\\P"),nd(rd,od,vd,"","\\dag"),nd(id,od,vd,"","\\dag"),nd(id,od,vd,"","\\textdagger"),nd(rd,od,vd,"","\\ddag"),nd(id,od,vd,"","\\ddag"),nd(id,od,vd,"","\\textdaggerdbl"),nd(rd,od,cd,"","\\rmoustache",!0),nd(rd,od,pd,"","\\lmoustache",!0),nd(rd,od,cd,"","\\rgroup",!0),nd(rd,od,pd,"","\\lgroup",!0),nd(rd,od,ld,"","\\mp",!0),nd(rd,od,ld,"","\\ominus",!0),nd(rd,od,ld,"","\\uplus",!0),nd(rd,od,ld,"","\\sqcap",!0),nd(rd,od,ld,"","\\ast"),nd(rd,od,ld,"","\\sqcup",!0),nd(rd,od,ld,"","\\bigcirc",!0),nd(rd,od,ld,"","\\bullet",!0),nd(rd,od,ld,"","\\ddagger"),nd(rd,od,ld,"","\\wr",!0),nd(rd,od,ld,"","\\amalg"),nd(rd,od,ld,"&","\\And"),nd(rd,od,md,"","\\longleftarrow",!0),nd(rd,od,md,"","\\Leftarrow",!0),nd(rd,od,md,"","\\Longleftarrow",!0),nd(rd,od,md,"","\\longrightarrow",!0),nd(rd,od,md,"","\\Rightarrow",!0),nd(rd,od,md,"","\\Longrightarrow",!0),nd(rd,od,md,"","\\leftrightarrow",!0),nd(rd,od,md,"","\\longleftrightarrow",!0),nd(rd,od,md,"","\\Leftrightarrow",!0),nd(rd,od,md,"","\\Longleftrightarrow",!0),nd(rd,od,md,"","\\mapsto",!0),nd(rd,od,md,"","\\longmapsto",!0),nd(rd,od,md,"","\\nearrow",!0),nd(rd,od,md,"","\\hookleftarrow",!0),nd(rd,od,md,"","\\hookrightarrow",!0),nd(rd,od,md,"","\\searrow",!0),nd(rd,od,md,"","\\leftharpoonup",!0),nd(rd,od,md,"","\\rightharpoonup",!0),nd(rd,od,md,"","\\swarrow",!0),nd(rd,od,md,"","\\leftharpoondown",!0),nd(rd,od,md,"","\\rightharpoondown",!0),nd(rd,od,md,"","\\nwarrow",!0),nd(rd,od,md,"","\\rightleftharpoons",!0),nd(rd,ad,md,"","\\nless",!0),nd(rd,ad,md,"","\\@nleqslant"),nd(rd,ad,md,"","\\@nleqq"),nd(rd,ad,md,"","\\lneq",!0),nd(rd,ad,md,"","\\lneqq",!0),nd(rd,ad,md,"","\\@lvertneqq"),nd(rd,ad,md,"","\\lnsim",!0),nd(rd,ad,md,"","\\lnapprox",!0),nd(rd,ad,md,"","\\nprec",!0),nd(rd,ad,md,"","\\npreceq",!0),nd(rd,ad,md,"","\\precnsim",!0),nd(rd,ad,md,"","\\precnapprox",!0),nd(rd,ad,md,"","\\nsim",!0),nd(rd,ad,md,"","\\@nshortmid"),nd(rd,ad,md,"","\\nmid",!0),nd(rd,ad,md,"","\\nvdash",!0),nd(rd,ad,md,"","\\nvDash",!0),nd(rd,ad,md,"","\\ntriangleleft"),nd(rd,ad,md,"","\\ntrianglelefteq",!0),nd(rd,ad,md,"","\\subsetneq",!0),nd(rd,ad,md,"","\\@varsubsetneq"),nd(rd,ad,md,"","\\subsetneqq",!0),nd(rd,ad,md,"","\\@varsubsetneqq"),nd(rd,ad,md,"","\\ngtr",!0),nd(rd,ad,md,"","\\@ngeqslant"),nd(rd,ad,md,"","\\@ngeqq"),nd(rd,ad,md,"","\\gneq",!0),nd(rd,ad,md,"","\\gneqq",!0),nd(rd,ad,md,"","\\@gvertneqq"),nd(rd,ad,md,"","\\gnsim",!0),nd(rd,ad,md,"","\\gnapprox",!0),nd(rd,ad,md,"","\\nsucc",!0),nd(rd,ad,md,"","\\nsucceq",!0),nd(rd,ad,md,"","\\succnsim",!0),nd(rd,ad,md,"","\\succnapprox",!0),nd(rd,ad,md,"","\\ncong",!0),nd(rd,ad,md,"","\\@nshortparallel"),nd(rd,ad,md,"","\\nparallel",!0),nd(rd,ad,md,"","\\nVDash",!0),nd(rd,ad,md,"","\\ntriangleright"),nd(rd,ad,md,"","\\ntrianglerighteq",!0),nd(rd,ad,md,"","\\@nsupseteqq"),nd(rd,ad,md,"","\\supsetneq",!0),nd(rd,ad,md,"","\\@varsupsetneq"),nd(rd,ad,md,"","\\supsetneqq",!0),nd(rd,ad,md,"","\\@varsupsetneqq"),nd(rd,ad,md,"","\\nVdash",!0),nd(rd,ad,md,"","\\precneqq",!0),nd(rd,ad,md,"","\\succneqq",!0),nd(rd,ad,md,"","\\@nsubseteqq"),nd(rd,ad,ld,"","\\unlhd"),nd(rd,ad,ld,"","\\unrhd"),nd(rd,ad,md,"","\\nleftarrow",!0),nd(rd,ad,md,"","\\nrightarrow",!0),nd(rd,ad,md,"","\\nLeftarrow",!0),nd(rd,ad,md,"","\\nRightarrow",!0),nd(rd,ad,md,"","\\nleftrightarrow",!0),nd(rd,ad,md,"","\\nLeftrightarrow",!0),nd(rd,ad,md,"","\\vartriangle"),nd(rd,ad,vd,"","\\hslash"),nd(rd,ad,vd,"","\\triangledown"),nd(rd,ad,vd,"","\\lozenge"),nd(rd,ad,vd,"","\\circledS"),nd(rd,ad,vd,"","\\circledR"),nd(id,ad,vd,"","\\circledR"),nd(rd,ad,vd,"","\\measuredangle",!0),nd(rd,ad,vd,"","\\nexists"),nd(rd,ad,vd,"","\\mho"),nd(rd,ad,vd,"","\\Finv",!0),nd(rd,ad,vd,"","\\Game",!0),nd(rd,ad,vd,"","\\backprime"),nd(rd,ad,vd,"","\\blacktriangle"),nd(rd,ad,vd,"","\\blacktriangledown"),nd(rd,ad,vd,"","\\blacksquare"),nd(rd,ad,vd,"","\\blacklozenge"),nd(rd,ad,vd,"","\\bigstar"),nd(rd,ad,vd,"","\\sphericalangle",!0),nd(rd,ad,vd,"","\\complement",!0),nd(rd,ad,vd,"","\\eth",!0),nd(id,od,vd,"",""),nd(rd,ad,vd,"","\\diagup"),nd(rd,ad,vd,"","\\diagdown"),nd(rd,ad,vd,"","\\square"),nd(rd,ad,vd,"","\\Box"),nd(rd,ad,vd,"","\\Diamond"),nd(rd,ad,vd,"","\\yen",!0),nd(id,ad,vd,"","\\yen",!0),nd(rd,ad,vd,"","\\checkmark",!0),nd(id,ad,vd,"","\\checkmark"),nd(rd,ad,vd,"","\\beth",!0),nd(rd,ad,vd,"","\\daleth",!0),nd(rd,ad,vd,"","\\gimel",!0),nd(rd,ad,vd,"","\\digamma",!0),nd(rd,ad,vd,"","\\varkappa"),nd(rd,ad,pd,"","\\@ulcorner",!0),nd(rd,ad,cd,"","\\@urcorner",!0),nd(rd,ad,pd,"","\\@llcorner",!0),nd(rd,ad,cd,"","\\@lrcorner",!0),nd(rd,ad,md,"","\\leqq",!0),nd(rd,ad,md,"","\\leqslant",!0),nd(rd,ad,md,"","\\eqslantless",!0),nd(rd,ad,md,"","\\lesssim",!0),nd(rd,ad,md,"","\\lessapprox",!0),nd(rd,ad,md,"","\\approxeq",!0),nd(rd,ad,ld,"","\\lessdot"),nd(rd,ad,md,"","\\lll",!0),nd(rd,ad,md,"","\\lessgtr",!0),nd(rd,ad,md,"","\\lesseqgtr",!0),nd(rd,ad,md,"","\\lesseqqgtr",!0),nd(rd,ad,md,"","\\doteqdot"),nd(rd,ad,md,"","\\risingdotseq",!0),nd(rd,ad,md,"","\\fallingdotseq",!0),nd(rd,ad,md,"","\\backsim",!0),nd(rd,ad,md,"","\\backsimeq",!0),nd(rd,ad,md,"","\\subseteqq",!0),nd(rd,ad,md,"","\\Subset",!0),nd(rd,ad,md,"","\\sqsubset",!0),nd(rd,ad,md,"","\\preccurlyeq",!0),nd(rd,ad,md,"","\\curlyeqprec",!0),nd(rd,ad,md,"","\\precsim",!0),nd(rd,ad,md,"","\\precapprox",!0),nd(rd,ad,md,"","\\vartriangleleft"),nd(rd,ad,md,"","\\trianglelefteq"),nd(rd,ad,md,"","\\vDash",!0),nd(rd,ad,md,"","\\Vvdash",!0),nd(rd,ad,md,"","\\smallsmile"),nd(rd,ad,md,"","\\smallfrown"),nd(rd,ad,md,"","\\bumpeq",!0),nd(rd,ad,md,"","\\Bumpeq",!0),nd(rd,ad,md,"","\\geqq",!0),nd(rd,ad,md,"","\\geqslant",!0),nd(rd,ad,md,"","\\eqslantgtr",!0),nd(rd,ad,md,"","\\gtrsim",!0),nd(rd,ad,md,"","\\gtrapprox",!0),nd(rd,ad,ld,"","\\gtrdot"),nd(rd,ad,md,"","\\ggg",!0),nd(rd,ad,md,"","\\gtrless",!0),nd(rd,ad,md,"","\\gtreqless",!0),nd(rd,ad,md,"","\\gtreqqless",!0),nd(rd,ad,md,"","\\eqcirc",!0),nd(rd,ad,md,"","\\circeq",!0),nd(rd,ad,md,"","\\triangleq",!0),nd(rd,ad,md,"","\\thicksim"),nd(rd,ad,md,"","\\thickapprox"),nd(rd,ad,md,"","\\supseteqq",!0),nd(rd,ad,md,"","\\Supset",!0),nd(rd,ad,md,"","\\sqsupset",!0),nd(rd,ad,md,"","\\succcurlyeq",!0),nd(rd,ad,md,"","\\curlyeqsucc",!0),nd(rd,ad,md,"","\\succsim",!0),nd(rd,ad,md,"","\\succapprox",!0),nd(rd,ad,md,"","\\vartriangleright"),nd(rd,ad,md,"","\\trianglerighteq"),nd(rd,ad,md,"","\\Vdash",!0),nd(rd,ad,md,"","\\shortmid"),nd(rd,ad,md,"","\\shortparallel"),nd(rd,ad,md,"","\\between",!0),nd(rd,ad,md,"","\\pitchfork",!0),nd(rd,ad,md,"","\\varpropto"),nd(rd,ad,md,"","\\blacktriangleleft"),nd(rd,ad,md,"","\\therefore",!0),nd(rd,ad,md,"","\\backepsilon"),nd(rd,ad,md,"","\\blacktriangleright"),nd(rd,ad,md,"","\\because",!0),nd(rd,ad,md,"","\\llless"),nd(rd,ad,md,"","\\gggtr"),nd(rd,ad,ld,"","\\lhd"),nd(rd,ad,ld,"","\\rhd"),nd(rd,ad,md,"","\\eqsim",!0),nd(rd,od,md,"","\\Join"),nd(rd,ad,md,"","\\Doteq",!0),nd(rd,ad,ld,"","\\dotplus",!0),nd(rd,ad,ld,"","\\smallsetminus"),nd(rd,ad,ld,"","\\Cap",!0),nd(rd,ad,ld,"","\\Cup",!0),nd(rd,ad,ld,"","\\doublebarwedge",!0),nd(rd,ad,ld,"","\\boxminus",!0),nd(rd,ad,ld,"","\\boxplus",!0),nd(rd,ad,ld,"","\\divideontimes",!0),nd(rd,ad,ld,"","\\ltimes",!0),nd(rd,ad,ld,"","\\rtimes",!0),nd(rd,ad,ld,"","\\leftthreetimes",!0),nd(rd,ad,ld,"","\\rightthreetimes",!0),nd(rd,ad,ld,"","\\curlywedge",!0),nd(rd,ad,ld,"","\\curlyvee",!0),nd(rd,ad,ld,"","\\circleddash",!0),nd(rd,ad,ld,"","\\circledast",!0),nd(rd,ad,ld,"","\\centerdot"),nd(rd,ad,ld,"","\\intercal",!0),nd(rd,ad,ld,"","\\doublecap"),nd(rd,ad,ld,"","\\doublecup"),nd(rd,ad,ld,"","\\boxtimes",!0),nd(rd,ad,md,"","\\dashrightarrow",!0),nd(rd,ad,md,"","\\dashleftarrow",!0),nd(rd,ad,md,"","\\leftleftarrows",!0),nd(rd,ad,md,"","\\leftrightarrows",!0),nd(rd,ad,md,"","\\Lleftarrow",!0),nd(rd,ad,md,"","\\twoheadleftarrow",!0),nd(rd,ad,md,"","\\leftarrowtail",!0),nd(rd,ad,md,"","\\looparrowleft",!0),nd(rd,ad,md,"","\\leftrightharpoons",!0),nd(rd,ad,md,"","\\curvearrowleft",!0),nd(rd,ad,md,"","\\circlearrowleft",!0),nd(rd,ad,md,"","\\Lsh",!0),nd(rd,ad,md,"","\\upuparrows",!0),nd(rd,ad,md,"","\\upharpoonleft",!0),nd(rd,ad,md,"","\\downharpoonleft",!0),nd(rd,od,md,"","\\origof",!0),nd(rd,od,md,"","\\imageof",!0),nd(rd,ad,md,"","\\multimap",!0),nd(rd,ad,md,"","\\leftrightsquigarrow",!0),nd(rd,ad,md,"","\\rightrightarrows",!0),nd(rd,ad,md,"","\\rightleftarrows",!0),nd(rd,ad,md,"","\\twoheadrightarrow",!0),nd(rd,ad,md,"","\\rightarrowtail",!0),nd(rd,ad,md,"","\\looparrowright",!0),nd(rd,ad,md,"","\\curvearrowright",!0),nd(rd,ad,md,"","\\circlearrowright",!0),nd(rd,ad,md,"","\\Rsh",!0),nd(rd,ad,md,"","\\downdownarrows",!0),nd(rd,ad,md,"","\\upharpoonright",!0),nd(rd,ad,md,"","\\downharpoonright",!0),nd(rd,ad,md,"","\\rightsquigarrow",!0),nd(rd,ad,md,"","\\leadsto"),nd(rd,ad,md,"","\\Rrightarrow",!0),nd(rd,ad,md,"","\\restriction"),nd(rd,od,vd,"","`"),nd(rd,od,vd,"$","\\$"),nd(id,od,vd,"$","\\$"),nd(id,od,vd,"$","\\textdollar"),nd(rd,od,vd,"%","\\%"),nd(id,od,vd,"%","\\%"),nd(rd,od,vd,"_","\\_"),nd(id,od,vd,"_","\\_"),nd(id,od,vd,"_","\\textunderscore"),nd(rd,od,vd,"","\\angle",!0),nd(rd,od,vd,"","\\infty",!0),nd(rd,od,vd,"","\\prime"),nd(rd,od,vd,"","\\triangle"),nd(rd,od,vd,"","\\Gamma",!0),nd(rd,od,vd,"","\\Delta",!0),nd(rd,od,vd,"","\\Theta",!0),nd(rd,od,vd,"","\\Lambda",!0),nd(rd,od,vd,"","\\Xi",!0),nd(rd,od,vd,"","\\Pi",!0),nd(rd,od,vd,"","\\Sigma",!0),nd(rd,od,vd,"","\\Upsilon",!0),nd(rd,od,vd,"","\\Phi",!0),nd(rd,od,vd,"","\\Psi",!0),nd(rd,od,vd,"","\\Omega",!0),nd(rd,od,vd,"A",""),nd(rd,od,vd,"B",""),nd(rd,od,vd,"E",""),nd(rd,od,vd,"Z",""),nd(rd,od,vd,"H",""),nd(rd,od,vd,"I",""),nd(rd,od,vd,"K",""),nd(rd,od,vd,"M",""),nd(rd,od,vd,"N",""),nd(rd,od,vd,"O",""),nd(rd,od,vd,"P",""),nd(rd,od,vd,"T",""),nd(rd,od,vd,"X",""),nd(rd,od,vd,"","\\neg",!0),nd(rd,od,vd,"","\\lnot"),nd(rd,od,vd,"","\\top"),nd(rd,od,vd,"","\\bot"),nd(rd,od,vd,"","\\emptyset"),nd(rd,ad,vd,"","\\varnothing"),nd(rd,od,hd,"","\\alpha",!0),nd(rd,od,hd,"","\\beta",!0),nd(rd,od,hd,"","\\gamma",!0),nd(rd,od,hd,"","\\delta",!0),nd(rd,od,hd,"","\\epsilon",!0),nd(rd,od,hd,"","\\zeta",!0),nd(rd,od,hd,"","\\eta",!0),nd(rd,od,hd,"","\\theta",!0),nd(rd,od,hd,"","\\iota",!0),nd(rd,od,hd,"","\\kappa",!0),nd(rd,od,hd,"","\\lambda",!0),nd(rd,od,hd,"","\\mu",!0),nd(rd,od,hd,"","\\nu",!0),nd(rd,od,hd,"","\\xi",!0),nd(rd,od,hd,"","\\omicron",!0),nd(rd,od,hd,"","\\pi",!0),nd(rd,od,hd,"","\\rho",!0),nd(rd,od,hd,"","\\sigma",!0),nd(rd,od,hd,"","\\tau",!0),nd(rd,od,hd,"","\\upsilon",!0),nd(rd,od,hd,"","\\phi",!0),nd(rd,od,hd,"","\\chi",!0),nd(rd,od,hd,"","\\psi",!0),nd(rd,od,hd,"","\\omega",!0),nd(rd,od,hd,"","\\varepsilon",!0),nd(rd,od,hd,"","\\vartheta",!0),nd(rd,od,hd,"","\\varpi",!0),nd(rd,od,hd,"","\\varrho",!0),nd(rd,od,hd,"","\\varsigma",!0),nd(rd,od,hd,"","\\varphi",!0),nd(rd,od,ld,"","*",!0),nd(rd,od,ld,"+","+"),nd(rd,od,ld,"","-",!0),nd(rd,od,ld,"","\\cdot",!0),nd(rd,od,ld,"","\\circ",!0),nd(rd,od,ld,"","\\div",!0),nd(rd,od,ld,"","\\pm",!0),nd(rd,od,ld,"","\\times",!0),nd(rd,od,ld,"","\\cap",!0),nd(rd,od,ld,"","\\cup",!0),nd(rd,od,ld,"","\\setminus",!0),nd(rd,od,ld,"","\\land"),nd(rd,od,ld,"","\\lor"),nd(rd,od,ld,"","\\wedge",!0),nd(rd,od,ld,"","\\vee",!0),nd(rd,od,vd,"","\\surd"),nd(rd,od,pd,"","\\langle",!0),nd(rd,od,pd,"","\\lvert"),nd(rd,od,pd,"","\\lVert"),nd(rd,od,cd,"?","?"),nd(rd,od,cd,"!","!"),nd(rd,od,cd,"","\\rangle",!0),nd(rd,od,cd,"","\\rvert"),nd(rd,od,cd,"","\\rVert"),nd(rd,od,md,"=","="),nd(rd,od,md,":",":"),nd(rd,od,md,"","\\approx",!0),nd(rd,od,md,"","\\cong",!0),nd(rd,od,md,"","\\ge"),nd(rd,od,md,"","\\geq",!0),nd(rd,od,md,"","\\gets"),nd(rd,od,md,">","\\gt",!0),nd(rd,od,md,"","\\in",!0),nd(rd,od,md,"","\\@not"),nd(rd,od,md,"","\\subset",!0),nd(rd,od,md,"","\\supset",!0),nd(rd,od,md,"","\\subseteq",!0),nd(rd,od,md,"","\\supseteq",!0),nd(rd,ad,md,"","\\nsubseteq",!0),nd(rd,ad,md,"","\\nsupseteq",!0),nd(rd,od,md,"","\\models"),nd(rd,od,md,"","\\leftarrow",!0),nd(rd,od,md,"","\\le"),nd(rd,od,md,"","\\leq",!0),nd(rd,od,md,"<","\\lt",!0),nd(rd,od,md,"","\\rightarrow",!0),nd(rd,od,md,"","\\to"),nd(rd,ad,md,"","\\ngeq",!0),nd(rd,ad,md,"","\\nleq",!0),nd(rd,od,gd,"","\\ "),nd(rd,od,gd,"","\\space"),nd(rd,od,gd,"","\\nobreakspace"),nd(id,od,gd,"","\\ "),nd(id,od,gd,""," "),nd(id,od,gd,"","\\space"),nd(id,od,gd,"","\\nobreakspace"),nd(rd,od,gd,null,"\\nobreak"),nd(rd,od,gd,null,"\\allowbreak"),nd(rd,od,fd,",",","),nd(rd,od,fd,";",";"),nd(rd,ad,ld,"","\\barwedge",!0),nd(rd,ad,ld,"","\\veebar",!0),nd(rd,od,ld,"","\\odot",!0),nd(rd,od,ld,"","\\oplus",!0),nd(rd,od,ld,"","\\otimes",!0),nd(rd,od,vd,"","\\partial",!0),nd(rd,od,ld,"","\\oslash",!0),nd(rd,ad,ld,"","\\circledcirc",!0),nd(rd,ad,ld,"","\\boxdot",!0),nd(rd,od,ld,"","\\bigtriangleup"),nd(rd,od,ld,"","\\bigtriangledown"),nd(rd,od,ld,"","\\dagger"),nd(rd,od,ld,"","\\diamond"),nd(rd,od,ld,"","\\star"),nd(rd,od,ld,"","\\triangleleft"),nd(rd,od,ld,"","\\triangleright"),nd(rd,od,pd,"{","\\{"),nd(id,od,vd,"{","\\{"),nd(id,od,vd,"{","\\textbraceleft"),nd(rd,od,cd,"}","\\}"),nd(id,od,vd,"}","\\}"),nd(id,od,vd,"}","\\textbraceright"),nd(rd,od,pd,"{","\\lbrace"),nd(rd,od,cd,"}","\\rbrace"),nd(rd,od,pd,"[","\\lbrack",!0),nd(id,od,vd,"[","\\lbrack",!0),nd(rd,od,cd,"]","\\rbrack",!0),nd(id,od,vd,"]","\\rbrack",!0),nd(rd,od,pd,"(","\\lparen",!0),nd(rd,od,cd,")","\\rparen",!0),nd(id,od,vd,"<","\\textless",!0),nd(id,od,vd,">","\\textgreater",!0),nd(rd,od,pd,"","\\lfloor",!0),nd(rd,od,cd,"","\\rfloor",!0),nd(rd,od,pd,"","\\lceil",!0),nd(rd,od,cd,"","\\rceil",!0),nd(rd,od,vd,"\\","\\backslash"),nd(rd,od,vd,"","|"),nd(rd,od,vd,"","\\vert"),nd(id,od,vd,"|","\\textbar",!0),nd(rd,od,vd,"","\\|"),nd(rd,od,vd,"","\\Vert"),nd(id,od,vd,"","\\textbardbl"),nd(id,od,vd,"~","\\textasciitilde"),nd(id,od,vd,"\\","\\textbackslash"),nd(id,od,vd,"^","\\textasciicircum"),nd(rd,od,md,"","\\uparrow",!0),nd(rd,od,md,"","\\Uparrow",!0),nd(rd,od,md,"","\\downarrow",!0),nd(rd,od,md,"","\\Downarrow",!0),nd(rd,od,md,"","\\updownarrow",!0),nd(rd,od,md,"","\\Updownarrow",!0),nd(rd,od,dd,"","\\coprod"),nd(rd,od,dd,"","\\bigvee"),nd(rd,od,dd,"","\\bigwedge"),nd(rd,od,dd,"","\\biguplus"),nd(rd,od,dd,"","\\bigcap"),nd(rd,od,dd,"","\\bigcup"),nd(rd,od,dd,"","\\int"),nd(rd,od,dd,"","\\intop"),nd(rd,od,dd,"","\\iint"),nd(rd,od,dd,"","\\iiint"),nd(rd,od,dd,"","\\prod"),nd(rd,od,dd,"","\\sum"),nd(rd,od,dd,"","\\bigotimes"),nd(rd,od,dd,"","\\bigoplus"),nd(rd,od,dd,"","\\bigodot"),nd(rd,od,dd,"","\\oint"),nd(rd,od,dd,"","\\oiint"),nd(rd,od,dd,"","\\oiiint"),nd(rd,od,dd,"","\\bigsqcup"),nd(rd,od,dd,"","\\smallint"),nd(id,od,ud,"","\\textellipsis"),nd(rd,od,ud,"","\\mathellipsis"),nd(id,od,ud,"","\\ldots",!0),nd(rd,od,ud,"","\\ldots",!0),nd(rd,od,ud,"","\\@cdots",!0),nd(rd,od,ud,"","\\ddots",!0),nd(rd,od,vd,"","\\varvdots"),nd(id,od,vd,"","\\varvdots"),nd(rd,od,sd,"","\\acute"),nd(rd,od,sd,"","\\grave"),nd(rd,od,sd,"","\\ddot"),nd(rd,od,sd,"~","\\tilde"),nd(rd,od,sd,"","\\bar"),nd(rd,od,sd,"","\\breve"),nd(rd,od,sd,"","\\check"),nd(rd,od,sd,"^","\\hat"),nd(rd,od,sd,"","\\vec"),nd(rd,od,sd,"","\\dot"),nd(rd,od,sd,"","\\mathring"),nd(rd,od,hd,"","\\@imath"),nd(rd,od,hd,"","\\@jmath"),nd(rd,od,vd,"",""),nd(rd,od,vd,"",""),nd(id,od,vd,"","\\i",!0),nd(id,od,vd,"","\\j",!0),nd(id,od,vd,"","\\ss",!0),nd(id,od,vd,"","\\ae",!0),nd(id,od,vd,"","\\oe",!0),nd(id,od,vd,"","\\o",!0),nd(id,od,vd,"","\\AE",!0),nd(id,od,vd,"","\\OE",!0),nd(id,od,vd,"","\\O",!0),nd(id,od,sd,"","\\'"),nd(id,od,sd,"","\\`"),nd(id,od,sd,"","\\^"),nd(id,od,sd,"","\\~"),nd(id,od,sd,"","\\="),nd(id,od,sd,"","\\u"),nd(id,od,sd,"","\\."),nd(id,od,sd,"","\\c"),nd(id,od,sd,"","\\r"),nd(id,od,sd,"","\\v"),nd(id,od,sd,"",'\\"'),nd(id,od,sd,"","\\H"),nd(id,od,sd,"","\\textcircled");var yd={"--":!0,"---":!0,"``":!0,"''":!0};nd(id,od,vd,"","--",!0),nd(id,od,vd,"","\\textendash"),nd(id,od,vd,"","---",!0),nd(id,od,vd,"","\\textemdash"),nd(id,od,vd,"","`",!0),nd(id,od,vd,"","\\textquoteleft"),nd(id,od,vd,"","'",!0),nd(id,od,vd,"","\\textquoteright"),nd(id,od,vd,"","``",!0),nd(id,od,vd,"","\\textquotedblleft"),nd(id,od,vd,"","''",!0),nd(id,od,vd,"","\\textquotedblright"),nd(rd,od,vd,"","\\degree",!0),nd(id,od,vd,"","\\degree"),nd(id,od,vd,"","\\textdegree",!0),nd(rd,od,vd,"","\\pounds"),nd(rd,od,vd,"","\\mathsterling",!0),nd(id,od,vd,"","\\pounds"),nd(id,od,vd,"","\\textsterling",!0),nd(rd,ad,vd,"","\\maltese"),nd(id,ad,vd,"","\\maltese");for(var bd='0123456789/@."',_d=0;_d<14;_d++){var wd=bd.charAt(_d);nd(rd,od,vd,wd,wd)}for(var kd='0123456789!@*()-=+";:?/.,',xd=0;xd<25;xd++){var Cd=kd.charAt(xd);nd(id,od,vd,Cd,Cd)}for(var Sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Td=0;Td<52;Td++){var Ed=Sd.charAt(Td);nd(rd,od,hd,Ed,Ed),nd(id,od,vd,Ed,Ed)}nd(rd,ad,vd,"C",""),nd(id,ad,vd,"C",""),nd(rd,ad,vd,"H",""),nd(id,ad,vd,"H",""),nd(rd,ad,vd,"N",""),nd(id,ad,vd,"N",""),nd(rd,ad,vd,"P",""),nd(id,ad,vd,"P",""),nd(rd,ad,vd,"Q",""),nd(id,ad,vd,"Q",""),nd(rd,ad,vd,"R",""),nd(id,ad,vd,"R",""),nd(rd,ad,vd,"Z",""),nd(id,ad,vd,"Z",""),nd(rd,od,hd,"h",""),nd(id,od,hd,"h","");for(var Id="",Ad=0;Ad<52;Ad++){var Dd=Sd.charAt(Ad);nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56320+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56372+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56424+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56580+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56684+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56736+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56788+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56840+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56944+Ad)),nd(id,od,vd,Dd,Id),Ad<26&&(nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56632+Ad)),nd(id,od,vd,Dd,Id),nd(rd,od,hd,Dd,Id=String.fromCharCode(55349,56476+Ad)),nd(id,od,vd,Dd,Id))}nd(rd,od,hd,"k",Id=String.fromCharCode(55349,56668)),nd(id,od,vd,"k",Id);for(var Bd=0;Bd<10;Bd++){var Ld=Bd.toString();nd(rd,od,hd,Ld,Id=String.fromCharCode(55349,57294+Bd)),nd(id,od,vd,Ld,Id),nd(rd,od,hd,Ld,Id=String.fromCharCode(55349,57314+Bd)),nd(id,od,vd,Ld,Id),nd(rd,od,hd,Ld,Id=String.fromCharCode(55349,57324+Bd)),nd(id,od,vd,Ld,Id),nd(rd,od,hd,Ld,Id=String.fromCharCode(55349,57334+Bd)),nd(id,od,vd,Ld,Id)}for(var Md="",Fd=0;Fd<3;Fd++){var Od=Md.charAt(Fd);nd(rd,od,hd,Od,Od),nd(id,od,vd,Od,Od)}var Pd=[["mathbf","textbf","Main-Bold"],
// A-Z bold upright
["mathbf","textbf","Main-Bold"],
// a-z bold upright
["mathnormal","textit","Math-Italic"],
// A-Z italic
["mathnormal","textit","Math-Italic"],
// a-z italic
["boldsymbol","boldsymbol","Main-BoldItalic"],
// A-Z bold italic
["boldsymbol","boldsymbol","Main-BoldItalic"],
// a-z bold italic
// Map fancy A-Z letters to script, not calligraphic.
// This aligns with unicode-math and math fonts (except Cambria Math).
["mathscr","textscr","Script-Regular"],
// A-Z script
["","",""],
// a-z script.  No font
["","",""],
// A-Z bold script. No font
["","",""],
// a-z bold script. No font
["mathfrak","textfrak","Fraktur-Regular"],
// A-Z Fraktur
["mathfrak","textfrak","Fraktur-Regular"],
// a-z Fraktur
["mathbb","textbb","AMS-Regular"],
// A-Z double-struck
["mathbb","textbb","AMS-Regular"],
// k double-struck
// Note that we are using a bold font, but font metrics for regular Fraktur.
["mathboldfrak","textboldfrak","Fraktur-Regular"],
// A-Z bold Fraktur
["mathboldfrak","textboldfrak","Fraktur-Regular"],
// a-z bold Fraktur
["mathsf","textsf","SansSerif-Regular"],
// A-Z sans-serif
["mathsf","textsf","SansSerif-Regular"],
// a-z sans-serif
["mathboldsf","textboldsf","SansSerif-Bold"],
// A-Z bold sans-serif
["mathboldsf","textboldsf","SansSerif-Bold"],
// a-z bold sans-serif
["mathitsf","textitsf","SansSerif-Italic"],
// A-Z italic sans-serif
["mathitsf","textitsf","SansSerif-Italic"],
// a-z italic sans-serif
["","",""],
// A-Z bold italic sans. No font
["","",""],
// a-z bold italic sans. No font
["mathtt","texttt","Typewriter-Regular"],
// A-Z monospace
["mathtt","texttt","Typewriter-Regular"]],Nd=[["mathbf","textbf","Main-Bold"],
// 0-9 bold
["","",""],
// 0-9 double-struck. No KaTeX font.
["mathsf","textsf","SansSerif-Regular"],
// 0-9 sans-serif
["mathboldsf","textboldsf","SansSerif-Bold"],
// 0-9 bold sans-serif
["mathtt","texttt","Typewriter-Regular"]],jd=function(e,t,n){return td[n][e]&&td[n][e].replace&&(e=td[n][e].replace),{value:e,metrics:Ih(e,t,n)}},zd=function(e,t,n,r,i){var o,a=jd(e,t,n),s=a.metrics;if(e=a.value,s){var l=s.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),o=new Yh(e,s.height,s.depth,l,s.skew,s.width,i)}else o=new Yh(e,0,0,0,0,0,i);if(r){o.maxFontSize=r.sizeMultiplier,r.style.isTight()&&o.classes.push("mtight");var c=r.getColor();c&&(o.style.color=c)}return o},Rd=(e,t)=>{if(zh(e.classes)!==zh(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var n=e.classes[0];if("mbin"===n||"mord"===n)return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},qd=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>t&&(t=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},$d=function(e,t,n,r){var i=new Hh(e,t,n,r);return qd(i),i},Ud=(e,t,n,r)=>new Hh(e,t,n,r),Hd=function(e){var t=new xh(e);return qd(t),t},Wd=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Gd={
// styles
mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},
// "boldsymbol" is missing because they require the use of multiple fonts:
// Math-BoldItalic and Main-Bold.  This is handled by a special case in
// makeOrd which ends up calling boldsymbol.
// families
mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Vd={
//   path, width, height
vec:["vec",.471,.714],
// values from the font glyph
oiintSize1:["oiintSize1",.957,.499],
// oval to overlay the integrand
oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Yd={fontMap:Gd,makeSymbol:zd,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&jd(e,"Main-Bold",t).metrics?zd(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===td[t][e].font?zd(e,"Main-Regular",t,n,r):zd(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:$d,makeSvgSpan:Ud,makeLineSpan:function(e,t,n){var r=$d([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=jh(r.height),r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new Wh(e,t,n,r);return qd(i),i},makeFragment:Hd,wrapFragment:function(e,t){return e instanceof xh?$d([],[e],t):e},makeVList:function(e,t){for(var{children:n,depth:r}=function(e){if("individualShift"===e.positionType){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,i=r,o=1;o<t.length;o++){var a=-t[o].shift-i-t[o].elem.depth,s=a-(t[o-1].elem.height+t[o-1].elem.depth);i+=a,n.push({type:"kern",size:s}),n.push(t[o])}return{children:n,depth:r}}var l;if("top"===e.positionType){for(var c=e.positionData,u=0;u<e.children.length;u++){var h=e.children[u];c-="kern"===h.type?h.size:h.elem.height+h.elem.depth}l=c}else if("bottom"===e.positionType)l=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-d.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-d.elem.depth}}return{children:e.children,depth:l}}(e),i=0,o=0;o<n.length;o++){var a=n[o];if("elem"===a.type){var s=a.elem;i=Math.max(i,s.maxFontSize,s.height)}}i+=2;var l=$d(["pstrut"],[]);l.style.height=jh(i);for(var c=[],u=r,h=r,d=r,p=0;p<n.length;p++){var f=n[p];if("kern"===f.type)d+=f.size;else{var m=f.elem,g=f.wrapperClasses||[],v=f.wrapperStyle||{},y=$d(g,[l,m],void 0,v);y.style.top=jh(-i-d-m.depth),f.marginLeft&&(y.style.marginLeft=f.marginLeft),f.marginRight&&(y.style.marginRight=f.marginRight),c.push(y),d+=m.height+m.depth}u=Math.min(u,d),h=Math.max(h,d)}var b,_=$d(["vlist"],c);if(_.style.height=jh(h),u<0){var w=$d([],[]),k=$d(["vlist"],[w]);k.style.height=jh(-u);var x=$d(["vlist-s"],[new Yh("")]);b=[$d(["vlist-r"],[_,x]),$d(["vlist-r"],[k])]}else b=[$d(["vlist-r"],[_])];var C=$d(["vlist-t"],b);return 2===b.length&&C.classes.push("vlist-t2"),C.height=h,C.depth=-u,C},makeOrd:function(e,t,n){var r=e.mode,i=e.text,o=["mord"],a="math"===r||"text"===r&&t.font,s=a?t.font:t.fontFamily,l="",c="";if(55349===i.charCodeAt(0)&&([l,c]=function(e,t){var n=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,r="math"===t?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[Pd[i][2],Pd[i][r]]}if(120782<=n&&n<=120831){var o=Math.floor((n-120782)/10);return[Nd[o][2],Nd[o][r]]}if(120485===n||120486===n)return[Pd[0][2],Pd[0][r]];if(120486<n&&n<120782)return["",""];throw new eh("Unsupported character: "+e)}(i,r)),l.length>0)return zd(i,l,r,t,o.concat(c));if(s){var u,h;if("boldsymbol"===s){var d=function(e,t,n,r,i){return"textord"!==i&&jd(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(i,r,0,0,n);u=d.fontName,h=[d.fontClass]}else a?(u=Gd[s].fontName,h=[s]):(u=Wd(s,t.fontWeight,t.fontShape),h=[s,t.fontWeight,t.fontShape]);if(jd(i,u,r).metrics)return zd(i,u,r,t,o.concat(h));if(yd.hasOwnProperty(i)&&"Typewriter"===u.slice(0,10)){for(var p=[],f=0;f<i.length;f++)p.push(zd(i[f],u,r,t,o.concat(h)));return Hd(p)}}if("mathord"===n)return zd(i,"Math-Italic",r,t,o.concat(["mathnormal"]));if("textord"===n){var m=td[r][i]&&td[r][i].font;if("ams"===m){var g=Wd("amsrm",t.fontWeight,t.fontShape);return zd(i,g,r,t,o.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==m&&m){var v=Wd(m,t.fontWeight,t.fontShape);return zd(i,v,r,t,o.concat(v,t.fontWeight,t.fontShape))}var y=Wd("textrm",t.fontWeight,t.fontShape);return zd(i,y,r,t,o.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:(e,t)=>{var n=$d(["mspace"],[],t),r=Nh(e,t);return n.style.marginRight=jh(r),n},staticSvg:function(e,t){var[n,r,i]=Vd[e],o=new Xh(n),a=new Kh([o],{width:jh(r),height:jh(i),
// Override CSS rule `.katex svg { width: 100% }`
style:"width:"+jh(r),viewBox:"0 0 "+1e3*r+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),s=Ud(["overlay"],[a],t);return s.height=i,s.style.height=jh(i),s.style.width=jh(r),s},svgData:Vd,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof Yh&&r instanceof Yh&&Rd(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}},Kd={number:3,unit:"mu"},Xd={number:4,unit:"mu"},Zd={number:5,unit:"mu"},Jd={mord:{mop:Kd,mbin:Xd,mrel:Zd,minner:Kd},mop:{mord:Kd,mop:Kd,mrel:Zd,minner:Kd},mbin:{mord:Xd,mop:Xd,mopen:Xd,minner:Xd},mrel:{mord:Zd,mop:Zd,mopen:Zd,minner:Zd},mopen:{},mclose:{mop:Kd,mbin:Xd,mrel:Zd,minner:Kd},mpunct:{mord:Kd,mop:Kd,mrel:Zd,mopen:Kd,mclose:Kd,mpunct:Kd,minner:Kd},minner:{mord:Kd,mop:Kd,mbin:Xd,mrel:Zd,mopen:Kd,mpunct:Kd,minner:Kd}},Qd={mord:{mop:Kd},mop:{mord:Kd,mop:Kd},mbin:{},mrel:{},mopen:{},mclose:{mop:Kd},mpunct:{},minner:{mop:Kd}},ep={},tp={},np={};function rp(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:a}=e,s={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)ep[n[l]]=s;t&&(o&&(tp[t]=o),a&&(np[t]=a))}function ip(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;rp({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var op=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},ap=function(e){return"ordgroup"===e.type?e.body:[e]},sp=Yd.makeSpan,lp=["leftmost","mbin","mopen","mrel","mop","mpunct"],cp=["rightmost","mrel","mclose","mpunct"],up={display:vh.DISPLAY,text:vh.TEXT,script:vh.SCRIPT,scriptscript:vh.SCRIPTSCRIPT},hp={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},dp=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],o=0;o<e.length;o++){var a=yp(e[o],t);if(a instanceof xh){var s=a.children;i.push(...s)}else i.push(a)}if(Yd.tryCombineChars(i),!n)return i;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(up[c.style]))}var u=sp([r[0]||"leftmost"],[],t),h=sp([r[1]||"rightmost"],[],t),d="root"===n;return pp(i,((e,t)=>{var n=t.classes[0],r=e.classes[0];"mbin"===n&&oh.contains(cp,r)?t.classes[0]="mord":"mbin"===r&&oh.contains(lp,n)&&(e.classes[0]="mord")}),{node:u},h,d),pp(i,((e,t)=>{var n=gp(t),r=gp(e),i=n&&r?e.hasClass("mtight")?Qd[n][r]:Jd[n][r]:null;if(i)return Yd.makeGlue(i,l)}),{node:u},h,d),i},pp=function e(t,n,r,i,o){i&&t.push(i);for(var a=0;a<t.length;a++){var s=t[a],l=fp(s);if(l)e(l.children,n,r,null,o);else{var c=!s.hasClass("mspace");if(c){var u=n(s,r.node);u&&(r.insertAfter?r.insertAfter(u):(t.unshift(u),a++))}c?r.node=s:o&&s.hasClass("newline")&&(r.node=sp(["leftmost"])),r.insertAfter=(e=>n=>{t.splice(e+1,0,n),a++})(a)}}i&&t.pop()},fp=function(e){return e instanceof xh||e instanceof Wh||e instanceof Hh&&e.hasClass("enclosing")?e:null},mp=function e(t,n){var r=fp(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},gp=function(e,t){return e?(t&&(e=mp(e,t)),hp[e.classes[0]]||null):null},vp=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return sp(t.concat(n))},yp=function(e,t,n){if(!e)return sp();if(tp[e.type]){var r=tp[e.type](e,t);if(n&&t.size!==n.size){r=sp(t.sizingClasses(n),[r],t);var i=t.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new eh("Got group of unknown type: '"+e.type+"'")};function bp(e,t){var n=sp(["base"],e,t),r=sp(["strut"]);return r.style.height=jh(n.height+n.depth),n.depth&&(r.style.verticalAlign=jh(-n.depth)),n.children.unshift(r),n}function _p(e,t){var n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);var r,i=dp(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(r=i.pop());for(var o,a=[],s=[],l=0;l<i.length;l++)if(s.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var c=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,s.push(i[l]),i[l].hasClass("nobreak")&&(c=!0);c||(a.push(bp(s,t)),s=[])}else i[l].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(bp(s,t)),s=[]),a.push(i[l]));s.length>0&&a.push(bp(s,t)),n?((o=bp(dp(n,t,!0))).classes=["tag"],a.push(o)):r&&a.push(r);var u=sp(["katex-html"],a);if(u.setAttribute("aria-hidden","true"),o){var h=o.children[0];h.style.height=jh(u.height+u.depth),u.depth&&(h.style.verticalAlign=jh(-u.depth))}return u}function wp(e){return new xh(e)}class kp{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}
/**
   * Sets an attribute on a MathML node. MathML depends on attributes to convey a
   * semantic content, so this is used heavily.
   */setAttribute(e,t){this.attributes[e]=t}
/**
   * Gets an attribute on a MathML node.
   */getAttribute(e){return this.attributes[e]}
/**
   * Converts the math node into a MathML-namespaced DOM element.
   */toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=zh(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof xp&&this.children[n+1]instanceof xp){for(var r=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof xp;)r+=this.children[++n].toText();e.appendChild(new xp(r).toNode())}else e.appendChild(this.children[n].toNode());return e}
/**
   * Converts the math node into an HTML markup string.
   */toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=oh.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+oh.escape(zh(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">"}
/**
   * Converts the math node into a string, similar to innerText, but escaped.
   */toText(){return this.children.map((e=>e.toText())).join("")}}class xp{constructor(e){this.text=void 0,this.text=e}
/**
   * Converts the text node into a DOM text node.
   */toNode(){return document.createTextNode(this.text)}
/**
   * Converts the text node into escaped HTML markup
   * (representing the text itself).
   */toMarkup(){return oh.escape(this.toText())}
/**
   * Converts the text node into a string
   * (representing the text itself).
   */toText(){return this.text}}var Cp={MathNode:kp,TextNode:xp,SpaceNode:class{
/**
   * Create a Space node with width given in CSS ems.
   */
constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"":e>=.1666&&e<=.1667?"":e>=.2222&&e<=.2223?"":e>=.2777&&e<=.2778?"":e>=-.05556&&e<=-.05555?"":e>=-.1667&&e<=-.1666?"":e>=-.2223&&e<=-.2222?"":e>=-.2778&&e<=-.2777?"":null}
/**
   * Converts the math node into a MathML-namespaced DOM element.
   */toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",jh(this.width)),e}
/**
   * Converts the math node into an HTML markup string.
   */toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+jh(this.width)+'"/>'}
/**
   * Converts the math node into a string, similar to innerText.
   */toText(){return this.character?this.character:" "}},newDocumentFragment:wp},Sp=function(e,t,n){return!td[t][e]||!td[t][e].replace||55349===e.charCodeAt(0)||yd.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.slice(4,6)||n.font&&"tt"===n.font.slice(4,6))||(e=td[t][e].replace),new Cp.TextNode(e)},Tp=function(e){return 1===e.length?e[0]:new Cp.MathNode("mrow",e)},Ep=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathsfit"===n)return"sans-serif-italic";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=e.text;return oh.contains(["\\imath","\\jmath"],i)?null:(td[r][i]&&td[r][i].replace&&(i=td[r][i].replace),Ih(i,Yd.fontMap[n].fontName,r)?Yd.fontMap[n].variant:null)};function Ip(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof xp&&"."===t.text}if("mo"===e.type&&1===e.children.length&&"true"===e.getAttribute("separator")&&"0em"===e.getAttribute("lspace")&&"0em"===e.getAttribute("rspace")){var n=e.children[0];return n instanceof xp&&","===n.text}return!1}var Ap=function(e,t,n){if(1===e.length){var r=Bp(e[0],t);return n&&r instanceof kp&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,o=[],a=0;a<e.length;a++){var s=Bp(e[a],t);if(s instanceof kp&&i instanceof kp){if("mtext"===s.type&&"mtext"===i.type&&s.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...s.children);continue}if("mn"===s.type&&"mn"===i.type){i.children.push(...s.children);continue}if(Ip(s)&&"mn"===i.type){i.children.push(...s.children);continue}if("mn"===s.type&&Ip(i))s.children=[...i.children,...s.children],o.pop();else if(("msup"===s.type||"msub"===s.type)&&s.children.length>=1&&("mn"===i.type||Ip(i))){var l=s.children[0];l instanceof kp&&"mn"===l.type&&(l.children=[...i.children,...l.children],o.pop())}else if("mi"===i.type&&1===i.children.length){var c=i.children[0];if(c instanceof xp&&""===c.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){var u=s.children[0];u instanceof xp&&u.text.length>0&&(u.text=u.text.slice(0,1)+""+u.text.slice(1),o.pop())}}}o.push(s),i=s}return o},Dp=function(e,t,n){return Tp(Ap(e,t,n))},Bp=function(e,t){if(!e)return new Cp.MathNode("mrow");if(np[e.type])return np[e.type](e,t);throw new eh("Got group of unknown type: '"+e.type+"'")};function Lp(e,t,n,r,i){var o,a=Ap(e,n);o=1===a.length&&a[0]instanceof kp&&oh.contains(["mrow","mtable"],a[0].type)?a[0]:new Cp.MathNode("mrow",a);var s=new Cp.MathNode("annotation",[new Cp.TextNode(t)]);s.setAttribute("encoding","application/x-tex");var l=new Cp.MathNode("semantics",[o,s]),c=new Cp.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return Yd.makeSpan([u],[c])}var Mp=function(e){return new Mh({style:e.displayMode?vh.DISPLAY:vh.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Fp=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Yd.makeSpan(n,[e])}return e},Op={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",
// Not a perfect match.
xleftequilibrium:"",
// None better available.
"\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Pp={
//   path(s), minWidth, height, align
overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],
// CD minwwidth2.5pc
xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],
// The next three arrows are from the mhchem package.
// In mhchem.sty, min-length is 2.0em. But these arrows might appear in the
// document as \xrightarrow or \xrightleftharpoons. Those have
// min-length = 1.75em, so we set min-length on these next three to match.
xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Np=function(e,t,n,r,i){var o,a=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(o=Yd.makeSpan(["stretchy",t],[],i),"fbox"===t){var s=i.color&&i.getColor();s&&(o.style.borderColor=s)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new Zh({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new Zh({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new Kh(l,{width:"100%",height:jh(a)});o=Yd.makeSvgSpan([],[c],i)}return o.height=a,o.style.height=jh(a),o},jp=function(e){var t=new Cp.MathNode("mo",[new Cp.TextNode(Op[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},zp=function(e,t){var{span:n,minWidth:r,height:i}=function(){var n=4e5,r=e.label.slice(1);if(oh.contains(["widehat","widecheck","widetilde","utilde"],r)){var i,o,a,s="ordgroup"===(p=e.base).type?p.body.length:1;if(s>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,a=.42,o=r+"4"):(i=312,n=2340,a=.34,o="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],a=[0,.24,.3,.3,.36,.42][l],o=r+l):(n=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],a=[0,.26,.286,.3,.306,.34][l],o="tilde"+l)}var c=new Xh(o),u=new Kh([c],{width:"100%",height:jh(a),viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:Yd.makeSvgSpan([],[u],t),minWidth:0,height:a}}var h,d,p,f=[],m=Pp[r],[g,v,y]=m,b=y/1e3,_=g.length;if(1===_)h=["hide-tail"],d=[m[3]];else if(2===_)h=["halfarrow-left","halfarrow-right"],d=["xMinYMin","xMaxYMin"];else{if(3!==_)throw new Error("Correct katexImagesData or update code here to support\n                    "+_+" children.");h=["brace-left","brace-center","brace-right"],d=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<_;w++){var k=new Xh(g[w]),x=new Kh([k],{width:"400em",height:jh(b),viewBox:"0 0 "+n+" "+y,preserveAspectRatio:d[w]+" slice"}),C=Yd.makeSvgSpan([h[w]],[x],t);if(1===_)return{span:C,minWidth:v,height:b};C.style.height=jh(b),f.push(C)}return{span:Yd.makeSpan(["stretchy"],f,t),minWidth:v,height:b}}();return n.height=i,n.style.height=jh(i),r>0&&(n.style.minWidth=jh(r)),n};function Rp(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function qp(e){var t=$p(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function $p(e){return e&&("atom"===e.type||ed.hasOwnProperty(e.type))?e:null}var Up=(e,t)=>{var n,r,i;e&&"supsub"===e.type?(n=(r=Rp(e.base,"accent")).base,e.base=n,i=function(e){if(e instanceof Hh)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(yp(e,t)),e.base=r):n=(r=Rp(e,"accent")).base;var o=yp(n,t.havingCrampedStyle()),a=0;if(r.isShifty&&oh.isCharacterBox(n)){var s=oh.getBaseElem(n);a=Jh(yp(s,t.havingCrampedStyle())).skew}var l,c="\\c"===r.label,u=c?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight);if(r.isStretchy)l=zp(r,t),l=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+jh(2*a)+")",marginLeft:jh(2*a)}:void 0}]},t);else{var h,d;"\\vec"===r.label?(h=Yd.staticSvg("vec",t),d=Yd.svgData.vec[1]):((h=Jh(h=Yd.makeOrd({mode:r.mode,text:r.label},t,"textord"))).italic=0,d=h.width,c&&(u+=h.depth)),l=Yd.makeSpan(["accent-body"],[h]);var p="\\textcircled"===r.label;p&&(l.classes.push("accent-full"),u=o.height);var f=a;p||(f-=d/2),l.style.left=jh(f),"\\textcircled"===r.label&&(l.style.top=".2em"),l=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-u},{type:"elem",elem:l}]},t)}var m=Yd.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=m,i.height=Math.max(m.height,i.height),i.classes[0]="mord",i):m},Hp=(e,t)=>{var n=e.isStretchy?jp(e.label):new Cp.MathNode("mo",[Sp(e.label,e.mode)]),r=new Cp.MathNode("mover",[Bp(e.base,t),n]);return r.setAttribute("accent","true"),r},Wp=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((e=>"\\"+e)).join("|"));rp({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=op(t[0]),r=!Wp.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:Up,mathmlBuilder:Hp}),rp({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,
// unless in strict mode
argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return"math"===r&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:Up,mathmlBuilder:Hp}),rp({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(e,t)=>{var n=yp(e.base,t),r=zp(e,t),i="\\utilde"===e.label?.12:0,o=Yd.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return Yd.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var n=jp(e.label),r=new Cp.MathNode("munder",[Bp(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var Gp=e=>{var t=new Cp.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};rp({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom",
// The next 3 functions are here to support the mhchem extension.
// Direct use of these functions is discouraged and may break someday.
"\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium",
// The next 3 functions are here only to support the {CD} environment.
"\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:i}=e;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},
// Flow is unable to correctly infer the type of `group`, even though it's
// unambiguously determined from the passed-in `type` above.
htmlBuilder(e,t){var n,r=t.style,i=t.havingStyle(r.sup()),o=Yd.wrapFragment(yp(e.body,i,t),t),a="\\x"===e.label.slice(0,2)?"x":"cd";o.classes.push(a+"-arrow-pad"),e.below&&(i=t.havingStyle(r.sub()),(n=Yd.wrapFragment(yp(e.below,i,t),t)).classes.push(a+"-arrow-pad"));var s,l=zp(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,u=-t.fontMetrics().axisHeight-.5*l.height-.111;if((o.depth>.25||"\\xleftequilibrium"===e.label)&&(u-=o.depth),n){var h=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;s=Yd.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:n,shift:h}]},t)}else s=Yd.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:u},{type:"elem",elem:l,shift:c}]},t);return s.children[0].children[0].children[1].classes.push("svg-align"),Yd.makeSpan(["mrel","x-arrow"],[s],t)},mathmlBuilder(e,t){var n,r=jp(e.label);if(r.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=Gp(Bp(e.body,t));if(e.below){var o=Gp(Bp(e.below,t));n=new Cp.MathNode("munderover",[r,o,i])}else n=new Cp.MathNode("mover",[r,i])}else if(e.below){var a=Gp(Bp(e.below,t));n=new Cp.MathNode("munder",[r,a])}else n=Gp(),n=new Cp.MathNode("mover",[r,n]);return n}});var Vp=Yd.makeSpan;function Yp(e,t){var n=dp(e.body,t,!0);return Vp([e.mclass],n,t)}function Kp(e,t){var n,r=Ap(e.body,t);return"minner"===e.mclass?n=new Cp.MathNode("mpadded",r):"mord"===e.mclass?e.isCharacterBox?(n=r[0]).type="mi":n=new Cp.MathNode("mi",r):(e.isCharacterBox?(n=r[0]).type="mo":n=new Cp.MathNode("mo",r),"mbin"===e.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0em"):"minner"===e.mclass&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}rp({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),
// TODO(kevinb): don't prefix with 'm'
body:ap(i),isCharacterBox:oh.isCharacterBox(i)}},htmlBuilder:Yp,mathmlBuilder:Kp});var Xp=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};rp({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:Xp(t[0]),body:ap(t[1]),isCharacterBox:oh.isCharacterBox(t[1])}}}),rp({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var n,{parser:r,funcName:i}=e,o=t[1],a=t[0];n="\\stackrel"!==i?Xp(o):"mrel";var s={type:"op",mode:o.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:ap(o)},l={type:"supsub",mode:a.mode,base:s,sup:"\\underset"===i?null:a,sub:"\\underset"===i?a:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:oh.isCharacterBox(l)}},htmlBuilder:Yp,mathmlBuilder:Kp}),rp({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:Xp(t[0]),body:ap(t[0])}},htmlBuilder(e,t){var n=dp(e.body,t,!0),r=Yd.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=Ap(e.body,t),r=new Cp.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var Zp={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Jp=e=>"textord"===e.type&&"@"===e.text;function Qp(e,t,n){var r=Zp[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:r,mode:"math",family:"rel"},o={type:"ordgroup",mode:"math",body:[n.callFunction("\\\\cdleft",[t[0]],[]),n.callFunction("\\Big",[i],[]),n.callFunction("\\\\cdright",[t[1]],[])]};return n.callFunction("\\\\cdparent",[o],[]);case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return n.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}rp({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=Yd.wrapFragment(yp(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=jh(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Cp.MathNode("mrow",[Bp(e.label,t)]);return(n=new Cp.MathNode("mpadded",[n])).setAttribute("width","0"),"left"===e.side&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),(n=new Cp.MathNode("mstyle",[n])).setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),rp({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=Yd.wrapFragment(yp(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder:(e,t)=>new Cp.MathNode("mrow",[Bp(e.fragment,t)])}),rp({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=Rp(t[0],"ordgroup").body,i="",o=0;o<r.length;o++){i+=Rp(r[o],"textord").text}var a,s=parseInt(i);if(isNaN(s))throw new eh("\\@char has non-numeric argument "+i);if(s<0||s>=1114111)throw new eh("\\@char with invalid code point "+i);return s<=65535?a=String.fromCharCode(s):(s-=65536,a=String.fromCharCode(55296+(s>>10),56320+(1023&s))),{type:"textord",mode:n.mode,text:a}}});var ef=(e,t)=>{var n=dp(e.body,t.withColor(e.color),!1);return Yd.makeFragment(n)},tf=(e,t)=>{var n=Ap(e.body,t.withColor(e.color)),r=new Cp.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};rp({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=Rp(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:ap(i)}},htmlBuilder:ef,mathmlBuilder:tf}),rp({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,i=Rp(t[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var o=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:o}},htmlBuilder:ef,mathmlBuilder:tf}),rp({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,i="["===r.gullet.future().text?r.parseSizeGroup(!0):null,o=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:o,size:i&&Rp(i,"size").value}},
// The following builders are called only at the top level,
// not within tabular/array environments.
htmlBuilder(e,t){var n=Yd.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=jh(Nh(e.size,t)))),n},mathmlBuilder(e,t){var n=new Cp.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",jh(Nh(e.size,t)))),n}});var nf={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},rf=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new eh("Expected a control sequence",e);return t},of=(e,t,n,r)=>{var i=e.gullet.macros.get(n.text);null==i&&(n.noexpand=!0,i={tokens:[n],numArgs:0,
// reproduce the same behavior in expansion
unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,i,r)};rp({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(nf[r.text])return"\\global"!==n&&"\\\\globallong"!==n||(r.text=nf[r.text]),Rp(t.parseFunction(),"internal");throw new eh("Invalid token after macro prefix",r)}}),rp({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new eh("Expected a control sequence",r);for(var o,a=0,s=[[]];"{"!==t.gullet.future().text;)if("#"===(r=t.gullet.popToken()).text){if("{"===t.gullet.future().text){o=t.gullet.future(),s[a].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new eh('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==a+1)throw new eh('Argument number "'+r.text+'" out of order');a++,s.push([])}else{if("EOF"===r.text)throw new eh("Expected a macro definition");s[a].push(r.text)}var{tokens:l}=t.gullet.consumeArg();return o&&l.unshift(o),"\\edef"!==n&&"\\xdef"!==n||(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:a,delimiters:s},n===nf[n]),{type:"internal",mode:t.mode}}}),rp({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=rf(t.gullet.popToken());t.gullet.consumeSpaces();var i=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return of(t,r,i,"\\\\globallet"===n),{type:"internal",mode:t.mode}}}),rp({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=rf(t.gullet.popToken()),i=t.gullet.popToken(),o=t.gullet.popToken();return of(t,r,o,"\\\\globalfuture"===n),t.gullet.pushToken(o),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var af=function(e,t,n){var r=Ih(td.math[e]&&td.math[e].replace||e,t,n);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},sf=function(e,t,n,r){var i=n.havingBaseStyle(t),o=Yd.makeSpan(r.concat(i.sizingClasses(n)),[e],n),a=i.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=i.sizeMultiplier,o},lf=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=jh(i),e.height-=i,e.depth+=i},cf=function(e,t,n,r,i,o){var a=function(e,t,n,r){return Yd.makeSymbol(e,"Size"+t+"-Regular",n,r)}(e,t,i,r),s=sf(Yd.makeSpan(["delimsizing","size"+t],[a],r),vh.TEXT,r,o);return n&&lf(s,r,vh.TEXT),s},uf=function(e,t,n){var r;return r="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:Yd.makeSpan(["delimsizinginner",r],[Yd.makeSpan([],[Yd.makeSymbol(e,t,n)])])}},hf=function(e,t,n){var r=Ch["Size4-Regular"][e.charCodeAt(0)]?Ch["Size4-Regular"][e.charCodeAt(0)][4]:Ch["Size1-Regular"][e.charCodeAt(0)][4],i=new Xh("inner",function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),o=new Kh([i],{width:jh(r),height:jh(t),
// Override CSS rule `.katex svg { width: 100% }`
style:"width:"+jh(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=Yd.makeSvgSpan([],[o],n);return a.height=t,a.style.height=jh(t),a.style.width=jh(r),{type:"elem",elem:a}},df={type:"kern",size:-.008},pf=["|","\\lvert","\\rvert","\\vert"],ff=["\\|","\\lVert","\\rVert","\\Vert"],mf=function(e,t,n,r,i,o){var a,s,l,c,u="",h=0;a=l=c=e,s=null;var d="Size1-Regular";"\\uparrow"===e?l=c="":"\\Uparrow"===e?l=c="":"\\downarrow"===e?a=l="":"\\Downarrow"===e?a=l="":"\\updownarrow"===e?(a="\\uparrow",l="",c="\\downarrow"):"\\Updownarrow"===e?(a="\\Uparrow",l="",c="\\Downarrow"):oh.contains(pf,e)?(l="",u="vert",h=333):oh.contains(ff,e)?(l="",u="doublevert",h=556):"["===e||"\\lbrack"===e?(a="",l="",c="",d="Size4-Regular",u="lbrack",h=667):"]"===e||"\\rbrack"===e?(a="",l="",c="",d="Size4-Regular",u="rbrack",h=667):"\\lfloor"===e||""===e?(l=a="",c="",d="Size4-Regular",u="lfloor",h=667):"\\lceil"===e||""===e?(a="",l=c="",d="Size4-Regular",u="lceil",h=667):"\\rfloor"===e||""===e?(l=a="",c="",d="Size4-Regular",u="rfloor",h=667):"\\rceil"===e||""===e?(a="",l=c="",d="Size4-Regular",u="rceil",h=667):"("===e||"\\lparen"===e?(a="",l="",c="",d="Size4-Regular",u="lparen",h=875):")"===e||"\\rparen"===e?(a="",l="",c="",d="Size4-Regular",u="rparen",h=875):"\\{"===e||"\\lbrace"===e?(a="",s="",c="",l="",d="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(a="",s="",c="",l="",d="Size4-Regular"):"\\lgroup"===e||""===e?(a="",c="",l="",d="Size4-Regular"):"\\rgroup"===e||""===e?(a="",c="",l="",d="Size4-Regular"):"\\lmoustache"===e||""===e?(a="",c="",l="",d="Size4-Regular"):"\\rmoustache"!==e&&""!==e||(a="",c="",l="",d="Size4-Regular");var p=af(a,d,i),f=p.height+p.depth,m=af(l,d,i),g=m.height+m.depth,v=af(c,d,i),y=v.height+v.depth,b=0,_=1;if(null!==s){var w=af(s,d,i);b=w.height+w.depth,_=2}var k=f+y+b,x=k+Math.max(0,Math.ceil((t-k)/(_*g)))*_*g,C=r.fontMetrics().axisHeight;n&&(C*=r.sizeMultiplier);var S=x/2-C,T=[];if(u.length>0){var E=x-f-y,I=Math.round(1e3*x),A=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z\nM367 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v602 h84z\nM403 1759 V0 H319 V1759 v"+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+t+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(t+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(t+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(t+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(t+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(u,Math.round(1e3*E)),D=new Xh(u,A),B=(h/1e3).toFixed(3)+"em",L=(I/1e3).toFixed(3)+"em",M=new Kh([D],{width:B,height:L,viewBox:"0 0 "+h+" "+I}),F=Yd.makeSvgSpan([],[M],r);F.height=I/1e3,F.style.width=B,F.style.height=L,T.push({type:"elem",elem:F})}else{if(T.push(uf(c,d,i)),T.push(df),null===s){var O=x-f-y+.016;T.push(hf(l,O,r))}else{var P=(x-f-y-b)/2+.016;T.push(hf(l,P,r)),T.push(df),T.push(uf(s,d,i)),T.push(df),T.push(hf(l,P,r))}T.push(df),T.push(uf(a,d,i))}var N=r.havingBaseStyle(vh.TEXT),j=Yd.makeVList({positionType:"bottom",positionData:S,children:T},N);return sf(Yd.makeSpan(["delimsizing","mult"],[j],N),vh.TEXT,r,o)},gf=.08,vf=function(e,t,n,r,i){var o=function(e,t,n){t*=1e3;var r="";switch(e){case"sqrtMain":r=function(e){return"M95,"+(622+e+wh)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+wh+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize1":r=function(e){return"M263,"+(601+e+wh)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+wh+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize2":r=function(e){return"M983 "+(10+e+wh)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+wh+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize3":r=function(e){return"M424,"+(2398+e+wh)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+wh+"\nh400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize4":r=function(e){return"M473,"+(2713+e+wh)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+wh+"h400000v"+(40+e)+"H1017.7z"}(t);break;case"sqrtTall":r=function(e,t,n){return"M702 "+(e+wh)+"H400000"+(40+e)+"\nH742v"+(n-54-wh-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+wh+"H400000v"+(40+e)+"H742z"}(t,0,n)}return r}(e,r,n),a=new Xh(e,o),s=new Kh([a],{
// Note: 1000:1 ratio of viewBox to document em width.
width:"400em",height:jh(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Yd.makeSvgSpan(["hide-tail"],[s],i)},yf=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],bf=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],_f=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],wf=[0,1.2,1.8,2.4,3],kf=[{type:"small",style:vh.SCRIPTSCRIPT},{type:"small",style:vh.SCRIPT},{type:"small",style:vh.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],xf=[{type:"small",style:vh.SCRIPTSCRIPT},{type:"small",style:vh.SCRIPT},{type:"small",style:vh.TEXT},{type:"stack"}],Cf=[{type:"small",style:vh.SCRIPTSCRIPT},{type:"small",style:vh.SCRIPT},{type:"small",style:vh.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Sf=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Tf=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var o=af(e,Sf(n[i]),"math"),a=o.height+o.depth;if("small"===n[i].type&&(a*=r.havingBaseStyle(n[i].style).sizeMultiplier),a>t)return n[i]}return n[n.length-1]},Ef=function(e,t,n,r,i,o){var a;"<"===e||"\\lt"===e||""===e?e="\\langle":">"!==e&&"\\gt"!==e&&""!==e||(e="\\rangle"),a=oh.contains(_f,e)?kf:oh.contains(yf,e)?Cf:xf;var s=Tf(e,t,a,r);return"small"===s.type?function(e,t,n,r,i,o){var a=Yd.makeSymbol(e,"Main-Regular",i,r),s=sf(a,t,r,o);return n&&lf(s,r,t),s}(e,s.style,n,r,i,o):"large"===s.type?cf(e,s.size,n,r,i,o):mf(e,t,n,r,i,o)},If={sqrtImage:function(e,t){var n,r,i=t.havingBaseSizing(),o=Tf("\\surd",e*i.sizeMultiplier,Cf,i),a=i.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,u=0;return"small"===o.type?(e<1?a=1:e<1.4&&(a=.7),c=(1+s)/a,(n=vf("sqrtMain",l=(1+s+gf)/a,u=1e3+1e3*s+80,s,t)).style.minWidth="0.853em",r=.833/a):"large"===o.type?(u=1080*wf[o.size],c=(wf[o.size]+s)/a,l=(wf[o.size]+s+gf)/a,(n=vf("sqrtSize"+o.size,l,u,s,t)).style.minWidth="1.02em",r=1/a):(l=e+s+gf,c=e+s,u=Math.floor(1e3*e+s)+80,(n=vf("sqrtTall",l,u,s,t)).style.minWidth="0.742em",r=1.056),n.height=c,n.style.height=jh(l),{span:n,advanceWidth:r,
// Calculate the actual line width.
// This actually should depend on the chosen font -- e.g. \boldmath
// should use the thicker surd symbols from e.g. KaTeX_Main-Bold, and
// have thicker rules.
ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*a}},sizedDelim:function(e,t,n,r,i){if("<"===e||"\\lt"===e||""===e?e="\\langle":">"!==e&&"\\gt"!==e&&""!==e||(e="\\rangle"),oh.contains(yf,e)||oh.contains(_f,e))return cf(e,t,!1,n,r,i);if(oh.contains(bf,e))return mf(e,wf[t],!1,n,r,i);throw new eh("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:wf,customSizedDelim:Ef,leftRightDelim:function(e,t,n,r,i,o){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,s=5/r.fontMetrics().ptPerEm,l=Math.max(t-a,n+a),c=Math.max(
// In real TeX, calculations are done using integral values which are
// 65536 per pt, or 655360 per em. So, the division here truncates in
// TeX but doesn't here, producing different results. If we wanted to
// exactly match TeX's calculation, we could do
//   Math.floor(655360 * maxDistFromAxis / 500) *
//    delimiterFactor / 655360
// (To see the difference, compare
//    x^{x^{\left(\rule{0.1em}{0.68em}\right)}}
// in TeX and KaTeX)
l/500*901,2*l-s);return Ef(e,c,!0,r,i,o)}},Af={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Df=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Bf(e,t){var n=$p(e);if(n&&oh.contains(Df,n.text))return n;throw new eh(n?"Invalid delimiter '"+n.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function Lf(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}rp({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=Bf(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Af[e.funcName].size,mclass:Af[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>"."===e.delim?Yd.makeSpan([e.mclass]):If.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(Sp(e.delim,e.mode));var n=new Cp.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=jh(If.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}}),rp({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new eh("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Bf(t[0],e).text,color:n}}}),rp({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Bf(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var o=Rp(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Lf(e);for(var n,r,i=dp(e.body,t,!0,["mopen","mclose"]),o=0,a=0,s=!1,l=0;l<i.length;l++)i[l].isMiddle?s=!0:(o=Math.max(i[l].height,o),a=Math.max(i[l].depth,a));if(o*=t.sizeMultiplier,a*=t.sizeMultiplier,n="."===e.left?vp(t,["mopen"]):If.leftRightDelim(e.left,o,a,t,e.mode,["mopen"]),i.unshift(n),s)for(var c=1;c<i.length;c++){var u=i[c].isMiddle;u&&(i[c]=If.leftRightDelim(u.delim,o,a,u.options,e.mode,[]))}if("."===e.right)r=vp(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;r=If.leftRightDelim(e.right,o,a,h,e.mode,["mclose"])}return i.push(r),Yd.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{Lf(e);var n=Ap(e.body,t);if("."!==e.left){var r=new Cp.MathNode("mo",[Sp(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new Cp.MathNode("mo",[Sp(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),n.push(i)}return Tp(n)}}),rp({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Bf(t[0],e);if(!e.parser.leftrightDepth)throw new eh("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if("."===e.delim)n=vp(t,[]);else{n=If.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n="\\vert"===e.delim||"|"===e.delim?Sp("|","text"):Sp(e.delim,e.mode),r=new Cp.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var Mf=(e,t)=>{var n,r,i,o=Yd.wrapFragment(yp(e.body,t),t),a=e.label.slice(1),s=t.sizeMultiplier,l=0,c=oh.isCharacterBox(e.body);if("sout"===a)(n=Yd.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,l=-.5*t.fontMetrics().xHeight;else if("phase"===a){var u=Nh({number:.6,unit:"pt"},t),h=Nh({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var d=o.height+o.depth+u+h;o.style.paddingLeft=jh(d/2+u);var p=Math.floor(1e3*d*s),f="M400000 "+(r=p)+" H0 L"+r/2+" 0 l65 45 L145 "+(r-80)+" H400000z",m=new Kh([new Xh("phase",f)],{width:"400em",height:jh(p/1e3),viewBox:"0 0 400000 "+p,preserveAspectRatio:"xMinYMin slice"});(n=Yd.makeSvgSpan(["hide-tail"],[m],t)).style.height=jh(d),l=o.depth+u+h}else{/cancel/.test(a)?c||o.classes.push("cancel-pad"):"angl"===a?o.classes.push("anglpad"):o.classes.push("boxpad");var g=0,v=0,y=0;/box/.test(a)?(y=Math.max(t.fontMetrics().fboxrule,
// default
t.minRuleThickness),v=g=t.fontMetrics().fboxsep+("colorbox"===a?0:y)):"angl"===a?(g=4*(y=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),v=Math.max(0,.25-o.depth)):v=g=c?.2:0,n=Np(o,a,g,v,t),/fbox|boxed|fcolorbox/.test(a)?(n.style.borderStyle="solid",n.style.borderWidth=jh(y)):"angl"===a&&.049!==y&&(n.style.borderTopWidth=jh(y),n.style.borderRightWidth=jh(y)),l=o.depth+v,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}if(e.backgroundColor)i=Yd.makeVList({positionType:"individualShift",children:[
// Put the color background behind inner;
{type:"elem",elem:n,shift:l},{type:"elem",elem:o,shift:0}]},t);else{var b=/cancel|phase/.test(a)?["svg-align"]:[];i=Yd.makeVList({positionType:"individualShift",children:[
// Write the \cancel stroke on top of inner.
{type:"elem",elem:o,shift:0},{type:"elem",elem:n,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(a)&&(i.height=o.height,i.depth=o.depth),/cancel/.test(a)&&!c?Yd.makeSpan(["mord","cancel-lap"],[i],t):Yd.makeSpan(["mord"],[i],t)},Ff=(e,t)=>{var n=0,r=new Cp.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Bp(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,
// default
t.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};rp({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=Rp(t[0],"color-token").color,a=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,body:a}},htmlBuilder:Mf,mathmlBuilder:Ff}),rp({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,o=Rp(t[0],"color-token").color,a=Rp(t[1],"color-token").color,s=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:o,body:s}},htmlBuilder:Mf,mathmlBuilder:Ff}),rp({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}}),rp({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:Mf,mathmlBuilder:Ff}),rp({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var Of={};function Pf(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:o,mathmlBuilder:a}=e,s={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Of[n[l]]=s;o&&(tp[t]=o),a&&(np[t]=a)}var Nf={};function jf(e,t){Nf[e]=t}function zf(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for("\\relax"===n&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.fetch().text;return t}var Rf=e=>{if(!e.parser.settings.displayMode)throw new eh("{"+e.envName+"} can be used only in display mode.")};function qf(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function $f(e,t,n){var{hskipBeforeAndAfter:r,addJot:i,cols:o,arraystretch:a,colSeparationType:s,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:h,leqno:d}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!a){var p=e.gullet.expandMacroAsText("\\arraystretch");if(null==p)a=1;else if(!(a=parseFloat(p))||a<0)throw new eh("Invalid \\arraystretch: "+p)}e.gullet.beginGroup();var f=[],m=[f],g=[],v=[],y=null!=l?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function _(){y&&(e.gullet.macros.get("\\df@tag")?(y.push(e.subparse([new Qu("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(l)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(b(),v.push(zf(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},n&&(w={type:"styling",mode:e.mode,style:n,body:[w]}),f.push(w);var k=e.fetch().text;if("&"===k){if(h&&f.length===h){if(c||s)throw new eh("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===k){_(),1===f.length&&"styling"===w.type&&0===w.body[0].body.length&&(m.length>1||!u)&&m.pop(),v.length<m.length+1&&v.push([]);break}if("\\\\"!==k)throw new eh("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var x=void 0;" "!==e.gullet.future().text&&(x=e.parseSizeGroup(!0)),g.push(x?x.value:null),_(),v.push(zf(e)),f=[],m.push(f),b()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:a,body:m,cols:o,rowGaps:g,hskipBeforeAndAfter:r,hLinesBeforeRow:v,colSeparationType:s,tags:y,leqno:d}}function Uf(e){return"d"===e.slice(0,1)?"display":"text"}var Hf=function(e,t){var n,r,i=e.body.length,o=e.hLinesBeforeRow,a=0,s=new Array(i),l=[],c=Math.max(
// From LaTeX \showthe\arrayrulewidth. Equals 0.04 em.
t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,h=5*u;e.colSeparationType&&"small"===e.colSeparationType&&(h=t.havingStyle(vh.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var d="CD"===e.colSeparationType?Nh({number:3,unit:"ex"},t):12*u,p=3*u,f=e.arraystretch*d,m=.7*f,g=.3*f,v=0;function y(e){for(var t=0;t<e.length;++t)t>0&&(v+=.25),l.push({pos:v,isDashed:e[t]})}for(y(o[0]),n=0;n<e.body.length;++n){var b=e.body[n],_=m,w=g;a<b.length&&(a=b.length);var k=new Array(b.length);for(r=0;r<b.length;++r){var x=yp(b[r],t);w<x.depth&&(w=x.depth),_<x.height&&(_=x.height),k[r]=x}var C=e.rowGaps[n],S=0;C&&(S=Nh(C,t))>0&&(w<(S+=g)&&(w=S),S=0),e.addJot&&(w+=p),k.height=_,k.depth=w,v+=_,k.pos=v,v+=w+S,s[n]=k,y(o[n+1])}var T,E,I=v/2+t.fontMetrics().axisHeight,A=e.cols||[],D=[],B=[];if(e.tags&&e.tags.some((e=>e)))for(n=0;n<i;++n){var L=s[n],M=L.pos-I,F=e.tags[n],O=void 0;(O=!0===F?Yd.makeSpan(["eqn-num"],[],t):!1===F?Yd.makeSpan([],[],t):Yd.makeSpan([],dp(F,t,!0),t)).depth=L.depth,O.height=L.height,B.push({type:"elem",elem:O,shift:M})}for(r=0,E=0;
// Continue while either there are more columns or more column
// descriptions, so trailing separators don't get lost.
r<a||E<A.length;++r,++E){for(var P=A[E]||{},N=!0;"separator"===P.type;){if(N||((T=Yd.makeSpan(["arraycolsep"],[])).style.width=jh(t.fontMetrics().doubleRuleSep),D.push(T)),"|"!==P.separator&&":"!==P.separator)throw new eh("Invalid separator type: "+P.separator);var j="|"===P.separator?"solid":"dashed",z=Yd.makeSpan(["vertical-separator"],[],t);z.style.height=jh(v),z.style.borderRightWidth=jh(c),z.style.borderRightStyle=j,z.style.margin="0 "+jh(-c/2);var R=v-I;R&&(z.style.verticalAlign=jh(-R)),D.push(z),P=A[++E]||{},N=!1}if(!(r>=a)){var q=void 0;(r>0||e.hskipBeforeAndAfter)&&0!==(q=oh.deflt(P.pregap,h))&&((T=Yd.makeSpan(["arraycolsep"],[])).style.width=jh(q),D.push(T));var $=[];for(n=0;n<i;++n){var U=s[n],H=U[r];if(H){var W=U.pos-I;H.depth=U.depth,H.height=U.height,$.push({type:"elem",elem:H,shift:W})}}$=Yd.makeVList({positionType:"individualShift",children:$},t),$=Yd.makeSpan(["col-align-"+(P.align||"c")],[$]),D.push($),(r<a-1||e.hskipBeforeAndAfter)&&0!==(q=oh.deflt(P.postgap,h))&&((T=Yd.makeSpan(["arraycolsep"],[])).style.width=jh(q),D.push(T))}}if(s=Yd.makeSpan(["mtable"],D),l.length>0){for(var G=Yd.makeLineSpan("hline",t,c),V=Yd.makeLineSpan("hdashline",t,c),Y=[{type:"elem",elem:s,shift:0}];l.length>0;){var K=l.pop(),X=K.pos-I;K.isDashed?Y.push({type:"elem",elem:V,shift:X}):Y.push({type:"elem",elem:G,shift:X})}s=Yd.makeVList({positionType:"individualShift",children:Y},t)}if(0===B.length)return Yd.makeSpan(["mord"],[s],t);var Z=Yd.makeVList({positionType:"individualShift",children:B},t);return Z=Yd.makeSpan(["tag"],[Z],t),Yd.makeFragment([s,Z])},Wf={c:"center ",l:"left ",r:"right "},Gf=function(e,t){for(var n=[],r=new Cp.MathNode("mtd",[],["mtr-glue"]),i=new Cp.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],s=[],l=0;l<a.length;l++)s.push(new Cp.MathNode("mtd",[Bp(a[l],t)]));e.tags&&e.tags[o]&&(s.unshift(r),s.push(r),e.leqno?s.unshift(i):s.push(i)),n.push(new Cp.MathNode("mtr",s))}var c=new Cp.MathNode("mtable",n),u=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",jh(u));var h="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,f="",m=!1,g=0,v=p.length;"separator"===p[0].type&&(h+="top ",g=1),"separator"===p[p.length-1].type&&(h+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===p[y].type?(d+=Wf[p[y].align],m&&(f+="none "),m=!0):"separator"===p[y].type&&m&&(f+="|"===p[y].separator?"solid ":"dashed ",m=!1);c.setAttribute("columnalign",d.trim()),/[sd]/.test(f)&&c.setAttribute("columnlines",f.trim())}if("align"===e.colSeparationType){for(var b=e.cols||[],_="",w=1;w<b.length;w++)_+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",_.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var k="",x=e.hLinesBeforeRow;h+=x[0].length>0?"left ":"",h+=x[x.length-1].length>0?"right ":"";for(var C=1;C<x.length-1;C++)k+=0===x[C].length?"none ":x[C][0]?"dashed ":"solid ";return/[sd]/.test(k)&&c.setAttribute("rowlines",k.trim()),""!==h&&(c=new Cp.MathNode("menclose",[c])).setAttribute("notation",h.trim()),e.arraystretch&&e.arraystretch<1&&(c=new Cp.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},Vf=function(e,t){-1===e.envName.indexOf("ed")&&Rf(e);var n,r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",o="split"===e.envName,a=$f(e.parser,{cols:r,addJot:!0,autoTag:o?void 0:qf(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:o?2:void 0,leqno:e.parser.settings.leqno},"display"),s=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",u=0;u<t[0].body.length;u++){c+=Rp(t[0].body[u],"textord").text}n=Number(c),s=2*n}var h=!s;a.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var r=Rp(e[t],"styling");Rp(r.body[0],"ordgroup").body.unshift(l)}if(h)s<e.length&&(s=e.length);else{var i=e.length/2;if(n<i)throw new eh("Too many math in a row: expected "+n+", but got "+i,e[0])}}));for(var d=0;d<s;++d){var p="r",f=0;d%2==1?p="l":d>0&&h&&(f=1),r[d]={type:"align",align:p,pregap:f,postgap:0}}return a.colSeparationType=h?"align":"alignat",a};Pf({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=($p(t[0])?[t[0]]:Rp(t[0],"ordgroup").body).map((function(e){var t=qp(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new eh("Unknown column alignment: "+t,e)})),r={cols:n,hskipBeforeAndAfter:!0,
// \@preamble in lttab.dtx
maxNumCols:n.length};return $f(e.parser,r,Uf(e.envName))},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,-1==="lcr".indexOf(n))throw new eh("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var o=$f(e.parser,r,Uf(e.envName)),a=Math.max(0,...o.body.map((e=>e.length)));return o.cols=new Array(a).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=$f(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=($p(t[0])?[t[0]]:Rp(t[0],"ordgroup").body).map((function(e){var t=qp(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new eh("Unknown column alignment: "+t,e)}));if(n.length>1)throw new eh("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=$f(e.parser,r,"script")).body.length>0&&r.body[0].length>1)throw new eh("{subarray} can contain only one column");return r},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=$f(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,
// TODO(kevinb) get the current style.
// For now we use the metrics for TEXT style which is what we were
// doing before.  Before attempting to get the current style we
// should look at TeX's behavior especially for \over and matrices.
postgap:1
/* 1em quad */},{type:"align",align:"l",pregap:0,postgap:0}]},Uf(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Vf,htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){oh.contains(["gather","gather*"],e.envName)&&Rf(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:qf(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return $f(e.parser,t,"display")},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Vf,htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Rf(e);var t={autoTag:qf(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return $f(e.parser,t,"display")},htmlBuilder:Hf,mathmlBuilder:Gf}),Pf({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(Rf(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===t[t.length-1].length&&t.pop();break}throw new eh("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var r,i,o=[],a=[o],s=0;s<t.length;s++){for(var l=t[s],c={type:"styling",body:[],mode:"math",style:"display"},u=0;u<l.length;u++)if(Jp(l[u])){o.push(c);var h=qp(l[u+=1]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(h)>-1);else{if(!("<>AV".indexOf(h)>-1))throw new eh('Expected one of "<>AV=|." after @',l[u]);for(var p=0;p<2;p++){for(var f=!0,m=u+1;m<l.length;m++){if(i=h,("mathord"===(r=l[m]).type||"atom"===r.type)&&r.text===i){f=!1,u=m;break}if(Jp(l[m]))throw new eh("Missing a "+h+" character to complete a CD arrow.",l[m]);d[p].body.push(l[m])}if(f)throw new eh("Missing a "+h+" character to complete a CD arrow.",l[u])}}var g={type:"styling",body:[Qp(h,d,e)],mode:"math",style:"display"};o.push(g),c={type:"styling",body:[],mode:"math",style:"display"}}else c.body.push(l[u]);s%2==0?o.push(c):o.shift(),o=[],a.push(o)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,
// CD package sets \enskip between columns.
postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}(e.parser)),htmlBuilder:Hf,mathmlBuilder:Gf}),jf("\\nonumber","\\gdef\\@eqnsw{0}"),jf("\\notag","\\nonumber"),rp({type:"text",
// Doesn't matter what this is.
names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new eh(e.funcName+" valid only within array environment")}});var Yf=Of;rp({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];if("ordgroup"!==i.type)throw new eh("Invalid environment name",i);for(var o="",a=0;a<i.body.length;++a)o+=Rp(i.body[a],"textord").text;if("\\begin"===r){if(!Yf.hasOwnProperty(o))throw new eh("No such environment: "+o,i);var s=Yf[o],{args:l,optArgs:c}=n.parseArguments("\\begin{"+o+"}",s),u={mode:n.mode,envName:o,parser:n},h=s.handler(u,l,c);n.expect("\\end",!1);var d=n.nextToken,p=Rp(n.parseFunction(),"environment");if(p.name!==o)throw new eh("Mismatch: \\begin{"+o+"} matched by \\end{"+p.name+"}",d);return h}return{type:"environment",mode:n.mode,name:o,nameGroup:i}}});var Kf=(e,t)=>{var n=e.font,r=t.withFont(n);return yp(e.body,r)},Xf=(e,t)=>{var n=e.font,r=t.withFont(n);return Bp(e.body,r)},Zf={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};rp({type:"font",names:[
// styles, except \boldsymbol defined below
"\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit",
// families
"\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt",
// aliases, except \bm defined below
"\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=op(t[0]),o=r;return o in Zf&&(o=Zf[o]),{type:"font",mode:n.mode,font:o.slice(1),body:i}},htmlBuilder:Kf,mathmlBuilder:Xf}),rp({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],i=oh.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:Xp(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),rp({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:i}=e,{mode:o}=n,a=n.parseExpression(!0,i);return{type:"font",mode:o,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:a}}},htmlBuilder:Kf,mathmlBuilder:Xf});var Jf=(e,t)=>{var n=t;return"display"===e?n=n.id>=vh.SCRIPT.id?n.text():vh.DISPLAY:"text"===e&&n.size===vh.DISPLAY.size?n=vh.TEXT:"script"===e?n=vh.SCRIPT:"scriptscript"===e&&(n=vh.SCRIPTSCRIPT),n},Qf=(e,t)=>{var n,r=Jf(e.size,t.style),i=r.fracNum(),o=r.fracDen();n=t.havingStyle(i);var a=yp(e.numer,n,t);if(e.continued){var s=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;a.height=a.height<s?s:a.height,a.depth=a.depth<l?l:a.depth}n=t.havingStyle(o);var c,u,h,d,p,f,m,g,v,y,b=yp(e.denom,n,t);if(e.hasBarLine?(e.barSize?(u=Nh(e.barSize,t),c=Yd.makeLineSpan("frac-line",t,u)):c=Yd.makeLineSpan("frac-line",t),u=c.height,h=c.height):(c=null,u=0,h=t.fontMetrics().defaultRuleThickness),r.size===vh.DISPLAY.size||"display"===e.size?(d=t.fontMetrics().num1,p=u>0?3*h:7*h,f=t.fontMetrics().denom1):(u>0?(d=t.fontMetrics().num2,p=h):(d=t.fontMetrics().num3,p=3*h),f=t.fontMetrics().denom2),c){var _=t.fontMetrics().axisHeight;d-a.depth-(_+.5*u)<p&&(d+=p-(d-a.depth-(_+.5*u))),_-.5*u-(b.height-f)<p&&(f+=p-(_-.5*u-(b.height-f)));var w=-(_-.5*u);m=Yd.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:c,shift:w},{type:"elem",elem:a,shift:-d}]},t)}else{var k=d-a.depth-(b.height-f);k<p&&(d+=.5*(p-k),f+=.5*(p-k)),m=Yd.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:a,shift:-d}]},t)}return n=t.havingStyle(r),m.height*=n.sizeMultiplier/t.sizeMultiplier,m.depth*=n.sizeMultiplier/t.sizeMultiplier,g=r.size===vh.DISPLAY.size?t.fontMetrics().delim1:r.size===vh.SCRIPTSCRIPT.size?t.havingStyle(vh.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?vp(t,["mopen"]):If.customSizedDelim(e.leftDelim,g,!0,t.havingStyle(r),e.mode,["mopen"]),y=e.continued?Yd.makeSpan([]):null==e.rightDelim?vp(t,["mclose"]):If.customSizedDelim(e.rightDelim,g,!0,t.havingStyle(r),e.mode,["mclose"]),Yd.makeSpan(["mord"].concat(n.sizingClasses(t)),[v,Yd.makeSpan(["mfrac"],[m]),y],t)},em=(e,t)=>{var n=new Cp.MathNode("mfrac",[Bp(e.numer,t),Bp(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=Nh(e.barSize,t);n.setAttribute("linethickness",jh(r))}}else n.setAttribute("linethickness","0px");var i=Jf(e.size,t.style);if(i.size!==t.style.size){n=new Cp.MathNode("mstyle",[n]);var o=i.size===vh.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",o),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var a=[];if(null!=e.leftDelim){var s=new Cp.MathNode("mo",[new Cp.TextNode(e.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),a.push(s)}if(a.push(n),null!=e.rightDelim){var l=new Cp.MathNode("mo",[new Cp.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return Tp(a)}return n};rp({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac",
// cant be entered directly
"\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var n,{parser:r,funcName:i}=e,o=t[0],a=t[1],s=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,s="(",l=")";break;case"\\\\bracefrac":n=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:r.mode,continued:!1,numer:o,denom:a,hasBarLine:n,leftDelim:s,rightDelim:l,size:c,barSize:null}},htmlBuilder:Qf,mathmlBuilder:em}),rp({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),rp({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:n,funcName:r,token:i}=e;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var tm=["display","text","script","scriptscript"],nm=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};rp({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var n,{parser:r}=e,i=t[4],o=t[5],a=op(t[0]),s="atom"===a.type&&"open"===a.family?nm(a.text):null,l=op(t[1]),c="atom"===l.type&&"close"===l.family?nm(l.text):null,u=Rp(t[2],"size"),h=null;n=!!u.isBlank||(h=u.value).number>0;var d="auto",p=t[3];if("ordgroup"===p.type){if(p.body.length>0){var f=Rp(p.body[0],"textord");d=tm[Number(f.text)]}}else p=Rp(p,"textord"),d=tm[Number(p.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:o,continued:!1,hasBarLine:n,barSize:h,leftDelim:s,rightDelim:c,size:d}},htmlBuilder:Qf,mathmlBuilder:em}),rp({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:i}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Rp(t[0],"size").value,token:i}}}),rp({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],o=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Rp(t[1],"infix").size),a=t[2],s=o.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:a,continued:!1,hasBarLine:s,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Qf,mathmlBuilder:em});var rm=(e,t)=>{var n,r,i=t.style;"supsub"===e.type?(n=e.sup?yp(e.sup,t.havingStyle(i.sup()),t):yp(e.sub,t.havingStyle(i.sub()),t),r=Rp(e.base,"horizBrace")):r=Rp(e,"horizBrace");var o,a=yp(r.base,t.havingBaseStyle(vh.DISPLAY)),s=zp(r,t);if(r.isOver?(o=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(o=Yd.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var l=Yd.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t);o=r.isOver?Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):Yd.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return Yd.makeSpan(["mord",r.isOver?"mover":"munder"],[o],t)};rp({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:rm,mathmlBuilder:(e,t)=>{var n=jp(e.label);return new Cp.MathNode(e.isOver?"mover":"munder",[Bp(e.base,t),n])}}),rp({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],i=Rp(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:ap(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=dp(e.body,t,!1);return Yd.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=Dp(e.body,t);return n instanceof kp||(n=new kp("mrow",[n])),n.setAttribute("href",e.href),n}}),rp({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=Rp(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],o=0;o<r.length;o++){var a=r[o];"~"===a&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var s={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:ap(s)}}}),rp({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:ap(t[0])}},htmlBuilder(e,t){var n=dp(e.body,t,!1);return Yd.makeFragment(n)},mathmlBuilder:(e,t)=>new Cp.MathNode("mrow",Ap(e.body,t))}),rp({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var n,{parser:r,funcName:i,token:o}=e,a=Rp(t[0],"raw").string,s=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(i){case"\\htmlClass":l.class=a,n={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,n={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,n={command:"\\htmlStyle",style:a};break;case"\\htmlData":for(var c=a.split(","),u=0;u<c.length;u++){var h=c[u].split("=");if(2!==h.length)throw new eh("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}n={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(n)?{type:"html",mode:r.mode,attributes:l,body:ap(s)}:r.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var n=dp(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var i=Yd.makeSpan(r,n,t);for(var o in e.attributes)"class"!==o&&e.attributes.hasOwnProperty(o)&&i.setAttribute(o,e.attributes[o]);return i},mathmlBuilder:(e,t)=>Dp(e.body,t)}),rp({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:ap(t[0]),mathml:ap(t[1])}},htmlBuilder:(e,t)=>{var n=dp(e.html,t,!1);return Yd.makeFragment(n)},mathmlBuilder:(e,t)=>Dp(e.mathml,t)});var im=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new eh("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),
// sign + magnitude, cast to number
unit:t[3]};if(!Ph(n))throw new eh("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};rp({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,i={number:0,unit:"em"},o={number:.9,unit:"em"},a={number:0,unit:"em"},s="";if(n[0])for(var l=Rp(n[0],"raw").string.split(","),c=0;c<l.length;c++){var u=l[c].split("=");if(2===u.length){var h=u[1].trim();switch(u[0].trim()){case"alt":s=h;break;case"width":i=im(h);break;case"height":o=im(h);break;case"totalheight":a=im(h);break;default:throw new eh("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var d=Rp(t[0],"url").url;return""===s&&(s=(s=(s=d).replace(/^.*[\\/]/,"")).substring(0,s.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:d})?{type:"includegraphics",mode:r.mode,alt:s,width:i,height:o,totalheight:a,src:d}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=Nh(e.height,t),r=0;e.totalheight.number>0&&(r=Nh(e.totalheight,t)-n);var i=0;e.width.number>0&&(i=Nh(e.width,t));var o={height:jh(n+r)};i>0&&(o.width=jh(i)),r>0&&(o.verticalAlign=jh(-r));var a=new Gh(e.src,e.alt,o);return a.height=n,a.depth=r,a},mathmlBuilder:(e,t)=>{var n=new Cp.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=Nh(e.height,t),i=0;if(e.totalheight.number>0&&(i=Nh(e.totalheight,t)-r,n.setAttribute("valign",jh(-i))),n.setAttribute("height",jh(r+i)),e.width.number>0){var o=Nh(e.width,t);n.setAttribute("width",jh(o))}return n.setAttribute("src",e.src),n}}),rp({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=Rp(t[0],"size");if(n.settings.strict){var o="m"===r[1],a="mu"===i.value.unit;o?(a||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:(e,t)=>Yd.makeGlue(e.dimension,t),mathmlBuilder(e,t){var n=Nh(e.dimension,t);return new Cp.SpaceNode(n)}}),rp({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(e,t)=>{var n;"clap"===e.alignment?(n=Yd.makeSpan([],[yp(e.body,t)]),n=Yd.makeSpan(["inner"],[n],t)):n=Yd.makeSpan(["inner"],[yp(e.body,t)]);var r=Yd.makeSpan(["fix"],[]),i=Yd.makeSpan([e.alignment],[n,r],t),o=Yd.makeSpan(["strut"]);return o.style.height=jh(i.height+i.depth),i.depth&&(o.style.verticalAlign=jh(-i.depth)),i.children.unshift(o),i=Yd.makeSpan(["thinbox"],[i],t),Yd.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var n=new Cp.MathNode("mpadded",[Bp(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),rp({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,i=r.mode;r.switchMode("math");var o="\\("===n?"\\)":"$",a=r.parseExpression(!1,o);return r.expect(o),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:a}}}),rp({type:"text",
// Doesn't matter what this is.
names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new eh("Mismatched "+e.funcName)}});var om=(e,t)=>{switch(t.style.size){case vh.DISPLAY.size:return e.display;case vh.TEXT.size:return e.text;case vh.SCRIPT.size:return e.script;case vh.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};rp({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:ap(t[0]),text:ap(t[1]),script:ap(t[2]),scriptscript:ap(t[3])}},htmlBuilder:(e,t)=>{var n=om(e,t),r=dp(n,t,!1);return Yd.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=om(e,t);return Dp(n,t)}});var am=(e,t,n,r,i,o,a)=>{e=Yd.makeSpan([],[e]);var s,l,c,u=n&&oh.isCharacterBox(n);if(t){var h=yp(t,r.havingStyle(i.sup()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-h.depth)}}if(n){var d=yp(n,r.havingStyle(i.sub()),r);s={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-d.height)}}if(l&&s){var p=r.fontMetrics().bigOpSpacing5+s.elem.height+s.elem.depth+s.kern+e.depth+a;c=Yd.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:jh(-o)},{type:"kern",size:s.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:jh(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(s){var f=e.height-a;c=Yd.makeVList({positionType:"top",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:jh(-o)},{type:"kern",size:s.kern},{type:"elem",elem:e}]},r)}else{if(!l)return e;var m=e.depth+a;c=Yd.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:jh(o)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}var g=[c];if(s&&0!==o&&!u){var v=Yd.makeSpan(["mspace"],[],r);v.style.marginRight=jh(o),g.unshift(v)}return Yd.makeSpan(["mop","op-limits"],g,r)},sm=["\\smallint"],lm=(e,t)=>{var n,r,i,o=!1;"supsub"===e.type?(n=e.sup,r=e.sub,i=Rp(e.base,"op"),o=!0):i=Rp(e,"op");var a,s=t.style,l=!1;if(s.size===vh.DISPLAY.size&&i.symbol&&!oh.contains(sm,i.name)&&(l=!0),i.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(u=i.name.slice(1),i.name="oiint"===u?"\\iint":"\\iiint"),a=Yd.makeSymbol(i.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var h=a.italic,d=Yd.staticSvg(u+"Size"+(l?"2":"1"),t);a=Yd.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:d,shift:l?.08:0}]},t),i.name="\\"+u,a.classes.unshift("mop"),a.italic=h}}else if(i.body){var p=dp(i.body,t,!0);1===p.length&&p[0]instanceof Yh?(a=p[0]).classes[0]="mop":a=Yd.makeSpan(["mop"],p,t)}else{for(var f=[],m=1;m<i.name.length;m++)f.push(Yd.mathsym(i.name[m],i.mode,t));a=Yd.makeSpan(["mop"],f,t)}var g=0,v=0;return(a instanceof Yh||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(g=(a.height-a.depth)/2-t.fontMetrics().axisHeight,v=a.italic),o?am(a,n,r,t,s,v,g):(g&&(a.style.position="relative",a.style.top=jh(g)),a)},cm=(e,t)=>{var n;if(e.symbol)n=new kp("mo",[Sp(e.name,e.mode)]),oh.contains(sm,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new kp("mo",Ap(e.body,t));else{n=new kp("mi",[new xp(e.name.slice(1))]);var r=new kp("mo",[Sp("","text")]);n=e.parentIsSupSub?new kp("mrow",[n,r]):wp([n,r])}return n},um={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};rp({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=r;return 1===i.length&&(i=um[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:lm,mathmlBuilder:cm}),rp({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ap(r)}},htmlBuilder:lm,mathmlBuilder:cm});var hm={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};rp({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:lm,mathmlBuilder:cm}),rp({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:lm,mathmlBuilder:cm}),rp({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return 1===r.length&&(r=hm[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:lm,mathmlBuilder:cm});var dm=(e,t)=>{var n,r,i,o,a=!1;if("supsub"===e.type?(n=e.sup,r=e.sub,i=Rp(e.base,"operatorname"),a=!0):i=Rp(e,"operatorname"),i.body.length>0){for(var s=i.body.map((e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e})),l=dp(s,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof Yh&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Yd.makeSpan(["mop"],l,t)}else o=Yd.makeSpan(["mop"],[],t);return a?am(o,n,r,t,t.style,0,0):o};function pm(e,t,n){for(var r=dp(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,o=0;o<r.length;o++){var a=r[o].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[o].classes,t.sizingClasses(n)):r[o].classes[a+1]==="reset-size"+t.size&&(r[o].classes[a+1]="reset-size"+n.size),r[o].height*=i,r[o].depth*=i}return Yd.makeFragment(r)}rp({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"operatorname",mode:n.mode,body:ap(i),alwaysHandleSupSub:"\\operatornamewithlimits"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:dm,mathmlBuilder:(e,t)=>{for(var n=Ap(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var o=n[i];if(o instanceof Cp.SpaceNode);else if(o instanceof Cp.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;
// Do nothing yet.
case"mo":var a=o.children[0];1===o.children.length&&a instanceof Cp.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var s=n.map((e=>e.toText())).join("");n=[new Cp.TextNode(s)]}var l=new Cp.MathNode("mi",n);l.setAttribute("mathvariant","normal");var c=new Cp.MathNode("mo",[Sp("","text")]);return e.parentIsSupSub?new Cp.MathNode("mrow",[l,c]):Cp.newDocumentFragment([l,c])}}),jf("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),ip({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?Yd.makeFragment(dp(e.body,t,!1)):Yd.makeSpan(["mord"],dp(e.body,t,!0),t),mathmlBuilder:(e,t)=>Dp(e.body,t,!0)}),rp({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=yp(e.body,t.havingCrampedStyle()),r=Yd.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,o=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},t);return Yd.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var n=new Cp.MathNode("mo",[new Cp.TextNode("")]);n.setAttribute("stretchy","true");var r=new Cp.MathNode("mover",[Bp(e.body,t),n]);return r.setAttribute("accent","true"),r}}),rp({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:ap(r)}},htmlBuilder:(e,t)=>{var n=dp(e.body,t.withPhantom(),!1);return Yd.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=Ap(e.body,t);return new Cp.MathNode("mphantom",n)}}),rp({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=Yd.makeSpan([],[yp(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),Yd.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=Ap(ap(e.body),t),r=new Cp.MathNode("mphantom",n),i=new Cp.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),rp({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=Yd.makeSpan(["inner"],[yp(e.body,t.withPhantom())]),r=Yd.makeSpan(["fix"],[]);return Yd.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=Ap(ap(e.body),t),r=new Cp.MathNode("mphantom",n),i=new Cp.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),rp({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=Rp(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(e,t){var n=yp(e.body,t),r=Nh(e.dy,t);return Yd.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Cp.MathNode("mpadded",[Bp(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),rp({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),rp({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,i=n[0],o=Rp(t[0],"size"),a=Rp(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&Rp(i,"size").value,width:o.value,height:a.value}},htmlBuilder(e,t){var n=Yd.makeSpan(["mord","rule"],[],t),r=Nh(e.width,t),i=Nh(e.height,t),o=e.shift?Nh(e.shift,t):0;return n.style.borderRightWidth=jh(r),n.style.borderTopWidth=jh(i),n.style.bottom=jh(o),n.width=r,n.height=i+o,n.depth=-o,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=Nh(e.width,t),r=Nh(e.height,t),i=e.shift?Nh(e.shift,t):0,o=t.color&&t.getColor()||"black",a=new Cp.MathNode("mspace");a.setAttribute("mathbackground",o),a.setAttribute("width",jh(n)),a.setAttribute("height",jh(r));var s=new Cp.MathNode("mpadded",[a]);return i>=0?s.setAttribute("height",jh(i)):(s.setAttribute("height",jh(i)),s.setAttribute("depth",jh(-i))),s.setAttribute("voffset",jh(i)),s}});var fm=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];rp({type:"sizing",names:fm,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,
// Figure out what size to use based on the list of functions above
size:fm.indexOf(r)+1,body:o}},htmlBuilder:(e,t)=>{var n=t.havingSize(e.size);return pm(e.body,n,t)},mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=Ap(e.body,n),i=new Cp.MathNode("mstyle",r);return i.setAttribute("mathsize",jh(n.sizeMultiplier)),i}}),rp({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,i=!1,o=!1,a=n[0]&&Rp(n[0],"ordgroup");if(a)for(var s="",l=0;l<a.body.length;++l){if("t"===(s=a.body[l].text))i=!0;else{if("b"!==s){i=!1,o=!1;break}o=!0}}else i=!0,o=!0;var c=t[0];return{type:"smash",mode:r.mode,body:c,smashHeight:i,smashDepth:o}},htmlBuilder:(e,t)=>{var n=Yd.makeSpan([],[yp(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var o=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return Yd.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var n=new Cp.MathNode("mpadded",[Bp(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),rp({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,i=n[0],o=t[0];return{type:"sqrt",mode:r.mode,body:o,index:i}},htmlBuilder(e,t){var n=yp(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=Yd.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<vh.TEXT.id&&(i=t.fontMetrics().xHeight);var o=r+i/4,a=n.height+n.depth+o+r,{span:s,ruleWidth:l,advanceWidth:c}=If.sqrtImage(a,t),u=s.height-l;u>n.height+n.depth+o&&(o=(o+u-n.height-n.depth)/2);var h=s.height-n.height-o-l;n.style.paddingLeft=jh(c);var d=Yd.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:s},{type:"kern",size:l}]},t);if(e.index){var p=t.havingStyle(vh.SCRIPTSCRIPT),f=yp(e.index,p,t),m=.6*(d.height-d.depth),g=Yd.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:f}]},t),v=Yd.makeSpan(["root"],[g]);return Yd.makeSpan(["mord","sqrt"],[v,d],t)}return Yd.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Cp.MathNode("mroot",[Bp(n,t),Bp(r,t)]):new Cp.MathNode("msqrt",[Bp(n,t)])}});var mm={display:vh.DISPLAY,text:vh.TEXT,script:vh.SCRIPT,scriptscript:vh.SCRIPTSCRIPT};rp({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:i}=e,o=i.parseExpression(!0,n),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,
// Figure out what style to use by pulling out the style from
// the function name
style:a,body:o}},htmlBuilder(e,t){var n=mm[e.style],r=t.havingStyle(n).withFont("");return pm(e.body,r,t)},mathmlBuilder(e,t){var n=mm[e.style],r=t.havingStyle(n),i=Ap(e.body,r),o=new Cp.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return o.setAttribute("scriptlevel",a[0]),o.setAttribute("displaystyle",a[1]),o}});ip({type:"supsub",htmlBuilder(e,t){var n=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===vh.DISPLAY.size||n.alwaysHandleSupSub)?lm:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(t.style.size===vh.DISPLAY.size||n.limits)?dm:null:"accent"===n.type?oh.isCharacterBox(n.base)?Up:null:"horizBrace"===n.type&&!e.sub===n.isOver?rm:null:null}(e,t);if(n)return n(e,t);var r,i,o,{base:a,sup:s,sub:l}=e,c=yp(a,t),u=t.fontMetrics(),h=0,d=0,p=a&&oh.isCharacterBox(a);if(s){var f=t.havingStyle(t.style.sup());r=yp(s,f,t),p||(h=c.height-f.fontMetrics().supDrop*f.sizeMultiplier/t.sizeMultiplier)}if(l){var m=t.havingStyle(t.style.sub());i=yp(l,m,t),p||(d=c.depth+m.fontMetrics().subDrop*m.sizeMultiplier/t.sizeMultiplier)}o=t.style===vh.DISPLAY?u.sup1:t.style.cramped?u.sup3:u.sup2;var g,v=t.sizeMultiplier,y=jh(.5/u.ptPerEm/v),b=null;if(i){var _=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(c instanceof Yh||_)&&(b=jh(-c.italic))}if(r&&i){h=Math.max(h,o,r.depth+.25*u.xHeight),d=Math.max(d,u.sub2);var w=4*u.defaultRuleThickness;if(h-r.depth-(i.height-d)<w){d=w-(h-r.depth)+i.height;var k=.8*u.xHeight-(h-r.depth);k>0&&(h+=k,d-=k)}var x=[{type:"elem",elem:i,shift:d,marginRight:y,marginLeft:b},{type:"elem",elem:r,shift:-h,marginRight:y}];g=Yd.makeVList({positionType:"individualShift",children:x},t)}else if(i){d=Math.max(d,u.sub1,i.height-.8*u.xHeight);var C=[{type:"elem",elem:i,marginLeft:b,marginRight:y}];g=Yd.makeVList({positionType:"shift",positionData:d,children:C},t)}else{if(!r)throw new Error("supsub must have either sup or sub.");h=Math.max(h,o,r.depth+.25*u.xHeight),g=Yd.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:r,marginRight:y}]},t)}var S=gp(c,"right")||"mord";return Yd.makeSpan([S],[c,Yd.makeSpan(["msupsub"],[g])],t)},mathmlBuilder(e,t){var n,r=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(r=!0,n=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,o=[Bp(e.base,t)];if(e.sub&&o.push(Bp(e.sub,t)),e.sup&&o.push(Bp(e.sup,t)),r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var a=e.base;i=a&&"op"===a.type&&a.limits&&t.style===vh.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(t.style===vh.DISPLAY||a.limits)?"munderover":"msubsup"}else{var s=e.base;i=s&&"op"===s.type&&s.limits&&(t.style===vh.DISPLAY||s.alwaysHandleSupSub)||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(s.limits||t.style===vh.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===vh.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===vh.DISPLAY)?"mover":"msup"}return new Cp.MathNode(i,o)}}),ip({type:"atom",htmlBuilder:(e,t)=>Yd.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var n=new Cp.MathNode("mo",[Sp(e.text,e.mode)]);if("bin"===e.family){var r=Ep(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||n.setAttribute("stretchy","false");return n}});var gm={mi:"italic",mn:"normal",mtext:"normal"};ip({type:"mathord",htmlBuilder:(e,t)=>Yd.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var n=new Cp.MathNode("mi",[Sp(e.text,e.mode,t)]),r=Ep(e,t)||"italic";return r!==gm[n.type]&&n.setAttribute("mathvariant",r),n}}),ip({type:"textord",htmlBuilder:(e,t)=>Yd.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var n,r=Sp(e.text,e.mode,t),i=Ep(e,t)||"normal";return n="text"===e.mode?new Cp.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new Cp.MathNode("mn",[r]):"\\prime"===e.text?new Cp.MathNode("mo",[r]):new Cp.MathNode("mi",[r]),i!==gm[n.type]&&n.setAttribute("mathvariant",i),n}});var vm={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},ym={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ip({type:"spacing",htmlBuilder(e,t){if(ym.hasOwnProperty(e.text)){var n=ym[e.text].className||"";if("text"===e.mode){var r=Yd.makeOrd(e,t,"textord");return r.classes.push(n),r}return Yd.makeSpan(["mspace",n],[Yd.mathsym(e.text,e.mode,t)],t)}if(vm.hasOwnProperty(e.text))return Yd.makeSpan(["mspace",vm[e.text]],[],t);throw new eh('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!ym.hasOwnProperty(e.text)){if(vm.hasOwnProperty(e.text))return new Cp.MathNode("mspace");throw new eh('Unknown type of space "'+e.text+'"')}return new Cp.MathNode("mtext",[new Cp.TextNode("")])}});var bm=()=>{var e=new Cp.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};ip({type:"tag",mathmlBuilder(e,t){var n=new Cp.MathNode("mtable",[new Cp.MathNode("mtr",[bm(),new Cp.MathNode("mtd",[Dp(e.body,t)]),bm(),new Cp.MathNode("mtd",[Dp(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var _m={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},wm={"\\textbf":"textbf","\\textmd":"textmd"},km={"\\textit":"textit","\\textup":"textup"},xm=(e,t)=>{var n=e.font;return n?_m[n]?t.withTextFontFamily(_m[n]):wm[n]?t.withTextFontWeight(wm[n]):"\\emph"===n?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(km[n]):t};rp({type:"text",names:[
// Font families
"\\text","\\textrm","\\textsf","\\texttt","\\textnormal",
// Font weights
"\\textbf","\\textmd",
// Font Shapes
"\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"text",mode:n.mode,body:ap(i),font:r}},htmlBuilder(e,t){var n=xm(e,t),r=dp(e.body,n,!0);return Yd.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=xm(e,t);return Dp(e.body,n)}}),rp({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=yp(e.body,t),r=Yd.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,o=Yd.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},t);return Yd.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var n=new Cp.MathNode("mo",[new Cp.TextNode("")]);n.setAttribute("stretchy","true");var r=new Cp.MathNode("munder",[Bp(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),rp({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],
// In LaTeX, \vcenter can act only on a box.
allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=yp(e.body,t),r=t.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return Yd.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:(e,t)=>new Cp.MathNode("mpadded",[Bp(e.body,t)],["vcenter"])}),rp({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new eh("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=Cm(e),r=[],i=t.havingStyle(t.style.text()),o=0;o<n.length;o++){var a=n[o];"~"===a&&(a="\\textasciitilde"),r.push(Yd.makeSymbol(a,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Yd.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Yd.tryCombineChars(r),i)},mathmlBuilder(e,t){var n=new Cp.TextNode(Cm(e)),r=new Cp.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var Cm=e=>e.body.replace(/ /g,e.star?"":""),Sm=ep,Tm="[ \r\n\t]",Em="(\\\\[a-zA-Z@]+)"+Tm+"*",Im="[-]",Am=new RegExp(Im+"+$"),Dm="("+Tm+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]---]"+// single codepoint
Im+"*|[\ud800-\udbff][\udc00-\udfff]"+// surrogate pair
Im+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+Em+// \macroName + spaces
"|\\\\[^\ud800-\udfff])";class Bm{
// Category codes. The lexer only supports comment characters (14) for now.
// MacroExpander additionally distinguishes active (13).
constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Dm,"g"),this.catcodes={"%":14,
// comment character
"~":13}}setCatcode(e,t){this.catcodes[e]=t}
/**
   * This function lexes a single token.
   */lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Qu("EOF",new Ju(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new eh("Unexpected character: '"+e[t]+"'",new Qu(e[t],new Ju(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[r]){var i=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Qu(r,new Ju(this,t,this.tokenRegex.lastIndex))}}class Lm{
/**
   * Both arguments are optional.  The first argument is an object of
   * built-in mappings which never change.  The second argument is an object
   * of initial (global-level) mappings, which will constantly change
   * according to any global/top-level `set`s done.
   */
constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}
/**
   * Start a new nested group, affecting future local `set`s.
   */beginGroup(){this.undefStack.push({})}
/**
   * End current nested group, restoring values before the group began.
   */endGroup(){if(0===this.undefStack.length)throw new eh("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}
/**
   * Ends all currently nested groups (if any), restoring values before the
   * groups began.  Useful in case of an error in the middle of parsing.
   */endGroups(){for(;this.undefStack.length>0;)this.endGroup()}
/**
   * Detect whether `name` has a definition.  Equivalent to
   * `get(name) != null`.
   */has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}
/**
   * Get the current value of a name, or `undefined` if there is no value.
   *
   * Note: Do not use `if (namespace.get(...))` to detect whether a macro
   * is defined, as the definition may be the empty string which evaluates
   * to `false` in JavaScript.  Use `if (namespace.get(...) != null)` or
   * `if (namespace.has(...))`.
   */get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}
/**
   * Set the current value of a name, and optionally set it globally too.
   * Local set() sets the current value and (when appropriate) adds an undo
   * operation to the undo stack.  Global set() may change the undo
   * operation at every level, so takes time linear in their number.
   * A value of undefined means to delete existing definitions.
   */set(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var Mm=Nf;jf("\\noexpand",(function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}})),jf("\\expandafter",(function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}})),jf("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),jf("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),jf("\\@ifnextchar",(function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),jf("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),jf("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var Fm={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};jf("\\char",(function(e){var t,n=e.popToken(),r="";if("'"===n.text)t=8,n=e.popToken();else if('"'===n.text)t=16,n=e.popToken();else if("`"===n.text)if("\\"===(n=e.popToken()).text[0])r=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new eh("\\char` missing argument");r=n.text.charCodeAt(0)}else t=10;if(t){if(null==(r=Fm[n.text])||r>=t)throw new eh("Invalid base-"+t+" digit "+n.text);for(var i;null!=(i=Fm[e.future().text])&&i<t;)r*=t,r+=i,e.popToken()}return"\\@char{"+r+"}"}));var Om=(e,t,n,r)=>{var i=e.consumeArg().tokens;if(1!==i.length)throw new eh("\\newcommand's first argument must be a macro name");var o=i[0].text,a=e.isDefined(o);if(a&&!t)throw new eh("\\newcommand{"+o+"} attempting to redefine "+o+"; use \\renewcommand");if(!a&&!n)throw new eh("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var s=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new eh("Invalid number of arguments: "+l);s=parseInt(l),i=e.consumeArg().tokens}return a&&r||e.macros.set(o,{tokens:i,numArgs:s}),""};jf("\\newcommand",(e=>Om(e,!1,!0,!1))),jf("\\renewcommand",(e=>Om(e,!0,!1,!1))),jf("\\providecommand",(e=>Om(e,!0,!0,!0))),jf("\\message",(e=>{e.consumeArgs(1)[0];return""})),jf("\\errmessage",(e=>{e.consumeArgs(1)[0];return""})),jf("\\show",(e=>{e.popToken().text;return""})),jf("\\bgroup","{"),jf("\\egroup","}"),jf("~","\\nobreakspace"),jf("\\lq","`"),jf("\\rq","'"),jf("\\aa","\\r a"),jf("\\AA","\\r A"),jf("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),jf("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),jf("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),jf("","\\mathscr{B}"),jf("","\\mathscr{E}"),jf("","\\mathscr{F}"),jf("","\\mathscr{H}"),jf("","\\mathscr{I}"),jf("","\\mathscr{L}"),jf("","\\mathscr{M}"),jf("","\\mathscr{R}"),jf("","\\mathfrak{C}"),jf("","\\mathfrak{H}"),jf("","\\mathfrak{Z}"),jf("\\Bbbk","\\Bbb{k}"),jf("","\\cdotp"),jf("\\llap","\\mathllap{\\textrm{#1}}"),jf("\\rlap","\\mathrlap{\\textrm{#1}}"),jf("\\clap","\\mathclap{\\textrm{#1}}"),jf("\\mathstrut","\\vphantom{(}"),jf("\\underbar","\\underline{\\text{#1}}"),jf("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),jf("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),jf("\\ne","\\neq"),jf("","\\neq"),jf("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),jf("","\\notin"),jf("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),jf("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),jf("","\\perp"),jf("","\\mathclose{!\\mkern-0.8mu!}"),jf("","\\notni"),jf("","\\ulcorner"),jf("","\\urcorner"),jf("","\\llcorner"),jf("","\\lrcorner"),jf("","\\copyright"),jf("","\\textregistered"),jf("","\\textregistered"),jf("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),jf("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),jf("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),jf("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),jf("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),jf("","\\vdots"),jf("\\varGamma","\\mathit{\\Gamma}"),jf("\\varDelta","\\mathit{\\Delta}"),jf("\\varTheta","\\mathit{\\Theta}"),jf("\\varLambda","\\mathit{\\Lambda}"),jf("\\varXi","\\mathit{\\Xi}"),jf("\\varPi","\\mathit{\\Pi}"),jf("\\varSigma","\\mathit{\\Sigma}"),jf("\\varUpsilon","\\mathit{\\Upsilon}"),jf("\\varPhi","\\mathit{\\Phi}"),jf("\\varPsi","\\mathit{\\Psi}"),jf("\\varOmega","\\mathit{\\Omega}"),jf("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),jf("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),jf("\\boxed","\\fbox{$\\displaystyle{#1}$}"),jf("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),jf("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),jf("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),jf("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),jf("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Pm={",":"\\dotsc","\\not":"\\dotsb",
// \keybin@ checks for the following:
"+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb",
// Symbols whose definition starts with \DOTSB:
"\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb",
// Symbols whose definition starts with \mathbin:
"\\mathbin":"\\dotsb",
// Symbols whose definition starts with \mathrel:
"\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb",
// Symbols whose definition starts with \DOTSI:
"\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi",
// Symbols whose definition starts with \DOTSX:
"\\DOTSX":"\\dotsx"};jf("\\dots",(function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in Pm?t=Pm[n]:("\\not"===n.slice(0,4)||n in td.math&&oh.contains(["bin","rel"],td.math[n].group))&&(t="\\dotsb"),t}));var Nm={
// \rightdelim@ checks for the following:
")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,
// \extra@ also tests for the following:
$:!0,
// \extrap@ checks for the following:
";":!0,".":!0,",":!0};jf("\\dotso",(function(e){return e.future().text in Nm?"\\ldots\\,":"\\ldots"})),jf("\\dotsc",(function(e){var t=e.future().text;return t in Nm&&","!==t?"\\ldots\\,":"\\ldots"})),jf("\\cdots",(function(e){return e.future().text in Nm?"\\@cdots\\,":"\\@cdots"})),jf("\\dotsb","\\cdots"),jf("\\dotsm","\\cdots"),jf("\\dotsi","\\!\\cdots"),jf("\\dotsx","\\ldots\\,"),jf("\\DOTSI","\\relax"),jf("\\DOTSB","\\relax"),jf("\\DOTSX","\\relax"),jf("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),jf("\\,","\\tmspace+{3mu}{.1667em}"),jf("\\thinspace","\\,"),jf("\\>","\\mskip{4mu}"),jf("\\:","\\tmspace+{4mu}{.2222em}"),jf("\\medspace","\\:"),jf("\\;","\\tmspace+{5mu}{.2777em}"),jf("\\thickspace","\\;"),jf("\\!","\\tmspace-{3mu}{.1667em}"),jf("\\negthinspace","\\!"),jf("\\negmedspace","\\tmspace-{4mu}{.2222em}"),jf("\\negthickspace","\\tmspace-{5mu}{.277em}"),jf("\\enspace","\\kern.5em "),jf("\\enskip","\\hskip.5em\\relax"),jf("\\quad","\\hskip1em\\relax"),jf("\\qquad","\\hskip2em\\relax"),jf("\\tag","\\@ifstar\\tag@literal\\tag@paren"),jf("\\tag@paren","\\tag@literal{({#1})}"),jf("\\tag@literal",(e=>{if(e.macros.get("\\df@tag"))throw new eh("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),jf("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),jf("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),jf("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),jf("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),jf("\\newline","\\\\\\relax"),jf("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var jm=jh(Ch["Main-Regular"]["T".charCodeAt(0)][1]-.7*Ch["Main-Regular"]["A".charCodeAt(0)][1]);jf("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+jm+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),jf("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+jm+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),jf("\\hspace","\\@ifstar\\@hspacer\\@hspace"),jf("\\@hspace","\\hskip #1\\relax"),jf("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),jf("\\ordinarycolon",":"),jf("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),jf("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),jf("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),jf("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),jf("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),jf("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),jf("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),jf("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),jf("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),jf("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),jf("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),jf("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),jf("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),jf("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),jf("","\\dblcolon"),jf("","\\eqcolon"),jf("","\\coloneqq"),jf("","\\eqqcolon"),jf("","\\Coloneqq"),jf("\\ratio","\\vcentcolon"),jf("\\coloncolon","\\dblcolon"),jf("\\colonequals","\\coloneqq"),jf("\\coloncolonequals","\\Coloneqq"),jf("\\equalscolon","\\eqqcolon"),jf("\\equalscoloncolon","\\Eqqcolon"),jf("\\colonminus","\\coloneq"),jf("\\coloncolonminus","\\Coloneq"),jf("\\minuscolon","\\eqcolon"),jf("\\minuscoloncolon","\\Eqcolon"),jf("\\coloncolonapprox","\\Colonapprox"),jf("\\coloncolonsim","\\Colonsim"),jf("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),jf("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),jf("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),jf("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),jf("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),jf("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),jf("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),jf("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),jf("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),jf("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),jf("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),jf("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),jf("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),jf("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),jf("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),jf("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),jf("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),jf("\\nleqq","\\html@mathml{\\@nleqq}{}"),jf("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),jf("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),jf("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),jf("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),jf("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),jf("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),jf("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),jf("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),jf("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),jf("\\imath","\\html@mathml{\\@imath}{}"),jf("\\jmath","\\html@mathml{\\@jmath}{}"),jf("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),jf("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),jf("","\\llbracket"),jf("","\\rrbracket"),jf("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),jf("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),jf("","\\lBrace"),jf("","\\rBrace"),jf("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),jf("","\\minuso"),jf("\\darr","\\downarrow"),jf("\\dArr","\\Downarrow"),jf("\\Darr","\\Downarrow"),jf("\\lang","\\langle"),jf("\\rang","\\rangle"),jf("\\uarr","\\uparrow"),jf("\\uArr","\\Uparrow"),jf("\\Uarr","\\Uparrow"),jf("\\N","\\mathbb{N}"),jf("\\R","\\mathbb{R}"),jf("\\Z","\\mathbb{Z}"),jf("\\alef","\\aleph"),jf("\\alefsym","\\aleph"),jf("\\Alpha","\\mathrm{A}"),jf("\\Beta","\\mathrm{B}"),jf("\\bull","\\bullet"),jf("\\Chi","\\mathrm{X}"),jf("\\clubs","\\clubsuit"),jf("\\cnums","\\mathbb{C}"),jf("\\Complex","\\mathbb{C}"),jf("\\Dagger","\\ddagger"),jf("\\diamonds","\\diamondsuit"),jf("\\empty","\\emptyset"),jf("\\Epsilon","\\mathrm{E}"),jf("\\Eta","\\mathrm{H}"),jf("\\exist","\\exists"),jf("\\harr","\\leftrightarrow"),jf("\\hArr","\\Leftrightarrow"),jf("\\Harr","\\Leftrightarrow"),jf("\\hearts","\\heartsuit"),jf("\\image","\\Im"),jf("\\infin","\\infty"),jf("\\Iota","\\mathrm{I}"),jf("\\isin","\\in"),jf("\\Kappa","\\mathrm{K}"),jf("\\larr","\\leftarrow"),jf("\\lArr","\\Leftarrow"),jf("\\Larr","\\Leftarrow"),jf("\\lrarr","\\leftrightarrow"),jf("\\lrArr","\\Leftrightarrow"),jf("\\Lrarr","\\Leftrightarrow"),jf("\\Mu","\\mathrm{M}"),jf("\\natnums","\\mathbb{N}"),jf("\\Nu","\\mathrm{N}"),jf("\\Omicron","\\mathrm{O}"),jf("\\plusmn","\\pm"),jf("\\rarr","\\rightarrow"),jf("\\rArr","\\Rightarrow"),jf("\\Rarr","\\Rightarrow"),jf("\\real","\\Re"),jf("\\reals","\\mathbb{R}"),jf("\\Reals","\\mathbb{R}"),jf("\\Rho","\\mathrm{P}"),jf("\\sdot","\\cdot"),jf("\\sect","\\S"),jf("\\spades","\\spadesuit"),jf("\\sub","\\subset"),jf("\\sube","\\subseteq"),jf("\\supe","\\supseteq"),jf("\\Tau","\\mathrm{T}"),jf("\\thetasym","\\vartheta"),jf("\\weierp","\\wp"),jf("\\Zeta","\\mathrm{Z}"),jf("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),jf("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),jf("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),jf("\\bra","\\mathinner{\\langle{#1}|}"),jf("\\ket","\\mathinner{|{#1}\\rangle}"),jf("\\braket","\\mathinner{\\langle{#1}\\rangle}"),jf("\\Bra","\\left\\langle#1\\right|"),jf("\\Ket","\\left|#1\\right\\rangle");var zm=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,i=t.consumeArg().tokens,o=t.consumeArg().tokens,a=t.macros.get("|"),s=t.macros.get("\\|");t.macros.beginGroup();var l=t=>n=>{e&&(n.macros.set("|",a),i.length&&n.macros.set("\\|",s));var o=t;!t&&i.length&&("|"===n.future().text&&(n.popToken(),o=!0));return{tokens:o?i:r,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...o,...c,...n]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};jf("\\bra@ket",zm(!1)),jf("\\bra@set",zm(!0)),jf("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),jf("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),jf("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),jf("\\angln","{\\angl n}"),jf("\\blue","\\textcolor{##6495ed}{#1}"),jf("\\orange","\\textcolor{##ffa500}{#1}"),jf("\\pink","\\textcolor{##ff00af}{#1}"),jf("\\red","\\textcolor{##df0030}{#1}"),jf("\\green","\\textcolor{##28ae7b}{#1}"),jf("\\gray","\\textcolor{gray}{#1}"),jf("\\purple","\\textcolor{##9d38bd}{#1}"),jf("\\blueA","\\textcolor{##ccfaff}{#1}"),jf("\\blueB","\\textcolor{##80f6ff}{#1}"),jf("\\blueC","\\textcolor{##63d9ea}{#1}"),jf("\\blueD","\\textcolor{##11accd}{#1}"),jf("\\blueE","\\textcolor{##0c7f99}{#1}"),jf("\\tealA","\\textcolor{##94fff5}{#1}"),jf("\\tealB","\\textcolor{##26edd5}{#1}"),jf("\\tealC","\\textcolor{##01d1c1}{#1}"),jf("\\tealD","\\textcolor{##01a995}{#1}"),jf("\\tealE","\\textcolor{##208170}{#1}"),jf("\\greenA","\\textcolor{##b6ffb0}{#1}"),jf("\\greenB","\\textcolor{##8af281}{#1}"),jf("\\greenC","\\textcolor{##74cf70}{#1}"),jf("\\greenD","\\textcolor{##1fab54}{#1}"),jf("\\greenE","\\textcolor{##0d923f}{#1}"),jf("\\goldA","\\textcolor{##ffd0a9}{#1}"),jf("\\goldB","\\textcolor{##ffbb71}{#1}"),jf("\\goldC","\\textcolor{##ff9c39}{#1}"),jf("\\goldD","\\textcolor{##e07d10}{#1}"),jf("\\goldE","\\textcolor{##a75a05}{#1}"),jf("\\redA","\\textcolor{##fca9a9}{#1}"),jf("\\redB","\\textcolor{##ff8482}{#1}"),jf("\\redC","\\textcolor{##f9685d}{#1}"),jf("\\redD","\\textcolor{##e84d39}{#1}"),jf("\\redE","\\textcolor{##bc2612}{#1}"),jf("\\maroonA","\\textcolor{##ffbde0}{#1}"),jf("\\maroonB","\\textcolor{##ff92c6}{#1}"),jf("\\maroonC","\\textcolor{##ed5fa6}{#1}"),jf("\\maroonD","\\textcolor{##ca337c}{#1}"),jf("\\maroonE","\\textcolor{##9e034e}{#1}"),jf("\\purpleA","\\textcolor{##ddd7ff}{#1}"),jf("\\purpleB","\\textcolor{##c6b9fc}{#1}"),jf("\\purpleC","\\textcolor{##aa87ff}{#1}"),jf("\\purpleD","\\textcolor{##7854ab}{#1}"),jf("\\purpleE","\\textcolor{##543b78}{#1}"),jf("\\mintA","\\textcolor{##f5f9e8}{#1}"),jf("\\mintB","\\textcolor{##edf2df}{#1}"),jf("\\mintC","\\textcolor{##e0e5cc}{#1}"),jf("\\grayA","\\textcolor{##f6f7f7}{#1}"),jf("\\grayB","\\textcolor{##f0f1f2}{#1}"),jf("\\grayC","\\textcolor{##e3e5e6}{#1}"),jf("\\grayD","\\textcolor{##d6d8da}{#1}"),jf("\\grayE","\\textcolor{##babec2}{#1}"),jf("\\grayF","\\textcolor{##888d93}{#1}"),jf("\\grayG","\\textcolor{##626569}{#1}"),jf("\\grayH","\\textcolor{##3b3e40}{#1}"),jf("\\grayI","\\textcolor{##21242c}{#1}"),jf("\\kaBlue","\\textcolor{##314453}{#1}"),jf("\\kaGreen","\\textcolor{##71B307}{#1}");var Rm={"^":!0,
// Parser.js
_:!0,
// Parser.js
"\\limits":!0,
// Parser.js
"\\nolimits":!0};class qm{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Lm(Mm,t.macros),this.mode=n,this.stack=[]}
/**
   * Feed a new input string to the same MacroExpander
   * (with existing macros etc.).
   */feed(e){this.lexer=new Bm(e,this.settings)}
/**
   * Switches between "text" and "math" modes.
   */switchMode(e){this.mode=e}
/**
   * Start a new group nesting within all namespaces.
   */beginGroup(){this.macros.beginGroup()}
/**
   * End current group nesting within all namespaces.
   */endGroup(){this.macros.endGroup()}
/**
   * Ends all currently nested groups (if any), restoring values before the
   * groups began.  Useful in case of an error in the middle of parsing.
   */endGroups(){this.macros.endGroups()}
/**
   * Returns the topmost token on the stack, without expanding it.
   * Similar in behavior to TeX's `\futurelet`.
   */future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}
/**
   * Remove and return the next unexpanded token.
   */popToken(){return this.future(),this.stack.pop()}
/**
   * Add a given token to the token stack.  In particular, this get be used
   * to put back a token returned from one of the other methods.
   */pushToken(e){this.stack.push(e)}
/**
   * Append an array of tokens to the token stack.
   */pushTokens(e){this.stack.push(...e)}
/**
   * Find an macro argument without expanding tokens and append the array of
   * tokens to the token stack. Uses Token as a container for the result.
   */scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:r,end:n}=this.consumeArg(["]"]))}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new Qu("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}
/**
   * Consume all following space tokens, without expansion.
   */consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}
/**
   * Consume an argument from the token stream, and return the resulting array
   * of tokens and start/end token.
   */consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r,i=this.future(),o=0,a=0;do{if(r=this.popToken(),t.push(r),"{"===r.text)++o;else if("}"===r.text){if(-1===--o)throw new eh("Extra }",r)}else if("EOF"===r.text)throw new eh("Unexpected end of input in a macro argument, expected '"+(e&&n?e[a]:"}")+"'",r);if(e&&n)if((0===o||1===o&&"{"===e[a])&&r.text===e[a]){if(++a===e.length){t.splice(-a,a);break}}else a=0}while(0!==o||n);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:r}}
/**
   * Consume the specified number of (delimited) arguments from the token
   * stream and return the resulting array of arguments.
   */consumeArgs(e,t){if(t){if(t.length!==e+1)throw new eh("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var i=this.popToken();if(n[r]!==i.text)throw new eh("Use of the macro doesn't match its definition",i)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(t&&t[a+1]).tokens);return o}
/**
   * Increment `expansionCount` by the specified amount.
   * Throw an error if it exceeds `maxExpand`.
   */countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new eh("Too many expansions: infinite loop or need to increase maxExpand setting")}
/**
   * Expand the next token only once if possible.
   *
   * If the token is expanded, the resulting tokens will be pushed onto
   * the stack in reverse order, and the number of such tokens will be
   * returned.  This number might be zero or positive.
   *
   * If not, the return value is `false`, and the next token remains at the
   * top of the stack.
   *
   * In either case, the next token will be on the top of the stack,
   * or the stack will be empty (in case of empty expansion
   * and no other tokens).
   *
   * Used to implement `expandAfterFuture` and `expandNextToken`.
   *
   * If expandableOnly, only expandable tokens are expanded and
   * an undefined control sequence results in an error.
   */expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(null==r||e&&r.unexpandable){if(e&&null==r&&"\\"===n[0]&&!this.isDefined(n))throw new eh("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var i=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs)for(var a=(i=i.slice()).length-1;a>=0;--a){var s=i[a];if("#"===s.text){if(0===a)throw new eh("Incomplete placeholder at end of macro body",s);if("#"===(s=i[--a]).text)i.splice(a+1,1);else{if(!/^[1-9]$/.test(s.text))throw new eh("Not a valid argument number",s);i.splice(a,2,...o[+s.text-1])}}}return this.pushTokens(i),i.length}
/**
   * Expand the next token only once (if possible), and return the resulting
   * top token on the stack (without removing anything from the stack).
   * Similar in behavior to TeX's `\expandafter\futurelet`.
   * Equivalent to expandOnce() followed by future().
   */expandAfterFuture(){return this.expandOnce(),this.future()}
/**
   * Recursively expand first token, then return first non-expandable token.
   */expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}
/**
   * Fully expand the given macro name and return the resulting list of
   * tokens, or return `undefined` if no such macro is defined.
   */expandMacro(e){return this.macros.has(e)?this.expandTokens([new Qu(e)]):void 0}
/**
   * Fully expand the given token stream and return the resulting list of
   * tokens.  Note that the input tokens are in reverse order, but the
   * output tokens are in forward order.
   */expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(!1===this.expandOnce(!0)){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return this.countExpansion(t.length),t}
/**
   * Fully expand the given macro name and return the result as a string,
   * or return `undefined` if no such macro is defined.
   */expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map((e=>e.text)).join(""):t}
/**
   * Returns the expanded macro as a reversed array of tokens and a macro
   * argument count.  Or returns `null` if no such macro.
   */_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var n=this.lexer.catcodes[e];if(null!=n&&13!==n)return}var r="function"==typeof t?t(this):t;if("string"==typeof r){var i=0;if(-1!==r.indexOf("#"))for(var o=r.replace(/##/g,"");-1!==o.indexOf("#"+(i+1));)++i;for(var a=new Bm(r,this.settings),s=[],l=a.lex();"EOF"!==l.text;)s.push(l),l=a.lex();return s.reverse(),{tokens:s,numArgs:i}}return r}
/**
   * Determine whether a command is currently "defined" (has some
   * functionality), meaning that it's a macro (in the current group),
   * a function, a symbol, or one of the special commands listed in
   * `implicitCommands`.
   */isDefined(e){return this.macros.has(e)||Sm.hasOwnProperty(e)||td.math.hasOwnProperty(e)||td.text.hasOwnProperty(e)||Rm.hasOwnProperty(e)}
/**
   * Determine whether a command is expandable.
   */isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:Sm.hasOwnProperty(e)&&!Sm[e].primitive}}var $m=/^[]/,Um=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"","":"","":"","":"","":"","":""}),Hm={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Wm={"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"k","":"k","":"k","":"l","":"l","":"l","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"p","":"p","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"K","":"K","":"K","":"L","":"L","":"L","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"P","":"P","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};class Gm{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new qm(e,t,this.mode),this.settings=t,this.leftrightDepth=0}
/**
   * Checks a result to make sure it has the right type, and throws an
   * appropriate error otherwise.
   */expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new eh("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}
/**
   * Discards the current lookahead token, considering it consumed.
   */consume(){this.nextToken=null}
/**
   * Return the current lookahead token, or if there isn't one (at the
   * beginning, or if the previous lookahead token was consume()d),
   * fetch the next token as the new lookahead token and return it.
   */fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}
/**
   * Switches between "text" and "math" modes.
   */switchMode(e){this.mode=e,this.gullet.switchMode(e)}
/**
   * Main parsing function, which parses an entire input.
   */parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}
/**
   * Fully parse a separate sequence of tokens as a separate job.
   * Tokens should be specified in reverse order, as in a MacroDefinition.
   */subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Qu("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}
/**
   * Parses an "expression", which is a list of atoms.
   *
   * `breakOnInfix`: Should the parsing stop when we hit infix nodes? This
   *                 happens when functions have higher precedence han infix
   *                 nodes in implicit parses.
   *
   * `breakOnTokenText`: The text of the token that the expression should end
   *                     with, or `null` if something else should end the
   *                     expression.
   */parseExpression(e,t){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var r=this.fetch();if(-1!==Gm.endOfExpression.indexOf(r.text))break;if(t&&r.text===t)break;if(e&&Sm[r.text]&&Sm[r.text].infix)break;var i=this.parseAtom(t);if(!i)break;"internal"!==i.type&&n.push(i)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}
/**
   * Rewrites infix operators such as \over with corresponding commands such
   * as \frac.
   *
   * There can only be one infix operator per group.  If there's more than one
   * then the expression is ambiguous.  This can be resolved by adding {}.
   */handleInfixNodes(e){for(var t,n=-1,r=0;r<e.length;r++)if("infix"===e[r].type){if(-1!==n)throw new eh("only one infix operator per group",e[r].token);n=r,t=e[r].replaceWith}if(-1!==n&&t){var i,o,a=e.slice(0,n),s=e.slice(n+1);return i=1===a.length&&"ordgroup"===a[0].type?a[0]:{type:"ordgroup",mode:this.mode,body:a},o=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},["\\\\abovefrac"===t?this.callFunction(t,[i,e[n],o],[]):this.callFunction(t,[i,o],[])]}return e}
/**
   * Handle a subscript or superscript with nice errors.
   */handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new eh("Expected group after '"+n+"'",t);return r}
/**
   * Converts the textual input of an unsupported command into a text node
   * contained within a color node whose color is determined by errorColor
   */formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}
/**
   * Parses a group with optional super/subscripts.
   */parseAtom(e){var t,n,r=this.parseGroup("atom",e);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(r&&"op"===r.type){var o="\\limits"===i.text;r.limits=o,r.alwaysHandleSupSub=!0}else{if(!r||"operatorname"!==r.type)throw new eh("Limit controls must follow a math operator",i);r.alwaysHandleSupSub&&(r.limits="\\limits"===i.text)}this.consume()}else if("^"===i.text){if(t)throw new eh("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new eh("Double subscript",i);n=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new eh("Double superscript",i);var a={type:"textord",mode:this.mode,text:"\\prime"},s=[a];for(this.consume();"'"===this.fetch().text;)s.push(a),this.consume();"^"===this.fetch().text&&s.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:s}}else{if(!Um[i.text])break;var l=$m.test(i.text),c=[];for(c.push(new Qu(Um[i.text])),this.consume();;){var u=this.fetch().text;if(!Um[u])break;if($m.test(u)!==l)break;c.unshift(new Qu(Um[u])),this.consume()}var h=this.subparse(c);l?n={type:"ordgroup",mode:"math",body:h}:t={type:"ordgroup",mode:"math",body:h}}}return t||n?{type:"supsub",mode:this.mode,base:r,sup:t,sub:n}:r}
/**
   * Parses an entire function, including its base and all of its arguments.
   */parseFunction(e,t){var n=this.fetch(),r=n.text,i=Sm[r];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new eh("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!i.allowedInText)throw new eh("Can't use function '"+r+"' in text mode",n);if("math"===this.mode&&!1===i.allowedInMath)throw new eh("Can't use function '"+r+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(r,i);return this.callFunction(r,o,a,n,e)}
/**
   * Call a function handler with a suitable context and arguments.
   */callFunction(e,t,n,r,i){var o={funcName:e,parser:this,token:r,breakOnTokenText:i},a=Sm[e];if(a&&a.handler)return a.handler(o,t,n);throw new eh("No function handler for "+e)}
/**
   * Parses the arguments of a function or environment
   */parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=[],i=[],o=0;o<n;o++){var a=t.argTypes&&t.argTypes[o],s=o<t.numOptionalArgs;(t.primitive&&null==a||// \sqrt expands into primitive if optional argument doesn't exist
"sqrt"===t.type&&1===o&&null==i[0])&&(a="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",a,s);if(s)i.push(l);else{if(null==l)throw new eh("Null argument, please report this as a bug");r.push(l)}}return{args:r,optArgs:i}}
/**
   * Parses a group when the mode is changing.
   */parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":var r=this.parseArgumentGroup(n,"text");return null!=r?{type:"styling",mode:r.mode,body:[r],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",n);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(n)throw new eh("A primitive argument cannot be optional");var o=this.parseGroup(e);if(null==o)throw new eh("Expected group as "+e,this.fetch());return o;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new eh("Unknown group type as "+e,this.fetch())}}
/**
   * Discard any space tokens, fetching the next non-space token.
   */consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}
/**
   * Parses a group, essentially returning the string formed by the
   * brace-enclosed tokens plus some position information.
   */parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(null==n)return null;for(var r,i="";"EOF"!==(r=this.fetch()).text;)i+=r.text,this.consume();return this.consume(),n.text=i,n}
/**
   * Parses a regex-delimited group: the largest sequence of tokens
   * whose concatenated strings match `regex`. Returns the string
   * formed by the tokens plus some position information.
   */parseRegexGroup(e,t){for(var n,r=this.fetch(),i=r,o="";"EOF"!==(n=this.fetch()).text&&e.test(o+n.text);)o+=(i=n).text,this.consume();if(""===o)throw new eh("Invalid "+t+": '"+r.text+"'",r);return r.range(i,o)}
/**
   * Parses a color description.
   */parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new eh("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}
/**
   * Parses a size specification, consisting of magnitude and unit.
   */parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new eh("Invalid size: '"+t.text+"'",t);var i={number:+(r[1]+r[2]),
// sign + magnitude, cast to number
unit:r[3]};if(!Ph(i))throw new eh("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:n}}
/**
   * Parses an URL, checking escaped letters and allowed protocols,
   * and setting the catcode of % as an active character (as in \hyperref).
   */parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}
/**
   * Parses an argument with the mode specified.
   */parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(null==n)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return t&&this.switchMode(r),o}
/**
   * Parses an ordinary group, which is either a single nucleus (like "x")
   * or an expression in braces (like "{x+y}") or an implicit group, a group
   * that starts at the current position, and ends right before a higher explicit
   * group ends, or at EOF.
   */parseGroup(e,t){var n,r=this.fetch(),i=r.text;if("{"===i||"\\begingroup"===i){this.consume();var o="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),s=this.fetch();this.expect(o),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:Ju.range(r,s),body:a,
// A group formed by \begingroup...\endgroup is a semi-simple group
// which doesn't affect spacing in math mode, i.e., is transparent.
// https://tex.stackexchange.com/questions/1930/when-should-one-
// use-begingroup-instead-of-bgroup
semisimple:"\\begingroup"===i||void 0}}else if(null==(n=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!Rm.hasOwnProperty(i)){if(this.settings.throwOnError)throw new eh("Undefined control sequence: "+i,r);n=this.formatUnsupportedCmd(i),this.consume()}return n}
/**
   * Form ligature-like combinations of characters for text mode.
   * This includes inputs like "--", "---", "``" and "''".
   * The result will simply replace multiple textord nodes with a single
   * character in each value by a single textord node having multiple
   * characters in its value.  The representation is still ASCII source.
   * The group will be modified in place.
   */formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],i=r.text;"-"===i&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:Ju.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ju.range(r,e[n+1]),text:"--"}),t-=1)),"'"!==i&&"`"!==i||e[n+1].text!==i||(e.splice(n,2,{type:"textord",mode:"text",loc:Ju.range(r,e[n+1]),text:i+i}),t-=1)}}
/**
   * Parse a single symbol out of the string. Here, we handle single character
   * symbols and special functions like \verb.
   */parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r="*"===n.charAt(0);if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new eh("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:r}}Wm.hasOwnProperty(t[0])&&!td[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Wm[t[0]]+t.slice(1));var i,o=Am.exec(t);if(o&&("i"===(t=t.substring(0,o.index))?t="":"j"===t&&(t="")),td[this.mode][t]){this.settings.strict&&"math"===this.mode&&Md.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var a,s=td[this.mode][t].group,l=Ju.range(e);if(Qh.hasOwnProperty(s)){var c=s;a={type:"atom",mode:this.mode,family:c,loc:l,text:t}}else a={type:s,mode:this.mode,loc:l,text:t};i=a}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(_h(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),i={type:"textord",mode:"text",loc:Ju.range(e),text:t}}if(this.consume(),o)for(var u=0;u<o[0].length;u++){var h=o[0][u];if(!Hm[h])throw new eh("Unknown accent ' "+h+"'",e);var d=Hm[h][this.mode]||Hm[h].text;if(!d)throw new eh("Accent "+h+" unsupported in "+this.mode+" mode",e);i={type:"accent",mode:this.mode,loc:Ju.range(e),label:d,isStretchy:!1,isShifty:!0,
// $FlowFixMe
base:i}}return i}}Gm.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Vm=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Gm(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new eh("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new Qu("\\df@tag")])}]}return r},Ym=function(e,t,n){t.textContent="";var r=Jm(e,n).toNode();t.appendChild(r)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&(Ym=function(){throw new eh("KaTeX doesn't work in quirks mode.")});var Km=function(e,t){return Jm(e,t).toMarkup()},Xm=function(e,t){var n=new lh(t);return Vm(e,n)},Zm=function(e,t,n){if(n.throwOnError||!(e instanceof eh))throw e;var r=Yd.makeSpan(["katex-error"],[new Yh(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},Jm=function(e,t){var n=new lh(t);try{return function(e,t,n){var r,i=Mp(n);if("mathml"===n.output)return Lp(e,t,i,n.displayMode,!0);if("html"===n.output){var o=_p(e,i);r=Yd.makeSpan(["katex"],[o])}else{var a=Lp(e,t,i,n.displayMode,!1),s=_p(e,i);r=Yd.makeSpan(["katex"],[a,s])}return Fp(r,n)}(Vm(e,n),e,n)}catch(r){return Zm(r,e,n)}},Qm=function(e,t){var n=new lh(t);try{return function(e,t,n){var r=_p(e,Mp(n)),i=Yd.makeSpan(["katex"],[r]);return Fp(i,n)}(Vm(e,n),0,n)}catch(r){return Zm(r,e,n)}},eg="0.16.21",tg={Span:Hh,Anchor:Wh,SymbolNode:Yh,SvgNode:Kh,PathNode:Xh,LineNode:Zh},ng={
/**
   * Current KaTeX version
   */
version:eg,
/**
   * Renders the given LaTeX into an HTML+MathML combination, and adds
   * it as a child to the specified DOM node.
   */
render:Ym,
/**
   * Renders the given LaTeX into an HTML+MathML combination string,
   * for sending to the client.
   */
renderToString:Km,
/**
   * KaTeX error, usually during parsing.
   */
ParseError:eh,
/**
   * The schema of Settings
   */
SETTINGS_SCHEMA:ah,
/**
   * Parses the given LaTeX into KaTeX's internal parse tree structure,
   * without rendering to HTML or MathML.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
__parse:Xm,
/**
   * Renders the given LaTeX into an HTML+MathML internal DOM tree
   * representation, without flattening that representation to a string.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
__renderToDomTree:Jm,
/**
   * Renders the given LaTeX into an HTML internal DOM tree representation,
   * without MathML and without flattening that representation to a string.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
__renderToHTMLTree:Qm,
/**
   * extends internal font metrics object with a new object
   * each key in the new object represents a font name
  */
__setFontMetrics:Eh,
/**
   * adds a new symbol to builtin symbols table
   */
__defineSymbol:nd,
/**
   * adds a new function to builtin function list,
   * which directly produce parse tree elements
   * and have their own html/mathml builders
   */
__defineFunction:rp,
/**
   * adds a new macro to builtin macro list
   */
__defineMacro:jf,
/**
   * Expose the dom tree node types, which can be useful for type checking nodes.
   *
   * NOTE: These methods are not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
__domTree:tg};const rg=Object.freeze(Object.defineProperty({__proto__:null,ParseError:eh,SETTINGS_SCHEMA:ah,__defineFunction:rp,__defineMacro:jf,__defineSymbol:nd,__domTree:tg,__parse:Xm,__renderToDomTree:Jm,__renderToHTMLTree:Qm,__setFontMetrics:Eh,default:ng,get render(){return Ym},renderToString:Km,version:eg},Symbol.toStringTag,{value:"Module"}));function ig(e,t){let n=e.pos;if(36!==e.src.charCodeAt(n))return!1;let r="$";n+=1;const i=e.src.charCodeAt(n);if(36===i){if(r="$$",n+=1,36===e.src.charCodeAt(n))return!1}else if(
// Skip if opening $ is succeeded by a space character
32===i||9===i||10===i)return!1;const o=function t(n){const i=e.src.indexOf(r,n);return-1===i?i:92===e.src.charCodeAt(i-1)?e.src.length-1>i?t(i+1):-1:i}(n);if(-1===o)return!1;const a=o+r.length;if(1===r.length){const t=e.src.charCodeAt(o-1);if(32===t||9===t||10===t)return!1;const n=e.src.charCodeAt(a);if(n>=48&&n<58)return!1}if(!t){e.push(1===r.length?"inline_math":"display_math","",0).content=e.src.slice(n,o)}return e.pos=a,!0}const og=e=>{e.inline.ruler.push("texMath",ig)};Lo.onGetOptions(((e,t)=>{e.math=t.extensions.katex.enabled})),Lo.onInitConverter(2,((e,t)=>{t.math&&(e.use(og),e.renderer.rules.inline_math=(t,n)=>`<span class="katex--inline">${e.utils.escapeHtml(t[n].content)}</span>`,e.renderer.rules.display_math=(t,n)=>`<span class="katex--display">${e.utils.escapeHtml(t[n].content)}</span>`)})),Lo.onSectionPreview((e=>{const t=e=>t=>{if(!t.highlighted)try{ng.render(t.textContent,t,{displayMode:e})}catch(i7){t.textContent=`${i7.message}`}t.highlighted=!0};e.querySelectorAll(".katex--inline").cl_each(t(!1)),e.querySelectorAll(".katex--display").cl_each(t(!0))}));var ag,sg={exports:{}};var lg,cg,ug,hg=(ag||(ag=1,lg=sg,cg="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},ug=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=cg.Prism={manual:cg.Prism&&cg.Prism.manual,disableWorkerMessageHandler:cg.Prism&&cg.Prism.disableWorkerMessageHandler,util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},
// Deep clone a language definition (e.g. to extend it)
clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map((function(e){return n.util.clone(e)}))}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var i in t)r[i]=t[i];return r},
/**
           * Insert a token before another token in a language literal
           * As this needs to recreate the object (we cannot actually insert before keys in object literals),
           * we cannot just provide an object, we need anobject and a key.
           * @param inside The key (or language id) of the parent
           * @param before The key to insert before. If not provided, the function appends instead.
           * @param insert Object with the key/value pairs to insert
           * @param root The object that contains `inside`. If equal to Prism.languages, it can be omitted.
           */
insertBefore:function(e,t,r,i){var o=(i=i||n.languages)[e];if(2==arguments.length){for(var a in r=arguments[1])r.hasOwnProperty(a)&&(o[a]=r[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==t)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[l]=o[l]}return n.languages.DFS(n.languages,(function(t,n){n===i[e]&&t!=e&&(this[t]=s)})),i[e]=s},
// Traverse a language definition with Depth First Search
DFS:function(e,t,r,i){for(var o in i=i||{},e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],r||o),"Object"!==n.util.type(e[o])||i[n.util.objId(e[o])]?"Array"!==n.util.type(e[o])||i[n.util.objId(e[o])]||(i[n.util.objId(e[o])]=!0,n.languages.DFS(e[o],t,o,i)):(i[n.util.objId(e[o])]=!0,n.languages.DFS(e[o],t,null,i)))}},plugins:{},highlightAll:function(e,t){n.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var i={callback:r,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",i);for(var o,a=i.elements||e.querySelectorAll(i.selector),s=0;o=a[s++];)n.highlightElement(o,!0===t,i.callback)},highlightElement:function(t,r,i){for(var o,a,s=t;s&&!e.test(s.className);)s=s.parentNode;s&&(o=(s.className.match(e)||[,""])[1].toLowerCase(),a=n.languages[o]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+o,t.parentNode&&(s=t.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+o));var l={element:t,language:o,grammar:a,code:t.textContent};if(n.hooks.run("before-sanity-check",l),!l.code||!l.grammar)return l.code&&(n.hooks.run("before-highlight",l),l.element.textContent=l.code,n.hooks.run("after-highlight",l)),void n.hooks.run("complete",l);if(n.hooks.run("before-highlight",l),r&&cg.Worker){var c=new Worker(n.filename);c.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},c.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(t),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},highlight:function(e,t,i){var o=n.tokenize(e,t);return r.stringify(n.util.encode(o),i)},matchGrammar:function(e,t,r,i,o,a,s){var l=n.Token;for(var c in r)if(r.hasOwnProperty(c)&&r[c]){if(c==s)return;var u=r[c];u="Array"===n.util.type(u)?u:[u];for(var h=0;h<u.length;++h){var d=u[h],p=d.inside,f=!!d.lookbehind,m=!!d.greedy,g=0,v=d.alias;if(m&&!d.pattern.global){var y=d.pattern.toString().match(/[imuy]*$/)[0];d.pattern=RegExp(d.pattern.source,y+"g")}d=d.pattern||d;for(var b=i,_=o;b<t.length;_+=t[b].length,++b){var w=t[b];if(t.length>e.length)return;if(!(w instanceof l)){d.lastIndex=0;var k=1;if(!(I=d.exec(w))&&m&&b!=t.length-1){if(d.lastIndex=_,!(I=d.exec(e)))break;for(var x=I.index+(f?I[1].length:0),C=I.index+I[0].length,S=b,T=_,E=t.length;S<E&&(T<C||!t[S].type&&!t[S-1].greedy);++S)x>=(T+=t[S].length)&&(++b,_=T);if(t[b]instanceof l||t[S-1].greedy)continue;k=S-b,w=e.slice(_,T),I.index-=_}if(I){f&&(g=I[1].length),C=(x=I.index+g)+(I=I[0].slice(g)).length;var I,A=w.slice(0,x),D=w.slice(C),B=[b,k];A&&(++b,_+=A.length,B.push(A));var L=new l(c,p?n.tokenize(I,p):I,v,I,m);if(B.push(L),D&&B.push(D),Array.prototype.splice.apply(t,B),1!=k&&n.matchGrammar(e,t,r,b,_,!0,c),a)break}else if(a)break}}}}},tokenize:function(e,t,r){var i=[e],o=t.rest;if(o){for(var a in o)t[a]=o[a];delete t.rest}return n.matchGrammar(e,i,t,0,0,!1),i},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var i,o=0;i=r[o++];)i(t)}}},r=n.Token=function(e,t,n,r,i){this.type=e,this.content=t,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};if(r.stringify=function(e,t,i){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map((function(n){return r.stringify(n,t,e)})).join("");var o={type:e.type,content:r.stringify(e.content,t,i),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:i};if(e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(o.classes,a)}n.hooks.run("wrap",o);var s=Object.keys(o.attributes).map((function(e){return e+'="'+(o.attributes[e]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(s?" "+s:"")+">"+o.content+"</"+o.tag+">"},!cg.document)return cg.addEventListener?(n.disableWorkerMessageHandler||cg.addEventListener("message",(function(e){var t=JSON.parse(e.data),r=t.language,i=t.code,o=t.immediateClose;cg.postMessage(n.highlight(i,n.languages[r],r)),o&&cg.close()}),!1),cg.Prism):cg.Prism;var i=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return i&&(n.filename=i.src,n.manual||i.hasAttribute("data-manual")||("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),cg.Prism}(),lg.exports&&(lg.exports=ug),void 0!==yo&&(yo.Prism=ug),ug.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:/<!DOCTYPE[\s\S]+?>/i,cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/(^|[^\\])["']/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},ug.languages.markup.tag.inside["attr-value"].inside.entity=ug.languages.markup.entity,ug.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),ug.languages.xml=ug.languages.markup,ug.languages.html=ug.languages.markup,ug.languages.mathml=ug.languages.markup,ug.languages.svg=ug.languages.markup,ug.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(?:;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^{}\s][^{};]*?(?=\s*\{)/,string:{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},ug.languages.css.atrule.inside.rest=ug.util.clone(ug.languages.css),ug.languages.markup&&(ug.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\s\S]*?>)[\s\S]*?(?=<\/style>)/i,lookbehind:!0,inside:ug.languages.css,alias:"language-css",greedy:!0}}),ug.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:ug.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:ug.languages.css}},alias:"language-css"}},ug.languages.markup.tag)),ug.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},ug.languages.javascript=ug.languages.extend("clike",{keyword:/\b(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(?:0[xX][\dA-Fa-f]+|0[bB][01]+|0[oO][0-7]+|\d*\.?\d+(?:[Ee][+-]?\d+)?|NaN|Infinity)\b/,
// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)
function:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*\()/i,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/}),ug.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[[^\]\r\n]+]|\\.|[^/\\\[\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0},
// This must be declared before keyword because we use "function" inside the look-forward
"function-variable":{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=\s*(?:function\b|(?:\([^()]*\)|[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/i,alias:"function"}}),ug.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:ug.languages.javascript}},string:/[\s\S]+/}}}),ug.languages.markup&&ug.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\s\S]*?>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,inside:ug.languages.javascript,alias:"language-javascript",greedy:!0}}),ug.languages.js=ug.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach((function(t){for(var n,r=t.getAttribute("data-src"),i=t,o=/\blang(?:uage)?-(?!\*)(\w+)\b/i;i&&!o.test(i.className);)i=i.parentNode;if(i&&(n=(t.className.match(o)||[,""])[1]),!n){var a=(r.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var s=document.createElement("code");s.className="language-"+n,t.textContent="",s.textContent="Loading",t.appendChild(s);var l=new XMLHttpRequest;l.open("GET",r,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(s.textContent=l.responseText,ug.highlightElement(s)):l.status>=400?s.textContent=" Error "+l.status+" while fetching file: "+l.statusText:s.textContent=" Error: File does not exist or is empty")},l.send(null)}))},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))),sg.exports);const dg=bo(hg);function pg(e){const t=e.utils.escapeRE,n=e.utils.arrayReplaceAt,r=" \r\n$+<=>^`|~",i=e.utils.lib.ucmicro.P.source,o=e.utils.lib.ucmicro.Z.source;e.block.ruler.before("reference","abbr_def",(function(e,t,n,r){let i,o=e.bMarks[t]+e.tShift[t];const a=e.eMarks[t];if(o+2>=a)return!1;if(42!==e.src.charCodeAt(o++))return!1;if(91!==e.src.charCodeAt(o++))return!1;const s=o;for(;o<a;o++){const t=e.src.charCodeAt(o);if(91===t)return!1;if(93===t){i=o;break}92===t&&o++}if(i<0||58!==e.src.charCodeAt(i+1))return!1;if(r)return!0;const l=e.src.slice(s,i).replace(/\\(.)/g,"$1"),c=e.src.slice(i+2,a).trim();return 0!==l.length&&(0!==c.length&&(e.env.abbreviations||(e.env.abbreviations={}),void 0===e.env.abbreviations[":"+l]&&(e.env.abbreviations[":"+l]=c),e.line=t+1,!0))}),{alt:["paragraph","reference"]}),e.core.ruler.after("linkify","abbr_replace",(function(e){const a=e.tokens;if(!e.env.abbreviations)return;const s=new RegExp("(?:"+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")"),l="(^|"+i+"|"+o+"|["+r.split("").map(t).join("")+"])("+Object.keys(e.env.abbreviations).map((function(e){return e.substr(1)})).sort((function(e,t){return t.length-e.length})).map(t).join("|")+")($|"+i+"|"+o+"|["+r.split("").map(t).join("")+"])",c=new RegExp(l,"g");for(let t=0,r=a.length;t<r;t++){if("inline"!==a[t].type)continue;let r=a[t].children;for(let i=r.length-1;i>=0;i--){const o=r[i];if("text"!==o.type)continue;let l=0;const u=o.content;c.lastIndex=0;const h=[];if(!s.test(u))continue;let d;for(;d=c.exec(u);){if(d.index>0||d[1].length>0){const t=new e.Token("text","",0);t.content=u.slice(l,d.index+d[1].length),h.push(t)}const t=new e.Token("abbr_open","abbr",1);t.attrs=[["title",e.env.abbreviations[":"+d[2]]]],h.push(t);const n=new e.Token("text","",0);n.content=d[2],h.push(n);const r=new e.Token("abbr_close","abbr",-1);h.push(r),c.lastIndex-=d[3].length,l=c.lastIndex}if(h.length){if(l<u.length){const t=new e.Token("text","",0);t.content=u.slice(l),h.push(t)}a[t].children=r=n(r,i,h)}}}}))}function fg(e){const t=e.utils.isSpace;function n(e,t){let n=e.bMarks[t]+e.tShift[t];const r=e.eMarks[t];if(n>=r)return-1;const i=e.src.charCodeAt(n++);if(126!==i&&58!==i)return-1;const o=e.skipSpaces(n);return n===o||o>=r?-1:n}e.block.ruler.before("paragraph","deflist",(function(e,r,i,o){if(o)return!(e.ddIndent<0)&&n(e,r)>=0;let a=r+1;if(a>=i)return!1;if(e.isEmpty(a)&&(a++,a>=i))return!1;if(e.sCount[a]<e.blkIndent)return!1;let s=n(e,a);if(s<0)return!1;const l=e.tokens.length;let c=!0;const u=[r,0];e.push("dl_open","dl",1).map=u;let h=r,d=a;e:for(;;){let r=!1;e.push("dt_open","dt",1).map=[h,h];const o=e.push("inline","",0);for(o.map=[h,h],o.content=e.getLines(h,h+1,e.blkIndent,!1).trim(),o.children=[],e.push("dt_close","dt",-1);;){const o=[a,0];e.push("dd_open","dd",1).map=o;let l=s;const u=e.eMarks[d];let h=e.sCount[d]+s-(e.bMarks[d]+e.tShift[d]);for(;l<u;){const n=e.src.charCodeAt(l);if(!t(n))break;9===n?h+=4-h%4:h++,l++}s=l;const p=e.tight,f=e.ddIndent,m=e.blkIndent,g=e.tShift[d],v=e.sCount[d],y=e.parentType;if(e.blkIndent=e.ddIndent=e.sCount[d]+2,e.tShift[d]=s-e.bMarks[d],e.sCount[d]=h,e.tight=!0,e.parentType="deflist",e.md.block.tokenize(e,d,i,!0),e.tight&&!r||(c=!1),r=e.line-d>1&&e.isEmpty(e.line-1),e.tShift[d]=g,e.sCount[d]=v,e.tight=p,e.parentType=y,e.blkIndent=m,e.ddIndent=f,e.push("dd_close","dd",-1),o[1]=a=e.line,a>=i)break e;if(e.sCount[a]<e.blkIndent)break e;if(s=n(e,a),s<0)break;d=a}if(a>=i)break;if(h=a,e.isEmpty(h))break;if(e.sCount[h]<e.blkIndent)break;if(d=h+1,d>=i)break;if(e.isEmpty(d)&&d++,d>=i)break;if(e.sCount[d]<e.blkIndent)break;if(s=n(e,d),s<0)break}return e.push("dl_close","dl",-1),u[1]=a,e.line=a,c&&function(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,l),!0}),{alt:["paragraph","reference","blockquote"]})}function mg(e,t,n,r){const i=Number(e[t].meta.id+1).toString();let o="";return"string"==typeof r.docId&&(o=`-${r.docId}-`),o+i}function gg(e,t){let n=Number(e[t].meta.id+1).toString();return e[t].meta.subId>0&&(n+=`:${e[t].meta.subId}`),`[${n}]`}function vg(e,t,n,r,i){const o=i.rules.footnote_anchor_name(e,t,n,r,i),a=i.rules.footnote_caption(e,t,n,r,i);let s=o;return e[t].meta.subId>0&&(s+=`:${e[t].meta.subId}`),`<sup class="footnote-ref"><a href="#fn${o}" id="fnref${s}">${a}</a></sup>`}function yg(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'}function bg(){return"</ol>\n</section>\n"}function _g(e,t,n,r,i){let o=i.rules.footnote_anchor_name(e,t,n,r,i);return e[t].meta.subId>0&&(o+=`:${e[t].meta.subId}`),`<li id="fn${o}" class="footnote-item">`}function wg(){return"</li>\n"}function kg(e,t,n,r,i){let o=i.rules.footnote_anchor_name(e,t,n,r,i);return e[t].meta.subId>0&&(o+=`:${e[t].meta.subId}`),` <a href="#fnref${o}" class="footnote-backref"></a>`}function xg(e){const t=e.helpers.parseLinkLabel,n=e.utils.isSpace;e.renderer.rules.footnote_ref=vg,e.renderer.rules.footnote_block_open=yg,e.renderer.rules.footnote_block_close=bg,e.renderer.rules.footnote_open=_g,e.renderer.rules.footnote_close=wg,e.renderer.rules.footnote_anchor=kg,e.renderer.rules.footnote_caption=gg,e.renderer.rules.footnote_anchor_name=mg,e.block.ruler.before("reference","footnote_def",(function(e,t,r,i){const o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(o+4>a)return!1;if(91!==e.src.charCodeAt(o))return!1;if(94!==e.src.charCodeAt(o+1))return!1;let s;for(s=o+2;s<a;s++){if(32===e.src.charCodeAt(s))return!1;if(93===e.src.charCodeAt(s))break}if(s===o+2)return!1;if(s+1>=a||58!==e.src.charCodeAt(++s))return!1;if(i)return!0;s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={});const l=e.src.slice(o+2,s-2);e.env.footnotes.refs[`:${l}`]=-1;const c=new e.Token("footnote_reference_open","",1);c.meta={label:l},c.level=e.level++,e.tokens.push(c);const u=e.bMarks[t],h=e.tShift[t],d=e.sCount[t],p=e.parentType,f=s,m=e.sCount[t]+s-(e.bMarks[t]+e.tShift[t]);let g=m;for(;s<a;){const t=e.src.charCodeAt(s);if(!n(t))break;9===t?g+=4-g%4:g++,s++}e.tShift[t]=s-f,e.sCount[t]=g-m,e.bMarks[t]=f,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,r,!0),e.parentType=p,e.blkIndent-=4,e.tShift[t]=h,e.sCount[t]=d,e.bMarks[t]=u;const v=new e.Token("footnote_reference_close","",-1);return v.level=--e.level,e.tokens.push(v),!0}),{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnote_inline",(function(e,n){const r=e.posMax,i=e.pos;if(i+2>=r)return!1;if(94!==e.src.charCodeAt(i))return!1;if(91!==e.src.charCodeAt(i+1))return!1;const o=i+2,a=t(e,i+1);if(a<0)return!1;if(!n){e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]);const t=e.env.footnotes.list.length,n=[];e.md.inline.parse(e.src.slice(o,a),e.md,e.env,n);e.push("footnote_ref","",0).meta={id:t},e.env.footnotes.list[t]={content:e.src.slice(o,a),tokens:n}}return e.pos=a+1,e.posMax=r,!0})),e.inline.ruler.after("footnote_inline","footnote_ref",(function(e,t){const n=e.posMax,r=e.pos;if(r+3>n)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if(91!==e.src.charCodeAt(r))return!1;if(94!==e.src.charCodeAt(r+1))return!1;let i;for(i=r+2;i<n;i++){if(32===e.src.charCodeAt(i))return!1;if(10===e.src.charCodeAt(i))return!1;if(93===e.src.charCodeAt(i))break}if(i===r+2)return!1;if(i>=n)return!1;i++;const o=e.src.slice(r+2,i-1);if(void 0===e.env.footnotes.refs[`:${o}`])return!1;if(!t){let t;e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[`:${o}`]<0?(t=e.env.footnotes.list.length,e.env.footnotes.list[t]={label:o,count:0},e.env.footnotes.refs[`:${o}`]=t):t=e.env.footnotes.refs[`:${o}`];const n=e.env.footnotes.list[t].count;e.env.footnotes.list[t].count++;e.push("footnote_ref","",0).meta={id:t,subId:n,label:o}}return e.pos=i,e.posMax=n,!0})),e.core.ruler.after("inline","footnote_tail",(function(e){let t,n,r,i=!1;const o={};if(!e.env.footnotes)return;if(e.tokens=e.tokens.filter((function(e){return"footnote_reference_open"===e.type?(i=!0,n=[],r=e.meta.label,!1):"footnote_reference_close"===e.type?(i=!1,o[":"+r]=n,!1):(i&&n.push(e),!i)})),!e.env.footnotes.list)return;const a=e.env.footnotes.list;e.tokens.push(new e.Token("footnote_block_open","",1));for(let s=0,l=a.length;s<l;s++){const n=new e.Token("footnote_open","",1);if(n.meta={id:s,label:a[s].label},e.tokens.push(n),a[s].tokens){t=[];const n=new e.Token("paragraph_open","p",1);n.block=!0,t.push(n);const r=new e.Token("inline","",0);r.children=a[s].tokens,r.content=a[s].content,t.push(r);const i=new e.Token("paragraph_close","p",-1);i.block=!0,t.push(i)}else a[s].label&&(t=o[`:${a[s].label}`]);let r;t&&(e.tokens=e.tokens.concat(t)),r="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null;const i=a[s].count>0?a[s].count:1;for(let t=0;t<i;t++){const n=new e.Token("footnote_anchor","",0);n.meta={id:s,subId:t,label:a[s].label},e.tokens.push(n)}r&&e.tokens.push(r),e.tokens.push(new e.Token("footnote_close","",-1))}e.tokens.push(new e.Token("footnote_block_close","",-1))}))}function Cg(e){function t(e,t){const n=[],r=t.length;for(let i=0;i<r;i++){const r=t[i];if(61!==r.marker)continue;if(-1===r.end)continue;const o=t[r.end],a=e.tokens[r.token];a.type="mark_open",a.tag="mark",a.nesting=1,a.markup="==",a.content="";const s=e.tokens[o.token];s.type="mark_close",s.tag="mark",s.nesting=-1,s.markup="==",s.content="","text"===e.tokens[o.token-1].type&&"="===e.tokens[o.token-1].content&&n.push(o.token-1)}for(;n.length;){const t=n.pop();let r=t+1;for(;r<e.tokens.length&&"mark_close"===e.tokens[r].type;)r++;if(r--,t!==r){const n=e.tokens[r];e.tokens[r]=e.tokens[t],e.tokens[t]=n}}}e.inline.ruler.before("emphasis","mark",(function(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t)return!1;if(61!==r)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const a=String.fromCharCode(r);if(o<2)return!1;if(o%2){e.push("text","",0).content=a,o--}for(let s=0;s<o;s+=2){e.push("text","",0).content=a+a,(i.can_open||i.can_close)&&e.delimiters.push({marker:r,length:0,
// disable "rule of 3" length checks meant for emphasis
jump:s/2,
// 1 delimiter = 2 characters
token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0})),e.inline.ruler2.before("emphasis","mark",(function(e){let n;const r=e.tokens_meta,i=(e.tokens_meta||[]).length;for(t(e,e.delimiters),n=0;n<i;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}))}const Sg=(e,t,n)=>{let r;const i=t,o={ok:!1,pos:t,value:""};for(r=e.charAt(t);t<n&&/\d/.test(r)||"%"===r;)r=e.charAt(++t);return o.ok=!0,o.pos=t,o.value=e.slice(i,t),o},Tg=(e,t)=>{const n=e.env,r=e.pos,i=e.posMax;if("!"!==e.src.charAt(e.pos)||"["!==e.src.charAt(e.pos+1))return!1;const o=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(a<0)return!1;let s,l=a+1,c="",u="",h="",d="";if(l<i&&"("===e.src.charAt(l)){for(l++;l<i&&(s=e.src.charAt(l)," "===s||"\t"===s);)l++;if(l>=i)return!1;let t;t=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),t.ok&&(c=e.md.normalizeLink(t.str),e.md.validateLink(c)?l=t.pos:c="");const n=l;for(;l<i&&(s=e.src.charAt(l)," "===s||"\t"===s);l++);if(t=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<i&&n!==l&&t.ok)for(u=t.str,l=t.pos;l<i&&(s=e.src.charAt(l)," "===s||"\t"===s);l++);else u="";if(l-1>=0&&(s=e.src.charAt(l-1)," "===s&&(t=((e,t,n)=>{const r={ok:!1,pos:0,width:"",height:""};if(t>=n||"="!==e.charAt(t))return r;t++;const i=e.charAt(t);if("x"!==i&&!/\d/.test(i))return r;const o=Sg(e,t,n);if(t=o.pos,"x"!==e.charAt(t))return r;t++;const a=Sg(e,t,n);return t=a.pos,r.width=o.value,r.height=a.value,r.pos=t,r.ok=!0,r})(e.src,l,e.posMax),t.ok)))for(h=t.width,d=t.height,l=t.pos;l<i&&(s=e.src.charAt(l)," "===s||"\n"===s);l++);if(l>=i||")"!==e.src.charAt(l))return e.pos=r,!1;l++}else{let t="";if(typeof n.references>"u")return!1;for(;l<i&&(s=e.src.charAt(l)," "===s||"\t"===s);l++);if(l<i&&"["===e.src.charAt(l)){const n=l+1;l=e.md.helpers.parseLinkLabel(e,l),l>=0?t=e.src.slice(n,l++):l=a+1}else l=a+1;t||(t=e.src.slice(o,a));const h=n.references[e.md.utils.normalizeReference(t)];if(!h)return e.pos=r,!1;c=h.href,u=h.title??""}if(!t){e.pos=o,e.posMax=a;const t=e.src.slice(o,a),n=[];e.md.inline.parse(t,e.md,e.env,n);const r=e.push("image","img",0);r.attrs=[["src",c],["alt",""]],u&&r.attrs.push(["title",u]),h&&r.attrs.push(["width",h]),d&&r.attrs.push(["height",d]),r.children=n,r.content=t}return e.pos=l,e.posMax=i,!0},Eg=e=>{e.inline.ruler.before("emphasis","image",Tg)},Ig=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function Ag(e,t){const n=e.posMax,r=e.pos;if(126!==e.src.charCodeAt(r))return!1;if(t)return!1;if(r+2>=n)return!1;e.pos=r+1;let i=!1;for(;e.pos<n;){if(126===e.src.charCodeAt(e.pos)){i=!0;break}e.md.inline.skipToken(e)}if(!i||r+1===e.pos)return e.pos=r,!1;const o=e.src.slice(r+1,e.pos);if(o.match(/(^|[^\\])(\\\\)*\s/))return e.pos=r,!1;e.posMax=e.pos,e.pos=r+1;e.push("sub_open","sub",1).markup="~";e.push("text","",0).content=o.replace(Ig,"$1");return e.push("sub_close","sub",-1).markup="~",e.pos=e.posMax+1,e.posMax=n,!0}function Dg(e){e.inline.ruler.after("emphasis","sub",Ag)}const Bg=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/g;function Lg(e,t){const n=e.posMax,r=e.pos;if(94!==e.src.charCodeAt(r))return!1;if(t)return!1;if(r+2>=n)return!1;e.pos=r+1;let i=!1;for(;e.pos<n;){if(94===e.src.charCodeAt(e.pos)){i=!0;break}e.md.inline.skipToken(e)}if(!i||r+1===e.pos)return e.pos=r,!1;const o=e.src.slice(r+1,e.pos);if(o.match(/(^|[^\\])(\\\\)*\s/))return e.pos=r,!1;e.posMax=e.pos,e.pos=r+1;e.push("sup_open","sup",1).markup="^";e.push("text","",0).content=o.replace(Bg,"$1");return e.push("sup_close","sup",-1).markup="^",e.pos=e.posMax+1,e.posMax=n,!0}function Mg(e){e.inline.ruler.after("emphasis","sup",Lg)}function Fg(e,t,n){const r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}const Og=e=>{e.core.ruler.after("inline","tasklist",(({tokens:e,Token:t})=>{for(let n=2;n<e.length;n+=1){const r=e[n];if(r.content&&91===r.content.charCodeAt(0)&&93===r.content.charCodeAt(2)&&32===r.content.charCodeAt(3)&&"inline"===r.type&&"paragraph_open"===e[n-1].type&&"list_item_open"===e[n-2].type){const i=r.content[1].toLowerCase();if(" "===i||"x"===i){const o=new t("html_inline","",0);o.content=" "===i?'<span class="task-list-item-checkbox" type="checkbox">&#9744;</span>':'<span class="task-list-item-checkbox checked" type="checkbox">&#9745;</span>',r.children.unshift(o),r.children[1].content=r.children[1].content.slice(3),r.content=r.content.slice(3),Fg(e[n-2],"class","task-list-item")}}}}))};function Pg(e,t=1){const n=[];let r;function i(){r&&(r.children.length>0&&(r.children=Pg(r.children,t+1)),n.push(r))}return e.forEach((e=>{e.level!==t?(r=r||{children:[]},r.children.push(e)):(i(),r=e)})),i(),n}function Ng(e){if(!e||!e.length)return"";return`<ul>${e.map((e=>{let t=`<li class="preview-toc-item preview-toc-l${e.level}">`;return e.anchor&&e.title&&(t+=`<a href="#${e.anchor}">${e.title}</a>`),t+=Ng(e.children),`${t}</li>`})).join("\n")}</ul>`}const jg=e=>{e.core.ruler.before("replacements","anchors",(e=>{const t={};let n,r;const i=[],o=[];e.tokens.forEach((e=>{if("heading_open"===e.type)r="",n=e;else if("heading_close"===e.type){n.headingContent=r;let e,i=r.replace(/<img[^>]*>/g,"").replace(/\s/g,"-").replace(/[\0-,/:-@[-^`{-~]/g,"").toLowerCase();for(e=0;e<i.length;e+=1){const t=i.charCodeAt(e);if(t>=48&&t<=57||// 0-9
t>=97&&t<=122||// a-z
t>126)break}i=i.slice(e)||"section";let a=i,s=1;for(;Object.prototype.hasOwnProperty.call(t,a);)a=`${i}-${s}`,s+=1;t[a]=!0,n.headingAnchor=a,n.attrs=[["id",a]],o.push({title:n.headingContent,anchor:n.headingAnchor,level:parseInt(n.tag.slice(1),10),children:[]}),n=void 0}else n&&(r+=e.children.reduce(((e,t)=>"footnote_ref"!==t.type?e+t.content:e),""));"inline"!==e.type||"[TOC]"!==e.content&&"[toc]"!==e.content||i.push(e)})),0!==i.length&&(0===o.length?i.forEach((e=>{e.children[0].content="",e.content=""})):i.forEach((t=>{const n=Ng(Pg(o)),r=new e.Token("html_inline","",0);r.content=`<div class="preview-toc">${n}</div>`,t.children.unshift(r),t.children[1].content="",t.content=""})))}))},zg=["normalize","block","inline","linkify","replacements","smartquotes"],Rg=["code","fence","blockquote","hr","list","reference","heading","lheading","html_block","table","paragraph"],qg=["text","newline","escape","backticks","strikethrough","emphasis","link","image","autolink","html_inline","entity"],$g=["balance_pairs","strikethrough","emphasis"];function Ug(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from("string"==typeof e?[e]:e);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce((function(e,t){var n=t.match(/\n([\t ]+|(?!\s).)/g);return n?e.concat(n.map((function(e){var t,n;return null!==(n=null===(t=e.match(/[\t ]/g))||void 0===t?void 0:t.length)&&void 0!==n?n:0}))):e}),[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map((function(e){return e.replace(o,"\n")}))}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach((function(e,t){var n=a.match(/(?:^|\n)( *)$/),i=n?n[1]:"",o=e;"string"==typeof e&&e.includes("\n")&&(o=String(e).split("\n").map((function(e,t){return 0===t?e:""+i+e})).join("\n")),a+=o+r[t+1]})),a}Lo.onGetOptions(((e,t)=>Object.assign(e,t.extensions.markdown))),Lo.onInitConverter(0,((e,t)=>{e.set({html:!0,breaks:!!t.breaks,linkify:!!t.linkify,typographer:!!t.typographer,langPrefix:"prism language-"}),e.core.ruler.enable(zg);const n=Rg.slice();t.fence||n.splice(n.indexOf("fence"),1),t.table||n.splice(n.indexOf("table"),1),e.block.ruler.enable(n);const r=qg.slice(),i=$g.slice();t.del||(r.splice(n.indexOf("strikethrough"),1),i.splice(n.indexOf("strikethrough"),1)),e.inline.ruler.enable(r),e.inline.ruler2.enable(i),t.abbr&&e.use(pg),t.deflist&&e.use(fg),t.footnote&&e.use(xg),t.imgsize&&e.use(Eg),t.mark&&e.use(Cg),t.sub&&e.use(Dg),t.sup&&e.use(Mg),t.tasklist&&e.use(Og),e.use(jg),e.renderer.rules.table_open=(t,n,r)=>`<div class="table-wrapper">${e.renderer.renderToken(t,n,r)}`,e.renderer.rules.table_close=(t,n,r)=>`${e.renderer.renderToken(t,n,r)}</div>`;e.renderer.rules.td_open=(t,n,r)=>{const i=t[n];return i.attrs&&i.attrs.length&&"style"===i.attrs[0][0]&&(i.attrs=[["align",i.attrs[0][1].slice(11)]]),e.renderer.renderToken(t,n,r)},e.renderer.rules.th_open=e.renderer.rules.td_open,e.renderer.rules.footnote_ref=(e,t)=>{const n=`${Number(e[t].meta.id+1)}`;let r=`fnref${n}`;return e[t].meta.subId>0&&(r+=`:${e[t].meta.subId}`),`<sup class="footnote-ref"><a href="#fn${n}" id="${r}">[${n}]</a></sup>`}})),Lo.onSectionPreview(((e,t,n)=>{e.querySelectorAll(".prism").cl_each((e=>{e.$highlightedWithPrism||(dg.highlightElement(e),e.$highlightedWithPrism=!0)})),e.querySelectorAll("span.task-list-item-checkbox").cl_each((e=>{const t=document.createElement("input");t.type="checkbox",t.className="task-list-item-checkbox",e.classList.contains("checked")&&t.setAttribute("checked",!0),n||(t.disabled="disabled"),e.parentNode.replaceChild(t,e)}))}));var Hg,Wg={exports:{}};var Gg=(Hg||(Hg=1,Wg.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",c="month",u="quarter",h="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,a=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:l,d:s,D:d,h:a,m:o,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",_={};_[b]=g;var w="$isDayjsObject",k=function(e){return e instanceof T||!(!e||!e[w])},x=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();_[o]&&(i=o),n&&(_[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;_[s]=t,i=s}return!r&&i&&(b=i),i||!r&&b},C=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},S=y;S.l=x,S.i=k,S.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function g(e){this.$L=x(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(e,t){var n=C(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return C(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<C(e)},v.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,r=!!S.u(t)||t,u=S.p(e),p=function(e,t){var i=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},f=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case h:return r?p(1,0):p(31,11);case c:return r?p(1,g):p(0,g+1);case l:var b=this.$locale().weekStart||0,_=(m<b?m+7:m)-b;return p(r?v-_:v+(6-_),g);case s:case d:return f(y+"Hours",0);case a:return f(y+"Minutes",1);case o:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,l=S.p(e),u="set"+(this.$u?"UTC":""),p=(n={},n[s]=u+"Date",n[d]=u+"Date",n[c]=u+"Month",n[h]=u+"FullYear",n[a]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],f=l===s?this.$D+(t-this.$W):t;if(l===c||l===h){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(r,u){var d,p=this;r=Number(r);var f=S.p(u),m=function(e){var t=C(p);return S.w(t.date(t.date()+Math.round(e*r)),p)};if(f===c)return this.set(c,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===s)return m(1);if(f===l)return m(7);var g=(d={},d[o]=t,d[a]=n,d[i]=e,d)[f]||1,v=this.$d.getTime()+r*g;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,h=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return S.s(o%12||12,e,"0")},f=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return s+1;case"MM":return S.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,c,3);case"MMMM":return h(c,s);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,l,2);case"ddd":return h(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return S.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(o,a,!0);case"A":return f(o,a,!1);case"m":return String(a);case"mm":return S.s(a,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,p){var f,m=this,g=S.p(d),v=C(r),y=(v.utcOffset()-this.utcOffset())*t,b=this-v,_=function(){return S.m(m,v)};switch(g){case h:f=_()/12;break;case c:f=_();break;case u:f=_()/3;break;case l:f=(b-y)/6048e5;break;case s:f=(b-y)/864e5;break;case a:f=b/n;break;case o:f=b/t;break;case i:f=b/e;break;default:f=b}return p?f:S.a(f)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return _[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=x(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),E=T.prototype;return C.prototype=E,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",h],["$D",d]].forEach((function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,T,C),e.$i=!0),C},C.locale=x,C.isDayjs=k,C.unix=function(e){return C(1e3*e)},C.en=_[b],C.Ls=_,C.p={},C}()),Wg.exports);const Vg=bo(Gg);var Yg,Kg={};var Xg=(Yg||(Yg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=e.BLANK_URL=void 0;var t=/^([^\w]*)(javascript|data|vbscript)/im,n=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,i=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^.+(:|&colon;)/gim,a=[".","/"];e.BLANK_URL="about:blank",e.sanitizeUrl=function(s){if(!s)return e.BLANK_URL;var l,c=(l=s,l.replace(i,"").replace(n,(function(e,t){return String.fromCharCode(t)}))).replace(r,"").replace(i,"").trim();if(!c)return e.BLANK_URL;if(function(e){return a.indexOf(e[0])>-1}(c))return c;var u=c.match(o);if(!u)return c;var h=u[0];return t.test(h)?e.BLANK_URL:c}}(Kg)),Kg),Zg={value:()=>{}};function Jg(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Qg(r)}function Qg(e){this._=e}function ev(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function tv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Zg,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Qg.prototype=Jg.prototype={constructor:Qg,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=tv(i[n],e.name,t);else if(null==t)for(n in i)i[n]=tv(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=ev(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qg(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var nv="http://www.w3.org/1999/xhtml";const rv={svg:"http://www.w3.org/2000/svg",xhtml:nv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iv(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),rv.hasOwnProperty(t)?{space:rv[t],local:e}:e}function ov(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===nv&&t.documentElement.namespaceURI===nv?t.createElement(e):t.createElementNS(n,e)}}function av(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sv(e){var t=iv(e);return(t.local?av:ov)(t)}function lv(){}function cv(e){return null==e?lv:function(){return this.querySelector(e)}}function uv(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function hv(){return[]}function dv(e){return null==e?hv:function(){return this.querySelectorAll(e)}}function pv(e){return function(){return this.matches(e)}}function fv(e){return function(t){return t.matches(e)}}var mv=Array.prototype.find;function gv(){return this.firstElementChild}var vv=Array.prototype.filter;function yv(){return Array.from(this.children)}function bv(e){return new Array(e.length)}function _v(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function wv(e,t,n,r,i,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new _v(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function kv(e,t,n,r,i,o,a){var s,l,c,u=new Map,h=t.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<d;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(r[s]=l,l.__data__=o[s],u.delete(c)):n[s]=new _v(e,o[s]);for(s=0;s<h;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function xv(e){return e.__data__}function Cv(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Sv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tv(e){return function(){this.removeAttribute(e)}}function Ev(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Iv(e,t){return function(){this.setAttribute(e,t)}}function Av(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Dv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Bv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Lv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Mv(e){return function(){this.style.removeProperty(e)}}function Fv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ov(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pv(e,t){return e.style.getPropertyValue(t)||Lv(e).getComputedStyle(e,null).getPropertyValue(t)}function Nv(e){return function(){delete this[e]}}function jv(e,t){return function(){this[e]=t}}function zv(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Rv(e){return e.trim().split(/^|\s+/)}function qv(e){return e.classList||new $v(e)}function $v(e){this._node=e,this._names=Rv(e.getAttribute("class")||"")}function Uv(e,t){for(var n=qv(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Hv(e,t){for(var n=qv(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Wv(e){return function(){Uv(this,e)}}function Gv(e){return function(){Hv(this,e)}}function Vv(e,t){return function(){(t.apply(this,arguments)?Uv:Hv)(this,e)}}function Yv(){this.textContent=""}function Kv(e){return function(){this.textContent=e}}function Xv(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Zv(){this.innerHTML=""}function Jv(e){return function(){this.innerHTML=e}}function Qv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ey(){this.nextSibling&&this.parentNode.appendChild(this)}function ty(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ny(){return null}function ry(){var e=this.parentNode;e&&e.removeChild(this)}function iy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ay(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function sy(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ly(e,t,n){var r=Lv(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function cy(e,t){return function(){return ly(this,e,t)}}function uy(e,t){return function(){return ly(this,e,t.apply(this,arguments))}}_v.prototype={constructor:_v,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},$v.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var hy=[null];function dy(e,t){this._groups=e,this._parents=t}function py(){return new dy([[document.documentElement]],hy)}function fy(e){return"string"==typeof e?new dy([[document.querySelector(e)]],[document.documentElement]):new dy([[e]],hy)}function my(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vy(){}dy.prototype=py.prototype={constructor:dy,select:function(e){"function"!=typeof e&&(e=cv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new dy(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return uv(e.apply(this,arguments))}}(e):dv(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),i.push(a));return new dy(r,i)},selectChild:function(e){return this.select(null==e?gv:function(e){return function(){return mv.call(this.children,e)}}("function"==typeof e?e:fv(e)))},selectChildren:function(e){return this.selectAll(null==e?yv:function(e){return function(){return vv.call(this.children,e)}}("function"==typeof e?e:fv(e)))},filter:function(e){"function"!=typeof e&&(e=pv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new dy(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,xv);var n,r=t?kv:wv,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),u=0;u<a;++u){var h=i[u],d=o[u],p=d.length,f=Cv(e.call(h,h&&h.__data__,u,i)),m=f.length,g=l[u]=new Array(m),v=s[u]=new Array(m);r(h,d,g,v,c[u]=new Array(p),f,t);for(var y,b,_=0,w=0;_<m;++_)if(y=g[_]){for(_>=w&&(w=_+1);!(b=v[w])&&++w<m;);y._next=b||null}}return(s=new dy(s,i))._enter=l,s._exit=c,s},enter:function(){return new dy(this._enter||this._groups.map(bv),this._parents)},exit:function(){return new dy(this._exit||this._groups.map(bv),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=u[f]||h[f])&&(p[f]=c);for(;l<i;++l)s[l]=n[l];return new dy(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Sv);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new dy(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=iv(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Ev:Tv:"function"==typeof t?n.local?Bv:Dv:n.local?Av:Iv)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Mv:"function"==typeof t?Ov:Fv)(e,t,null==n?"":n)):Pv(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Nv:"function"==typeof t?zv:jv)(e,t)):this.node()[e]},classed:function(e,t){var n=Rv(e+"");if(arguments.length<2){for(var r=qv(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Vv:t?Wv:Gv)(n,t))},text:function(e){return arguments.length?this.each(null==e?Yv:("function"==typeof e?Xv:Kv)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Zv:("function"==typeof e?Qv:Jv)(e)):this.node().innerHTML},raise:function(){return this.each(ey)},lower:function(){return this.each(ty)},append:function(e){var t="function"==typeof e?e:sv(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:sv(e),r=null==t?ny:"function"==typeof t?t:cv(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ry)},clone:function(e){return this.select(e?oy:iy)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?sy:ay,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?uy:cy)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var yy=.7,by=1/yy,_y="\\s*([+-]?\\d+)\\s*",wy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ky="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xy=/^#([0-9a-f]{3,8})$/,Cy=new RegExp(`^rgb\\(${_y},${_y},${_y}\\)$`),Sy=new RegExp(`^rgb\\(${ky},${ky},${ky}\\)$`),Ty=new RegExp(`^rgba\\(${_y},${_y},${_y},${wy}\\)$`),Ey=new RegExp(`^rgba\\(${ky},${ky},${ky},${wy}\\)$`),Iy=new RegExp(`^hsl\\(${wy},${ky},${ky}\\)$`),Ay=new RegExp(`^hsla\\(${wy},${ky},${ky},${wy}\\)$`),Dy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function By(){return this.rgb().formatHex()}function Ly(){return this.rgb().formatRgb()}function My(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Fy(t):3===n?new jy(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Oy(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Oy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Cy.exec(e))?new jy(t[1],t[2],t[3],1):(t=Sy.exec(e))?new jy(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ty.exec(e))?Oy(t[1],t[2],t[3],t[4]):(t=Ey.exec(e))?Oy(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Iy.exec(e))?Hy(t[1],t[2]/100,t[3]/100,1):(t=Ay.exec(e))?Hy(t[1],t[2]/100,t[3]/100,t[4]):Dy.hasOwnProperty(e)?Fy(Dy[e]):"transparent"===e?new jy(NaN,NaN,NaN,0):null}function Fy(e){return new jy(e>>16&255,e>>8&255,255&e,1)}function Oy(e,t,n,r){return r<=0&&(e=t=n=NaN),new jy(e,t,n,r)}function Py(e){return e instanceof vy||(e=My(e)),e?new jy((e=e.rgb()).r,e.g,e.b,e.opacity):new jy}function Ny(e,t,n,r){return 1===arguments.length?Py(e):new jy(e,t,n,null==r?1:r)}function jy(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function zy(){return`#${Uy(this.r)}${Uy(this.g)}${Uy(this.b)}`}function Ry(){const e=qy(this.opacity);return`${1===e?"rgb(":"rgba("}${$y(this.r)}, ${$y(this.g)}, ${$y(this.b)}${1===e?")":`, ${e})`}`}function qy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $y(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Uy(e){return((e=$y(e))<16?"0":"")+e.toString(16)}function Hy(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gy(e,t,n,r)}function Wy(e){if(e instanceof Gy)return new Gy(e.h,e.s,e.l,e.opacity);if(e instanceof vy||(e=My(e)),!e)return new Gy;if(e instanceof Gy)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Gy(a,s,l,e.opacity)}function Gy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Vy(e){return(e=(e||0)%360)<0?e+360:e}function Yy(e){return Math.max(0,Math.min(1,e||0))}function Ky(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}my(vy,My,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:By,
// Deprecated! Use color.formatHex.
formatHex:By,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Wy(this).formatHsl()},formatRgb:Ly,toString:Ly}),my(jy,Ny,gy(vy,{brighter(e){return e=null==e?by:Math.pow(by,e),new jy(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?yy:Math.pow(yy,e),new jy(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jy($y(this.r),$y(this.g),$y(this.b),qy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zy,
// Deprecated! Use color.formatHex.
formatHex:zy,formatHex8:function(){return`#${Uy(this.r)}${Uy(this.g)}${Uy(this.b)}${Uy(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ry,toString:Ry})),my(Gy,(function(e,t,n,r){return 1===arguments.length?Wy(e):new Gy(e,t,n,null==r?1:r)}),gy(vy,{brighter(e){return e=null==e?by:Math.pow(by,e),new Gy(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?yy:Math.pow(yy,e),new Gy(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jy(Ky(e>=240?e-240:e+120,i,r),Ky(e,i,r),Ky(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gy(Vy(this.h),Yy(this.s),Yy(this.l),qy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qy(this.opacity);return`${1===e?"hsl(":"hsla("}${Vy(this.h)}, ${100*Yy(this.s)}%, ${100*Yy(this.l)}%${1===e?")":`, ${e})`}`}}));const Xy=e=>()=>e;function Zy(e,t){return function(n){return e+n*t}}function Jy(e,t){var n=t-e;return n?Zy(e,n>180||n<-180?n-360*Math.round(n/360):n):Xy(isNaN(e)?t:e)}function Qy(e){return 1==(e=+e)?eb:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Xy(isNaN(t)?n:t)}}function eb(e,t){var n=t-e;return n?Zy(e,n):Xy(isNaN(e)?t:e)}const tb=function e(t){var n=Qy(t);function r(e,t){var r=n((e=Ny(e)).r,(t=Ny(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=eb(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function nb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var rb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ib=new RegExp(rb.source,"g");function ob(e,t){var n,r,i,o=rb.lastIndex=ib.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=rb.exec(e))&&(r=ib.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:nb(n,r)})),o=ib.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}var ab,sb=180/Math.PI,lb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cb(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*sb,skewX:Math.atan(l)*sb,scaleX:a,scaleY:s}}function ub(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:nb(e,i)},{i:l-2,x:nb(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:nb(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:nb(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:nb(e,n)},{i:s-2,x:nb(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var hb,db,pb=ub((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lb:cb(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),fb=ub((function(e){return null==e?lb:(ab||(ab=document.createElementNS("http://www.w3.org/2000/svg","g")),ab.setAttribute("transform",e),(e=ab.transform.baseVal.consolidate())?cb((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):lb)}),", ",")",")"),mb=0,gb=0,vb=0,yb=0,bb=0,_b=0,wb="object"==typeof performance&&performance.now?performance:Date,kb="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xb(){return bb||(kb(Cb),bb=wb.now()+_b)}function Cb(){bb=0}function Sb(){this._call=this._time=this._next=null}function Tb(e,t,n){var r=new Sb;return r.restart(e,t,n),r}function Eb(){bb=(yb=wb.now())+_b,mb=gb=0;try{!function(){xb(),++mb;for(var e,t=hb;t;)(e=bb-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mb}()}finally{mb=0,function(){var e,t,n=hb,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:hb=t);db=e,Ab(r)}(),bb=0}}function Ib(){var e=wb.now(),t=e-yb;t>1e3&&(_b-=t,yb=e)}function Ab(e){mb||(gb&&(gb=clearTimeout(gb)),e-bb>24?(e<1/0&&(gb=setTimeout(Eb,e-wb.now()-_b)),vb&&(vb=clearInterval(vb))):(vb||(yb=wb.now(),vb=setInterval(Ib,1e3)),mb=1,kb(Eb)))}function Db(e,t,n){var r=new Sb;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}Sb.prototype=Tb.prototype={constructor:Sb,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?xb():+n)+(null==t?0:+t),this._next||db===this||(db?db._next=this:hb=this,db=this),this._call=e,this._time=n,Ab()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ab())}};var Bb=Jg("start","end","cancel","interrupt"),Lb=[];function Mb(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var c,u,h,d;if(1!==n.state)return l();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return Db(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(Db((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Tb(o,0,n.time)}(e,n,{name:t,index:r,
// For context during callback.
group:i,
// For context during callback.
on:Bb,tween:Lb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Fb(e,t){var n=Pb(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ob(e,t){var n=Pb(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Pb(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Nb(e,t){var n,r;return function(){var i=Ob(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function jb(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Ob(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function zb(e,t,n){var r=e._id;return e.each((function(){var e=Ob(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Pb(e,r).value[t]}}function Rb(e,t){var n;return("number"==typeof t?nb:t instanceof My?tb:(n=My(t))?(t=n,tb):ob)(e,t)}function qb(e){return function(){this.removeAttribute(e)}}function $b(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ub(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Hb(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Wb(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttribute(e)}}function Gb(e,t,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function Vb(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Yb(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Kb(e,t){return function(){Fb(this,e).delay=+t.apply(this,arguments)}}function Xb(e,t){return t=+t,function(){Fb(this,e).delay=t}}function Zb(e,t){return function(){Ob(this,e).duration=+t.apply(this,arguments)}}function Jb(e,t){return t=+t,function(){Ob(this,e).duration=t}}var Qb=py.prototype.constructor;function e_(e){return function(){this.style.removeProperty(e)}}var t_=0;function n_(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function r_(){return++t_}var i_=py.prototype;n_.prototype={constructor:n_,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=cv(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=e.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Mb(h[d],t,n,d,h,Pb(s,n)));return new n_(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=dv(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=e.call(l,l.__data__,h,c),f=Pb(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&Mb(d,t,n,m,p,f);o.push(p),a.push(l)}return new n_(o,a,t,n)},selectChild:i_.selectChild,selectChildren:i_.selectChildren,filter:function(e){"function"!=typeof e&&(e=pv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new n_(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=t[s],u=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<r;++s)a[s]=t[s];return new n_(a,this._parents,this._name,this._id)},selection:function(){return new Qb(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=r_(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Pb(a,t);Mb(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new n_(r,this._parents,e,n)},call:i_.call,nodes:i_.nodes,node:i_.node,size:i_.size,empty:i_.empty,each:i_.each,on:function(e,t){var n=this._id;return arguments.length<2?Pb(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Fb:Ob;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=iv(e),r="transform"===n?fb:Rb;return this.attrTween(e,"function"==typeof t?(n.local?Gb:Wb)(n,r,zb(this,"attr."+e,t)):null==t?(n.local?$b:qb)(n):(n.local?Hb:Ub)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=iv(e);return this.tween(n,(r.local?Vb:Yb)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?pb:Rb;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Pv(this,e),a=(this.style.removeProperty(e),Pv(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,e_(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Pv(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Pv(this,e)),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}(e,r,zb(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var l=Ob(this,e),c=l.on,u=null==l.value[a]?o||(o=e_(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Pv(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(zb(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Pb(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Nb:jb)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Kb:Xb)(t,e)):Pb(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Zb:Jb)(t,e)):Pb(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Ob(this,e).ease=t}}(t,e)):Pb(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Ob(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0==--i&&o()}};n.each((function(){var n=Ob(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:i_[Symbol.iterator]};var o_={time:null,
// Set on use.
delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function a_(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}py.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},py.prototype.transition=function(e){var t,n;e instanceof n_?(t=e._id,e=e._name):(t=r_(),(n=o_).time=xb(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Mb(a,e,t,c,s,n||a_(a,t));return new n_(r,this._parents,e,t)};const s_=Math.abs,l_=Math.atan2,c_=Math.cos,u_=Math.max,h_=Math.min,d_=Math.sin,p_=Math.sqrt,f_=1e-12,m_=Math.PI,g_=m_/2,v_=2*m_;function y_(e){return e>1?0:e<-1?m_:Math.acos(e)}function b_(e){return e>=1?g_:e<=-1?-g_:Math.asin(e)}function __(e){this._context=e}function w_(e){return new __(e)}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;
// falls through
default:this._context.lineTo(e,t)}}};class k_{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;
// falls through
default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function x_(){}function C_(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function S_(e){this._context=e}function T_(e){return new S_(e)}function E_(e){this._context=e}function I_(e){this._context=e}function A_(e,t){this._basis=new S_(e),this._beta=t}S_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C_(this,this._x1,this._y1);
// falls through
case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);
// falls through
default:C_(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},E_.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C_(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},I_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;
// falls through
default:C_(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},A_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const D_=function e(t){function n(e){return 1===t?new S_(e):new A_(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function B_(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function L_(e,t){this._context=e,this._k=(1-t)/6}L_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:B_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;
// falls through
default:B_(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M_=function e(t){function n(e){return new L_(e,t)}return n.tension=function(t){return e(+t)},n}(0);function F_(e,t){this._context=e,this._k=(1-t)/6}F_.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:B_(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O_=function e(t){function n(e){return new F_(e,t)}return n.tension=function(t){return e(+t)},n}(0);function P_(e,t){this._context=e,this._k=(1-t)/6}P_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;
// falls through
default:B_(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N_=function e(t){function n(e){return new P_(e,t)}return n.tension=function(t){return e(+t)},n}(0);function j_(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>f_){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>f_){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function z_(e,t){this._context=e,this._alpha=t}z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;
// falls through
default:j_(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R_=function e(t){function n(e){return t?new z_(e,t):new L_(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function q_(e,t){this._context=e,this._alpha=t}q_.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:j_(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $_=function e(t){function n(e){return t?new q_(e,t):new F_(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function U_(e,t){this._context=e,this._alpha=t}U_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;
// falls through
default:j_(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H_=function e(t){function n(e){return t?new U_(e,t):new P_(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function W_(e){this._context=e}function G_(e){return e<0?-1:1}function V_(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(G_(o)+G_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Y_(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function K_(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function X_(e){this._context=e}function Z_(e){this._context=new J_(e)}function J_(e){this._context=e}function Q_(e){this._context=e}function ew(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function tw(e,t){this._context=e,this._t=t}function nw(e,t,n){this.k=e,this.x=t,this.y=n}W_.prototype={areaStart:x_,areaEnd:x_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K_(this,this._t0,Y_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,K_(this,Y_(this,n=V_(this,e,t)),n);break;default:K_(this,this._t0,n=V_(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Z_.prototype=Object.create(X_.prototype)).point=function(e,t){X_.prototype.point.call(this,t,e)},J_.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Q_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=ew(e),i=ew(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},tw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;
// falls through
default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},nw.prototype={constructor:nw,scale:function(e){return 1===e?this:new nw(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new nw(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},nw.prototype;
/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */
const{entries:rw,setPrototypeOf:iw,isFrozen:ow,getPrototypeOf:aw,getOwnPropertyDescriptor:sw}=Object;let{freeze:lw,seal:cw,create:uw}=Object,{apply:hw,construct:dw}="undefined"!=typeof Reflect&&Reflect;lw||(lw=function(e){return e}),cw||(cw=function(e){return e}),hw||(hw=function(e,t,n){return e.apply(t,n)}),dw||(dw=function(e,t){return new e(...t)});const pw=Tw(Array.prototype.forEach),fw=Tw(Array.prototype.pop),mw=Tw(Array.prototype.push),gw=Tw(String.prototype.toLowerCase),vw=Tw(String.prototype.toString),yw=Tw(String.prototype.match),bw=Tw(String.prototype.replace),_w=Tw(String.prototype.indexOf),ww=Tw(String.prototype.trim),kw=Tw(Object.prototype.hasOwnProperty),xw=Tw(RegExp.prototype.test),Cw=(Sw=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dw(Sw,t)});var Sw;function Tw(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return hw(e,t,r)}}function Ew(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gw;iw&&iw(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(ow(t)||(t[r]=e),i=e)}e[i]=!0}return e}function Iw(e){for(let t=0;t<e.length;t++){kw(e,t)||(e[t]=null)}return e}function Aw(e){const t=uw(null);for(const[n,r]of rw(e)){kw(e,n)&&(Array.isArray(r)?t[n]=Iw(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=Aw(r):t[n]=r)}return t}function Dw(e,t){for(;null!==e;){const n=sw(e,t);if(n){if(n.get)return Tw(n.get);if("function"==typeof n.value)return Tw(n.value)}e=aw(e)}return function(){return null}}const Bw=lw(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lw=lw(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mw=lw(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fw=lw(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ow=lw(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Pw=lw(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nw=lw(["#text"]),jw=lw(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),zw=lw(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Rw=lw(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qw=lw(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$w=cw(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Uw=cw(/<%[\w\W]*|[\w\W]*%>/gm),Hw=cw(/\${[\w\W]*}/gm),Ww=cw(/^data-[\-\w.\u00B7-\uFFFF]/),Gw=cw(/^aria-[\-\w]+$/),Vw=cw(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Yw=cw(/^(?:\w+script|data):/i),Kw=cw(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xw=cw(/^html$/i),Zw=cw(/^[a-z][.\w]*(-[.\w]+)+$/i);var Jw=Object.freeze({__proto__:null,MUSTACHE_EXPR:$w,ERB_EXPR:Uw,TMPLIT_EXPR:Hw,DATA_ATTR:Ww,ARIA_ATTR:Gw,IS_ALLOWED_URI:Vw,IS_SCRIPT_OR_DATA:Yw,ATTR_WHITESPACE:Kw,DOCTYPE_NAME:Xw,CUSTOM_ELEMENT:Zw});const Qw=1,ek=3,tk=7,nk=8,rk=9;var ik=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=t=>e(t);if(n.version="3.1.6",n.removed=[],!t||!t.document||t.document.nodeType!==rk)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:f}=t,m=c.prototype,g=Dw(m,"cloneNode"),v=Dw(m,"remove"),y=Dw(m,"nextSibling"),b=Dw(m,"childNodes"),_=Dw(m,"parentNode");if("function"==typeof s){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let w,k="";const{implementation:x,createNodeIterator:C,createDocumentFragment:S,getElementsByTagName:T}=r,{importNode:E}=i;let I={};n.isSupported="function"==typeof rw&&"function"==typeof _&&x&&void 0!==x.createHTMLDocument;const{MUSTACHE_EXPR:A,ERB_EXPR:D,TMPLIT_EXPR:B,DATA_ATTR:L,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:P}=Jw;let{IS_ALLOWED_URI:N}=Jw,j=null;const z=Ew({},[...Bw,...Lw,...Mw,...Ow,...Nw]);let R=null;const q=Ew({},[...jw,...zw,...Rw,...qw]);let $=Object.seal(uw(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,H=null,W=!0,G=!0,V=!1,Y=!0,K=!1,X=!0,Z=!1,J=!1,Q=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1,oe=!0,ae=!1,se={},le=null;const ce=Ew({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const he=Ew({},["audio","video","img","source","image","track"]);let de=null;const pe=Ew({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let ve=ge,ye=!1,be=null;const _e=Ew({},[fe,me,ge],vw);let we=null;const ke=["application/xhtml+xml","text/html"];let xe=null,Ce=null;const Se=r.createElement("form"),Te=function(e){return e instanceof RegExp||e instanceof Function},Ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ce||Ce!==e){if(e&&"object"==typeof e||(e={}),e=Aw(e),we=// eslint-disable-next-line unicorn/prefer-includes
-1===ke.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,xe="application/xhtml+xml"===we?vw:gw,j=kw(e,"ALLOWED_TAGS")?Ew({},e.ALLOWED_TAGS,xe):z,R=kw(e,"ALLOWED_ATTR")?Ew({},e.ALLOWED_ATTR,xe):q,be=kw(e,"ALLOWED_NAMESPACES")?Ew({},e.ALLOWED_NAMESPACES,vw):_e,de=kw(e,"ADD_URI_SAFE_ATTR")?Ew(Aw(pe),
// eslint-disable-line indent
e.ADD_URI_SAFE_ATTR,
// eslint-disable-line indent
xe):pe,ue=kw(e,"ADD_DATA_URI_TAGS")?Ew(Aw(he),
// eslint-disable-line indent
e.ADD_DATA_URI_TAGS,
// eslint-disable-line indent
xe):he,le=kw(e,"FORBID_CONTENTS")?Ew({},e.FORBID_CONTENTS,xe):ce,U=kw(e,"FORBID_TAGS")?Ew({},e.FORBID_TAGS,xe):{},H=kw(e,"FORBID_ATTR")?Ew({},e.FORBID_ATTR,xe):{},se=!!kw(e,"USE_PROFILES")&&e.USE_PROFILES,W=!1!==e.ALLOW_ARIA_ATTR,G=!1!==e.ALLOW_DATA_ATTR,V=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,ae=e.IN_PLACE||!1,N=e.ALLOWED_URI_REGEXP||Vw,ve=e.NAMESPACE||ge,$=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Te(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&($.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(G=!1),te&&(ee=!0),se&&(j=Ew({},Nw),R=[],!0===se.html&&(Ew(j,Bw),Ew(R,jw)),!0===se.svg&&(Ew(j,Lw),Ew(R,zw),Ew(R,qw)),!0===se.svgFilters&&(Ew(j,Mw),Ew(R,zw),Ew(R,qw)),!0===se.mathMl&&(Ew(j,Ow),Ew(R,Rw),Ew(R,qw))),e.ADD_TAGS&&(j===z&&(j=Aw(j)),Ew(j,e.ADD_TAGS,xe)),e.ADD_ATTR&&(R===q&&(R=Aw(R)),Ew(R,e.ADD_ATTR,xe)),e.ADD_URI_SAFE_ATTR&&Ew(de,e.ADD_URI_SAFE_ATTR,xe),e.FORBID_CONTENTS&&(le===ce&&(le=Aw(le)),Ew(le,e.FORBID_CONTENTS,xe)),oe&&(j["#text"]=!0),Z&&Ew(j,["html","head","body"]),j.table&&(Ew(j,["tbody"]),delete U.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Cw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Cw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,k=w.createHTML("")}else void 0===w&&(w=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(o){return null}}(f,o)),null!==w&&"string"==typeof k&&(k=w.createHTML(""));lw&&lw(e),Ce=e}},Ie=Ew({},["mi","mo","mn","ms","mtext"]),Ae=Ew({},["foreignobject","annotation-xml"]),De=Ew({},["title","style","font","a","script"]),Be=Ew({},[...Lw,...Mw,...Fw]),Le=Ew({},[...Ow,...Pw]),Me=function(e){mw(n.removed,{element:e});try{_(e).removeChild(e)}catch(t){v(e)}},Fe=function(e,t){try{mw(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(r){mw(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!R[e])if(ee||te)try{Me(t)}catch(r){}else try{t.setAttribute(e,"")}catch(r){}},Oe=function(e){let t=null,n=null;if(Q)e="<remove></remove>"+e;else{const t=yw(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===we&&ve===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=w?w.createHTML(e):e;if(ve===ge)try{t=(new p).parseFromString(i,we)}catch(a){}if(!t||!t.documentElement){t=x.createDocument(ve,"template",null);try{t.documentElement.innerHTML=ye?k:i}catch(a){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),ve===ge?T.call(t,Z?"html":"body")[0]:Z?t.documentElement:o},Pe=function(e){return C.call(e.ownerDocument||e,e,
// eslint-disable-next-line no-bitwise
u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Ne=function(e){return e instanceof d&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},je=function(e){return"function"==typeof l&&e instanceof l},ze=function(e,t,r){I[e]&&pw(I[e],(e=>{e.call(n,t,r,Ce)}))},Re=function(e){let t=null;if(ze("beforeSanitizeElements",e,null),Ne(e))return Me(e),!0;const r=xe(e.nodeName);if(ze("uponSanitizeElement",e,{tagName:r,allowedTags:j}),e.hasChildNodes()&&!je(e.firstElementChild)&&xw(/<[/\w]/g,e.innerHTML)&&xw(/<[/\w]/g,e.textContent))return Me(e),!0;if(e.nodeType===tk)return Me(e),!0;if(X&&e.nodeType===nk&&xw(/<[/\w]/g,e.data))return Me(e),!0;if(!j[r]||U[r]){if(!U[r]&&$e(r)){if($.tagNameCheck instanceof RegExp&&xw($.tagNameCheck,r))return!1;if($.tagNameCheck instanceof Function&&$.tagNameCheck(r))return!1}if(oe&&!le[r]){const t=_(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=g(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,y(e))}}}return Me(e),!0}return e instanceof c&&!function(e){let t=_(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=gw(e.tagName),r=gw(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===me?t.namespaceURI===ge?"svg"===n:t.namespaceURI===fe?"svg"===n&&("annotation-xml"===r||Ie[r]):Boolean(Be[n]):e.namespaceURI===fe?t.namespaceURI===ge?"math"===n:t.namespaceURI===me?"math"===n&&Ae[r]:Boolean(Le[n]):e.namespaceURI===ge?!(t.namespaceURI===me&&!Ae[r])&&!(t.namespaceURI===fe&&!Ie[r])&&!Le[n]&&(De[n]||!Be[n]):!("application/xhtml+xml"!==we||!be[e.namespaceURI]))}(e)?(Me(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!xw(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===ek&&(t=e.textContent,pw([A,D,B],(e=>{t=bw(t,e," ")})),e.textContent!==t&&(mw(n.removed,{element:e.cloneNode()}),e.textContent=t)),ze("afterSanitizeElements",e,null),!1):(Me(e),!0)},qe=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Se))return!1;if(G&&!H[t]&&xw(L,t));else if(W&&xw(M,t));else if(!R[t]||H[t]){if(
// First condition does a very basic check if a) it's basically a valid custom element tagname AND
// b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
// and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck
!($e(e)&&($.tagNameCheck instanceof RegExp&&xw($.tagNameCheck,e)||$.tagNameCheck instanceof Function&&$.tagNameCheck(e))&&($.attributeNameCheck instanceof RegExp&&xw($.attributeNameCheck,t)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(t))||// Alternative, second condition checks if it's an `is`-attribute, AND
// the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck
"is"===t&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&xw($.tagNameCheck,n)||$.tagNameCheck instanceof Function&&$.tagNameCheck(n))))return!1}else if(de[t]);else if(xw(N,bw(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_w(n,"data:")||!ue[e]){if(V&&!xw(F,bw(n,O,"")));else if(n)return!1}else;return!0},$e=function(e){return"annotation-xml"!==e&&yw(e,P)},Ue=function(e){ze("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R};let i=t.length;for(;i--;){const a=t[i],{name:s,namespaceURI:l,value:c}=a,u=xe(s);let h="value"===s?c:ww(c);if(r.attrName=u,r.attrValue=h,r.keepAttr=!0,r.forceKeepAttr=void 0,ze("uponSanitizeAttribute",e,r),h=r.attrValue,X&&xw(/((--!?|])>)|<\/(style|title)/i,h)){Fe(s,e);continue}if(r.forceKeepAttr)continue;if(Fe(s,e),!r.keepAttr)continue;if(!Y&&xw(/\/>/i,h)){Fe(s,e);continue}K&&pw([A,D,B],(e=>{h=bw(h,e," ")}));const d=xe(e.nodeName);if(qe(d,u,h)){if(!ie||"id"!==u&&"name"!==u||(Fe(s,e),h="user-content-"+h),w&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(l);else switch(f.getAttributeType(d,u)){case"TrustedHTML":h=w.createHTML(h);break;case"TrustedScriptURL":h=w.createScriptURL(h)}try{l?e.setAttributeNS(l,s,h):e.setAttribute(s,h),Ne(e)?Me(e):fw(n.removed)}catch(o){}}}ze("afterSanitizeAttributes",e,null)},He=function e(t){let n=null;const r=Pe(t);for(ze("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)ze("uponSanitizeShadowNode",n,null),Re(n)||(n.content instanceof a&&e(n.content),Ue(n));ze("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,s=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!je(e)){if("function"!=typeof e.toString)throw Cw("toString is not a function");if("string"!=typeof(e=e.toString()))throw Cw("dirty is not a string, aborting")}if(!n.isSupported)return e;if(J||Ee(t),n.removed=[],"string"==typeof e&&(ae=!1),ae){if(e.nodeName){const t=xe(e.nodeName);if(!j[t]||U[t])throw Cw("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Oe("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===Qw&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!ee&&!K&&!Z&&// eslint-disable-next-line unicorn/prefer-includes
-1===e.indexOf("<"))return w&&ne?w.createHTML(e):e;if(r=Oe(e),!r)return ee?null:ne?k:""}r&&Q&&Me(r.firstChild);const u=Pe(ae?e:r);for(;s=u.nextNode();)Re(s)||(s.content instanceof a&&He(s.content),Ue(s));if(ae)return e;if(ee){if(te)for(c=S.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(R.shadowroot||R.shadowrootmode)&&(c=E.call(i,c,!0)),c}let h=Z?r.outerHTML:r.innerHTML;return Z&&j["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&xw(Xw,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),K&&pw([A,D,B],(e=>{h=bw(h,e," ")})),w&&ne?w.createHTML(h):h},n.setConfig=function(){Ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),J=!0},n.clearConfig=function(){Ce=null,J=!1},n.isValidAttribute=function(e,t,n){Ce||Ee({});const r=xe(e),i=xe(t);return qe(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(I[e]=I[e]||[],mw(I[e],t))},n.removeHook=function(e){if(I[e])return fw(I[e])},n.removeHooks=function(e){I[e]&&(I[e]=[])},n.removeAllHooks=function(){I={}},n}();const ok={
/* CLAMP */
min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},
/* CONVERSION */
//SOURCE: https://planetcalc.com/7779
toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},
//SOURCE: https://gist.github.com/mjackson/5311256
hue2rgb:(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),hsl2rgb:({h:e,s:t,l:n},r)=>{if(!t)return 2.55*n;e/=360,t/=100;const i=(n/=100)<.5?n*(1+t):n+t-n*t,o=2*n-i;switch(r){case"r":return 255*ok.hue2rgb(o,i,e+1/3);case"g":return 255*ok.hue2rgb(o,i,e);case"b":return 255*ok.hue2rgb(o,i,e-1/3)}},rgb2hsl:({r:e,g:t,b:n},r)=>{e/=255,t/=255,n/=255;const i=Math.max(e,t,n),o=Math.min(e,t,n),a=(i+o)/2;if("l"===r)return 100*a;if(i===o)return 0;const s=i-o;if("s"===r)return 100*(a>.5?s/(2-i-o):s/(i+o));switch(i){case e:return 60*((t-n)/s+(t<n?6:0));case t:return 60*((n-e)/s+2);case n:return 60*((e-t)/s+4);default:return-1}}},ak={channel:ok,lang:{
/* API */
clamp:(e,t,n)=>t>n?Math.min(t,Math.max(n,e)):Math.min(n,Math.max(t,e)),round:e=>Math.round(1e10*e)/1e10},unit:{
/* API */
dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}}},sk={};for(let o7=0;o7<=255;o7++)sk[o7]=ak.unit.dec2hex(o7);const lk=0,ck=1,uk=2;let hk=class{constructor(){this.type=lk}
/* API */get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=lk}is(e){return this.type===e}};const dk=new class{
/* CONSTRUCTOR */
constructor(e,t){this.color=t,this.changed=!1,this.data=e,this.type=new hk}
/* API */set(e,t){return this.color=t,this.changed=!1,this.data=e,this.type.type=lk,this}
/* HELPERS */_ensureHSL(){const e=this.data,{h:t,s:n,l:r}=e;void 0===t&&(e.h=ak.channel.rgb2hsl(e,"h")),void 0===n&&(e.s=ak.channel.rgb2hsl(e,"s")),void 0===r&&(e.l=ak.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:t,g:n,b:r}=e;void 0===t&&(e.r=ak.channel.hsl2rgb(e,"r")),void 0===n&&(e.g=ak.channel.hsl2rgb(e,"g")),void 0===r&&(e.b=ak.channel.hsl2rgb(e,"b"))}
/* GETTERS */get r(){const e=this.data,t=e.r;return this.type.is(uk)||void 0===t?(this._ensureHSL(),ak.channel.hsl2rgb(e,"r")):t}get g(){const e=this.data,t=e.g;return this.type.is(uk)||void 0===t?(this._ensureHSL(),ak.channel.hsl2rgb(e,"g")):t}get b(){const e=this.data,t=e.b;return this.type.is(uk)||void 0===t?(this._ensureHSL(),ak.channel.hsl2rgb(e,"b")):t}get h(){const e=this.data,t=e.h;return this.type.is(ck)||void 0===t?(this._ensureRGB(),ak.channel.rgb2hsl(e,"h")):t}get s(){const e=this.data,t=e.s;return this.type.is(ck)||void 0===t?(this._ensureRGB(),ak.channel.rgb2hsl(e,"s")):t}get l(){const e=this.data,t=e.l;return this.type.is(ck)||void 0===t?(this._ensureRGB(),ak.channel.rgb2hsl(e,"l")):t}get a(){return this.data.a}
/* SETTERS */set r(e){this.type.set(ck),this.changed=!0,this.data.r=e}set g(e){this.type.set(ck),this.changed=!0,this.data.g=e}set b(e){this.type.set(ck),this.changed=!0,this.data.b=e}set h(e){this.type.set(uk),this.changed=!0,this.data.h=e}set s(e){this.type.set(uk),this.changed=!0,this.data.s=e}set l(e){this.type.set(uk),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}({r:0,g:0,b:0,a:0},"transparent"),pk={
/* VARIABLES */
re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,
/* API */
parse:e=>{if(35!==e.charCodeAt(0))return;const t=e.match(pk.re);if(!t)return;const n=t[1],r=parseInt(n,16),i=n.length,o=i%4==0,a=i>4,s=a?1:17,l=a?8:4,c=o?0:-1,u=a?255:15;return dk.set({r:(r>>l*(c+3)&u)*s,g:(r>>l*(c+2)&u)*s,b:(r>>l*(c+1)&u)*s,a:o?(r&u)*s/255:1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`#${sk[Math.round(t)]}${sk[Math.round(n)]}${sk[Math.round(r)]}${sk[Math.round(255*i)]}`:`#${sk[Math.round(t)]}${sk[Math.round(n)]}${sk[Math.round(r)]}`}},fk={
/* VARIABLES */
re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,
/* HELPERS */
_hue2deg:e=>{const t=e.match(fk.hueRe);if(t){const[,e,n]=t;switch(n){case"grad":return ak.channel.clamp.h(.9*parseFloat(e));case"rad":return ak.channel.clamp.h(180*parseFloat(e)/Math.PI);case"turn":return ak.channel.clamp.h(360*parseFloat(e))}}return ak.channel.clamp.h(parseFloat(e))},
/* API */
parse:e=>{const t=e.charCodeAt(0);if(104!==t&&72!==t)return;const n=e.match(fk.re);if(!n)return;const[,r,i,o,a,s]=n;return dk.set({h:fk._hue2deg(r),s:ak.channel.clamp.s(parseFloat(i)),l:ak.channel.clamp.l(parseFloat(o)),a:a?ak.channel.clamp.a(s?parseFloat(a)/100:parseFloat(a)):1},e)},stringify:e=>{const{h:t,s:n,l:r,a:i}=e;return i<1?`hsla(${ak.lang.round(t)}, ${ak.lang.round(n)}%, ${ak.lang.round(r)}%, ${i})`:`hsl(${ak.lang.round(t)}, ${ak.lang.round(n)}%, ${ak.lang.round(r)}%)`}},mk={
/* VARIABLES */
colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},
/* API */
parse:e=>{e=e.toLowerCase();const t=mk.colors[e];if(t)return pk.parse(t)},stringify:e=>{const t=pk.stringify(e);for(const n in mk.colors)if(mk.colors[n]===t)return n}},gk={
/* VARIABLES */
re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,
/* API */
parse:e=>{const t=e.charCodeAt(0);if(114!==t&&82!==t)return;const n=e.match(gk.re);if(!n)return;const[,r,i,o,a,s,l,c,u]=n;return dk.set({r:ak.channel.clamp.r(i?2.55*parseFloat(r):parseFloat(r)),g:ak.channel.clamp.g(a?2.55*parseFloat(o):parseFloat(o)),b:ak.channel.clamp.b(l?2.55*parseFloat(s):parseFloat(s)),a:c?ak.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:n,b:r,a:i}=e;return i<1?`rgba(${ak.lang.round(t)}, ${ak.lang.round(n)}, ${ak.lang.round(r)}, ${ak.lang.round(i)})`:`rgb(${ak.lang.round(t)}, ${ak.lang.round(n)}, ${ak.lang.round(r)})`}},vk={
/* VARIABLES */
format:{keyword:mk,hex:pk,rgb:gk,rgba:gk,hsl:fk,hsla:fk},
/* API */
parse:e=>{if("string"!=typeof e)return e;const t=pk.parse(e)||gk.parse(e)||fk.parse(e)||mk.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(uk)||void 0===e.data.r?fk.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?gk.stringify(e):pk.stringify(e)},yk=(e,t)=>{const n=vk.parse(e);for(const r in t)n[r]=ak.channel.clamp[r](t[r]);return vk.stringify(n)},bk=(e,t,n=0,r=1)=>{if("number"!=typeof e)return yk(e,{a:t});const i=dk.set({r:ak.channel.clamp.r(e),g:ak.channel.clamp.g(t),b:ak.channel.clamp.b(n),a:ak.channel.clamp.a(r)});return vk.stringify(i)},_k=e=>(e=>{const{r:t,g:n,b:r}=vk.parse(e),i=.2126*ak.channel.toLinear(t)+.7152*ak.channel.toLinear(n)+.0722*ak.channel.toLinear(r);return ak.lang.round(i)})(e)>=.5,wk=e=>!_k(e),kk=(e,t,n)=>{const r=vk.parse(e),i=r[t],o=ak.channel.clamp[t](i+n);return i!==o&&(r[t]=o),vk.stringify(r)},xk=(e,t)=>kk(e,"l",t),Ck=(e,t)=>kk(e,"l",-t),Sk=(e,t)=>{const n=vk.parse(e),r={};for(const i in t)t[i]&&(r[i]=n[i]+t[i]);return yk(e,r)},Tk=(e,t=100)=>{const n=vk.parse(e);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,((e,t,n=50)=>{const{r:r,g:i,b:o,a:a}=vk.parse(e),{r:s,g:l,b:c,a:u}=vk.parse(t),h=n/100,d=2*h-1,p=a-u,f=((d*p==-1?d:(d+p)/(1+d*p))+1)/2,m=1-f;return bk(r*f+s*m,i*f+l*m,o*f+c*m,a*h+u*(1-h))})(n,e,t)};var Ek="object"==typeof global&&global&&global.Object===Object&&global,Ik="object"==typeof self&&self&&self.Object===Object&&self,Ak=Ek||Ik||Function("return this")(),Dk=Ak.Symbol,Bk=Object.prototype,Lk=Bk.hasOwnProperty,Mk=Bk.toString,Fk=Dk?Dk.toStringTag:void 0;var Ok=Object.prototype.toString;var Pk=Dk?Dk.toStringTag:void 0;function Nk(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Pk&&Pk in Object(e)?function(e){var t=Lk.call(e,Fk),n=e[Fk];try{e[Fk]=void 0;var r=!0}catch(i7){}var i=Mk.call(e);return r&&(t?e[Fk]=n:delete e[Fk]),i}(e):function(e){return Ok.call(e)}(e)}function jk(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function zk(e){if(!jk(e))return!1;var t=Nk(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Rk,qk=Ak["__core-js_shared__"],$k=(Rk=/[^.]+$/.exec(qk&&qk.keys&&qk.keys.IE_PROTO||""))?"Symbol(src)_1."+Rk:"";var Uk=Function.prototype.toString;function Hk(e){if(null!=e){try{return Uk.call(e)}catch(i7){}try{return e+""}catch(i7){}}return""}var Wk=/^\[object .+?Constructor\]$/,Gk=Function.prototype,Vk=Object.prototype,Yk=Gk.toString,Kk=Vk.hasOwnProperty,Xk=RegExp("^"+Yk.call(Kk).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zk(e){return!(!jk(e)||function(e){return!!$k&&$k in e}(e))&&(zk(e)?Xk:Wk).test(Hk(e))}function Jk(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Zk(n)?n:void 0}var Qk=Jk(Object,"create");var ex=Object.prototype.hasOwnProperty;var tx=Object.prototype.hasOwnProperty;function nx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rx(e,t){return e===t||e!=e&&t!=t}function ix(e,t){for(var n=e.length;n--;)if(rx(e[n][0],t))return n;return-1}nx.prototype.clear=function(){this.__data__=Qk?Qk(null):{},this.size=0},nx.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nx.prototype.get=function(e){var t=this.__data__;if(Qk){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ex.call(t,e)?t[e]:void 0},nx.prototype.has=function(e){var t=this.__data__;return Qk?void 0!==t[e]:tx.call(t,e)},nx.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qk&&void 0===t?"__lodash_hash_undefined__":t,this};var ox=Array.prototype.splice;function ax(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ax.prototype.clear=function(){this.__data__=[],this.size=0},ax.prototype.delete=function(e){var t=this.__data__,n=ix(t,e);return!(n<0)&&(n==t.length-1?t.pop():ox.call(t,n,1),--this.size,!0)},ax.prototype.get=function(e){var t=this.__data__,n=ix(t,e);return n<0?void 0:t[n][1]},ax.prototype.has=function(e){return ix(this.__data__,e)>-1},ax.prototype.set=function(e,t){var n=this.__data__,r=ix(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var sx=Jk(Ak,"Map");function lx(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function cx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cx.prototype.clear=function(){this.size=0,this.__data__={hash:new nx,map:new(sx||ax),string:new nx}},cx.prototype.delete=function(e){var t=lx(this,e).delete(e);return this.size-=t?1:0,t},cx.prototype.get=function(e){return lx(this,e).get(e)},cx.prototype.has=function(e){return lx(this,e).has(e)},cx.prototype.set=function(e,t){var n=lx(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ux(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ux.Cache||cx),n}ux.Cache=cx;function hx(e){var t=this.__data__=new ax(e);this.size=t.size}hx.prototype.clear=function(){this.__data__=new ax,this.size=0},hx.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},hx.prototype.get=function(e){return this.__data__.get(e)},hx.prototype.has=function(e){return this.__data__.has(e)},hx.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ax){var r=n.__data__;if(!sx||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new cx(r)}return n.set(e,t),this.size=n.size,this};var dx=function(){try{var e=Jk(Object,"defineProperty");return e({},"",{}),e}catch(i7){}}();function px(e,t,n){"__proto__"==t&&dx?dx(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function fx(e,t,n){(void 0!==n&&!rx(e[t],n)||void 0===n&&!(t in e))&&px(e,t,n)}var mx=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},gx="object"==typeof exports&&exports&&!exports.nodeType&&exports,vx=gx&&"object"==typeof module&&module&&!module.nodeType&&module,yx=vx&&vx.exports===gx?Ak.Buffer:void 0,bx=yx?yx.allocUnsafe:void 0;function _x(e,t){if(t)return e.slice();var n=e.length,r=bx?bx(n):new e.constructor(n);return e.copy(r),r}var wx=Ak.Uint8Array;function kx(e){var t=new e.constructor(e.byteLength);return new wx(t).set(new wx(e)),t}function xx(e,t){var n=t?kx(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Cx(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Sx=Object.create,Tx=function(){function e(){}return function(t){if(!jk(t))return{};if(Sx)return Sx(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Ex(e,t){return function(n){return e(t(n))}}var Ix=Ex(Object.getPrototypeOf,Object),Ax=Object.prototype;function Dx(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ax)}function Bx(e){return"function"!=typeof e.constructor||Dx(e)?{}:Tx(Ix(e))}function Lx(e){return null!=e&&"object"==typeof e}function Mx(e){return Lx(e)&&"[object Arguments]"==Nk(e)}var Fx=Object.prototype,Ox=Fx.hasOwnProperty,Px=Fx.propertyIsEnumerable,Nx=Mx(function(){return arguments}())?Mx:function(e){return Lx(e)&&Ox.call(e,"callee")&&!Px.call(e,"callee")},jx=Array.isArray;function zx(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Rx(e){return null!=e&&zx(e.length)&&!zk(e)}function qx(e){return Lx(e)&&Rx(e)}var $x="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ux=$x&&"object"==typeof module&&module&&!module.nodeType&&module,Hx=Ux&&Ux.exports===$x?Ak.Buffer:void 0,Wx=(Hx?Hx.isBuffer:void 0)||function(){return!1},Gx=Function.prototype,Vx=Object.prototype,Yx=Gx.toString,Kx=Vx.hasOwnProperty,Xx=Yx.call(Object);function Zx(e){if(!Lx(e)||"[object Object]"!=Nk(e))return!1;var t=Ix(e);if(null===t)return!0;var n=Kx.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Yx.call(n)==Xx}var Jx={};function Qx(e){return function(t){return e(t)}}Jx["[object Float32Array]"]=Jx["[object Float64Array]"]=Jx["[object Int8Array]"]=Jx["[object Int16Array]"]=Jx["[object Int32Array]"]=Jx["[object Uint8Array]"]=Jx["[object Uint8ClampedArray]"]=Jx["[object Uint16Array]"]=Jx["[object Uint32Array]"]=!0,Jx["[object Arguments]"]=Jx["[object Array]"]=Jx["[object ArrayBuffer]"]=Jx["[object Boolean]"]=Jx["[object DataView]"]=Jx["[object Date]"]=Jx["[object Error]"]=Jx["[object Function]"]=Jx["[object Map]"]=Jx["[object Number]"]=Jx["[object Object]"]=Jx["[object RegExp]"]=Jx["[object Set]"]=Jx["[object String]"]=Jx["[object WeakMap]"]=!1;var eC="object"==typeof exports&&exports&&!exports.nodeType&&exports,tC=eC&&"object"==typeof module&&module&&!module.nodeType&&module,nC=tC&&tC.exports===eC&&Ek.process,rC=function(){try{var e=tC&&tC.require&&tC.require("util").types;return e||nC&&nC.binding&&nC.binding("util")}catch(i7){}}(),iC=rC&&rC.isTypedArray,oC=iC?Qx(iC):function(e){return Lx(e)&&zx(e.length)&&!!Jx[Nk(e)]};function aC(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var sC=Object.prototype.hasOwnProperty;function lC(e,t,n){var r=e[t];sC.call(e,t)&&rx(r,n)&&(void 0!==n||t in e)||px(e,t,n)}function cC(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=void 0;void 0===l&&(l=e[s]),i?px(n,s,l):lC(n,s,l)}return n}var uC=/^(?:0|[1-9]\d*)$/;function hC(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&uC.test(e))&&e>-1&&e%1==0&&e<t}var dC=Object.prototype.hasOwnProperty;function pC(e,t){var n=jx(e),r=!n&&Nx(e),i=!n&&!r&&Wx(e),o=!n&&!r&&!i&&oC(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!dC.call(e,c)||a&&(// Safari 9 has enumerable `arguments.length` in strict mode.
"length"==c||// Node.js 0.10 has enumerable non-index properties on buffers.
i&&("offset"==c||"parent"==c)||// PhantomJS 2 has enumerable non-index properties on typed arrays.
o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||// Skip index properties.
hC(c,l))||s.push(c);return s}var fC=Object.prototype.hasOwnProperty;function mC(e){if(!jk(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Dx(e),n=[];for(var r in e)("constructor"!=r||!t&&fC.call(e,r))&&n.push(r);return n}function gC(e){return Rx(e)?pC(e,!0):mC(e)}function vC(e,t,n,r,i,o,a){var s=aC(e,n),l=aC(t,n),c=a.get(l);if(c)fx(e,n,c);else{var u,h=o?o(s,l,n+"",e,t,a):void 0,d=void 0===h;if(d){var p=jx(l),f=!p&&Wx(l),m=!p&&!f&&oC(l);h=l,p||f||m?jx(s)?h=s:qx(s)?h=Cx(s):f?(d=!1,h=_x(l,!0)):m?(d=!1,h=xx(l,!0)):h=[]:Zx(l)||Nx(l)?(h=s,Nx(s)?h=cC(u=s,gC(u)):jk(s)&&!zk(s)||(h=Bx(l))):d=!1}d&&(a.set(l,h),i(h,l,r,o,a),a.delete(l)),fx(e,n,h)}}function yC(e,t,n,r,i){e!==t&&mx(t,(function(o,a){if(i||(i=new hx),jk(o))vC(e,t,a,n,yC,r,i);else{var s=r?r(aC(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),fx(e,a,s)}}),gC)}function bC(e){return e}var _C=Math.max;function wC(e,t,n){return t=_C(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=_C(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,s)}}function kC(e){return function(){return e}}var xC=dx?function(e,t){return dx(e,"toString",{configurable:!0,enumerable:!1,value:kC(t),writable:!0})}:bC,CC=Date.now;var SC=function(e){var t=0,n=0;return function(){var r=CC(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(xC);function TC(e,t){return SC(wC(e,t,bC),e+"")}function EC(e,t,n){if(!jk(n))return!1;var r=typeof t;return!!("number"==r?Rx(n)&&hC(t,n.length):"string"==r&&t in n)&&rx(n[t],e)}var IC,AC=(IC=function(e,t,n){yC(e,t,n)},TC((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=IC.length>3&&"function"==typeof i?(r--,i):void 0,o&&EC(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&IC(e,a,n,i)}return e}))),DC="comm",BC="rule",LC="decl",MC=Math.abs,FC=String.fromCharCode;function OC(e){return e.trim()}function PC(e,t,n){return e.replace(t,n)}function NC(e,t,n){return e.indexOf(t,n)}function jC(e,t){return 0|e.charCodeAt(t)}function zC(e,t,n){return e.slice(t,n)}function RC(e){return e.length}function qC(e,t){return t.push(e),e}var $C=1,UC=1,HC=0,WC=0,GC=0,VC="";function YC(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:$C,column:UC,length:a,return:"",siblings:s}}function KC(){return GC=WC<HC?jC(VC,WC++):0,UC++,10===GC&&(UC=1,$C++),GC}function XC(){return jC(VC,WC)}function ZC(){return WC}function JC(e,t){return zC(VC,e,t)}function QC(e){switch(e){
// \0 \t \n \r \s whitespace token
case 0:case 9:case 10:case 13:case 32:return 5;
// ! + , / > @ ~ isolate token
case 33:case 43:case 44:case 47:case 62:case 64:case 126:
// ; { } breakpoint token
case 59:case 123:case 125:return 4;
// : accompanied token
case 58:return 3;
// " ' ( [ opening delimit token
case 34:case 39:case 40:case 91:return 2;
// ) ] closing delimit token
case 41:case 93:return 1}return 0}function eS(e){return OC(JC(WC-1,rS(91===e?e+2:40===e?e+1:e)))}function tS(e){for(;(GC=XC())&&GC<33;)KC();return QC(e)>2||QC(GC)>3?"":" "}function nS(e,t){for(;--t&&KC()&&!(GC<48||GC>102||GC>57&&GC<65||GC>70&&GC<97););return JC(e,ZC()+(t<6&&32==XC()&&32==KC()))}function rS(e){for(;KC();)switch(GC){
// ] ) " '
case e:return WC;
// " '
case 34:case 39:34!==e&&39!==e&&rS(GC);break;
// (
case 40:41===e&&rS(e);break;
// \
case 92:KC()}return WC}function iS(e,t){for(;KC()&&e+GC!==57&&(e+GC!==84||47!==XC()););return"/*"+JC(t,WC-1)+"*"+FC(47===e?e:KC())}function oS(e){for(;!QC(XC());)KC();return JC(e,WC)}function aS(e){return function(e){return VC="",e}(sS("",null,null,null,[""],e=function(e){return $C=UC=1,HC=RC(VC=e),WC=0,[]}(e),0,[0],e))}function sS(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,h=a,d=0,p=0,f=0,m=1,g=1,v=1,y=0,b="",_=i,w=o,k=r,x=b;g;)switch(f=y,y=KC()){
// (
case 40:if(108!=f&&58==jC(x,h-1)){-1!=NC(x+=PC(eS(y),"&","&\f"),"&\f",MC(c?s[c-1]:0))&&(v=-1);break}
// " ' [
case 34:case 39:case 91:x+=eS(y);break;
// \t \n \r \s
case 9:case 10:case 13:case 32:x+=tS(f);break;
// \
case 92:x+=nS(ZC()-1,7);continue;
// /
case 47:switch(XC()){case 42:case 47:qC(cS(iS(KC(),ZC()),t,n,l),l),5!=QC(f||1)&&5!=QC(XC()||1)||!RC(x)||" "===zC(x,-1,void 0)||(x+=" ");break;default:x+="/"}break;
// {
case 123*m:s[c++]=RC(x)*v;
// } ; \0
case 125*m:case 59:case 0:switch(y){
// \0 }
case 0:case 125:g=0;
// ;
case 59+u:-1==v&&(x=PC(x,/\f/g,"")),p>0&&(RC(x)-h||0===m&&47===f)&&qC(p>32?uS(x+";",r,n,h-1,l):uS(PC(x," ","")+";",r,n,h-2,l),l);break;
// @ ;
case 59:x+=";";
// { rule/at-rule
default:if(qC(k=lS(x,t,n,c,u,i,s,b,_=[],w=[],h,o),o),123===y)if(0===u)sS(x,t,k,k,_,o,h,s,w);else{switch(d){
// c(ontainer)
case 99:if(110===jC(x,3))break;
// l(ayer)
case 108:if(97===jC(x,2))break;default:u=0;
// d(ocument) m(edia) s(upports)
case 100:case 109:case 115:}u?sS(e,k,k,r&&qC(lS(e,k,k,0,0,i,s,b,i,_=[],h,w),w),i,w,h,s,r?_:w):sS(x,k,k,k,[""],w,0,s,w)}}c=u=p=0,m=v=1,b=x="",h=a;break;
// :
case 58:h=1+RC(x),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==(GC=WC>0?jC(VC,--WC):0,UC--,10===GC&&(UC=1,$C--),GC))continue;switch(x+=FC(y),y*m){
// &
case 38:v=u>0?1:(x+="\f",-1);break;
// ,
case 44:s[c++]=(RC(x)-1)*v,v=1;break;
// @
case 64:45===XC()&&(x+=eS(KC())),d=XC(),u=h=RC(b=x+=oS(ZC())),y++;break;
// -
case 45:45===f&&2==RC(x)&&(m=0)}}return o}function lS(e,t,n,r,i,o,a,s,l,c,u,h){for(var d=i-1,p=0===i?o:[""],f=function(e){return e.length}(p),m=0,g=0,v=0;m<r;++m)for(var y=0,b=zC(e,d+1,d=MC(g=a[m])),_=e;y<f;++y)(_=OC(g>0?p[y]+" "+b:PC(b,/&\f/g,p[y])))&&(l[v++]=_);return YC(e,t,n,0===i?BC:s,l,c,u,h)}function cS(e,t,n,r){return YC(e,t,n,DC,FC(GC),zC(e,2,-2),0,r)}function uS(e,t,n,r,i){return YC(e,t,n,LC,zC(e,0,r),zC(e,r+1,-1),r,i)}function hS(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function dS(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case LC:return e.return=e.return||e.value;case DC:return"";case"@keyframes":return e.return=e.value+"{"+hS(e.children,r)+"}";case BC:if(!RC(e.value=e.props.join(",")))return""}return RC(n=hS(e.children,r))?e.return=e.value+"{"+n+"}":""}var pS=Ex(Object.keys,Object),fS=Object.prototype.hasOwnProperty;function mS(e){if(!Dx(e))return pS(e);var t=[];for(var n in Object(e))fS.call(e,n)&&"constructor"!=n&&t.push(n);return t}var gS=Jk(Ak,"DataView"),vS=Jk(Ak,"Promise"),yS=Jk(Ak,"Set"),bS=Jk(Ak,"WeakMap"),_S="[object Map]",wS="[object Promise]",kS="[object Set]",xS="[object WeakMap]",CS="[object DataView]",SS=Hk(gS),TS=Hk(sx),ES=Hk(vS),IS=Hk(yS),AS=Hk(bS),DS=Nk;(gS&&DS(new gS(new ArrayBuffer(1)))!=CS||sx&&DS(new sx)!=_S||vS&&DS(vS.resolve())!=wS||yS&&DS(new yS)!=kS||bS&&DS(new bS)!=xS)&&(DS=function(e){var t=Nk(e),n="[object Object]"==t?e.constructor:void 0,r=n?Hk(n):"";if(r)switch(r){case SS:return CS;case TS:return _S;case ES:return wS;case IS:return kS;case AS:return xS}return t});var BS=Object.prototype.hasOwnProperty;function LS(e){if(null==e)return!0;if(Rx(e)&&(jx(e)||"string"==typeof e||"function"==typeof e.splice||Wx(e)||oC(e)||Nx(e)))return!e.length;var t=DS(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Dx(e))return!mS(e).length;for(var n in e)if(BS.call(e,n))return!1;return!0}const MS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},FS={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},OS=function(e="fatal"){let t=MS.fatal;"string"==typeof e?(e=e.toLowerCase())in MS&&(t=MS[e]):"number"==typeof e&&(t=e),FS.trace=()=>{},FS.debug=()=>{},FS.info=()=>{},FS.warn=()=>{},FS.error=()=>{},FS.fatal=()=>{},t<=MS.fatal&&(FS.fatal=(console.error,function(){}.bind())),t<=MS.error&&(FS.error=(console.error,function(){}.bind())),t<=MS.warn&&(FS.warn=(console.warn,function(){}.bind())),t<=MS.info&&(FS.info=(console.info,function(){}.bind())),t<=MS.debug&&(FS.debug=(console.debug,function(){}.bind())),t<=MS.trace&&(FS.trace=(console.debug,function(){}.bind()))},PS=/<br\s*\/?>/gi,NS=(()=>{let e=!1;return()=>{e||(!function(){const e="data-temp-href-target";ik.addHook("beforeSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")||"")})),ik.addHook("afterSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)||""),t.removeAttribute(e),"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener"))}))}(),e=!0)}})();const jS=e=>{NS();return ik.sanitize(e)},zS=(e,t)=>{var n;if(!1!==(null==(n=t.flowchart)?void 0:n.htmlLabels)){const n=t.securityLevel;"antiscript"===n||"strict"===n?e=jS(e):"loose"!==n&&(e=(e=(e=$S(e)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),e=qS(e))}return e},RS=(e,t)=>e?e=t.dompurifyConfig?ik.sanitize(zS(e,t),t.dompurifyConfig).toString():ik.sanitize(zS(e,t),{FORBID_TAGS:["style"]}).toString():e,qS=e=>e.replace(/#br#/g,"<br/>"),$S=e=>e.replace(PS,"#br#"),US=e=>!1!==e&&!["false","null","0"].includes(String(e).trim().toLowerCase()),HS=function(e){const t=e.split(/(,)/),n=[];for(let r=0;r<t.length;r++){let e=t[r];if(","===e&&r>0&&r+1<t.length){const i=t[r-1],o=t[r+1];GS(i,o)&&(e=i+","+o,r++,n.pop())}n.push(VS(e))}return n.join("")},WS=(e,t)=>Math.max(0,e.split(t).length-1),GS=(e,t)=>{const n=WS(e,"~"),r=WS(t,"~");return 1===n&&1===r},VS=e=>{const t=WS(e,"~");let n=!1;if(t<=1)return e;t%2!=0&&e.startsWith("~")&&(e=e.substring(1),n=!0);const r=[...e];let i=r.indexOf("~"),o=r.lastIndexOf("~");for(;-1!==i&&-1!==o&&i!==o;)r[i]="<",r[o]=">",i=r.indexOf("~"),o=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},YS=()=>void 0!==window.MathMLElement,KS=/\$\$(.*)\$\$/g,XS=e=>{var t;return((null==(t=e.match(KS))?void 0:t.length)??0)>0},ZS=async(e,t)=>{e=await JS(e,t);const n=document.createElement("div");n.innerHTML=e,n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");null==r||r.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},JS=async(e,t)=>{if(!XS(e))return e;if(!YS()&&!t.legacyMathML)return e.replace(KS,"MathML is unsupported in this environment.");const{default:n}=await xo((async()=>{const{default:e}=await Promise.resolve().then((()=>rg));return{default:e}}),void 0,import.meta.url);return e.split(PS).map((e=>XS(e)?`\n            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">\n              ${e}\n            </div>\n          `:`<div>${e}</div>`)).join("").replace(KS,((e,t)=>n.renderToString(t,{throwOnError:!0,displayMode:!0,output:YS()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,"")))},QS={getRows:e=>{if(!e)return[""];return $S(e).replace(/\\n/g,"#br#").split("#br#")},sanitizeText:RS,sanitizeTextOrArray:(e,t)=>"string"==typeof e?RS(e,t):e.flat().map((e=>RS(e,t))),hasBreaks:e=>PS.test(e),splitBreaks:e=>e.split(PS),lineBreakRegex:PS,removeScript:jS,getUrl:e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},evaluate:US,getMax:function(...e){const t=e.filter((e=>!isNaN(e)));return Math.max(...t)},getMin:function(...e){const t=e.filter((e=>!isNaN(e)));return Math.min(...t)}},eT=(e,t)=>Sk(e,t?{s:-40,l:10}:{s:-40,l:-10}),tT="#ffffff",nT="#f2f2f2";let rT=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var e,t,n,r,i,o,a,s,l,c,u;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Sk(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Sk(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||eT(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||eT(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||eT(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||eT(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Tk(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Tk(this.tertiaryColor),this.lineColor=this.lineColor||Tk(this.background),this.arrowheadColor=this.arrowheadColor||Tk(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Ck(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Ck(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Tk(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||xk(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Sk(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Sk(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Sk(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Sk(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Sk(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Sk(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Sk(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Sk(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Sk(this.primaryColor,{h:330}),this.darkMode)for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Ck(this["cScale"+d],75);else for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Ck(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Tk(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||xk(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||Ck(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;const h=this.darkMode?-4:-1;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||Sk(this.mainBkg,{h:180,s:-15,l:h*(5+3*d)}),this["surfacePeer"+d]=this["surfacePeer"+d]||Sk(this.mainBkg,{h:180,s:-15,l:h*(8+3*d)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Sk(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Sk(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Sk(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Sk(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Sk(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Sk(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Sk(this.primaryColor,{l:-10}),this.pie5=this.pie5||Sk(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Sk(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Sk(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Sk(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Sk(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Sk(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Sk(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Sk(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Sk(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Sk(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Sk(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Sk(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Sk(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Sk(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||wk(this.quadrant1Fill)?xk(this.quadrant1Fill):Ck(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(e=this.xyChart)?void 0:e.backgroundColor)||this.background,titleColor:(null==(t=this.xyChart)?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ck(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Sk(this.primaryColor,{h:-30}),this.git4=this.git4||Sk(this.primaryColor,{h:-60}),this.git5=this.git5||Sk(this.primaryColor,{h:-90}),this.git6=this.git6||Sk(this.primaryColor,{h:60}),this.git7=this.git7||Sk(this.primaryColor,{h:120}),this.darkMode?(this.git0=xk(this.git0,25),this.git1=xk(this.git1,25),this.git2=xk(this.git2,25),this.git3=xk(this.git3,25),this.git4=xk(this.git4,25),this.git5=xk(this.git5,25),this.git6=xk(this.git6,25),this.git7=xk(this.git7,25)):(this.git0=Ck(this.git0,25),this.git1=Ck(this.git1,25),this.git2=Ck(this.git2,25),this.git3=Ck(this.git3,25),this.git4=Ck(this.git4,25),this.git5=Ck(this.git5,25),this.git6=Ck(this.git6,25),this.git7=Ck(this.git7,25)),this.gitInv0=this.gitInv0||Tk(this.git0),this.gitInv1=this.gitInv1||Tk(this.git1),this.gitInv2=this.gitInv2||Tk(this.git2),this.gitInv3=this.gitInv3||Tk(this.git3),this.gitInv4=this.gitInv4||Tk(this.git4),this.gitInv5=this.gitInv5||Tk(this.git5),this.gitInv6=this.gitInv6||Tk(this.git6),this.gitInv7=this.gitInv7||Tk(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||nT}calculate(e){if("object"!=typeof e)return void this.updateColors();const t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}};let iT=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=xk(this.primaryColor,16),this.tertiaryColor=Sk(this.primaryColor,{h:-160}),this.primaryBorderColor=Tk(this.background),this.secondaryBorderColor=eT(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=eT(this.tertiaryColor,this.darkMode),this.primaryTextColor=Tk(this.primaryColor),this.secondaryTextColor=Tk(this.secondaryColor),this.tertiaryTextColor=Tk(this.tertiaryColor),this.lineColor=Tk(this.background),this.textColor=Tk(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=xk(Tk("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=bk(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Ck("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Ck(this.sectionBkgColor,10),this.taskBorderColor=bk(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=bk(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,t,n,r,i,o,a,s,l,c,u;this.secondBkg=xk(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=xk(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=xk(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Sk(this.primaryColor,{h:64}),this.fillType3=Sk(this.secondaryColor,{h:64}),this.fillType4=Sk(this.primaryColor,{h:-64}),this.fillType5=Sk(this.secondaryColor,{h:-64}),this.fillType6=Sk(this.primaryColor,{h:128}),this.fillType7=Sk(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Sk(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Sk(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Sk(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Sk(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Sk(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Sk(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Sk(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Sk(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Sk(this.primaryColor,{h:330});for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||Tk(this["cScale"+h]);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScalePeer"+h]=this["cScalePeer"+h]||xk(this["cScale"+h],10);for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||Sk(this.mainBkg,{h:30,s:-30,l:-(4*h-10)}),this["surfacePeer"+h]=this["surfacePeer"+h]||Sk(this.mainBkg,{h:30,s:-30,l:-(4*h-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["pie"+h]=this["cScale"+h];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Sk(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Sk(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Sk(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Sk(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Sk(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Sk(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||wk(this.quadrant1Fill)?xk(this.quadrant1Fill):Ck(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(e=this.xyChart)?void 0:e.backgroundColor)||this.background,titleColor:(null==(t=this.xyChart)?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ck(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xk(this.secondaryColor,20),this.git1=xk(this.pie2||this.secondaryColor,20),this.git2=xk(this.pie3||this.tertiaryColor,20),this.git3=xk(this.pie4||Sk(this.primaryColor,{h:-30}),20),this.git4=xk(this.pie5||Sk(this.primaryColor,{h:-60}),20),this.git5=xk(this.pie6||Sk(this.primaryColor,{h:-90}),10),this.git6=xk(this.pie7||Sk(this.primaryColor,{h:60}),10),this.git7=xk(this.pie8||Sk(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Tk(this.git0),this.gitInv1=this.gitInv1||Tk(this.git1),this.gitInv2=this.gitInv2||Tk(this.git2),this.gitInv3=this.gitInv3||Tk(this.git3),this.gitInv4=this.gitInv4||Tk(this.git4),this.gitInv5=this.gitInv5||Tk(this.git5),this.gitInv6=this.gitInv6||Tk(this.git6),this.gitInv7=this.gitInv7||Tk(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Tk(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Tk(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||xk(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xk(this.background,2)}calculate(e){if("object"!=typeof e)return void this.updateColors();const t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}};let oT=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Sk(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Sk(this.primaryColor,{h:-160}),this.primaryBorderColor=eT(this.primaryColor,this.darkMode),this.secondaryBorderColor=eT(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=eT(this.tertiaryColor,this.darkMode),this.primaryTextColor=Tk(this.primaryColor),this.secondaryTextColor=Tk(this.secondaryColor),this.tertiaryTextColor=Tk(this.tertiaryColor),this.lineColor=Tk(this.background),this.textColor=Tk(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=bk(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,t,n,r,i,o,a,s,l,c,u;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Sk(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Sk(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Sk(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Sk(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Sk(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Sk(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Sk(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Sk(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Sk(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ck(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ck(this.tertiaryColor,40);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScale"+h]=Ck(this["cScale"+h],10),this["cScalePeer"+h]=this["cScalePeer"+h]||Ck(this["cScale"+h],25);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||Sk(this["cScale"+h],{h:180});for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||Sk(this.mainBkg,{h:30,l:-(5+5*h)}),this["surfacePeer"+h]=this["surfacePeer"+h]||Sk(this.mainBkg,{h:30,l:-(7+5*h)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||Tk(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Tk(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=xk(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Sk(this.primaryColor,{h:64}),this.fillType3=Sk(this.secondaryColor,{h:64}),this.fillType4=Sk(this.primaryColor,{h:-64}),this.fillType5=Sk(this.secondaryColor,{h:-64}),this.fillType6=Sk(this.primaryColor,{h:128}),this.fillType7=Sk(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Sk(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Sk(this.primaryColor,{l:-10}),this.pie5=this.pie5||Sk(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Sk(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Sk(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Sk(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Sk(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Sk(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Sk(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Sk(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Sk(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Sk(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Sk(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Sk(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Sk(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Sk(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||wk(this.quadrant1Fill)?xk(this.quadrant1Fill):Ck(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(e=this.xyChart)?void 0:e.backgroundColor)||this.background,titleColor:(null==(t=this.xyChart)?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Sk(this.primaryColor,{h:-30}),this.git4=this.git4||Sk(this.primaryColor,{h:-60}),this.git5=this.git5||Sk(this.primaryColor,{h:-90}),this.git6=this.git6||Sk(this.primaryColor,{h:60}),this.git7=this.git7||Sk(this.primaryColor,{h:120}),this.darkMode?(this.git0=xk(this.git0,25),this.git1=xk(this.git1,25),this.git2=xk(this.git2,25),this.git3=xk(this.git3,25),this.git4=xk(this.git4,25),this.git5=xk(this.git5,25),this.git6=xk(this.git6,25),this.git7=xk(this.git7,25)):(this.git0=Ck(this.git0,25),this.git1=Ck(this.git1,25),this.git2=Ck(this.git2,25),this.git3=Ck(this.git3,25),this.git4=Ck(this.git4,25),this.git5=Ck(this.git5,25),this.git6=Ck(this.git6,25),this.git7=Ck(this.git7,25)),this.gitInv0=this.gitInv0||Ck(Tk(this.git0),25),this.gitInv1=this.gitInv1||Tk(this.git1),this.gitInv2=this.gitInv2||Tk(this.git2),this.gitInv3=this.gitInv3||Tk(this.git3),this.gitInv4=this.gitInv4||Tk(this.git4),this.gitInv5=this.gitInv5||Tk(this.git5),this.gitInv6=this.gitInv6||Tk(this.git6),this.gitInv7=this.gitInv7||Tk(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Tk(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Tk(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||nT}calculate(e){if("object"!=typeof e)return void this.updateColors();const t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}};const aT=e=>{const t=new oT;return t.calculate(e),t};let sT=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=xk("#cde498",10),this.primaryBorderColor=eT(this.primaryColor,this.darkMode),this.secondaryBorderColor=eT(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=eT(this.tertiaryColor,this.darkMode),this.primaryTextColor=Tk(this.primaryColor),this.secondaryTextColor=Tk(this.secondaryColor),this.tertiaryTextColor=Tk(this.primaryColor),this.lineColor=Tk(this.background),this.textColor=Tk(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,t,n,r,i,o,a,s,l,c,u;this.actorBorder=Ck(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Sk(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Sk(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Sk(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Sk(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Sk(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Sk(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Sk(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Sk(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Sk(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ck(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ck(this.tertiaryColor,40);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScale"+h]=Ck(this["cScale"+h],10),this["cScalePeer"+h]=this["cScalePeer"+h]||Ck(this["cScale"+h],25);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||Sk(this["cScale"+h],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||Sk(this.mainBkg,{h:30,s:-30,l:-(5+5*h)}),this["surfacePeer"+h]=this["surfacePeer"+h]||Sk(this.mainBkg,{h:30,s:-30,l:-(8+5*h)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Sk(this.primaryColor,{h:64}),this.fillType3=Sk(this.secondaryColor,{h:64}),this.fillType4=Sk(this.primaryColor,{h:-64}),this.fillType5=Sk(this.secondaryColor,{h:-64}),this.fillType6=Sk(this.primaryColor,{h:128}),this.fillType7=Sk(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Sk(this.primaryColor,{l:-30}),this.pie5=this.pie5||Sk(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Sk(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Sk(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Sk(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Sk(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Sk(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Sk(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Sk(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Sk(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Sk(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Sk(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Sk(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Sk(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Sk(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||wk(this.quadrant1Fill)?xk(this.quadrant1Fill):Ck(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(e=this.xyChart)?void 0:e.backgroundColor)||this.background,titleColor:(null==(t=this.xyChart)?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Sk(this.primaryColor,{h:-30}),this.git4=this.git4||Sk(this.primaryColor,{h:-60}),this.git5=this.git5||Sk(this.primaryColor,{h:-90}),this.git6=this.git6||Sk(this.primaryColor,{h:60}),this.git7=this.git7||Sk(this.primaryColor,{h:120}),this.darkMode?(this.git0=xk(this.git0,25),this.git1=xk(this.git1,25),this.git2=xk(this.git2,25),this.git3=xk(this.git3,25),this.git4=xk(this.git4,25),this.git5=xk(this.git5,25),this.git6=xk(this.git6,25),this.git7=xk(this.git7,25)):(this.git0=Ck(this.git0,25),this.git1=Ck(this.git1,25),this.git2=Ck(this.git2,25),this.git3=Ck(this.git3,25),this.git4=Ck(this.git4,25),this.git5=Ck(this.git5,25),this.git6=Ck(this.git6,25),this.git7=Ck(this.git7,25)),this.gitInv0=this.gitInv0||Tk(this.git0),this.gitInv1=this.gitInv1||Tk(this.git1),this.gitInv2=this.gitInv2||Tk(this.git2),this.gitInv3=this.gitInv3||Tk(this.git3),this.gitInv4=this.gitInv4||Tk(this.git4),this.gitInv5=this.gitInv5||Tk(this.git5),this.gitInv6=this.gitInv6||Tk(this.git6),this.gitInv7=this.gitInv7||Tk(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Tk(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Tk(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||nT}calculate(e){if("object"!=typeof e)return void this.updateColors();const t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}};class lT{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=xk(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Sk(this.primaryColor,{h:-160}),this.primaryBorderColor=eT(this.primaryColor,this.darkMode),this.secondaryBorderColor=eT(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=eT(this.tertiaryColor,this.darkMode),this.primaryTextColor=Tk(this.primaryColor),this.secondaryTextColor=Tk(this.secondaryColor),this.tertiaryTextColor=Tk(this.tertiaryColor),this.lineColor=Tk(this.background),this.textColor=Tk(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,t,n,r,i,o,a,s,l,c,u;this.secondBkg=xk(this.contrast,55),this.border2=this.contrast,this.actorBorder=xk(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||Tk(this["cScale"+h]);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this.darkMode?this["cScalePeer"+h]=this["cScalePeer"+h]||xk(this["cScale"+h],10):this["cScalePeer"+h]=this["cScalePeer"+h]||Ck(this["cScale"+h],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||Sk(this.mainBkg,{l:-(5+5*h)}),this["surfacePeer"+h]=this["surfacePeer"+h]||Sk(this.mainBkg,{l:-(8+5*h)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=xk(this.contrast,30),this.sectionBkgColor2=xk(this.contrast,30),this.taskBorderColor=Ck(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=xk(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Ck(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Sk(this.primaryColor,{h:64}),this.fillType3=Sk(this.secondaryColor,{h:64}),this.fillType4=Sk(this.primaryColor,{h:-64}),this.fillType5=Sk(this.secondaryColor,{h:-64}),this.fillType6=Sk(this.primaryColor,{h:128}),this.fillType7=Sk(this.secondaryColor,{h:128});for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["pie"+h]=this["cScale"+h];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Sk(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Sk(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Sk(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Sk(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Sk(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Sk(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||wk(this.quadrant1Fill)?xk(this.quadrant1Fill):Ck(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:(null==(e=this.xyChart)?void 0:e.backgroundColor)||this.background,titleColor:(null==(t=this.xyChart)?void 0:t.titleColor)||this.primaryTextColor,xAxisTitleColor:(null==(n=this.xyChart)?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:(null==(r=this.xyChart)?void 0:r.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:(null==(i=this.xyChart)?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:(null==(o=this.xyChart)?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:(null==(a=this.xyChart)?void 0:a.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(null==(s=this.xyChart)?void 0:s.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:(null==(l=this.xyChart)?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:(null==(c=this.xyChart)?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:(null==(u=this.xyChart)?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ck(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Sk(this.primaryColor,{h:-30}),this.git4=this.pie5||Sk(this.primaryColor,{h:-60}),this.git5=this.pie6||Sk(this.primaryColor,{h:-90}),this.git6=this.pie7||Sk(this.primaryColor,{h:60}),this.git7=this.pie8||Sk(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Tk(this.git0),this.gitInv1=this.gitInv1||Tk(this.git1),this.gitInv2=this.gitInv2||Tk(this.git2),this.gitInv3=this.gitInv3||Tk(this.git3),this.gitInv4=this.gitInv4||Tk(this.git4),this.gitInv5=this.gitInv5||Tk(this.git5),this.gitInv6=this.gitInv6||Tk(this.git6),this.gitInv7=this.gitInv7||Tk(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tT,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||nT}calculate(e){if("object"!=typeof e)return void this.updateColors();const t=Object.keys(e);t.forEach((t=>{this[t]=e[t]})),this.updateColors(),t.forEach((t=>{this[t]=e[t]}))}}const cT={base:{getThemeVariables:e=>{const t=new rT;return t.calculate(e),t}},dark:{getThemeVariables:e=>{const t=new iT;return t.calculate(e),t}},default:{getThemeVariables:aT},forest:{getThemeVariables:e=>{const t=new sT;return t.calculate(e),t}},neutral:{getThemeVariables:e=>{const t=new lT;return t.calculate(e),t}}},uT={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},hT={...uT,
// Set, even though they're `undefined` so that `configKeys` finds these keys
// TODO: Should we replace these with `null` so that they can go in the JSON Schema?
deterministicIDSeed:void 0,themeCSS:void 0,
// add non-JSON default config values
themeVariables:cT.default.getThemeVariables(),sequence:{...uT.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...uT.gantt,tickInterval:void 0,useWidth:void 0},c4:{...uT.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...uT.pie,useWidth:984},xyChart:{...uT.xyChart,useWidth:void 0},requirement:{...uT.requirement,useWidth:void 0},gitGraph:{...uT.gitGraph,
// TODO: This is a temporary override for `gitGraph`, since every other
//       diagram does have `useMaxWidth`, but instead sets it to `true`.
//       Should we set this to `true` instead?
useMaxWidth:!1},sankey:{...uT.sankey,
// this is false, unlike every other diagram (other than gitGraph)
// TODO: can we make this default to `true` instead?
useMaxWidth:!1}},dT=(e,t="")=>Object.keys(e).reduce(((n,r)=>Array.isArray(e[r])?n:"object"==typeof e[r]&&null!==e[r]?[...n,t+r,...dT(e[r],"")]:[...n,t+r]),[]),pT=new Set(dT(hT,"")),fT=hT,mT=e=>{if(FS.debug("sanitizeDirective called with",e),"object"==typeof e&&null!=e)if(Array.isArray(e))e.forEach((e=>mT(e)));else{for(const t of Object.keys(e)){if(FS.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!pT.has(t)||null==e[t]){FS.debug("sanitize deleting key: ",t),delete e[t];continue}if("object"==typeof e[t]){FS.debug("sanitizing object",t),mT(e[t]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)t.includes(r)&&(FS.debug("sanitizing css option",t),e[t]=gT(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const n=e.themeVariables[t];(null==n?void 0:n.match)&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}FS.debug("After sanitization",e)}},gT=e=>{let t=0,n=0;for(const r of e){if(t<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===r?t++:"}"===r&&n++}return t!==n?"{ /* ERROR: Unbalanced CSS */ }":e},vT=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,yT=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,bT=/\s*%%.*\n/gm;class _T extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}}const wT={},kT=function(e,t){e=e.replace(vT,"").replace(yT,"").replace(bT,"\n");for(const[n,{detector:r}]of Object.entries(wT)){if(r(e,t))return n}throw new _T(`No diagram type detected matching given configuration for text: ${e}`)},xT=(...e)=>{for(const{id:t,detector:n,loader:r}of e)CT(t,n,r)},CT=(e,t,n)=>{wT[e]?FS.error(`Detector with key ${e} already exists`):wT[e]={detector:t,loader:n},FS.debug(`Detector with key ${e} added${n?" with loader":""}`)},ST=(e,t,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach((t=>ST(e,t,i))),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach((t=>{e.includes(t)||e.push(t)})),e):void 0===e||n<=0?null!=e&&"object"==typeof e&&"object"==typeof t?Object.assign(e,t):t:(void 0!==t&&"object"==typeof e&&"object"==typeof t&&Object.keys(t).forEach((i=>{"object"!=typeof t[i]||void 0!==e[i]&&"object"!=typeof e[i]?(r||"object"!=typeof e[i]&&"object"!=typeof t[i])&&(e[i]=t[i]):(void 0===e[i]&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=ST(e[i],t[i],{depth:n-1,clobber:r}))})),e)},TT=ST,ET="",IT={curveBasis:T_,curveBasisClosed:function(e){return new E_(e)},curveBasisOpen:function(e){return new I_(e)},curveBumpX:function(e){return new k_(e,!0)},curveBumpY:function(e){return new k_(e,!1)},curveBundle:D_,curveCardinalClosed:O_,curveCardinalOpen:N_,curveCardinal:M_,curveCatmullRomClosed:$_,curveCatmullRomOpen:H_,curveCatmullRom:R_,curveLinear:w_,curveLinearClosed:function(e){return new W_(e)},curveMonotoneX:function(e){return new X_(e)},curveMonotoneY:function(e){return new Z_(e)},curveNatural:function(e){return new Q_(e)},curveStep:function(e){return new tw(e,.5)},curveStepAfter:function(e){return new tw(e,1)},curveStepBefore:function(e){return new tw(e,0)}},AT=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,DT=function(e,t=null){try{const n=new RegExp(`[%]{2}(?![{]${AT.source})(?=[}][%]{2}).*\n`,"ig");let r;e=e.trim().replace(n,"").replace(/'/gm,'"'),FS.debug(`Detecting diagram directive${null!==t?" type:"+t:""} based on the text:${e}`);const i=[];for(;null!==(r=yT.exec(e));)if(r.index===yT.lastIndex&&yT.lastIndex++,r&&!t||t&&r[1]&&r[1].match(t)||t&&r[2]&&r[2].match(t)){const e=r[1]?r[1]:r[2],t=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:e,args:t})}return 0===i.length?{type:e,args:null}:1===i.length?i[0]:i}catch(n){return FS.error(`ERROR: ${n.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}};function BT(e,t){if(!e)return t;const n=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return IT[n]??t}function LT(e,t){return e&&t?Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0}const MT=(e,t=2)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},FT=(e,t)=>{let n,r=t;for(const i of e){if(n){const e=LT(i,n);if(e<r)r-=e;else{const t=r/e;if(t<=0)return n;if(t>=1)return{x:i.x,y:i.y};if(t>0&&t<1)return{x:MT((1-t)*n.x+t*i.x,5),y:MT((1-t)*n.y+t*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")};function OT(e){let t="",n="";for(const r of e)void 0!==r&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":t=t+r+";");return{style:t,labelStyle:n}}let PT=0;const NT=()=>(PT++,"id-"+Math.random().toString(36).substr(2,12)+"-"+PT);const jT=e=>function(e){let t="";const n="0123456789abcdef";for(let r=0;r<e;r++)t+=n.charAt(Math.floor(16*Math.random()));return t}(e.length),zT=function(e,t){const n=t.text.replace(QS.lineBreakRegex," "),[,r]=VT(t.fontSize),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.style("text-anchor",t.anchor),i.style("font-family",t.fontFamily),i.style("font-size",r),i.style("font-weight",t.fontWeight),i.attr("fill",t.fill),void 0!==t.class&&i.attr("class",t.class);const o=i.append("tspan");return o.attr("x",t.x+2*t.textMargin),o.attr("fill",t.fill),o.text(n),i},RT=ux(((e,t,n)=>{if(!e)return e;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),QS.lineBreakRegex.test(e))return e;const r=e.split(" "),i=[];let o="";return r.forEach(((e,a)=>{const s=UT(`${e} `,n),l=UT(o,n);if(s>t){const{hyphenatedStrings:r,remainingWord:a}=qT(e,t,"-",n);i.push(o,...r),o=a}else l+s>=t?(i.push(o),o=e):o=[o,e].filter(Boolean).join(" ");a+1===r.length&&i.push(o)})),i.filter((e=>""!==e)).join(n.joinWith)}),((e,t,n)=>`${e}${t}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`)),qT=ux(((e,t,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...e],o=[];let a="";return i.forEach(((e,s)=>{const l=`${a}${e}`;if(UT(l,r)>=t){const e=s+1,t=i.length===e,r=`${l}${n}`;o.push(t?l:r),a=""}else a=l})),{hyphenatedStrings:o,remainingWord:a}}),((e,t,n="-",r)=>`${e}${t}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`));function $T(e,t){return HT(e,t).height}function UT(e,t){return HT(e,t).width}const HT=ux(((e,t)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=t;if(!e)return{width:0,height:0};const[,o]=VT(n),a=["sans-serif",r],s=e.split(QS.lineBreakRegex),l=[],c=fy("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const h of a){let e=0;const t={width:0,height:0,lineHeight:0};for(const n of s){const r={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""};r.text=n||"";const a=zT(u,r).style("font-size",o).style("font-weight",i).style("font-family",h),s=(a._groups||a)[0][0].getBBox();if(0===s.width&&0===s.height)throw new Error("svg element not in render tree");t.width=Math.round(Math.max(t.width,s.width)),e=Math.round(s.height),t.height+=e,t.lineHeight=Math.round(Math.max(t.lineHeight,e))}l.push(t)}u.remove();return l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]}),((e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`));let WT;function GT(e){return"str"in e}const VT=e=>{if("number"==typeof e)return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]};function YT(e,t){return AC({},e,t)}const KT={assignWithDepth:TT,wrapLabel:RT,calculateTextHeight:$T,calculateTextWidth:UT,calculateTextDimensions:HT,cleanAndMerge:YT,detectInit:function(e,t){const n=DT(e,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const e=n.map((e=>e.args));mT(e),r=TT(r,[...e])}else r=n.args;if(!r)return;let i=kT(e,t);const o="config";return void 0!==r[o]&&("flowchart-v2"===i&&(i="flowchart"),r[i]=r[o],delete r[o]),r},detectDirective:DT,isSubstringInArray:function(e,t){for(const[n,r]of t.entries())if(r.match(e))return n;return-1},interpolateToCurve:BT,calcLabelPosition:function(e){return 1===e.length?e[0]:function(e){let t,n=0;return e.forEach((e=>{n+=LT(e,t),t=e})),FT(e,n/2)}(e)},calcCardinalityPosition:(e,t,n)=>{FS.info(`our points ${JSON.stringify(t)}`),t[0]!==n&&(t=t.reverse());const r=FT(t,25),i=e?10:5,o=Math.atan2(t[0].y-r.y,t[0].x-r.x),a={x:0,y:0};return a.x=Math.sin(o)*i+(t[0].x+r.x)/2,a.y=-Math.cos(o)*i+(t[0].y+r.y)/2,a},calcTerminalLabelPosition:function(e,t,n){const r=structuredClone(n);FS.info("our points",r),"start_left"!==t&&"start_right"!==t&&r.reverse();const i=FT(r,25+e),o=10+.5*e,a=Math.atan2(r[0].y-i.y,r[0].x-i.x),s={x:0,y:0};return"start_left"===t?(s.x=Math.sin(a+Math.PI)*o+(r[0].x+i.x)/2,s.y=-Math.cos(a+Math.PI)*o+(r[0].y+i.y)/2):"end_right"===t?(s.x=Math.sin(a-Math.PI)*o+(r[0].x+i.x)/2-5,s.y=-Math.cos(a-Math.PI)*o+(r[0].y+i.y)/2-5):"end_left"===t?(s.x=Math.sin(a)*o+(r[0].x+i.x)/2-5,s.y=-Math.cos(a)*o+(r[0].y+i.y)/2-5):(s.x=Math.sin(a)*o+(r[0].x+i.x)/2,s.y=-Math.cos(a)*o+(r[0].y+i.y)/2),s},formatUrl:function(e,t){const n=e.trim();if(n)return"loose"!==t.securityLevel?Xg.sanitizeUrl(n):n},getStylesFromArray:OT,generateId:NT,random:jT,runFunc:(e,...t)=>{const n=e.split("."),r=n.length-1,i=n[r];let o=window;for(let a=0;a<r;a++)if(o=o[n[a]],!o)return void FS.error(`Function name: ${e} not found in window`);o[i](...t)},entityDecode:function(e){return WT=WT||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),WT.innerHTML=e,unescape(WT.textContent)},insertTitle:(e,t,n,r)=>{var i;if(!r)return;const o=null==(i=e.node())?void 0:i.getBBox();o&&e.append("text").text(r).attr("x",o.x+o.width/2).attr("y",-n).attr("class",t)},parseFontSize:VT,InitIDGenerator:class{constructor(e=!1,t){this.count=0,this.count=t?t.length:0,this.next=e?()=>this.count++:()=>Date.now()}}},XT=function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},ZT="10.9.3",JT=Object.freeze(fT);let QT,eE=TT({},JT),tE=[],nE=TT({},JT);const rE=(e,t)=>{let n=TT({},e),r={};for(const i of t)sE(i),r=TT(r,i);if(n=TT(n,r),r.theme&&r.theme in cT){const e=TT({},QT),t=TT(e.themeVariables||{},r.themeVariables);n.theme&&n.theme in cT&&(n.themeVariables=cT[n.theme].getThemeVariables(t))}return nE=n,hE(nE),nE},iE=()=>TT({},eE),oE=e=>(hE(e),TT(nE,e),aE()),aE=()=>TT({},nE),sE=e=>{e&&(["secure",...eE.secure??[]].forEach((t=>{Object.hasOwn(e,t)&&(FS.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])})),Object.keys(e).forEach((t=>{t.startsWith("__")&&delete e[t]})),Object.keys(e).forEach((t=>{"string"==typeof e[t]&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],"object"==typeof e[t]&&sE(e[t])})))},lE=(e=eE)=>{tE=[],rE(e,tE)},cE={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},uE={},hE=e=>{var t;e&&((e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&(uE[t="LAZY_LOAD_DEPRECATED"]||(FS.warn(cE[t]),uE[t]=!0)))},dE={id:"c4",detector:e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/c4Diagram-3d4e48cf.DouFeKPC.js");return{diagram:e}}),__vite__mapDeps([0,1]),import.meta.url);return{id:"c4",diagram:e}}},pE="flowchart",fE={id:pE,detector:(e,t)=>{var n,r;return"dagre-wrapper"!==(null==(n=null==t?void 0:t.flowchart)?void 0:n.defaultRenderer)&&"elk"!==(null==(r=null==t?void 0:t.flowchart)?void 0:r.defaultRenderer)&&/^\s*graph/.test(e)},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/flowDiagram-66a62f08.DzG7qElV.js");return{diagram:e}}),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url);return{id:pE,diagram:e}}},mE="flowchart-v2",gE={id:mE,detector:(e,t)=>{var n,r,i;return"dagre-d3"!==(null==(n=null==t?void 0:t.flowchart)?void 0:n.defaultRenderer)&&"elk"!==(null==(r=null==t?void 0:t.flowchart)?void 0:r.defaultRenderer)&&(!(!/^\s*graph/.test(e)||"dagre-wrapper"!==(null==(i=null==t?void 0:t.flowchart)?void 0:i.defaultRenderer))||/^\s*flowchart/.test(e))},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/flowDiagram-v2-96b9c2cf.CiGtoNOY.js");return{diagram:e}}),__vite__mapDeps([15,3,6,4,7,5,8,9,10,11,12,13,14]),import.meta.url);return{id:mE,diagram:e}}},vE={id:"er",detector:e=>/^\s*erDiagram/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/erDiagram-9861fffd.C-hnhnW1.js");return{diagram:e}}),__vite__mapDeps([16,4,5,11,12,13]),import.meta.url);return{id:"er",diagram:e}}},yE="gitGraph",bE={id:yE,detector:e=>/^\s*gitGraph/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/gitGraphDiagram-72cf32ee.mB0FNjC1.js");return{diagram:e}}),[],import.meta.url);return{id:yE,diagram:e}}},_E="gantt",wE={id:_E,detector:e=>/^\s*gantt/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/ganttDiagram-c361ad54.CB91MpOr.js");return{diagram:e}}),__vite__mapDeps([17,18,19]),import.meta.url);return{id:_E,diagram:e}}},kE="info",xE={id:kE,detector:e=>/^\s*info/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/infoDiagram-f8f76790.BBdOFkV3.js");return{diagram:e}}),[],import.meta.url);return{id:kE,diagram:e}}},CE={id:"pie",detector:e=>/^\s*pie/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/pieDiagram-8a3498a8.B849dUzX.js");return{diagram:e}}),__vite__mapDeps([20,21,13,22,19,12]),import.meta.url);return{id:"pie",diagram:e}}},SE="quadrantChart",TE={id:SE,detector:e=>/^\s*quadrantChart/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/quadrantDiagram-120e2f19.CVAB5zZg.js");return{diagram:e}}),__vite__mapDeps([23,18,19]),import.meta.url);return{id:SE,diagram:e}}},EE="xychart",IE={id:EE,detector:e=>/^\s*xychart-beta/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/xychartDiagram-e933f94c.CeTAjf4F.js");return{diagram:e}}),__vite__mapDeps([24,10,19,22,18,11,12,13]),import.meta.url);return{id:EE,diagram:e}}},AE="requirement",DE={id:AE,detector:e=>/^\s*requirement(Diagram)?/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/requirementDiagram-deff3bca.B_SQ9inR.js");return{diagram:e}}),__vite__mapDeps([25,4,5,11,12,13]),import.meta.url);return{id:AE,diagram:e}}},BE="sequence",LE={id:BE,detector:e=>/^\s*sequenceDiagram/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/sequenceDiagram-704730f1.BzQYAYnT.js");return{diagram:e}}),__vite__mapDeps([26,1]),import.meta.url);return{id:BE,diagram:e}}},ME="class",FE={id:ME,detector:(e,t)=>{var n;return"dagre-wrapper"!==(null==(n=null==t?void 0:t.class)?void 0:n.defaultRenderer)&&/^\s*classDiagram/.test(e)},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/classDiagram-70f12bd4.Cnt1nwHB.js");return{diagram:e}}),__vite__mapDeps([27,28,4,5,11,12,13]),import.meta.url);return{id:ME,diagram:e}}},OE="classDiagram",PE={id:OE,detector:(e,t)=>{var n;return!(!/^\s*classDiagram/.test(e)||"dagre-wrapper"!==(null==(n=null==t?void 0:t.class)?void 0:n.defaultRenderer))||/^\s*classDiagram-v2/.test(e)},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/classDiagram-v2-f2320105.DKaqRlN3.js");return{diagram:e}}),__vite__mapDeps([29,28,4,7,5,8,9,10,11,12,13]),import.meta.url);return{id:OE,diagram:e}}},NE="state",jE={id:NE,detector:(e,t)=>{var n;return"dagre-wrapper"!==(null==(n=null==t?void 0:t.state)?void 0:n.defaultRenderer)&&/^\s*stateDiagram/.test(e)},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/stateDiagram-587899a1.D-2UTZzh.js");return{diagram:e}}),__vite__mapDeps([30,31,4,5,11,12,13]),import.meta.url);return{id:NE,diagram:e}}},zE="stateDiagram",RE={id:zE,detector:(e,t)=>{var n;return!!/^\s*stateDiagram-v2/.test(e)||!(!/^\s*stateDiagram/.test(e)||"dagre-wrapper"!==(null==(n=null==t?void 0:t.state)?void 0:n.defaultRenderer))},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/stateDiagram-v2-d93cdb3a.D7TyF2Eh.js");return{diagram:e}}),__vite__mapDeps([32,31,4,7,5,8,9,10,11,12,13]),import.meta.url);return{id:zE,diagram:e}}},qE="journey",$E={id:qE,detector:e=>/^\s*journey/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/journeyDiagram-49397b02.D69ELXf0.js");return{diagram:e}}),__vite__mapDeps([33,1,21,13]),import.meta.url);return{id:qE,diagram:e}}},UE=function(e,t,n,r){const i=function(e,t,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${t}px;`)):(r.set("height",e),r.set("width",t)),r}(t,n,r);!function(e,t){for(let n of t)e.attr(n[0],n[1])}(e,i)},HE=function(e,t,n,r){const i=t.node().getBBox(),o=i.width,a=i.height;FS.info(`SVG bounds: ${o}x${a}`,i);let s=0,l=0;FS.info(`Graph bounds: ${s}x${l}`,e),s=o+2*n,l=a+2*n,FS.info(`Calculated bounds: ${s}x${l}`),UE(t,l,s,r);const c=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;t.attr("viewBox",c)},WE={},GE=(e,t,n)=>{let r="";return e in WE&&WE[e]?r=WE[e](n):FS.warn(`No theme found for ${e}`),` & {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n    fill: ${n.textColor}\n  }\n\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${n.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${n.errorTextColor};\n    stroke: ${n.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 2px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${n.lineColor};\n    stroke: ${n.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${n.lineColor};\n  }\n\n  & svg {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n  }\n\n  ${r}\n\n  ${t}\n`};let VE="",YE="",KE="";const XE=e=>RS(e,aE()),ZE=()=>{VE="",KE="",YE=""},JE=e=>{VE=XE(e).replace(/^\s+/g,"")},QE=()=>VE,eI=e=>{KE=XE(e).replace(/\n\s+/g,"\n")},tI=()=>KE,nI=e=>{YE=XE(e)},rI=()=>YE,iI=Object.freeze(Object.defineProperty({__proto__:null,clear:ZE,getAccDescription:tI,getAccTitle:QE,getDiagramTitle:rI,setAccDescription:eI,setAccTitle:JE,setDiagramTitle:nI},Symbol.toStringTag,{value:"Module"})),oI=FS,aI=OS,sI=aE,lI=oE,cI=JT,uI=e=>RS(e,sI()),hI=HE,dI={},pI=(e,t,n)=>{var r,i,o;if(dI[e])throw new Error(`Diagram ${e} already registered.`);dI[e]=t,n&&CT(e,n),i=e,void 0!==(o=t.styles)&&(WE[i]=o),null==(r=t.injectUtils)||r.call(t,oI,aI,sI,uI,hI,iI,(()=>{}))},fI=e=>{if(e in dI)return dI[e];throw new mI(e)};class mI extends Error{constructor(e){super(`Diagram ${e} not found.`)}}const gI=e=>{var t;const{securityLevel:n}=sI();let r=fy("body");if("sandbox"===n){const n=fy(`#i${e}`);r=fy(((null==(t=n.node())?void 0:t.contentDocument)??document).body)}return r.select(`#${e}`)},vI={draw:(e,t,n)=>{FS.debug("rendering svg for syntax error\n");const r=gI(t),i=r.append("g");r.attr("viewBox","0 0 2412 512"),UE(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)}},yI=vI,bI={db:{},renderer:vI,parser:{parser:{yy:{}},parse:()=>{}}},_I="flowchart-elk",wI={id:_I,detector:(e,t)=>{var n;
// If diagram explicitly states flowchart-elk
return!!(/^\s*flowchart-elk/.test(e)||// If a flowchart/graph diagram has their default renderer set to elk
/^\s*flowchart|graph/.test(e)&&"elk"===(null==(n=null==t?void 0:t.flowchart)?void 0:n.defaultRenderer))},loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/flowchart-elk-definition-4a651766.BjAZRXyX.js");return{diagram:e}}),__vite__mapDeps([34,3,9,10,11,12,13]),import.meta.url);return{id:_I,diagram:e}}},kI="timeline",xI={id:kI,detector:e=>/^\s*timeline/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/timeline-definition-85554ec2.Dm30c-qR.js");return{diagram:e}}),__vite__mapDeps([35,21,13]),import.meta.url);return{id:kI,diagram:e}}},CI="mindmap",SI={id:CI,detector:e=>/^\s*mindmap/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/mindmap-definition-fc14e90a.D7PfG8e_.js");return{diagram:e}}),__vite__mapDeps([36,10]),import.meta.url);return{id:CI,diagram:e}}},TI="sankey",EI={id:TI,detector:e=>/^\s*sankey-beta/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/sankeyDiagram-04a897e0.WD0LVGPs.js");return{diagram:e}}),__vite__mapDeps([37,22,19,38]),import.meta.url);return{id:TI,diagram:e}}},II="block",AI={id:II,detector:e=>/^\s*block-beta/.test(e),loader:async()=>{const{diagram:e}=await xo((async()=>{const{diagram:e}=await import("./js/blockDiagram-38ab4fdb.nWJ64UqB.js");return{diagram:e}}),__vite__mapDeps([39,8,4,9,10,11,12,13,14,22,19,38]),import.meta.url);return{id:II,diagram:e}}};let DI=!1;const BI=()=>{DI||(DI=!0,pI("error",bI,(e=>"error"===e.toLowerCase().trim())),pI("---",
// --- diagram type may appear if YAML front-matter is not parsed correctly
{db:{clear:()=>{}},styles:{},
// should never be used
renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},(e=>e.toLowerCase().trimStart().startsWith("---"))),xT(dE,PE,FE,vE,wE,xE,CE,DE,LE,wI,gE,fE,SI,xI,bE,RE,jE,$E,TE,EI,IE,AI))};class LI{constructor(e,t={}){this.text=e,this.metadata=t,this.type="graph",this.text=function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/classDef.*:\S*#.*;/g,(function(e){return e.substring(0,e.length-1)})),t=t.replace(/#\w+;/g,(function(e){const t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?""+t+"":""+t+""})),t}(e),this.text+="\n";const n=aE();try{this.type=kT(e,n)}catch(i7){this.type="error",this.detectError=i7}const r=fI(this.type);FS.debug("Type "+this.type),this.db=r.db,this.renderer=r.renderer,this.parser=r.parser,this.parser.parser.yy=this.db,this.init=r.init,this.parse()}parse(){var e,t,n,r,i;if(this.detectError)throw this.detectError;null==(t=(e=this.db).clear)||t.call(e);const o=aE();null==(n=this.init)||n.call(this,o),this.metadata.title&&(null==(i=(r=this.db).setDiagramTitle)||i.call(r,this.metadata.title)),this.parser.parse(this.text)}async render(e,t){await this.renderer.draw(this.text,e,t,this)}getParser(){return this.parser}getType(){return this.type}}const MI=async(e,t={})=>{const n=kT(e,aE());try{fI(n)}catch(r){const e=wT[n].loader;if(!e)throw new _T(`Diagram ${n} not found.`);const{id:t,diagram:i}=await e();pI(t,i)}return new LI(e,t)};let FI=[];
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function OI(e){return null==e}var PI={isNothing:OI,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:OI(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function NI(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function jI(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=NI(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}jI.prototype=Object.create(Error.prototype),jI.prototype.constructor=jI,jI.prototype.toString=function(e){return this.name+": "+NI(this,e)};var zI=jI;function RI(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(t=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"")+a,pos:r-t+o.length}}function qI(e,t){return PI.repeat(" ",t-e.length)+e}var $I=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,l,c="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,h=t.maxLength-(t.indent+u+3);for(s=1;s<=t.linesBefore&&!(a-s<0);s++)l=RI(e.buffer,i[a-s],o[a-s],e.position-(i[a]-i[a-s]),h),c=PI.repeat(" ",t.indent)+qI((e.line-s+1).toString(),u)+" | "+l.str+"\n"+c;for(l=RI(e.buffer,i[a],o[a],e.position,h),c+=PI.repeat(" ",t.indent)+qI((e.line+1).toString(),u)+" | "+l.str+"\n",c+=PI.repeat("-",t.indent+u+3+l.pos)+"^\n",s=1;s<=t.linesAfter&&!(a+s>=o.length);s++)l=RI(e.buffer,i[a+s],o[a+s],e.position-(i[a]-i[a+s]),h),c+=PI.repeat(" ",t.indent)+qI((e.line+s+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")},UI=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],HI=["scalar","sequence","mapping"];var WI=function(e,t){var n,r;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===UI.indexOf(t))throw new zI('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){r[String(t)]=e}))})),r),-1===HI.indexOf(this.kind))throw new zI('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function GI(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function VI(e){return this.extend(e)}VI.prototype.extend=function(e){var t=[],n=[];if(e instanceof WI)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new zI("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof WI))throw new zI("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new zI("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new zI("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof WI))throw new zI("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(VI.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=GI(r,"implicit"),r.compiledExplicit=GI(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var YI=new VI({explicit:[new WI("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new WI("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new WI("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]});var KI=new WI("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var XI=new WI("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function ZI(e){return 48<=e&&e<=55}function JI(e){return 48<=e&&e<=57}var QI=new WI("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,o=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!ZI(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!JI(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!PI.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},
/* eslint-disable max-len */
hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),eA=new RegExp(
// 2.5e4, 2.5 and integers
"^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var tA=/^[-+]?[0-9]+e/;var nA=new WI("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!eA.test(e)||// Quick hack to not allow integers end with `_`
// Probably should update regexp & check speed
"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||PI.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(PI.isNegativeZero(e))return"-0.0";return n=e.toString(10),tA.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),rA=YI.extend({implicit:[KI,XI,QI,nA]}),iA=rA,oA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),aA=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var sA=new WI("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==oA.exec(e)||null!==aA.exec(e))},construct:function(e){var t,n,r,i,o,a,s,l,c=0,u=null;if(null===(t=oA.exec(e))&&(t=aA.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var lA=new WI("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),cA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var uA=new WI("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=cA;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=cA,a=0,s=[];for(t=0;t<i;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,a=cA;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),hA=Object.prototype.hasOwnProperty,dA=Object.prototype.toString;var pA=new WI("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],o=!1,"[object Object]"!==dA.call(r))return!1;for(i in r)if(hA.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),fA=Object.prototype.toString;var mA=new WI("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==fA.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),gA=Object.prototype.hasOwnProperty;var vA=new WI("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(gA.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),yA=iA.extend({implicit:[sA,lA],explicit:[uA,pA,mA,vA]}),bA=Object.prototype.hasOwnProperty,_A=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,wA=/[\x85\u2028\u2029]/,kA=/[,\[\]\{\}]/,xA=/^(?:!|!!|![a-z\-]+!)$/i,CA=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function SA(e){return Object.prototype.toString.call(e)}function TA(e){return 10===e||13===e}function EA(e){return 9===e||32===e}function IA(e){return 9===e||32===e||10===e||13===e}function AA(e){return 44===e||91===e||93===e||123===e||125===e}function DA(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function BA(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function LA(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var MA=new Array(256),FA=new Array(256),OA=0;OA<256;OA++)MA[OA]=BA(OA)?1:0,FA[OA]=BA(OA);function PA(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||yA,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function NA(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),
// omit trailing \0
position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=$I(n),new zI(t,n)}function jA(e,t){throw NA(e,t)}function zA(e,t){e.onWarning&&e.onWarning.call(null,NA(e,t))}var RA={YAML:function(e,t,n){var r,i,o;null!==e.version&&jA(e,"duplication of %YAML directive"),1!==n.length&&jA(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&jA(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&jA(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&zA(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&jA(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],xA.test(r)||jA(e,"ill-formed tag handle (first argument) of the TAG directive"),bA.call(e.tagMap,r)&&jA(e,'there is a previously declared suffix for "'+r+'" tag handle'),CA.test(i)||jA(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(o){jA(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function qA(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||jA(e,"expected valid JSON character");else _A.test(s)&&jA(e,"the stream contains non-printable characters");e.result+=s}}function $A(e,t,n,r){var i,o,a,s;for(PI.isObject(n)||jA(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],bA.call(t,o)||(t[o]=n[o],r[o]=!0)}function UA(e,t,n,r,i,o,a,s,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&jA(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===SA(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===SA(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)$A(e,t,o[c],n);else $A(e,t,o,n);else e.json||bA.call(n,i)||!bA.call(t,i)||(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,jA(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function HA(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):jA(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function WA(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;EA(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!TA(i))break;for(HA(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&zA(e,"deficient indentation"),r}function GA(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!IA(t)))}function VA(e,t){1===t?e.result+=" ":t>1&&(e.result+=PI.repeat("\n",t-1))}function YA(e,t){var n,r,i=e.tag,o=e.anchor,a=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,jA(e,"tab characters must not be used in indentation")),45===r)&&IA(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,WA(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,ZA(e,t,3,!1,!0),a.push(e.result),WA(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)jA(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function KA(e){var t,n,r,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&jA(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):jA(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!IA(i);)33===i&&(a?jA(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),xA.test(n)||jA(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),kA.test(r)&&jA(e,"tag suffix cannot contain flow indicator characters")}r&&!CA.test(r)&&jA(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(s){jA(e,"tag name is malformed: "+r)}return o?e.tag=r:bA.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:jA(e,'undeclared tag handle "'+n+'"'),!0}function XA(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&jA(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!IA(n)&&!AA(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&jA(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function ZA(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f=1,m=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=4===n||3===n,r&&WA(e,!0,-1)&&(m=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),1===f)for(;KA(e)||XA(e);)WA(e,!0,-1)?(m=!0,s=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):s=!1;if(s&&(s=m||i),1!==f&&4!==n||(d=1===n||2===n?t:t+1,p=e.position-e.lineStart,1===f?s&&(YA(e,p)||function(e,t,n){var r,i,o,a,s,l,c,u=e.tag,h=e.anchor,d={},p=Object.create(null),f=null,m=null,g=null,v=!1,y=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,jA(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!IA(r)){if(a=e.line,s=e.lineStart,l=e.position,!ZA(e,n,2,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);EA(c);)c=e.input.charCodeAt(++e.position);if(58===c)IA(c=e.input.charCodeAt(++e.position))||jA(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(UA(e,d,p,f,m,null,a,s,l),f=m=g=null),y=!0,v=!1,i=!1,f=e.tag,m=e.result;else{if(!y)return e.tag=u,e.anchor=h,!0;jA(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,e.anchor=h,!0;jA(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(v&&(UA(e,d,p,f,m,null,a,s,l),f=m=g=null),y=!0,v=!0,i=!0):v?(v=!1,i=!0):jA(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===o||e.lineIndent>t)&&(v&&(a=e.line,s=e.lineStart,l=e.position),ZA(e,t,4,!0,i)&&(v?m=e.result:g=e.result),v||(UA(e,d,p,f,m,g,a,s,l),f=m=g=null),WA(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)jA(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&UA(e,d,p,f,m,null,a,s,l),y&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),y}(e,p,d))||function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f=!0,m=e.tag,g=e.anchor,v=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if(WA(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=m,e.anchor=g,e.kind=c?"mapping":"sequence",e.result=o,!0;f?44===p&&jA(e,"expected the node content, but found ','"):jA(e,"missed comma between flow collection entries"),d=null,s=l=!1,63===p&&IA(e.input.charCodeAt(e.position+1))&&(s=l=!0,e.position++,WA(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,ZA(e,t,1,!1,!0),h=e.tag,u=e.result,WA(e,!0,t),p=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),WA(e,!0,t),ZA(e,t,1,!1,!0),d=e.result),c?UA(e,o,v,h,u,d,n,r,i):s?o.push(UA(e,null,v,h,u,d,n,r,i)):o.push(u),WA(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}jA(e,"unexpected end of the stream within a flow collection")}(e,d)?g=!0:(a&&function(e,t){var n,r,i,o,a,s=1,l=!1,c=!1,u=t,h=0,d=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===s?s=43===o?3:2:jA(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?jA(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?jA(e,"repeat of an indentation width identifier"):(u=t+i-1,c=!0)}if(EA(o)){do{o=e.input.charCodeAt(++e.position)}while(EA(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!TA(o)&&0!==o)}for(;0!==o;){for(HA(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),TA(o))h++;else{if(e.lineIndent<u){3===s?e.result+=PI.repeat("\n",l?1+h:h):1===s&&l&&(e.result+="\n");break}for(r?EA(o)?(d=!0,e.result+=PI.repeat("\n",l?1+h:h)):d?(d=!1,e.result+=PI.repeat("\n",h+1)):0===h?l&&(e.result+=" "):e.result+=PI.repeat("\n",h):e.result+=PI.repeat("\n",l?1+h:h),l=!0,c=!0,h=0,n=e.position;!TA(o)&&0!==o;)o=e.input.charCodeAt(++e.position);qA(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(qA(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else TA(n)?(qA(e,r,i,!0),VA(e,WA(e,!1,t)),r=i=e.position):e.position===e.lineStart&&GA(e)?jA(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);jA(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,r,i,o,a,s,l;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return qA(e,n,e.position,!0),e.position++,!0;if(92===s){if(qA(e,n,e.position,!0),TA(s=e.input.charCodeAt(++e.position)))WA(e,!1,t);else if(s<256&&MA[s])e.result+=FA[s],e.position++;else if((a=120===(l=s)?2:117===l?4:85===l?8:0)>0){for(i=a,o=0;i>0;i--)(a=DA(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:jA(e,"expected hexadecimal character");e.result+=LA(o),e.position++}else jA(e,"unknown escape sequence");n=r=e.position}else TA(s)?(qA(e,n,r,!0),VA(e,WA(e,!1,t)),n=r=e.position):e.position===e.lineStart&&GA(e)?jA(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}jA(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?g=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!IA(r)&&!AA(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&jA(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),bA.call(e.anchorMap,n)||jA(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],WA(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,a,s,l,c,u,h=e.kind,d=e.result;if(IA(u=e.input.charCodeAt(e.position))||AA(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(IA(r=e.input.charCodeAt(e.position+1))||n&&AA(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==u;){if(58===u){if(IA(r=e.input.charCodeAt(e.position+1))||n&&AA(r))break}else if(35===u){if(IA(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&GA(e)||n&&AA(u))break;if(TA(u)){if(s=e.line,l=e.lineStart,c=e.lineIndent,WA(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=l,e.lineIndent=c;break}}a&&(qA(e,i,o,!1),VA(e,e.line-s),i=o=e.position,a=!1),EA(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return qA(e,i,o,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,1===n)&&(g=!0,null===e.tag&&(e.tag="?")):(g=!0,null===e.tag&&null===e.anchor||jA(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===f&&(g=s&&YA(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&jA(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((h=e.implicitTypes[l]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(bA.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,l=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,u[l].tag.length)===u[l].tag){h=u[l];break}h||jA(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&jA(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):jA(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function JA(e){var t,n,r,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(WA(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!IA(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&jA(e,"directive name must not be less than one character in length");0!==i;){for(;EA(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!TA(i));break}if(TA(i))break;for(t=e.position;0!==i&&!IA(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&HA(e),bA.call(RA,n)?RA[n](e,n,r):zA(e,'unknown document directive "'+n+'"')}WA(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,WA(e,!0,-1)):a&&jA(e,"directives end mark is expected"),ZA(e,e.lineIndent-1,4,!1,!0),WA(e,!0,-1),e.checkLineBreaks&&wA.test(e.input.slice(o,e.position))&&zA(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&GA(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,WA(e,!0,-1)):e.position<e.length-1&&jA(e,"end of the stream or a document separator is expected")}var QA=function(e,t){var n=function(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new PA(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,jA(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)JA(n);return n.documents}(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new zI("expected a single document in the stream, but found more")}},eD=rA,tD={load:QA}.load;const nD=e=>{const{text:t,metadata:n}=function(e){const t=e.match(vT);if(!t)return{text:e,metadata:{}};let n=tD(t[1],{
// To support config, we need JSON schema.
// https://www.yaml.org/spec/1.2/spec.html#id2803231
schema:eD})??{};n="object"!=typeof n||Array.isArray(n)?{}:n;const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:e.slice(t[0].length),metadata:r}}(e),{displayMode:r,title:i,config:o={}}=n;return r&&(o.gantt||(o.gantt={}),o.gantt.displayMode=r),{title:i,config:o,text:t}};function rD(e){const t=(e=>e.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,((e,t,n)=>"<"+t+n.replace(/="([^"]*)"/g,"='$1'")+">")))(e),n=nD(t),r=(e=>{const t=KT.detectInit(e)??{},n=KT.detectDirective(e,"wrap");return Array.isArray(n)?t.wrap=n.some((({type:e})=>{})):"wrap"===(null==n?void 0:n.type)&&(t.wrap=!0),{text:(r=e,r.replace(yT,"")),directive:t};var r})(n.text),i=YT(n.config,r.directive);return{code:e=r.text.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),title:n.title,config:i}}const iD=["foreignobject"],oD=["dominant-baseline"];function aD(e){const t=rD(e);var n;return lE(),n=t.config??{},mT(n),!n.fontFamily||n.themeVariables&&n.themeVariables.fontFamily||(n.themeVariables={fontFamily:n.fontFamily}),tE.push(n),rE(eE,tE),t}const sD=(e,t,n=[])=>`\n.${e} ${t} { ${n.join(" !important; ")} !important; }`,lD=(e,t,n,r)=>{const i=((e,t={})=>{var n;let r="";if(void 0!==e.themeCSS&&(r+=`\n${e.themeCSS}`),void 0!==e.fontFamily&&(r+=`\n:root { --mermaid-font-family: ${e.fontFamily}}`),void 0!==e.altFontFamily&&(r+=`\n:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!LS(t)){const i=e.htmlLabels||(null==(n=e.flowchart)?void 0:n.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const e in t){const n=t[e];LS(n.styles)||i.forEach((e=>{r+=sD(n.id,e,n.styles)})),LS(n.textStyles)||(r+=sD(n.id,"tspan",n.textStyles))}}return r})(e,n);return hS(aS(`${r}{${GE(t,i,e.themeVariables)}}`),dS)},cD=(e,t,n,r,i)=>{const o=e.append("div");o.attr("id",n),r&&o.attr("style",r);const a=o.append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&a.attr("xmlns:xlink",i),a.append("g"),e};function uD(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const hD=(e,t={})=>{const{code:n}=rD(e);return MI(n,t)};const dD=Object.freeze({render:async function(e,t,n){var r,i,o,a,s,l;BI();const c=aD(t);t=c.code;const u=aE();FS.debug(u),t.length>((null==u?void 0:u.maxTextSize)??5e4)&&(t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const h="#"+e,d="i"+e,p="#"+d,f="d"+e,m="#"+f;let g=fy("body");const v="sandbox"===u.securityLevel,y="loose"===u.securityLevel,b=u.fontFamily;if(void 0!==n){if(n&&(n.innerHTML=""),v){const e=uD(fy(n),d);g=fy(e.nodes()[0].contentDocument.body),g.node().style.margin=0}else g=fy(n);cD(g,e,f,`font-family: ${b}`,"http://www.w3.org/1999/xlink")}else{if(((e,t,n,r)=>{var i,o,a;null==(i=e.getElementById(t))||i.remove(),null==(o=e.getElementById(n))||o.remove(),null==(a=e.getElementById(r))||a.remove()})(document,e,f,d),v){const e=uD(fy("body"),d);g=fy(e.nodes()[0].contentDocument.body),g.node().style.margin=0}else g=fy("body");cD(g,e,f)}let _,w;try{_=await hD(t,{title:c.title})}catch(B){_=new LI("error"),w=B}const k=g.select(m).node(),x=_.type,C=k.firstChild,S=C.firstChild,T=null==(i=(r=_.renderer).getClasses)?void 0:i.call(r,t,_),E=lD(u,x,T,h),I=document.createElement("style");I.innerHTML=E,C.insertBefore(I,S);try{await _.renderer.draw(t,e,ZT,_)}catch(i7){throw yI.draw(t,e,ZT),i7}!function(e,t,n,r){(function(e,t){e.attr("role","graphics-document document"),""!==t&&e.attr("aria-roledescription",t)})(t,e),function(e,t,n,r){if(void 0!==e.insert){if(n){const t=`chart-desc-${r}`;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(n)}if(t){const n=`chart-title-${r}`;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}(t,n,r,t.attr("id"))}(x,g.select(`${m} svg`),null==(a=(o=_.db).getAccTitle)?void 0:a.call(o),null==(l=(s=_.db).getAccDescription)?void 0:l.call(s)),g.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let A=g.select(m).node().innerHTML;if(FS.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),A=((e="",t,n)=>{let r=e;return n||t||(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=XT(r),r=r.replace(/<br>/g,"<br/>"),r})(A,v,US(u.arrowMarkerAbsolute)),v){A=((e="",t)=>{var n,r;return`<iframe style="width:100%;height:${(null==(r=null==(n=null==t?void 0:t.viewBox)?void 0:n.baseVal)?void 0:r.height)?t.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;base64,${btoa('<body style="margin:0">'+e+"</body>")}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`})(A,g.select(m+" svg").node())}else y||(A=ik.sanitize(A,{ADD_TAGS:iD,ADD_ATTR:oD}));if(FI.forEach((e=>{e()})),FI=[],w)throw w;const D=fy(v?p:m).node();return D&&"remove"in D&&D.remove(),{svg:A,bindFunctions:_.db.bindFunctions}},parse:async function(e,t){BI(),e=aD(e).code;try{await hD(e)}catch(n){if(null==t?void 0:t.suppressErrors)return!1;throw n}return!0},getDiagramFromText:hD,initialize:function(e={}){var t;(null==e?void 0:e.fontFamily)&&!(null==(t=e.themeVariables)?void 0:t.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),QT=TT({},e),(null==e?void 0:e.theme)&&e.theme in cT?e.themeVariables=cT[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=cT.default.getThemeVariables(e.themeVariables));const n="object"==typeof e?(e=>(eE=TT({},JT),eE=TT(eE,e),e.theme&&cT[e.theme]&&(eE.themeVariables=cT[e.theme].getThemeVariables(e.themeVariables)),rE(eE,tE),eE))(e):iE();OS(n.logLevel),BI()},getConfig:aE,setConfig:oE,getSiteConfig:iE,updateSiteConfig:e=>(eE=TT(eE,e),rE(eE,tE),eE),reset:()=>{lE()},globalReset:()=>{lE(JT)},defaultConfig:JT});OS(aE().logLevel),lE(aE());const pD=(e,t,n)=>{FS.warn(e),GT(e)?(n&&n(e.str,e.hash),t.push({...e,message:e.str,error:e})):(n&&n(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},fD=async function(e={querySelector:".mermaid"}){try{await mD(e)}catch(i7){if(GT(i7)&&FS.error(i7.str),kD.parseError&&kD.parseError(i7),!e.suppressErrors)throw FS.error("Use the suppressErrors option to suppress these errors"),i7}},mD=async function({postRenderCallback:e,querySelector:t,nodes:n}={querySelector:".mermaid"}){const r=dD.getConfig();let i;if(FS.debug((e?"":"No ")+"Callback function found"),n)i=n;else{if(!t)throw new Error("Nodes and querySelector are both undefined");i=document.querySelectorAll(t)}FS.debug(`Found ${i.length} diagrams`),void 0!==(null==r?void 0:r.startOnLoad)&&(FS.debug("Start On Load: "+(null==r?void 0:r.startOnLoad)),dD.updateSiteConfig({startOnLoad:null==r?void 0:r.startOnLoad}));const o=new KT.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const s=[];for(const c of Array.from(i)){
/*! Check if previously processed */
if(FS.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const t=`mermaid-${o.next()}`;a=c.innerHTML,a=Ug(KT.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const n=KT.detectInit(a);n&&FS.debug("Detected early reinit: ",n);try{const{svg:n,bindFunctions:r}=await wD(t,a,c);c.innerHTML=n,e&&await e(t),r&&r(c)}catch(l){pD(l,s,kD.parseError)}}if(s.length>0)throw s[0]},gD=function(e){dD.initialize(e)},vD=function(){if(kD.startOnLoad){const{startOnLoad:e}=dD.getConfig();e&&kD.run().catch((e=>FS.error("Mermaid failed to initialize",e)))}};"undefined"!=typeof document&&
/*!
   * Wait for document loaded before starting the execution
   */
window.addEventListener("load",vD,!1);const yD=[];let bD=!1;const _D=async()=>{if(!bD){for(bD=!0;yD.length>0;){const e=yD.shift();if(e)try{await e()}catch(i7){FS.error("Error executing queue",i7)}}bD=!1}},wD=(e,t,n)=>new Promise(((r,i)=>{yD.push((()=>new Promise(((o,a)=>{dD.render(e,t,n).then((e=>{o(e),r(e)}),(e=>{var t;FS.error("Error parsing",e),null==(t=kD.parseError)||t.call(kD,e),a(e),i(e)}))})))),_D().catch(i)})),kD={startOnLoad:!0,mermaidAPI:dD,parse:async(e,t)=>new Promise(((n,r)=>{yD.push((()=>new Promise(((i,o)=>{dD.parse(e,t).then((e=>{i(e),n(e)}),(e=>{var t;FS.error("Error parsing",e),null==(t=kD.parseError)||t.call(kD,e),o(e),r(e)}))})))),_D().catch(r)})),render:wD,init:async function(e,t,n){FS.warn("mermaid.init is deprecated. Please use run instead."),e&&gD(e);const r={postRenderCallback:n,querySelector:".mermaid"};"string"==typeof t?r.querySelector=t:t&&(t instanceof HTMLElement?r.nodes=[t]:r.nodes=t),await fD(r)},run:fD,registerExternalDiagrams:async(e,{lazyLoad:t=!0}={})=>{xT(...e),!1===t&&await(async()=>{FS.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(wT).map((async([e,{detector:t,loader:n}])=>{if(n)try{fI(e)}catch(r){try{const{diagram:e,id:r}=await n();pI(r,e,t)}catch(i){throw FS.error(`Failed to load external diagram with key ${e}. Removing from detectors.`),delete wT[e],i}}})))).filter((e=>"rejected"===e.status));if(e.length>0){FS.error(`Failed to load ${e.length} external diagrams`);for(const t of e)FS.error(t);throw new Error(`Failed to load ${e.length} external diagrams`)}})()},initialize:gD,parseError:void 0,contentLoaded:vD,setParseErrorHandler:function(e){kD.parseError=e},detectType:kT};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function xD(e){return null==e}var CD={isNothing:xD,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:xD(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function SD(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function TD(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=SD(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}TD.prototype=Object.create(Error.prototype),TD.prototype.constructor=TD,TD.prototype.toString=function(e){return this.name+": "+SD(this,e)};var ED=TD;function ID(e,t,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-t>s&&(t=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"")+a,pos:r-t+o.length}}function AD(e,t){return CD.repeat(" ",t-e.length)+e}var DD=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,l,c="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,h=t.maxLength-(t.indent+u+3);for(s=1;s<=t.linesBefore&&!(a-s<0);s++)l=ID(e.buffer,i[a-s],o[a-s],e.position-(i[a]-i[a-s]),h),c=CD.repeat(" ",t.indent)+AD((e.line-s+1).toString(),u)+" | "+l.str+"\n"+c;for(l=ID(e.buffer,i[a],o[a],e.position,h),c+=CD.repeat(" ",t.indent)+AD((e.line+1).toString(),u)+" | "+l.str+"\n",c+=CD.repeat("-",t.indent+u+3+l.pos)+"^\n",s=1;s<=t.linesAfter&&!(a+s>=o.length);s++)l=ID(e.buffer,i[a+s],o[a+s],e.position-(i[a]-i[a+s]),h),c+=CD.repeat(" ",t.indent)+AD((e.line+s+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")},BD=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],LD=["scalar","sequence","mapping"];var MD=function(e,t){var n,r;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===BD.indexOf(t))throw new ED('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){r[String(t)]=e}))})),r),-1===LD.indexOf(this.kind))throw new ED('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function FD(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function OD(e){return this.extend(e)}OD.prototype.extend=function(e){var t=[],n=[];if(e instanceof MD)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new ED("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof MD))throw new ED("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new ED("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new ED("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof MD))throw new ED("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(OD.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=FD(r,"implicit"),r.compiledExplicit=FD(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var PD=OD,ND=new MD("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),jD=new MD("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),zD=new MD("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),RD=new PD({explicit:[ND,jD,zD]});var qD=new MD("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var $D=new MD("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function UD(e){return 48<=e&&e<=55}function HD(e){return 48<=e&&e<=57}var WD=new MD("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,o=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!UD(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!HD(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!CD.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},
/* eslint-disable max-len */
hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GD=new RegExp(
// 2.5e4, 2.5 and integers
"^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var VD=/^[-+]?[0-9]+e/;var YD=new MD("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!GD.test(e)||// Quick hack to not allow integers end with `_`
// Probably should update regexp & check speed
"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||CD.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(CD.isNegativeZero(e))return"-0.0";return n=e.toString(10),VD.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),KD=RD.extend({implicit:[qD,$D,WD,YD]}),XD=KD,ZD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),JD=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var QD=new MD("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==ZD.exec(e)||null!==JD.exec(e))},construct:function(e){var t,n,r,i,o,a,s,l,c=0,u=null;if(null===(t=ZD.exec(e))&&(t=JD.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var eB=new MD("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),tB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var nB=new MD("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=tB;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=tB,a=0,s=[];for(t=0;t<i;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,a=tB;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),rB=Object.prototype.hasOwnProperty,iB=Object.prototype.toString;var oB=new MD("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],o=!1,"[object Object]"!==iB.call(r))return!1;for(i in r)if(rB.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),aB=Object.prototype.toString;var sB=new MD("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==aB.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),lB=Object.prototype.hasOwnProperty;var cB=new MD("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(lB.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),uB=XD.extend({implicit:[QD,eB],explicit:[nB,oB,sB,cB]}),hB=Object.prototype.hasOwnProperty,dB=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,pB=/[\x85\u2028\u2029]/,fB=/[,\[\]\{\}]/,mB=/^(?:!|!!|![a-z\-]+!)$/i,gB=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function vB(e){return Object.prototype.toString.call(e)}function yB(e){return 10===e||13===e}function bB(e){return 9===e||32===e}function _B(e){return 9===e||32===e||10===e||13===e}function wB(e){return 44===e||91===e||93===e||123===e||125===e}function kB(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function xB(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function CB(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var SB=new Array(256),TB=new Array(256),EB=0;EB<256;EB++)SB[EB]=xB(EB)?1:0,TB[EB]=xB(EB);function IB(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||uB,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function AB(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),
// omit trailing \0
position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=DD(n),new ED(t,n)}function DB(e,t){throw AB(e,t)}function BB(e,t){e.onWarning&&e.onWarning.call(null,AB(e,t))}var LB={YAML:function(e,t,n){var r,i,o;null!==e.version&&DB(e,"duplication of %YAML directive"),1!==n.length&&DB(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&DB(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&DB(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&BB(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&DB(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],mB.test(r)||DB(e,"ill-formed tag handle (first argument) of the TAG directive"),hB.call(e.tagMap,r)&&DB(e,'there is a previously declared suffix for "'+r+'" tag handle'),gB.test(i)||DB(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(o){DB(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function MB(e,t,n,r){var i,o,a,s;if(t<n){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||DB(e,"expected valid JSON character");else dB.test(s)&&DB(e,"the stream contains non-printable characters");e.result+=s}}function FB(e,t,n,r){var i,o,a,s;for(CD.isObject(n)||DB(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],hB.call(t,o)||(t[o]=n[o],r[o]=!0)}function OB(e,t,n,r,i,o,a,s,l){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&DB(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===vB(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===vB(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)FB(e,t,o[c],n);else FB(e,t,o,n);else e.json||hB.call(n,i)||!hB.call(t,i)||(e.line=a||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,DB(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function PB(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):DB(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function NB(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;bB(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!yB(i))break;for(PB(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&BB(e,"deficient indentation"),r}function jB(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!_B(t)))}function zB(e,t){1===t?e.result+=" ":t>1&&(e.result+=CD.repeat("\n",t-1))}function RB(e,t){var n,r,i=e.tag,o=e.anchor,a=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,DB(e,"tab characters must not be used in indentation")),45===r)&&_B(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,NB(e,!0,-1)&&e.lineIndent<=t)a.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,UB(e,t,3,!1,!0),a.push(e.result),NB(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)DB(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=a,!0)}function qB(e){var t,n,r,i,o=!1,a=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&DB(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(a=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):DB(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!_B(i);)33===i&&(a?DB(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),mB.test(n)||DB(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),fB.test(r)&&DB(e,"tag suffix cannot contain flow indicator characters")}r&&!gB.test(r)&&DB(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(s){DB(e,"tag name is malformed: "+r)}return o?e.tag=r:hB.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:DB(e,'undeclared tag handle "'+n+'"'),!0}function $B(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&DB(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!_B(n)&&!wB(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&DB(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function UB(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f=1,m=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=4===n||3===n,r&&NB(e,!0,-1)&&(m=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),1===f)for(;qB(e)||$B(e);)NB(e,!0,-1)?(m=!0,s=o,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):s=!1;if(s&&(s=m||i),1!==f&&4!==n||(d=1===n||2===n?t:t+1,p=e.position-e.lineStart,1===f?s&&(RB(e,p)||function(e,t,n){var r,i,o,a,s,l,c,u=e.tag,h=e.anchor,d={},p=Object.create(null),f=null,m=null,g=null,v=!1,y=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,DB(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!_B(r)){if(a=e.line,s=e.lineStart,l=e.position,!UB(e,n,2,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);bB(c);)c=e.input.charCodeAt(++e.position);if(58===c)_B(c=e.input.charCodeAt(++e.position))||DB(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(OB(e,d,p,f,m,null,a,s,l),f=m=g=null),y=!0,v=!1,i=!1,f=e.tag,m=e.result;else{if(!y)return e.tag=u,e.anchor=h,!0;DB(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,e.anchor=h,!0;DB(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(v&&(OB(e,d,p,f,m,null,a,s,l),f=m=g=null),y=!0,v=!0,i=!0):v?(v=!1,i=!0):DB(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===o||e.lineIndent>t)&&(v&&(a=e.line,s=e.lineStart,l=e.position),UB(e,t,4,!0,i)&&(v?m=e.result:g=e.result),v||(OB(e,d,p,f,m,g,a,s,l),f=m=g=null),NB(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)DB(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&OB(e,d,p,f,m,null,a,s,l),y&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),y}(e,p,d))||function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f=!0,m=e.tag,g=e.anchor,v=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if(NB(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=m,e.anchor=g,e.kind=c?"mapping":"sequence",e.result=o,!0;f?44===p&&DB(e,"expected the node content, but found ','"):DB(e,"missed comma between flow collection entries"),d=null,s=l=!1,63===p&&_B(e.input.charCodeAt(e.position+1))&&(s=l=!0,e.position++,NB(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,UB(e,t,1,!1,!0),h=e.tag,u=e.result,NB(e,!0,t),p=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),NB(e,!0,t),UB(e,t,1,!1,!0),d=e.result),c?OB(e,o,v,h,u,d,n,r,i):s?o.push(OB(e,null,v,h,u,d,n,r,i)):o.push(u),NB(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}DB(e,"unexpected end of the stream within a flow collection")}(e,d)?g=!0:(a&&function(e,t){var n,r,i,o,a,s=1,l=!1,c=!1,u=t,h=0,d=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===s?s=43===o?3:2:DB(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?DB(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?DB(e,"repeat of an indentation width identifier"):(u=t+i-1,c=!0)}if(bB(o)){do{o=e.input.charCodeAt(++e.position)}while(bB(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!yB(o)&&0!==o)}for(;0!==o;){for(PB(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),yB(o))h++;else{if(e.lineIndent<u){3===s?e.result+=CD.repeat("\n",l?1+h:h):1===s&&l&&(e.result+="\n");break}for(r?bB(o)?(d=!0,e.result+=CD.repeat("\n",l?1+h:h)):d?(d=!1,e.result+=CD.repeat("\n",h+1)):0===h?l&&(e.result+=" "):e.result+=CD.repeat("\n",h):e.result+=CD.repeat("\n",l?1+h:h),l=!0,c=!0,h=0,n=e.position;!yB(o)&&0!==o;)o=e.input.charCodeAt(++e.position);MB(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(MB(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else yB(n)?(MB(e,r,i,!0),zB(e,NB(e,!1,t)),r=i=e.position):e.position===e.lineStart&&jB(e)?DB(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);DB(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,r,i,o,a,s,l;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return MB(e,n,e.position,!0),e.position++,!0;if(92===s){if(MB(e,n,e.position,!0),yB(s=e.input.charCodeAt(++e.position)))NB(e,!1,t);else if(s<256&&SB[s])e.result+=TB[s],e.position++;else if((a=120===(l=s)?2:117===l?4:85===l?8:0)>0){for(i=a,o=0;i>0;i--)(a=kB(s=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:DB(e,"expected hexadecimal character");e.result+=CB(o),e.position++}else DB(e,"unknown escape sequence");n=r=e.position}else yB(s)?(MB(e,n,r,!0),zB(e,NB(e,!1,t)),n=r=e.position):e.position===e.lineStart&&jB(e)?DB(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}DB(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?g=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!_B(r)&&!wB(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&DB(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),hB.call(e.anchorMap,n)||DB(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],NB(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,a,s,l,c,u,h=e.kind,d=e.result;if(_B(u=e.input.charCodeAt(e.position))||wB(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(_B(r=e.input.charCodeAt(e.position+1))||n&&wB(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;0!==u;){if(58===u){if(_B(r=e.input.charCodeAt(e.position+1))||n&&wB(r))break}else if(35===u){if(_B(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&jB(e)||n&&wB(u))break;if(yB(u)){if(s=e.line,l=e.lineStart,c=e.lineIndent,NB(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=s,e.lineStart=l,e.lineIndent=c;break}}a&&(MB(e,i,o,!1),zB(e,e.line-s),i=o=e.position,a=!1),bB(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return MB(e,i,o,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,d,1===n)&&(g=!0,null===e.tag&&(e.tag="?")):(g=!0,null===e.tag&&null===e.anchor||DB(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===f&&(g=s&&RB(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&DB(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((h=e.implicitTypes[l]).resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(hB.call(e.typeMap[e.kind||"fallback"],e.tag))h=e.typeMap[e.kind||"fallback"][e.tag];else for(h=null,l=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,u[l].tag.length)===u[l].tag){h=u[l];break}h||DB(e,"unknown tag !<"+e.tag+">"),null!==e.result&&h.kind!==e.kind&&DB(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result,e.tag)?(e.result=h.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):DB(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function HB(e){var t,n,r,i,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(NB(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(a=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!_B(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&DB(e,"directive name must not be less than one character in length");0!==i;){for(;bB(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!yB(i));break}if(yB(i))break;for(t=e.position;0!==i&&!_B(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&PB(e),hB.call(LB,n)?LB[n](e,n,r):BB(e,'unknown document directive "'+n+'"')}NB(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,NB(e,!0,-1)):a&&DB(e,"directives end mark is expected"),UB(e,e.lineIndent-1,4,!1,!0),NB(e,!0,-1),e.checkLineBreaks&&pB.test(e.input.slice(o,e.position))&&BB(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&jB(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,NB(e,!0,-1)):e.position<e.length-1&&DB(e,"end of the stream or a document separator is expected")}function WB(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new IB(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,DB(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)HB(n);return n.documents}var GB=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=WB(e,n);if("function"!=typeof t)return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])},VB=function(e,t){var n=WB(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new ED("expected a single document in the stream, but found more")}},YB={loadAll:GB,load:VB},KB=Object.prototype.toString,XB=Object.prototype.hasOwnProperty,ZB=65279,JB={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},QB=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],eL=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function tL(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new ED("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+CD.repeat("0",r-t.length)+t}function nL(e){this.schema=e.schema||uB,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=CD.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,a,s,l;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=e.compiledTypeMap.fallback[a])&&XB.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function rL(e,t){for(var n,r=CD.repeat(" ",t),i=0,o=-1,a="",s=e.length;i<s;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=s):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function iL(e,t){return"\n"+CD.repeat(" ",e.indent*t)}function oL(e){return 32===e||9===e}function aL(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==ZB||65536<=e&&e<=1114111}function sL(e){return aL(e)&&e!==ZB&&13!==e&&10!==e}function lL(e,t,n){var r=sL(e),i=r&&!oL(e);
// ns-plain-safe
return(n?
// c = flow-in
r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!i)||sL(t)&&!oL(t)&&35===e||58===t&&i}function cL(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function uL(e){return/^\n* /.test(e)}function hL(e,t,n,r,i,o,a,s){var l,c,u=0,h=null,d=!1,p=!1,f=-1!==r,m=-1,g=aL(c=cL(e,0))&&c!==ZB&&!oL(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&function(e){return!oL(e)&&58!==e}(cL(e,e.length-1));if(t||a)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!aL(u=cL(e,l)))return 5;g=g&&lL(u,h,s),h=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=cL(e,l)))d=!0,f&&(p=p||// Foldable line = too long, and not more-indented.
l-m-1>r&&" "!==e[m+1],m=l);else if(!aL(u))return 5;g=g&&lL(u,h,s),h=u}p=p||f&&l-m-1>r&&" "!==e[m+1]}return d||p?n>9&&uL(e)?5:a?2===o?5:2:p?4:3:!g||a||i(e)?2===o?5:2:1}function dL(e,t,n,r,i){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==QB.indexOf(t)||eL.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;switch(hL(t,s,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,i)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+pL(t,e.indent)+fL(rL(t,o));case 4:return">"+pL(t,e.indent)+fL(rL(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(s=e.indexOf("\n"),s=-1!==s?s:e.length,i.lastIndex=s,mL(e.slice(0,s),t)),a="\n"===e[0]||" "===e[0];var s;for(;r=i.exec(e);){var l=r[1],c=r[2];n=" "===c[0],o+=l+(a||n||""===c?"":"\n")+mL(c,t),a=n}return o}(t,a),o));case 5:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=cL(e,i),!(t=JB[r])&&aL(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||tL(r);return n}(t)+'"';default:throw new ED("impossible error: invalid scalar style")}}()}function pL(e,t){var n=uL(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function fL(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function mL(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,l="";n=i.exec(e);)(s=n.index)-o>t&&(r=a>o?a:s,l+="\n"+e.slice(o,r),o=r+1),a=s;return l+="\n",e.length-o>t&&a>o?l+=e.slice(o,a)+"\n"+e.slice(a+1):l+=e.slice(o),l.slice(1)}function gL(e,t,n,r){var i,o,a,s="",l=e.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],e.replacer&&(a=e.replacer.call(n,String(i),a)),(yL(e,t+1,a,!0,!0,!1,!0)||void 0===a&&yL(e,t+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=iL(e,t)),e.dump&&10===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=l,e.dump=s||"[]"}function vL(e,t,n){var r,i,o,a,s,l;for(o=0,a=(i=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===KB.call(s.represent))r=s.represent(t,l);else{if(!XB.call(s.represent,l))throw new ED("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](t,l)}e.dump=r}return!0}return!1}function yL(e,t,n,r,i,o,a){e.tag=null,e.dump=n,vL(e,n,!1)||vL(e,n,!0);var s,l=KB.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,h,d="[object Object]"===l||"[object Array]"===l;if(d&&(h=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||h||2!==e.indent&&t>0)&&(i=!1),h&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&h&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,a,s,l,c,u="",h=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new ED("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)c="",r&&""===u||(c+=iL(e,t)),s=n[a=d[i]],e.replacer&&(s=e.replacer.call(n,a,s)),yL(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=iL(e,t)),yL(e,t+1,s,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=h,e.dump=u||"{}"}(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,a,s,l="",c=e.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)s="",""!==l&&(s+=", "),e.condenseFlow&&(s+='"'),a=n[o=u[r]],e.replacer&&(a=e.replacer.call(n,o,a)),yL(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),yL(e,t,a,!1,!1)&&(l+=s+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?gL(e,t-1,e.dump,i):gL(e,t,e.dump,i),h&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,a="",s=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(yL(e,t,o,!1,!1)||void 0===o&&yL(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}(e,t,e.dump),h&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new ED("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&dL(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function bL(e,t){var n,r,i=[],o=[];for(_L(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function _L(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)_L(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)_L(e[r[i]],t,n)}var wL=function(e,t){var n=new nL(t=t||{});n.noRefs||bL(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),yL(n,0,r,!0,!0)?n.dump+"\n":""};function kL(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var xL={Type:MD,Schema:PD,FAILSAFE_SCHEMA:RD,JSON_SCHEMA:KD,CORE_SCHEMA:XD,DEFAULT_SCHEMA:uB,load:YB.load,loadAll:YB.loadAll,dump:{dump:wL}.dump,YAMLException:ED,types:{binary:nB,float:YD,map:zD,null:qD,pairs:sB,set:cB,timestamp:QD,bool:$D,int:WD,merge:eB,omap:oB,seq:jD,str:ND},safeLoad:kL("safeLoad","load"),safeLoadAll:kL("safeLoadAll","loadAll"),safeDump:kL("safeDump","dump")},CL={},SL={},TL={},EL={},IL=Array.prototype.slice;function AL(e){return EL.cl_reduce.call(e,(function(e,t,n){return e[n]={value:t,configurable:!0},e}),{})}CL.cl_each=function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t,this)},CL.cl_map=function(e){for(var t=0,n=this.length,r=Array(n);t<n;t++)r[t]=e(this[t],t,this);return r},CL.cl_reduce=function(e,t){for(var n=0,r=this.length;n<r;n++)t=e(t,this[n],n,this);return t},CL.cl_some=function(e){for(var t=0,n=this.length;t<n;t++)if(e(this[t],t,this))return!0},CL.cl_filter=function(e){for(var t=0,n=this.length,r=[];t<n;t++)e(this[t],t,this)&&r.push(this[t]);return r},SL.cl_each=function(e){IL.call(this).cl_each(e)},SL.cl_map=function(e){return IL.call(this).cl_map(e)},SL.cl_filter=function(e){return IL.call(this).cl_filter(e)},SL.cl_reduce=function(e,t){return IL.call(this).cl_reduce(e,t)},TL.cl_bind=function(e){var t=this,n=IL.call(arguments,1);return e=e||null,n.length?function(){return arguments.length?t.apply(e,n.concat(IL.call(arguments))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}},EL.cl_each=function(e){for(var t=0,n=Object.keys(this),r=n.length;t<r;t++)e(this[n[t]],n[t],this)},EL.cl_map=function(e){for(var t=0,n=Object.keys(this),r=n.length,i=Array(r);t<r;t++)i[t]=e(this[n[t]],n[t],this);return i},EL.cl_reduce=function(e,t){for(var n=0,r=Object.keys(this),i=r.length;n<i;n++)t=e(t,this[r[n]],r[n],this);return t},EL.cl_some=function(e){for(var t=0,n=Object.keys(this),r=n.length;t<r;t++)if(e(this[n[t]],n[t],this))return!0},EL.cl_extend=function(e){if(e)for(var t=0,n=Object.keys(e),r=n.length;t<r;t++)this[n[t]]=e[n[t]];return this},CL=AL(CL),SL=AL(SL),TL=AL(TL),EL=AL(EL),Object.defineProperties(Array.prototype,CL),Object.defineProperties(Int8Array.prototype,CL),Object.defineProperties(Uint8Array.prototype,CL),Object.defineProperties(Uint8ClampedArray.prototype,CL),Object.defineProperties(Int16Array.prototype,CL),Object.defineProperties(Uint16Array.prototype,CL),Object.defineProperties(Int32Array.prototype,CL),Object.defineProperties(Uint32Array.prototype,CL),Object.defineProperties(Float32Array.prototype,CL),Object.defineProperties(Float64Array.prototype,CL),Object.defineProperties(Function.prototype,TL),Object.defineProperties(Object.prototype,EL),"undefined"!=typeof window&&(Object.defineProperties(HTMLCollection.prototype,SL),Object.defineProperties(NodeList.prototype,SL));const DL={
// Markdown extensions
markdown:{abbr:!1,breaks:!1,deflist:!1,del:!1,fence:!1,footnote:!1,imgsize:!1,linkify:!1,mark:!1,sub:!1,sup:!1,table:!1,tasklist:!1,typographer:!1,toc:!1},
// Emoji extension
emoji:{enabled:!1,
// Enable shortcuts like :) :-(
shortcuts:!1},
/*
  ABC Notation extension
  Render abc-notation code blocks to music sheets
  See https://abcjs.net/
  */
abc:{enabled:!1},
/*
  Katex extension
  Render LaTeX mathematical expressions using:
    $...$ for inline formulas
    $$...$$ for displayed formulas.
  See https://math.meta.stackexchange.com/questions/5020
  */
katex:{enabled:!1},
/*
  Mermaid extension
  Convert code blocks starting with ```mermaid
  into diagrams and flowcharts.
  See https://mermaidjs.github.io/
  */
mermaid:{enabled:!1},
/*
  Toc extension
   [TOC] 
  */
toc:{enabled:!1}},BL={zero:[DL],commonmark:[DL,{markdown:{fence:!0}}],gfm:[DL,{markdown:{breaks:!0,del:!0,fence:!0,linkify:!0,table:!0,tasklist:!0,toc:!0},emoji:{enabled:!0}}],default:[DL,{markdown:{abbr:!0,breaks:!0,deflist:!0,del:!0,fence:!0,footnote:!0,imgsize:!0,linkify:!0,mark:!0,sub:!0,sup:!0,table:!0,tasklist:!0,toc:!0,typographer:!0},emoji:{enabled:!0},katex:{enabled:!0},mermaid:{enabled:!0},abc:{enabled:!0}}]},LL=`${window.location.protocol}//${window.location.host}`,ML={cleanTrashAfter:6048e5,
// 7 days
origin:LL,oauth2RedirectUri:`${LL}/oauth2/callback`,types:["contentState","syncedContent","content","file","folder","syncLocation","publishLocation","data"],localStorageDataIds:["workspaces","settings","layoutSettings","tokens","badgeCreations","serverConf"],textMaxLength:1e7,defaultName:"Untitled"},FL=window.crypto||window.msCrypto,OL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),PL=OL.length,NL=new Uint32Array(16),jL=e=>{const t={};return e.split("&").forEach((e=>{const[n,r]=e.split("=").map(decodeURIComponent);n&&null!=r&&(t[n]=r)})),t},zL=(e,t)=>{if(void 0===e)return t;const n=Object.prototype.toString.call(e);return n!==Object.prototype.toString.call(t)?e:"[object Object]"!==n?void 0===t?e:t:(Object.keys({...e,...t}).forEach((n=>{e[n]=zL(e[n],t[n])})),e)},RL=document.createElement("a"),qL=e=>null==e?e:JSON.parse(JSON.stringify(e)),$L={};Object.keys(BL).forEach((e=>{let t=qL(BL[e][0]);BL[e][1]&&(t=zL(t,BL[e][1])),$L[e]=t}));const UL={computedPresets:$L,queryParams:jL(window.location.hash.slice(1)),setQueryParams(e={}){this.queryParams=((e={})=>{const t={};return Object.entries(e).forEach((([e,n])=>{e&&null!=n&&(t[e]=n)})),t})(e);const t=`#${Object.entries(this.queryParams).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}`;window.location.hash!==t&&window.location.replace(t)},sanitizeText:e=>`${`${e||""}`.slice(0,ML.textMaxLength)}\n`.replace(/\n\n$/,"\n"),sanitizeName:e=>`${e||""}`.slice(0,250)||ML.defaultName,sanitizeFilename(e){return this.sanitizeName(`${e||""}`.replace(/[/\x00-\x1F\x7f-\xa0\s]+/g," ").trim())||ML.defaultName},deepCopy:qL,serializeObject:e=>void 0===e?e:JSON.stringify(e,((e,t)=>"[object Object]"!==Object.prototype.toString.call(t)?t:Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}))),search(e,t){let n;return e.some((e=>(Object.entries(t).every((([t,n])=>n===e[t]))&&(n=e),n))),n},uid:()=>(FL.getRandomValues(NL),NL.cl_map((e=>OL[e%PL])).join("")),hash(e){let t=0;if(!e)return t;for(let n=0;n<e.length;n+=1){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t},getItemHash(e){return this.hash(this.serializeObject({...e,
// These properties must not be part of the hash
id:void 0,hash:void 0,history:void 0}))},addItemHash(e){return{...e,hash:this.getItemHash(e)}},makeWorkspaceId(e){return Math.abs(this.hash(this.serializeObject(e))).toString(36)},getDbName(e){let t="stackedit-db";return"main"!==e&&(t+=`-${e}`),t},encodeBase64(e,t=!1){const n=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(`0x${t}`))),r=btoa(n);return t?r.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,""):r},encodeFiletoBase64:e=>new Promise(((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result.split(",").pop()),r.onerror=e=>n(e)})),base64ToBlob(e,t){const n=t.lastIndexOf("."),r=`image/${n>-1?t.substring(n+1):"png"}`,i=atob(e);let o=i.length;const a=new Uint8Array(o);for(;o>=0;)o-=1,a[o]=i.charCodeAt(o);return new Blob([a],{type:r})},decodeBase64(e){const t=e.replace(/_/g,"/").replace(/-/g,"+"),n=atob(t).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join("");return decodeURIComponent(n)},computeProperties(e){let t={};try{t=xL.load(e)||{}}catch(i7){}const n=t.extensions||{},r=qL($L[n.preset]||$L.default),i=zL(r,t.extensions);return i.preset=n.preset,t.extensions=i,t},randomize:e=>Math.floor((1+.2*Math.random())*e),setInterval(e,t){return setInterval((()=>e()),this.randomize(t))},async awaitSequence(e,t){const n=[],r=e.slice().reverse(),i=async()=>r.length?(n.push(await t(r.pop())),i()):n;return i()},async awaitSome(e){return await e()?this.awaitSome(e):null},someResult(e,t){let n;return e.some((e=>(n=t(e),n))),n},parseQueryParams:jL,addQueryParams(e="",t={},n=!1){const r=Object.keys(t).filter((e=>null!=t[e]));if(RL.href=e,!r.length)return RL.href;const i=r.map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&");return n?(RL.hash?RL.hash+="&":RL.hash="#",RL.hash+=i):(RL.search?RL.search+="&":RL.search="?",RL.search+=i),RL.href},resolveUrl(e,t){const n=document.getElementsByTagName("base")[0],r=n&&n.href,i=n||document.head.appendChild(document.createElement("base"));i.href=e,RL.href=t;const o=RL.href;return n?n.href=r:document.head.removeChild(i),o},getHostname:e=>(RL.href=e,RL.hostname),encodeUrlPath:e=>e?e.split("/").map(encodeURIComponent).join("/"):"",decodeUrlPath:e=>e?e.split("/").map(decodeURIComponent).join("/"):"",parseGithubRepoUrl(e){const t=e&&e.match(/([^/:]+)\/([^/]+?)(?:\.git|\/)?$/);return t&&{owner:t[1],repo:t[2]}},parseGitlabProjectPath(e){const t=e&&e.match(/^http[s]?:\/\/[^/]+\/(.+?)(?:\.git|\/)?$/);return t&&t[1]},parseGiteaProjectPath(e){const t=e&&e.match(/^http[s]?:\/\/[^/]+\/(.+?)(?:\.git|\/)?$/);return t&&t[1]},createHiddenIframe(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.left="-99px",t.style.width="1px",t.style.height="1px",t.src=e,t},wrapRange(e,t){const n=`${e}`.length;let r=0;const i=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT);let{startOffset:o}=e;if(i.currentNode=e.startContainer,i.currentNode.nodeType===Node.TEXT_NODE||i.nextNode())do{if("\n"!==i.currentNode.nodeValue){i.currentNode===e.endContainer&&e.endOffset<i.currentNode.nodeValue.length&&i.currentNode.splitText(e.endOffset),o&&(i.currentNode=i.currentNode.splitText(o),o=0);const n=document.createElement("span");Object.entries(t).forEach((([e,t])=>{n[e]=t})),i.currentNode.parentNode.insertBefore(n,i.currentNode),n.appendChild(i.currentNode)}if(r+=i.currentNode.nodeValue.length,r>=n)break}while(i.nextNode())},unwrapRange(e){Array.prototype.slice.call(e).forEach((e=>{for(let t=e.firstChild;t;t=e.firstChild)3===t.nodeType&&(e.previousSibling&&3===e.previousSibling.nodeType&&(t.nodeValue=e.previousSibling.nodeValue+t.nodeValue,e.parentNode.removeChild(e.previousSibling)),!t.nextSibling&&e.nextSibling&&3===e.nextSibling.nodeType&&(t.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling))),e.parentNode.insertBefore(t,e);e.parentNode.removeChild(e)}))},getAbsoluteDir(e){if(!e)return"";let t=e.item.name;if(e.parentNode){const n=this.getAbsoluteDir(e.parentNode);n&&(t=`${n}/${t}`)}return t||""},
//   
getAbsoluteFilePath(e,t){const n=t&&t.replaceAll("\\","/"),r=this.getAbsoluteDir(e);if(0===n.indexOf("/"))return n.replaceAll(" ","%20");let i=n;return 0===i.indexOf("../")?this.getAbsoluteFilePath(e&&e.parentNode,i.replace("../","")):(i=0===i.indexOf("./")?`${r}/${i.replace("./","")}`:`${r}/${i}`,(0===i.indexOf("/")?i:`/${i}`).replaceAll(" ","%20"))},findNodeByPath(e,t,n){const r=this.getAbsoluteFilePath(t,n).replaceAll("%20"," ").split("/");let i=e;for(let o=0;o<r.length;o+=1)if(o>0){if(o===r.length-1)return i.files.find((e=>`${e.item.name}.md`===r[o]));if(i=i.folders.find((e=>e.item.name===r[o])),!i)return null}return null}},HL={logLevel:5,startOnLoad:!1,arrowMarkerAbsolute:!1,theme:"neutral",flowchart:{htmlLabels:!0,curve:"linear"},sequence:{diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!0,bottomMarginAdj:1,useMaxWidth:!0},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,leftPadding:75,gridLineStartPadding:35,fontSize:11,fontFamily:'"Open-Sans", "sans-serif"',numberSectionStyles:4,axisFormat:"%Y-%m-%d"}};let WL=()=>{kD.initialize(HL),WL=()=>{}};Lo.onGetOptions(((e,t)=>{e.mermaid=t.extensions.mermaid.enabled})),Lo.onSectionPreview((e=>{const t=Array.from(e.querySelectorAll(".prism.language-mermaid"));return Promise.all(t.map((e=>(async e=>{try{WL();const t=`mermaid-svg-${UL.uid()}`,{svg:n}=await kD.render(t,e.textContent);e.innerHTML=n}catch(i7){e.innerHTML='<div class="error">Diagram rendering failed</div>'}})(e.parentNode))))}));var GL,VL={exports:{}};var YL=(GL||(GL=1,function(e){!function(t,n){if(t){for(var r,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;l<20;++l)i[111+l]="f"+l;for(l=0;l<=9;++l)i[l+96]=l.toString();m.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},m.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},m.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},m.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},m.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(f(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},m.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},m.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);r=null},m.init=function(){var e=m(n);for(var t in e)"_"!==t.charAt(0)&&(m[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},m.init(),t.Mousetrap=m,e.exports&&(e.exports=m)}function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:o[e.which]?o[e.which]:String.fromCharCode(e.which).toLowerCase()}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(e,t,n){return n||(n=function(){if(!r)for(var e in r={},i)e>95&&e<112||i.hasOwnProperty(e)&&(r[i[e]]=e);return r}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function p(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],s[r]&&(r=s[r]),t&&"keypress"!=t&&a[r]&&(r=a[r],o.push("shift")),h(r)&&o.push(r);return{key:r,modifiers:o,action:t=d(r,o,t)}}function f(e,t){return null!==e&&e!==n&&(e===t||f(e.parentNode,t))}function m(e){var t=this;if(e=e||n,!(t instanceof m))return new m(e);t.target=e,t._callbacks={},t._directMap={};var r,i={},o=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in i)e[t]?n=!0:i[t]=0;n||(s=!1)}function d(e,n,r,o,a,s){var l,c,u,d,p=[],f=r.type;if(!t._callbacks[e])return[];for("keyup"==f&&h(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(o||!c.seq||i[c.seq]==c.level)&&f==c.action&&("keypress"==f&&!r.metaKey&&!r.ctrlKey||(u=n,d=c.modifiers,u.sort().join(",")===d.sort().join(",")))){var m=!o&&c.combo==a,g=o&&c.seq==o&&c.level==s;(m||g)&&t._callbacks[e].splice(l,1),p.push(c)}return p}function f(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function g(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=u(e);n&&("keyup"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function v(e,t,n,a){function c(t){return function(){s=t,++i[e],clearTimeout(r),r=setTimeout(l,1e3)}}function h(t){f(n,t,e),"keyup"!==a&&(o=u(t)),setTimeout(l,10)}i[e]=0;for(var d=0;d<t.length;++d){var m=d+1===t.length?h:c(a||p(t[d+1]).action);y(t[d],m,a,e,d)}}function y(e,n,r,i,o){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?v(e,s,n,r):(a=p(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],d(a.key,a.modifiers,{type:a.action},i,e,o),t._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,i=d(e,t,n),o={},c=0,u=!1;for(r=0;r<i.length;++r)i[r].seq&&(c=Math.max(c,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=c)continue;u=!0,o[i[r].seq]=1,f(i[r].callback,n,i[r].combo,i[r].seq)}else u||f(i[r].callback,n,i[r].combo);var p="keypress"==n.type&&a;n.type!=s||h(e)||p||l(o),a=u&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)y(e[r],t,n)},c(e,"keypress",g),c(e,"keydown",g),c(e,"keyup",g)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}(VL)),VL.exports);const KL=bo(YL);function XL(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}}const ZL="function"==typeof Proxy;let JL,QL;function eM(){return void 0!==JL||("undefined"!=typeof window&&window.performance?(JL=!0,QL=window.performance):"undefined"!=typeof globalThis&&(null===(e=globalThis.perf_hooks)||void 0===e?void 0:e.performance)?(JL=!0,QL=globalThis.perf_hooks.performance):JL=!1),JL?QL.now():Date.now();var e}class tM{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const o in e.settings){const t=e.settings[o];n[o]=t.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch(i7){}this.fallbacks={getSettings:()=>i,setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(i7){}i=e},now:()=>eM()},t&&t.on("plugin:settings:set",((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function nM(e,t){const n=e,r=XL(),i=XL().__VUE_DEVTOOLS_GLOBAL_HOOK__,o=ZL&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&o){const e=o?new tM(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else i.emit("devtools-plugin:setup",e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */function rM(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function iM(e){return null!==e&&"object"==typeof e}function oM(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function aM(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;lM(e,n,[],e._modules.root,!0),sM(e,n,t)}function sM(e,t,n){var r=e._state,i=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,a={},s={},l=new ne(!0);l.run((function(){rM(o,(function(t,n){a[n]=function(e,t){return function(){return e(t)}}(t,e),s[n]=ki((function(){return a[n]()})),Object.defineProperty(e.getters,n,{get:function(){return s[n].value},enumerable:!0})}))})),e._state=ct({data:t}),e._scope=l,e.strict&&function(e){xr((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}(e),r&&n&&e._withCommit((function(){r.data=null})),i&&i.stop()}function lM(e,t,n,r,i){var o=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!o&&!i){var s=uM(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){s[l]=r.state}))}var c=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=hM(n,r,i),a=o.payload,s=o.options,l=o.type;return s&&s.root||(l=t+l),e.dispatch(l,a)},commit:r?e.commit:function(n,r,i){var o=hM(n,r,i),a=o.payload,s=o.options,l=o.type;s&&s.root||(l=t+l),e.commit(l,a,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return cM(e,t)}},state:{get:function(){return uM(e.state,n)}}}),i}(e,a,n);r.forEachMutation((function(t,n){!function(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))}(e,a+n,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,i=t.handler||t;!function(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i,o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}(e,r,i,c)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(r.state,
// local state
r.getters,
// local getters
e.state,
// root state
e.getters)}}(e,a+n,t,c)})),r.forEachChild((function(r,o){lM(e,t,n.concat(o),r,i)}))}function cM(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function uM(e,t){return t.reduce((function(e,t){return e[t]}),e)}function hM(e,t,n){return iM(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var dM="vuex:mutations",pM="vuex:actions",fM="vuex",mM=0;function gM(e,t){nM({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:dM,label:"Vuex Mutations",color:vM}),n.addTimelineLayer({id:pM,label:"Vuex Actions",color:vM}),n.addInspector({id:fM,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===fM)if(n.filter){var r=[];wM(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[_M(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===fM){var r=n.nodeId;cM(t,r),n.state=function(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var o=function(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var i=t,o=r.pop();r.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[o]=kM((function(){return e[n]}))}else t[n]=kM((function(){return e[n]}))})),t}(t);i.getters=Object.keys(o).map((function(e){return{key:e.endsWith("/")?bM(e):e,editable:!1,value:kM((function(){return o[e]}))}}))}return i}((i=t._modules,(a=(o=r).split("/").filter((function(e){return e}))).reduce((function(e,t,n){var r=e[t];if(!r)throw new Error('Missing module "'+t+'" for path "'+o+'".');return n===a.length-1?r:r._children}),"root"===o?i:i.root._children)),"root"===r?t.getters:t._makeLocalGettersCache,r)}var i,o,a})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===fM){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(fM),n.sendInspectorState(fM),n.addTimelineEvent({layerId:dM,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=mM++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:pM,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},i=Date.now()-e._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:pM,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var vM=8702998,yM={label:"namespaced",textColor:16777215,backgroundColor:6710886};function bM(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function _M(e,t){return{id:t||"root",
// all modules end with a `/`, we want the last segment only
// cart/ -> cart
// nested/cart/ -> cart
label:bM(t),tags:e.namespaced?[yM]:[],children:Object.keys(e._children).map((function(n){return _M(e._children[n],t+n+"/")}))}}function wM(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[yM]:[]}),Object.keys(t._children).forEach((function(i){wM(e,t._children[i],n,r+i+"/")}))}function kM(e){try{return e()}catch(i7){return i7}}var xM=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},CM={namespaced:{configurable:!0}};CM.namespaced.get=function(){return!!this._rawModule.namespaced},xM.prototype.addChild=function(e,t){this._children[e]=t},xM.prototype.removeChild=function(e){delete this._children[e]},xM.prototype.getChild=function(e){return this._children[e]},xM.prototype.hasChild=function(e){return e in this._children},xM.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},xM.prototype.forEachChild=function(e){rM(this._children,e)},xM.prototype.forEachGetter=function(e){this._rawModule.getters&&rM(this._rawModule.getters,e)},xM.prototype.forEachAction=function(e){this._rawModule.actions&&rM(this._rawModule.actions,e)},xM.prototype.forEachMutation=function(e){this._rawModule.mutations&&rM(this._rawModule.mutations,e)},Object.defineProperties(xM.prototype,CM);var SM=function(e){this.register([],e,!1)};function TM(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;TM(e.concat(r),t.getChild(r),n.modules[r])}}SM.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},SM.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},SM.prototype.update=function(e){TM([],this.root,e)},SM.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new xM(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&rM(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},SM.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},SM.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var EM=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new SM(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this.dispatch,s=this.commit;this.dispatch=function(e,t){return a.call(o,e,t)},this.commit=function(e,t,n){return s.call(o,e,t,n)},this.strict=r;var l=this._modules.root.state;lM(this,l,[],this._modules.root),sM(this,l),n.forEach((function(e){return e(t)}))},IM={state:{configurable:!0}};EM.prototype.install=function(e,t){e.provide(t||"store",this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&gM(e,this)},IM.state.get=function(){return this._state.data},IM.state.set=function(e){},EM.prototype.commit=function(e,t,n){var r=this,i=hM(e,t,n),o=i.type,a=i.payload,s={type:o,payload:a},l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},EM.prototype.dispatch=function(e,t){var n=this,r=hM(e,t),i=r.type,o=r.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(i7){}var l=s.length>1?Promise.all(s.map((function(e){return e(o)}))):s[0](o);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(i7){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(i7){}t(e)}))}))}},EM.prototype.subscribe=function(e,t){return oM(e,this._subscribers,t)},EM.prototype.subscribeAction=function(e,t){return oM("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},EM.prototype.watch=function(e,t,n){var r=this;return xr((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},EM.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},EM.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),lM(this,this.state,e,this._modules.get(e),n.preserveState),sM(this,this.state)},EM.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete uM(t.state,e.slice(0,-1))[e[e.length-1]]})),aM(this)},EM.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},EM.prototype.hotUpdate=function(e){this._modules.update(e),aM(this,!0)},EM.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(EM.prototype,IM);var AM=FM((function(e,t){var n={};return MM(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=OM(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),DM=FM((function(e,t){var n={};return MM(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=OM(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),BM=FM((function(e,t){var n={};return MM(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||OM(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),LM=FM((function(e,t){var n={};return MM(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=OM(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function MM(e){return function(e){return Array.isArray(e)||iM(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function FM(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function OM(e,t,n){return e._modulesNamespaceMap[n]}var PM,NM={exports:{}};var jM=(PM||(PM=1,function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,r,i){void 0===i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];void 0===r&&(r=!0);var a=r,s=this.diff_commonPrefix(e,n),l=e.substring(0,s);e=e.substring(s),n=n.substring(s),s=this.diff_commonSuffix(e,n);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),n=n.substring(0,n.length-s);var u=this.diff_compute_(e,n,a,o);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,r,i,o){var a;if(!e)return[new t.Diff(1,r)];if(!r)return[new t.Diff(n,e)];var s=e.length>r.length?e:r,l=e.length>r.length?r:e,c=s.indexOf(l);if(-1!=c)return a=[new t.Diff(1,s.substring(0,c)),new t.Diff(0,l),new t.Diff(1,s.substring(c+l.length))],e.length>r.length&&(a[0][0]=a[2][0]=n),a;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,r)];var u=this.diff_halfMatch_(e,r);if(u){var h=u[0],d=u[1],p=u[2],f=u[3],m=u[4],g=this.diff_main(h,p,i,o),v=this.diff_main(d,f,i,o);return g.concat([new t.Diff(0,m)],v)}return i&&e.length>100&&r.length>100?this.diff_lineMode_(e,r,o):this.diff_bisect_(e,r,o)},t.prototype.diff_lineMode_=function(e,r,i){var o=this.diff_linesToChars_(e,r);e=o.chars1,r=o.chars2;var a=o.lineArray,s=this.diff_main(e,r,!1,i);this.diff_charsToLines_(s,a),this.diff_cleanupSemantic(s),s.push(new t.Diff(0,""));for(var l=0,c=0,u=0,h="",d="";l<s.length;){switch(s[l][0]){case 1:u++,d+=s[l][1];break;case n:c++,h+=s[l][1];break;case 0:if(c>=1&&u>=1){s.splice(l-c-u,c+u),l=l-c-u;for(var p=this.diff_main(h,d,!1,i),f=p.length-1;f>=0;f--)s.splice(l,0,p[f]);l+=p.length}u=0,c=0,h="",d=""}l++}return s.pop(),s},t.prototype.diff_bisect_=function(e,r,i){for(var o=e.length,a=r.length,s=Math.ceil((o+a)/2),l=s,c=2*s,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var p=o-a,f=p%2!=0,m=0,g=0,v=0,y=0,b=0;b<s&&!((new Date).getTime()>i);b++){for(var _=-b+m;_<=b-g;_+=2){for(var w=l+_,k=(E=_==-b||_!=b&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1)-_;E<o&&k<a&&e.charAt(E)==r.charAt(k);)E++,k++;if(u[w]=E,E>o)g+=2;else if(k>a)m+=2;else if(f&&(S=l+p-_)>=0&&S<c&&-1!=h[S]&&E>=(C=o-h[S]))return this.diff_bisectSplit_(e,r,E,k,i)}for(var x=-b+v;x<=b-y;x+=2){for(var C,S=l+x,T=(C=x==-b||x!=b&&h[S-1]<h[S+1]?h[S+1]:h[S-1]+1)-x;C<o&&T<a&&e.charAt(o-C-1)==r.charAt(a-T-1);)C++,T++;if(h[S]=C,C>o)y+=2;else if(T>a)v+=2;else if(!f){var E;if((w=l+p-x)>=0&&w<c&&-1!=u[w])if(k=l+(E=u[w])-w,E>=(C=o-C))return this.diff_bisectSplit_(e,r,E,k,i)}}}return[new t.Diff(n,e),new t.Diff(1,r)]},t.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),a=t.substring(0,r),s=e.substring(n),l=t.substring(r),c=this.diff_main(o,a,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function i(e){for(var t="",i=0,a=-1,s=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",i))&&(a=e.length-1);var l=e.substring(i,a+1);(r.hasOwnProperty?r.hasOwnProperty(l):void 0!==r[l])?t+=String.fromCharCode(r[l]):(s==o&&(l=e.substring(i),a=e.length),t+=String.fromCharCode(s),r[l]=s,n[s++]=l),i=a+1}return t}n[0]="";var o=4e4,a=i(e);return o=65535,{chars1:a,chars2:i(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,a=1;;){var s=e.substring(i-a),l=t.indexOf(s);if(-1==l)return o;a+=l,0!=l&&e.substring(i-a)!=t.substring(0,a)||(o=a,a++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(e,t,n){for(var r,o,a,s,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var h=i.diff_commonPrefix(e.substring(n),t.substring(c)),d=i.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<d+h&&(u=t.substring(c-d,c)+t.substring(c,c+h),r=e.substring(0,n-d),o=e.substring(n+h),a=t.substring(0,c-d),s=t.substring(c+h))}return 2*u.length>=e.length?[r,o,a,s,u]:null}var a,s,l,c,u,h=o(n,r,Math.ceil(n.length/4)),d=o(n,r,Math.ceil(n.length/2));return h||d?(a=d?h&&h[4].length>d[4].length?h:d:h,e.length>t.length?(s=a[0],l=a[1],c=a[2],u=a[3]):(c=a[0],u=a[1],s=a[2],l=a[3]),[s,l,c,u,a[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var r=!1,i=[],o=0,a=null,s=0,l=0,c=0,u=0,h=0;s<e.length;)0==e[s][0]?(i[o++]=s,l=u,c=h,u=0,h=0,a=e[s][1]):(1==e[s][0]?u+=e[s][1].length:h+=e[s][1].length,a&&a.length<=Math.max(l,c)&&a.length<=Math.max(u,h)&&(e.splice(i[o-1],0,new t.Diff(n,a)),e[i[o-1]+1][0]=1,o--,s=--o>0?i[o-1]:-1,l=0,c=0,u=0,h=0,a=null,r=!0)),s++;for(r&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]==n&&1==e[s][0]){var d=e[s-1][1],p=e[s][1],f=this.diff_commonOverlap_(d,p),m=this.diff_commonOverlap_(p,d);f>=m?(f>=d.length/2||f>=p.length/2)&&(e.splice(s,0,new t.Diff(0,p.substring(0,f))),e[s-1][1]=d.substring(0,d.length-f),e[s+1][1]=p.substring(f),s++):(m>=d.length/2||m>=p.length/2)&&(e.splice(s,0,new t.Diff(0,d.substring(0,m))),e[s-1][0]=1,e[s-1][1]=p.substring(0,p.length-m),e[s+1][0]=n,e[s+1][1]=d.substring(m),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),o=r.match(t.nonAlphaNumericRegex_),a=i.match(t.nonAlphaNumericRegex_),s=o&&r.match(t.whitespaceRegex_),l=a&&i.match(t.whitespaceRegex_),c=s&&r.match(t.linebreakRegex_),u=l&&i.match(t.linebreakRegex_),h=c&&e.match(t.blanklineEndRegex_),d=u&&n.match(t.blanklineStartRegex_);return h||d?5:c||u?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],o=e[r][1],a=e[r+1][1],s=this.diff_commonSuffix(i,o);if(s){var l=o.substring(o.length-s);i=i.substring(0,i.length-s),o=l+o.substring(0,o.length-s),a=l+a}for(var c=i,u=o,h=a,d=n(i,o)+n(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var p=n(i,o)+n(o,a);p>=d&&(d=p,c=i,u=o,h=a)}e[r-1][1]!=c&&(c?e[r-1][1]=c:(e.splice(r-1,1),r--),e[r][1]=u,h?e[r+1][1]=h:(e.splice(r+1,1),r--))}r++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var r=!1,i=[],o=0,a=null,s=0,l=!1,c=!1,u=!1,h=!1;s<e.length;)0==e[s][0]?(e[s][1].length<this.Diff_EditCost&&(u||h)?(i[o++]=s,l=u,c=h,a=e[s][1]):(o=0,a=null),u=h=!1):(e[s][0]==n?h=!0:u=!0,a&&(l&&c&&u&&h||a.length<this.Diff_EditCost/2&&l+c+u+h==3)&&(e.splice(i[o-1],0,new t.Diff(n,a)),e[i[o-1]+1][0]=1,o--,a=null,l&&c?(u=h=!0,o=0):(s=--o>0?i[o-1]:-1,u=h=!1),r=!0)),s++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var r,i=0,o=0,a=0,s="",l="";i<e.length;)switch(e[i][0]){case 1:a++,l+=e[i][1],i++;break;case n:o++,s+=e[i][1],i++;break;case 0:o+a>1?(0!==o&&0!==a&&(0!==(r=this.diff_commonPrefix(l,s))&&(i-o-a>0&&0==e[i-o-a-1][0]?e[i-o-a-1][1]+=l.substring(0,r):(e.splice(0,0,new t.Diff(0,l.substring(0,r))),i++),l=l.substring(r),s=s.substring(r)),0!==(r=this.diff_commonSuffix(l,s))&&(e[i][1]=l.substring(l.length-r)+e[i][1],l=l.substring(0,l.length-r),s=s.substring(0,s.length-r))),i-=o+a,e.splice(i,o+a),s.length&&(e.splice(i,0,new t.Diff(n,s)),i++),l.length&&(e.splice(i,0,new t.Diff(1,l)),i++),i++):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,a=0,o=0,s="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),c=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),c=!0)),i++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var r,i=0,o=0,a=0,s=0;for(r=0;r<e.length&&(1!==e[r][0]&&(i+=e[r][1].length),e[r][0]!==n&&(o+=e[r][1].length),!(i>t));r++)a=i,s=o;return e.length!=r&&e[r][0]===n?s:s+(t-a)},t.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,i=/</g,o=/>/g,a=/\n/g,s=0;s<e.length;s++){var l=e[s][0],c=e[s][1].replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case 1:t[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[s]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],r=0;r<e.length;r++)e[r][0]!==n&&(t[r]=e[r][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o][0],s=e[o][1];switch(a){case 1:r+=s.length;break;case n:i+=s.length;break;case 0:t+=Math.max(r,i),r=0,i=0}}return t+=Math.max(r,i)},t.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case 1:t[r]="+"+encodeURI(e[r][1]);break;case n:t[r]="-"+e[r][1].length;break;case 0:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,r){for(var i=[],o=0,a=0,s=r.split(/\t/g),l=0;l<s.length;l++){var c=s[l].substring(1);switch(s[l].charAt(0)){case"+":try{i[o++]=new t.Diff(1,decodeURI(c))}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":
// Fall through.
case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var h=e.substring(a,a+=u);"="==s[l].charAt(0)?i[o++]=new t.Diff(0,h):i[o++]=new t.Diff(n,h);break;default:if(s[l])throw new Error("Invalid diff operation in diff_fromDelta: "+s[l])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return i},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this;function o(e,r){var o=e/t.length,a=Math.abs(n-r);return i.Match_Distance?o+a/i.Match_Distance:a?1:o}var a=this.Match_Threshold,s=e.indexOf(t,n);-1!=s&&(a=Math.min(o(0,s),a),-1!=(s=e.lastIndexOf(t,n+t.length))&&(a=Math.min(o(0,s),a)));var l,c,u=1<<t.length-1;s=-1;for(var h,d=t.length+e.length,p=0;p<t.length;p++){for(l=0,c=d;l<c;)o(p,n+c)<=a?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var f=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=f;v--){var y=r[e.charAt(v-1)];if(g[v]=0===p?(g[v+1]<<1|1)&y:(g[v+1]<<1|1)&y|(h[v+1]|h[v])<<1|1|h[v+1],g[v]&u){var b=o(p,v-1);if(b<=a){if(a=b,!((s=v-1)>n))break;f=Math.max(1,2*n-s)}}}if(o(p+1,n)>a)break;h=g}return s},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!=n.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.Patch_Margin;var o=n.substring(e.start2-i,e.start2);o&&e.diffs.unshift(new t.Diff(0,o));var a=n.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push(new t.Diff(0,a)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},t.prototype.patch_make=function(e,r,i){var o,a;if("string"==typeof e&&"string"==typeof r&&void 0===i)o=/** @type {string} */
e,(a=this.diff_main(o,
/** @type {string} */
r,!0)).length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==typeof e&&void 0===r&&void 0===i)a=/** @type {!Array.<!diff_match_patch.Diff>} */
e,o=this.diff_text1(a);else if("string"==typeof e&&r&&"object"==typeof r&&void 0===i)o=/** @type {string} */
e,a=/** @type {!Array.<!diff_match_patch.Diff>} */
r;else{if("string"!=typeof e||"string"!=typeof r||!i||"object"!=typeof i)throw new Error("Unknown call format to patch_make.");o=/** @type {string} */
e,a=/** @type {!Array.<!diff_match_patch.Diff>} */
i}if(0===a.length)return[];for(var s=[],l=new t.patch_obj,c=0,u=0,h=0,d=o,p=o,f=0;f<a.length;f++){var m=a[f][0],g=a[f][1];switch(c||0===m||(l.start1=u,l.start2=h),m){case 1:l.diffs[c++]=a[f],l.length2+=g.length,p=p.substring(0,h)+g+p.substring(h);break;case n:l.length1+=g.length,l.diffs[c++]=a[f],p=p.substring(0,h)+p.substring(h+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&a.length!=f+1?(l.diffs[c++]=a[f],l.length1+=g.length,l.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),s.push(l),l=new t.patch_obj,c=0,d=p,u=h)}1!==m&&(u+=g.length),m!==n&&(h+=g.length)}return c&&(this.patch_addContext_(l,d),s.push(l)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=new t.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=new t.Diff(i.diffs[a][0],i.diffs[a][1]);o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var i=0,o=[],a=0;a<e.length;a++){var s,l,c=e[a].start2+i,u=this.diff_text1(e[a].diffs),h=-1;if(u.length>this.Match_MaxBits?-1!=(s=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(h=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||s>=h)&&(s=-1):s=this.match_main(t,u,c),-1==s)o[a]=!1,i-=e[a].length2-e[a].length1;else if(o[a]=!0,i=s-c,u==(l=-1==h?t.substring(s,s+u.length):t.substring(s,h+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[a].diffs)+t.substring(s+u.length);else{var d=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(d)/u.length>this.Patch_DeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(d);for(var p,f=0,m=0;m<e[a].diffs.length;m++){var g=e[a].diffs[m];0!==g[0]&&(p=this.diff_xIndex(d,f)),1===g[0]?t=t.substring(0,s+p)+g[1]+t.substring(s+p):g[0]===n&&(t=t.substring(0,s+p)+t.substring(s+this.diff_xIndex(d,f+g[1].length))),g[0]!==n&&(f+=g[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),o]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var o=e[0],a=o.diffs;if(0==a.length||0!=a[0][0])a.unshift(new t.Diff(0,r)),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>a[0][1].length){var s=n-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}return 0==(a=(o=e[e.length-1]).diffs).length||0!=a[a.length-1][0]?(a.push(new t.Diff(0,r)),o.length1+=n,o.length2+=n):n>a[a.length-1][1].length&&(s=n-a[a.length-1][1].length,a[a.length-1][1]+=r.substring(0,s),o.length1+=s,o.length2+=s),r},t.prototype.patch_splitMax=function(e){for(var r=this.Match_MaxBits,i=0;i<e.length;i++)if(!(e[i].length1<=r)){var o=e[i];e.splice(i--,1);for(var a=o.start1,s=o.start2,l="";0!==o.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=a-l.length,c.start2=s-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==o.diffs.length&&c.length1<r-this.Patch_Margin;){var h=o.diffs[0][0],d=o.diffs[0][1];1===h?(c.length2+=d.length,s+=d.length,c.diffs.push(o.diffs.shift()),u=!1):h===n&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*r?(c.length1+=d.length,a+=d.length,u=!1,c.diffs.push(new t.Diff(h,d)),o.diffs.shift()):(d=d.substring(0,r-c.length1-this.Patch_Margin),c.length1+=d.length,a+=d.length,0===h?(c.length2+=d.length,s+=d.length):u=!1,c.diffs.push(new t.Diff(h,d)),d==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(d.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var p=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push(new t.Diff(0,p))),u||e.splice(++i,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var r=[];if(!e)return r;for(var i=e.split("\n"),o=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<i.length;){var s=i[o].match(a);if(!s)throw new Error("Invalid patch string: "+i[o]);var l=new t.patch_obj;for(r.push(l),l.start1=parseInt(s[1],10),""===s[2]?(l.start1--,l.length1=1):"0"==s[2]?l.length1=0:(l.start1--,l.length1=parseInt(s[2],10)),l.start2=parseInt(s[3],10),""===s[4]?(l.start2--,l.length2=1):"0"==s[4]?l.length2=0:(l.start2--,l.length2=parseInt(s[4],10)),o++;o<i.length;){var c=i[o].charAt(0);try{var u=decodeURI(i[o].substring(1))}catch(h){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new t.Diff(n,u));else if("+"==c)l.diffs.push(new t.Diff(1,u));else if(" "==c)l.diffs.push(new t.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}o++}}return r},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}(NM)),NM.exports);const zM=bo(jM),RM=(e,t=!1)=>{const n=t?Date.now:e=>UL.getItemHash(e);return{namespaced:!0,state:ct({itemsById:{}}),getters:{items:({itemsById:e})=>Object.values(e)},mutations:{setItem(r,i){const o=Object.assign(e(i.id),i);o.hash&&t||(o.hash=n(o)),r.itemsById[o.id]=o},patchItem(e,t){const r=e.itemsById[t.id];return!!r&&(Object.assign(r,t),r.hash=n(r),e.itemsById[r.id]=r,!0)},deleteItem(e,t){delete e.itemsById[t]}},actions:{}}},qM=(e=null)=>({id:e,type:"content",text:"\n",properties:"\n",discussions:{},comments:{},hash:0});var $M,UM={exports:{}};var HM=($M||($M=1,UM.exports=function(){function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function t(e,t){return Array(t+1).join(e)}function n(e){return e.replace(/^\n*/,"")}function r(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}var i=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function o(e){return d(e,i)}var a=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function s(e){return d(e,a)}function l(e){return p(e,a)}var c=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function u(e){return d(e,c)}function h(e){return p(e,c)}function d(e,t){return t.indexOf(e.nodeName)>=0}function p(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var f={};function m(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function g(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function v(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(y(i,t,n))return i}}function y(e,t,n){var r=e.filter;if("string"==typeof r){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(e,t,n))return!0}}function b(e){var t=e.element,n=e.isBlock,r=e.isVoid,i=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!i(t)){for(var o=null,a=!1,s=null,l=w(s,t,i);l!==t;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(o&&!/ $/.test(o.data)||a||" "!==c[0]||(c=c.substr(1)),!c){l=_(l);continue}l.data=c,o=l}else{if(1!==l.nodeType){l=_(l);continue}n(l)||"BR"===l.nodeName?(o&&(o.data=o.data.replace(/ $/,"")),o=null,a=!1):r(l)||i(l)?(o=null,a=!0):o&&(a=!1)}var u=w(s,l,i);s=l,l=u}o&&(o.data=o.data.replace(/ $/,""),o.data||_(o))}}function _(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function w(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}f.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},f.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+"\n"}},f.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,n,r){var i=Number(n.nodeName.charAt(1));return"setext"===r.headingStyle&&i<3?"\n\n"+e+"\n"+t(1===i?"=":"-",e.length)+"\n\n":"\n\n"+t("#",i)+" "+e+"\n\n"}},f.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},f.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return"LI"===n.nodeName&&n.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},f.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var r=n.bulletListMarker+"   ",i=t.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),a=Array.prototype.indexOf.call(i.children,t);r=(o?Number(o)+a:a+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},f.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},f.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,n,r){for(var i,o=((n.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=n.firstChild.textContent,s=r.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");i=c.exec(a);)i[0].length>=l&&(l=i[0].length+1);var u=t(s,l);return"\n\n"+u+o+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}},f.horizontalRule={filter:"hr",replacement:function(e,t,n){return"\n\n"+n.hr+"\n\n"}},f.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),r=m(t.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+e+"]("+n+r+")"}},f.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,n){var r,i,o=t.getAttribute("href"),a=m(t.getAttribute("title"));switch(a&&(a=' "'+a+'"'),n.linkReferenceStyle){case"collapsed":r="["+e+"][]",i="["+e+"]: "+o+a;break;case"shortcut":r="["+e+"]",i="["+e+"]: "+o+a;break;default:var s=this.references.length+1;r="["+e+"]["+s+"]",i="["+s+"]: "+o+a}return this.references.push(i),r},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},f.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},f.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},f.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];-1!==r.indexOf(n);)n+="`";return n+t+e+t+n}},f.image={filter:"img",replacement:function(e,t){var n=m(t.getAttribute("alt")),r=t.getAttribute("src")||"",i=m(t.getAttribute("title"));return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},g.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=v(this.array,e,this.options))||(t=v(this._keep,e,this.options))||(t=v(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var k="undefined"!=typeof window?window:{};function x(){var e=k.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(i7){}return t}function C(){var e=function(){};return S()?e.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:e.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},e}function S(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(i7){window.ActiveXObject&&(e=!0)}return e}var T,E=x()?k.DOMParser:C();function I(e,t){var n;return b({element:n="string"==typeof e?A().parseFromString(
// DOM parsers arrange elements in the <head> and <body>.
// Wrapping in a custom element ensures elements are reliably arranged in
// a single element.
'<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:o,isVoid:s,isPre:t.preformattedCode?D:null}),n}function A(){return T=T||new E}function D(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function B(e,t){return e.isBlock=o(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=L(e),e.flankingWhitespace=M(e,t),e}function L(e){return!s(e)&&!u(e)&&/^\s*$/i.test(e.textContent)&&!l(e)&&!h(e)}function M(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=F(e.textContent);return n.leadingAscii&&O("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&O("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function F(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],
// whole string for whitespace-only strings
leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],
// empty for whitespace-only strings
trailingNonAscii:t[5],trailingAscii:t[6]}}function O(e,t,n){var r,i,a;return"left"===e?(r=t.previousSibling,i=/ $/):(r=t.nextSibling,i=/^ /),r&&(3===r.nodeType?a=i.test(r.nodeValue):n.preformattedCode&&"CODE"===r.nodeName?a=!1:1!==r.nodeType||o(r)||(a=i.test(r.textContent))),a}var P=Array.prototype.reduce,N=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function j(t){if(!(this instanceof j))return new j(t);var n={rules:f,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=e({},n,t),this.rules=new g(this.options)}function z(e){var t=this;return P.call(e.childNodes,(function(e,n){var r="";return 3===(n=new B(n,t.options)).nodeType?r=n.isCode?n.nodeValue:t.escape(n.nodeValue):1===n.nodeType&&(r=q.call(t,n)),$(e,r)}),"")}function R(e){var t=this;return this.rules.forEach((function(n){"function"==typeof n.append&&(e=$(e,n.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function q(e){var t=this.rules.forNode(e),n=z.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function $(e,t){var i=r(e),o=n(t),a=Math.max(e.length-i.length,t.length-o.length);return i+"\n\n".substring(0,a)+o}function U(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}return j.prototype={
/**
         * The entry point for converting a string or DOM node to Markdown
         * @public
         * @param {String|HTMLElement} input The string or DOM node to convert
         * @returns A Markdown representation of the input
         * @type String
         */
turndown:function(e){if(!U(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=z.call(this,new I(e,this.options));return R.call(this,t)},
/**
         * Add one or more plugins
         * @public
         * @param {Function|Array} plugin The plugin or array of plugins to add
         * @returns The Turndown instance for chaining
         * @type Object
         */
use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},
/**
         * Adds a rule
         * @public
         * @param {String} key The unique key of the rule
         * @param {Object} rule The rule
         * @returns The Turndown instance for chaining
         * @type Object
         */
addRule:function(e,t){return this.rules.add(e,t),this},
/**
         * Keep a node (as HTML) that matches the filter
         * @public
         * @param {String|Array|Function} filter The unique key of the rule
         * @returns The Turndown instance for chaining
         * @type Object
         */
keep:function(e){return this.rules.keep(e),this},
/**
         * Remove a node that matches the filter
         * @public
         * @param {String|Array|Function} filter The unique key of the rule
         * @returns The Turndown instance for chaining
         * @type Object
         */
remove:function(e){return this.rules.remove(e),this},
/**
         * Escapes Markdown syntax
         * @public
         * @param {String} string The string to escape
         * @returns A string with Markdown syntax escaped
         * @type String
         */
escape:function(e){return N.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}},j}()),UM.exports);const WM=bo(HM),GM=/^\s*(https?|ftp|mailto|tel|file):/,VM=/^\s*((https?|ftp|file|blob):|data:image\/)/,YM=window.document.createElement("a");function KM(e,t){const n=t?VM:GM;YM.setAttribute("href",e);const r=YM.href;return""===r||r.match(n)?e:`unsafe:${r}`}var XM,ZM=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,JM=/^<\/\s*([\w:-]+)[^>]*>/,QM=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,eF=/^</,tF=/^<\//,nF=/<!--(.*?)-->/g,rF=/<!DOCTYPE([^>]*?)>/i,iF=/<!\[CDATA\[(.*?)]]>/g,oF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,aF=/([^\#-~| |!])/g,sF=_F("area,br,col,hr,img,wbr"),lF=_F("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cF=_F("rp,rt"),uF={...cF,...lF},hF={...lF,..._F("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")};hF.iframe=!0;var dF={...cF,..._F("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")},pF=_F("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),fF=_F("script,style"),mF={...sF,...hF,...dF,...uF,...pF},gF=_F("background,cite,href,longdesc,src,usemap,xlink:href"),vF=_F("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),yF=_F("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),bF={...gF,...yF,...vF};function _F(e,t){var n,r={},i=e.split(",");for(n=0;n<i.length;n++)r[t?i[n].toLowerCase():i[n]]=!0;return r}bF.id=!0,bF.allowfullscreen=!0;var wF=document.createElement("pre");function kF(e){return e?(wF.innerHTML=e.replace(/</g,"&lt;"),wF.textContent):""}function xF(e){return e.replace(/&/g,"&amp;").replace(oF,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(aF,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}const CF={sanitizeHtml:function(e){var t,n,r,i;return function(e,t){"string"!=typeof e&&(e=null==e?"":""+e);var n,r,i,o,a=[],s=e;for(a.last=function(){return a[a.length-1]};e;){if(o="",r=!0,a.last()&&fF[a.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+a.last()+"[^>]*>","i"),(function(e,n){return n=n.replace(nF,"$1").replace(iF,"$1"),t.chars&&t.chars(kF(n)),""})),c("",a.last())):(0===e.indexOf("\x3c!--")?(n=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",n)===n&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),r=!1):rF.test(e)?(i=e.match(rF))&&(e=e.replace(i[0],""),r=!1):tF.test(e)?(i=e.match(JM))&&(e=e.substring(i[0].length),i[0].replace(JM,c),r=!1):eF.test(e)&&((i=e.match(ZM))?(i[4]&&(e=e.substring(i[0].length),i[0].replace(ZM,l)),r=!1):(o+="<",e=e.substring(1))),r&&(o+=(n=e.indexOf("<"))<0?e:e.substring(0,n),e=n<0?"":e.substring(n),t.chars&&t.chars(kF(o)))),e==s)return a.reverse(),a.cl_each((function(e){XM.push("</"),XM.push(e),XM.push(">")}));s=e}function l(e,n,r,i){if(n=n&&n.toLowerCase(),hF[n])for(;a.last()&&dF[a.last()];)c("",a.last());uF[n]&&a.last()==n&&c("",n),(i=sF[n]||!!i)||a.push(n);var o={};r.replace(QM,(function(e,t,n,r,i){var a=n||r||i||"";o[t]=kF(a)})),t.start&&t.start(n,o,i)}function c(e,n){var r,i=0;if(n=n&&n.toLowerCase())for(i=a.length-1;i>=0&&a[i]!=n;i--);if(i>=0){for(r=a.length-1;r>=i;r--)t.end&&t.end(a[r]);a.length=i}}c()}(e,(n=function(e,t){return!/^unsafe/.test(KM(e,t))},r=!1,i=(t=XM=[]).push.bind(t),{start:function(e,t,o){e=e&&e.toLowerCase(),!r&&fF[e]&&(r=e),r||!0!==mF[e]||(i("<"),i(e),Object.keys(t).forEach((function(r){var o=t[r],a=r&&r.toLowerCase(),s="img"===e&&"src"===a||"background"===a;!0!==bF[a]||!0===gF[a]&&!n(o,s)||(i(" "),i(r),i('="'),i(xF(o)),i('"'))})),i(o?"/>":">"))},end:function(e){e=e&&e.toLowerCase(),r||!0!==mF[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(xF(e))},comment:function(e){r||(i("\x3c!--"),i(xF(e)),i("--\x3e"))}})),XM.join("")},sanitizeUri:KM};function SF(e,t,n=!1){const r=t||e,i={$contentElt:e,$scrollElt:r,$keystrokes:[],$markers:{}};SF.Utils.createEventHooks(i);const{debounce:o}=SF.Utils;function a(){let t=e.textContent.replace(/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,"\n");return"\n"!==t.slice(-1)&&(t+="\n"),t}e.setAttribute("tabindex","0"),i.toggleEditable=t=>{e.contentEditable=null==t?!e.contentEditable:t},i.toggleEditable(!0);let s=a();const l=new SF.Highlighter(i),c=new zM,u=new SF.SelectionMgr(i);function h(e){u.saveSelectionState(!0,!0,e)}function d(e,t,n){const r=Math.min(e,t),i=Math.max(e,t),o=u.createRange(r,i),a=`${o}`;return a.length===i-r&&a===n?null:(o.deleteContents(),o.insertNode(document.createTextNode(n)),o)}let p=!1,f=!1;const m=new SF.UndoMgr(i);function g(e,t,n){m.setDefaultMode("single"),d(e,t,n);const r=Math.min(e,t)+n.length;u.setSelectionStartEnd(r,r),u.updateCursorCoordinates(!0)}const v=o((()=>{const e=window.getSelection();u.hasFocus()&&!l.isComposing&&u.selectionStart===u.selectionEnd&&e.modify&&(u.selectionStart?(e.modify("move","backward","character"),e.modify("move","forward","character")):(e.modify("move","forward","character"),e.modify("move","backward","character")))}),10);let y,b,_,w,k,x;function C(t){y.noWatch((()=>{const n=[],r=[];function i(t){let i=t;for(;i&&i!==e;){if(i.section){const e=i.parentNode?r:n;return void(-1===e.indexOf(i.section)&&e.push(i.section))}i=i.parentNode}}t.cl_each((e=>{i(e.target),e.addedNodes.cl_each(i),e.removedNodes.cl_each(i)})),l.fixContent(r,n,f),f=!1})),b||u.saveSelectionState(),b=!1;const n=a(),r=c.diff_main(s,n);i.$markers.cl_each((e=>{e.adjustOffset(r)}));const o=l.parseSections(n);i.$trigger("contentChanged",n,r,o),p||(m.addDiffs(s,n,r),m.setDefaultMode("typing"),m.saveState()),p=!1,s=n,v()}function S(e){return t=>{17!==t.which&&// Ctrl
91!==t.which&&// Cmd
18!==t.which&&// Alt
16!==t.which&&e(t)}}function T(){return!document.contains(e)&&(y.stopWatching(),window.removeEventListener("keydown",_),window.removeEventListener("mousedown",w),window.removeEventListener("mouseup",w),window.removeEventListener("resize",k),i.$trigger("destroy"),!0)}function E(e){const t=Array.isArray(e)?e:[e];i.$keystrokes=i.$keystrokes.concat(t).sort(((e,t)=>e.priority-t.priority))}return y=new SF.Watcher(i,C),y.startWatching(),_=e=>{T()||S((()=>{h()}))(e)},window.addEventListener("keydown",_),w=()=>{T()||u.saveSelectionState(!0,!1)},window.addEventListener("mousedown",w),window.addEventListener("mouseup",w),k=()=>{T()||u.updateCursorCoordinates()},window.addEventListener("resize",k),e.addEventListener("contextmenu",u.saveSelectionState.cl_bind(u,!0,!1)),e.addEventListener("keydown",S((e=>{u.saveSelectionState();let t=!1;const n=a();let r=Math.min(u.selectionStart,u.selectionEnd),o=Math.max(u.selectionStart,u.selectionEnd);const s={before:n.slice(0,r),after:n.slice(o),selection:n.slice(r,o),isBackwardSelection:u.selectionStart>u.selectionEnd};i.$keystrokes.cl_some((n=>{if(!n.handler(e,s,i))return!1;const c=s.before+s.selection+s.after;return c!==a()&&(i.setContent(c,!1,r),t=!0,b=!0,l.cancelComposition=!0),r=s.before.length,o=r+s.selection.length,u.setSelectionStartEnd(s.isBackwardSelection?o:r,s.isBackwardSelection?r:o,!t),!0})),t||h()}))),e.addEventListener("compositionstart",(()=>{l.isComposing+=1})),e.addEventListener("compositionend",(()=>{setTimeout((()=>{l.isComposing&&(l.isComposing-=1,l.isComposing||C([]))}),1)})),n&&(e.addEventListener("copy",(e=>{e.clipboardData&&(e.clipboardData.setData("text/plain",u.getSelectedText()),e.preventDefault())})),e.addEventListener("cut",(e=>{e.clipboardData?(e.clipboardData.setData("text/plain",u.getSelectedText()),e.preventDefault(),g(u.selectionStart,u.selectionEnd,"")):m.setCurrentMode("single"),h()})),x=new WM(_H.getters["data/computedSettings"].turndown),x.escape=e=>e),e.addEventListener("paste",(e=>{let t;m.setCurrentMode("single"),e.preventDefault();let{clipboardData:n}=e;if(n){if(t=n.getData("text/plain"),x)try{const e=n.getData("text/html");if(e){const n=CF.sanitizeHtml(e).replace(/&#160;/g," ");n&&(t=x.turndown(n))}}catch(i7){}}else({clipboardData:n}=window.clipboardData),t=n&&n.getData("Text");t&&(g(u.selectionStart,u.selectionEnd,t),h())})),e.addEventListener("focus",(()=>{i.$trigger("focus")})),e.addEventListener("blur",(()=>{i.$trigger("blur")})),E(SF.defaultKeystrokes),i.selectionMgr=u,i.undoMgr=m,i.highlighter=l,i.watcher=y,i.adjustCursorPosition=h,i.setContent=function(e,t,n){const r=a(),i=null!=n&&n<r.length?n:r.length-1,o=Math.min(c.diff_commonPrefix(r,e),i),s=Math.min(c.diff_commonSuffix(r,e),r.length-o,e.length-o),l=e.substring(o,e.length-s),u=d(o,r.length-s,l);return u&&(p=t,f=!0),{start:o,end:e.length-s,range:u}},i.replace=g,i.replaceAll=function(e,t,n=0){m.setDefaultMode("single");const r=a(),o=a().slice(n),s=o.replace(e,t);if(s!==o){const e=i.setContent(r.slice(0,n)+s);u.setSelectionStartEnd(e.end,e.end),u.updateCursorCoordinates(!0)}},i.getContent=a,i.focus=function(){u.restoreSelection(),e.focus()},i.setSelection=function(e,t){u.setSelectionStartEnd(e,null==t?e:t),u.updateCursorCoordinates()},i.addKeystroke=E,i.addMarker=function(e){i.$markers[e.id]=e},i.removeMarker=function(e){delete i.$markers[e.id]},i.init=(e={})=>{const t={getCursorFocusRatio:()=>.1,sectionHighlighter:e=>e.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," "),sectionDelimiter:""}.cl_extend(e);i.options=t,void 0!==t.content&&(s=t.content.toString(),"\n"!==s.slice(-1)&&(s+="\n"));const n=l.parseSections(s,!0);i.$trigger("contentChanged",s,[0,s],n),void 0!==t.selectionStart&&void 0!==t.selectionEnd?i.setSelection(t.selectionStart,t.selectionEnd):u.saveSelectionState(),m.init(t),void 0!==t.scrollTop&&(r.scrollTop=t.scrollTop)},i}const TF=[];function EF(e,t){this.handler=e,this.priority=t||100}let IF;SF.Highlighter=function(e){SF.Utils.createEventHooks(this),TF.cl_some((e=>document.head.contains(e)))||function(e){const t=e.createElement("style");t.type="text/css",t.innerHTML=".cledit-section * { display: inline; }",e.head.appendChild(t),TF.push(t)}(document);const t=e.$contentElt;this.isComposing=0;let n,r=[];const i=SF.Utils.isWebkit,o=`<span class="lf">${i?'<br><span class="hd-lf" style="display: none">\n</span>':"\n"}</span>`;this.fixContent=(e,t,n)=>{e.cl_each((e=>{e.forceHighlighting=!0,n||(i&&(e.elt.getElementsByClassName("hd-lf").cl_each((e=>e.parentNode.removeChild(e))),e.elt.getElementsByTagName("br").cl_each((e=>e.parentNode.replaceChild(document.createTextNode("\n"),e)))),"\n"!==e.elt.textContent.slice(-1)&&e.elt.appendChild(document.createTextNode("\n")))}))},this.addTrailingNode=()=>{this.trailingNode=document.createElement("div"),t.appendChild(this.trailingNode)};class a{constructor(e){this.text=void 0===e.text?e:e.text,this.data=e.data}setElement(e){this.elt=e,e.section=this}}this.parseSections=(i,s)=>{if(this.isComposing&&!this.cancelComposition)return r;this.cancelComposition=!1;const l=(e.options.sectionParser?e.options.sectionParser(i):[i]).cl_map((e=>new a(e)));let c=[],u=[];if(n=void 0,s)u=r,r=l,c=l;else{let e=r.length;r.cl_some(((n,r)=>{const i=l[r];return!!(r>=l.length||n.forceHighlighting||// Check text modification
n.text!==i.text||// Check that section has not been detached or moved
n.elt.parentNode!==t||// Check also the content since nodes can be injected in sections via copy/paste
n.elt.textContent!==i.text)&&(e=r,!0)}));let i=-r.length;r.slice().reverse().cl_some(((e,n)=>{const r=l[l.length-n-1];return!!(n>=l.length||e.forceHighlighting||// Check modified
e.text!==r.text||// Check that section has not been detached or moved
e.elt.parentNode!==t||// Check also the content since nodes can be injected in sections via copy/paste
e.elt.textContent!==r.text)&&(i=-n,!0)})),e-i>r.length&&(i=e-r.length);const o=r.slice(0,e);c=l.slice(e,l.length+i);const a=r.slice(r.length+i,r.length);[n]=a,u=r.slice(e,r.length+i),r=o.concat(c).concat(a)}const h=t=>{const n=e.options.sectionHighlighter(t).replace(/\n/g,o),r=document.createElement("div");r.className="cledit-section",r.innerHTML=n,t.setElement(r),this.$trigger("sectionHighlighted",t)},d=document.createDocumentFragment();return c.cl_each((e=>{e.forceHighlighting=!1,h(e),d.appendChild(e.elt)})),e.watcher.noWatch((()=>{if(s)return t.innerHTML="",t.appendChild(d),void this.addTrailingNode();u.cl_each((e=>{e.elt.parentNode===t&&t.removeChild(e.elt),e.elt.section=void 0})),void 0!==n?t.insertBefore(d,n.elt):t.appendChild(d);let r=t.firstChild;for(;r;){const e=r.nextSibling;r.section||t.removeChild(r),r=e}this.addTrailingNode(),this.$trigger("highlighted"),e.selectionMgr.hasFocus()&&(e.selectionMgr.restoreSelection(),e.selectionMgr.updateCursorCoordinates())})),r}},SF.Keystroke=EF;const AF=Object.create(null);function DF(e,t,n){let r,i=t;for(;n&&i>0||!n&&i<e.length;){const t=AF[n?e[i-1]:e[i]]||"word";if(r&&t!==r&&("word"===r||"space"===t||"newLine"===r||"newLine"===t))break;r=t,n?i-=1:i+=1}return i}"./\\()\"'-:,.;<>~!@#$%^&*|+=[]{}`~?".split("").cl_each((e=>{AF[e]="wordSeparator"})),AF[" "]="space",AF["\t"]="space",AF["\n"]="newLine",SF.defaultKeystrokes=[new EF(((e,t,n)=>{if(!e.ctrlKey&&!e.metaKey||e.altKey)return!1;const r=e.charCode||e.keyCode;let i;switch(String.fromCharCode(r).toLowerCase()){case"y":i="redo";break;case"z":i=e.shiftKey?"redo":"undo"}return!!i&&(e.preventDefault(),setTimeout((()=>n.undoMgr[i]()),10),!0)})),new EF(((e,t)=>{if(9!==e.which||e.metaKey||e.ctrlKey)return!1;const n=(e,t,n,r="")=>e.slice(0,t)+r+e.slice(t+(+n||0));e.preventDefault();const r=e.shiftKey,i=t.before.lastIndexOf("\n")+1;return r?(/\s/.test(t.before.charAt(i))&&(t.before=n(t.before,i,1)),t.selection=t.selection.replace(/^[ \t]/gm,"")):t.selection?(t.before=n(t.before,i,0,"\t"),t.selection=t.selection.replace(/\n(?=[\s\S])/g,"\n\t")):t.before+="\t",!0})),new EF(((e,t,n)=>{if(13!==e.which)return IF=!1,!1;e.preventDefault();const r=t.before.lastIndexOf("\n")+1;if(IF)return t.before=t.before.substring(0,r),t.selection="",IF=!1,!0;IF=!1;const i=t.before.slice(r).match(/^\s*/)[0];return i.length&&(IF=!0),n.undoMgr.setCurrentMode("single"),t.before+=`\n${i}`,t.selection="",!0})),new EF(((e,t,n)=>{if(8!==e.which&&46!==e.which)return!1;if(n.undoMgr.setCurrentMode("delete"),t.selection)return t.selection="",e.preventDefault(),!0;if(SF.Utils.isMac&&e.altKey||!SF.Utils.isMac&&e.ctrlKey){const n=t.before+t.after,r=DF(n,t.before.length,8===e.which);return 8===e.which?t.before=t.before.slice(0,r):t.after=t.after.slice(r-n.length),e.preventDefault(),!0}if(8===e.which&&"\n"===t.before.slice(-1))return t.before=t.before.slice(0,-1),e.preventDefault(),!0;if(46===e.which&&"\n"===t.after.slice(0,1))return t.after=t.after.slice(1),e.preventDefault(),!0;return!1})),new EF(((e,t,n)=>{if(37!==e.which&&39!==e.which)return!1;if(!(SF.Utils.isMac&&e.altKey||!SF.Utils.isMac&&e.ctrlKey))return!1;const r=n.getContent(),i=DF(r,n.selectionMgr.selectionEnd,37===e.which);if(e.shiftKey){const e=Math.min(n.selectionMgr.selectionStart,i),o=Math.max(n.selectionMgr.selectionStart,i);t.before=r.slice(0,e),t.after=r.slice(o),t.selection=r.slice(e,o),t.isBackwardSelection=n.selectionMgr.selectionStart>i}else t.before=r.slice(0,i),t.after=r.slice(i),t.selection="";return e.preventDefault(),!0}))];let BF=0;SF.Marker=class{constructor(e,t){this.id=BF,BF+=1,this.offset=e,this.trailing=t}adjustOffset(e){let t=0;e.cl_each((e=>{const n=e[0],r=e[1].length;switch(n){case 0:t+=r;break;case 1:(this.trailing?this.offset>t:this.offset>=t)&&(this.offset+=r),t+=r;break;case-1:this.offset>t&&(this.offset-=Math.min(r,this.offset-t))}}))}},SF.SelectionMgr=function(e){const{debounce:t}=SF.Utils,n=e.$contentElt,r=e.$scrollElt;SF.Utils.createEventHooks(this);let i,o=0,a=0;this.selectionStart=0,this.selectionEnd=0,this.cursorCoordinates={},this.findContainer=e=>{const t=SF.Utils.findContainer(n,e);if("\n"===t.container.nodeValue){const e=t.container.parentNode;"hd-lf"===e.className&&e.previousSibling&&"BR"===e.previousSibling.tagName&&(t.container=e.parentNode,t.offsetInContainer=Array.prototype.indexOf.call(t.container.childNodes,0===t.offsetInContainer?e.previousSibling:e))}return t},this.createRange=(e,t)=>{const n=document.createRange(),r="number"==typeof e?this.findContainer(e<0?0:e):e;let i=r;return e!==t&&(i="number"==typeof t?this.findContainer(t<0?0:t):t),n.setStart(r.container,r.offsetInContainer),n.setEnd(i.container,i.offsetInContainer),n};const s=t((()=>{const t=this.getCoordinates(this.selectionEnd,this.selectionEndContainer,this.selectionEndOffset);if(this.cursorCoordinates.top===t.top&&this.cursorCoordinates.height===t.height&&this.cursorCoordinates.left===t.left||(this.cursorCoordinates=t,this.$trigger("cursorCoordinatesChanged",t)),i){let t=r.clientHeight;"number"==typeof i&&(t-=i);const o=t/2*e.options.getCursorFocusRatio();let a=this.cursorCoordinates.top+this.cursorCoordinates.height/2;a+=n.getBoundingClientRect().top-r.getBoundingClientRect().top+r.scrollTop;const s=a-o,l=a+o-t;r.scrollTop>s?r.scrollTop=s:r.scrollTop<l&&(r.scrollTop=l)}i=!1}));let l;this.updateCursorCoordinates=e=>{i=i||e,s()};const c=e=>(!l||l.startContainer!==e.startContainer||l.startOffset!==e.startOffset||l.endContainer!==e.endContainer||l.endOffset!==e.endOffset)&&(l=e,this.$trigger("selectionChanged",this.selectionStart,this.selectionEnd,e),!0);this.hasFocus=()=>n===document.activeElement,this.restoreSelection=()=>{const e=Math.min(this.selectionStart,this.selectionEnd),t=Math.max(this.selectionStart,this.selectionEnd),n=this.createRange(e,t);if(!document.contains(n.commonAncestorContainer))return null;const r=window.getSelection();r.removeAllRanges();if(this.selectionStart>this.selectionEnd&&r.extend){const e=n.cloneRange();e.collapse(!1),r.addRange(e),r.extend(n.startContainer,n.startOffset)}else r.addRange(n);return c(n),n};const u=t((()=>{o=this.selectionStart,a=this.selectionEnd}),50),h=(e=this.selectionStart,t=this.selectionEnd)=>{this.selectionStart=e<0?0:e,this.selectionEnd=t<0?0:t,u()};this.setSelectionStartEnd=(e,t,n=!0)=>(h(e,t),n&&this.hasFocus()?this.restoreSelection():null),this.saveSelectionState=(()=>{function r(e,t){let n=e.length;for(;n;)if(n-=1,e[n]===t)return!0;return!1}function i(e,t,n){let r,i=e;for(;i;){if(r=i.parentNode,r===t)return i;i=r}return null}function s(e){let t=0,{previousSibling:n}=e;for(;n;)t+=1,({previousSibling:n}=n);return t}function l(e,t,n,o){let a;if(e===n)return t===o?0:t<o?-1:1;let l=i(n,e);if(l)return t<=s(l)?-1:1;if(l=i(e,n),l)return s(l)<o?-1:1;const c=function(e,t){const n=[];let i;for(i=e;i;i=i.parentNode)n.push(i);for(i=t;i;i=i.parentNode)if(r(n,i))return i;return null}(e,n);if(!c)throw new Error("comparePoints error: nodes have no common ancestor");const u=e===c?c:i(e,c),h=n===c?c:i(n,c);if(u===h)throw module.createError("comparePoints got to case 4 and childA and childB are the same!");for(a=c.firstChild;a;){if(a===u)return-1;if(a===h)return 1;a=a.nextSibling}return 0}const u=()=>{let t;if(this.hasFocus()){let{selectionStart:r}=this,{selectionEnd:i}=this;const a=window.getSelection();if(a.rangeCount>0){const s=a.getRangeAt(0);let u=s.startContainer;if(n.compareDocumentPosition(u)&window.Node.DOCUMENT_POSITION_CONTAINED_BY||n===u){let d=s.startOffset;u.firstChild&&d>0&&(u=u.childNodes[d-1],d=u.textContent.length);let p=u;for(;u!==n;){for(u=u.previousSibling;u;)d+=(u.textContent||"").length,u=u.previousSibling;u=p.parentNode,p=u}let f=`${s}`;const m=s.endContainer.firstChild;m&&"BR"===m.tagName&&1===s.endOffset&&(f+="\n"),1===l(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)?(r=d+f.length,i=d):(r=d,i=d+f.length),r===i&&r===e.getContent().length?(i-=1,r=i,t=this.setSelectionStartEnd(r,i)):(h(r,i),t=c(s),t=t||o!==this.selectionStart)}}}return t},d=()=>u()&&(o!==this.selectionStart||a!==this.selectionEnd);let p=!1;const f=t((()=>{this.updateCursorCoordinates(d()&&p),p=!1}),10),m=t((()=>{this.updateCursorCoordinates(d()&&p),f()}));return(e,t,n)=>{n&&(o=void 0,a=void 0),e?(p=p||t,m()):u()}})(),this.getSelectedText=()=>{const t=Math.min(this.selectionStart,this.selectionEnd),n=Math.max(this.selectionStart,this.selectionEnd);return e.getContent().substring(t,n)},this.getCoordinates=(t,r,i)=>{let o=r,a=i;if(!o){const e=this.findContainer(t);({container:o}=e),({offsetInContainer:a}=e)}let s=o;!s.hasChildNodes()&&o.parentNode&&(s=o.parentNode);let l,c=!1;for(;!s.offsetHeight;)if(c=!0,s.previousSibling)s=s.previousSibling;else if(s=s.parentNode,!s)return{top:0,height:0,left:0};let u="left";if(c||"\n"===o.textContent)l=s.getBoundingClientRect();else{const n=e.getContent()[t];let r={container:o,offsetInContainer:a},i={container:o,offsetInContainer:a};t>0&&(void 0===n||"\n"===n)?(u="right",0===r.offsetInContainer?r=t-1:r.offsetInContainer-=1):i.offsetInContainer===o.textContent.length?i=t+1:i.offsetInContainer+=1;l=this.createRange(r,i).getBoundingClientRect()}const h=n.getBoundingClientRect();return{top:Math.round(l.top-h.top+n.scrollTop),height:Math.round(l.height),left:Math.round(l[u]-h.left+n.scrollLeft)}},this.getClosestWordOffset=t=>{let n=0,r=0,i=0;return e.getContent().split(/\s/).cl_some((e=>!!(e&&(n=i,r=i+e.length,r>t))||(i+=e.length+1,!1))),{start:n,end:r}}},SF.UndoMgr=function(e){SF.Utils.createEventHooks(this);const t=new zM,n=this;let r;const i=[],o=[];let a,s=[],l=[];const{debounce:c}=SF.Utils;let u;this.options={undoStackMaxSize:200,bufferStateUntilIdle:1e3,patchHandler:{makePatches:(e,n,r)=>t.patch_make(e,r),applyPatches:(e,n)=>t.patch_apply(e,n)[0],reversePatches(e){const n=t.patch_deepCopy(e).reverse();return n.cl_each((e=>{e.diffs.cl_each((e=>{e[0]=-e[0]}))})),n}}};class h{addToUndoStack(){i.push(this),this.patches=s,s=[]}addToRedoStack(){o.push(this),this.patches=s,s=[]}}function d(){Array.prototype.push.apply(s,l),l=[]}u=new function(){let e,t,r;this.isBufferState=()=>(e=Date.now(),"single"!==this.currentMode&&this.currentMode===r&&e-t<n.options.bufferStateUntilIdle),this.setDefaultMode=e=>{this.currentMode=this.currentMode||e},this.resetMode=()=>{u.currentMode=void 0,r=void 0},this.saveMode=()=>{r=this.currentMode,this.currentMode=void 0,t=e}},this.setCurrentMode=e=>{u.currentMode=e},this.setDefaultMode=u.setDefaultMode.cl_bind(u),this.addDiffs=(e,t,n)=>{this.options.patchHandler.makePatches(e,t,n).cl_each((e=>l.push(e)))},this.saveState=c((()=>{if(o.length=0,!u.isBufferState())for(a.addToUndoStack();i.length>this.options.undoStackMaxSize;)i.shift();d(),a=new h,u.saveMode(),this.$trigger("undoStateChange")})),this.canUndo=()=>!!i.length,this.canRedo=()=>!!o.length;const p=(t,n)=>{let i=t;const o=e.getContent();n||(i=this.options.patchHandler.reversePatches(i));const a=this.options.patchHandler.applyPatches(i,o),s=a.text||a,l=e.setContent(s,!0),c=a.selection||{start:l.end,end:l.end};r.setSelectionStartEnd(c.start,c.end),r.updateCursorCoordinates(!0),u.resetMode(),this.$trigger("undoStateChange"),e.adjustCursorPosition()};this.undo=()=>{const e=i.pop();e&&(d(),a.addToRedoStack(),p(a.patches),s=e.patches,a=e)},this.redo=()=>{const e=o.pop();e&&(a.addToUndoStack(),p(e.patches,!0),s=e.patches,a=e)},this.init=t=>{this.options.cl_extend(t||{}),({selectionMgr:r}=e),a||(a=new h)}};const LF={isGecko:"MozAppearance"in document.documentElement.style,isWebkit:"WebkitAppearance"in document.documentElement.style,isMsie:"msTransform"in document.documentElement.style,isMac:-1!==navigator.userAgent.indexOf("Mac OS X")};LF.defer=(()=>{const e=new Array(1e3);let t=0;let n=0;const r=new window.MutationObserver((function(){for(let n=0;n<t;n+=1){try{e[n]()}catch(i7){}e[n]=void 0}t=0})),i=document.createTextNode("");return r.observe(i,{characterData:!0}),r=>{e[t]=r,t+=1,1===t&&(n=(n+1)%2,i.data=n)}})(),LF.debounce=(e,t)=>{let n,r;return t?()=>{clearTimeout(n),n=setTimeout(e,t)}:()=>{r||(r=!0,LF.defer((()=>{r=!1,e()})))}},LF.createEventHooks=e=>{const t=Object.create(null);e.$trigger=(n,...r)=>{const i=t[n];i&&i.cl_each((t=>{try{t.apply(e,r)}catch(i7){}}))},e.on=(e,n)=>{let r=t[e];r||(r=[],t[e]=r),r.push(n)},e.off=(e,n)=>{const r=t[e];if(r){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}},LF.findContainer=(e,t)=>{let n,r=0,i=e;do{if(n=i,i=i.firstChild,i)do{const e=i.textContent.length;if(r<=t&&r+e>t)break;r+=e,i=i.nextSibling}while(i)}while(i&&i.firstChild&&3!==i.nodeType);if(i)return{container:i,offsetInContainer:t-r};for(;n.lastChild;)n=n.lastChild;return{container:n,offsetInContainer:3===n.nodeType?n.textContent.length:0}},SF.Utils=LF,SF.Watcher=function(e,t){let n;this.isWatching=!1,this.startWatching=()=>{this.stopWatching(),this.isWatching=!0,n=new window.MutationObserver(t),n.observe(e.$contentElt,{childList:!0,subtree:!0,characterData:!0})},this.stopWatching=()=>{n&&(n.disconnect(),n=void 0),this.isWatching=!1},this.noWatch=e=>{!0===this.isWatching?(this.stopWatching(),e(),this.startWatching()):e()}};let MF,FF=null;const OF={addBadge(e){if(!_H.getters["data/badgeCreations"][e]){if(!FF){const e=_H.getters["data/allBadges"].filter((e=>e.isEarned)).map((e=>e.featureId));FF=new Set(e)}_H.dispatch("data/patchBadgeCreations",{[e]:{created:Date.now()}}),clearTimeout(MF),MF=setTimeout((()=>(()=>{const e=_H.getters["data/allBadges"].filter((e=>e.isEarned&&!FF.has(e.featureId)));e.length&&_H.dispatch("notification/badge",e.length>1?` ${e.length} : ${e.map((e=>`"${e.name}"`)).join(", ")}.`:` 1 : "${e[0].name}".`),FF=null})()),5e3)}}},PF=new zM,NF=RM(qM);NF.state={...NF.state,revisionContent:null},NF.mutations={...NF.mutations,setRevisionContent:(e,t)=>{e.revisionContent=t?{...qM(),...t,id:UL.uid(),hash:Date.now()}:null}},NF.getters={...NF.getters,current:({itemsById:e,revisionContent:t},n,r,i)=>t||(e[`${i["file/current"].id}/content`]||qM()),currentChangeTrigger:(e,t)=>{const{current:n}=t;return UL.serializeObject([n.id,n.text,n.hash])},currentProperties:(e,{current:t})=>UL.computeProperties(t.properties),isCurrentEditable:({revisionContent:e},{current:t},n,r)=>!e&&t.id&&r["layout/styles"].showEditor},NF.actions={...NF.actions,patchCurrent({state:e,getters:t,commit:n},r){const{id:i}=t.current;i&&!e.revisionContent&&n("patchItem",{...r,id:i})},setRevisionContent({state:e,rootGetters:t,commit:n},r){const i=t["file/current"],o=e.itemsById[`${i.id}/content`];if(o){const e=PF.diff_main(o.text,r.text);PF.diff_cleanupSemantic(e),n("setRevisionContent",{text:e.map((([,e])=>e)).join(""),diffs:e,originalText:r.text})}},async restoreRevision({state:e,getters:t,commit:n,dispatch:r}){const{revisionContent:i}=e;if(i){await r("modal/open","fileRestoration",{root:!0}),n("setRevisionContent");const e=UL.deepCopy(t.current);if(e){const t=PF.diff_main(e.text,i.originalText);PF.diff_cleanupSemantic(t),Object.entries(e.discussions).forEach((([,e])=>{const n=n=>{const r=new SF.Marker(e[n],"end"===n);r.adjustOffset(t),e[n]=r.offset};n("start"),n("end")})),r("patchCurrent",{...e,text:i.originalText}),OF.addBadge("restoreVersion")}}}};const jF=(e=null)=>({id:e,type:"contentState",selectionStart:0,selectionEnd:0,scrollPosition:null,hash:0}),zF=RM(jF,!0);zF.getters={...zF.getters,current:({itemsById:e},t,n,r)=>e[`${r["file/current"].id}/contentState`]||jF()},zF.actions={...zF.actions,patchCurrent({getters:e,commit:t},n){t("patchItem",{...n,id:e.current.id})}};const RF=e=>(t,n)=>{t[e]=n},qF={namespaced:!0,state:{coordinates:{left:0,top:0},items:[],resolve:()=>{}},mutations:{setCoordinates:RF("coordinates"),setItems:RF("items"),setResolve:RF("resolve")},actions:{open:({commit:e,rootState:t},{coordinates:n,items:r})=>(e("setItems",r),e("setCoordinates",{top:0,left:-9999}),setTimeout((()=>{const r=document.querySelector(".context-menu__inner");if(r){const i=r.offsetHeight;n.top+i>t.layout.bodyHeight&&(n.top-=i),n.top<0&&(n.top=0);const o=r.offsetWidth;n.left+o>t.layout.bodyWidth&&(n.left-=o),n.left<0&&(n.left=0),e("setCoordinates",n)}}),1),new Promise((t=>e("setResolve",t)))),close({commit:e}){e("setItems",[]),e("setResolve",(()=>{}))}}},$F="# light or dark\ncolorTheme: light\n# Adjust font size in editor and preview\nfontSizeFactor: 1\n# Adjust maximum text width in editor and preview\nmaxWidthFactor: 1\n# Auto-sync frequency (in ms). Minimum is 60000.\nautoSyncEvery: 90000\n\n# Editor settings\neditor:\n  # Automatic list numbering\n  listAutoNumber: true\n  # Display images in the editor\n  inlineImages: true\n  # Use monospaced font only\n  monospacedFontOnly: false\n  # \n  showInPageButtons: true\n  # \n  headButtons:\n    # \n    bold: true\n    # \n    italic: true\n    # \n    heading: true\n    # \n    strikethrough: true\n    # \n    ulist: true\n    # \n    olist: true\n    # \n    clist: true\n    # \n    quote: true\n    # \n    code: true\n    # \n    table: true\n    # \n    link: true\n    # \n    image: true\n    # ChatGPT\n    chatgpt: true\n\n# Keyboard shortcuts\n# See https://craig.is/killing/mice\nshortcuts:\n  mod+s: sync\n  mod+f: find\n  mod+alt+f: replace\n  mod+g: replace\n  mod+shift+b: bold\n  mod+shift+c: clist\n  mod+shift+k: code\n  mod+shift+h: heading\n  mod+shift+r: hr\n  mod+shift+g: image\n  mod+shift+p: chatgpt\n  mod+shift+i: italic\n  mod+shift+l: link\n  mod+shift+o: olist\n  mod+shift+q: quote\n  mod+shift+s: strikethrough\n  mod+shift+t: table\n  mod+shift+u: ulist\n  mod+shift+f: inlineformula\n  # \n  mod+shift+e: toggleeditor\n  '= = > space':\n    method: expand\n    params:\n    - '==> '\n    - ' '\n  '< = = space':\n    method: expand\n    params:\n    - '<== '\n    - ' '\n\n# Options passed to wkhtmltopdf\n# See https://wkhtmltopdf.org/usage/wkhtmltopdf.txt\nwkhtmltopdf:\n  marginTop: 25\n  marginRight: 25\n  marginBottom: 25\n  marginLeft: 25\n  # A3, A4, Legal or Letter\n  pageSize: A4\n\n# Options passed to pandoc\n# See https://pandoc.org/MANUAL.html\npandoc:\n  highlightStyle: kate\n  toc: true\n  tocDepth: 3\n\n# HTML to Markdown converter options\n# See https://github.com/domchristie/turndown\nturndown:\n  headingStyle: atx\n  hr: ----------\n  bulletListMarker: '-'\n  codeBlockStyle: fenced\n  fence: '```'\n  emDelimiter: _\n  strongDelimiter: '**'\n  linkStyle: inlined\n  linkReferenceStyle: full\n\n# GitHub/GitLab/Gitee/Gitea commit messages\ngit:\n  createFileMessage: '{{path}} created from https://stackedit.cn/'\n  updateFileMessage: '{{path}} updated from https://stackedit.cn/'\n  deleteFileMessage: '{{path}} deleted from https://stackedit.cn/'\n\n# Default content for new files\nnewFileContent: |\n\n\n\n  > Written with [StackEdit](https://stackedit.cn/).\n\n# Default properties for new files\nnewFileProperties: |\n#  extensions:\n#    preset: gfm\n\n";class UF{constructor(e,t,n,r=null){this.id=e,this.badgeName=t,this.description=n,this.children=r}toBadge(e){const t=this.children?this.children.map((t=>t.toBadge(e))):null;return{featureId:this.id,name:this.badgeName,description:this.description,children:t,isEarned:t?t.every((e=>e.isEarned)):!!e[this.id],hasSomeEarned:t&&t.some((e=>e.isEarned))}}}const HF=[new UF("navigationBar","","Markdown",[new UF("formatButtons",""," Markdown "),new UF("editCurrentFileName","",""),new UF("toggleExplorer","",""),new UF("toggleSideBar","","")]),new UF("explorer","","",[new UF("createFile","",""),new UF("switchFile","",""),new UF("createFolder","",""),new UF("moveFile","",""),new UF("moveFolder","",""),new UF("renameFile","",""),new UF("renameFolder","",""),new UF("removeFile","",""),new UF("removeFolder","",""),new UF("searchFile","","")]),new UF("buttonBar","","",[new UF("toggleNavigationBar","",""),new UF("toggleSidePreview","",""),new UF("toggleEditor","",""),new UF("toggleFocusMode","",""),new UF("toggleScrollSync","",""),new UF("toggleStatusBar","","")]),new UF("signIn",""," Gitee ",[new UF("syncMainWorkspace",""," Gitee stackedit-app-data"),new UF("sponsor",""," Gitee  StackEdit  PDF  Pandoc ")]),new UF("githubSignIn",""," Gitee ",[new UF("githubSyncMainWorkspace",""," GitHub stackedit-app-data")]),new UF("workspaces","","",[new UF("addCouchdbWorkspace","CouchDB","CouchDB"),new UF("addGithubWorkspace","GitHub","GitHub"),new UF("addGiteeWorkspace","Gitee","Gitee"),new UF("addGitlabWorkspace","Gitlab","GitLab"),new UF("addGiteaWorkspace","Gitea","Gitea"),new UF("addGoogleDriveWorkspace","Google Drive","Google Drive"),new UF("renameWorkspace","",""),new UF("removeWorkspace","",""),new UF("autoSyncWorkspace","",""),new UF("stopAutoSyncWorkspace","","")]),new UF("manageAccounts","","",[new UF("addBloggerAccount","Blogger","BloggerStackEdit"),new UF("addDropboxAccount","Dropbox","DropboxStackEdit"),new UF("addGitHubAccount","GitHub","GithubStackEdit"),new UF("addGiteeAccount","Gitee","GiteeStackEdit"),new UF("addGitLabAccount","GitLab","GitlabStackEdit"),new UF("addGiteaAccount","Gitea","GiteaStackEdit"),new UF("addGoogleDriveAccount","Google Drive","Google DriveStackEdit"),new UF("addGooglePhotosAccount","Google Photos","Google PhotosStackEdit"),new UF("addWordpressAccount","WordPress","WordPressStackEdit"),new UF("addZendeskAccount","Zendesk","ZendeskStackEdit"),new UF("addSmmsAccount","SM.MS","SM.MSStackEdit"),new UF("addCustomAccount","","StackEdit"),new UF("removeAccount","","")]),new UF("syncFiles","","",[new UF("openFromDropbox","Dropbox","Dropbox"),new UF("saveOnDropbox","Dropbox","Dropbox"),new UF("openFromGithub","Github","GitHub"),new UF("saveOnGithub","GitHub","GitHub"),new UF("saveOnGist","GitHubGist","GitHubGist"),new UF("openFromGitee","Gitee","Gitee"),new UF("saveOnGitee","Gitee","Gitee"),new UF("saveOnGiteeGist","GiteeGist","GiteeGist"),new UF("openFromGitlab","GitLab","GitLab"),new UF("saveOnGitlab","GitLab","GitLab"),new UF("openFromGitea","Gitea","Gitea"),new UF("saveOnGitea","Gitea","Gitea"),new UF("openFromGoogleDrive","Google Drive","Google Drive"),new UF("saveOnGoogleDrive","Google Drive","Google Drive"),new UF("triggerSync","",""),new UF("syncMultipleLocations","",""),new UF("removeSyncLocation","","")]),new UF("publishFiles","","",[new UF("publishToBlogger","Blogger",""),new UF("publishToBloggerPage","Blogger","Blogger"),new UF("publishToDropbox","Dropbox","Dropbox"),new UF("publishToGithub","GitHub","GitHub"),new UF("publishToGist","GitHubGist","GitHubGist"),new UF("publishToGitee","Gitee","Gitee"),new UF("publishToGiteeGist","GiteeGist","GiteeGist"),new UF("publishToGitlab","GitLab","GitLab"),new UF("publishToGitea","Gitea","Gitea"),new UF("publishToGoogleDrive","Google Drive","Google Drive"),new UF("publishToWordPress","WordPress","WordPress"),new UF("publishToZendesk","Zendesk","Zendesk"),new UF("triggerPublish","",""),new UF("publishMultipleLocations","",""),new UF("removePublishLocation","","")]),new UF("manageHistory","","",[new UF("restoreVersion","",""),new UF("chooseHistory","","")]),new UF("manageProperties","","",[new UF("setMetadata","",""),new UF("changePreset","","Markdown"),new UF("changeExtension","","Markdown")]),new UF("comment","","",[new UF("createDiscussion","",""),new UF("addComment","",""),new UF("removeComment","",""),new UF("removeDiscussion","","")]),new UF("importExport","/","/",[new UF("importMarkdown","Markdown","/Markdown"),new UF("exportMarkdown","Markdown","/Markdown"),new UF("importHtml","HTML","/HTMLMarkdown"),new UF("exportHtml","HTML","/HandlebarsHTML"),new UF("exportPdf","PDF","/PDF"),new UF("exportPandoc","Pandoc","/Pandoc")]),new UF("manageSettings","","",[new UF("changeSettings","",""),new UF("switchTheme","",""),new UF("changeShortcuts","","")]),new UF("manageTemplates","","Handlebars",[new UF("addTemplate","","Handlebars"),new UF("removeTemplate","","Handlebars")])],WF=(e,t={})=>({id:e,type:"data",data:t,hash:0}),GF=e=>{switch(e){case"workspaces":return WF(e,{main:{id:"main",name:""}});case"settings":return WF(e,"\n");case"localSettings":return WF(e,{welcomeFileHashes:{},filePropertiesTab:"",htmlExportTemplate:"styledHtml",pdfExportTemplate:"styledHtml",pandocExportFormat:"pdf",googleDriveRestrictedAccess:!1,googleDriveFolderId:"",googleDriveWorkspaceFolderId:"",googleDrivePublishFormat:"markdown",googleDrivePublishTemplate:"styledHtml",bloggerBlogUrl:"",bloggerPublishTemplate:"plainHtml",dropboxRestrictedAccess:!1,dropboxPublishTemplate:"styledHtml",githubRepoFullAccess:!1,githubRepoUrl:"",githubWorkspaceRepoUrl:"",githubPublishTemplate:"jekyllSite",gistIsPublic:!1,gistPublishTemplate:"plainText",giteeRepoUrl:"",giteeWorkspaceRepoUrl:"",giteePublishTemplate:"jekyllSite",gitlabServerUrl:"",gitlabApplicationId:"",gitlabApplicationSecret:"",gitlabProjectUrl:"",gitlabWorkspaceProjectUrl:"",gitlabPublishTemplate:"plainText",giteaServerUrl:"",giteaApplicationId:"",giteaApplicationSecret:"",giteaProjectUrl:"",giteaWorkspaceProjectUrl:"",giteaPublishTemplate:"plainText",wordpressDomain:"",wordpressPublishTemplate:"plainHtml",zendeskSiteUrl:"",zendeskClientId:"",zendescPublishSectionId:"",zendescPublishLocale:"",zendeskPublishTemplate:"plainHtml"});case"layoutSettings":return WF(e,{showNavigationBar:!0,showEditor:!0,showSidePreview:!0,showStatusBar:!0,showSideBar:!1,showExplorer:!1,scrollSync:!0,focusMode:!1,findCaseSensitive:!1,findUseRegexp:!1,sideBarPanel:"menu",welcomeTourFinished:!1});default:return WF(e)}},VF=new Set(ML.localStorageDataIds),YF=e=>t=>{const n=VF.has(e)?t.lsItemsById:t.itemsById;return n[e]?n[e].data:GF(e).data},KF=e=>({commit:t},n)=>t("setItem",WF(e,n)),XF=e=>({state:t,commit:n},r)=>{const i=VF.has(e)?t.lsItemsById:t.itemsById,o=Object.assign(GF(e),i[e]);n("setItem",{...GF(e),data:"object"==typeof r?{...o.data,...r}:r})},ZF=(e,t,n,r,i)=>{const o=r.layoutSettings[e],a={[e]:void 0===t?!o:!!t};a[e]!==o&&(i("patchLayoutSettings",a),OF.addBadge(n))},JF=(e,t)=>({getters:n,dispatch:r},i)=>ZF(e,i,t,n,r),QF=(e,t)=>document.body.clientWidth<e.editorMinWidth+e.explorerWidth+e.sideBarWidth+e.buttonBarWidth+(t?e.gutterWidth:0),eO=(e,t,n="\n")=>({name:e,value:t,helpers:n,isAdditional:!0}),tO={plainText:eO("Markdown","{{{files.0.content.text}}}"),plainHtml:eO("HTML","{{{files.0.content.html}}}\n"),styledHtml:eO("HTML",'<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>{{files.0.name}}</title>\n  <link rel="stylesheet" href="https://stackedit.cn/style.css" />\n</head>\n\n{{#if pdf}}\n<body class="stackedit stackedit--pdf">\n{{else}}\n<body class="stackedit">\n{{/if}}\n  <div class="stackedit__html">{{{files.0.content.html}}}</div>\n</body>\n\n</html>\n'),styledHtmlWithToc:eO("HTML",'<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>{{files.0.name}}</title>\n  <link rel="stylesheet" href="https://stackedit.cn/style.css" />\n</head>\n\n{{#if pdf}}\n<body class="stackedit stackedit--pdf">\n{{else}}\n<body class="stackedit">\n{{/if}}\n  <div class="stackedit__left">\n    <div class="stackedit__toc">\n      {{#tocToHtml files.0.content.toc 2}}{{/tocToHtml}}\n    </div>\n  </div>\n  <div class="stackedit__right">\n    <div class="stackedit__html">\n      {{{files.0.content.html}}}\n    </div>\n  </div>\n</body>\n\n</html>\n'),styledHtmlWithTheme:eO("HTML",'<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>{{files.0.name}}</title>\n  <link rel="stylesheet" href="https://stackedit.cn/style.css" />\n  <style type="text/css">\n    .app--dark {\n      background-color: #444;\n    }\n    .app--dark .stackedit__html {\n      padding-left: 0;\n      padding-right: 0;\n    }\n    .app--dark .stackedit__content {\n      padding: 1px 20px 20px;\n    }\n    {{{files.0.content.themeStyleContent}}}\n  </style>\n</head>\n\n{{#if pdf}}\n<body class="stackedit stackedit--pdf">\n{{else}}\n<body class="stackedit {{{files.0.content.colorThemeClass}}}">\n{{/if}}\n  <div class="stackedit__html">\n    <div class="stackedit__content {{{files.0.content.themeClass}}}">\n      {{{files.0.content.html}}}\n    </div>\n  </div>\n</body>\n\n</html>\n'),styledHtmlWithThemeAndToc:eO("HTML",'<!DOCTYPE html>\n<html>\n\n<head>\n  <meta charset="utf-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>{{files.0.name}}</title>\n  <link rel="stylesheet" href="https://stackedit.cn/style.css" />\n  <style type="text/css">\n    .app--dark {\n      background-color: #444;\n    }\n    .app--dark .stackedit__html {\n      padding-left: 0;\n      padding-right: 0;\n    }\n    .app--dark .stackedit__content {\n      padding: 1px 20px 20px;\n    }\n    {{{files.0.content.themeStyleContent}}}\n  </style>\n</head>\n\n{{#if pdf}}\n<body class="stackedit stackedit--pdf">\n{{else}}\n<body class="stackedit {{{files.0.content.colorThemeClass}}}">\n{{/if}}\n  <div class="stackedit__left">\n    <div class="stackedit__toc">\n      {{#tocToHtml files.0.content.toc 2}}{{/tocToHtml}}\n    </div>\n  </div>\n  <div class="stackedit__right">\n    <div class="stackedit__html">\n      <div class="stackedit__content {{{files.0.content.themeClass}}}">\n        {{{files.0.content.html}}}\n      </div>\n    </div>\n  </div>\n</body>\n\n</html>\n'),jekyllSite:eO("Jekyll site","---\n{{{files.0.content.yamlProperties}}}\n---\n\n{{{files.0.content.html}}}\n")},nO=e=>({getters:t,dispatch:n},r)=>{n("patchTokensByType",{[e]:{...t[`${e}TokensBySub`],[r.sub]:r}})},rO={namespaced:!0,state:ct({
// Data items stored in the DB
itemsById:{},
// Data items stored in the localStorage
lsItemsById:{}}),mutations:{setItem:({itemsById:e,lsItemsById:t},n)=>{const r=GF(n.id),i="object"==typeof n.data?Object.assign(r.data,n.data):n.data,o=UL.addItemHash({...r,data:i});VF.has(o.id)?t[o.id]=o:e[o.id]=o},deleteItem({itemsById:e},t){delete e[item.id]}},getters:{serverConf:YF("serverConf"),workspaces:YF("workspaces"),
// Not to be used, prefer workspace/workspacesById
settings:YF("settings"),computedSettings:(e,{settings:t})=>{const n=xL.load(t),r=xL.load($F),i=(e,t)=>{const n=Object.prototype.toString.call(e);return n!==Object.prototype.toString.call(t)?e:"[object Object]"!==n?t:(Object.keys(e).forEach((n=>{e[n]="shortcuts"===n?Object.assign(e[n],t[n]):i(e[n],t[n])})),e)};return i(r,n)},localSettings:YF("localSettings"),layoutSettings:YF("layoutSettings"),templatesById:YF("templates"),allTemplatesById:(e,{templatesById:t})=>({...t,...tO}),lastCreated:YF("lastCreated"),lastOpened:YF("lastOpened"),lastOpenedIds:(e,{lastOpened:t},n)=>{const r={...t},i=n.file.currentId;return i&&!r[i]&&(r[i]=Date.now()),Object.keys(r).filter((e=>n.file.itemsById[e])).sort(((e,t)=>r[t]-r[e])).slice(0,20)},syncDataById:YF("syncData"),syncDataByItemId:(e,{syncDataById:t},n,r)=>{const i={};return r["workspace/currentWorkspaceIsGit"]?Object.entries(r.gitPathsByItemId).forEach((([e,n])=>{const r=t[n];r&&(i[e]=r)})):Object.entries(t).forEach((([,e])=>{i[e.itemId]=e})),i},dataSyncDataById:YF("dataSyncData"),tokensByType:YF("tokens"),googleTokensBySub:(e,{tokensByType:t})=>t.google||{},couchdbTokensBySub:(e,{tokensByType:t})=>t.couchdb||{},dropboxTokensBySub:(e,{tokensByType:t})=>t.dropbox||{},githubTokensBySub:(e,{tokensByType:t})=>t.github||{},giteeTokensBySub:(e,{tokensByType:t})=>t.gitee||{},gitlabTokensBySub:(e,{tokensByType:t})=>t.gitlab||{},giteaTokensBySub:(e,{tokensByType:t})=>t.gitea||{},wordpressTokensBySub:(e,{tokensByType:t})=>t.wordpress||{},zendeskTokensBySub:(e,{tokensByType:t})=>t.zendesk||{},smmsTokensBySub:(e,{tokensByType:t})=>t.smms||{},customTokensBySub:(e,{tokensByType:t})=>t.custom||{},badgeCreations:YF("badgeCreations"),badgeTree:(e,{badgeCreations:t})=>HF.map((e=>e.toBadge(t))),allBadges:(e,{badgeTree:t})=>{const n=[],r=e=>e.forEach((e=>{n.push(e),e.children&&r(e.children)}));return r(t),n}},actions:{setServerConf:KF("serverConf"),setSettings:KF("settings"),switchThemeSetting:({commit:e,getters:t})=>{const n=t.settings;let{colorTheme:r}=t.computedSettings;r=r&&"light"!==r?"light":"dark";const i=`colorTheme: ${r}`;let o=n&&n.trim()||"# ";o=o.indexOf("colorTheme:")>-1?o.replace(/.*colorTheme:.*/,i):`${o}\n${i}`,e("setItem",WF("settings",o)),OF.addBadge("switchTheme")},patchLocalSettings:XF("localSettings"),patchLayoutSettings:XF("layoutSettings"),toggleNavigationBar:JF("showNavigationBar","toggleNavigationBar"),toggleEditor:JF("showEditor","toggleEditor"),toggleSidePreview:JF("showSidePreview","toggleSidePreview"),toggleStatusBar:JF("showStatusBar","toggleStatusBar"),toggleScrollSync:JF("scrollSync","toggleScrollSync"),toggleFocusMode:JF("focusMode","toggleFocusMode"),toggleSideBar:({getters:e,dispatch:t,rootGetters:n},r)=>{t("setSideBarPanel"),ZF("showSideBar",r,"toggleSideBar",e,t),e.layoutSettings.showSideBar&&QF(n["layout/constants"],n["discussion/currentDiscussion"])&&t("patchLayoutSettings",{showExplorer:!1})},toggleExplorer:({getters:e,dispatch:t,rootGetters:n},r)=>{ZF("showExplorer",r,"toggleExplorer",e,t),e.layoutSettings.showExplorer&&QF(n["layout/constants"],n["discussion/currentDiscussion"])&&t("patchLayoutSettings",{showSideBar:!1})},setSideBarPanel:({dispatch:e},t)=>e("patchLayoutSettings",{sideBarPanel:void 0===t?"menu":t}),setTemplatesById:({commit:e},t)=>{const n={...t};Object.keys(tO).forEach((e=>{delete n[e]})),e("setItem",WF("templates",n))},setLastCreated:KF("lastCreated"),setLastOpenedId:({getters:e,commit:t,rootState:n},r)=>{const i={...e.lastOpened};i[r]=Date.now();const o={};Object.entries(i).forEach((([e,t])=>{n.file.itemsById[e]&&(o[e]=t)})),t("setItem",WF("lastOpened",o))},setSyncDataById:KF("syncData"),patchSyncDataById:XF("syncData"),patchDataSyncDataById:XF("dataSyncData"),patchTokensByType:XF("tokens"),addGoogleToken:nO("google"),addCouchdbToken:nO("couchdb"),addDropboxToken:nO("dropbox"),addGithubToken:nO("github"),addGiteeToken:nO("gitee"),addGitlabToken:nO("gitlab"),addGiteaToken:nO("gitea"),addWordpressToken:nO("wordpress"),addZendeskToken:nO("zendesk"),patchBadgeCreations:XF("badgeCreations"),addSmmsToken:nO("smms"),addCustomToken:nO("custom")}},iO=Object.create(null),oO=3e4;let aO=!1;let sO=0,lO=0,cO=!1,uO=!1;function hO(e){const t=e.getAllResponseHeaders().trim().split("\n"),n={};return t.forEach((e=>{const t=e.trim().split(":"),r=t.shift().trim().toLowerCase(),i=t.join(":").trim();n[r]=i})),n}const dO={async init(){const e=()=>{sO=Date.now()};window.document.addEventListener("mousedown",e),window.document.addEventListener("keydown",e),window.document.addEventListener("touchstart",e),lO=0;const t=()=>{lO=Date.now(),localStorage.setItem(_H.getters["workspace/lastFocusKey"],lO),e()};document.hasFocus()&&t(),window.addEventListener("focus",t);const n=async()=>{const e=!1===window.navigator.onLine;if(!e&&_H.state.lastOfflineCheck+oO+5e3<Date.now()&&this.isUserActive()){_H.commit("updateLastOfflineCheck");const e=document.createElement("script");let t;try{await new Promise(((n,r)=>{e.onload=n,e.onerror=r,e.src=`https://res.wx.qq.com/open/js/jweixin-1.2.0.js?${Date.now()}`;try{document.head.appendChild(e),t=setTimeout(r,oO)}catch(i7){r(i7)}})),aO=!1}catch(i7){aO=!0}finally{clearTimeout(t),document.head.removeChild(e)}}const t=e||aO;_H.state.offline!==t&&(_H.commit("setOffline",t),t?_H.dispatch("notification/error",""):(_H.dispatch("notification/info",""),this.getServerConf()))};UL.setInterval(n,1e3),window.addEventListener("online",(()=>{aO=!1,n()})),window.addEventListener("offline",n),await n(),this.getServerConf()},async getServerConf(){if(!_H.state.offline&&!cO&&!uO)try{cO=!0;const e=await this.request({url:"conf"});await _H.dispatch("data/setServerConf",e.body),uO=!0}finally{cO=!1}},isWindowFocused(){const e=localStorage.getItem(_H.getters["workspace/lastFocusKey"]);return parseInt(e,10)===lO},isUserActive(){return sO>Date.now()-18e4&&this.isWindowFocused()},isConfLoaded:()=>!!Object.keys(_H.getters["data/serverConf"]).length,loadScript:async e=>(iO[e]||(iO[e]=new Promise(((t,n)=>{const r=document.createElement("script");r.onload=t,r.onerror=()=>{iO[e]=null,n()},r.src=e,document.head.appendChild(r)}))),iO[e]),async startOauth2(e,t={},n=!1,r=!1){try{const i=UL.uid(),o=UL.addQueryParams(e,{...t,state:i,redirect_uri:ML.oauth2RedirectUri});let a,s,l,c,u;if(n)a=UL.createHiddenIframe(o),document.body.appendChild(a),s=a.contentWindow;else if(s=window.open(o),!s)throw new Error("The authorize window was blocked.");try{return await new Promise(((e,t)=>{n?(a.onerror=()=>{t(new Error("Unknown error."))},c=setTimeout((()=>{r?(aO=!0,_H.commit("setOffline",!0),_H.commit("updateLastOfflineCheck"),t(new Error("You are offline."))):t(new Error("REATTEMPT"))}),15e3)):c=setTimeout((()=>{t(new Error("Timeout."))}),36e4),u=n=>{if(n.source===s&&n.origin===ML.origin){const r=UL.parseQueryParams(`${n.data}`.slice(1));r.error||r.state!==i?t(new Error("Could not get required authorization.")):e({accessToken:r.access_token,code:r.code,idToken:r.id_token,expiresIn:r.expires_in})}},window.addEventListener("message",u),n||(l=setInterval((()=>{s.closed&&t(new Error("Authorize window was closed."))}),250))}))}finally{clearInterval(l),n||s.closed||s.close(),a&&document.body.removeChild(a),clearTimeout(c),window.removeEventListener("message",u)}}catch(i7){if("REATTEMPT"===i7.message)return this.startOauth2(e,t,n,!0);throw i7}},async request(e,t=!1){let n=500;const r=Object.assign({},e);if(r.timeout=r.timeout||oO,r.headers=Object.assign({},r.headers),r.body&&"object"==typeof r.body)r.body=JSON.stringify(r.body),r.headers["Content-Type"]="application/json";else if(r.formData){const e=new FormData;Object.keys(r.formData).forEach((t=>{const n=r.formData[t];e.append(t,n)})),r.formData=e}const i=async()=>{try{return await new Promise(((e,n)=>{t&&_H.commit("updateLastOfflineCheck");const i=new window.XMLHttpRequest;i.withCredentials=r.withCredentials||!1;const o=setTimeout((()=>{i.abort(),t?(aO=!0,_H.commit("setOffline",!0),n(new Error("You are offline."))):n(new Error("Network request timeout."))}),r.timeout);i.onload=()=>{t&&(aO=!1),clearTimeout(o);const a={status:i.status,headers:hO(i),body:r.blob?i.response:i.responseText};if(!r.raw&&!r.blob)try{a.body=JSON.parse(a.body)}catch(i7){}a.status>=200&&a.status<300?e(a):n(a)},i.onerror=()=>{clearTimeout(o),t?(aO=!0,_H.commit("setOffline",!0),n(new Error("You are offline."))):n(new Error("Network request failed."))};const a=UL.addQueryParams(r.url,r.params);i.open(r.method||"GET",a),Object.entries(r.headers).forEach((([e,t])=>{t&&i.setRequestHeader(e,`${t}`)})),r.blob&&(i.responseType="blob"),i.send(r.body||r.formData||null)}))}catch(e){if(function(e){if(403===e.status){const t=((((e.body||{}).error||{}).errors||[])[0]||{}).reason;return"rateLimitExceeded"===t||"userRateLimitExceeded"===t}return 429===e.status||e.status>=500&&e.status<600}(e)&&n<1e4)return await new Promise((e=>{setTimeout(e,n),n*=2})),i();throw e}};return i()}},pO={},fO={},mO={},gO={},vO={},yO=e=>{const t=":"===e[2]&&e.slice(0,2);return mO[t]?e:`go:${e}`},bO=e=>[mO[e.slice(0,2)],e.slice(3)],_O=()=>{_H.state.offline||Object.entries(gO).filter((([e,t])=>0===t&&!vO[e])).forEach((async([e])=>{const[t,n]=bO(e),r=pO[t];if(r)try{vO[e]=!0;const t=await r(n);_H.commit("userInfo/setItem",t)}finally{vO[e]=!1,gO[e]=Date.now()}}))},wO={setInfoResolver(e,t,n){pO[e]=n,fO[e]=t,mO[t]=e},getCurrentUserId(){const e=_H.getters["workspace/loginToken"];if(!e)return null;const t=_H.getters["workspace/loginType"],n=fO[t];return n?`${n}:${e.sub}`:e.sub},sanitizeUserId:yO,addUserInfo(e){_H.commit("userInfo/setItem",e),gO[e.id]=Date.now()},addUserId(e){if(e){const t=yO(e),n=gO[t];if(void 0===n){const[e,n]=bO(t),r=_H.getters["data/tokensByType"][e][n];r&&_H.commit("userInfo/setItem",{id:t,name:r.name})}(void 0===n||n+36e5<Date.now())&&(gO[t]=0,_O())}}};UL.setInterval((()=>_O()),6e4);const kO="stackedit-app-data",xO=(e,t)=>dO.request({...t,headers:{...t.headers||{}},params:{...t.params||{},t:Date.now(),
// Prevent from caching
access_token:e.accessToken}}),CO=(e,t,n,r)=>xO(e,{...r,url:`https://gitee.com/api/v5/repos/${encodeURIComponent(t)}/${encodeURIComponent(n)}/${r.url}`}).then((e=>e.body)),SO=(e,t)=>_H.getters["data/computedSettings"].git[e].replace(/{{path}}/g,t),TO="ge";wO.setInfoResolver("gitee",TO,(async e=>{try{const t=(await dO.request({url:`https://gitee.com/api/v5/users/${e}`,params:{t:Date.now()}})).body;return t.avatar_url&&t.avatar_url.endsWith(".png")&&!t.avatar_url.endsWith("no_portrait.png")&&(t.avatar_url=`${t.avatar_url}!avatar60`),{id:`${TO}:${t.login}`,name:t.login,imageUrl:t.avatar_url||""}}catch(t){if(404!==t.status)throw new Error("RETRY");throw t}}));const EO={subPrefix:TO,
/**
   * https://developer.gitee.com/apps/building-oauth-apps/authorization-options-for-oauth-apps/
   */
async startOauth2(e,t=!1,n,r){let i;if(t)i=(await dO.request({method:"POST",url:"https://gitee.com/oauth/token",params:{grant_type:"refresh_token",refresh_token:e.refreshToken}})).body;else{const e=(await dO.request({method:"GET",url:"giteeClientId",params:{random:r}})).body,{code:n}=await dO.startOauth2("https://gitee.com/oauth/authorize",{client_id:e,scope:"projects pull_requests",response_type:"code"},t);i=(await dO.request({method:"GET",url:"oauth2/giteeToken",params:{clientId:e,code:n,oauth2RedirectUri:ML.oauth2RedirectUri}})).body}const o=i.access_token;let a=null;try{a=(await dO.request({method:"GET",url:"https://gitee.com/api/v5/user",params:{access_token:o}})).body}catch(c){throw 401===c.status&&this.startOauth2(null,!1,n,1),c}a.avatar_url&&a.avatar_url.endsWith(".png")&&!a.avatar_url.endsWith("no_portrait.png")&&(a.avatar_url=`${a.avatar_url}!avatar60`),wO.addUserInfo({id:`${TO}:${a.login}`,name:a.login,imageUrl:a.avatar_url||""});const s=_H.getters["data/giteeTokensBySub"][a.login],l={accessToken:o,
//  
isLogin:!!n||s&&!!s.isLogin,refreshToken:i.refresh_token,expiresOn:Date.now()+1e3*i.expires_in,name:a.login,sub:`${a.login}`};return n&&(l.providerId="giteeAppData",await this.checkAndCreateRepo(l)),_H.dispatch("data/addGiteeToken",l),l},
// token
async refreshToken(e){const{sub:t}=e,n=_H.getters["data/giteeTokensBySub"][t];if(!n.expiresOn)return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitee"}),this.startOauth2();if(n.expiresOn>Date.now()+3e5)return n;try{return await this.startOauth2(n,!0)}catch(r){if(_H.state.offline)throw r;return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitee"}),this.startOauth2()}},signin(){return this.startOauth2(null,!1,!0)},async addAccount(){const e=await this.startOauth2();return OF.addBadge("addGiteeAccount"),e},
/**
   * https://developer.gitee.com/v3/repos/commits/#get-a-single-commit
   * https://developer.gitee.com/v3/git/trees/#get-a-tree
   */
async getTree({token:e,owner:t,repo:n,branch:r}){try{const i=await this.refreshToken(e),{commit:o}=await CO(i,t,n,{url:`commits/${encodeURIComponent(r)}`}),{tree:a,truncated:s}=await CO(i,t,n,{url:`git/trees/${encodeURIComponent(o.tree.sha)}?recursive=1`});if(s)throw new Error("Git tree too big. Please remove some files in the repository.");return a}catch(i){throw 401===i.status&&this.startOauth2(null,!1,null,1),i}},async checkAndCreateRepo(e){const t=`https://gitee.com/api/v5/repos/${encodeURIComponent(e.name)}/${encodeURIComponent(kO)}`;try{await xO(e,{url:t})}catch(n){if(404!==n.status)throw n;await xO(e,{method:"POST",url:"https://gitee.com/api/v5/user/repos",params:{name:kO,auto_init:!0}})}},
/**
   * https://developer.gitee.com/v3/repos/commits/#list-commits-on-a-repository
   */
async getCommits({token:e,owner:t,repo:n,sha:r,path:i}){const o=await this.refreshToken(e);return CO(o,t,n,{url:"commits",params:{sha:r,path:i}})},
/**
   * https://developer.gitee.com/v3/repos/contents/#create-a-file
   * https://developer.gitee.com/v3/repos/contents/#update-a-file
   */
async uploadFile({token:e,owner:t,repo:n,branch:r,path:i,content:o,sha:a,isImg:s,commitMessage:l}){if(!i||i.endsWith("undefined"))return new Promise((e=>{e({res:{content:{sha:null}}})}));let c=o;s&&"string"!=typeof o&&(c=await UL.encodeFiletoBase64(o));const u=await this.refreshToken(e);return CO(u,t,n,{method:a?"PUT":"POST",url:`contents/${encodeURIComponent(i)}`,body:{message:l||SO(a?"updateFileMessage":"createFileMessage",i),content:s?c:UL.encodeBase64(o||" "),sha:a,branch:r}})},
/**
   * https://developer.gitee.com/v3/repos/contents/#delete-a-file
   */
async removeFile({token:e,owner:t,repo:n,branch:r,path:i,sha:o}){const a=await this.refreshToken(e);return CO(a,t,n,{method:"DELETE",url:`contents/${encodeURIComponent(i)}`,body:{message:SO("deleteFileMessage",i),sha:o,branch:r}})},
/**
   * https://developer.gitee.com/v3/repos/contents/#get-contents
   */
async downloadFile({token:e,owner:t,repo:n,branch:r,path:i,isImg:o}){const a=await this.refreshToken(e),{sha:s,content:l}=await CO(a,t,n,{url:`contents/${encodeURIComponent(i)}`,params:{ref:r}});if(s){const e=o?l:UL.decodeBase64(l);return{sha:s,data:" "===e?"":e}}return{}},
/**
   * https://gitee.com/api/v5/swagger#/postV5Gists
   * https://gitee.com/api/v5/swagger#/patchV5GistsId
   */
async uploadGist({token:e,description:t,filename:n,content:r,isPublic:i,gistId:o}){const{body:a}=await xO(e,o?{method:"PATCH",url:`https://gitee.com/api/v5/gists/${o}`,body:{description:t,files:{[n]:{content:r}}}}:{method:"POST",url:"https://gitee.com/api/v5/gists",body:{description:t,files:{[n]:{content:r}},public:i}});return a},
/**
   * https://gitee.com/api/v5/swagger#/getV5Gists
   */
async downloadGist({token:e,gistId:t,filename:n}){const r=(await xO(e,{url:`https://api.github.com/gists/${t}`})).body.files[n];if(!r)throw new Error("Gist file not found.");return r.content},
/**
   * https://gitee.com/api/v5/swagger#/getV5GistsIdCommits
   */
async getGistCommits({token:e,gistId:t}){const{body:n}=await xO(e,{url:`https://gitee.com/api/v5/gists/${t}/commits`});return n}},IO="stackedit-app-data",AO=(e,t)=>dO.request({...t,headers:{...t.headers||{},Authorization:`token ${e.accessToken}`},params:{...t.params||{},t:Date.now()}}),DO=(e,t,n,r)=>AO(e,{...r,url:`https://api.github.com/repos/${encodeURIComponent(t)}/${encodeURIComponent(n)}/${r.url}`}).then((e=>e.body)),BO=(e,t)=>_H.getters["data/computedSettings"].git[e].replace(/{{path}}/g,t),LO="gh";wO.setInfoResolver("github",LO,(async e=>{try{const t=(await dO.request({url:`https://api.github.com/user/${e}`,params:{t:Date.now()}})).body;return{id:`${LO}:${t.id}`,name:t.login,imageUrl:t.avatar_url||""}}catch(t){if(404!==t.status)throw new Error("RETRY");throw t}}));const MO={subPrefix:LO,
/**
   * https://developer.github.com/apps/building-oauth-apps/authorization-options-for-oauth-apps/
   */
async startOauth2(e,t=null,n=!1,r){await dO.getServerConf();const i=_H.getters["data/serverConf"].githubClientId,{code:o}=await dO.startOauth2("https://github.com/login/oauth/authorize",{client_id:i,scope:e.join(" ")},n),a=(await dO.request({method:"GET",url:"oauth2/githubToken",params:{clientId:i,code:o}})).body,s=(await dO.request({method:"GET",url:"https://api.github.com/user",headers:{Authorization:`Bearer ${a}`}})).body;if(wO.addUserInfo({id:`${LO}:${s.id}`,name:s.login,imageUrl:s.avatar_url||""}),t&&`${s.id}`!==t)throw new Error("GitHub account ID not expected.");const l=_H.getters["data/githubTokensBySub"][s.id],c={scopes:e,accessToken:a,
//  
isLogin:!!r||l&&!!l.isLogin,name:s.login,sub:`${s.id}`,imgStorages:l&&l.imgStorages,repoFullAccess:e.includes("repo")};return r&&(c.providerId="githubAppData",await this.checkAndCreateRepo(c)),_H.dispatch("data/addGithubToken",c),c},signin(){return this.startOauth2(["repo","gist"],null,!1,!0)},async addAccount(e=!1){const t=await this.startOauth2((e=>[e.repoFullAccess?"repo":"public_repo","gist"])({repoFullAccess:e}));return OF.addBadge("addGitHubAccount"),t},
/**
   * https://developer.github.com/v3/repos/commits/#get-a-single-commit
   * https://developer.github.com/v3/git/trees/#get-a-tree
   */
async getTree({token:e,owner:t,repo:n,branch:r}){const{commit:i}=await DO(e,t,n,{url:`commits/${encodeURIComponent(r)}`}),{tree:o,truncated:a}=await DO(e,t,n,{url:`git/trees/${encodeURIComponent(i.tree.sha)}?recursive=1`});if(a)throw new Error("Git tree too big. Please remove some files in the repository.");return o},async checkAndCreateRepo(e){const t=`https://api.github.com/repos/${encodeURIComponent(e.name)}/${encodeURIComponent(IO)}`;try{await AO(e,{url:t})}catch(n){if(404!==n.status)throw n;await AO(e,{method:"POST",url:"https://api.github.com/repos/mafgwo/stackedit-appdata-template/generate",body:{owner:e.name,name:IO,description:"StackEdit.",include_all_branches:!1,private:!0}})}},
/**
   * https://developer.github.com/v3/repos/commits/#list-commits-on-a-repository
   */
async getCommits({token:e,owner:t,repo:n,sha:r,path:i,tryTimes:o}){let a=o||1;try{return DO(e,t,n,{url:"commits",params:{sha:r,path:i}})}catch(s){if(a<=3&&409===s.status&&n===IO)return a+=1,this.getCommits({token:e,owner:t,repo:n,sha:r,path:i,tryTimes:a});throw s}},
/**
   * https://developer.github.com/v3/repos/contents/#create-a-file
   * https://developer.github.com/v3/repos/contents/#update-a-file
   */
async uploadFile({token:e,owner:t,repo:n,branch:r,path:i,content:o,sha:a,isImg:s,commitMessage:l}){if(!i||i.endsWith("undefined"))return new Promise((e=>{e({res:{content:{sha:null}}})}));let c=o;return s&&"string"!=typeof o&&(c=await UL.encodeFiletoBase64(o)),DO(e,t,n,{method:"PUT",url:`contents/${encodeURIComponent(i)}`,body:{message:l||BO(a?"updateFileMessage":"createFileMessage",i),content:s?c:UL.encodeBase64(o),sha:a,branch:r}})},
/**
   * https://developer.github.com/v3/repos/contents/#delete-a-file
   */
removeFile:async({token:e,owner:t,repo:n,branch:r,path:i,sha:o})=>DO(e,t,n,{method:"DELETE",url:`contents/${encodeURIComponent(i)}`,body:{message:BO("deleteFileMessage",i),sha:o,branch:r}}),
/**
   * https://developer.github.com/v3/repos/contents/#get-contents
   */
async downloadFile({token:e,owner:t,repo:n,branch:r,path:i,isImg:o}){try{const{sha:a,content:s,encoding:l}=await DO(e,t,n,{url:`contents/${encodeURIComponent(i)}`,params:{ref:r}});let c=s;if(o&&"none"===l){c=(await DO(e,t,n,{url:`git/blobs/${a}`})).content}return{sha:a,data:o?c:UL.decodeBase64(c)}}catch(a){if(404===a.status&&i.indexOf(".stackedit-data")>=0)return{};throw a}},
/**
   * 
   */
getRepoInfo:async(e,t,n)=>AO(e,{url:`https://api.github.com/repos/${encodeURIComponent(t)}/${encodeURIComponent(n)}`}).then((e=>e.body)),async updateToken(e,t){const n=e.imgStorages||[],r=UL.hash(`${t.owner}${t.repo}${t.path}${t.branch}`),i=n.filter((e=>e.sid===r));i&&i.length>0?(i.owner=t.owner,i.repo=t.repo,i.path=t.path,i.branch=t.branch):(n.push({sid:r,owner:t.owner,repo:t.repo,path:t.path,branch:t.branch}),e.imgStorages=n),_H.dispatch("data/addGithubToken",e)},async removeTokenImgStorage(e,t){e.imgStorages&&0!==e.imgStorages.length&&(e.imgStorages=e.imgStorages.filter((e=>e.sid!==t)),_H.dispatch("data/addGithubToken",e))},
/**
   * https://developer.github.com/v3/gists/#create-a-gist
   * https://developer.github.com/v3/gists/#edit-a-gist
   */
async uploadGist({token:e,description:t,filename:n,content:r,isPublic:i,gistId:o}){const{body:a}=await AO(e,o?{method:"PATCH",url:`https://api.github.com/gists/${o}`,body:{description:t,files:{[n]:{content:r}}}}:{method:"POST",url:"https://api.github.com/gists",body:{description:t,files:{[n]:{content:r}},public:i}});return a},
/**
   * https://developer.github.com/v3/gists/#get-a-single-gist
   */
async downloadGist({token:e,gistId:t,filename:n}){const r=(await AO(e,{url:`https://api.github.com/gists/${t}`})).body.files[n];if(!r)throw new Error("Gist file not found.");return r.content},
/**
   * https://developer.github.com/v3/gists/#list-gist-commits
   */
async getGistCommits({token:e,gistId:t}){const{body:n}=await AO(e,{url:`https://api.github.com/gists/${t}/commits`});return n},
/**
   * https://developer.github.com/v3/gists/#get-a-specific-revision-of-a-gist
   */
async downloadGistRevision({token:e,gistId:t,filename:n,sha:r}){const i=(await AO(e,{url:`https://api.github.com/gists/${t}/${r}`})).body.files[n];if(!i)throw new Error("Gist file not found.");return i.content}};var FO={exports:{}};function OO(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var PO={exports:{}};const NO=_o(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var jO;function zO(){return jO||(jO=1,PO.exports=(e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==yo&&yo.crypto&&(n=yo.crypto),!n)try{n=NO}catch(m){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(m){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(m){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},a=o.lib={},s=a.Base=function(){return{
/**
             * Creates a new object that inherits from this object.
             *
             * @param {Object} overrides Properties to copy into the new object.
             *
             * @return {Object} The new object.
             *
             * @static
             *
             * @example
             *
             *     var MyType = CryptoJS.lib.Base.extend({
             *         field: 'value',
             *
             *         method: function () {
             *         }
             *     });
             */
extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},
/**
             * Extends this object and runs the init method.
             * Arguments to create() will be passed to init().
             *
             * @return {Object} The new object.
             *
             * @static
             *
             * @example
             *
             *     var instance = MyType.create();
             */
create:function(){var e=this.extend();return e.init.apply(e,arguments),e},
/**
             * Initializes a newly created object.
             * Override this method to add some logic when your objects are created.
             *
             * @example
             *
             *     var MyType = CryptoJS.lib.Base.extend({
             *         init: function () {
             *             // ...
             *         }
             *     });
             */
init:function(){},
/**
             * Copies properties into this object.
             *
             * @param {Object} properties The properties to mix in.
             *
             * @example
             *
             *     MyType.mixIn({
             *         field: 'value'
             *     });
             */
mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},
/**
             * Creates a copy of this object.
             *
             * @return {Object} The clone.
             *
             * @example
             *
             *     var clone = instance.clone();
             */
clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=s.extend({
/**
           * Initializes a newly created word array.
           *
           * @param {Array} words (Optional) An array of 32-bit words.
           * @param {number} sigBytes (Optional) The number of significant bytes in the words.
           *
           * @example
           *
           *     var wordArray = CryptoJS.lib.WordArray.create();
           *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);
           *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);
           */
init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},
/**
           * Converts this word array to a string.
           *
           * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex
           *
           * @return {string} The stringified word array.
           *
           * @example
           *
           *     var string = wordArray + '';
           *     var string = wordArray.toString();
           *     var string = wordArray.toString(CryptoJS.enc.Utf8);
           */
toString:function(e){return(e||u).stringify(this)},
/**
           * Concatenates a word array to this word array.
           *
           * @param {WordArray} wordArray The word array to append.
           *
           * @return {WordArray} This word array.
           *
           * @example
           *
           *     wordArray1.concat(wordArray2);
           */
concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},
/**
           * Removes insignificant bits.
           *
           * @example
           *
           *     wordArray.clamp();
           */
clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},
/**
           * Creates a copy of this word array.
           *
           * @return {WordArray} The clone.
           *
           * @example
           *
           *     var clone = wordArray.clone();
           */
clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},
/**
           * Creates a word array filled with random bytes.
           *
           * @param {number} nBytes The number of random bytes to generate.
           *
           * @return {WordArray} The random word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.lib.WordArray.random(16);
           */
random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new l.init(t,e)}}),c=o.enc={},u=c.Hex={
/**
           * Converts a word array to a hex string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The hex string.
           *
           * @static
           *
           * @example
           *
           *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);
           */
stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},
/**
           * Converts a hex string to a word array.
           *
           * @param {string} hexStr The hex string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Hex.parse(hexString);
           */
parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},h=c.Latin1={
/**
           * Converts a word array to a Latin1 string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The Latin1 string.
           *
           * @static
           *
           * @example
           *
           *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);
           */
stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},
/**
           * Converts a Latin1 string to a word array.
           *
           * @param {string} latin1Str The Latin1 string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);
           */
parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},d=c.Utf8={
/**
           * Converts a word array to a UTF-8 string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The UTF-8 string.
           *
           * @static
           *
           * @example
           *
           *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);
           */
stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(i7){throw new Error("Malformed UTF-8 data")}},
/**
           * Converts a UTF-8 string to a word array.
           *
           * @param {string} utf8Str The UTF-8 string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);
           */
parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=s.extend({
/**
           * Resets this block algorithm's data buffer to its initial state.
           *
           * @example
           *
           *     bufferedBlockAlgorithm.reset();
           */
reset:function(){this._data=new l.init,this._nDataBytes=0},
/**
           * Adds new data to this block algorithm's buffer.
           *
           * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.
           *
           * @example
           *
           *     bufferedBlockAlgorithm._append('data');
           *     bufferedBlockAlgorithm._append(wordArray);
           */
_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},
/**
           * Processes available data blocks.
           *
           * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.
           *
           * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.
           *
           * @return {WordArray} The processed data.
           *
           * @example
           *
           *     var processedData = bufferedBlockAlgorithm._process();
           *     var processedData = bufferedBlockAlgorithm._process(!!'flush');
           */
_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,o);if(c){for(var h=0;h<c;h+=a)this._doProcessBlock(i,h);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},
/**
           * Creates a copy of this object.
           *
           * @return {Object} The clone.
           *
           * @example
           *
           *     var clone = bufferedBlockAlgorithm.clone();
           */
clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({
/**
           * Configuration options.
           */
cfg:s.extend(),
/**
           * Initializes a newly created hasher.
           *
           * @param {Object} cfg (Optional) The configuration options to use for this hash computation.
           *
           * @example
           *
           *     var hasher = CryptoJS.algo.SHA256.create();
           */
init:function(e){this.cfg=this.cfg.extend(e),this.reset()},
/**
           * Resets this hasher to its initial state.
           *
           * @example
           *
           *     hasher.reset();
           */
reset:function(){p.reset.call(this),this._doReset()},
/**
           * Updates this hasher with a message.
           *
           * @param {WordArray|string} messageUpdate The message to append.
           *
           * @return {Hasher} This hasher.
           *
           * @example
           *
           *     hasher.update('message');
           *     hasher.update(wordArray);
           */
update:function(e){return this._append(e),this._process(),this},
/**
           * Finalizes the hash computation.
           * Note that the finalize operation is effectively a destructive, read-once operation.
           *
           * @param {WordArray|string} messageUpdate (Optional) A final message update.
           *
           * @return {WordArray} The hash.
           *
           * @example
           *
           *     var hash = hasher.finalize();
           *     var hash = hasher.finalize('message');
           *     var hash = hasher.finalize(wordArray);
           */
finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,
/**
           * Creates a shortcut function to a hasher's object interface.
           *
           * @param {Hasher} hasher The hasher to create a helper for.
           *
           * @return {Function} The shortcut function.
           *
           * @static
           *
           * @example
           *
           *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);
           */
_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},
/**
           * Creates a shortcut function to the HMAC's object interface.
           *
           * @param {Hasher} hasher The hasher to use in this HMAC helper.
           *
           * @return {Function} The shortcut function.
           *
           * @static
           *
           * @example
           *
           *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);
           */
_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=o.algo={};return o}(Math),e)),PO.exports;var e}var RO,qO={exports:{}};function $O(){return RO||(RO=1,qO.exports=(a=zO(),n=(t=a).lib,r=n.Base,i=n.WordArray,(o=t.x64={}).Word=r.extend({
/**
           * Initializes a newly created 64-bit word.
           *
           * @param {number} high The high 32 bits.
           * @param {number} low The low 32 bits.
           *
           * @example
           *
           *     var x64Word = CryptoJS.x64.Word.create(0x00010203, 0x04050607);
           */
init:function(e,t){this.high=e,this.low=t}
/**
           * Bitwise NOTs this word.
           *
           * @return {X64Word} A new x64-Word object after negating.
           *
           * @example
           *
           *     var negated = x64Word.not();
           */
// not: function () {
// var high = ~this.high;
// var low = ~this.low;
// return X64Word.create(high, low);
// },
/**
           * Bitwise ANDs this word with the passed word.
           *
           * @param {X64Word} word The x64-Word to AND with this word.
           *
           * @return {X64Word} A new x64-Word object after ANDing.
           *
           * @example
           *
           *     var anded = x64Word.and(anotherX64Word);
           */
// and: function (word) {
// var high = this.high & word.high;
// var low = this.low & word.low;
// return X64Word.create(high, low);
// },
/**
           * Bitwise ORs this word with the passed word.
           *
           * @param {X64Word} word The x64-Word to OR with this word.
           *
           * @return {X64Word} A new x64-Word object after ORing.
           *
           * @example
           *
           *     var ored = x64Word.or(anotherX64Word);
           */
// or: function (word) {
// var high = this.high | word.high;
// var low = this.low | word.low;
// return X64Word.create(high, low);
// },
/**
           * Bitwise XORs this word with the passed word.
           *
           * @param {X64Word} word The x64-Word to XOR with this word.
           *
           * @return {X64Word} A new x64-Word object after XORing.
           *
           * @example
           *
           *     var xored = x64Word.xor(anotherX64Word);
           */
// xor: function (word) {
// var high = this.high ^ word.high;
// var low = this.low ^ word.low;
// return X64Word.create(high, low);
// },
/**
           * Shifts this word n bits to the left.
           *
           * @param {number} n The number of bits to shift.
           *
           * @return {X64Word} A new x64-Word object after shifting.
           *
           * @example
           *
           *     var shifted = x64Word.shiftL(25);
           */
// shiftL: function (n) {
// if (n < 32) {
// var high = (this.high << n) | (this.low >>> (32 - n));
// var low = this.low << n;
// } else {
// var high = this.low << (n - 32);
// var low = 0;
// }
// return X64Word.create(high, low);
// },
/**
           * Shifts this word n bits to the right.
           *
           * @param {number} n The number of bits to shift.
           *
           * @return {X64Word} A new x64-Word object after shifting.
           *
           * @example
           *
           *     var shifted = x64Word.shiftR(7);
           */
// shiftR: function (n) {
// if (n < 32) {
// var low = (this.low >>> n) | (this.high << (32 - n));
// var high = this.high >>> n;
// } else {
// var low = this.high >>> (n - 32);
// var high = 0;
// }
// return X64Word.create(high, low);
// },
/**
           * Rotates this word n bits to the left.
           *
           * @param {number} n The number of bits to rotate.
           *
           * @return {X64Word} A new x64-Word object after rotating.
           *
           * @example
           *
           *     var rotated = x64Word.rotL(25);
           */
// rotL: function (n) {
// return this.shiftL(n).or(this.shiftR(64 - n));
// },
/**
           * Rotates this word n bits to the right.
           *
           * @param {number} n The number of bits to rotate.
           *
           * @return {X64Word} A new x64-Word object after rotating.
           *
           * @example
           *
           *     var rotated = x64Word.rotR(7);
           */
// rotR: function (n) {
// return this.shiftR(n).or(this.shiftL(64 - n));
// },
/**
           * Adds this word with the passed word.
           *
           * @param {X64Word} word The x64-Word to add with this word.
           *
           * @return {X64Word} A new x64-Word object after adding.
           *
           * @example
           *
           *     var added = x64Word.add(anotherX64Word);
           */
// add: function (word) {
// var low = (this.low + word.low) | 0;
// var carry = (low >>> 0) < (this.low >>> 0) ? 1 : 0;
// var high = (this.high + word.high + carry) | 0;
// return X64Word.create(high, low);
// }
}),o.WordArray=r.extend({
/**
           * Initializes a newly created word array.
           *
           * @param {Array} words (Optional) An array of CryptoJS.x64.Word objects.
           * @param {number} sigBytes (Optional) The number of significant bytes in the words.
           *
           * @example
           *
           *     var wordArray = CryptoJS.x64.WordArray.create();
           *
           *     var wordArray = CryptoJS.x64.WordArray.create([
           *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),
           *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)
           *     ]);
           *
           *     var wordArray = CryptoJS.x64.WordArray.create([
           *         CryptoJS.x64.Word.create(0x00010203, 0x04050607),
           *         CryptoJS.x64.Word.create(0x18191a1b, 0x1c1d1e1f)
           *     ], 10);
           */
init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},
/**
           * Converts this 64-bit word array to a 32-bit word array.
           *
           * @return {CryptoJS.lib.WordArray} This word array's data as a 32-bit word array.
           *
           * @example
           *
           *     var x32WordArray = x64WordArray.toX32();
           */
toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},
/**
           * Creates a copy of this word array.
           *
           * @return {X64WordArray} The clone.
           *
           * @example
           *
           *     var clone = x64WordArray.clone();
           */
clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),a)),qO.exports;var e,t,n,r,i,o,a}var UO,HO={exports:{}};function WO(){return UO||(UO=1,HO.exports=(e=zO(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],i=0;i<t;i++)r[i>>>2]|=e[i]<<24-i%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray)),HO.exports;var e}var GO,VO={exports:{}};function YO(){return GO||(GO=1,VO.exports=(e=zO(),function(){var t=e,n=t.lib.WordArray,r=t.enc;function i(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={
/**
           * Converts a word array to a UTF-16 BE string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The UTF-16 BE string.
           *
           * @static
           *
           * @example
           *
           *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);
           */
stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},
/**
           * Converts a UTF-16 BE string to a word array.
           *
           * @param {string} utf16Str The UTF-16 BE string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);
           */
parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return n.create(r,2*t)}},r.Utf16LE={
/**
           * Converts a word array to a UTF-16 LE string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The UTF-16 LE string.
           *
           * @static
           *
           * @example
           *
           *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);
           */
stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var a=i(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},
/**
           * Converts a UTF-16 LE string to a word array.
           *
           * @param {string} utf16Str The UTF-16 LE string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);
           */
parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=i(e.charCodeAt(o)<<16-o%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16)),VO.exports;var e}var KO,XO={exports:{}};function ZO(){return KO||(KO=1,XO.exports=(e=zO(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var i=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return n.create(i,o)}t.enc.Base64={
/**
           * Converts a word array to a Base64 string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @return {string} The Base64 string.
           *
           * @static
           *
           * @example
           *
           *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);
           */
stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},
/**
           * Converts a Base64 string to a word array.
           *
           * @param {string} base64Str The Base64 string.
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Base64.parse(base64String);
           */
parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)),XO.exports;var e}var JO,QO={exports:{}};function eP(){return JO||(JO=1,QO.exports=(e=zO(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var i=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return n.create(i,o)}t.enc.Base64url={
/**
           * Converts a word array to a Base64url string.
           *
           * @param {WordArray} wordArray The word array.
           *
           * @param {boolean} urlSafe Whether to use url safe
           *
           * @return {string} The Base64url string.
           *
           * @static
           *
           * @example
           *
           *     var base64String = CryptoJS.enc.Base64url.stringify(wordArray);
           */
stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,l=0;l<4&&a+.75*l<r;l++)o.push(i.charAt(s>>>6*(3-l)&63));var c=i.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},
/**
           * Converts a Base64url string to a word array.
           *
           * @param {string} base64Str The Base64url string.
           *
           * @param {boolean} urlSafe Whether to use url safe
           *
           * @return {WordArray} The word array.
           *
           * @static
           *
           * @example
           *
           *     var wordArray = CryptoJS.enc.Base64url.parse(base64String);
           */
parse:function(e,t){void 0===t&&(t=!0);var n=e.length,i=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<i.length;a++)o[i.charCodeAt(a)]=a}var s=i.charAt(64);if(s){var l=e.indexOf(s);-1!==l&&(n=l)}return r(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url)),QO.exports;var e}var tP,nP={exports:{}};function rP(){return tP||(tP=1,nP.exports=(e=zO(),function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],v=e[t+6],y=e[t+7],b=e[t+8],_=e[t+9],w=e[t+10],k=e[t+11],x=e[t+12],C=e[t+13],S=e[t+14],T=e[t+15],E=o[0],I=o[1],A=o[2],D=o[3];E=c(E,I,A,D,a,7,s[0]),D=c(D,E,I,A,l,12,s[1]),A=c(A,D,E,I,p,17,s[2]),I=c(I,A,D,E,f,22,s[3]),E=c(E,I,A,D,m,7,s[4]),D=c(D,E,I,A,g,12,s[5]),A=c(A,D,E,I,v,17,s[6]),I=c(I,A,D,E,y,22,s[7]),E=c(E,I,A,D,b,7,s[8]),D=c(D,E,I,A,_,12,s[9]),A=c(A,D,E,I,w,17,s[10]),I=c(I,A,D,E,k,22,s[11]),E=c(E,I,A,D,x,7,s[12]),D=c(D,E,I,A,C,12,s[13]),A=c(A,D,E,I,S,17,s[14]),E=u(E,I=c(I,A,D,E,T,22,s[15]),A,D,l,5,s[16]),D=u(D,E,I,A,v,9,s[17]),A=u(A,D,E,I,k,14,s[18]),I=u(I,A,D,E,a,20,s[19]),E=u(E,I,A,D,g,5,s[20]),D=u(D,E,I,A,w,9,s[21]),A=u(A,D,E,I,T,14,s[22]),I=u(I,A,D,E,m,20,s[23]),E=u(E,I,A,D,_,5,s[24]),D=u(D,E,I,A,S,9,s[25]),A=u(A,D,E,I,f,14,s[26]),I=u(I,A,D,E,b,20,s[27]),E=u(E,I,A,D,C,5,s[28]),D=u(D,E,I,A,p,9,s[29]),A=u(A,D,E,I,y,14,s[30]),E=h(E,I=u(I,A,D,E,x,20,s[31]),A,D,g,4,s[32]),D=h(D,E,I,A,b,11,s[33]),A=h(A,D,E,I,k,16,s[34]),I=h(I,A,D,E,S,23,s[35]),E=h(E,I,A,D,l,4,s[36]),D=h(D,E,I,A,m,11,s[37]),A=h(A,D,E,I,y,16,s[38]),I=h(I,A,D,E,w,23,s[39]),E=h(E,I,A,D,C,4,s[40]),D=h(D,E,I,A,a,11,s[41]),A=h(A,D,E,I,f,16,s[42]),I=h(I,A,D,E,v,23,s[43]),E=h(E,I,A,D,_,4,s[44]),D=h(D,E,I,A,x,11,s[45]),A=h(A,D,E,I,T,16,s[46]),E=d(E,I=h(I,A,D,E,p,23,s[47]),A,D,a,6,s[48]),D=d(D,E,I,A,y,10,s[49]),A=d(A,D,E,I,S,15,s[50]),I=d(I,A,D,E,g,21,s[51]),E=d(E,I,A,D,x,6,s[52]),D=d(D,E,I,A,f,10,s[53]),A=d(A,D,E,I,w,15,s[54]),I=d(I,A,D,E,l,21,s[55]),E=d(E,I,A,D,b,6,s[56]),D=d(D,E,I,A,T,10,s[57]),A=d(A,D,E,I,v,15,s[58]),I=d(I,A,D,E,C,21,s[59]),E=d(E,I,A,D,m,6,s[60]),D=d(D,E,I,A,k,10,s[61]),A=d(A,D,E,I,p,15,s[62]),I=d(I,A,D,E,_,21,s[63]),o[0]=o[0]+E|0,o[1]=o[1]+I|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,o,a){var s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t}function u(e,t,n,r,i,o,a){var s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,i,o,a){var s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,i,o,a){var s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t}n.MD5=o._createHelper(l),n.HmacMD5=o._createHmacHelper(l)}(Math),e.MD5)),nP.exports;var e}var iP,oP={exports:{}};function aP(){return iP||(iP=1,oP.exports=(s=zO(),t=(e=s).lib,n=t.WordArray,r=t.Hasher,i=e.algo,o=[],a=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],l=n[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var u=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=u<<1|u>>>31}var h=(r<<5|r>>>27)+l+o[c];h+=c<20?1518500249+(i&a|~i&s):c<40?1859775393+(i^a^s):c<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,l=s,s=a,a=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a),s.SHA1)),oP.exports;var e,t,n,r,i,o,a,s}var sP,lP={exports:{}};function cP(){return sP||(sP=1,lP.exports=(e=zO(),function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),l[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],h=n[6],d=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=c[p-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=m+c[p-7]+v+c[p-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&h)+l[p]+c[p];d=h,h=u,u=s,s=a+_|0,a=o,o=i,i=r,r=_+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(u),n.HmacSHA256=o._createHmacHelper(u)}(Math),e.SHA256)),lP.exports;var e}var uP,hP={exports:{}};var dP,pP={exports:{}};function fP(){return dP||(dP=1,pP.exports=(e=zO(),$O(),function(){var t=e,n=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,a=t.algo;function s(){return i.create.apply(i,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=s()}();var u=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],h=n[6],d=n[7],p=r.high,f=r.low,m=i.high,g=i.low,v=o.high,y=o.low,b=a.high,_=a.low,w=s.high,k=s.low,x=u.high,C=u.low,S=h.high,T=h.low,E=d.high,I=d.low,A=p,D=f,B=m,L=g,M=v,F=y,O=b,P=_,N=w,j=k,z=x,R=C,q=S,$=T,U=E,H=I,W=0;W<80;W++){var G,V,Y=c[W];if(W<16)V=Y.high=0|e[t+2*W],G=Y.low=0|e[t+2*W+1];else{var K=c[W-15],X=K.high,Z=K.low,J=(X>>>1|Z<<31)^(X>>>8|Z<<24)^X>>>7,Q=(Z>>>1|X<<31)^(Z>>>8|X<<24)^(Z>>>7|X<<25),ee=c[W-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=c[W-7],ae=oe.high,se=oe.low,le=c[W-16],ce=le.high,ue=le.low;V=(V=(V=J+ae+((G=Q+se)>>>0<Q>>>0?1:0))+re+((G+=ie)>>>0<ie>>>0?1:0))+ce+((G+=ue)>>>0<ue>>>0?1:0),Y.high=V,Y.low=G}var he,de=N&z^~N&q,pe=j&R^~j&$,fe=A&B^A&M^B&M,me=D&L^D&F^L&F,ge=(A>>>28|D<<4)^(A<<30|D>>>2)^(A<<25|D>>>7),ve=(D>>>28|A<<4)^(D<<30|A>>>2)^(D<<25|A>>>7),ye=(N>>>14|j<<18)^(N>>>18|j<<14)^(N<<23|j>>>9),be=(j>>>14|N<<18)^(j>>>18|N<<14)^(j<<23|N>>>9),_e=l[W],we=_e.high,ke=_e.low,xe=U+ye+((he=H+be)>>>0<H>>>0?1:0),Ce=ve+me;U=q,H=$,q=z,$=R,z=N,R=j,N=O+(xe=(xe=(xe=xe+de+((he+=pe)>>>0<pe>>>0?1:0))+we+((he+=ke)>>>0<ke>>>0?1:0))+V+((he+=G)>>>0<G>>>0?1:0))+((j=P+he|0)>>>0<P>>>0?1:0)|0,O=M,P=F,M=B,F=L,B=A,L=D,A=xe+(ge+fe+(Ce>>>0<ve>>>0?1:0))+((D=he+Ce|0)>>>0<he>>>0?1:0)|0}f=r.low=f+D,r.high=p+A+(f>>>0<D>>>0?1:0),g=i.low=g+L,i.high=m+B+(g>>>0<L>>>0?1:0),y=o.low=y+F,o.high=v+M+(y>>>0<F>>>0?1:0),_=a.low=_+P,a.high=b+O+(_>>>0<P>>>0?1:0),k=s.low=k+j,s.high=w+N+(k>>>0<j>>>0?1:0),C=u.low=C+R,u.high=x+z+(C>>>0<R>>>0?1:0),T=h.low=T+$,h.high=S+q+(T>>>0<$>>>0?1:0),I=d.low=I+H,d.high=E+U+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512)),pP.exports;var e}var mP,gP={exports:{}};var vP,yP={exports:{}};function bP(){return vP||(vP=1,yP.exports=(e=zO(),$O(),function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64.Word,s=n.algo,l=[],c=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,h=0,d=0;d<7;d++){if(1&i){var p=(1<<d)-1;p<32?h^=1<<p:s^=1<<p-32}128&i?i=i<<1^113:i<<=1}u[o]=a.create(s,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=a.create()}();var d=s.SHA3=o.extend({
/**
           * Configuration options.
           *
           * @property {number} outputLength
           *   The desired number of bits in the output hash.
           *   Only values permitted are: 224, 256, 384, 512.
           *   Default: 512
           */
cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=n[i]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var p=0,f=0,m=0;m<5;m++)p^=(I=n[d+5*m]).high,f^=I.low;var g=h[d];g.high=p,g.low=f}for(d=0;d<5;d++){var v=h[(d+4)%5],y=h[(d+1)%5],b=y.high,_=y.low;for(p=v.high^(b<<1|_>>>31),f=v.low^(_<<1|b>>>31),m=0;m<5;m++)(I=n[d+5*m]).high^=p,I.low^=f}for(var w=1;w<25;w++){var k=(I=n[w]).high,x=I.low,C=l[w];C<32?(p=k<<C|x>>>32-C,f=x<<C|k>>>32-C):(p=x<<C-32|k>>>64-C,f=k<<C-32|x>>>64-C);var S=h[c[w]];S.high=p,S.low=f}var T=h[0],E=n[0];for(T.high=E.high,T.low=E.low,d=0;d<5;d++)for(m=0;m<5;m++){var I=n[w=d+5*m],A=h[w],D=h[(d+1)%5+5*m],B=h[(d+2)%5+5*m];I.high=A.high^~D.high&B.high,I.low=A.low^~D.low&B.low}I=n[0];var L=u[s];I.high^=L.high,I.low^=L.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var r=8*e.sigBytes,o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,c=[],u=0;u<l;u++){var h=a[u],d=h.high,p=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(d)}return new i.init(c,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),e.SHA3)),yP.exports;var e}var _P,wP={exports:{}};var kP,xP={exports:{}};function CP(){return kP||(kP=1,xP.exports=(e=zO(),n=(t=e).lib.Base,r=t.enc.Utf8,void(t.algo.HMAC=n.extend({
/**
           * Initializes a newly created HMAC.
           *
           * @param {Hasher} hasher The hash algorithm to use.
           * @param {WordArray|string} key The secret key.
           *
           * @example
           *
           *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);
           */
init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,l=a.words,c=0;c<n;c++)s[c]^=1549556828,l[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},
/**
           * Resets this HMAC to its initial state.
           *
           * @example
           *
           *     hmacHasher.reset();
           */
reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},
/**
           * Updates this HMAC with a message.
           *
           * @param {WordArray|string} messageUpdate The message to append.
           *
           * @return {HMAC} This HMAC instance.
           *
           * @example
           *
           *     hmacHasher.update('message');
           *     hmacHasher.update(wordArray);
           */
update:function(e){return this._hasher.update(e),this},
/**
           * Finalizes the HMAC computation.
           * Note that the finalize operation is effectively a destructive, read-once operation.
           *
           * @param {WordArray|string} messageUpdate (Optional) A final message update.
           *
           * @return {WordArray} The HMAC.
           *
           * @example
           *
           *     var hmac = hmacHasher.finalize();
           *     var hmac = hmacHasher.finalize('message');
           *     var hmac = hmacHasher.finalize(wordArray);
           */
finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))),xP.exports;var e,t,n,r}var SP,TP={exports:{}};var EP,IP={exports:{}};function AP(){return EP||(EP=1,IP.exports=(s=zO(),aP(),CP(),t=(e=s).lib,n=t.Base,r=t.WordArray,i=e.algo,o=i.MD5,a=i.EvpKDF=n.extend({
/**
           * Configuration options.
           *
           * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)
           * @property {Hasher} hasher The hash algorithm to use. Default: MD5
           * @property {number} iterations The number of iterations to perform. Default: 1
           */
cfg:n.extend({keySize:4,hasher:o,iterations:1}),
/**
           * Initializes a newly created key derivation function.
           *
           * @param {Object} cfg (Optional) The configuration options to use for the derivation.
           *
           * @example
           *
           *     var kdf = CryptoJS.algo.EvpKDF.create();
           *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });
           *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });
           */
init:function(e){this.cfg=this.cfg.extend(e)},
/**
           * Derives a key from a password.
           *
           * @param {WordArray|string} password The password.
           * @param {WordArray|string} salt A salt.
           *
           * @return {WordArray} The derived key.
           *
           * @example
           *
           *     var key = kdf.compute(password, salt);
           */
compute:function(e,t){for(var n,i=this.cfg,o=i.hasher.create(),a=r.create(),s=a.words,l=i.keySize,c=i.iterations;s.length<l;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var u=1;u<c;u++)n=o.finalize(n),o.reset();a.concat(n)}return a.sigBytes=4*l,a}}),e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},s.EvpKDF)),IP.exports;var e,t,n,r,i,o,a,s}var DP,BP={exports:{}};function LP(){return DP||(DP=1,BP.exports=(e=zO(),AP(),void(e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc;s.Utf8;var l=s.Base64,c=n.algo.EvpKDF,u=r.Cipher=a.extend({
/**
           * Configuration options.
           *
           * @property {WordArray} iv The IV to use for this operation.
           */
cfg:i.extend(),
/**
           * Creates this cipher in encryption mode.
           *
           * @param {WordArray} key The key.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {Cipher} A cipher instance.
           *
           * @static
           *
           * @example
           *
           *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });
           */
createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},
/**
           * Creates this cipher in decryption mode.
           *
           * @param {WordArray} key The key.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {Cipher} A cipher instance.
           *
           * @static
           *
           * @example
           *
           *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });
           */
createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},
/**
           * Initializes a newly created cipher.
           *
           * @param {number} xformMode Either the encryption or decryption transormation mode constant.
           * @param {WordArray} key The key.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @example
           *
           *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });
           */
init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},
/**
           * Resets this cipher to its initial state.
           *
           * @example
           *
           *     cipher.reset();
           */
reset:function(){a.reset.call(this),this._doReset()},
/**
           * Adds data to be encrypted or decrypted.
           *
           * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.
           *
           * @return {WordArray} The data after processing.
           *
           * @example
           *
           *     var encrypted = cipher.process('data');
           *     var encrypted = cipher.process(wordArray);
           */
process:function(e){return this._append(e),this._process()},
/**
           * Finalizes the encryption or decryption process.
           * Note that the finalize operation is effectively a destructive, read-once operation.
           *
           * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.
           *
           * @return {WordArray} The data after final processing.
           *
           * @example
           *
           *     var encrypted = cipher.finalize();
           *     var encrypted = cipher.finalize('data');
           *     var encrypted = cipher.finalize(wordArray);
           */
finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,
/**
           * Creates shortcut functions to a cipher's object interface.
           *
           * @param {Cipher} cipher The cipher to create a helper for.
           *
           * @return {Object} An object with encrypt and decrypt shortcut functions.
           *
           * @static
           *
           * @example
           *
           *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);
           */
_createHelper:function(){function e(e){return"string"==typeof e?b:v}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var h=n.mode={},d=r.BlockCipherMode=i.extend({
/**
           * Creates this mode for encryption.
           *
           * @param {Cipher} cipher A block cipher instance.
           * @param {Array} iv The IV words.
           *
           * @static
           *
           * @example
           *
           *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);
           */
createEncryptor:function(e,t){return this.Encryptor.create(e,t)},
/**
           * Creates this mode for decryption.
           *
           * @param {Cipher} cipher A block cipher instance.
           * @param {Array} iv The IV words.
           *
           * @static
           *
           * @example
           *
           *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);
           */
createDecryptor:function(e,t){return this.Decryptor.create(e,t)},
/**
           * Initializes a newly created mode.
           *
           * @param {Cipher} cipher A block cipher instance.
           * @param {Array} iv The IV words.
           *
           * @example
           *
           *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);
           */
init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){var e=d.extend();function n(e,n,r){var i,o=this._iv;o?(i=o,this._iv=t):i=this._prevBlock;for(var a=0;a<r;a++)e[n+a]^=i[a]}return e.Encryptor=e.extend({
/**
             * Processes the data block at offset.
             *
             * @param {Array} words The data words to operate on.
             * @param {number} offset The offset where the block starts.
             *
             * @example
             *
             *     mode.processBlock(data.words, offset);
             */
processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({
/**
             * Processes the data block at offset.
             *
             * @param {Array} words The data words to operate on.
             * @param {number} offset The offset where the block starts.
             *
             * @example
             *
             *     mode.processBlock(data.words, offset);
             */
processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=o}}),e}(),f=(n.pad={}).Pkcs7={
/**
           * Pads data using the algorithm defined in PKCS #5/7.
           *
           * @param {WordArray} data The data to pad.
           * @param {number} blockSize The multiple that the data should be padded to.
           *
           * @static
           *
           * @example
           *
           *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);
           */
pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var l=o.create(a,r);e.concat(l)},
/**
           * Unpads data that had been padded using the algorithm defined in PKCS #5/7.
           *
           * @param {WordArray} data The data to unpad.
           *
           * @static
           *
           * @example
           *
           *     CryptoJS.pad.Pkcs7.unpad(wordArray);
           */
unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({
/**
           * Configuration options.
           *
           * @property {Mode} mode The block mode to use. Default: CBC
           * @property {Padding} padding The padding strategy to use. Default: Pkcs7
           */
cfg:u.cfg.extend({mode:p,padding:f}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var m=r.CipherParams=i.extend({
/**
           * Initializes a newly created cipher params object.
           *
           * @param {Object} cipherParams An object with any of the possible cipher parameters.
           *
           * @example
           *
           *     var cipherParams = CryptoJS.lib.CipherParams.create({
           *         ciphertext: ciphertextWordArray,
           *         key: keyWordArray,
           *         iv: ivWordArray,
           *         salt: saltWordArray,
           *         algorithm: CryptoJS.algo.AES,
           *         mode: CryptoJS.mode.CBC,
           *         padding: CryptoJS.pad.PKCS7,
           *         blockSize: 4,
           *         formatter: CryptoJS.format.OpenSSL
           *     });
           */
init:function(e){this.mixIn(e)},
/**
           * Converts this cipher params object to a string.
           *
           * @param {Format} formatter (Optional) The formatting strategy to use.
           *
           * @return {string} The stringified cipher params.
           *
           * @throws Error If neither the formatter nor the default formatter is set.
           *
           * @example
           *
           *     var string = cipherParams + '';
           *     var string = cipherParams.toString();
           *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);
           */
toString:function(e){return(e||this.formatter).stringify(this)}}),g=(n.format={}).OpenSSL={
/**
           * Converts a cipher params object to an OpenSSL-compatible string.
           *
           * @param {CipherParams} cipherParams The cipher params object.
           *
           * @return {string} The OpenSSL-compatible string.
           *
           * @static
           *
           * @example
           *
           *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);
           */
stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},
/**
           * Converts an OpenSSL-compatible string to a cipher params object.
           *
           * @param {string} openSSLStr The OpenSSL-compatible string.
           *
           * @return {CipherParams} The cipher params object.
           *
           * @static
           *
           * @example
           *
           *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);
           */
parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),m.create({ciphertext:n,salt:t})}},v=r.SerializableCipher=i.extend({
/**
           * Configuration options.
           *
           * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL
           */
cfg:i.extend({format:g}),
/**
           * Encrypts a message.
           *
           * @param {Cipher} cipher The cipher algorithm to use.
           * @param {WordArray|string} message The message to encrypt.
           * @param {WordArray} key The key.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {CipherParams} A cipher params object.
           *
           * @static
           *
           * @example
           *
           *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);
           *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });
           *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });
           */
encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),a=i.cfg;return m.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},
/**
           * Decrypts serialized ciphertext.
           *
           * @param {Cipher} cipher The cipher algorithm to use.
           * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
           * @param {WordArray} key The key.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {WordArray} The plaintext.
           *
           * @static
           *
           * @example
           *
           *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });
           *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });
           */
decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},
/**
           * Converts serialized ciphertext to CipherParams,
           * else assumed CipherParams already and returns ciphertext unchanged.
           *
           * @param {CipherParams|string} ciphertext The ciphertext.
           * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.
           *
           * @return {CipherParams} The unserialized ciphertext.
           *
           * @static
           *
           * @example
           *
           *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);
           */
_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={
/**
           * Derives a key and IV from a password.
           *
           * @param {string} password The password to derive from.
           * @param {number} keySize The size in words of the key to generate.
           * @param {number} ivSize The size in words of the IV to generate.
           * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.
           *
           * @return {CipherParams} A cipher params object with the key, IV, and salt.
           *
           * @static
           *
           * @example
           *
           *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);
           *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');
           */
execute:function(e,t,n,r,i){if(r||(r=o.random(8)),i)a=c.create({keySize:t+n,hasher:i}).compute(e,r);else var a=c.create({keySize:t+n}).compute(e,r);var s=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,m.create({key:a,iv:s,salt:r})}},b=r.PasswordBasedCipher=v.extend({
/**
           * Configuration options.
           *
           * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL
           */
cfg:v.cfg.extend({kdf:y}),
/**
           * Encrypts a message using a password.
           *
           * @param {Cipher} cipher The cipher algorithm to use.
           * @param {WordArray|string} message The message to encrypt.
           * @param {string} password The password.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {CipherParams} A cipher params object.
           *
           * @static
           *
           * @example
           *
           *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');
           *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });
           */
encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=i.iv;var o=v.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},
/**
           * Decrypts serialized ciphertext using a password.
           *
           * @param {Cipher} cipher The cipher algorithm to use.
           * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
           * @param {string} password The password.
           * @param {Object} cfg (Optional) The configuration options to use for this operation.
           *
           * @return {WordArray} The plaintext.
           *
           * @static
           *
           * @example
           *
           *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });
           *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });
           */
decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=i.iv,v.decrypt.call(this,e,t,i.key,r)}})}()))),BP.exports;var e}var MP,FP={exports:{}};var OP,PP={exports:{}};var NP,jP={exports:{}};function zP(){return NP||(NP=1,jP.exports=(e=zO(),LP(),
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}function r(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var i=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),r(a);var s=a.slice(0);n.encryptBlock(s,0);for(var l=0;l<i;l++)e[t+l]^=s[l]}});return t.Decryptor=i,t}(),e.mode.CTRGladman)),jP.exports;var e}var RP,qP={exports:{}};var $P,UP={exports:{}};var HP,WP={exports:{}};var GP,VP={exports:{}};var YP,KP={exports:{}};var XP,ZP={exports:{}};var JP,QP={exports:{}};var eN,tN={exports:{}};var nN,rN={exports:{}};var iN,oN={exports:{}};function aN(){return iN||(iN=1,oN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib,r=n.WordArray,i=n.BlockCipher,o=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],u=l[o];for(n=0;n<24;n++)c[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,l=0;l<8;l++)s|=c[l][((a^i[l])&u[l])>>>0];this._lBlock=a,this._rBlock=o^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=i._createHelper(h);var f=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=h.createEncryptor(r.create(t)),this._des2=h.createEncryptor(r.create(n)),this._des3=h.createEncryptor(r.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(f)}(),e.TripleDES)),oN.exports;var e}var sN,lN={exports:{}};var cN,uN={exports:{}};var hN,dN={exports:{}};var pN,fN={exports:{}};function mN(){return pN||(pN=1,fN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo;const i=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function l(e,t){let n=t>>24&255,r=t>>16&255,i=t>>8&255,o=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][i],a+=e.sbox[3][o],a}function c(e,t,n){let r,o=t,a=n;for(let s=0;s<i;++s)o^=e.pbox[s],a=l(e,o)^a,r=o,o=a,a=r;return r=o,o=a,a=r,a^=e.pbox[i],o^=e.pbox[i+1],{left:o,right:a}}function u(e,t,n){let r,o=t,a=n;for(let s=i+1;s>1;--s)o^=e.pbox[s],a=l(e,o)^a,r=o,o=a,a=r;return r=o,o=a,a=r,a^=e.pbox[1],o^=e.pbox[0],{left:o,right:a}}function h(e,t,n){for(let i=0;i<4;i++){e.sbox[i]=[];for(let t=0;t<256;t++)e.sbox[i][t]=a[i][t]}let r=0;for(let a=0;a<i+2;a++)e.pbox[a]=o[a]^t[r],r++,r>=n&&(r=0);let s=0,l=0,u=0;for(let o=0;o<i+2;o+=2)u=c(e,s,l),s=u.left,l=u.right,e.pbox[o]=s,e.pbox[o+1]=l;for(let i=0;i<4;i++)for(let t=0;t<256;t+=2)u=c(e,s,l),s=u.left,l=u.right,e.sbox[i][t]=s,e.sbox[i][t+1]=l;return!0}var d=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;h(s,t,n)}},encryptBlock:function(e,t){var n=c(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=u(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(d)}(),e.Blowfish)),fN.exports;var e}var gN;var vN,yN,bN,_N,wN,kN,xN=(gN||(gN=1,FO.exports=function(e){return e}(zO(),$O(),WO(),YO(),ZO(),eP(),rP(),aP(),cP(),uP||(uP=1,hP.exports=(kN=zO(),cP(),yN=(vN=kN).lib.WordArray,bN=vN.algo,_N=bN.SHA256,wN=bN.SHA224=_N.extend({_doReset:function(){this._hash=new yN.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=_N._doFinalize.call(this);return e.sigBytes-=4,e}}),vN.SHA224=_N._createHelper(wN),vN.HmacSHA224=_N._createHmacHelper(wN),kN.SHA224)),fP(),function(){return mP?gP.exports:(mP=1,gP.exports=(s=zO(),$O(),fP(),t=(e=s).x64,n=t.Word,r=t.WordArray,i=e.algo,o=i.SHA512,a=i.SHA384=o.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=16,e}}),e.SHA384=o._createHelper(a),e.HmacSHA384=o._createHmacHelper(a),s.SHA384));var e,t,n,r,i,o,a,s}(),bP(),function(){return _P||(_P=1,wP.exports=(e=zO(),
/** @preserve
      			(c) 2012 by Cdric Mesnil. All rights reserved.
      
      			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      
      			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      
      			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      			*/
function(){var t=e,n=t.lib,r=n.WordArray,i=n.Hasher,o=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),h=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=o.RIPEMD160=i.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,d,b,_,w,k,x,C,S,T,E,I=this._hash.words,A=u.words,D=h.words,B=a.words,L=s.words,M=l.words,F=c.words;for(k=o=I[0],x=d=I[1],C=b=I[2],S=_=I[3],T=w=I[4],n=0;n<80;n+=1)E=o+e[t+B[n]]|0,E+=n<16?p(d,b,_)+A[0]:n<32?f(d,b,_)+A[1]:n<48?m(d,b,_)+A[2]:n<64?g(d,b,_)+A[3]:v(d,b,_)+A[4],E=(E=y(E|=0,M[n]))+w|0,o=w,w=_,_=y(b,10),b=d,d=E,E=k+e[t+L[n]]|0,E+=n<16?v(x,C,S)+D[0]:n<32?g(x,C,S)+D[1]:n<48?m(x,C,S)+D[2]:n<64?f(x,C,S)+D[3]:p(x,C,S)+D[4],E=(E=y(E|=0,F[n]))+T|0,k=T,T=S,S=y(C,10),C=x,x=E;E=I[1]+b+S|0,I[1]=I[2]+_+T|0,I[2]=I[3]+w+k|0,I[3]=I[4]+o+x|0,I[4]=I[0]+d+C|0,I[0]=E},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function v(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(d),t.HmacRIPEMD160=i._createHmacHelper(d)}(),e.RIPEMD160)),wP.exports;var e}(),CP(),function(){return SP||(SP=1,TP.exports=(l=zO(),cP(),CP(),t=(e=l).lib,n=t.Base,r=t.WordArray,i=e.algo,o=i.SHA256,a=i.HMAC,s=i.PBKDF2=n.extend({
/**
           * Configuration options.
           *
           * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)
           * @property {Hasher} hasher The hasher to use. Default: SHA256
           * @property {number} iterations The number of iterations to perform. Default: 250000
           */
cfg:n.extend({keySize:4,hasher:o,iterations:25e4}),
/**
           * Initializes a newly created key derivation function.
           *
           * @param {Object} cfg (Optional) The configuration options to use for the derivation.
           *
           * @example
           *
           *     var kdf = CryptoJS.algo.PBKDF2.create();
           *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8 });
           *     var kdf = CryptoJS.algo.PBKDF2.create({ keySize: 8, iterations: 1000 });
           */
init:function(e){this.cfg=this.cfg.extend(e)},
/**
           * Computes the Password-Based Key Derivation Function 2.
           *
           * @param {WordArray|string} password The password.
           * @param {WordArray|string} salt A salt.
           *
           * @return {WordArray} The derived key.
           *
           * @example
           *
           *     var key = kdf.compute(password, salt);
           */
compute:function(e,t){for(var n=this.cfg,i=a.create(n.hasher,e),o=r.create(),s=r.create([1]),l=o.words,c=s.words,u=n.keySize,h=n.iterations;l.length<u;){var d=i.update(t).finalize(s);i.reset();for(var p=d.words,f=p.length,m=d,g=1;g<h;g++){m=i.finalize(m),i.reset();for(var v=m.words,y=0;y<f;y++)p[y]^=v[y]}o.concat(d),c[0]++}return o.sigBytes=4*u,o}}),e.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)},l.PBKDF2)),TP.exports;var e,t,n,r,i,o,a,s,l}(),AP(),LP(),function(){return MP||(MP=1,FP.exports=(e=zO(),LP(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=o}}),t}(),e.mode.CFB)),FP.exports;var e}(),function(){return OP||(OP=1,PP.exports=(n=zO(),LP(),n.mode.CTR=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),e.Decryptor=t,e),n.mode.CTR)),PP.exports;var e,t,n}(),zP(),function(){return RP||(RP=1,qP.exports=(n=zO(),LP(),n.mode.OFB=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}}),e.Decryptor=t,e),n.mode.OFB)),qP.exports;var e,t,n}(),function(){return $P?UP.exports:($P=1,UP.exports=(t=zO(),LP(),t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),t.mode.ECB));var e,t}(),function(){return HP?WP.exports:(HP=1,WP.exports=(e=zO(),LP(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923));var e}(),function(){return GP?VP.exports:(GP=1,VP.exports=(e=zO(),LP(),e.pad.Iso10126={pad:function(t,n){var r=4*n,i=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126));var e}(),function(){return YP?KP.exports:(YP=1,KP.exports=(e=zO(),LP(),e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971));var e}(),function(){return XP||(XP=1,ZP.exports=(e=zO(),LP(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding)),ZP.exports;var e}(),function(){return JP?QP.exports:(JP=1,QP.exports=(e=zO(),LP(),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding));var e}(),function(){return eN?tN.exports:(eN=1,tN.exports=(r=zO(),LP(),t=(e=r).lib.CipherParams,n=e.enc.Hex,e.format.Hex={
/**
           * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.
           *
           * @param {CipherParams} cipherParams The cipher params object.
           *
           * @return {string} The hexadecimally encoded string.
           *
           * @static
           *
           * @example
           *
           *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);
           */
stringify:function(e){return e.ciphertext.toString(n)},
/**
           * Converts a hexadecimally encoded ciphertext string to a cipher params object.
           *
           * @param {string} input The hexadecimally encoded string.
           *
           * @return {CipherParams} The cipher params object.
           *
           * @static
           *
           * @example
           *
           *     var cipherParams = CryptoJS.format.Hex.parse(hexString);
           */
parse:function(e){var r=n.parse(e);return t.create({ciphertext:r})}},r.format.Hex));var e,t,n,r}(),function(){return nN||(nN=1,rN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],o=[],a=[],s=[],l=[],c=[],u=[],h=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,i[n]=f,o[f]=n;var m=e[n],g=e[m],v=e[g],y=257*e[f]^16843008*f;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,c[n]=y,y=16843009*v^65537*g^257*m^16843008*n,u[f]=y<<24|y>>>8,h[f]=y<<16|y>>>16,d[f]=y<<8|y>>>24,p[f]=y,n?(n=m^e[e[e[v^m]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=t[a]:(c=o[a-1],a%n?n>6&&a%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=f[a/n|0]<<24),o[a]=o[a-n]^c);for(var s=this._invKeySchedule=[],l=0;l<r;l++){if(a=r-l,l%4)var c=o[a];else c=o[a-4];s[l]=l<4||a<=4?c:u[i[c>>>24]]^h[i[c>>>16&255]]^d[i[c>>>8&255]]^p[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,l,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,h,d,p,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],p=4,f=1;f<l;f++){var m=r[c>>>24]^i[u>>>16&255]^o[h>>>8&255]^a[255&d]^n[p++],g=r[u>>>24]^i[h>>>16&255]^o[d>>>8&255]^a[255&c]^n[p++],v=r[h>>>24]^i[d>>>16&255]^o[c>>>8&255]^a[255&u]^n[p++],y=r[d>>>24]^i[c>>>16&255]^o[u>>>8&255]^a[255&h]^n[p++];c=m,u=g,h=v,d=y}m=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^n[p++],g=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^n[p++],v=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[p++],y=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^n[p++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=y},keySize:8});t.AES=n._createHelper(m)}(),e.AES)),rN.exports;var e}(),aN(),function(){return sN||(sN=1,lN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var l=r[i];r[i]=r[o],r[o]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}t.RC4=n._createHelper(i);var a=r.RC4Drop=i.extend({
/**
           * Configuration options.
           *
           * @property {number} drop The number of keystream words to drop. Default 192
           */
cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4)),lN.exports;var e}(),function(){return cN||(cN=1,uN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],o=[],a=[],s=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=c>>>16|4294901760&u,d=u<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=u,i[3]^=d,i[4]^=c,i[5]^=h,i[6]^=u,i[7]^=d,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,l=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit)),uN.exports;var e}(),function(){return hN||(hN=1,dN.exports=(e=zO(),ZO(),rP(),AP(),LP(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,i=[],o=[],a=[],s=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)l.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=c>>>16|4294901760&u,d=u<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=u,r[3]^=d,r[4]^=c,r[5]^=h,r[6]^=u,r[7]^=d,i=0;i<4;i++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),i[0]=n[0]^n[5]>>>16^n[3]<<16,i[1]=n[2]^n[7]>>>16^n[5]<<16,i[2]=n[4]^n[1]>>>16^n[7]<<16,i[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)i[r]=16711935&(i[r]<<8|i[r]>>>24)|4278255360&(i[r]<<24|i[r]>>>8),e[t+r]^=i[r]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,l=((i*i>>>17)+i*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy)),dN.exports;var e}(),mN())),FO.exports);const CN=bo(xN),SN="#  StackEdit \n\n **StackEdit**  Markdown  StackEdit Markdown****\n\n# \n\nStackEdit ****\n\n## \n\n ****  **** \n\n## \n\n\n\n## \n\n****\n\n## \n\n****\n\n## \n\n ****  ****  7 \n\n## \n\n **/**  Markdown Handlebars  HTML  PDF\n\n\n# \n\n StackEdit **Gitee**  **GitHub** ......\n\n\n\n- \n>  Gitee \n\n- **Gitee****GitHub**\n> ****\n\n## \n\n ****  **...** **Gitee**  **GitHub** \n\n## \n\n ****  **...** **Gitee**  **GitHub** StackEdit \n\n## \n\nStackEdit /\n\n **** \n\n> **** ****\n\n## \n\n********\n\n\n# \n\n StackEdit  **Blogger****Gitee****Gist****GitHub****WordPress**  **Zendesk** [Handlebars ](http://handlebarsjs.com/)\n\n> ****\n\n## \n\n ****  **** \n\n- Markdown Markdown **GitHub**\n- HTML Handlebars  HTML \n\n## \n\nStackEdit ****\n\n> **** ****\n\n## \n\n********\n\n# Markdown\n\nStackEdit  **Markdown**  Markdown \n\n> ****  ****  **Markdown **\n\n\n## SmartyPants\n\nSmartyPants  ASCII  HTML \n\n| |ASCII |HTML |\n|----------------|--------------------------------| ------------------------------|\n||`''` |'' |\n||`` | |\n| |`-- --- `|-- --- |\n\n\n## KaTeX\n\n [KaTeX](https://khan.github.io/KaTeX/)  LaTeX \n\n $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$  *Gamma * \n\n$$\n\\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt\\,.\n$$\n\n>  [](http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference)  **LaTeX** \n\n\n## UML \n\n [Mermaid](https://mermaidjs.github.io/)  UML \n\n```mermaid\nsequenceDiagram\n ->> : \n--\x3e>: \n--x : \n-x : \nNote right of : <br/><br/><br/>\n\n--\x3e:  John ...\n->: \n```\n\n\n\n```mermaid\ngraph LR\nA[] --  --\x3e B(())\nA --\x3e C()\nB --\x3e D{}\nC --\x3e D\n```\n",TN=/^\.stackedit-data$|^\.stackedit-trash$|\.md$|\.sync$|\.publish$/,EN={
/**
   * Create a file in the store with the specified fields.
   */
async createFile({name:e,parentId:t,text:n,properties:r,discussions:i,comments:o}={},a=!1){const s=UL.uid(),l={id:s,name:UL.sanitizeFilename(e),parentId:t||null},c={id:`${s}/content`,text:UL.sanitizeText(n||_H.getters["data/computedSettings"].newFileContent),properties:UL.sanitizeText(r||_H.getters["data/computedSettings"].newFileProperties),discussions:i||{},comments:o||{}},u=_H.getters["workspace/currentWorkspaceHasUniquePaths"];if(!a&&(l.name!==ML.defaultName&&l.name!==e&&await _H.dispatch("modal/open",{type:"stripName",item:l}),u)){const e=(_H.getters.pathsByItemId[l.parentId]||"")+l.name;_H.getters.itemsByPath[e]&&await _H.dispatch("modal/open",{type:"pathConflict",item:l})}return _H.commit("content/setItem",c),_H.commit("file/setItem",l),u&&this.makePathUnique(s),_H.state.file.itemsById[s]},
/**
   * Make sanity checks and then create/update the folder/file in the store.
   */
async storeItem(e){const t=e.id||UL.uid(),n=UL.sanitizeFilename(e.name);if("folder"===e.type&&TN.exec(n))throw await _H.dispatch("modal/open",{type:"unauthorizedName",item:e}),new Error("");if(n!==ML.defaultName&&n!==e.name&&await _H.dispatch("modal/open",{type:"stripName",item:e}),_H.getters["workspace/currentWorkspaceHasUniquePaths"]){const r=(_H.getters.pathsByItemId[e.parentId]||"")+n;(_H.getters.itemsByPath[r]||[]).some((e=>e.id!==t))&&await _H.dispatch("modal/open",{type:"pathConflict",item:e})}return this.setOrPatchItem({...e,id:t})},
/**
   * Create/update the folder/file in the store and make sure its path is unique.
   */
setOrPatchItem(e){const t={..._H.getters.allItemsById[e.id]||e};if(!t.id)return null;if(void 0!==e.parentId&&(t.parentId=e.parentId||null),e.name){const n=UL.sanitizeFilename(e.name);"folder"===t.type&&TN.exec(n)||(t.name=n)}return _H.commit(`${t.type}/setItem`,t),this.removeCircularReference(t),_H.getters["workspace/currentWorkspaceHasUniquePaths"]&&this.makePathUnique(t.id),_H.getters.allItemsById[t.id]},
/**
   * Delete a file in the store and all its related items.
   */
deleteFile(e){_H.commit("file/deleteItem",e),_H.commit("content/deleteItem",`${e}/content`),_H.commit("syncedContent/deleteItem",`${e}/syncedContent`),_H.commit("contentState/deleteItem",`${e}/contentState`),(_H.getters["syncLocation/groupedByFileId"][e]||[]).forEach((e=>_H.commit("syncLocation/deleteItem",e.id))),(_H.getters["publishLocation/groupedByFileId"][e]||[]).forEach((e=>_H.commit("publishLocation/deleteItem",e.id)))},
/**
   * Sanitize the whole workspace.
   */
sanitizeWorkspace(e){_H.getters["folder/items"].forEach((e=>this.removeCircularReference(e))),this.ensureUniquePaths(e),this.ensureUniqueLocations(e)},
/**
   * Detect and remove circular reference for an item.
   */
removeCircularReference(e){const t=_H.state.folder.itemsById;for(let n=t[e.parentId];n;n=t[n.parentId])if(n.id===e.id){_H.commit("folder/patchItem",{id:e.id,parentId:null});break}},
/**
   * Ensure two files/folders don't have the same path if the workspace doesn't allow it.
   */
ensureUniquePaths(e={}){_H.getters["workspace/currentWorkspaceHasUniquePaths"]&&Object.keys(_H.getters.pathsByItemId).some((t=>!e[t]&&this.makePathUnique(t)))&&this.ensureUniquePaths(e)},
/**
   * Return false if the file/folder path is unique.
   * Add a prefix to its name and return true otherwise.
   */
makePathUnique(e){const{itemsByPath:t,allItemsById:n,pathsByItemId:r}=_H.getters,i=n[e];if(!i)return!1;let o=r[e];if(1===t[o].length)return!1;const a="folder"===i.type;a&&(o=o.slice(0,-1));for(let s=1;;s+=1){let e=`${o}.${s}`;if(a&&(e+="/"),!t[e])return _H.commit(`${i.type}/patchItem`,{id:i.id,name:`${i.name}.${s}`}),!0}},addSyncLocation(e){_H.commit("syncLocation/setItem",{...e,id:UL.uid()}),this.ensureUniqueLocations(),Object.keys(_H.getters["syncLocation/currentWithWorkspaceSyncLocation"]).length>1&&OF.addBadge("syncMultipleLocations")},addPublishLocation(e){_H.commit("publishLocation/setItem",{...e,id:UL.uid()}),this.ensureUniqueLocations(),Object.keys(_H.getters["publishLocation/current"]).length>1&&OF.addBadge("publishMultipleLocations")},
/**
   * Ensure two sync/publish locations of the same file don't have the same hash.
   */
ensureUniqueLocations(e={}){["syncLocation","publishLocation"].forEach((t=>{_H.getters[`${t}/items`].forEach((n=>{!e[n.id]&&_H.getters[`${t}/groupedByFileIdAndHash`][n.fileId][n.hash].length>1&&_H.commit(`${n.type}/deleteItem`,n.id)}))}))},
/**
   * Drop the database and clean the localStorage for the specified workspaceId.
   */
async removeWorkspace(e){_H.dispatch("workspace/removeWorkspace",e),await new Promise((t=>{const n=UL.getDbName(e),r=indexedDB.deleteDatabase(n);r.onerror=t,r.onsuccess=t})),localStorage.removeItem(`${e}/lastSyncActivity`),localStorage.removeItem(`${e}/lastWindowFocus`)}},IN="objects",AN="imgs",DN="waitUploadImgIds",{silent:BN}=UL.queryParams,LN=localStorage.getItem("resetStackEdit");LN&&localStorage.removeItem("resetStackEdit");class MN{constructor(e=_H.getters["workspace/currentWorkspace"].id){this.getTxCbs=[],this.dbName=UL.getDbName(e);const t=indexedDB.open(this.dbName,3);t.onerror=()=>{throw new Error("IndexedDB.")},t.onsuccess=e=>{this.db=e.target.result,this.db.onversionchange=()=>window.location.reload(),this.getTxCbs.forEach((({onTx:e,onError:t})=>this.createTx(e,t))),this.getTxCbs=null},t.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(IN)){t.createObjectStore(IN,{keyPath:"id"}).createIndex("tx","tx",{unique:!1})}t.objectStoreNames.contains(AN)||t.createObjectStore(AN,{keyPath:"id"})}}
/**
   * Create a transaction asynchronously.
   */createTx(e,t){if(!this.db)return this.getTxCbs.push({onTx:e,onError:t});const n=this.db.transaction(this.db.objectStoreNames,"readwrite");return n.onerror=t,e(n)}}const FN={content:!0,contentState:!0,syncedContent:!0},ON={};ML.types.forEach((e=>{ON[e]=Object.create(null)}));const PN=Object.create(null),NN={lastTx:0,hashMap:ON,connection:null,
/**
   * Sync data items stored in the localStorage.
   */
syncLocalStorage(){ML.localStorageDataIds.forEach((e=>{const t=`data/${e}`;if("layoutSettings"!==e||!PN[e])try{const n=JSON.parse(localStorage.getItem(t));n.hash&&PN[e]!==n.hash&&(_H.commit("data/setItem",n),PN[e]=n.hash)}catch(i7){}const n=_H.state.data.lsItemsById[e];n&&n.hash!==PN[e]&&(localStorage.setItem(t,JSON.stringify(n)),PN[e]=n.hash)}))},
/**
   * Return a promise that will be resolved once the synchronization between the store and the
   * localDb will be finished. Effectively, open a transaction, then read and apply all changes
   * from the DB since the previous transaction, then write all the changes from the store.
   */
async sync(){return new Promise(((e,t)=>{this.connection.createTx((t=>{const{lastTx:n}=this;this.readAll(t,(r=>{n!==this.lastTx&&EN.sanitizeWorkspace(),this.writeAll(r,t),this.syncLocalStorage(),e()}))}),(()=>t(new Error("Local DB access error."))))}))},
/**
   * Read and apply all changes from the DB since previous transaction.
   */
readAll(e,t){let{lastTx:n}=this;const r=e.objectStore(IN),i=r.index("tx"),o=IDBKeyRange.lowerBound(this.lastTx,!0),a=[];i.openCursor(o).onsuccess=e=>{const i=e.target.result;if(i){const e=i.value;return e.tx>n&&(n=e.tx,this.lastTx&&e.tx-this.lastTx>1e3)?void window.location.reload():(a.push(e),void i.continue())}const o={..._H.getters.allItemsById};a.forEach((e=>{this.readDbItem(e,o),!e.hash&&n-e.tx>1e3&&r.delete(e.id)})),this.lastTx=n,t(o)}},async saveImg(e){await this.writeImgItem(e);const t=await this.getImgItem(DN)||{id:DN,ids:[]},n=t.ids||[];e.uploaded?n.splice(n.indexOf(e.id),1):n.push(e.id),t.ids=n,await this.writeImgItem(t)},
// id
async getWaitUploadImgIds(){return(await this.getImgItem(DN)||{ids:[]}).ids||[]},
/**
   * 
   */
async writeImgItem(e){return new Promise(((t,n)=>{this.connection.createTx((n=>{n.objectStore(AN).put(e),t()}),(()=>n(new Error(""))))}))},
/**
   * 
   */
async getImgItem(e){return new Promise(((t,n)=>{this.connection.createTx((n=>{const r=n.objectStore(AN).get(e);r.onsuccess=()=>{const e=r.result;t(e)}}),(()=>n(new Error("indexeddb"))))}))},
/**
   * Write all changes from the store since previous transaction.
   */
writeAll(e,t){if(BN)return;const n=t.objectStore(IN),r=this.lastTx+1;Object.keys(this.hashMap).forEach((t=>{let i=t=>n=>!e[n]&&t(n);FN[t]&&(i=t=>n=>{if(!e[n]){const[e]=n.split("/");_H.state.file.itemsById[e]||t(n)}}),Object.keys(this.hashMap[t]).forEach(i((e=>{n.put({id:e,type:t,tx:r}),delete this.hashMap[t][e],this.lastTx=r})))})),Object.entries(e).forEach((([,e])=>{if(this.hashMap[e.type][e.id]!==e.hash){const t=JSON.parse(JSON.stringify(e));t.tx=r,n.put(t),this.hashMap[t.type][t.id]=t.hash,this.lastTx=r}}))},
/**
   * Read and apply one DB change.
   */
readDbItem(e,t){const n=t[e.id];e.hash?this.hashMap[e.type][e.id]!==e.hash&&(this.hashMap[e.type][e.id]=e.hash,!n&&FN[e.type]||(e.tx=void 0,_H.commit(`${e.type}/setItem`,e),t[e.id]=e)):(delete this.hashMap[e.type][e.id],n&&(_H.commit(`${n.type}/deleteItem`,n.id),delete t[n.id]))},
/**
   * Retrieve an item from the DB and put it in the store.
   */
async loadItem(e){const t=_H.getters.allItemsById[e];return t?Promise.resolve(t):new Promise(((t,n)=>{const r=()=>n(new Error("Data not available."));this.connection.createTx((n=>{const i=n.objectStore(IN).get(e);i.onsuccess=()=>{const e=i.result;e&&e.hash?(this.hashMap[e.type][e.id]=e.hash,e.tx=void 0,_H.commit(`${e.type}/setItem`,e),t(e)):r()}}),(()=>r()))}))},
/**
   * Unload from the store contents that haven't been opened recently
   */
async unloadContents(){await this.sync();const e=new Set(_H.getters["data/lastOpenedIds"]);Object.keys(FN).forEach((t=>{_H.getters[`${t}/items`].forEach((n=>{const[r]=n.id.split("/");e.has(r)||_H.commit(`${t}/deleteItem`,n.id)}))}))},
/**
   * Create the connection and start syncing.
   */
async init(){if(LN)throw await Promise.all(Object.keys(_H.getters["workspace/workspacesById"]).map((e=>EN.removeWorkspace(e)))),ML.localStorageDataIds.forEach((e=>{localStorage.removeItem(`data/${e}`)})),new Error("RELOAD");this.connection=new MN,await NN.sync(),_H.watch((()=>_H.getters["data/workspaces"]),(()=>this.syncLocalStorage()));const e=UL.hash(SN),{welcomeFileHashes:t}=_H.getters["data/localSettings"];t[e]||_H.dispatch("data/patchLocalSettings",{welcomeFileHashes:{...t,[e]:1}}),!_H.getters["workspace/syncToken"]&&_H.state.workspace.lastFocus+ML.cleanTrashAfter<Date.now()&&_H.getters["file/items"].filter((e=>"trash"===e.parentId)).forEach((e=>EN.deleteFile(e.id))),UL.setInterval((()=>NN.sync()),1e3),_H.watch((()=>_H.getters["file/current"].id),(async()=>{const e=_H.getters["file/current"];if(e.id)try{await NN.loadContentState(e.id),await NN.loadSyncedContent(e.id);try{await NN.loadItem(`${e.id}/content`)}catch(t){const e=_H.getters["file/lastOpened"];throw _H.commit("file/setCurrentId",e.id),t}_H.dispatch("data/setLastOpenedId",e.id),_H.commit("discussion/setCurrentDiscussionId",_H.getters["discussion/nextDiscussionId"])}catch(t){_H.dispatch("notification/error",t)}else{const e=_H.getters["file/lastOpened"];if(e.id)_H.commit("file/setCurrentId",e.id);else{const e=await EN.createFile({name:"Welcome file",text:SN},!0);_H.commit("file/setCurrentId",e.id)}}}),{immediate:!0})},getWorkspaceItems(e,t,n=()=>{}){const r=new MN(e);return r.createTx((e=>{e.objectStore(IN).index("tx").openCursor().onsuccess=e=>{const i=e.target.result;i?(t(i.value),i.continue()):(r.db.close(),n())}})),()=>r.db.close()}},jN=e=>t=>NN.loadItem(`${t}/${e}`).catch((()=>_H.commit(`${e}/setItem`,{id:`${t}/${e}`})));NN.loadSyncedContent=jN("syncedContent"),NN.loadContentState=jN("contentState");const zN=new zM;function RN(e,t,n){if(!e||!e.discussions)return null;const r=[];Object.keys(e.discussions).sort().forEach((i=>{const o=e.discussions[i];function a(e){const a=i+e;if(void 0!==o[e]){let s=n[a];void 0===s&&(s=t.length,n[a]=s,t.push({id:i,offsetName:e})),r.push({idx:s,offset:o[e]})}}a("start"),a("end")}));let i=0,o="";return r.sort(((e,t)=>e.offset-t.offset)).forEach((t=>{o+=e.text.slice(i,t.offset)+String.fromCharCode(57344+t.idx),i=t.offset})),o+e.text.slice(i)}function qN(e){if(null==e)return e;const t={};return Object.keys(e).forEach((n=>{t[n]={text:e[n].text}})),t}function $N(e,t){if(t.length){let n=0;e.text=e.text.replace(new RegExp(`[-${String.fromCharCode(57344+t.length-1)}]`,"g"),((r,i)=>{const o=r.charCodeAt(0)-57344,a=t[o],s=e.discussions[a.id];return s&&(s[a.offsetName]=i-n),n+=1,""})),Object.keys(e.discussions).forEach((t=>{const n=e.discussions[t];void 0===n.start&&(n.start=n.end||0),(void 0===n.end||n.end<n.start)&&(n.end=n.start)}))}}function UN(e,t,n){if(!n)return e||t;const r=UL.serializeObject(t),i=UL.serializeObject(e);if(r===i)return e;const o=UL.serializeObject(n);return o===r||e?(o===i||t)&&o!==r&&o===i?t:e:t}function HN(e,t,n={}){const r={};return Object.keys({...t,...e}).forEach((i=>{const o=UN(e[i],t[i],n[i]);null!=o&&(r[i]=o)})),UL.deepCopy(r)}zN.Match_Distance=1e4;const WN={makePatchableText:RN,restoreDiscussionOffsets:$N,mergeObjects:HN,mergeContent:function(e,t,n={}){const r=[],i=Object.create(null),o=RN(n,r,i),a=RN(e,r,i),s=RN(t,r,i),l=o!==a,c=o!==s;let u=s;!(a===s)&&l&&(u=a,c&&(u=function(e,t,n){const r=zN.diff_main(e,t);zN.diff_cleanupSemantic(r);const i=r.map((e=>e[1])).join("");if(!n)return i;const o=r.filter((e=>e[0]===zM.DIFF_EQUAL)).map((e=>e[1])).join(""),a=zN.diff_main(n,o).filter((e=>e[0]!==zM.DIFF_INSERT));zN.diff_cleanupSemantic(a);const s=zN.patch_make(n,a);return zN.patch_apply(s,i)[0]}(a,s,o)));const h={text:u,properties:UN(e.properties,t.properties,n.properties),discussions:HN(qN(e.discussions),qN(t.discussions),qN(n.discussions)),comments:HN(e.comments,t.comments,n.comments),
// 
mergeFlag:l&&c};return $N(h,r),h}},GN={providersById:{},register(e){return this.providersById[e.id]=e,e}},VN=/<!--stackedit_data:([A-Za-z0-9+/=\s]+)-->\s*$/;let YN=class{constructor(e){t(this,"prepareChanges",(e=>e)),t(this,"onChangesApplied",(()=>{})),Object.assign(this,e),GN.register(this)}
/**
   * Serialize content in a self contain Markdown compatible format
   */static serializeContent(e){let t=e.text;const n={};if(e.properties.length>1&&(n.properties=e.properties),Object.keys(e.discussions).length&&(n.discussions=e.discussions),Object.keys(e.comments).length&&(n.comments=e.comments),e.history&&e.history.length&&(n.history=e.history),Object.keys(n).length){t+=`\x3c!--stackedit_data:\n${UL.encodeBase64(JSON.stringify(n)).replace(/(.{50})/g,"$1\n")}\n--\x3e`}return t}
/**
   * Parse content serialized with serializeContent()
   */static parseContent(e,t){let n=e;const r=VN.exec(e);let i;if(r){i=qM(t);try{const e=r[1].replace(/\s/g,""),t=JSON.parse(UL.decodeBase64(e));n=n.slice(0,r.index),t.properties&&(i.properties=UL.sanitizeText(t.properties)),t.discussions&&(i.discussions=t.discussions),t.comments&&(i.comments=t.comments),i.history=t.history}catch(i7){}}else i=UL.deepCopy(_H.state.content.itemsById[t])||qM(t);return i.text=UL.sanitizeText(n),i.history||(i.history=[]),UL.addItemHash(i)}
/**
   * Find and open a file with location that meets the criteria
   */static openFileWithLocation(e){const t=UL.search(_H.getters["syncLocation/items"],e);if(t){const e=_H.state.file.itemsById[t.fileId];if(e)return _H.commit("file/setCurrentId",e.id),"trash"===e.parentId&&EN.setOrPatchItem({...e,parentId:null}),!0}return!1}};const KN=(e,t)=>e.slice(-t.length)===t,XN={shaByPath:Object.create(null),makeChanges(e){const t=_H.getters["workspace/currentWorkspace"].path||"";this.shaByPath=Object.create(null);const n=Object.create(null),r=Object.create(null),i=Object.create(null),o=Object.create(null),a=Object.create(null);e.filter((({type:e,path:n})=>"blob"===e&&0===n.indexOf(t))).forEach((e=>{const s=e.path.slice(t.length);if(this.shaByPath[s]=e.sha,0===s.indexOf(".stackedit-data/"))i[s]=!0;else{let e="";s.split("/").slice(0,-1).forEach((t=>{const r=`${e}${t}/`;n[r]=e,e=r})),KN(s,".md")?r[s]=e:KN(s,".sync")?o[s]=!0:KN(s,".publish")&&(a[s]=!0)}}));const s=[],l={},c=_H.getters["data/syncDataById"],{itemIdsByGitPath:u}=_H.getters,h=(e,t)=>{let n=l[e];if(!n){const r=u[e];n=r&&(!t||c[e]||c[`/${e}`])?r:UL.uid(),t&&(l[`/${e}`]=`${n}/content`),l[e]=n}return n};Object.entries(n).forEach((([e,t])=>{if(".stackedit-trash/"===e)l[e]="trash";else{const n=UL.addItemHash({id:h(e),type:"folder",name:e.slice(t.length,-1),parentId:l[t]||null}),r=c[e];r&&r.hash===n.hash||s.push({syncDataId:e,item:n,syncData:{id:e,type:n.type,hash:n.hash}})}})),Object.entries(r).forEach((([e,t])=>{const n=h(e,!0),r=`/${e}`,i=l[r],o=UL.addItemHash({id:n,type:"file",name:e.slice(t.length,-3),parentId:l[t]||null}),a=c[e];a&&a.hash===o.hash||s.push({syncDataId:e,item:o,syncData:{id:e,type:o.type,hash:o.hash}});const u=c[r];if(!u||u.sha!==this.shaByPath[e]){const e="content";s.push({syncDataId:r,item:{id:i,type:e,
// Need a truthy value to force downloading the content
hash:1},syncData:{id:r,type:e,
// Need a truthy value to force downloading the content
hash:1}})}}));const d=_H.getters["data/syncDataById"];return Object.keys(i).forEach((e=>{const[,t]=e.match(/^\.stackedit-data\/(settings|workspaces|badgeCreations|templates)\.json$/)||[];if(t){l[e]=t,l[t]=t;const n=d[t];if(!n||n.sha!==this.shaByPath[e]){const e="data";s.push({syncDataId:t,item:{id:t,type:e,
// Need a truthy value to force saving sync data
hash:1},syncData:{id:t,type:e,
// Need a truthy value to force downloading the content
hash:1}})}}})),[{type:"syncLocation",map:o,pathMatcher:/^([\s\S]+)\.([\w-]+)\.sync$/},{type:"publishLocation",map:a,pathMatcher:/^([\s\S]+)\.([\w-]+)\.publish$/}].forEach((({type:e,map:t,pathMatcher:n})=>Object.keys(t).forEach((t=>{const[,r,i]=t.match(n)||[];if(r){const n=l[`${r}.md`];if(n){const r=u[t]||UL.uid();l[t]=r;const o=UL.addItemHash({...JSON.parse(UL.decodeBase64(i)),id:r,type:e,fileId:n}),a=c[t];a&&a.hash===o.hash||s.push({syncDataId:t,item:o,syncData:{id:t,type:o.type,hash:o.hash}})}}})))),Object.keys(c).forEach((e=>{l[e]||s.push({syncDataId:e})})),s}},ZN="stackedit-app-data",JN="master",QN=new YN({id:"giteeAppData",name:"Gitee",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams:()=>({}),getWorkspaceLocationUrl:()=>null,getSyncDataUrl:()=>null,getSyncDataDescription:({id:e})=>e,initWorkspace:async()=>_H.getters["workspace/workspacesById"].main,getChanges(){const e=this.getToken();return EO.getTree({owner:e.name,repo:ZN,branch:JN,token:e})},prepareChanges:e=>XN.makeChanges(e),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await EO.uploadFile({owner:n.name,repo:ZN,branch:JN,token:n,path:t.id,content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await EO.removeFile({owner:t.name,repo:ZN,branch:JN,token:t,path:e.id,sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await EO.downloadFile({owner:e.name,repo:ZN,branch:JN,token:e,path:r.id});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await EO.downloadFile({owner:e.name,repo:ZN,branch:JN,token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const n=`.stackedit-data/${t.id}.json`,{sha:r,data:i}=await EO.downloadFile({owner:e.name,repo:ZN,branch:JN,token:e,path:n});if(!r)return{};XN.shaByPath[n]=r;const o=JSON.parse(i);return{item:o,syncData:{...t,hash:o.hash,sha:r,type:"data"}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=i?n.path:_H.getters.gitPathsByItemId[n.id],a=await EO.uploadFile({owner:e.name,repo:ZN,branch:JN,token:e,path:o,content:i?n.content:YN.serializeContent(t),sha:XN.shaByPath[i?n.path:o],isImg:i,commitMessage:r});return i?{sha:a.content.sha}:{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:a.content.sha},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t,syncData:n}){const r=`.stackedit-data/${t.id}.json`,i=await EO.uploadFile({token:e,owner:e.name,repo:ZN,branch:JN,path:r,content:JSON.stringify(t),sha:XN.shaByPath[r]});return{syncData:{...n,type:t.type,hash:t.hash,data:t.data,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{owner:n,repo:r,branch:i}={owner:e.name,repo:ZN,branch:JN};return(await EO.getCommits({token:e,owner:n,repo:r,sha:i,path:t})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${EO.subPrefix}:${i.login}`;i.avatar_url&&i.avatar_url.endsWith(".png")&&!i.avatar_url.endsWith("no_portrait.png")&&(i.avatar_url=`${i.avatar_url}!avatar60`),wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date||1;return{id:r,sub:o,message:n.message,created:new Date(a).getTime()}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await EO.downloadFile({owner:e.name,repo:ZN,branch:r,token:e,path:n});return YN.parseContent(i,t)},getFilePathUrl(e){const t=this.getToken();return t?`https://gitee.com/${t.name}/${ZN}/blob/${JN}${e}`:null}}),ej="stackedit-app-data",tj="master",nj=new YN({id:"githubAppData",name:"Gitee",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams:()=>({}),getWorkspaceLocationUrl:()=>null,getSyncDataUrl:()=>null,getSyncDataDescription:({id:e})=>e,initWorkspace:async()=>_H.getters["workspace/workspacesById"].main,getChanges(){const e=this.getToken();return MO.getTree({owner:e.name,repo:ej,branch:tj,token:e})},prepareChanges:e=>XN.makeChanges(e),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await MO.uploadFile({owner:n.name,repo:ej,branch:tj,token:n,path:t.id,content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await MO.removeFile({owner:t.name,repo:ej,branch:tj,token:t,path:e.id,sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await MO.downloadFile({owner:e.name,repo:ej,branch:tj,token:e,path:r.id});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await MO.downloadFile({owner:e.name,repo:ej,branch:tj,token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const n=`.stackedit-data/${t.id}.json`,{sha:r,data:i}=await MO.downloadFile({owner:e.name,repo:ej,branch:tj,token:e,path:n});if(!r)return{};XN.shaByPath[n]=r;const o=JSON.parse(i);return{item:o,syncData:{...t,hash:o.hash,sha:r,type:"data"}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=i?n.path:_H.getters.gitPathsByItemId[n.id],a=await MO.uploadFile({owner:e.name,repo:ej,branch:tj,token:e,path:o,content:i?n.content:YN.serializeContent(t),sha:XN.shaByPath[i?n.path:o],isImg:i,commitMessage:r});return i?{sha:a.content.sha}:{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:a.content.sha},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t,syncData:n}){const r=`.stackedit-data/${t.id}.json`,i=await MO.uploadFile({token:e,owner:e.name,repo:ej,branch:tj,path:r,content:JSON.stringify(t),sha:XN.shaByPath[r]});return{syncData:{...n,type:t.type,hash:t.hash,data:t.data,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{owner:n,repo:r,branch:i}={owner:e.name,repo:ej,branch:tj};return(await MO.getCommits({token:e,owner:n,repo:r,sha:i,path:t})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${MO.subPrefix}:${i.login}`;i.avatar_url&&i.avatar_url.endsWith(".png")&&!i.avatar_url.endsWith("no_portrait.png")&&(i.avatar_url=`${i.avatar_url}!avatar60`),wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date||1;return{id:r,sub:o,message:n.message,created:new Date(a).getTime()}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await MO.downloadFile({owner:e.name,repo:ej,branch:r,token:e,path:n});return YN.parseContent(i,t)},getFilePathUrl(e){const t=this.getToken();return t?`https://github.com/${t.name}/${ej}/blob/${tj}${e}`:null}}),rj=async(e,t={})=>{const n=`${e.dbUrl}/`,r=()=>_H.getters["data/couchdbTokensBySub"][e.sub],i=e=>{if(401!==e.status)throw e},o=async()=>{try{const{name:e,password:t}=r();await dO.request({method:"POST",url:UL.resolveUrl(n,"../_session"),withCredentials:!0,body:{name:e,password:t}})}catch(e){i(e),await _H.dispatch("modal/open",{type:"couchdbCredentials",token:r()}),await o()}},a={...t,headers:{Accept:"application/json",...t.headers||{}},url:UL.resolveUrl(n,t.path||"."),withCredentials:!0};try{let e;try{e=await dO.request(a)}catch(s){i(s),await o(),e=await dO.request(a)}return e.body}catch(s){if(409===s.status)throw new Error("TOO_LATE");throw s}},ij={
/**
   * http://docs.couchdb.org/en/2.1.1/api/database/common.html#db
   */
getDb:e=>rj(e),
/**
   * http://docs.couchdb.org/en/2.1.1/api/database/changes.html#db-changes
   */
async getChanges(e,t){const n={changes:[],lastSeq:t},r=async()=>{const t=await rj(e,{method:"GET",path:"_changes",params:{since:n.lastSeq||0,include_docs:!0,limit:1e3}});return n.changes=[...n.changes,...t.results],n.lastSeq=t.last_seq,t.pending?r():n};return r()},
/**
   * http://docs.couchdb.org/en/2.1.1/api/database/common.html#post--db
   * http://docs.couchdb.org/en/2.1.1/api/document/common.html#put--db-docid
   */
async uploadDocument({token:e,item:t,data:n=null,dataType:r=null,documentId:i=null,rev:o=null}){const a={method:"POST",body:{item:t,time:Date.now()}},s=wO.getCurrentUserId();return s&&(a.body.sub=s),i&&(a.method="PUT",a.path=i,a.body._rev=o),n&&(a.body._attachments={
// eslint-disable-line no-underscore-dangle
data:{content_type:r,data:UL.encodeBase64(n)}}),rj(e,a)},
/**
   * http://docs.couchdb.org/en/2.1.1/api/document/common.html#delete--db-docid
   */
async removeDocument(e,t,n){if(!t)throw new Error("Missing document ID");return rj(e,{method:"DELETE",path:t,params:{rev:n}})},
/**
   * http://docs.couchdb.org/en/2.1.1/api/document/common.html#get--db-docid
   */
retrieveDocument:async(e,t,n)=>rj(e,{path:t,params:{rev:n}}),
/**
   * http://docs.couchdb.org/en/2.1.1/api/document/common.html#get--db-docid
   */
async retrieveDocumentWithAttachments(e,t,n){const r=await rj(e,{path:t,params:{attachments:!0,rev:n}});return r.attachments={},Object.entries(r._attachments).forEach((([e,t])=>{r.attachments[e]=UL.decodeBase64(t.data)})),r},
/**
   * http://docs.couchdb.org/en/2.1.1/api/document/common.html#get--db-docid
   */
retrieveDocumentWithRevisions:async(e,t)=>rj(e,{path:t,params:{revs_info:!0}})};let oj;new YN({id:"couchdbWorkspace",name:"CouchDB",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({dbUrl:e}){return{providerId:this.id,dbUrl:e}},getWorkspaceLocationUrl:({dbUrl:e})=>e,getSyncDataUrl(e,{id:t}){const{dbUrl:n}=this.getToken();return`${n}/${t}/data`},getSyncDataDescription:(e,{id:t})=>t,async initWorkspace(){const e=(UL.queryParams.dbUrl||"").replace(/\/?$/,""),t=this.getWorkspaceParams({dbUrl:e}),n=UL.makeWorkspaceId(t);if(_H.getters["data/couchdbTokensBySub"][n]||_H.dispatch("data/addCouchdbToken",{sub:n,dbUrl:e}),!_H.getters["workspace/workspacesById"][n])try{const t=await ij.getDb(_H.getters["data/couchdbTokensBySub"][n]);_H.dispatch("workspace/patchWorkspacesById",{[n]:{id:n,name:t.db_name,providerId:this.id,dbUrl:e}})}catch(i7){throw new Error(`${e} is not accessible. Make sure you have the proper permissions.`)}return OF.addBadge("addCouchdbWorkspace"),_H.getters["workspace/workspacesById"][n]},async getChanges(){const e=_H.getters["workspace/syncToken"],t=_H.getters["data/localSettings"].syncLastSeq,n=await ij.getChanges(e,t),r=n.changes.filter((e=>{if(!e.deleted&&e.doc){if(e.item=e.doc.item,!e.item||!e.item.id||!e.item.type)return!1;e.syncData={id:e.id,itemId:e.item.id,type:e.item.type,hash:e.item.hash,rev:e.doc._rev}}return e.syncDataId=e.id,!0}));return oj=n.lastSeq,r},onChangesApplied(){_H.dispatch("data/patchLocalSettings",{syncLastSeq:oj})},async saveWorkspaceItem({item:e,syncData:t}){const n=_H.getters["workspace/syncToken"],{id:r,rev:i}=await ij.uploadDocument({token:n,item:e,documentId:t&&t.id,rev:t&&t.rev});return{syncData:{id:r,itemId:e.id,type:e.type,hash:e.hash,rev:i}}},removeWorkspaceItem({syncData:e}){const t=_H.getters["workspace/syncToken"];return ij.removeDocument(t,e.id,e.rev)},async downloadWorkspaceContent({token:e,contentSyncData:t}){const n=await ij.retrieveDocumentWithAttachments(e,t.id),r=n._rev,i=YN.parseContent(n.attachments.data,n.item.id);return{content:i,contentSyncData:{...t,hash:i.hash,rev:r}}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const n=await ij.retrieveDocumentWithAttachments(e,t.id),r=UL.addItemHash(JSON.parse(n.attachments.data)),i=n._rev;return{item:r,syncData:{...t,hash:r.hash,rev:i}}},async uploadWorkspaceContent({token:e,content:t,contentSyncData:n}){const r=await ij.uploadDocument({token:e,item:{id:t.id,type:t.type,hash:t.hash},data:YN.serializeContent(t),dataType:"text/plain",documentId:n&&n.id,rev:n&&n.rev});return{contentSyncData:{id:r.id,itemId:t.id,type:t.type,hash:t.hash,rev:r.rev}}},async uploadWorkspaceData({token:e,item:t,syncData:n}){const r=await ij.uploadDocument({token:e,item:{id:t.id,type:t.type,hash:t.hash},data:JSON.stringify(t),dataType:"application/json",documentId:n&&n.id,rev:n&&n.rev});return{syncData:{id:r.id,itemId:t.id,type:t.type,hash:t.hash,rev:r.rev}}},async listFileRevisions({token:e,contentSyncDataId:t}){const n=await ij.retrieveDocumentWithRevisions(e,t),r=[];return n._revs_info.forEach(((e,t)=>{"available"===e.status&&r.push({id:e.rev,sub:null,created:t,loaded:!1})})),r},async loadFileRevision({token:e,contentSyncDataId:t,revision:n}){if(n.loaded)return!1;const r=await ij.retrieveDocument(e,t,n.id);return n.sub=r.sub,n.created=r.time,n.loaded=!0,!0},async getFileRevisionContent({token:e,contentSyncDataId:t,revisionId:n}){const r=await ij.retrieveDocumentWithAttachments(e,t,n);return YN.parseContent(r.attachments.data,r.item.id)}});const aj=({id:e})=>`${_H.getters["workspace/currentWorkspace"].path||""}${e}`;new YN({id:"githubWorkspace",name:"GitHub",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({owner:e,repo:t,branch:n,path:r}){return{providerId:this.id,owner:e,repo:t,branch:n,path:r}},getWorkspaceLocationUrl:({owner:e,repo:t,branch:n,path:r})=>`https://github.com/${encodeURIComponent(e)}/${encodeURIComponent(t)}/tree/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getSyncDataUrl({id:e}){const{owner:t,repo:n,branch:r}=_H.getters["workspace/currentWorkspace"];return`https://github.com/${encodeURIComponent(t)}/${encodeURIComponent(n)}/tree/${encodeURIComponent(r)}/${UL.encodeUrlPath(aj({id:e}))}`},getSyncDataDescription:({id:e})=>aj({id:e}),async initWorkspace(){const{owner:e,repo:t,branch:n}=UL.queryParams,r=this.getWorkspaceParams({owner:e,repo:t,branch:n});n||(r.branch="master");const i=(UL.queryParams.path||"").trim().replace(/^\/*/,"").replace(/\/*$/,"/");"/"!==i&&(r.path=i);const o=UL.makeWorkspaceId(r),a=_H.getters["workspace/workspacesById"][o];let s;if(a&&(s=_H.getters["data/githubTokensBySub"][a.sub]),s||(await _H.dispatch("modal/open",{type:"githubAccount"}),s=await MO.addAccount(_H.getters["data/localSettings"].githubRepoFullAccess)),!a){const e=(i||"").split("/"),n=e[e.length-2]||t;_H.dispatch("workspace/patchWorkspacesById",{[o]:{...r,id:o,sub:s.sub,name:n}})}return OF.addBadge("addGithubWorkspace"),_H.getters["workspace/workspacesById"][o]},getChanges(){return MO.getTree({..._H.getters["workspace/currentWorkspace"],token:this.getToken()})},prepareChanges:e=>XN.makeChanges(e),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await MO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:n,path:aj(t),content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await MO.removeFile({..._H.getters["workspace/currentWorkspace"],token:t,path:aj(e),sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await MO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:aj(r)});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await MO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const{sha:n,data:r}=await MO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:aj(t)});XN.shaByPath[t.id]=n;const i=JSON.parse(r);return{item:i,syncData:{...t,hash:i.hash,sha:n}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=_H.getters.gitPathsByItemId[n.id]||"",a=i?n.path:`${_H.getters["workspace/currentWorkspace"].path||""}${o}`,s=await MO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:a,content:i?n.content:YN.serializeContent(t),sha:XN.shaByPath[i?n.path:o],isImg:i,commitMessage:r});return i?{sha:s.content.sha}:{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:s.content.sha},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t}){const n=_H.getters.gitPathsByItemId[t.id],r={id:n,type:t.type,hash:t.hash},i=await MO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:aj(r),content:JSON.stringify(t),sha:XN.shaByPath[n]});return{syncData:{...r,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{owner:n,repo:r,branch:i}=_H.getters["workspace/currentWorkspace"];return(await MO.getCommits({token:e,owner:n,repo:r,sha:i,path:aj({id:t})})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login?i=t:n&&n.author&&(i=n.author);const o=`${MO.subPrefix}:${i.id||i.name}`;wO.addUserInfo({id:o,name:i.login||i.name,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date||1;return{id:r,sub:o,message:n.message,created:new Date(a).getTime()}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await MO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,branch:r,path:aj({id:n})});return YN.parseContent(i,t)},getFilePathUrl(e){const t=_H.getters["workspace/currentWorkspace"];return`https://github.com/${t.owner}/${t.repo}/blob/${t.branch}${e}`}});const sj=({id:e})=>`${_H.getters["workspace/currentWorkspace"].path||""}${e}`;new YN({id:"giteeWorkspace",name:"Gitee",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({owner:e,repo:t,branch:n,path:r}){return{providerId:this.id,owner:e,repo:t,branch:n,path:r}},getWorkspaceLocationUrl:({owner:e,repo:t,branch:n,path:r})=>`https://gitee.com/${encodeURIComponent(e)}/${encodeURIComponent(t)}/tree/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getSyncDataUrl({id:e}){const{owner:t,repo:n,branch:r}=_H.getters["workspace/currentWorkspace"];return`https://gitee.com/${encodeURIComponent(t)}/${encodeURIComponent(n)}/tree/${encodeURIComponent(r)}/${UL.encodeUrlPath(sj({id:e}))}`},getSyncDataDescription:({id:e})=>sj({id:e}),async initWorkspace(){const{owner:e,repo:t,branch:n}=UL.queryParams,r=this.getWorkspaceParams({owner:e,repo:t,branch:n});n||(r.branch="master");const i=(UL.queryParams.path||"").trim().replace(/^\/*/,"").replace(/\/*$/,"/");"/"!==i&&(r.path=i);const o=UL.makeWorkspaceId(r),a=_H.getters["workspace/workspacesById"][o];let s;if(a&&(s=_H.getters["data/giteeTokensBySub"][a.sub]),s||(await _H.dispatch("modal/open",{type:"giteeAccount"}),s=await EO.addAccount()),!a){const e=(i||"").split("/"),n=e[e.length-2]||t;_H.dispatch("workspace/patchWorkspacesById",{[o]:{...r,id:o,sub:s.sub,name:n}})}return OF.addBadge("addGiteeWorkspace"),_H.getters["workspace/workspacesById"][o]},getChanges(){return EO.getTree({..._H.getters["workspace/currentWorkspace"],token:this.getToken()})},prepareChanges:e=>XN.makeChanges(e),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await EO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:n,path:sj(t),content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await EO.removeFile({..._H.getters["workspace/currentWorkspace"],token:t,path:sj(e),sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await EO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:sj(r)});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await EO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const{sha:n,data:r}=await EO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:sj(t)});XN.shaByPath[t.id]=n;const i=JSON.parse(r);return{item:i,syncData:{...t,hash:i.hash,sha:n}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=_H.getters.gitPathsByItemId[n.id]||"",a=i?n.path:`${_H.getters["workspace/currentWorkspace"].path||""}${o}`,s=await EO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:a,content:i?n.content:YN.serializeContent(t),sha:XN.shaByPath[i?n.path:o],isImg:i,commitMessage:r});return i?{sha:s.content.sha}:{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:s.content.sha},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t}){const n=_H.getters.gitPathsByItemId[t.id],r={id:n,type:t.type,hash:t.hash},i=await EO.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:sj(r),content:JSON.stringify(t),sha:XN.shaByPath[n]});return{syncData:{...r,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{owner:n,repo:r,branch:i}=_H.getters["workspace/currentWorkspace"];return(await EO.getCommits({token:e,owner:n,repo:r,sha:i,path:sj({id:t})})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${EO.subPrefix}:${i.login}`;i.avatar_url&&i.avatar_url.endsWith(".png")&&!i.avatar_url.endsWith("no_portrait.png")&&(i.avatar_url=`${i.avatar_url}!avatar60`),wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date||1;return{id:r,sub:o,message:n.message,created:new Date(a).getTime()}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await EO.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,branch:r,path:sj({id:n})});return YN.parseContent(i,t)},getFilePathUrl(e){const t=_H.getters["workspace/currentWorkspace"];return`https://gitee.com/${t.owner}/${t.repo}/blob/${t.branch}${e}`}});const lj=({accessToken:e,serverUrl:t},n)=>dO.request({...n,url:`${t}/api/v4/${n.url}`,headers:{...n.headers||{},Authorization:`Bearer ${e}`}}).then((e=>e.body)),cj=(e,t)=>_H.getters["data/computedSettings"].git[e].replace(/{{path}}/g,t),uj="gl";wO.setInfoResolver("gitlab",uj,(async e=>{try{const[,t,n]=e.match(/^(.+)\/([^/]+)$/),r=(await dO.request({url:`${t}/api/v4/users/${n}`})).body,i=`${t}/${r.id}`;return{id:`${uj}:${i}`,name:r.username,imageUrl:r.avatar_url||""}}catch(t){if(404!==t.status)throw new Error("RETRY");throw t}}));const hj={subPrefix:uj,
/**
   * https://docs.gitlab.com/ee/api/oauth2.html
   */
async startOauth2(e,t,n,r=null,i=!1,o){let a=e,s=t,l=!1;await dO.getServerConf();const c=_H.getters["data/serverConf"].gitlabClientId,u=_H.getters["data/serverConf"].gitlabUrl;let h;if(c&&u&&(a=u,s=c,l=!0),i)h=l?(await dO.request({method:"GET",url:"oauth2/gitlabToken",params:{refresh_token:o,grant_type:"refresh_token",redirect_uri:ML.oauth2RedirectUri}})).body:(await dO.request({method:"POST",url:`${a}/oauth/token`,body:{client_id:s,client_secret:n,refresh_token:o,grant_type:"refresh_token",redirect_uri:ML.oauth2RedirectUri}})).body;else{const{code:e}=await dO.startOauth2(`${a}/oauth/authorize`,{client_id:s,response_type:"code",redirect_uri:ML.oauth2RedirectUri},i);h=l?(await dO.request({method:"GET",url:"oauth2/gitlabToken",params:{code:e,grant_type:"authorization_code",redirect_uri:ML.oauth2RedirectUri}})).body:(await dO.request({method:"POST",url:`${a}/oauth/token`,params:{client_id:s,client_secret:n,code:e,grant_type:"authorization_code",redirect_uri:ML.oauth2RedirectUri}})).body}const d=h.access_token,p=await lj({accessToken:d,serverUrl:a},{url:"user"}),f=`${a}/${p.id}`;if(wO.addUserInfo({id:`${uj}:${f}`,name:p.username,imageUrl:p.avatar_url||""}),r&&f!==r)throw new Error("GitLab account ID not expected.");const m=_H.getters["data/gitlabTokensBySub"][f],g={accessToken:d,name:p.username,applicationId:s,applicationSecret:n,imgStorages:m&&m.imgStorages,refreshToken:h.refresh_token,expiresOn:Date.now()+1e3*(h.expires_in||7200),serverUrl:a,sub:f};return _H.dispatch("data/addGitlabToken",g),g},async addAccount(e,t,n,r=null){const i=await this.startOauth2(e,t,n,r);return OF.addBadge("addGitLabAccount"),i},
// token
async refreshToken(e){const{serverUrl:t,applicationId:n,applicationSecret:r,sub:i}=e,o=_H.getters["data/gitlabTokensBySub"][i];if(!o.expiresOn||!o.refreshToken)return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitlab"}),this.startOauth2(t,n,r,i);if(o.expiresOn>Date.now()+3e5)return o;try{return await this.startOauth2(t,n,r,i,!0,o.refreshToken)}catch(a){if(_H.state.offline)throw a;return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitlab"}),this.startOauth2(t,n,r,i)}},
// token
async requestWithRefreshToken(e,t){const n=await this.refreshToken(e);return await lj(n,t)},
/**
   * https://docs.gitlab.com/ee/api/projects.html#get-single-project
   */
async getProjectId(e,{projectPath:t,projectId:n}){if(n)return n;return(await this.requestWithRefreshToken(e,{url:`projects/${encodeURIComponent(t)}`})).id},
/**
   * https://docs.gitlab.com/ee/api/repositories.html#list-repository-tree
   */
async getTree({token:e,projectId:t,branch:n}){return this.requestWithRefreshToken(e,{url:`projects/${encodeURIComponent(t)}/repository/tree`,params:{ref:n,recursive:!0,per_page:9999}})},
/**
   * https://docs.gitlab.com/ee/api/commits.html#list-repository-commits
   */
async getCommits({token:e,projectId:t,branch:n,path:r}){return this.requestWithRefreshToken(e,{url:`projects/${encodeURIComponent(t)}/repository/commits`,params:{ref_name:n,path:r}})},
/**
   * https://docs.gitlab.com/ee/api/repository_files.html#create-new-file-in-repository
   * https://docs.gitlab.com/ee/api/repository_files.html#update-existing-file-in-repository
   */
async uploadFile({token:e,projectId:t,branch:n,path:r,content:i,sha:o,isImg:a,commitMessage:s}){if(!r||r.endsWith("undefined"))return new Promise((e=>{e({res:{content:{sha:null}}})}));let l=i;return a&&"string"!=typeof i&&(l=await UL.encodeFiletoBase64(i)),this.requestWithRefreshToken(e,{method:o?"PUT":"POST",url:`projects/${encodeURIComponent(t)}/repository/files/${encodeURIComponent(r)}`,body:{commit_message:s||cj(o?"updateFileMessage":"createFileMessage",r),encoding:"base64",content:a?l:UL.encodeBase64(i),last_commit_id:o,branch:n}})},
/**
   * https://docs.gitlab.com/ee/api/repository_files.html#delete-existing-file-in-repository
   */
async removeFile({token:e,projectId:t,branch:n,path:r,sha:i}){return this.requestWithRefreshToken(e,{method:"DELETE",url:`projects/${encodeURIComponent(t)}/repository/files/${encodeURIComponent(r)}`,body:{commit_message:cj("deleteFileMessage",r),last_commit_id:i,branch:n}})},
/**
   * https://docs.gitlab.com/ee/api/repository_files.html#get-file-from-repository
   */
async downloadFile({token:e,projectId:t,branch:n,path:r,isImg:i}){const o=await this.requestWithRefreshToken(e,{url:`projects/${encodeURIComponent(t)}/repository/files/${encodeURIComponent(r)}`,params:{ref:n}});return{sha:o.last_commit_id,data:i?o.content:UL.decodeBase64(o.content)}}},dj=({id:e})=>`${_H.getters["workspace/currentWorkspace"].path||""}${e}`;new YN({id:"gitlabWorkspace",name:"GitLab",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({serverUrl:e,projectPath:t,branch:n,path:r}){return{providerId:this.id,serverUrl:e,projectPath:t,branch:n,path:r}},getWorkspaceLocationUrl:({serverUrl:e,projectPath:t,branch:n,path:r})=>`${e}/${t}/blob/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getSyncDataUrl({id:e}){const{projectPath:t,branch:n}=_H.getters["workspace/currentWorkspace"],{serverUrl:r}=this.getToken();return`${r}/${t}/blob/${encodeURIComponent(n)}/${UL.encodeUrlPath(dj({id:e}))}`},getSyncDataDescription:({id:e})=>dj({id:e}),async initWorkspace(){const{serverUrl:e,branch:t}=UL.queryParams,n=this.getWorkspaceParams({serverUrl:e,branch:t});t||(n.branch="master");const r=(UL.queryParams.projectPath||"").trim().replace(/^\/*/,"").replace(/\/*$/,"");n.projectPath=r;const i=(UL.queryParams.path||"").trim().replace(/^\/*/,"").replace(/\/*$/,"/");"/"!==i&&(n.path=i);const o=UL.makeWorkspaceId(n),a=_H.getters["workspace/workspacesById"][o],s=a?a.sub:UL.queryParams.sub;let l=_H.getters["data/gitlabTokensBySub"][s];if(!l){const{applicationId:t,applicationSecret:n}=await _H.dispatch("modal/open",{type:"gitlabAccount",forceServerUrl:e});l=await hj.addAccount(e,t,n,s)}if(!a){const e=await hj.getProjectId(l,n),t=(i||"").split("/"),a=(r||"").split("/"),s=t[t.length-2]||a[a.length-1];_H.dispatch("workspace/patchWorkspacesById",{[o]:{...n,projectId:e,id:o,sub:l.sub,name:s}})}return OF.addBadge("addGitlabWorkspace"),_H.getters["workspace/workspacesById"][o]},getChanges(){return hj.getTree({..._H.getters["workspace/currentWorkspace"],token:this.getToken()})},prepareChanges:e=>XN.makeChanges(e.map((e=>({...e,sha:e.id})))),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await hj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:n,path:dj(t),content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await hj.removeFile({..._H.getters["workspace/currentWorkspace"],token:t,path:dj(e),sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await hj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:dj(r)});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await hj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const{sha:n,data:r}=await hj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:dj(t)});XN.shaByPath[t.id]=n;const i=JSON.parse(r);return{item:i,syncData:{...t,hash:i.hash,sha:n}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=_H.getters.gitPathsByItemId[n.id],a=i?n.path:`${_H.getters["workspace/currentWorkspace"].path||""}${o}`,s=XN.shaByPath[i?n.path:o];if(await hj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:a,content:i?n.content:YN.serializeContent(t),sha:s,isImg:i,commitMessage:r}),i){return{sha:(await this.downloadFile({token:e,path:a})).sha}}return{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:s},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t}){const n=_H.getters.gitPathsByItemId[t.id],r={id:n,type:t.type,hash:t.hash},i=await hj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:dj(r),content:JSON.stringify(t),sha:XN.shaByPath[n]});return{syncData:{...r,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{projectId:n,branch:r}=_H.getters["workspace/currentWorkspace"];return(await hj.getCommits({token:e,projectId:n,sha:r,path:dj({id:t})})).map((t=>{const n=t.author_email||t.committer_email,r=`${hj.subPrefix}:${e.serverUrl}/${n}`;wO.addUserInfo({id:r,name:t.author_name||t.committer_name,imageUrl:""});const i=t.authored_date||t.committed_date||1;return{id:t.id,sub:r,message:t.commit&&t.commit.message,created:i?new Date(i).getTime():1}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await hj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,branch:r,path:dj({id:n})});return YN.parseContent(i,t)}});const pj=({accessToken:e,serverUrl:t},n)=>dO.request({...n,url:`${t}/api/v1/${n.url}`,headers:{...n.headers||{},Authorization:`Bearer ${e}`}}).then((e=>e.body)),fj=(e,t)=>_H.getters["data/computedSettings"].git[e].replace(/{{path}}/g,t),mj="gt";wO.setInfoResolver("gitea",mj,(async e=>{try{const[,t,n]=e.match(/^(.+)\/([^/]+)$/),r=(await dO.request({url:`${t}/api/v1/users/${n}`})).body,i=`${t}/${r.username}`;return{id:`${mj}:${i}`,name:r.username,imageUrl:r.avatar_url||""}}catch(t){if(404!==t.status)throw new Error("RETRY");throw t}}));const gj={subPrefix:mj,
/**
   * https://docs.gitea.io/en-us/oauth2-provider/
   */
async startOauth2(e,t,n,r=null,i=!1,o){let a=e,s=t,l=!1;await dO.getServerConf();const c=_H.getters["data/serverConf"].giteaClientId,u=_H.getters["data/serverConf"].giteaUrl;let h;if(c&&u&&(a=u,s=c,l=!0),i)h=l?(await dO.request({method:"GET",url:"oauth2/giteaToken",params:{refresh_token:o,grant_type:"refresh_token",redirect_uri:ML.oauth2RedirectUri}})).body:(await dO.request({method:"POST",url:`${a}/login/oauth/access_token`,body:{client_id:s,client_secret:n,refresh_token:o,grant_type:"refresh_token",redirect_uri:ML.oauth2RedirectUri}})).body;else{const{code:e}=await dO.startOauth2(`${a}/login/oauth/authorize`,{client_id:s,response_type:"code",redirect_uri:ML.oauth2RedirectUri},i);h=l?(await dO.request({method:"GET",url:"oauth2/giteaToken",params:{code:e,grant_type:"authorization_code",redirect_uri:ML.oauth2RedirectUri}})).body:(await dO.request({method:"POST",url:`${a}/login/oauth/access_token`,body:{client_id:s,client_secret:n,code:e,grant_type:"authorization_code",redirect_uri:ML.oauth2RedirectUri}})).body}const d=h.access_token,p=await pj({accessToken:d,serverUrl:a},{url:"user"}),f=`${a}/${p.username}`;if(wO.addUserInfo({id:`${mj}:${f}`,name:p.username,imageUrl:p.avatar_url||""}),r&&f!==r)throw new Error("Gitea account ID not expected.");const m=_H.getters["data/giteaTokensBySub"][f],g={accessToken:d,name:p.username,applicationId:s,applicationSecret:n,imgStorages:m&&m.imgStorages,refreshToken:h.refresh_token,expiresOn:Date.now()+1e3*h.expires_in,serverUrl:a,sub:f};return _H.dispatch("data/addGiteaToken",g),g},
// token
async refreshToken(e){const{serverUrl:t,applicationId:n,applicationSecret:r,sub:i}=e,o=_H.getters["data/giteaTokensBySub"][i];if(!o.expiresOn)return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitea"}),this.startOauth2(t,n,r,i);if(o.expiresOn>Date.now()+3e5)return o;try{return await this.startOauth2(t,n,r,i,!0,o.refreshToken)}catch(a){if(_H.state.offline)throw a;return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Gitea"}),this.startOauth2(t,n,r,i)}},async addAccount({serverUrl:e,applicationId:t,applicationSecret:n},r=null){const i=await this.startOauth2(e,t,n,r);return OF.addBadge("addGiteaAccount"),i},async updateToken(e,t){const n=e.imgStorages||[],r=UL.hash(`${t.repoUri}${t.path}${t.branch}`),i=n.filter((e=>e.sid===r));i&&i.length>0?(i.repoUri=t.repoUri,i.path=t.path,i.branch=t.branch):(n.push({sid:r,repoUri:t.repoUri,path:t.path,branch:t.branch}),e.imgStorages=n),_H.dispatch("data/addGiteaToken",e)},async removeTokenImgStorage(e,t){e.imgStorages&&0!==e.imgStorages.length&&(e.imgStorages=e.imgStorages.filter((e=>e.sid!==t)),_H.dispatch("data/addGiteaToken",e))},async getProjectId(e,{projectPath:t,projectId:n}){if(n)return n;return(await this.getRepoInfo(e,t)).full_name},
/**
   * https://try.gitea.io/api/swagger#/repository/repoGet
   */
async getRepoInfo(e,t){const[,n]=t.match(/([^/]+\/[^/]+)$/),r=await this.refreshToken(e);return pj(r,{url:`repos/${n}`})},
/**
   * https://try.gitea.io/api/swagger#/repository/GetTree
   */
async getTree({token:e,projectId:t,branch:n}){const r=await this.refreshToken(e);return pj(r,{url:`repos/${t}/git/trees/${n}`,params:{recursive:!0,per_page:9999}})},
/**
   * https://try.gitea.io/api/swagger#/repository/repoGetAllCommits
   */
async getCommits({token:e,projectId:t,branch:n,path:r}){const i=await this.refreshToken(e);return pj(i,{url:`repos/${t}/commits`,params:{sha:n,path:r}})},
/**
   * https://try.gitea.io/api/swagger#/repository/repoCreateFile
   * https://try.gitea.io/api/swagger#/repository/repoUpdateFile
   */
async uploadFile({token:e,projectId:t,branch:n,path:r,content:i,sha:o,isImg:a,commitMessage:s}){if(!r||r.endsWith("undefined"))return new Promise((e=>{e({res:{content:{sha:null}}})}));let l=i;a&&"string"!=typeof i&&(l=await UL.encodeFiletoBase64(i));const c=await this.refreshToken(e);return pj(c,{method:o?"PUT":"POST",url:`repos/${t}/contents/${encodeURIComponent(r)}`,body:{message:s||fj(o?"updateFileMessage":"createFileMessage",r),content:a?l:UL.encodeBase64(i),sha:o,branch:n}})},
/**
   * https://try.gitea.io/api/swagger#/repository/repoDeleteFile
   */
async removeFile({token:e,projectId:t,branch:n,path:r,sha:i}){const o=await this.refreshToken(e);return pj(o,{method:"DELETE",url:`repos/${t}/contents/${encodeURIComponent(r)}`,body:{message:fj("deleteFileMessage",r),sha:i,branch:n}})},
/**
   * https://try.gitea.io/api/swagger#/repository/repoGetContents
   */
async downloadFile({token:e,projectId:t,branch:n,path:r,isImg:i}){const o=await this.refreshToken(e),{sha:a,content:s}=await pj(o,{url:`repos/${t}/contents/${encodeURIComponent(r)}`,params:{ref:n}});return{sha:a,data:i?s:UL.decodeBase64(s)}}},vj=({id:e})=>`${_H.getters["workspace/currentWorkspace"].path||""}${e}`;new YN({id:"giteaWorkspace",name:"Gitea",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({serverUrl:e,projectPath:t,branch:n,path:r}){return{providerId:this.id,serverUrl:e,projectPath:t,branch:n,path:r}},getWorkspaceLocationUrl:({serverUrl:e,projectPath:t,branch:n,path:r})=>`${e}/${t}/src/branch/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getSyncDataUrl({id:e}){const{projectPath:t,branch:n}=_H.getters["workspace/currentWorkspace"],{serverUrl:r}=this.getToken();return`${r}/${t}/src/branch/${encodeURIComponent(n)}/${UL.encodeUrlPath(vj({id:e}))}`},getSyncDataDescription:({id:e})=>vj({id:e}),async initWorkspace(){const{serverUrl:e,branch:t}=UL.queryParams,n=this.getWorkspaceParams({serverUrl:e,branch:t});t||(n.branch="master");const r=(UL.queryParams.projectPath||"").trim().replace(/^\/*/,"").replace(/\/*$/,"");n.projectPath=r;const i=(UL.queryParams.path||"").trim().replace(/^\/*/,"").replace(/\/*$/,"/");"/"!==i&&(n.path=i);const o=UL.makeWorkspaceId(n),a=_H.getters["workspace/workspacesById"][o],s=a?a.sub:UL.queryParams.sub;let l=_H.getters["data/giteaTokensBySub"][s];if(!l){const t=await _H.dispatch("modal/open",{type:"giteaAccount",forceServerUrl:e});l=await gj.addAccount(t,s)}if(!a){const e=await gj.getProjectId(l,n),t=(i||"").split("/"),a=(r||"").split("/"),s=t[t.length-2]||a[a.length-1];_H.dispatch("workspace/patchWorkspacesById",{[o]:{...n,projectId:e,id:o,sub:l.sub,name:s}})}return OF.addBadge("addGiteaWorkspace"),_H.getters["workspace/workspacesById"][o]},getChanges(){return gj.getTree({..._H.getters["workspace/currentWorkspace"],token:this.getToken()})},prepareChanges:e=>XN.makeChanges(e.tree.map((e=>({...e,id:e.sha})))),async saveWorkspaceItem({item:e}){const t={id:_H.getters.gitPathsByItemId[e.id],type:e.type,hash:e.hash};if("file"===e.type||"folder"===e.type)return{syncData:t};const n=_H.getters["workspace/syncToken"];return await gj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:n,path:vj(t),content:"",sha:XN.shaByPath[t.id],commitMessage:e.commitMessage}),{syncData:t}},async removeWorkspaceItem({syncData:e}){if(XN.shaByPath[e.id]){const t=_H.getters["workspace/syncToken"];await gj.removeFile({..._H.getters["workspace/currentWorkspace"],token:t,path:vj(e),sha:XN.shaByPath[e.id]})}},async downloadWorkspaceContent({token:e,contentId:t,contentSyncData:n,fileSyncData:r}){const{sha:i,data:o}=await gj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:vj(r)});XN.shaByPath[r.id]=i;const a=YN.parseContent(o,t);return{content:a,contentSyncData:{...n,hash:a.hash,sha:i}}},async downloadFile({token:e,path:t}){const{sha:n,data:r}=await gj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:t,isImg:!0});return{content:r,sha:n}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const{sha:n,data:r}=await gj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:vj(t)});XN.shaByPath[t.id]=n;const i=JSON.parse(r);return{item:i,syncData:{...t,hash:i.hash,sha:n}}},async uploadWorkspaceContent({token:e,content:t,file:n,commitMessage:r}){const i="img"===n.type,o=_H.getters.gitPathsByItemId[n.id]||"",a=i?n.path:`${_H.getters["workspace/currentWorkspace"].path||""}${_H.getters.gitPathsByItemId[n.id]}`,s=XN.shaByPath[i?n.path:o],l=await gj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:a,content:i?n.content:YN.serializeContent(t),sha:s,isImg:i,commitMessage:r});return i?{sha:l.content.sha}:{contentSyncData:{id:_H.getters.gitPathsByItemId[t.id],type:t.type,hash:t.hash,sha:l.content.sha},fileSyncData:{id:o,type:"file",hash:n.hash}}},async uploadWorkspaceData({token:e,item:t}){const n=_H.getters.gitPathsByItemId[t.id],r={id:n,type:t.type,hash:t.hash},i=await gj.uploadFile({..._H.getters["workspace/currentWorkspace"],token:e,path:vj(r),content:JSON.stringify(t),sha:XN.shaByPath[n]});return{syncData:{...r,sha:i.content.sha}}},async listFileRevisions({token:e,fileSyncDataId:t}){const{projectId:n,branch:r}=_H.getters["workspace/currentWorkspace"];return(await gj.getCommits({token:e,projectId:n,sha:r,path:vj({id:t})})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${gj.subPrefix}:${i.login}`;wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date||1;return{id:r,sub:o,message:n.message,created:new Date(a).getTime()}}))},loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const{data:i}=await gj.downloadFile({..._H.getters["workspace/currentWorkspace"],token:e,branch:r,path:vj({id:n})});return YN.parseContent(i,t)},getFilePathUrl(e){const t=this.getToken();if(!t)return null;const n=_H.getters["workspace/currentWorkspace"];return`${t.serverUrl}/${n.owner}/${n.repo}/src/branch/${n.branch}${e}`}});const yj=3e5,bj=["https://www.googleapis.com/auth/drive.appdata"],_j=e=>[e.driveFullAccess?"https://www.googleapis.com/auth/drive":"https://www.googleapis.com/auth/drive.file"],wj=["https://www.googleapis.com/auth/blogger"],kj=["https://www.googleapis.com/auth/photos"];let xj;if("googleDrive"===UL.queryParams.providerId)try{xj=JSON.parse(UL.queryParams.state)}catch(i7){}const Cj=async(e,t)=>{const n=`https://people.googleapis.com/v1/people/${e}?personFields=names,photos&key=${_H.getters["data/serverConf"].googleApiKey}`,{body:r}=await dO.request("me"===e&&t?{method:"GET",url:n,headers:{Authorization:`Bearer ${t.accessToken}`}}:{method:"GET",url:n},!0);return r},Sj="go";wO.setInfoResolver("google",Sj,(async e=>{try{const t=Object.values(_H.getters["data/googleTokensBySub"])[0],n=await Cj(e,t),r=n.names&&n.names[0]||{},i=n.photos&&n.photos[0]||{};return{id:`${Sj}:${e}`,name:r.displayName,imageUrl:(i.url||"").replace(/\bsz?=\d+$/,"sz=40")}}catch(t){if(404!==t.status)throw new Error("RETRY");throw t}}));const Tj={subPrefix:Sj,folderMimeType:"application/vnd.google-apps.folder",driveState:xj,driveActionFolder:null,driveActionFiles:[],async $request(e,t){try{return(await dO.request({...t,headers:{...t.headers||{},Authorization:`Bearer ${e.accessToken}`}},!0)).body}catch(n){const{reason:r}=(((n.body||{}).error||{}).errors||[])[0]||{};if("authError"===r){_H.dispatch("data/addGoogleToken",{...e,expiresOn:0});const n=await this.refreshToken(e,e.scopes);return this.$request(n,t)}throw n}},
/**
   * https://developers.google.com/identity/protocols/OpenIDConnect
   */
async startOauth2(e,t=null,n=!1){await dO.getServerConf();const r=_H.getters["data/serverConf"].googleClientId,{accessToken:i,expiresIn:o,idToken:a}=await dO.startOauth2("https://accounts.google.com/o/oauth2/v2/auth",{client_id:r,response_type:"token id_token",scope:["openid","profile",...e].join(" "),hd:null,login_hint:t,prompt:n?"none":null,nonce:UL.uid()},n),{body:s}=await dO.request({method:"POST",url:"https://www.googleapis.com/oauth2/v3/tokeninfo",params:{access_token:i}},!0);if(s.aud!==r)throw new Error("Client ID inconsistent.");if(t&&`${s.sub}`!==t)throw new Error("Google account ID not expected.");const l=_H.getters["data/googleTokensBySub"][s.sub],c={scopes:e,accessToken:i,expiresOn:Date.now()+1e3*o,idToken:a,sub:s.sub,name:(l||{}).name||"Someone",isLogin:!_H.getters["workspace/mainWorkspaceToken"]&&e.includes("https://www.googleapis.com/auth/drive.appdata"),isSponsor:!1,isDrive:e.includes("https://www.googleapis.com/auth/drive")||e.includes("https://www.googleapis.com/auth/drive.file"),isBlogger:e.includes("https://www.googleapis.com/auth/blogger"),isPhotos:e.includes("https://www.googleapis.com/auth/photos"),driveFullAccess:e.includes("https://www.googleapis.com/auth/drive")},u=await Cj("me",c),h=u.resourceName.split("/")[1],d=u.names[0]||{},p=u.photos[0]||{};if(d.displayName&&(c.name=d.displayName),wO.addUserInfo({id:`${Sj}:${h}`,name:d.displayName,imageUrl:(p.url||"").replace(/\bsz?=\d+$/,"sz=40")}),l&&Object.assign(c,{isLogin:l.isLogin||c.isLogin,isSponsor:l.isSponsor,isDrive:l.isDrive||c.isDrive,isBlogger:l.isBlogger||c.isBlogger,isPhotos:l.isPhotos||c.isPhotos,driveFullAccess:l.driveFullAccess||c.driveFullAccess}),c.isLogin)try{const e=await dO.request({method:"GET",url:"userInfo",params:{idToken:c.idToken}});c.isSponsor=e.body.sponsorUntil>Date.now(),c.isSponsor&&OF.addBadge("sponsor")}catch(f){}return await _H.dispatch("data/addGoogleToken",c),c},async refreshToken(e,t=[]){const{sub:n}=e,r=_H.getters["data/googleTokensBySub"][n],i=[...new Set([...t,...r.scopes])];if(
// If we already have permissions for the requested scopes
i.length===r.scopes.length&&// And lastToken is not expired
r.expiresOn>Date.now()+yj&&(// And in case of a login token, ID token is still valid
!r.isLogin||(e=>{try{const t=e.split("."),n=JSON.parse(UL.decodeBase64(t[1])),r=_H.getters["data/serverConf"].googleClientId;return n.aud===r&&Date.now()+yj<1e3*n.exp}catch(i7){return!1}})(r.idToken)))return r;try{return await this.startOauth2(i,n,!0)}catch(o){if(_H.state.offline)throw o;return await _H.dispatch("modal/open",{type:"providerRedirection",name:"Google"}),this.startOauth2(i,n)}},signin(){return this.startOauth2(bj)},async addDriveAccount(e=!1,t=null){const n=await this.startOauth2(_j({driveFullAccess:e}),t);return OF.addBadge("addGoogleDriveAccount"),n},async addBloggerAccount(){const e=await this.startOauth2(wj);return OF.addBadge("addBloggerAccount"),e},async addPhotosAccount(){const e=await this.startOauth2(kj);return OF.addBadge("addGooglePhotosAccount"),e},
/**
   * https://developers.google.com/drive/v3/reference/files/create
   * https://developers.google.com/drive/v3/reference/files/update
   * https://developers.google.com/drive/v3/web/simple-upload
   */
async $uploadFile({refreshedToken:e,name:t,parents:n,appProperties:r,media:i=null,mediaType:o=null,fileId:a=null,oldParents:s=null,ifNotTooLate:l=e=>e()}){return l((()=>{const l={method:"POST",url:"https://www.googleapis.com/drive/v3/files"},c={supportsTeamDrives:!0},u={name:t,appProperties:r};if(a?(l.method="PATCH",l.url=`https://www.googleapis.com/drive/v3/files/${a}`,n&&s&&(c.addParents=n.filter((e=>!s.includes(e))).join(","),c.removeParents=s.filter((e=>!n.includes(e))).join(","))):n&&(u.parents=n),i){const t=`-------${UL.uid()}`,n=`\r\n--${t}\r\n`,r=`\r\n--${t}--`;let a="";return a+=n,a+="Content-Type: application/json; charset=UTF-8\r\n\r\n",a+=JSON.stringify(u),a+=n,a+=`Content-Type: ${o||"text/plain"}; charset=UTF-8\r\n\r\n`,a+=i,a+=r,l.url=l.url.replace("https://www.googleapis.com/","https://www.googleapis.com/upload/"),this.$request(e,{...l,params:{...c,uploadType:"multipart"},headers:{"Content-Type":`multipart/mixed; boundary="${t}"`},body:a})}return o&&(u.mimeType=o),this.$request(e,{...l,body:u,params:c})}))},async uploadFile({token:e,name:t,parents:n,appProperties:r,media:i,mediaType:o,fileId:a,oldParents:s,ifNotTooLate:l}){const c=await this.refreshToken(e,_j(e));return this.$uploadFile({refreshedToken:c,name:t,parents:n,appProperties:r,media:i,mediaType:o,fileId:a,oldParents:s,ifNotTooLate:l})},async uploadAppDataFile({token:e,name:t,media:n,fileId:r,ifNotTooLate:i}){const o=await this.refreshToken(e,bj);return this.$uploadFile({refreshedToken:o,name:t,parents:["appDataFolder"],media:n,fileId:r,ifNotTooLate:i})},
/**
   * https://developers.google.com/drive/v3/reference/files/get
   */
async getFile(e,t){const n=await this.refreshToken(e,_j(e));return this.$request(n,{method:"GET",url:`https://www.googleapis.com/drive/v3/files/${t}`,params:{fields:"id,name,mimeType,appProperties,teamDriveId",supportsTeamDrives:!0}})},
/**
   * https://developers.google.com/drive/v3/web/manage-downloads
   */
async $downloadFile(e,t){return this.$request(e,{method:"GET",url:`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,raw:!0})},async downloadFile(e,t){const n=await this.refreshToken(e,_j(e));return this.$downloadFile(n,t)},async downloadAppDataFile(e,t){const n=await this.refreshToken(e,bj);return this.$downloadFile(n,t)},
/**
   * https://developers.google.com/drive/v3/reference/files/delete
   */
async $removeFile(e,t,n=e=>e()){return n((()=>this.$request(e,{method:"DELETE",url:`https://www.googleapis.com/drive/v3/files/${t}`,params:{supportsTeamDrives:!0}})))},async removeFile(e,t,n){const r=await this.refreshToken(e,_j(e));return this.$removeFile(r,t,n)},async removeAppDataFile(e,t,n=e=>e()){const r=await this.refreshToken(e,bj);return this.$removeFile(r,t,n)},
/**
   * https://developers.google.com/drive/v3/reference/revisions/list
   */
async $getFileRevisions(e,t){const n=[],r=async i=>{const{revisions:o,nextPageToken:a}=await this.$request(e,{method:"GET",url:`https://www.googleapis.com/drive/v3/files/${t}/revisions`,params:{pageToken:i,pageSize:1e3,fields:"nextPageToken,revisions(id,modifiedTime,lastModifyingUser/permissionId,lastModifyingUser/displayName,lastModifyingUser/photoLink)"}});return o.forEach((e=>{wO.addUserInfo({id:`${Sj}:${e.lastModifyingUser.permissionId}`,name:e.lastModifyingUser.displayName,imageUrl:e.lastModifyingUser.photoLink||""}),n.push(e)})),a?r(a):n};return r()},async getFileRevisions(e,t){const n=await this.refreshToken(e,_j(e));return this.$getFileRevisions(n,t)},async getAppDataFileRevisions(e,t){const n=await this.refreshToken(e,bj);return this.$getFileRevisions(n,t)},
/**
   * https://developers.google.com/drive/v3/reference/revisions/get
   */
async $downloadFileRevision(e,t,n){return this.$request(e,{method:"GET",url:`https://www.googleapis.com/drive/v3/files/${t}/revisions/${n}?alt=media`,raw:!0})},async downloadFileRevision(e,t,n){const r=await this.refreshToken(e,_j(e));return this.$downloadFileRevision(r,t,n)},async downloadAppDataFileRevision(e,t,n){const r=await this.refreshToken(e,bj);return this.$downloadFileRevision(r,t,n)},
/**
   * https://developers.google.com/drive/v3/reference/changes/list
   */
async getChanges(e,t,n,r=null){const i={changes:[]};let o="file/name";n||(o+=",file/parents,file/mimeType,file/appProperties");const a=await this.refreshToken(e,n?bj:_j(e)),s=async(e="1")=>{const{changes:t,nextPageToken:l,newStartPageToken:c}=await this.$request(a,{method:"GET",url:"https://www.googleapis.com/drive/v3/changes",params:{pageToken:e,spaces:n?"appDataFolder":"drive",pageSize:1e3,fields:`nextPageToken,newStartPageToken,changes(fileId,${o})`,supportsTeamDrives:!0,includeTeamDriveItems:!!r,teamDriveId:r}});return i.changes=[...i.changes,...t.filter((e=>e.fileId))],l?s(l):(i.startPageToken=c,i)};return s(t)},
/**
   * https://developers.google.com/blogger/docs/3.0/reference/blogs/getByUrl
   * https://developers.google.com/blogger/docs/3.0/reference/posts/insert
   * https://developers.google.com/blogger/docs/3.0/reference/posts/update
   */
async uploadBlogger({token:e,blogUrl:t,blogId:n,postId:r,title:i,content:o,labels:a,isDraft:s,published:l,isPage:c}){const u=await this.refreshToken(e,wj),h={id:n};h.id||(h.id=(await this.$request(u,{url:"https://www.googleapis.com/blogger/v3/blogs/byurl",params:{url:t}})).id);const d=c?"pages":"posts";let p={method:"POST",url:`https://www.googleapis.com/blogger/v3/blogs/${h.id}/${d}/`,body:{kind:c?"blogger#page":"blogger#post",blog:h,title:i,content:o}};a&&(p.body.labels=a),l&&(p.body.published=l.toISOString()),r&&(p.method="PUT",p.url+=r,p.body.id=r);const f=await this.$request(u,p);return c?f:(p={method:"POST",url:`https://www.googleapis.com/blogger/v3/blogs/${f.blog.id}/posts/${f.id}/`,params:{}},s?p.url+="revert":(p.url+="publish",l&&(p.params.publishDate=l.toISOString())),this.$request(u,p))},
/**
   * https://developers.google.com/picker/docs/
   */
async openPicker(e,t="doc"){const n="img"===t?kj:_j(e);window.google||(await dO.loadScript("https://apis.google.com/js/api.js"),await new Promise(((e,t)=>window.gapi.load("picker",{callback:e,onerror:t,timeout:3e4,ontimeout:t}))));const r=await this.refreshToken(e,n),{google:i}=window;return new Promise((e=>{let n;const o=(new i.picker.PickerBuilder).setOAuthToken(r.accessToken).enableFeature(i.picker.Feature.SUPPORT_TEAM_DRIVES).hideTitleBar().setCallback((t=>{switch(t[i.picker.Response.ACTION]){case i.picker.Action.PICKED:case i.picker.Action.CANCEL:e(t.docs||[]),n.dispose()}}));switch(t){default:case"doc":{const e=["text/plain","text/x-markdown","application/octet-stream"].join(","),t=new i.picker.DocsView(i.picker.ViewId.DOCS);t.setMimeTypes(e),o.addView(t);const n=new i.picker.DocsView(i.picker.ViewId.DOCS);n.setMimeTypes(e),n.setEnableTeamDrives(!0),o.addView(n),o.enableFeature(i.picker.Feature.MULTISELECT_ENABLED),o.enableFeature(i.picker.Feature.SUPPORT_TEAM_DRIVES);break}case"folder":{const e=new i.picker.DocsView(i.picker.ViewId.FOLDERS);e.setSelectFolderEnabled(!0),e.setMimeTypes(this.folderMimeType),o.addView(e);const t=new i.picker.DocsView(i.picker.ViewId.FOLDERS);t.setSelectFolderEnabled(!0),t.setEnableTeamDrives(!0),t.setMimeTypes(this.folderMimeType),o.addView(t);break}case"img":{const e=new i.picker.PhotosView;e.setType("highlights"),o.addView(e),o.addView(i.picker.ViewId.PHOTO_UPLOAD);break}}n=o.build(),n.setVisible(!0)}))}};let Ej,Ij;new YN({id:"googleDriveWorkspace",name:"Google Drive",getToken:()=>_H.getters["workspace/syncToken"],getWorkspaceParams({folderId:e}){return{providerId:this.id,folderId:e}},getWorkspaceLocationUrl:({folderId:e})=>`https://docs.google.com/folder/d/${e}`,getSyncDataUrl:({id:e})=>`https://docs.google.com/file/d/${e}/edit`,getSyncDataDescription:({id:e})=>e,async initWorkspace(){const e=e=>e&&UL.makeWorkspaceId(this.getWorkspaceParams({folderId:e})),t=t=>_H.getters["workspace/workspacesById"][e(t)],n=async(t,n)=>{const r={folderId:n.id,dataFolderId:n.appProperties.dataFolderId,trashFolderId:n.appProperties.trashFolderId};if(!r.dataFolderId){const e=await Tj.uploadFile({token:t,name:".stackedit-data",parents:[n.id],appProperties:{folderId:n.id},mediaType:Tj.folderMimeType});r.dataFolderId=e.id}if(!r.trashFolderId){const e=await Tj.uploadFile({token:t,name:".stackedit-trash",parents:[n.id],appProperties:{folderId:n.id},mediaType:Tj.folderMimeType});r.trashFolderId=e.id}r.folderId===n.appProperties.folderId&&r.dataFolderId===n.appProperties.dataFolderId&&r.trashFolderId===n.appProperties.trashFolderId||await Tj.uploadFile({token:t,appProperties:r,mediaType:Tj.folderMimeType,fileId:n.id});const i=e(n.id);_H.dispatch("workspace/patchWorkspacesById",{[i]:{id:i,sub:t.sub,name:n.name,providerId:this.id,folderId:n.id,teamDriveId:n.teamDriveId,dataFolderId:r.dataFolderId,trashFolderId:r.trashFolderId}})},{sub:r}=t(UL.queryParams.folderId)||UL.queryParams;let i=_H.getters["data/googleTokensBySub"][r];i&&i.isDrive&&i.driveFullAccess||(await _H.dispatch("modal/open","workspaceGoogleRedirection"),i=await Tj.addDriveAccount(!0,UL.queryParams.sub));let{folderId:o}=UL.queryParams;if(!o){const e=await Tj.uploadFile({token:i,name:"StackEdit workspace",parents:[],mediaType:Tj.folderMimeType});await n(i,{...e,appProperties:{}}),o=e.id}if(!t(o)){let e;try{e=await Tj.getFile(i,o)}catch(a){throw new Error(`Folder ${o} is not accessible. Make sure you have the right permissions.`)}e.appProperties=e.appProperties||{};const t=e.appProperties.folderId;if(t&&t!==o)throw new Error(`Folder ${o} is part of another workspace.`);await n(i,e)}return OF.addBadge("addGoogleDriveWorkspace"),t(o)},async performAction(){const e=Tj.driveState||{};switch(this.getToken()&&e.action){case"create":{const e=Tj.driveActionFolder;let t=_H.getters["data/syncDataById"][e.id];if(!t&&e.appProperties.id){_H.commit("folder/setItem",{id:e.appProperties.id,name:e.name});const n=_H.state.folder.itemsById[e.appProperties.id];t={id:e.id,itemId:n.id,type:n.type,hash:n.hash},_H.dispatch("data/patchSyncDataById",{[t.id]:t})}const n=await EN.createFile({parentId:t&&t.itemId},!0);_H.commit("file/setCurrentId",n.id);break}case"open":{const e=Tj.driveActionFiles[0],t=_H.getters["data/syncDataById"][e.id];t?_H.commit("file/setCurrentId",t.itemId):Ej=e.id;break}}},async getChanges(){const e=_H.getters["workspace/currentWorkspace"],t=_H.getters["workspace/syncToken"],n=_H.getters["data/localSettings"].syncStartPageToken,{changes:r,startPageToken:i}=await Tj.getChanges(t,n,!1,e.teamDriveId);return Ij=i,r},prepareChanges(e){const t={};Object.entries(_H.getters["data/syncDataByItemId"]).forEach((([e,n])=>{t[n.id]=e})),e.forEach((e=>{const{id:n}=(e.file||{}).appProperties||{};n&&(t[e.fileId]=n)}));const n=_H.getters["workspace/currentWorkspace"],r=[];return e.forEach((e=>{if(e.fileId===n.folderId||e.fileId===n.dataFolderId||e.fileId===n.trashFolderId)return;let i;if(e.file){const{appProperties:r}=e.file;if(!r||r.folderId!==n.folderId)return;if(e.file.parents[0]===n.dataFolderId)try{e.item=JSON.parse(e.file.name)}catch(i7){return}else{const o=e.file.mimeType===Tj.folderMimeType?"folder":"file",a={id:r.id,type:o,name:e.file.name,parentId:null};if(e.file.parents.some((e=>e===n.trashFolderId))?a.parentId="trash":e.file.parents.some((e=>!!t[e]&&(a.parentId=t[e],!0))),e.item=UL.addItemHash(a),"file"===o){const t=`${r.id}/content`,n=`${e.fileId}/content`;i={item:{id:t,type:"content",
// Need a truthy value to force saving sync data
hash:1},syncData:{id:n,itemId:t,type:"content",
// Need a truthy value to force downloading the content
hash:1},syncDataId:n}}}e.syncData={id:e.fileId,parentIds:e.file.parents,itemId:e.item.id,type:e.item.type,hash:e.item.hash}}else{const t=_H.getters["data/syncDataById"][e.fileId];t&&"file"===t.type&&(i={syncDataId:`${e.fileId}/content`})}e.syncDataId=e.fileId,r.push(e),i&&r.push(i)})),r},onChangesApplied(){_H.dispatch("data/patchLocalSettings",{syncStartPageToken:Ij})},async saveWorkspaceItem({item:e,syncData:t,ifNotTooLate:n}){const r=_H.getters["workspace/currentWorkspace"],i=_H.getters["workspace/syncToken"];let o;if("file"!==e.type&&"folder"!==e.type)o=await Tj.uploadFile({token:i,name:JSON.stringify(e),parents:[r.dataFolderId],appProperties:{folderId:r.folderId},fileId:t&&t.id,oldParents:t&&t.parentIds,ifNotTooLate:n});else{const a=_H.getters["data/syncDataByItemId"][e.parentId];let s;s="trash"===e.parentId?r.trashFolderId:a?a.id:r.folderId,o=await Tj.uploadFile({token:i,name:e.name,parents:[s],appProperties:{id:e.id,folderId:r.folderId},mediaType:"folder"===e.type?Tj.folderMimeType:void 0,fileId:t&&t.id,oldParents:t&&t.parentIds,ifNotTooLate:n})}return{syncData:{id:o.id,parentIds:o.parents,itemId:e.id,type:e.type,hash:e.hash}}},async removeWorkspaceItem({syncData:e,ifNotTooLate:t}){if("content"!==e.type){const n=_H.getters["workspace/syncToken"];await Tj.removeFile(n,e.id,t)}},async downloadWorkspaceContent({token:e,contentSyncData:t,fileSyncData:n}){const r=await Tj.downloadFile(e,n.id),i=YN.parseContent(r,t.itemId);return Ej&&Ej===n.id&&(Ej=null,setTimeout((()=>{_H.commit("file/setCurrentId",n.itemId)}),10)),{content:i,contentSyncData:{...t,hash:i.hash}}},async downloadWorkspaceData({token:e,syncData:t}){if(!t)return{};const n=await Tj.downloadFile(e,t.id),r=JSON.parse(n);return{item:r,syncData:{...t,hash:r.hash}}},async uploadWorkspaceContent({token:e,content:t,file:n,fileSyncData:r,ifNotTooLate:i}){let o,a;if(r)o=await Tj.uploadFile({token:e,media:YN.serializeContent(t),fileId:r.id,ifNotTooLate:i});else{const r=_H.getters["workspace/currentWorkspace"],s=_H.getters["data/syncDataByItemId"][n.parentId];o=await Tj.uploadFile({token:e,name:n.name,parents:[s?s.id:r.folderId],appProperties:{id:n.id,folderId:r.folderId},media:YN.serializeContent(t),ifNotTooLate:i}),a={id:o.id,parentIds:o.parents,itemId:n.id,type:n.type,hash:n.hash}}return{contentSyncData:{id:`${o.id}/content`,itemId:t.id,type:t.type,hash:t.hash},fileSyncData:a}},async uploadWorkspaceData({token:e,item:t,syncData:n,ifNotTooLate:r}){const i=_H.getters["workspace/currentWorkspace"],o=await Tj.uploadFile({token:e,name:JSON.stringify({id:t.id,type:t.type,hash:t.hash}),parents:[i.dataFolderId],appProperties:{folderId:i.folderId},media:JSON.stringify(t),mediaType:"application/json",fileId:n&&n.id,oldParents:n&&n.parentIds,ifNotTooLate:r});return{syncData:{id:o.id,parentIds:o.parents,itemId:t.id,type:t.type,hash:t.hash}}},listFileRevisions:async({token:e,fileSyncDataId:t})=>(await Tj.getFileRevisions(e,t)).map((e=>({id:e.id,sub:`${Tj.subPrefix}:${e.lastModifyingUser.permissionId}`,created:new Date(e.modifiedTime).getTime()}))),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,fileSyncDataId:n,revisionId:r}){const i=await Tj.downloadFileRevision(e,n,r);return YN.parseContent(i,t)}});var Aj,Dj={exports:{}};var Bj=(Aj||(Aj=1,Dj.exports=function(){function e(e,t){this.t=e,void 0!==t&&(this.c=t)}function t(e,t){var n="";return e.attrs&&e.attrs.some((function(e){if(e[0]===t)return n=e[1],!0})),n}function n(e){return e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F\uFFFD]/g,"").replace(/\n+$/,"")}function r(i,o,a){var s=0;function l(c,u){for(var h,d,p=[];i[s]&&i[s].level>=c&&(!u||i[s].level>c||i[s].type!==u);){switch(d=void 0,(h=i[s++]).type){case"heading_open":(d=new e("Header",[parseInt(h.tag.slice(1),10),
// level
[t(h,"id"),[],[]]])).c.push(l(i[s].level,"heading_close")),s++;break;case"paragraph_open":var f=l(i[s].level,"paragraph_close");if(1===f.length&&"Image"===f[0].t){var m=f[0].c[1]?[new e("Plain",f[0].c[1])]:[];d=new e("Figure",[["",[],[]],[null,m],[new e("Plain",f)]])}else d=new e(h.hidden?"Plain":"Para",f);s++;break;case"blockquote_open":d=new e("BlockQuote",l(i[s].level,"blockquote_close")),s++;break;case"em_open":d=new e("Emph",l(i[s].level,"em_close")),s++;break;case"strong_open":d=new e("Strong",l(i[s].level,"strong_close")),s++;break;case"s_open":d=new e("Strikeout",l(i[s].level,"s_close")),s++;break;case"sup_open":d=new e("Superscript",l(i[s].level,"sup_close")),s++;break;case"sub_open":d=new e("Subscript",l(i[s].level,"sub_close")),s++;break;case"bullet_list_open":d=new e("BulletList",l(i[s].level,"bullet_list_close")),s++;break;case"ordered_list_open":(d=new e("OrderedList",[[t(h,"start")||1,new e("Decimal"),new e("Period")]])).c.push(l(i[s].level,"ordered_list_close")),s++;break;case"list_item_open":d=l(i[s].level,"list_item_close"),s++;break;case"table_open":for(var g=[],v=[],y=[];"thead_close"!==i[s].type;s++)if("th_open"===i[s].type){var b=new e("AlignDefault"),_=t(i[s],"style");"text-align:center"===_?b=new e("AlignCenter"):"text-align:left"===_?b=new e("AlignLeft"):"text-align:right"===_&&(b=new e("AlignRight")),s++,g.push([b,new e("ColWidthDefault")]),v.push([["",[],[]],new e("AlignDefault"),1,1,[new e("Plain",l(i[s].level,"th_close"))]])}for(s++;"tbody_close"!==i[s].type;s++){for(var w=[],k=[["",[],[]],w],x=0;"tr_close"!==i[s].type;s++)"td_open"===i[s].type&&(s++,w.push([["",[],[]],v[x][1],1,1,[new e("Plain",l(i[s].level,"td_close"))]]),x++);y.push(k)}s++,d=new e("Table",[["",[],[]],
// caption
[null,[]],g,[["",[],[]],[[["",[],[]],v]]],[[["",[],[]],0,[],y]],[["",[],[]],[]]]),s++;break;case"dl_open":for(y=[];"dl_close"!==i[s].type;){s++;var C=l(i[s].level,"dt_close"),S=[];for(s++;"dt_open"!==i[s].type&&"dl_close"!==i[s].type;s++)"dd_open"===i[s].type&&(s++,S.push(l(i[s].level,"dd_close")));y.push([C,S])}d=new e("DefinitionList",y),s++;break;case"link_open":(d=new e("Link",[["",[],[]],
// id, classes, attrs
l(i[s].level,"link_close")])).c.push([t(h,"href"),t(h,"title")]),s++;break;case"image":var T=t(h,"src");T&&(d=new e("Image",[["",[],[]],
// id, classes, attrs
r(h.children,o,a)])).c.push([T,t(h,"title")]);break;case"footnote_ref":(d=new e("Note")).c=h.meta.id,a.push(d);break;case"footnote_open":f=l(i[s].level,"footnote_close"),s++,a.forEach((function(e){e.c===h.meta.id&&(e.c=f)}));break;case"inline":p=p.concat(r(h.children,o,a));break;case"inline_math":d=new e("Math",[new e("InlineMath"),n(h.content)]);break;case"display_math":case"math":d=new e("Math",[new e("DisplayMath"),n(h.content)]);break;case"code_inline":d=new e("Code",[["",[],[]],
// id, classes, attrs
n(h.content)]);break;case"fence":case"code_block":d=new e("CodeBlock",[["",h.info?[h.info]:[],[]],
// id, classes, attrs
n(h.content)]);break;case"html_block":d=new e("RawBlock",["html",n(h.content)]);break;case"html_inline":d=new e("RawInline",["html",n(h.content)]);break;case"softbreak":p.push(new e(o.breaks?"LineBreak":"SoftBreak"));break;case"hardbreak":p.push(new e("LineBreak"));break;case"hr":p.push(new e("HorizontalRule"));break;default:h.content&&n(h.content).split(/\s+/).forEach((function(t,n){if(0===n){var r=p.pop();r&&("Str"===r.t?t=r.c+t:p.push(r))}else p.push(new e("Space"));t&&p.push(new e("Str",t))}))}d&&p.push(d)}return p}return o=o||{},a=a||[],i=i.filter((function(e){return"footnote_anchor"!==e.type})),l(0)}return function(e,t){return{"pandoc-api-version":[1,23],meta:{},blocks:r(e,t)}}}()),Dj.exports);const Lj=bo(Bj);var Mj={},Fj=window.RegExp,Oj=72,Pj={bold:"Strong <strong> Ctrl/Cmd+B",boldexample:"",italic:"Emphasis <em> Ctrl/Cmd+I",italicexample:"",strikethrough:"Strikethrough <s> Ctrl/Cmd+I",strikethroughexample:"",link:"Hyperlink <a> Ctrl/Cmd+L",linkdescription:"",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote> Ctrl/Cmd+Q",quoteexample:"",code:"Code Sample <pre><code> Ctrl/Cmd+K",codeexample:"",image:"Image <img> Ctrl/Cmd+G",imagedescription:"",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol> Ctrl/Cmd+O",ulist:"Bulleted List <ul> Ctrl/Cmd+U",litem:"",heading:"Heading <h1>/<h2> Ctrl/Cmd+H",headingexample:"",hr:"Horizontal Rule <hr> Ctrl/Cmd+R",undo:"Undo - Ctrl/Cmd+Z",redo:"Redo - Ctrl/Cmd+Y",help:"Markdown Editing Help",formulaexample:"Latex"};function Nj(e){"function"==typeof(e=e||{}).handler&&(e={helpButton:e}),e.strings=e.strings||{};var t=function(t){return e.strings[t]||Pj[t]};function n(e){return e}function r(){return!1}function i(){}i.prototype={chain:function(e,t){var r=this[e];if(!r)throw new Error("unknown hook "+e);this[e]=r===n?t:function(){var e=Array.prototype.slice.call(arguments,0);return e[0]=r.apply(null,e),t.apply(null,e)}},set:function(e,t){if(!this[e])throw new Error("unknown hook "+e);this[e]=t},addNoop:function(e){this[e]=n},addFalse:function(e){this[e]=r}};var o=this.hooks=new i;o.addNoop("onPreviewRefresh"),o.addNoop("postBlockquoteCreation"),o.addFalse("insertImageDialog"),o.addFalse("insertChatGptDialog"),o.addFalse("insertLinkDialog"),o.addFalse("insertImageUploading");var a,s=this;this.run=function(){if(!a){a=e.input;var n,r=new qj(o,t);n=new Rj(a,r),s.uiManager=n}}}function jj(){}function zj(e){var t=this,n=e;this.init=function(){this.setInputAreaSelectionStartEnd(),this.text=n.getContent()},this.setInputAreaSelection=function(){n.focus(),n.setSelection(t.start,t.end)},this.setInputAreaSelectionStartEnd=function(){t.start=Math.min(n.selectionMgr.selectionStart,n.selectionMgr.selectionEnd),t.end=Math.max(n.selectionMgr.selectionStart,n.selectionMgr.selectionEnd)},this.restore=function(){void 0!==t.text&&t.text!=n.getContent()&&n.setContent(t.text),this.setInputAreaSelection()},this.getChunks=function(){var e=new jj;return e.before=Mj.fixEolChars(t.text.substring(0,t.start)),e.startTag="",e.selection=Mj.fixEolChars(t.text.substring(t.start,t.end)),e.endTag="",e.after=Mj.fixEolChars(t.text.substring(t.end)),e},this.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after},this.init()}function Rj(e,t){var n=e,r={};function i(e){return"string"==typeof e&&(e=t[e]),function(){e.apply(t,arguments)}}r.bold=i("doBold"),r.italic=i("doItalic"),r.strikethrough=i("doStrikethrough"),r.inlineformula=i("doInlinkeFormula"),r.imageUploading=i("doImageUploading"),r.link=i((function(e,t){return this.doLinkOrImage(e,t,!1)})),r.quote=i("doBlockquote"),r.code=i("doCode"),r.image=i((function(e,t){return this.doLinkOrImage(e,t,!0)})),r.chatgpt=i("doChatGpt"),r.olist=i((function(e,t){this.doList(e,t,!0)})),r.ulist=i((function(e,t){this.doList(e,t,!1)})),r.clist=i((function(e,t){this.doList(e,t,!1,!0)})),r.heading=i("doHeading"),r.hr=i("doHorizontalRule"),r.table=i("doTable"),this.doClick=function(t){var i=r[t];if(i){n.focus();var o=i===r.link||i.id===r.image,a=new zj(e);if(a){var s=a.getChunks(),l=function(){n.focus(),s&&a.setChunks(s),a.restore()};i(s,l)||(l(),o||n.adjustCursorPosition())}}}}function qj(e,t){this.hooks=e,this.getString=t}jj.prototype.findTags=function(e,t){var n,r=this;e&&(n=Mj.extendRegExp(e,"","$"),this.before=this.before.replace(n,(function(e){return r.startTag=r.startTag+e,""})),n=Mj.extendRegExp(e,"^",""),this.selection=this.selection.replace(n,(function(e){return r.startTag=r.startTag+e,""}))),t&&(n=Mj.extendRegExp(t,"","$"),this.selection=this.selection.replace(n,(function(e){return r.endTag=e+r.endTag,""})),n=Mj.extendRegExp(t,"^",""),this.after=this.after.replace(n,(function(e){return r.endTag=e+r.endTag,""})))},jj.prototype.trimWhitespace=function(e){var t,n,r=this;e?t=n="":(t=function(e){return r.before+=e,""},n=function(e){return r.after=e+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)},jj.prototype.skipLines=function(e,t,n){var r,i;if(void 0===e&&(e=1),void 0===t&&(t=1),e++,t++,navigator.userAgent.match(/Chrome/),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+Fj.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+Fj.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+Fj.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+Fj.$1,this.before){for(r=i="";e--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new Fj(r+"$",""),i)}if(this.after){for(r=i="";t--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new Fj(r,""),i)}},Mj.fixEolChars=function(e){return e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")},Mj.extendRegExp=function(e,t,n){null==t&&(t=""),null==n&&(n="");var r,i=e.toString();return i=(i=i.replace(/\/([gim]*)$/,(function(e,t){return r=t,""}))).replace(/(^\/|\/$)/g,""),new Fj(i=t+i+n,r)};var $j=qj.prototype;$j.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",$j.unwrap=function(e){var t=new Fj("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");e.selection=e.selection.replace(t,"$1 $2")},$j.wrap=function(e,t){this.unwrap(e);var n=new Fj("(.{1,"+t+"})( +|$\\n?)","gm"),r=this;e.selection=e.selection.replace(n,(function(e,t){return new Fj("^"+r.prefixes,"").test(e)?e:t+"\n"})),e.selection=e.selection.replace(/\s+$/,"")},$j.doBold=function(e,t){return this.doBorI(e,t,2,this.getString("boldexample"))},$j.doItalic=function(e,t){return this.doBorI(e,t,1,this.getString("italicexample"))},$j.doBorI=function(e,t,n,r){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(e.before)[0],o=/(^\**)/.exec(e.after)[0],a=Math.min(i.length,o.length);if(a>=n&&(2!=a||1!=n))e.before=e.before.replace(Fj("[*]{"+n+"}$",""),""),e.after=e.after.replace(Fj("^[*]{"+n+"}",""),"");else if(!e.selection&&o){e.after=e.after.replace(/^([*_]*)/,""),e.before=e.before.replace(/(\s?)$/,"");var s=Fj.$1;e.before=e.before+o+s}else{e.selection||o||(e.selection=r);var l=n<=1?"*":"**";e.before=e.before+l,e.after=l+e.after}},$j.doStrikethrough=function(e,t){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var n=/(~*$)/.exec(e.before)[0],r=/(^~*)/.exec(e.after)[0],i=Math.min(n.length,r.length);if(i>=2)e.before=e.before.replace(Fj("[~]{2}$",""),""),e.after=e.after.replace(Fj("^[~]{2}",""),"");else if(!e.selection&&r){e.after=e.after.replace(/^(~*)/,""),e.before=e.before.replace(/(\s?)$/,"");var o=Fj.$1;e.before=e.before+r+o}else{e.selection||r||(e.selection=this.getString("strikethroughexample"));e.before=e.before+"~~",e.after="~~"+e.after}},$j.doInlinkeFormula=function(e,t){e.trimWhitespace(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var n=/(\$*$)/.exec(e.before)[0],r=/(^\$*)/.exec(e.after)[0],i=Math.min(n.length,r.length);if(i>=2)e.before=e.before.replace(Fj("[$]{2}$",""),""),e.after=e.after.replace(Fj("^[$]{2}",""),"");else if(!e.selection&&r){e.after=e.after.replace(/^(\$*)/,""),e.before=e.before.replace(/(\s?)$/,"");var o=Fj.$1;e.before=e.before+r+o}else{e.selection||r||(e.selection=this.getString("formulaexample"));e.before=e.before+"$",e.after="$"+e.after}},$j.doImageUploading=function(e,t){this.hooks.insertImageUploading((function(n){null!==n&&(e.before=`${e.before}[...(image-${n})]`,e.selection=""),t()}))},$j.stripLinkDefs=function(e,t){return e=e.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,(function(e,n,r,i,o){return t[n]=e.replace(/\s*$/,""),i?(t[n]=e.replace(/["(](.+?)[")]$/,""),i+o):""}))},$j.addLinkDef=function(e,t){var n=0,r={};e.before=this.stripLinkDefs(e.before,r),e.selection=this.stripLinkDefs(e.selection,r),e.after=this.stripLinkDefs(e.after,r);var i="",o=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,a=function(e){n++,e=e.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+e},s=function(e,t,i,l,c,u){return i=i.replace(o,s),r[c]?(a(r[c]),t+i+l+n+u):e};e.before=e.before.replace(o,s),t?a(t):e.selection=e.selection.replace(o,s);var l=n;return e.after=e.after.replace(o,s),e.after&&(e.after=e.after.replace(/\n*$/,"")),e.after||(e.selection=e.selection.replace(/\n*$/,"")),e.after+="\n\n"+i,l},$j.doLinkOrImage=function(e,t,n){if(e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\(.*?\))?/),!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var r=this,i=function(i){null!==i&&(e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),e.startTag=n?"![":"[",e.endTag="]("+(i.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,(function(e,t,n){return t=t.replace(/\?.*$/,(function(e){return e.replace(/\+/g," ")})),t=decodeURIComponent(t),t=(t=encodeURI(t).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")).replace(/\?.*$/,(function(e){return e.replace(/\+/g,"%2b")})),n&&(n=(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,"")).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?t+' "'+n+'"':t}))+")"),e.selection||(e.selection=n?r.getString("imagedescription"):r.getString("linkdescription"))),t()};return n?this.hooks.insertImageDialog(i):this.hooks.insertLinkDialog(i),!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},$j.doChatGpt=function(e,t){this.hooks.insertChatGptDialog((function(n){null!==n&&(e.before=`${e.before}${n}`,e.selection=""),t()}))},$j.doAutoindent=function(e){var t=this,n=!1;e.before=e.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),e.before=e.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),e.selection||/^[ \t]*(?:\n|$)/.test(e.after)||(e.after=e.after.replace(/^[^\n]*/,(function(t){return e.selection=t,""})),n=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(e.before)&&t.doList&&t.doList(e),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(e.before)&&t.doBlockquote&&t.doBlockquote(e),/(\n|^)(\t|[ ]{4,}).*\n$/.test(e.before)&&t.doCode&&t.doCode(e),n&&(e.after=e.selection+e.after,e.selection="")},$j.doBlockquote=function(e){e.selection=e.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,(function(t,n,r,i){return e.before+=n,e.after=i+e.after,r})),e.before=e.before.replace(/(>[ \t]*)$/,(function(t,n){return e.selection=n+e.selection,""})),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||this.getString("quoteexample");var t,n="",r="";if(e.before){for(var i=e.before.replace(/\n$/,"").split("\n"),o=!1,a=0;a<i.length;a++){var s=!1;t=i[a],o=o&&t.length>0,/^>/.test(t)?(s=!0,!o&&t.length>1&&(o=!0)):s=!!/^[ \t]*$/.test(t)||o,s?n+=t+"\n":(r+=n+t,n="\n")}/(^|\n)>/.test(n)||(r+=n,n="")}e.startTag=n,e.before=r,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,(function(t){return e.endTag=t,""}));var l=function(t){var n=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(/\n((>|\s)*)\n$/,(function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))),e.endTag&&(e.endTag=e.endTag.replace(/^\n((>|\s)*)\n/,(function(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})))};/^(?![ ]{0,3}>)/m.test(e.selection)?(this.wrap(e,Oj-2),e.selection=e.selection.replace(/^/gm,"> "),l(!0),e.skipLines()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(e),l(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),e.selection=this.hooks.postBlockquoteCreation(e.selection),/\n/.test(e.selection)||(e.selection=e.selection.replace(/^(> *)/,(function(t,n){return e.startTag+=n,""})))},$j.doCode=function(e){var t=/\S[ ]*$/.test(e.before);!/^[ ]*\S/.test(e.after)&&!t||/\n/.test(e.selection)?(/[\n]+```\n$/.test(e.before)&&/^\n```[ ]*\n/.test(e.after)?(e.before=e.before.replace(/```\n$/,""),e.after=e.after.replace(/^\n```/,"")):(e.before+="```\n",e.after="\n```"+e.after),e.selection||(e.selection=this.getString("codeexample"))):(e.trimWhitespace(),e.findTags(/`/,/`/),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=this.getString("codeexample"))))},$j.doList=function(e,t,n,r){var i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",a=1,s=function(e){var t;return n?(t=" "+a+". ",a++):(t=" "+o+" ",r&&(t+="[",t+=e||" ",t+="] ")),t},l=function(e){return void 0===n&&(n=/^\s*\d/.test(e)),e=e.replace(r?/^[ ]{0,3}([*+-]|\d+[.])\s+\[([ xX])\]\s/gm:/^[ ]{0,3}([*+-]|\d+[.])\s/gm,(function(e,t,n){return s(n)}))};if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),e.startTag){var c=/\d+[.]/.test(e.startTag);if(e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(e),e.skipLines(),c&&(e.after=e.after.replace(i,l)),n==c)return}var u=1;e.before=e.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,(function(e){return/^\s*([*+-])/.test(e)&&(o=Fj.$1),u=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)})),e.selection||(e.selection=this.getString("litem"));var h=s(),d=1;e.after=e.after.replace(i,(function(e){return d=/[^\n]\n\n[^\n]/.test(e)?1:0,l(e)})),e.trimWhitespace(!0),e.skipLines(u,d,!0),e.startTag=h;var p=h.replace(/./g," ");this.wrap(e,Oj-p.length),e.selection=e.selection.replace(/\n/g,"\n"+p)},$j.doTable=function(e){var t=/((?:(?:[^\n]*?\|[^\n]*) *)?(?:\r?\n|^))((?:\| *:?-+:? *|\|?(?: *:?-+:? *\|)+)(?: *:?-+:? *)? *\r?\n)((?:(?:[^\n]*?\|[^\n]*) *(?:\r?\n|$))+)/;function n(e,t){var n="";t=t||" ",e=Math.floor(e);for(var r=0;r<e;r++)n+=t;return n}function r(e){return e.trim().replace(/(^\||\|$)/g,"")}function i(e){return e.split("|")}function o(e){return"|"+e+"|"}function a(e){return e.join("|")}function s(e,t){var s,l,c,u,h,d,p,f,m,g,v,y,b,_,w,k,x,C,S,T,E,I,A,D;for(g=e[2].trim(),b=(u=0===(v=e[1].trim()).length?[0,e[3]]:[1,e[1]+e[3]])[0],_=u[1].trim().split("\n"),w=[],l=0,c=(h=i(r(g))).length;l<c;l++)switch(C=((d=(k=h[l]).trim())[0]||":")+(d[d.length-1]||"")){case"::":case"-:":case":-":w.push(C);break;default:w.push("--")}for(S=w.length,T=[],l=0,c=_.length;l<c;l++){for((x=i(r(_[l])))[S-1]=a(x.slice(S-1)),m=[],p=0,f=x.length;p<f;p++)k=x[p],m.push(n(" ")+((h=k&&"function"==typeof k.trim?k.trim():void 0)?h:"")+n(" "));T.push(m)}for(E=[],s=l=0,h=S-1;0<=h?l<=h:l>=h;s=0<=h?++l:--l){for(m=[],p=0,c=T.length;p<c;p++)x=T[p],m.push(x[s].length);E.push(Math.max.apply(Math,[2].concat(m)))}for(y=function(e,t){var r;switch(r=E[t]-e.length,w[t]){case"::":return n(r/2)+e+n((r+1)/2);case"-:":return n(r)+e;default:return e+n(r)}},I=[],l=0,c=T.length;l<c;l++){for(x=T[l],m=[],s=p=0,h=S-1;0<=h?p<=h:p>=h;s=0<=h?++p:--p)m.push(y(x[s],s));I.push(o(a(m)))}g=o(a(function(){var e,t,r,i;for(i=[],s=e=0,t=S-1;0<=t?e<=t:e>=t;s=0<=t?++e:--e)r=w[s],A=r[0],D=r[1],i.push(A+n(E[s]-2,"-")+D);return i}())),I.splice(b,0,g);var B=(0===v.length&&""!==e[1]?"\n":"")+I.join("\n");return!1!==t&&(B+="\n"),B}"\n"!==e.before.slice(-1)&&(e.before+="\n");var l=e.selection.match(t);if(l)e.selection=s(l,"\n"===e.selection.slice(-1));else{var c=e.selection+"|\n-|-\n|";if(!(l=c.match(t))||l[0].slice(0,c.length)!==c)return;var u=(c=s(l)).indexOf("|",1);e.before+=c.slice(0,1),e.selection=c.slice(1,u),e.after=c.slice(u)+e.after}},$j.doHeading=function(e){if(e.selection=e.selection.replace(/\s+/g," "),e.selection=e.selection.replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="## ",void(e.selection=this.getString("headingexample"));var t=0;e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(t=Fj.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(t=1),/-+/.test(e.endTag)&&(t=2),e.startTag=e.endTag="",e.skipLines(1,1);var n=0===t?2:t-1;if(n>0){for(e.startTag="";n--;)e.startTag+="#";e.startTag+=" "}},$j.doHorizontalRule=function(e){e.startTag="----------\n",e.selection="",e.skipLines(2,1,!0)};const Uj={};function Hj(e,t){"string"!=typeof t&&(t=Hj.defaultChars);const n=function(e){let t=Uj[e];if(t)return t;t=Uj[e]=[];for(let n=0;n<128;n++){const e=String.fromCharCode(n);t.push(e)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}(t);return e.replace(/(%[a-f0-9]{2})+/gi,(function(e){let t="";for(let r=0,i=e.length;r<i;r+=3){const o=parseInt(e.slice(r+1,r+3),16);if(o<128)t+=n[o];else{if(192==(224&o)&&r+3<i){const n=parseInt(e.slice(r+4,r+6),16);if(128==(192&n)){const e=o<<6&1984|63&n;t+=e<128?"":String.fromCharCode(e),r+=3;continue}}if(224==(240&o)&&r+6<i){const n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16);if(128==(192&n)&&128==(192&i)){const e=o<<12&61440|n<<6&4032|63&i;t+=e<2048||e>=55296&&e<=57343?"":String.fromCharCode(e),r+=6;continue}}if(240==(248&o)&&r+9<i){const n=parseInt(e.slice(r+4,r+6),16),i=parseInt(e.slice(r+7,r+9),16),a=parseInt(e.slice(r+10,r+12),16);if(128==(192&n)&&128==(192&i)&&128==(192&a)){let e=o<<18&1835008|n<<12&258048|i<<6&4032|63&a;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),r+=9;continue}}t+=""}}return t}))}Hj.defaultChars=";/?:@&=+$,#",Hj.componentChars="";const Wj={};function Gj(e,t,n){"string"!=typeof t&&(n=t,t=Gj.defaultChars),void 0===n&&(n=!0);const r=function(e){let t=Wj[e];if(t)return t;t=Wj[e]=[];for(let n=0;n<128;n++){const e=String.fromCharCode(n);/^[0-9a-z]$/i.test(e)?t.push(e):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}(t);let i="";for(let o=0,a=e.length;o<a;o++){const t=e.charCodeAt(o);if(n&&37===t&&o+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))i+=e.slice(o,o+3),o+=2;else if(t<128)i+=r[t];else if(t>=55296&&t<=57343){if(t>=55296&&t<=56319&&o+1<a){const t=e.charCodeAt(o+1);if(t>=56320&&t<=57343){i+=encodeURIComponent(e[o]+e[o+1]),o++;continue}}i+="%EF%BF%BD"}else i+=encodeURIComponent(e[o])}return i}function Vj(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Yj(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}Gj.defaultChars=";/?:@&=+$,-_.!~*'()#",Gj.componentChars="-_.!~*'()";const Kj=/^([a-z0-9.+-]+:)/i,Xj=/:[0-9]*$/,Zj=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Jj=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Qj=["'"].concat(Jj),ez=["%","/","?",";","#"].concat(Qj),tz=["/","?","#"],nz=/^[+a-z0-9A-Z_-]{0,63}$/,rz=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,iz={javascript:!0,"javascript:":!0},oz={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function az(e,t){if(e&&e instanceof Yj)return e;const n=new Yj;return n.parse(e,t),n}Yj.prototype.parse=function(e,t){let n,r,i,o=e;if(o=o.trim(),!t&&1===e.split("#").length){const e=Zj.exec(o);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let a=Kj.exec(o);if(a&&(a=a[0],n=a.toLowerCase(),this.protocol=a,o=o.substr(a.length)),(t||a||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i="//"===o.substr(0,2),!i||a&&iz[a]||(o=o.substr(2),this.slashes=!0)),!iz[a]&&(i||a&&!oz[a])){let e,t,n=-1;for(let s=0;s<tz.length;s++)r=o.indexOf(tz[s]),-1!==r&&(-1===n||r<n)&&(n=r);t=-1===n?o.lastIndexOf("@"):o.lastIndexOf("@",n),-1!==t&&(e=o.slice(0,t),o=o.slice(t+1),this.auth=e),n=-1;for(let s=0;s<ez.length;s++)r=o.indexOf(ez[s]),-1!==r&&(-1===n||r<n)&&(n=r);-1===n&&(n=o.length),":"===o[n-1]&&n--;const i=o.slice(0,n);o=o.slice(n),this.parseHost(i),this.hostname=this.hostname||"";const a="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!a){const e=this.hostname.split(/\./);for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n&&!n.match(nz)){let r="";for(let e=0,t=n.length;e<t;e++)n.charCodeAt(e)>127?r+="x":r+=n[e];if(!r.match(nz)){const r=e.slice(0,t),i=e.slice(t+1),a=n.match(rz);a&&(r.push(a[1]),i.unshift(a[2])),i.length&&(o=i.join(".")+o),this.hostname=r.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),a&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=o.indexOf("#");-1!==s&&(this.hash=o.substr(s),o=o.slice(0,s));const l=o.indexOf("?");return-1!==l&&(this.search=o.substr(l),o=o.slice(0,l)),o&&(this.pathname=o),oz[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Yj.prototype.parseHost=function(e){let t=Xj.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const sz=Object.freeze(Object.defineProperty({__proto__:null,decode:Hj,encode:Gj,format:Vj,parse:az},Symbol.toStringTag,{value:"Module"})),lz=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cz=/[\0-\x1F\x7F-\x9F]/,uz=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,hz=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,dz=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,pz=Object.freeze(Object.defineProperty({__proto__:null,Any:lz,Cc:cz,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:uz,S:hz,Z:dz},Symbol.toStringTag,{value:"Module"})),fz=new Uint16Array(
// prettier-ignore
'<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map((e=>e.charCodeAt(0)))),mz=new Uint16Array(
// prettier-ignore
"aglq\t\0\0p;os;t;t;uot;".split("").map((e=>e.charCodeAt(0))));var gz;const vz=new Map([[0,65533],
// C1 Unicode control character reference replacements
[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),yz=
// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition, node/no-unsupported-features/es-builtins
null!==(gz=String.fromCodePoint)&&void 0!==gz?gz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t};var bz,_z;(_z=bz||(bz={}))[_z.NUM=35]="NUM",_z[_z.SEMI=59]="SEMI",_z[_z.EQUALS=61]="EQUALS",_z[_z.ZERO=48]="ZERO",_z[_z.NINE=57]="NINE",_z[_z.LOWER_A=97]="LOWER_A",_z[_z.LOWER_F=102]="LOWER_F",_z[_z.LOWER_X=120]="LOWER_X",_z[_z.LOWER_Z=122]="LOWER_Z",_z[_z.UPPER_A=65]="UPPER_A",_z[_z.UPPER_F=70]="UPPER_F",_z[_z.UPPER_Z=90]="UPPER_Z";var wz,kz,xz,Cz,Sz,Tz;function Ez(e){return e>=bz.ZERO&&e<=bz.NINE}function Iz(e){return e===bz.EQUALS||function(e){return e>=bz.UPPER_A&&e<=bz.UPPER_Z||e>=bz.LOWER_A&&e<=bz.LOWER_Z||Ez(e)}(e)}(kz=wz||(wz={}))[kz.VALUE_LENGTH=49152]="VALUE_LENGTH",kz[kz.BRANCH_LENGTH=16256]="BRANCH_LENGTH",kz[kz.JUMP_TABLE=127]="JUMP_TABLE",(Cz=xz||(xz={}))[Cz.EntityStart=0]="EntityStart",Cz[Cz.NumericStart=1]="NumericStart",Cz[Cz.NumericDecimal=2]="NumericDecimal",Cz[Cz.NumericHex=3]="NumericHex",Cz[Cz.NamedEntity=4]="NamedEntity",(Tz=Sz||(Sz={}))[Tz.Legacy=0]="Legacy",Tz[Tz.Strict=1]="Strict",Tz[Tz.Attribute=2]="Attribute";class Az{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=xz.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Sz.Strict}
/** Resets the instance to make it reusable. */startEntity(e){this.decodeMode=e,this.state=xz.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}
/**
   * Write an entity to the decoder. This can be called multiple times with partial entities.
   * If the entity is incomplete, the decoder will return -1.
   *
   * Mirrors the implementation of `getDecoder`, but with the ability to stop decoding if the
   * entity is incomplete, and resume when the next string is written.
   *
   * @param string The string containing the entity (or a continuation of the entity).
   * @param offset The offset at which the entity begins. Should be 0 if this is not the first call.
   * @returns The number of characters that were consumed, or -1 if the entity is incomplete.
   */write(e,t){switch(this.state){case xz.EntityStart:return e.charCodeAt(t)===bz.NUM?(this.state=xz.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=xz.NamedEntity,this.stateNamedEntity(e,t));case xz.NumericStart:return this.stateNumericStart(e,t);case xz.NumericDecimal:return this.stateNumericDecimal(e,t);case xz.NumericHex:return this.stateNumericHex(e,t);case xz.NamedEntity:return this.stateNamedEntity(e,t)}}
/**
   * Switches between the numeric decimal and hexadecimal states.
   *
   * Equivalent to the `Numeric character reference state` in the HTML spec.
   *
   * @param str The string containing the entity (or a continuation of the entity).
   * @param offset The current offset.
   * @returns The number of characters that were consumed, or -1 if the entity is incomplete.
   */stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===bz.LOWER_X?(this.state=xz.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=xz.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){const i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}}
/**
   * Parses a hexadecimal numeric entity.
   *
   * Equivalent to the `Hexademical character reference state` in the HTML spec.
   *
   * @param str The string containing the entity (or a continuation of the entity).
   * @param offset The current offset.
   * @returns The number of characters that were consumed, or -1 if the entity is incomplete.
   */stateNumericHex(e,t){const n=t;for(;t<e.length;){const i=e.charCodeAt(t);if(!(Ez(i)||(r=i,r>=bz.UPPER_A&&r<=bz.UPPER_F||r>=bz.LOWER_A&&r<=bz.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}var r;return this.addToNumericResult(e,n,t,16),-1}
/**
   * Parses a decimal numeric entity.
   *
   * Equivalent to the `Decimal character reference state` in the HTML spec.
   *
   * @param str The string containing the entity (or a continuation of the entity).
   * @param offset The current offset.
   * @returns The number of characters that were consumed, or -1 if the entity is incomplete.
   */stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!Ez(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}
/**
   * Validate and emit a numeric entity.
   *
   * Implements the logic from the `Hexademical character reference start
   * state` and `Numeric character reference end state` in the HTML spec.
   *
   * @param lastCp The last code point of the entity. Used to see if the
   *               entity was terminated with a semicolon.
   * @param expectedLength The minimum number of characters that should be
   *                       consumed. Used to validate that at least one digit
   *                       was consumed.
   * @returns The number of characters that were consumed.
   */emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===bz.SEMI)this.consumed+=1;else if(this.decodeMode===Sz.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=vz.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==bz.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}
/**
   * Parses a named entity.
   *
   * Equivalent to the `Named character reference state` in the HTML spec.
   *
   * @param str The string containing the entity (or a continuation of the entity).
   * @param offset The current offset.
   * @returns The number of characters that were consumed, or -1 if the entity is incomplete.
   */stateNamedEntity(e,t){const{decodeTree:n}=this;let r=n[this.treeIndex],i=(r&wz.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=Bz(n,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||// If we are parsing an attribute
this.decodeMode===Sz.Attribute&&(// We shouldn't have consumed any characters after the entity,
0===i||// And there should be no invalid characters.
Iz(o))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],i=(r&wz.VALUE_LENGTH)>>14,0!==i){if(o===bz.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Sz.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}
/**
   * Emit a named entity that was not terminated with a semicolon.
   *
   * @returns The number of characters consumed.
   */emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,r=(n[t]&wz.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}
/**
   * Emit a named entity.
   *
   * @param result The index of the entity in the decode tree.
   * @param valueLength The number of bytes in the entity.
   * @param consumed The number of characters consumed.
   *
   * @returns The number of characters consumed.
   */emitNamedEntityData(e,t,n){const{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~wz.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}
/**
   * Signal to the parser that the end of the input was reached.
   *
   * Remaining data will be emitted and relevant errors will be produced.
   *
   * @returns The number of characters consumed.
   */end(){var e;switch(this.state){case xz.NamedEntity:return 0===this.result||this.decodeMode===Sz.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();
// Otherwise, emit a numeric entity if we have one.
case xz.NumericDecimal:return this.emitNumericEntity(0,2);case xz.NumericHex:return this.emitNumericEntity(0,3);case xz.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xz.EntityStart:return 0}}}function Dz(e){let t="";const n=new Az(e,(e=>t+=yz(e)));return function(e,r){let i=0,o=0;for(;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),n.startEntity(r);const a=n.write(e,
// Skip the "&"
o+1);if(a<0){i=o+n.end();break}i=o+a,o=0===a?i+1:i}const a=t+e.slice(i);return t="",a}}function Bz(e,t,n,r){const i=(t&wz.BRANCH_LENGTH)>>7,o=t&wz.JUMP_TABLE;if(0===i)return 0!==o&&r===o?n:-1;if(o){const t=r-o;return t<0||t>=i?-1:e[n+t]-1}let a=n,s=a+i-1;for(;a<=s;){const t=a+s>>>1,n=e[t];if(n<r)a=t+1;else{if(!(n>r))return e[t+i];s=t-1}}return-1}const Lz=Dz(fz);function Mz(e,t=Sz.Legacy){return Lz(e,t)}function Fz(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)}Dz(mz);const Oz=Object.prototype.hasOwnProperty;function Pz(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(n){e[n]=t[n]}))}})),e}function Nz(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function jz(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(!!(65535&~e&&65534!=(65535&e))&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function zz(e){if(e>65535){const t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Rz=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,qz=new RegExp(Rz.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),$z=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Uz(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(qz,(function(e,t,n){return t||function(e,t){if(35===t.charCodeAt(0)&&$z.test(t)){const n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return jz(n)?zz(n):e}const n=Mz(e);return n!==e?n:e}(e,n)}))}const Hz=/[&<>"]/,Wz=/[&<>"]/g,Gz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Vz(e){return Gz[e]}function Yz(e){return Hz.test(e)?e.replace(Wz,Vz):e}const Kz=/[.?*+^$[\]\\(){}|-]/g;function Xz(e){switch(e){case 9:case 32:return!0}return!1}function Zz(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:
// \t
case 10:
// \n
case 11:
// \v
case 12:
// \f
case 13:
// \r
case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Jz(e){return uz.test(e)||hz.test(e)}function Qz(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function eR(e){return e=e.trim().replace(/\s+/g," "),""==="".toLowerCase()&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const tR={mdurl:sz,ucmicro:pz},nR=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Nz,assign:Pz,escapeHtml:Yz,escapeRE:function(e){return e.replace(Kz,"\\$&")},fromCodePoint:zz,has:function(e,t){return Oz.call(e,t)},isMdAsciiPunct:Qz,isPunctChar:Jz,isSpace:Xz,isString:Fz,isValidEntityCode:jz,isWhiteSpace:Zz,lib:tR,normalizeReference:eR,unescapeAll:Uz,unescapeMd:function(e){return e.indexOf("\\")<0?e:e.replace(Rz,"$1")}},Symbol.toStringTag,{value:"Module"}));const rR=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:function(e,t,n){let r,i=t;const o={ok:!1,pos:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<n;){if(r=e.charCodeAt(i),10===r)return o;if(60===r)return o;if(62===r)return o.pos=i+1,o.str=Uz(e.slice(t+1,i)),o.ok=!0,o;92===r&&i+1<n?i+=2:i++}return o}let a=0;for(;i<n&&(r=e.charCodeAt(i),32!==r)&&!(r<32||127===r);)if(92===r&&i+1<n){if(32===e.charCodeAt(i+1))break;i+=2}else{if(40===r&&(a++,a>32))return o;if(41===r){if(0===a)break;a--}i++}return t===i||0!==a||(o.str=Uz(e.slice(t,i)),o.pos=i,o.ok=!0),o},parseLinkLabel:function(e,t,n){let r,i,o,a;const s=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(o=e.src.charCodeAt(e.pos),93===o&&(r--,0===r)){i=!0;break}if(a=e.pos,e.md.inline.skipToken(e),91===o)if(a===e.pos-1)r++;else if(n)return e.pos=l,-1}let c=-1;return i&&(c=e.pos),e.pos=l,c},parseLinkTitle:function(e,t,n,r){let i,o=t;const a={
// if `true`, this is a valid link title
ok:!1,
// if `true`, this link can be continued on the next line
can_continue:!1,
// if `ok`, it's the position of the first character after the closing marker
pos:0,
// if `ok`, it's the unescaped title
str:"",
// expected closing marker character code
marker:0};if(r)a.str=r.str,a.marker=r.marker;else{if(o>=n)return a;let r=e.charCodeAt(o);if(34!==r&&39!==r&&40!==r)return a;t++,o++,40===r&&(r=41),a.marker=r}for(;o<n;){if(i=e.charCodeAt(o),i===a.marker)return a.pos=o+1,a.str+=Uz(e.slice(t,o)),a.ok=!0,a;if(40===i&&41===a.marker)return a;92===i&&o+1<n&&o++,o++}return a.can_continue=!0,a.str+=Uz(e.slice(t,o)),a}},Symbol.toStringTag,{value:"Module"})),iR={};function oR(){this.rules=Pz({},iR)}function aR(){this.__rules__=[],this.__cache__=null}function sR(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}function lR(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}iR.code_inline=function(e,t,n,r,i){const o=e[t];return"<code"+i.renderAttrs(o)+">"+Yz(o.content)+"</code>"},iR.code_block=function(e,t,n,r,i){const o=e[t];return"<pre"+i.renderAttrs(o)+"><code>"+Yz(e[t].content)+"</code></pre>\n"},iR.fence=function(e,t,n,r,i){const o=e[t],a=o.info?Uz(o.info).trim():"";let s,l="",c="";if(a){const e=a.split(/(\s+)/g);l=e[0],c=e.slice(2).join("")}if(s=n.highlight&&n.highlight(o.content,l,c)||Yz(o.content),0===s.indexOf("<pre"))return s+"\n";if(a){const e=o.attrIndex("class"),t=o.attrs?o.attrs.slice():[];e<0?t.push(["class",n.langPrefix+l]):(t[e]=t[e].slice(),t[e][1]+=" "+n.langPrefix+l);const r={attrs:t};return`<pre><code${i.renderAttrs(r)}>${s}</code></pre>\n`}return`<pre><code${i.renderAttrs(o)}>${s}</code></pre>\n`},iR.image=function(e,t,n,r,i){const o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)},iR.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},iR.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},iR.text=function(e,t){return Yz(e[t].content)},iR.html_block=function(e,t){return e[t].content},iR.html_inline=function(e,t){return e[t].content},oR.prototype.renderAttrs=function(e){let t,n,r;if(!e.attrs)return"";for(r="",t=0,n=e.attrs.length;t<n;t++)r+=" "+Yz(e.attrs[t][0])+'="'+Yz(e.attrs[t][1])+'"';return r},oR.prototype.renderToken=function(e,t,n){const r=e[t];let i="";if(r.hidden)return"";r.block&&-1!==r.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===r.nesting?"</":"<")+r.tag,i+=this.renderAttrs(r),0===r.nesting&&n.xhtmlOut&&(i+=" /");let o=!1;if(r.block&&(o=!0,1===r.nesting&&t+1<e.length)){const n=e[t+1];("inline"===n.type||n.hidden||-1===n.nesting&&n.tag===r.tag)&&(o=!1)}return i+=o?">\n":">",i},oR.prototype.renderInline=function(e,t,n){let r="";const i=this.rules;for(let o=0,a=e.length;o<a;o++){const a=e[o].type;void 0!==i[a]?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t)}return r},oR.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,o=e.length;i<o;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"softbreak":case"hardbreak":r+="\n"}return r},oR.prototype.render=function(e,t,n){let r="";const i=this.rules;for(let o=0,a=e.length;o<a;o++){const a=e[o].type;"inline"===a?r+=this.renderInline(e[o].children,t,n):void 0!==i[a]?r+=i[a](e,o,t,n,this):r+=this.renderToken(e,o,t,n)}return r},aR.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},aR.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))}))}))},aR.prototype.at=function(e,t,n){const r=this.__find__(e),i=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null},aR.prototype.before=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},aR.prototype.after=function(e,t,n,r){const i=this.__find__(e),o=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:o.alt||[]}),this.__cache__=null},aR.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},aR.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach((function(e){const r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)}),this),this.__cache__=null,n},aR.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},aR.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach((function(e){const r=this.__find__(e);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)}),this),this.__cache__=null,n},aR.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},sR.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let n=0,r=t.length;n<r;n++)if(t[n][0]===e)return n;return-1},sR.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},sR.prototype.attrSet=function(e,t){const n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},sR.prototype.attrGet=function(e){const t=this.attrIndex(e);let n=null;return t>=0&&(n=this.attrs[t][1]),n},sR.prototype.attrJoin=function(e,t){const n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t},lR.prototype.Token=sR;const cR=/\r\n?|\n/g,uR=/\0/g;function hR(e){return/^<\/a\s*>/i.test(e)}const dR=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,pR=/\((c|tm|r)\)/i,fR=/\((c|tm|r)\)/gi,mR={c:"",r:"",tm:""};function gR(e,t){return mR[t.toLowerCase()]}function vR(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];"text"!==r.type||t||(r.content=r.content.replace(fR,gR)),"link_open"===r.type&&"auto"===r.info&&t--,"link_close"===r.type&&"auto"===r.info&&t++}}function yR(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];"text"!==r.type||t||dR.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1").replace(/(^|\s)--(?=\s|$)/gm,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1")),"link_open"===r.type&&"auto"===r.info&&t--,"link_close"===r.type&&"auto"===r.info&&t++}}const bR=/['"]/,_R=/['"]/g;function wR(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function kR(e,t){let n;const r=[];for(let i=0;i<e.length;i++){const o=e[i],a=e[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=a);n--);if(r.length=n+1,"text"!==o.type)continue;let s=o.content,l=0,c=s.length;e:for(;l<c;){_R.lastIndex=l;const u=_R.exec(s);if(!u)break;let h=!0,d=!0;l=u.index+1;const p="'"===u[0];let f=32;if(u.index-1>=0)f=s.charCodeAt(u.index-1);else for(n=i-1;n>=0&&("softbreak"!==e[n].type&&"hardbreak"!==e[n].type);n--)if(e[n].content){f=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(l<c)m=s.charCodeAt(l);else for(n=i+1;n<e.length&&("softbreak"!==e[n].type&&"hardbreak"!==e[n].type);n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const g=Qz(f)||Jz(String.fromCharCode(f)),v=Qz(m)||Jz(String.fromCharCode(m)),y=Zz(f),b=Zz(m);if(b?h=!1:v&&(y||g||(h=!1)),y?d=!1:g&&(b||v||(d=!1)),34===m&&'"'===u[0]&&f>=48&&f<=57&&(d=h=!1),h&&d&&(h=g,d=v),h||d){if(d)for(n=r.length-1;n>=0;n--){let h=r[n];if(r[n].level<a)break;if(h.single===p&&r[n].level===a){let a,d;h=r[n],p?(a=t.md.options.quotes[2],d=t.md.options.quotes[3]):(a=t.md.options.quotes[0],d=t.md.options.quotes[1]),o.content=wR(o.content,u.index,d),e[h.token].content=wR(e[h.token].content,h.pos,a),l+=d.length-1,h.token===i&&(l+=a.length-1),s=o.content,c=s.length,r.length=n;continue e}}h?r.push({token:i,pos:u.index,single:p,level:a}):d&&p&&(o.content=wR(o.content,u.index,""))}else p&&(o.content=wR(o.content,u.index,""))}}}const xR=[["normalize",function(e){let t;t=e.src.replace(cR,"\n"),t=t.replace(uR,""),e.src=t}],["block",function(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const r=t[n];"inline"===r.type&&e.md.inline.parse(r.content,e.md,e.env,r.children)}}],["linkify",function(e){const t=e.tokens;var n;if(e.md.options.linkify)for(let r=0,i=t.length;r<i;r++){if("inline"!==t[r].type||!e.md.linkify.pretest(t[r].content))continue;let i=t[r].children,o=0;for(let a=i.length-1;a>=0;a--){const s=i[a];if("link_close"!==s.type){if("html_inline"===s.type&&(n=s.content,/^<a[>\s]/i.test(n)&&o>0&&o--,hR(s.content)&&o++),!(o>0)&&"text"===s.type&&e.md.linkify.test(s.content)){const n=s.content;let o=e.md.linkify.match(n);const l=[];let c=s.level,u=0;o.length>0&&0===o[0].index&&a>0&&"text_special"===i[a-1].type&&(o=o.slice(1));for(let t=0;t<o.length;t++){const r=o[t].url,i=e.md.normalizeLink(r);if(!e.md.validateLink(i))continue;let a=o[t].text;a=o[t].schema?"mailto:"!==o[t].schema||/^mailto:/i.test(a)?e.md.normalizeLinkText(a):e.md.normalizeLinkText("mailto:"+a).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+a).replace(/^http:\/\//,"");const s=o[t].index;if(s>u){const t=new e.Token("text","",0);t.content=n.slice(u,s),t.level=c,l.push(t)}const h=new e.Token("link_open","a",1);h.attrs=[["href",i]],h.level=c++,h.markup="linkify",h.info="auto",l.push(h);const d=new e.Token("text","",0);d.content=a,d.level=c,l.push(d);const p=new e.Token("link_close","a",-1);p.level=--c,p.markup="linkify",p.info="auto",l.push(p),u=o[t].lastIndex}if(u<n.length){const t=new e.Token("text","",0);t.content=n.slice(u),t.level=c,l.push(t)}t[r].children=i=Nz(i,a,l)}}else for(a--;i[a].level!==s.level&&"link_open"!==i[a].type;)a--}}}],["replacements",function(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(pR.test(e.tokens[t].content)&&vR(e.tokens[t].children),dR.test(e.tokens[t].content)&&yR(e.tokens[t].children))}],["smartquotes",function(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&bR.test(e.tokens[t].content)&&kR(e.tokens[t].children,e)}],
// `text_join` finds `text_special` tokens (for escape sequences)
// and joins them with the rest of the text
["text_join",function(e){let t,n;const r=e.tokens,i=r.length;for(let o=0;o<i;o++){if("inline"!==r[o].type)continue;const e=r[o].children,i=e.length;for(t=0;t<i;t++)"text_special"===e[t].type&&(e[t].type="text");for(t=n=0;t<i;t++)"text"===e[t].type&&t+1<i&&"text"===e[t+1].type?e[t+1].content=e[t].content+e[t+1].content:(t!==n&&(e[n]=e[t]),n++);t!==n&&(e.length=n)}}]];function CR(){this.ruler=new aR;for(let e=0;e<xR.length;e++)this.ruler.push(xR[e][0],xR[e][1])}function SR(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let o=0,a=0,s=0,l=0,c=i.length,u=!1;a<c;a++){const e=i.charCodeAt(a);if(!u){if(Xz(e)){s++,9===e?l+=4-l%4:l++;continue}u=!0}10!==e&&a!==c-1||(10!==e&&a++,this.bMarks.push(o),this.eMarks.push(a),this.tShift.push(s),this.sCount.push(l),this.bsCount.push(0),u=!1,s=0,l=0,o=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}CR.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)},CR.prototype.State=lR,SR.prototype.push=function(e,t,n){const r=new sR(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r},SR.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},SR.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},SR.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){if(!Xz(this.src.charCodeAt(e)))break}return e},SR.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Xz(this.src.charCodeAt(--e)))return e+1;return e},SR.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},SR.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},SR.prototype.getLines=function(e,t,n,r){if(e>=t)return"";const i=new Array(t-e);for(let o=0,a=e;a<t;a++,o++){let e=0;const s=this.bMarks[a];let l,c=s;for(l=a+1<t||r?this.eMarks[a]+1:this.eMarks[a];c<l&&e<n;){const t=this.src.charCodeAt(c);if(Xz(t))9===t?e+=4-(e+this.bsCount[a])%4:e++;else{if(!(c-s<this.tShift[a]))break;e++}c++}i[o]=e>n?new Array(e-n+1).join(" ")+this.src.slice(c,l):this.src.slice(c,l)}return i.join("")},SR.prototype.Token=sR;function TR(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function ER(e){const t=[],n=e.length;let r=0,i=e.charCodeAt(r),o=!1,a=0,s="";for(;r<n;)124===i&&(o?(s+=e.substring(a,r-1),a=r):(t.push(s+e.substring(a,r)),s="",a=r+1)),o=92===i,r++,i=e.charCodeAt(r);return t.push(s+e.substring(a)),t}function IR(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(r++);if(42!==i&&45!==i&&43!==i)return-1;if(r<n){if(!Xz(e.src.charCodeAt(r)))return-1}return r}function AR(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let i=n;if(i+1>=r)return-1;let o=e.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=e.src.charCodeAt(i++),!(o>=48&&o<=57)){if(41===o||46===o)break;return-1}if(i-n>=10)return-1}return i<r&&(o=e.src.charCodeAt(i),!Xz(o))?-1:i}const DR="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",BR="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",LR=new RegExp("^(?:"+DR+"|"+BR+"|\x3c!---?>|\x3c!--(?:[^-]|-[^-]|--[^>])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),MR=new RegExp("^(?:"+DR+"|"+BR+")"),FR=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(MR.source+"\\s*$"),/^$/,!1]];const OR=[
// First 2 params - rule name & source. Secondary array - list of rules,
// which can be terminated by this one.
["table",function(e,t,n,r){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent)return!1;if(e.sCount[i]-e.blkIndent>=4)return!1;let o=e.bMarks[i]+e.tShift[i];if(o>=e.eMarks[i])return!1;const a=e.src.charCodeAt(o++);if(124!==a&&45!==a&&58!==a)return!1;if(o>=e.eMarks[i])return!1;const s=e.src.charCodeAt(o++);if(124!==s&&45!==s&&58!==s&&!Xz(s))return!1;if(45===a&&Xz(s))return!1;for(;o<e.eMarks[i];){const t=e.src.charCodeAt(o);if(124!==t&&45!==t&&58!==t&&!Xz(t))return!1;o++}let l=TR(e,t+1),c=l.split("|");const u=[];for(let v=0;v<c.length;v++){const e=c[v].trim();if(!e){if(0===v||v===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(e))return!1;58===e.charCodeAt(e.length-1)?u.push(58===e.charCodeAt(0)?"center":"right"):58===e.charCodeAt(0)?u.push("left"):u.push("")}if(l=TR(e,t).trim(),-1===l.indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;c=ER(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop();const h=c.length;if(0===h||h!==u.length)return!1;if(r)return!0;const d=e.parentType;e.parentType="table";const p=e.md.block.ruler.getRules("blockquote"),f=[t,0];e.push("table_open","table",1).map=f,e.push("thead_open","thead",1).map=[t,t+1],e.push("tr_open","tr",1).map=[t,t+1];for(let v=0;v<c.length;v++){const t=e.push("th_open","th",1);u[v]&&(t.attrs=[["style","text-align:"+u[v]]]);const n=e.push("inline","",0);n.content=c[v].trim(),n.children=[],e.push("th_close","th",-1)}let m;e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let g=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let r=!1;for(let t=0,o=p.length;t<o;t++)if(p[t](e,i,n,!0)){r=!0;break}if(r)break;if(l=TR(e,i).trim(),!l)break;if(e.sCount[i]-e.blkIndent>=4)break;if(c=ER(l),c.length&&""===c[0]&&c.shift(),c.length&&""===c[c.length-1]&&c.pop(),g+=h-c.length,g>65536)break;if(i===t+2){e.push("tbody_open","tbody",1).map=m=[t+2,0]}e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<h;t++){const n=e.push("td_open","td",1);u[t]&&(n.attrs=[["style","text-align:"+u[t]]]);const r=e.push("inline","",0);r.content=c[t]?c[t].trim():"",r.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return m&&(e.push("tbody_close","tbody",-1),m[1]=i),e.push("table_close","table",-1),f[1]=i,e.parentType=d,e.line=i,!0},["paragraph","reference"]],["code",function(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;)if(e.isEmpty(r))r++;else{if(!(e.sCount[r]-e.blkIndent>=4))break;r++,i=r}e.line=i;const o=e.push("code_block","code",0);return o.content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",o.map=[t,e.line],!0}],["fence",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(i+3>o)return!1;const a=e.src.charCodeAt(i);if(126!==a&&96!==a)return!1;let s=i;i=e.skipChars(i,a);let l=i-s;if(l<3)return!1;const c=e.src.slice(s,i),u=e.src.slice(i,o);if(96===a&&u.indexOf(String.fromCharCode(a))>=0)return!1;if(r)return!0;let h=t,d=!1;for(;(h++,!(h>=n))&&(i=s=e.bMarks[h]+e.tShift[h],o=e.eMarks[h],!(i<o&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(i)===a&&!(e.sCount[h]-e.blkIndent>=4||(i=e.skipChars(i,a),i-s<l||(i=e.skipSpaces(i),i<o)))){d=!0;break}l=e.sCount[t],e.line=h+(d?1:0);const p=e.push("fence","code",0);return p.info=u,p.content=e.getLines(t+1,h,l,!0),p.markup=c,p.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];const a=e.lineMax;if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(i))return!1;if(r)return!0;const s=[],l=[],c=[],u=[],h=e.md.block.ruler.getRules("blockquote"),d=e.parentType;e.parentType="blockquote";let p,f=!1;for(p=t;p<n;p++){const t=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],o=e.eMarks[p],i>=o)break;if(62===e.src.charCodeAt(i++)&&!t){let t,n,r=e.sCount[p]+1;32===e.src.charCodeAt(i)?(i++,r++,n=!1,t=!0):9===e.src.charCodeAt(i)?(t=!0,(e.bsCount[p]+r)%4==3?(i++,r++,n=!1):n=!0):t=!1;let a=r;for(s.push(e.bMarks[p]),e.bMarks[p]=i;i<o;){const t=e.src.charCodeAt(i);if(!Xz(t))break;9===t?a+=4-(a+e.bsCount[p]+(n?1:0))%4:a++,i++}f=i>=o,l.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(t?1:0),c.push(e.sCount[p]),e.sCount[p]=a-r,u.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(f)break;let r=!1;for(let i=0,o=h.length;i<o;i++)if(h[i](e,p,n,!0)){r=!0;break}if(r){e.lineMax=p,0!==e.blkIndent&&(s.push(e.bMarks[p]),l.push(e.bsCount[p]),u.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}s.push(e.bMarks[p]),l.push(e.bsCount[p]),u.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const v=[t,0];g.map=v,e.md.block.tokenize(e,t,p),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=a,e.parentType=d,v[1]=e.line;for(let y=0;y<u.length;y++)e.bMarks[y+t]=s[y],e.tShift[y+t]=u[y],e.sCount[y+t]=c[y],e.bsCount[y+t]=l[y];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,n,r){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(o++);if(42!==a&&45!==a&&95!==a)return!1;let s=1;for(;o<i;){const t=e.src.charCodeAt(o++);if(t!==a&&!Xz(t))return!1;t===a&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(a)),!0},["paragraph","reference","blockquote","list"]],["list",function(e,t,n,r){let i,o,a,s,l=t,c=!0;if(e.sCount[l]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let u,h,d,p=!1;if(r&&"paragraph"===e.parentType&&e.sCount[l]>=e.blkIndent&&(p=!0),(d=AR(e,l))>=0){if(u=!0,a=e.bMarks[l]+e.tShift[l],h=Number(e.src.slice(a,d-1)),p&&1!==h)return!1}else{if(!((d=IR(e,l))>=0))return!1;u=!1}if(p&&e.skipSpaces(d)>=e.eMarks[l])return!1;if(r)return!0;const f=e.src.charCodeAt(d-1),m=e.tokens.length;u?(s=e.push("ordered_list_open","ol",1),1!==h&&(s.attrs=[["start",h]])):s=e.push("bullet_list_open","ul",1);const g=[l,0];s.map=g,s.markup=String.fromCharCode(f);let v=!1;const y=e.md.block.ruler.getRules("list"),b=e.parentType;for(e.parentType="list";l<n;){o=d,i=e.eMarks[l];const t=e.sCount[l]+d-(e.bMarks[l]+e.tShift[l]);let r=t;for(;o<i;){const t=e.src.charCodeAt(o);if(9===t)r+=4-(r+e.bsCount[l])%4;else{if(32!==t)break;r++}o++}const h=o;let p;p=h>=i?1:r-t,p>4&&(p=1);const m=t+p;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(f);const g=[l,0];s.map=g,u&&(s.info=e.src.slice(a,d-1));const b=e.tight,_=e.tShift[l],w=e.sCount[l],k=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=m,e.tight=!0,e.tShift[l]=h-e.bMarks[l],e.sCount[l]=r,h>=i&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),e.tight&&!v||(c=!1),v=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=k,e.tShift[l]=_,e.sCount[l]=w,e.tight=b,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(f),l=e.line,g[1]=l,l>=n)break;if(e.sCount[l]<e.blkIndent)break;if(e.sCount[l]-e.blkIndent>=4)break;let x=!1;for(let i=0,o=y.length;i<o;i++)if(y[i](e,l,n,!0)){x=!0;break}if(x)break;if(u){if(d=AR(e,l),d<0)break;a=e.bMarks[l]+e.tShift[l]}else if(d=IR(e,l),d<0)break;if(f!==e.src.charCodeAt(d-1))break}return s=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(f),g[1]=l,e.line=l,e.parentType=b,c&&function(e,t){const n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,m),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],a=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(i))return!1;function s(t){const n=e.lineMax;if(t>=n||e.isEmpty(t))return null;let r=!1;if(e.sCount[t]-e.blkIndent>3&&(r=!0),e.sCount[t]<0&&(r=!0),!r){const r=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let o=!1;for(let a=0,s=r.length;a<s;a++)if(r[a](e,t,n,!0)){o=!0;break}if(e.parentType=i,o)return null}const i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(i,o+1)}let l=e.src.slice(i,o+1);o=l.length;let c=-1;for(i=1;i<o;i++){const e=l.charCodeAt(i);if(91===e)return!1;if(93===e){c=i;break}if(10===e){const e=s(a);null!==e&&(l+=e,o=l.length,a++)}else if(92===e&&(i++,i<o&&10===l.charCodeAt(i))){const e=s(a);null!==e&&(l+=e,o=l.length,a++)}}if(c<0||58!==l.charCodeAt(c+1))return!1;for(i=c+2;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=s(a);null!==e&&(l+=e,o=l.length,a++)}else if(!Xz(e))break}const u=e.md.helpers.parseLinkDestination(l,i,o);if(!u.ok)return!1;const h=e.md.normalizeLink(u.str);if(!e.md.validateLink(h))return!1;i=u.pos;const d=i,p=a,f=i;for(;i<o;i++){const e=l.charCodeAt(i);if(10===e){const e=s(a);null!==e&&(l+=e,o=l.length,a++)}else if(!Xz(e))break}let m,g=e.md.helpers.parseLinkTitle(l,i,o);for(;g.can_continue;){const t=s(a);if(null===t)break;l+=t,i=o,o=l.length,a++,g=e.md.helpers.parseLinkTitle(l,i,o,g)}for(i<o&&f!==i&&g.ok?(m=g.str,i=g.pos):(m="",i=d,a=p);i<o;){if(!Xz(l.charCodeAt(i)))break;i++}if(i<o&&10!==l.charCodeAt(i)&&m)for(m="",i=d,a=p;i<o;){if(!Xz(l.charCodeAt(i)))break;i++}if(i<o&&10!==l.charCodeAt(i))return!1;const v=eR(l.slice(1,c));return!!v&&(r||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[v]&&(e.env.references[v]={title:m,href:h}),e.line=a),!0)}],["html_block",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(i))return!1;let a=e.src.slice(i,o),s=0;for(;s<FR.length&&!FR[s][0].test(a);s++);if(s===FR.length)return!1;if(r)return FR[s][2];let l=t+1;if(!FR[s][1].test(a))for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(i=e.bMarks[l]+e.tShift[l],o=e.eMarks[l],a=e.src.slice(i,o),FR[s][1].test(a)){0!==a.length&&l++;break}e.line=l;const c=e.push("html_block","",0);return c.map=[t,l],c.content=e.getLines(t,l,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["heading",function(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.src.charCodeAt(i);if(35!==a||i>=o)return!1;let s=1;for(a=e.src.charCodeAt(++i);35===a&&i<o&&s<=6;)s++,a=e.src.charCodeAt(++i);if(s>6||i<o&&!Xz(a))return!1;if(r)return!0;o=e.skipSpacesBack(o,i);const l=e.skipCharsBack(o,35,i);l>i&&Xz(e.src.charCodeAt(l-1))&&(o=l),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=e.src.slice(i,o).trim(),u.map=[t,e.line],u.children=[],e.push("heading_close","h"+String(s),-1).markup="########".slice(0,s),!0},["paragraph","reference","blockquote"]],["lheading",function(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let o,a=0,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let t=e.bMarks[s]+e.tShift[s];const n=e.eMarks[s];if(t<n&&(o=e.src.charCodeAt(t),(45===o||61===o)&&(t=e.skipChars(t,o),t=e.skipSpaces(t),t>=n))){a=61===o?1:2;break}}if(e.sCount[s]<0)continue;let t=!1;for(let i=0,o=r.length;i<o;i++)if(r[i](e,s,n,!0)){t=!0;break}if(t)break}if(!a)return!1;const l=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(a),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const u=e.push("inline","",0);return u.content=l,u.map=[t,e.line-1],u.children=[],e.push("heading_close","h"+String(a),-1).markup=String.fromCharCode(o),e.parentType=i,!0}],["paragraph",function(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let o=t+1;for(e.parentType="paragraph";o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]<0)continue;let t=!1;for(let i=0,a=r.length;i<a;i++)if(r[i](e,o,n,!0)){t=!0;break}if(t)break}const a=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o,e.push("paragraph_open","p",1).map=[t,e.line];const s=e.push("inline","",0);return s.content=a,s.map=[t,e.line],s.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}]];function PR(){this.ruler=new aR;for(let e=0;e<OR.length;e++)this.ruler.push(OR[e][0],OR[e][1],{alt:(OR[e][2]||[]).slice()})}function NR(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}function jR(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}PR.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),i=r.length,o=e.md.options.maxNesting;let a=t,s=!1;for(;a<n&&(e.line=a=e.skipEmptyLines(a),!(a>=n))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=o){e.line=n;break}const t=e.line;let l=!1;for(let o=0;o<i;o++)if(l=r[o](e,a,n,!1),l){if(t>=e.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),a=e.line,a<n&&e.isEmpty(a)&&(s=!0,a++,e.line=a)}},PR.prototype.parse=function(e,t,n,r){if(!e)return;const i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)},PR.prototype.State=SR,NR.prototype.pushPending=function(){const e=new sR("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},NR.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new sR(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r},NR.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let o=e;for(;o<n&&this.src.charCodeAt(o)===r;)o++;const a=o-e,s=o<n?this.src.charCodeAt(o):32,l=Qz(i)||Jz(String.fromCharCode(i)),c=Qz(s)||Jz(String.fromCharCode(s)),u=Zz(i),h=Zz(s),d=!h&&(!c||u||l),p=!u&&(!l||h||c);return{can_open:d&&(t||!p||l),can_close:p&&(t||!d||c),length:a}},NR.prototype.Token=sR;const zR=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;const RR=[];for(let o7=0;o7<256;o7++)RR.push(0);function qR(e,t){let n;const r=[],i=t.length;for(let o=0;o<i;o++){const i=t[o];if(126!==i.marker)continue;if(-1===i.end)continue;const a=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&r.push(a.token-1)}for(;r.length;){const t=r.pop();let i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;i--,t!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=n)}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){RR[e.charCodeAt(0)]=1}));const $R={tokenize:function(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t)return!1;if(126!==r)return!1;const i=e.scanDelims(e.pos,!0);let o=i.length;const a=String.fromCharCode(r);if(o<2)return!1;let s;o%2&&(s=e.push("text","",0),s.content=a,o--);for(let l=0;l<o;l+=2)s=e.push("text","",0),s.content=a+a,e.delimiters.push({marker:r,length:0,
// disable "rule of 3" length checks meant for emphasis
token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,n=e.tokens_meta.length;qR(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&qR(e,t[r].delimiters)}};function UR(e,t){for(let n=t.length-1;n>=0;n--){const r=t[n];if(95!==r.marker&&42!==r.marker)continue;if(-1===r.end)continue;const i=t[r.end],o=n>0&&t[n-1].end===r.end+1&&// check that first two markers match and adjacent
t[n-1].marker===r.marker&&t[n-1].token===r.token-1&&// check that last two markers are adjacent (we can safely assume they match)
t[r.end+1].token===i.token+1,a=String.fromCharCode(r.marker),s=e.tokens[r.token];s.type=o?"strong_open":"em_open",s.tag=o?"strong":"em",s.nesting=1,s.markup=o?a+a:a,s.content="";const l=e.tokens[i.token];l.type=o?"strong_close":"em_close",l.tag=o?"strong":"em",l.nesting=-1,l.markup=o?a+a:a,l.content="",o&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--)}}const HR={tokenize:function(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t)return!1;if(95!==r&&42!==r)return!1;const i=e.scanDelims(e.pos,42===r);for(let o=0;o<i.length;o++){e.push("text","",0).content=String.fromCharCode(r),e.delimiters.push({
// Char code of the starting marker (number).
marker:r,
// Total length of these series of delimiters.
length:i.length,
// A position of the token this delimiter corresponds to.
token:e.tokens.length-1,
// If this delimiter is matched as a valid opener, `end` will be
// equal to its position, otherwise it's `-1`.
end:-1,
// Boolean flags that determine if this delimiter could open or close
// an emphasis.
open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0},postProcess:function(e){const t=e.tokens_meta,n=e.tokens_meta.length;UR(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&UR(e,t[r].delimiters)}};const WR=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,GR=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;const VR=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,YR=/^&([a-z][a-z0-9]{1,31});/i;function KR(e){const t={},n=e.length;if(!n)return;let r=0,i=-2;const o=[];for(let a=0;a<n;a++){const n=e[a];if(o.push(0),e[r].marker===n.marker&&i===n.token-1||(r=a),i=n.token,n.length=n.length||0,!n.close)continue;t.hasOwnProperty(n.marker)||(t[n.marker]=[-1,-1,-1,-1,-1,-1]);const s=t[n.marker][(n.open?3:0)+n.length%3];let l=r-o[r]-1,c=l;for(;l>s;l-=o[l]+1){const t=e[l];if(t.marker===n.marker&&(t.open&&t.end<0)){let r=!1;if((t.close||n.open)&&(t.length+n.length)%3==0&&(t.length%3==0&&n.length%3==0||(r=!0)),!r){const r=l>0&&!e[l-1].open?o[l-1]+1:0;o[a]=a-l+r,o[l]=r,n.open=!1,t.end=a,t.close=!1,c=-1,i=-2;break}}}-1!==c&&(t[n.marker][(n.open?3:0)+(n.length||0)%3]=c)}}const XR=[["text",function(e,t){let n=e.pos;for(;n<e.posMax&&!jR(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}],["linkify",function(e,t){if(!e.md.options.linkify)return!1;if(e.linkLevel>0)return!1;const n=e.pos;if(n+3>e.posMax)return!1;if(58!==e.src.charCodeAt(n))return!1;if(47!==e.src.charCodeAt(n+1))return!1;if(47!==e.src.charCodeAt(n+2))return!1;const r=e.pending.match(zR);if(!r)return!1;const i=r[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let a=o.url;if(a.length<=i.length)return!1;a=a.replace(/\*+$/,"");const s=e.md.normalizeLink(a);if(!e.md.validateLink(s))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const t=e.push("link_open","a",1);t.attrs=[["href",s]],t.markup="linkify",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(a);const n=e.push("link_close","a",-1);n.markup="linkify",n.info="auto"}return e.pos+=a.length-i.length,!0}],["newline",function(e,t){let n=e.pos;if(10!==e.src.charCodeAt(n))return!1;const r=e.pending.length-1,i=e.posMax;if(!t)if(r>=0&&32===e.pending.charCodeAt(r))if(r>=1&&32===e.pending.charCodeAt(r-1)){let t=r-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&Xz(e.src.charCodeAt(n));)n++;return e.pos=n,!0}],["escape",function(e,t){let n=e.pos;const r=e.posMax;if(92!==e.src.charCodeAt(n))return!1;if(n++,n>=r)return!1;let i=e.src.charCodeAt(n);if(10===i){for(t||e.push("hardbreak","br",0),n++;n<r&&(i=e.src.charCodeAt(n),Xz(i));)n++;return e.pos=n,!0}let o=e.src[n];if(i>=55296&&i<=56319&&n+1<r){const t=e.src.charCodeAt(n+1);t>=56320&&t<=57343&&(o+=e.src[n+1],n++)}const a="\\"+o;if(!t){const t=e.push("text_special","",0);i<256&&0!==RR[i]?t.content=o:t.content=a,t.markup=a,t.info="escape"}return e.pos=n+1,!0}],["backticks",function(e,t){let n=e.pos;if(96!==e.src.charCodeAt(n))return!1;const r=n;n++;const i=e.posMax;for(;n<i&&96===e.src.charCodeAt(n);)n++;const o=e.src.slice(r,n),a=o.length;if(e.backticksScanned&&(e.backticks[a]||0)<=r)return t||(e.pending+=o),e.pos+=a,!0;let s,l=n;for(;-1!==(s=e.src.indexOf("`",l));){for(l=s+1;l<i&&96===e.src.charCodeAt(l);)l++;const r=l-s;if(r===a){if(!t){const t=e.push("code_inline","code",0);t.markup=o,t.content=e.src.slice(n,s).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[r]=s}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=a,!0}],["strikethrough",$R.tokenize],["emphasis",HR.tokenize],["link",function(e,t){let n,r,i,o,a="",s="",l=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;const u=e.pos,h=e.posMax,d=e.pos+1,p=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(p<0)return!1;let f=p+1;if(f<h&&40===e.src.charCodeAt(f)){for(c=!1,f++;f<h&&(n=e.src.charCodeAt(f),Xz(n)||10===n);f++);if(f>=h)return!1;if(l=f,i=e.md.helpers.parseLinkDestination(e.src,f,e.posMax),i.ok){for(a=e.md.normalizeLink(i.str),e.md.validateLink(a)?f=i.pos:a="",l=f;f<h&&(n=e.src.charCodeAt(f),Xz(n)||10===n);f++);if(i=e.md.helpers.parseLinkTitle(e.src,f,e.posMax),f<h&&l!==f&&i.ok)for(s=i.str,f=i.pos;f<h&&(n=e.src.charCodeAt(f),Xz(n)||10===n);f++);}(f>=h||41!==e.src.charCodeAt(f))&&(c=!0),f++}if(c){if(void 0===e.env.references)return!1;if(f<h&&91===e.src.charCodeAt(f)?(l=f+1,f=e.md.helpers.parseLinkLabel(e,f),f>=0?r=e.src.slice(l,f++):f=p+1):f=p+1,r||(r=e.src.slice(d,p)),o=e.env.references[eR(r)],!o)return e.pos=u,!1;a=o.href,s=o.title}if(!t){e.pos=d,e.posMax=p;const t=[["href",a]];e.push("link_open","a",1).attrs=t,s&&t.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=f,e.posMax=h,!0}],["image",function(e,t){let n,r,i,o,a,s,l,c,u="";const h=e.pos,d=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;const p=e.pos+2,f=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(f<0)return!1;if(o=f+1,o<d&&40===e.src.charCodeAt(o)){for(o++;o<d&&(n=e.src.charCodeAt(o),Xz(n)||10===n);o++);if(o>=d)return!1;for(c=o,s=e.md.helpers.parseLinkDestination(e.src,o,e.posMax),s.ok&&(u=e.md.normalizeLink(s.str),e.md.validateLink(u)?o=s.pos:u=""),c=o;o<d&&(n=e.src.charCodeAt(o),Xz(n)||10===n);o++);if(s=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<d&&c!==o&&s.ok)for(l=s.str,o=s.pos;o<d&&(n=e.src.charCodeAt(o),Xz(n)||10===n);o++);else l="";if(o>=d||41!==e.src.charCodeAt(o))return e.pos=h,!1;o++}else{if(void 0===e.env.references)return!1;if(o<d&&91===e.src.charCodeAt(o)?(c=o+1,o=e.md.helpers.parseLinkLabel(e,o),o>=0?i=e.src.slice(c,o++):o=f+1):o=f+1,i||(i=e.src.slice(p,f)),a=e.env.references[eR(i)],!a)return e.pos=h,!1;u=a.href,l=a.title}if(!t){r=e.src.slice(p,f);const t=[];e.md.inline.parse(r,e.md,e.env,t);const n=e.push("image","img",0),i=[["src",u],["alt",""]];n.attrs=i,n.children=t,n.content=r,l&&i.push(["title",l])}return e.pos=o,e.posMax=d,!0}],["autolink",function(e,t){let n=e.pos;if(60!==e.src.charCodeAt(n))return!1;const r=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const t=e.src.charCodeAt(n);if(60===t)return!1;if(62===t)break}const o=e.src.slice(r+1,n);if(GR.test(o)){const n=e.md.normalizeLink(o);if(!e.md.validateLink(n))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(o);const r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=o.length+2,!0}if(WR.test(o)){const n=e.md.normalizeLink("mailto:"+o);if(!e.md.validateLink(n))return!1;if(!t){const t=e.push("link_open","a",1);t.attrs=[["href",n]],t.markup="autolink",t.info="auto";e.push("text","",0).content=e.md.normalizeLinkText(o);const r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=o.length+2,!0}return!1}],["html_inline",function(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(60!==e.src.charCodeAt(r)||r+2>=n)return!1;const i=e.src.charCodeAt(r+1);if(33!==i&&63!==i&&47!==i&&!function(e){const t=32|e;return t>=97&&t<=122}(i))return!1;const o=e.src.slice(r).match(LR);if(!o)return!1;if(!t){const t=e.push("html_inline","",0);t.content=o[0],a=t.content,/^<a[>\s]/i.test(a)&&e.linkLevel++,function(e){return/^<\/a\s*>/i.test(e)}(t.content)&&e.linkLevel--}var a;return e.pos+=o[0].length,!0}],["entity",function(e,t){const n=e.pos,r=e.posMax;if(38!==e.src.charCodeAt(n))return!1;if(n+1>=r)return!1;if(35===e.src.charCodeAt(n+1)){const r=e.src.slice(n).match(VR);if(r){if(!t){const t="x"===r[1][0].toLowerCase()?parseInt(r[1].slice(1),16):parseInt(r[1],10),n=e.push("text_special","",0);n.content=jz(t)?zz(t):zz(65533),n.markup=r[0],n.info="entity"}return e.pos+=r[0].length,!0}}else{const r=e.src.slice(n).match(YR);if(r){const n=Mz(r[0]);if(n!==r[0]){if(!t){const t=e.push("text_special","",0);t.content=n,t.markup=r[0],t.info="entity"}return e.pos+=r[0].length,!0}}}return!1}]],ZR=[["balance_pairs",function(e){const t=e.tokens_meta,n=e.tokens_meta.length;KR(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&KR(t[r].delimiters)}],["strikethrough",$R.postProcess],["emphasis",HR.postProcess],
// rules for pairs separate '**' into its own text tokens, which may be left unused,
// rule below merges unused segments back with the rest of the text
["fragments_join",function(e){let t,n,r=0;const i=e.tokens,o=e.tokens.length;for(t=n=0;t<o;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,"text"===i[t].type&&t+1<o&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}]];function JR(){this.ruler=new aR;for(let e=0;e<XR.length;e++)this.ruler.push(XR[e][0],XR[e][1]);this.ruler2=new aR;for(let e=0;e<ZR.length;e++)this.ruler2.push(ZR[e][0],ZR[e][1])}function QR(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function eq(e){return Object.prototype.toString.call(e)}function tq(e){return"[object Function]"===eq(e)}function nq(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}JR.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,o=e.cache;if(void 0!==o[t])return void(e.pos=o[t]);let a=!1;if(e.level<i){for(let s=0;s<r;s++)if(e.level++,a=n[s](e,!0),e.level--,a){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;a||e.pos++,o[t]=e.pos},JR.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){const o=e.pos;let a=!1;if(e.level<i)for(let r=0;r<n;r++)if(a=t[r](e,!1),a){if(o>=e.pos)throw new Error("inline rule didn't increment state.pos");break}if(a){if(e.pos>=r)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},JR.prototype.parse=function(e,t,n,r){const i=new this.State(e,t,n,r);this.tokenize(i);const o=this.ruler2.getRules(""),a=o.length;for(let s=0;s<a;s++)o[s](i)},JR.prototype.State=NR;const rq={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};const iq={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+// Don't allow single-level domains, because of false positives like '//test'
// with code comments
"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},oq="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function aq(e){const t=e.re=function(e){const t={};e=e||{},t.src_Any=lz.source,t.src_Cc=cz.source,t.src_Z=dz.source,t.src_P=uz.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?![><]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+// allow `,,,` in paths
",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root=// Allow letters & digits (http://test1)
"(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy=// Fuzzy link can't be prepended with .:/\- and non punctuation.
// but can start with > (markdown blockquote)
"(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy=// Fuzzy link can't be prepended with .:/\- and non punctuation.
// but can start with > (markdown blockquote)
"(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}(e.__opts__),n=e.__tlds__.slice();function r(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const i=[];function o(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){const n=e.__schemas__[t];if(null===n)return;const r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===eq(n))return!function(e){return"[object RegExp]"===eq(e)}(n.validate)?tq(n.validate)?r.validate=n.validate:o(t,n):r.validate=function(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(tq(n.normalize)?r.normalize=n.normalize:n.normalize?o(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===eq(e)}(n)?o(t,n):i.push(t)})),i.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};const a=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(nq).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+a+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function sq(e,t){const n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function lq(e,t){const n=new sq(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function cq(e,t){if(!(this instanceof cq))return new cq(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||rq.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=QR({},rq,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=QR({},iq,e),this.__compiled__={},this.__tlds__=oq,this.__tlds_replaced__=!1,this.re={},aq(this)}cq.prototype.add=function(e,t){return this.__schemas__[e]=t,aq(this),this},cq.prototype.set=function(e){return this.__opts__=QR(this.__opts__,e),this},cq.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,n,r,i,o,a,s,l,c;if(this.re.schema_test.test(e))for(s=this.re.schema_search,s.lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex),i){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0},cq.prototype.pretest=function(e){return this.re.pretest.test(e)},cq.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},cq.prototype.match=function(e){const t=[];let n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(lq(this,n)),n=this.__last_index__);let r=n?e.slice(n):e;for(;this.test(r);)t.push(lq(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null},cq.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,lq(this,0)):null},cq.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),aq(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,aq(this),this)},cq.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},cq.prototype.onCompile=function(){};const uq=2147483647,hq=36,dq=/^xn--/,pq=/[^\0-\x7F]/,fq=/[\x2E\u3002\uFF0E\uFF61]/g,mq={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gq=Math.floor,vq=String.fromCharCode;function yq(e){throw new RangeError(mq[e])}function bq(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]);const i=function(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}((e=e.replace(fq,".")).split("."),t).join(".");return r+i}function _q(e){const t=[];let n=0;const r=e.length;for(;n<r;){const i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}const wq=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},kq=function(e,t,n){let r=0;for(e=n?gq(e/700):e>>1,e+=gq(e/t);e>455;r+=hq)e=gq(e/35);return gq(r+36*e/(e+38))},xq=function(e){const t=[],n=e.length;let r=0,i=128,o=72,a=e.lastIndexOf("-");a<0&&(a=0);for(let l=0;l<a;++l)e.charCodeAt(l)>=128&&yq("not-basic"),t.push(e.charCodeAt(l));for(let l=a>0?a+1:0;l<n;){const a=r;for(let t=1,i=hq;;i+=hq){l>=n&&yq("invalid-input");const a=(s=e.charCodeAt(l++))>=48&&s<58?s-48+26:s>=65&&s<91?s-65:s>=97&&s<123?s-97:hq;a>=hq&&yq("invalid-input"),a>gq((uq-r)/t)&&yq("overflow"),r+=a*t;const c=i<=o?1:i>=o+26?26:i-o;if(a<c)break;const u=hq-c;t>gq(uq/u)&&yq("overflow"),t*=u}const c=t.length+1;o=kq(r-a,c,0==a),gq(r/c)>uq-i&&yq("overflow"),i+=gq(r/c),r%=c,t.splice(r++,0,i)}var s;return String.fromCodePoint(...t)},Cq=function(e){const t=[],n=(e=_q(e)).length;let r=128,i=0,o=72;for(const l of e)l<128&&t.push(vq(l));const a=t.length;let s=a;for(a&&t.push("-");s<n;){let n=uq;for(const t of e)t>=r&&t<n&&(n=t);const l=s+1;n-r>gq((uq-i)/l)&&yq("overflow"),i+=(n-r)*l,r=n;for(const c of e)if(c<r&&++i>uq&&yq("overflow"),c===r){let e=i;for(let n=hq;;n+=hq){const r=n<=o?1:n>=o+26?26:n-o;if(e<r)break;const i=e-r,a=hq-r;t.push(vq(wq(r+i%a,0))),e=gq(i/a)}t.push(vq(wq(e,0))),o=kq(i,l,s===a),i=0,++s}++i,++r}return t.join("")},Sq=function(e){return bq(e,(function(e){return pq.test(e)?"xn--"+Cq(e):e}))},Tq=function(e){return bq(e,(function(e){return dq.test(e)?xq(e.slice(4).toLowerCase()):e}))},Eq={default:{options:{
// Enable HTML tags in source
html:!1,
// Use '/' to close single tags (<br />)
xhtmlOut:!1,
// Convert '\n' in paragraphs into <br>
breaks:!1,
// CSS language prefix for fenced blocks
langPrefix:"language-",
// autoconvert URL-like texts to links
linkify:!1,
// Enable some language-neutral replacements + quotes beautification
typographer:!1,
// Double + single quotes replacement pairs, when typographer enabled,
// and smartquotes on. Could be either a String or an Array.
// For example, you can use '' for Russian, '' for German,
// and ['\xA0', '\xA0', '\xA0', '\xA0'] for French (including nbsp).
quotes:"",
/*  */
// Highlighter function. Should return escaped HTML,
// or '' if the source string is not changed and should be escaped externaly.
// If result starts with <pre... internal wrapper is skipped.
// function (/*str, lang*/) { return ''; }
highlight:null,
// Internal protection, recursion limit
maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{
// Enable HTML tags in source
html:!1,
// Use '/' to close single tags (<br />)
xhtmlOut:!1,
// Convert '\n' in paragraphs into <br>
breaks:!1,
// CSS language prefix for fenced blocks
langPrefix:"language-",
// autoconvert URL-like texts to links
linkify:!1,
// Enable some language-neutral replacements + quotes beautification
typographer:!1,
// Double + single quotes replacement pairs, when typographer enabled,
// and smartquotes on. Could be either a String or an Array.
// For example, you can use '' for Russian, '' for German,
// and ['\xA0', '\xA0', '\xA0', '\xA0'] for French (including nbsp).
quotes:"",
/*  */
// Highlighter function. Should return escaped HTML,
// or '' if the source string is not changed and should be escaped externaly.
// If result starts with <pre... internal wrapper is skipped.
// function (/*str, lang*/) { return ''; }
highlight:null,
// Internal protection, recursion limit
maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},commonmark:{options:{
// Enable HTML tags in source
html:!0,
// Use '/' to close single tags (<br />)
xhtmlOut:!0,
// Convert '\n' in paragraphs into <br>
breaks:!1,
// CSS language prefix for fenced blocks
langPrefix:"language-",
// autoconvert URL-like texts to links
linkify:!1,
// Enable some language-neutral replacements + quotes beautification
typographer:!1,
// Double + single quotes replacement pairs, when typographer enabled,
// and smartquotes on. Could be either a String or an Array.
// For example, you can use '' for Russian, '' for German,
// and ['\xA0', '\xA0', '\xA0', '\xA0'] for French (including nbsp).
quotes:"",
/*  */
// Highlighter function. Should return escaped HTML,
// or '' if the source string is not changed and should be escaped externaly.
// If result starts with <pre... internal wrapper is skipped.
// function (/*str, lang*/) { return ''; }
highlight:null,
// Internal protection, recursion limit
maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},Iq=/^(vbscript|javascript|file|data):/,Aq=/^data:image\/(gif|png|jpeg|webp);/;function Dq(e){const t=e.trim().toLowerCase();return!Iq.test(t)||Aq.test(t)}const Bq=["http:","https:","mailto:"];function Lq(e){const t=az(e,!0);if(t.hostname&&(!t.protocol||Bq.indexOf(t.protocol)>=0))try{t.hostname=Sq(t.hostname)}catch(n){}return Gj(Vj(t))}function Mq(e){const t=az(e,!0);if(t.hostname&&(!t.protocol||Bq.indexOf(t.protocol)>=0))try{t.hostname=Tq(t.hostname)}catch(n){}return Hj(Vj(t),Hj.defaultChars+"%")}function Fq(e,t){if(!(this instanceof Fq))return new Fq(e,t);t||Fz(e)||(t=e||{},e="default"),this.inline=new JR,this.block=new PR,this.core=new CR,this.renderer=new oR,this.linkify=new cq,this.validateLink=Dq,this.normalizeLink=Lq,this.normalizeLinkText=Mq,this.utils=nR,this.helpers=Pz({},rR),this.options={},this.configure(e),t&&this.set(t)}Fq.prototype.set=function(e){return Pz(this.options,e),this},Fq.prototype.configure=function(e){const t=this;if(Fz(e)){const t=e;if(!(e=Eq[t]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach((function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)})),this},Fq.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.enable(e,!0))}),this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},Fq.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){n=n.concat(this[t].ruler.disable(e,!0))}),this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter((function(e){return n.indexOf(e)<0}));if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},Fq.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},Fq.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},Fq.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Fq.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},Fq.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Oq=new RegExp("(https?|ftp)(://(&|[-A-Z0-9+@#/%?=~_|[\\]()!:,.;])*(&|[-A-Z0-9+@#/%=~_|[\\])]))(?=$|\\W)","gi"),Pq=/(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)/gi,Nq={comment:/<!--[\w\W]*?-->/g,tag:{pattern:/<\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|[^\s'">=]+))?\s*)*\/?>/gi,inside:{tag:{pattern:/^<\/?[\w:-]+/i,inside:{punctuation:/^<\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|>|"/g}},punctuation:/\/?>/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&#?[\da-z]{1,8};/gi},jq={
// A tex command e.g. \foo
keyword:/\\(?:[^a-zA-Z]|[a-zA-Z]+)/g,
// Curly and square braces
lparen:/[[({]/g,
// Curly and square braces
rparen:/[\])}]/g,
// A comment. Tex comments start with % and go to
// the end of the line
comment:/%.*/g},zq={makeGrammars(e){const t={main:{},list:{},blockquote:{},table:{},deflist:{}};t.deflist.deflist={pattern:new RegExp(["^ {0,3}\\S.*\\n",
// Description line
"(?:[ \\t]*\\n)?",
// Optional empty line
"(?:","[ \\t]*:[ \\t].*\\n",
// Colon line
"(?:","(?:",".*\\S.*\\n",
// Non-empty line
"|","[ \\t]*\\n(?! ?\\S)",
// Or empty line not followed by unindented line
")",")*","(?:[ \\t]*\\n)*",
// Empty lines
")+"].join(""),"m"),inside:{term:/^.+/,cl:/^[ \t]*:[ \t]/gm}};const n=e.insideFences||{};n["cl cl-pre"]=/```|~~~/,e.fence&&(t.main["pre gfm cn-code"]={pattern:/^(```|~~~)[\s\S]*?\n\1 *$/gm,inside:n},t.list["pre gfm cn-code"]={pattern:/^(?: {4}|\t)(```|~~~)[\s\S]*?\n(?: {4}|\t)\1\s*$/gm,inside:n},t.deflist.deflist.inside["pre gfm cn-code"]=t.list["pre gfm cn-code"]),t.main["h1 alt cn-head"]={pattern:/^.+\n[=]{2,}[ \t]*$/gm,inside:{"cl cl-hash":/=+[ \t]*$/}},t.main["h2 alt cn-head"]={pattern:/^.+\n[-]{2,}[ \t]*$/gm,inside:{"cl cl-hash":/-+[ \t]*$/}},t.main["cn-toc"]={pattern:/^\[(TOC|toc)\]$/gm};for(let c=6;c>=1;c-=1)t.main[`h${c} cn-head`]={pattern:new RegExp(`^#{${c}}[ \t].+$`,"gm"),inside:{"cl cl-hash":new RegExp(`^#{${c}}`)}};const r=/^[ \t]*([*+-]|\d+\.)[ \t]/gm,i={pattern:/^\s*>.*(?:\n[ \t]*\S.*)*/gm,inside:{"cl cl-gt":/^\s*>/gm,"cl cl-li":r}};t.list.blockquote=i,t.blockquote.blockquote=i,t.deflist.deflist.inside.blockquote=i,t.list["cl cl-li"]=r,t.blockquote["cl cl-li"]=r,t.deflist.deflist.inside["cl cl-li"]=r,t.table.table={pattern:new RegExp(["^\\s*\\S.*[|].*\\n",
// Header Row
"[-| :]+\\n",
// Separator
"(?:.*[|].*\\n?)*",
// Table rows
"$"].join(""),"gm"),inside:{"cl cl-title-separator":/^[-| :]+$/gm,"cl cl-pipe":/[|]/gm}},t.main.hr={pattern:/^ {0,3}([*\-_] *){3,}$/gm},e.tasklist&&(t.list.task={pattern:/^\[[ xX]\] /,inside:{cl:/[[\]]/,strong:/[xX]/}});const o={};e.footnote&&(o.fndef={pattern:/^ {0,3}\[\^.*?\]:.*$/gm,inside:{"ref-id":{pattern:/^ {0,3}\[\^.*?\]/,inside:{cl:/(\[\^|\])/}}}}),e.abbr&&(o.abbrdef={pattern:/^ {0,3}\*\[.*?\]:.*$/gm,inside:{"abbr-id":{pattern:/^ {0,3}\*\[.*?\]/,inside:{cl:/(\*\[|\])/}}}}),o.linkdef={pattern:/^ {0,3}\[.*?\]:.*$/gm,inside:{"link-id":{pattern:/^ {0,3}\[.*?\]/,inside:{cl:/[[\]]/}},url:Oq}},Object.entries(o).forEach((([e,n])=>{t.main[e]=n,t.list[e]=n,t.blockquote[e]=n,t.table[e]=n,t.deflist[e]=n})),t.main.pre={pattern:/^\s*\n(?: {4}|\t).*\S.*\n((?: {4}|\t).*\n)*/gm};const a={"code cn-code":{pattern:/(`+)[\s\S]*?\1/g,inside:{"cl cl-code":/`/}}};e.math&&(a["math block"]={pattern:/\\\\\[[\s\S]*?\\\\\]/g,inside:{"cl cl-bracket-start":/^\\\\\[/,"cl cl-bracket-end":/\\\\\]$/,rest:jq}},a["math inline"]={pattern:/\\\\\([\s\S]*?\\\\\)/g,inside:{"cl cl-bracket-start":/^\\\\\(/,"cl cl-bracket-end":/\\\\\)$/,rest:jq}},a["math expr block"]={pattern:/(\$\$)[\s\S]*?\1/g,inside:{"cl cl-bracket-start":/^\$\$/,"cl cl-bracket-end":/\$\$$/,rest:jq}},a["math expr inline"]={pattern:/\$(?!\s)[\s\S]*?\S\$(?!\d)/g,inside:{"cl cl-bracket-start":/^\$/,"cl cl-bracket-end":/\$$/,rest:jq}}),e.footnote&&(a.inlinefn={pattern:/\^\[.+?\]/g,inside:{cl:/(\^\[|\])/}},a.fn={pattern:/\[\^.+?\]/g,inside:{cl:/(\[\^|\])/}}),a.img={pattern:/!\[.*?\]\(.+?\)/g,inside:{"cl cl-title":/['][^']*[']|["][^"]*["](?=\)$)/,"cl cl-src":{pattern:/(\]\()[^('" \t]+(?=[)'" \t])/,lookbehind:!0}}},e.imgsize&&(a.img.inside["cl cl-size"]=/=\d*x\d*/),a.link={pattern:/\[.*?\]\(.+?\)/gm,inside:{"cl cl-underlined-text":{pattern:/(\[)[^\]]*/,lookbehind:!0},"cl cl-title":/['][^']*[']|["][^"]*["](?=\)$)/}},a.imgref={pattern:/!\[.*?\][ \t]*\[.*?\]/g},a.linkref={pattern:/\[.*?\][ \t]*\[.*?\]/g,inside:{"cl cl-underlined-text":{pattern:/^(\[)[^\]]*(?=\][ \t]*\[)/,lookbehind:!0}}},a.comment=Nq.comment,a.tag=Nq.tag,a.url=Oq,a.email=Pq,a["strong cn-strong"]={pattern:/(^|[^.*])(__|\*\*)(?![_*])[\s\S]*?\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{"cl cl-strong cl-start":/^(__|\*\*)/,"cl cl-strong cl-close":/(__|\*\*)$/}},a.em={pattern:/(^|[^.*])(_|\*)(?![_*])[\s\S]*?\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{"cl cl-em cl-start":/^(_|\*)/,"cl cl-em cl-close":/(_|\*)$/}},a["strong em"]={pattern:/(^|[^.*])(__|\*\*)(_|\*)(?![_*])[\s\S]*?\3\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{"cl cl-strong cl-start":/^(__|\*\*)(_|\*)/,"cl cl-strong cl-close":/(_|\*)(__|\*\*)$/}},a["strong em inv"]={pattern:/(^|[^.*])(_|\*)(__|\*\*)(?![_*])[\s\S]*?\3\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{"cl cl-strong cl-start":/^(_|\*)(__|\*\*)/,"cl cl-strong cl-close":/(__|\*\*)(_|\*)$/}},e.del&&(a.del={pattern:/(^|[^.*])(~~)[\s\S]*?\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{cl:/~~/,"cl-del-text":/[^~]+/}}),e.mark&&(a.mark={pattern:/(^|[^.*])(==)[\s\S]*?\2(?=([^.*]|$))/gm,lookbehind:!0,inside:{cl:/==/,"cl-mark-text":/[^=]+/}}),e.sub&&(a.sub={pattern:/(~)(?=\S)(.*?\S)\1/gm,inside:{cl:/~/}}),e.sup&&(a.sup={pattern:/(\^)(?=\S)(.*?\S)\1/gm,inside:{cl:/\^/}}),a.entity=Nq.entity;for(let c=6;c>=1;c-=1)t.main[`h${c} cn-head`].inside.rest=a;t.main["h1 alt cn-head"].inside.rest=a,t.main["h2 alt cn-head"].inside.rest=a,t.table.table.inside.rest=a,t.main.rest=a,t.list.rest=a,t.blockquote.blockquote.inside.rest=a,t.deflist.deflist.inside.rest=a,e.footnote&&(t.main.fndef.inside.rest=a);const s={code:a["code cn-code"],inlinefn:a.inlinefn,fn:a.fn,link:a.link,linkref:a.linkref};a["strong cn-strong"].inside.rest=s,a.em.inside.rest=s,e.del&&(a.del.inside.rest=s),e.mark&&(a.mark.inside.rest=s);const l={code:a["code cn-code"],comment:a.comment,tag:a.tag,
// strong: rest.strong,
strong:a["strong cn-strong"],em:a.em,del:a.del,sub:a.sub,sup:a.sup,entity:Nq.entity};return a.link.inside["cl cl-underlined-text"].inside=l,a.linkref.inside["cl cl-underlined-text"].inside=l,Object.entries(t).forEach((([,e])=>{e.rest=e.rest||{},e.rest.p=/.+/})),t}},Rq="",qq=new zM;Object.entries({js:"javascript",json:"javascript",html:"markup",svg:"markup",xml:"markup",py:"python",rb:"ruby",yml:"yaml",ps1:"powershell",psm1:"powershell"}).forEach((([e,t])=>{dg.languages[e]=dg.languages[t]}));const $q={};Object.entries(dg.languages).forEach((([e,t])=>{"Object"===dg.util.type(t)&&($q[`language-${e}`]={pattern:new RegExp(`(\`\`\`|~~~)${e}\\W[\\s\\S]*`),inside:{"cl cl-pre":/(```|~~~).*/,rest:t}})}));const Uq=Object.create(null);function Hq(e){return e.reduce(((e,t)=>({...e,[t]:!0})),{})}["code","pre","pre gfm cn-code","math block","math inline","math expr block","math expr inline","latex block"].forEach((e=>{Uq[e]=!0})),dg.hooks.add("wrap",(e=>{Uq[e.type]&&(e.attributes.spellcheck="false")}));const Wq=Hq(["paragraph_open","blockquote_open","heading_open","code","fence","table_open","html_block","bullet_list_open","ordered_list_open","hr","dl_open"]),Gq=Hq(["bullet_list_open","ordered_list_open"]),Vq=Hq(["blockquote_open"]),Yq=Hq(["table_open"]),Kq=Hq(["dl_open"]);function Xq(e,t,n){const r=[];return e.forEach((e=>{let i=t[e];void 0===i&&(i=n.length,n.push(e),t[e]=i),r.push(i)})),String.fromCharCode.apply(null,r)}const Zq={defaultOptions:null,defaultConverter:null,defaultPrismGrammars:null,init(){const e={extensions:UL.computedPresets.default};this.defaultOptions={...Lo.getOptions(e),insideFences:$q},this.defaultConverter=this.createConverter(this.defaultOptions),this.defaultPrismGrammars=zq.makeGrammars(this.defaultOptions)},
/**
   * Creates a converter and init it with extensions.
   * @returns {Object} A converter.
   */
createConverter(e){const t=new Fq("zero");return t.core.ruler.enable([],!0),t.block.ruler.enable([],!0),t.inline.ruler.enable([],!0),Lo.initConverter(t,e),Object.keys(Wq).forEach((e=>{const n=t.renderer.rules[e]||t.renderer.renderToken;t.renderer.rules[e]=(e,r,i,o,a)=>e[r].sectionDelimiter?Rq+n.call(t.renderer,e,r,i,o,a):n.call(t.renderer,e,r,i,o,a)})),t},
/**
   * Parse markdown sections by passing the 2 first block rules of the markdown-it converter.
   * @param {Object} converter The markdown-it converter.
   * @param {String} text The text to be parsed.
   * @returns {Object} A parsing context to be passed to `convert`.
   */
parseSections(e,t){const n=new e.core.State(t,e,{}),r=e.core.ruler.getRules("");r[0](n),r[1](n);const i=t.split("\n");i[i.length-1]||i.pop();const o={text:t,sections:[],converter:e,markdownState:n,markdownCoreRules:r};let a="main",s=0;function l(e){const t={text:"",data:a};for(;s<e;s+=1)t.text+=`${i[s]}\n`;t&&o.sections.push(t)}return n.tokens.forEach(((e,t)=>{0===e.level&&!0===Wq[e.type]&&(t>0&&(e.sectionDelimiter=!0,l(e.map[0])),a=!0===Gq[e.type]?"list":!0===Vq[e.type]?"blockquote":!0===Yq[e.type]?"table":!0===Kq[e.type]?"deflist":"main")})),l(i.length),o},
/**
   * Convert markdown sections previously parsed with `parseSections`.
   * @param {Object} parsingCtx The parsing context returned by `parseSections`.
   * @param {Object} previousConversionCtx The conversion context returned by a previous call
   * to `convert`, in order to calculate the `htmlSectionDiff` of the returned conversion context.
   * @returns {Object} A conversion context.
   */
convert(e,t){e.markdownState.isConverted||(e.markdownCoreRules.slice(2).forEach((t=>t(e.markdownState))),e.markdownState.isConverted=!0);const{tokens:n}=e.markdownState,r=e.converter.renderer.render(n,e.converter.options,e.markdownState.env).split(Rq);""===r[0]&&r.shift();const i=Object.create(null),o=[],a=Xq(r,i,o);let s;if(t){const e=Xq(t.htmlSectionList,i,o);s=qq.diff_main(e,a,!1)}else s=[[1,a]];return{text:e.text,sectionList:e.sectionList,htmlSectionList:r,htmlSectionDiff:s}},
/**
   * Helper to highlight arbitrary markdown
   * @param {Object} markdown The markdown content to highlight.
   * @param {Object} converter An optional converter.
   * @param {Object} grammars Optional grammars.
   * @returns {Object} The highlighted markdown in HTML format.
   */
highlight(e,t=this.defaultConverter,n=this.defaultPrismGrammars){return this.parseSections(t,e).sections.map((e=>dg.highlight(e.text,n[e.data]))).join("")}};class Jq{constructor(e,t){this.startOffset=e,this.endOffset=t,this.height=t-e}}const Qq=e=>t=>{const n=t.previewCtx.sectionDescList.map((t=>t[e]));let r,i,o;for(i=0;i<n.length;i+=1)if(r=n[i],r.height){for(o=i+1;o<n.length&&0===n[o].height;o+=1);const e=o-i;if(1!==e){const t=r.height/e;for(r.height=t,r.endOffset=r.startOffset+r.height,o=i+1;o<i+e;o+=1){const e=r.endOffset;r=n[o],r.startOffset=e,r.height=t,r.endOffset=r.startOffset+r.height}i=o-1}}},e$=Qq("editorDimension"),t$=Qq("previewDimension"),n$=Qq("tocDimension"),r$={measureSectionDimensions(e){let t,n=0,r=0,i=0,o=e.previewCtx.sectionDescList[0],a=1;for(;a<e.previewCtx.sectionDescList.length;a+=1){t=e.previewCtx.sectionDescList[a];let s=t.editorElt?t.editorElt.offsetTop:n;s=s>n?s:n,o.editorDimension=new Jq(n,s),n=s;let l=t.previewElt?t.previewElt.offsetTop:r;l=l>r?l:r,o.previewDimension=new Jq(r,l),r=l;let c=t.tocElt?t.tocElt.offsetTop+t.tocElt.offsetHeight/2:i;c=c>i?c:i,o.tocDimension=new Jq(i,c),i=c,o=t}o=e.previewCtx.sectionDescList[a-1],o&&(o.editorDimension=new Jq(n,e.editorElt.scrollHeight),o.previewDimension=new Jq(r,e.previewElt.scrollHeight),o.tocDimension=new Jq(i,e.tocElt.scrollHeight)),e$(e),t$(e),n$(e)}};let i$=null;const o$=[],a$=SF.Utils.debounce((()=>{for(;o$.length;)o$.shift()();i$&&iU.clEditor.selectionMgr.setSelectionStartEnd(i$.start,i$.end),i$=null})),s$=e=>{o$.push(e),a$()},l$=()=>{i$={start:iU.clEditor.selectionMgr.selectionStart,end:iU.clEditor.selectionMgr.selectionEnd},a$()};class c${constructor(e,t,n){this.classGetter="function"==typeof e?e:()=>e,this.offsetGetter="function"==typeof t?t:()=>t,this.properties=n||{},this.eltCollection=iU.editorElt.getElementsByClassName(this.classGetter()[0]),this.lastEltCount=this.eltCollection.length,this.restoreClass=()=>{this.eltCollection.length&&this.eltCollection.length===this.lastEltCount||(this.removeClass(),this.applyClass())},iU.clEditor.on("contentChanged",this.restoreClass),s$((()=>this.restoreClass()))}applyClass(){if(!this.stopped){const e=this.offsetGetter();if(e&&e.start!==e.end){const t=iU.clEditor.selectionMgr.createRange(Math.min(e.start,e.end),Math.max(e.start,e.end)),n={...this.properties,className:this.classGetter().join(" ")};iU.clEditor.watcher.noWatch((()=>{UL.wrapRange(t,n)})),iU.clEditor.selectionMgr.hasFocus()&&l$(),this.lastEltCount=this.eltCollection.length}}}removeClass(){iU.clEditor.watcher.noWatch((()=>{UL.unwrapRange(this.eltCollection)})),iU.clEditor.selectionMgr.hasFocus()&&l$()}stop(){iU.clEditor.off("contentChanged",this.restoreClass),s$((()=>this.removeClass())),this.stopped=!0}}const u$=[],h$=SF.Utils.debounce((()=>{for(;u$.length;)u$.shift()()})),d$=e=>{u$.push(e),h$()};class p${constructor(e,t,n){this.classGetter="function"==typeof e?e:()=>e,this.offsetGetter="function"==typeof t?t:()=>t,this.properties=n||{},this.eltCollection=iU.previewElt.getElementsByClassName(this.classGetter()[0]),this.lastEltCount=this.eltCollection.length,this.restoreClass=()=>{iU.previewCtxWithDiffs?this.eltCollection.length&&this.eltCollection.length===this.lastEltCount||(this.removeClass(),this.applyClass()):this.removeClass()},iU.on("previewCtxWithDiffs",this.restoreClass),d$((()=>this.restoreClass()))}applyClass(){if(!this.stopped){const e=this.offsetGetter();if(e){const t=iU.getPreviewOffset(e.start,iU.previewCtx.sectionDescList),n=iU.getPreviewOffset(e.end,iU.previewCtx.sectionDescList);if(null!=t&&null!=n&&t!==n){const e=SF.Utils.findContainer(iU.previewElt,Math.min(t,n)),r=SF.Utils.findContainer(iU.previewElt,Math.max(t,n)),i=document.createRange();i.setStart(e.container,e.offsetInContainer),i.setEnd(r.container,r.offsetInContainer);const o={...this.properties,className:this.classGetter().join(" ")};UL.wrapRange(i,o),this.lastEltCount=this.eltCollection.length}}}}removeClass(){UL.unwrapRange(this.eltCollection)}stop(){iU.$off("previewCtxWithDiffs",this.restoreClass),d$((()=>this.removeClass())),this.stopped=!0}}let f$,m$,g$,v$,y$,b$,_$,w$={},k$={},x$={};function C$(e,t){const n={...e.discussions},r=_H.getters["discussion/newDiscussion"];r&&(n[_H.state.discussion.newDiscussionId]={...r}),Object.entries(w$).forEach((([e,t])=>{n[t.discussionId]||(f$.removeMarker(t),delete w$[e])})),Object.entries(n).forEach((([e,n])=>{!function(e,t,n){const r=r=>{const i=`${t}:${r}`;let o=w$[i];o||(o=new SF.Marker(e[r],"end"===r),o.discussionId=t,o.offsetName=r,f$.addMarker(o),w$[i]=o),n(o)};r("start"),r("end")}(n,e,t?e=>{n[e.offsetName]=e.offset}:e=>{e.offset=n[e.offsetName]})})),t&&r&&_H.commit("discussion/patchNewDiscussion",n[_H.state.discussion.newDiscussionId])}function S$(){Object.entries(w$).forEach((([,e])=>{f$.removeMarker(e)})),w$={},m$=[],g$=Object.create(null)}const T$=new zM;function E$(){const e=T$.diff_main(v$,y$);return T$.patch_make(v$,e)}function I$(e){const t=T$.patch_apply(e,y$)[0];let n=t;return m$.length&&(n=n.replace(new RegExp(`[-${String.fromCharCode(57344+m$.length-1)}]`,"g"),"")),n!==f$.getContent()&&(v$=y$,y$=t,b$=!0),n}function A$(e){const t=T$.patch_deepCopy(e).reverse();return t.forEach((e=>{e.diffs.forEach((e=>{e[0]=-e[0]}))})),t}const D$={createClEditor(e){this.clEditor=SF(e,e.parentNode,!0),({clEditor:f$}=this),f$.on("contentChanged",(e=>{const t=_H.getters["content/current"],n={...UL.deepCopy(t),text:UL.sanitizeText(e)};C$(n,!0),b$?(n.text=y$,WN.restoreDiscussionOffsets(n,m$),C$(n,!1)):(v$=y$,y$=WN.makePatchableText(n,m$,g$)),_H.dispatch("content/patchCurrent",n),b$=!1})),f$.on("focus",(()=>_H.commit("discussion/setNewCommentFocus",!1)))},initClEditorInternal(e){const t=_H.getters["content/current"];if(t){S$();const n=_H.getters["contentState/current"],r=Object.assign({selectionStart:n.selectionStart,selectionEnd:n.selectionEnd,patchHandler:{makePatches:E$,applyPatches:I$,reversePatches:A$}},e);_$!==t.id&&(_$=t.id,y$=WN.makePatchableText(t,m$,g$),v$=y$,C$(t,!1),r.content=t.text),f$.init(r)}},applyContent(){if(f$){const e=_H.getters["content/current"];f$.setContent(e.text,!0).range?S$():C$(e,!1)}},getTrimmedSelection(){const{selectionMgr:e}=f$;let t=Math.min(e.selectionStart,e.selectionEnd),n=Math.max(e.selectionStart,e.selectionEnd);const r=f$.getContent();for(;(r[t]||"").match(/\s/);)t+=1;for(;(r[n-1]||"").match(/\s/);)n-=1;return t<n&&{start:t,end:n}},initHighlighters(){_H.watch((()=>_H.getters["discussion/newDiscussion"]),(()=>C$(_H.getters["content/current"],!1))),_H.watch((()=>_H.getters["discussion/currentFileDiscussions"]),(e=>{const t=(e,t)=>()=>{const n=[`discussion-${e}-highlighting--${t}`,`discussion-${e}-highlighting`];return _H.state.discussion.currentDiscussionId===t&&n.push(`discussion-${e}-highlighting--selected`),n},n=e=>()=>{const t=w$[`${e}:start`],n=w$[`${e}:end`];return t&&n&&{start:t.offset,end:n.offset}},r=k$;k$={},Object.keys(e).forEach((e=>{const i=r[e]||new c$(t("editor",e),n(e),{discussionId:e});k$[e]=i})),Object.entries(r).forEach((([e,t])=>{k$[e]||t.stop()}));const i=x$;x$={},Object.keys(e).forEach((e=>{const r=i[e]||new p$(t("preview",e),n(e),{discussionId:e});x$[e]=r})),Object.entries(i).forEach((([e,t])=>{x$[e]||t.stop()}))}))}};var B$,L$;var M$=function(){if(L$)return B$;L$=1;var e=.1,t="function"==typeof Float32Array;function n(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function i(e){return 3*e}function o(e,t,o){return((n(t,o)*e+r(t,o))*e+i(t))*e}function a(e,t,o){return 3*n(t,o)*e*e+2*r(t,o)*e+i(t)}function s(e,n,r,i){if(4===arguments.length)return new s([e,n,r,i]);if(!(this instanceof s))return new s(e);if(!e||4!==e.length)throw new Error("BezierEasing: points must contains 4 values");for(var o=0;o<4;++o)if("number"!=typeof e[o]||isNaN(e[o])||!isFinite(e[o]))throw new Error("BezierEasing: points should be integers.");if(e[0]<0||e[0]>1||e[2]<0||e[2]>1)throw new Error("BezierEasing x values must be in [0, 1] range.");this._str="BezierEasing("+e+")",this._css="cubic-bezier("+e+")",this._p=e,this._mSampleValues=t?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return s.prototype={get:function(e){var t=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&r===i?e:0===e?0:1===e?1:o(this._getTForX(e),n,i)},getPoints:function(){return this._p},toString:function(){return this._str},toCSS:function(){return this._css},
// Private part
_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],n=this._p[2],r=0;r<11;++r)this._mSampleValues[r]=o(r*e,t,n)},
/**
     * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.
     */
_getTForX:function(t){for(var n=this._p[0],r=this._p[2],i=this._mSampleValues,s=0,l=1;10!==l&&i[l]<=t;++l)s+=e;var c=s+(t-i[--l])/(i[l+1]-i[l])*e,u=a(c,n,r);return u>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var s=a(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(t,c,n,r):0===u?c:function(e,t,n,r,i){var a,s,l=0;do{(a=o(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(t,s,s+e,n,r)}},s.css={ease:s.ease=s(.25,.1,.25,1),linear:s.linear=s(0,0,1,1),"ease-in":s.easeIn=s(.42,0,1,1),"ease-out":s.easeOut=s(0,0,.58,1),"ease-in-out":s.easeInOut=s(.42,0,.58,1)},B$=s}();const F$=bo(M$),O$={materialIn:F$(.75,0,.8,.25),materialOut:F$(.25,.8,.25,1),inOut:F$(.25,.1,.67,1)},P$=["moz","webkit"];for(let o7=0;o7<P$.length&&!window.requestAnimationFrame;o7+=1)window.requestAnimationFrame=window[`${P$[o7]}RequestAnimationFrame`],window.cancelAnimationFrame=window[`${P$[o7]}CancelAnimationFrame`]||window[`${P$[o7]}CancelRequestAnimationFrame`];const N$={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",msTransition:"MSTransitionEnd",OTransition:"oTransitionEnd",transition:"transitionend"};function j$(e){const t=document.createElement("div");return e.reduce(((e,n)=>{if(void 0!==t.style[n])return n}),void 0)}const z$=j$(["WebkitTransform","MozTransform","msTransform","OTransform","transform"]),R$=j$(Object.keys(N$)),q$=N$[R$];function $$(e){return e}function U$(e){this.name=e,this.setStart=t=>{const n=t.elt[e];return t.$start[e]=n,void 0!==n&&void 0!==t.$end[e]},this.applyCurrent=t=>{t.elt[e]=t.$current[e]}}function H$(e,t,n,r=$$){this.name=e,this.setStart=t=>{let r=parseFloat(t.elt.style[e]);return Number.isNaN(r)&&(r=t.$current[e]||n),t.$start[e]=r,void 0!==t.$end[e]},this.applyCurrent=n=>{n.elt.style[e]=r(n.$current[e])+t}}function W$(e,t,n,r=$$){this.name=e,this.setStart=t=>{let r=t.$current[e];return void 0===r&&(r=n),t.$start[e]=r,void 0===t.$end[e]&&(t.$end[e]=r),void 0!==r},this.applyCurrent=i=>{const o=i.$current[e];return o!==n&&`${e}(${r(o)}${t})`}}const G$=[new U$("scrollTop"),new U$("scrollLeft"),new H$("opacity","",1),new H$("zIndex","",0),new W$("translateX","px",0,Math.round),new W$("translateY","px",0,Math.round),new W$("scale","",1),new W$("rotate","deg",0)].concat(["width","height","top","right","bottom","left"].map((e=>new H$(e,"px",0,Math.round))));class V${constructor(e){this.elt=e,this.$current={},this.$pending={}}start(e,t,n){let r=e,i=t,o=!1;return"boolean"==typeof e&&(o=e,r=t,i=n),this.stop(),this.$start={},this.$end=this.$pending,this.$pending={},this.$attributes=G$.filter((e=>e.setStart(this))),this.$end.duration=this.$end.duration||0,this.$end.delay=this.$end.delay||0,this.$end.easing=O$[this.$end.easing]||O$.materialOut,this.$end.endCb="function"==typeof r&&r,this.$end.stepCb="function"==typeof i&&i,this.$startTime=Date.now()+this.$end.delay,this.$end.duration?o?this.loop(!0):this.$requestId=window.requestAnimationFrame((()=>this.loop(!1))):this.loop(!1),this.elt}stop(){window.cancelAnimationFrame(this.$requestId)}loop(e){const t=e=>{if(e.target===this.elt){this.elt.removeEventListener(q$,t);const{endCb:e}=this.$end;this.$end.endCb=void 0,e&&e()}};let n=(Date.now()-this.$startTime)/this.$end.duration,r="";if(e){n=1;const e=["all",`${this.$end.duration}ms`,this.$end.easing.toCSS()];this.$end.delay&&e.push(`${this.$end.duration}ms`),r=e.join(" "),this.$end.endCb&&this.elt.addEventListener(q$,t)}else if(n<1){if(this.$requestId=window.requestAnimationFrame((()=>this.loop(!1))),n<0)return}else this.$end.endCb&&(this.$requestId=window.requestAnimationFrame(this.$end.endCb));const i=this.$end.easing.get(n),o=this.$attributes.reduce(((e,t)=>{if(n<1){const e=this.$end[t.name]-this.$start[t.name];this.$current[t.name]=this.$start[t.name]+e*i}else this.$current[t.name]=this.$end[t.name];const r=t.applyCurrent(this);return r&&e.push(r),e}),[]);o.length&&o.push("translateZ(0)");const a=o.join(" ");this.elt.style[z$]=a,this.elt.style[R$]=r,this.$end.stepCb&&this.$end.stepCb()}}G$.map((e=>e.name)).concat("duration","easing","delay").forEach((e=>{V$.prototype[e]=function(t){return this.$pending[e]=t,this}}));const Y$={animate:function(e){return e.$animation||(e.$animation=new V$(e)),e.$animation}},K$=new zM,X$={
/**
   * Get an object describing the position of the scroll bar in the file.
   */
getScrollPosition(e=(_H.getters["layout/styles"].showEditor?this.editorElt:this.previewElt)){const t=e===this.editorElt?"editorDimension":"previewDimension",{scrollTop:n}=e.parentNode;let r;return this.previewCtxMeasured&&this.previewCtxMeasured.sectionDescList.some(((e,i)=>{if(n>=e[t].endOffset)return!1;const o=(n-e[t].startOffset)/(e[t].height||1);return r={sectionIdx:i,posInSection:o},!0})),r},
/**
   * Restore the scroll position from the current file content state.
   */
restoreScrollPosition(){const{scrollPosition:e}=_H.getters["contentState/current"];if(e&&this.previewCtxMeasured){const t=this.previewCtxMeasured.sectionDescList[e.sectionIdx];if(t){const n=t.editorDimension.startOffset+t.editorDimension.height*e.posInSection;this.editorElt.parentNode.scrollTop=Math.floor(n);const r=t.previewDimension.startOffset+t.previewDimension.height*e.posInSection;this.previewElt.parentNode.scrollTop=Math.floor(r)}}},
/**
   * Get the offset in the preview corresponding to the offset of the markdown in the editor
   */
getPreviewOffset(e,t=(this.previewCtxWithDiffs||{}).sectionDescList){if(!t)return null;let n=e,r=0;return t.some((e=>e.textToPreviewDiffs?e.section.text.length>=n?(r+=K$.diff_xIndex(e.textToPreviewDiffs,n),!0):(n-=e.section.text.length,r+=e.previewText.length,!1):(r=null,!0))),r},
/**
   * Get the offset of the markdown in the editor corresponding to the offset in the preview
   */
getEditorOffset(e,t=(this.previewCtxWithDiffs||{}).sectionDescList){if(!t)return null;let n=e,r=0;return t.some((e=>{if(!e.textToPreviewDiffs)return r=null,!0;if(e.previewText.length>=n){const t=e.textToPreviewDiffs.map((e=>[-e[0],e[1]]));return r+=K$.diff_xIndex(t,n),!0}return n-=e.previewText.length,r+=e.section.text.length,!1})),r},
/**
   * Get the coordinates of an offset in the preview
   */
getPreviewOffsetCoordinates(e){const t=SF.Utils.findContainer(this.previewElt,e&&e-1),n=SF.Utils.findContainer(this.previewElt,e||e+1),r=document.createRange();r.setStart(t.container,t.offsetInContainer),r.setEnd(n.container,n.offsetInContainer);const i=r.getBoundingClientRect(),o=this.previewElt.getBoundingClientRect();return{top:Math.round(i.top-o.top+this.previewElt.scrollTop),height:Math.round(i.height),left:Math.round(i.right-o.left+this.previewElt.scrollLeft)}},
/**
   * Scroll the preview (or the editor if preview is hidden) to the specified anchor
   */
scrollToAnchor(e){let t=0;const n=this.previewElt.parentNode,r=document.getElementById(e);r&&(t=r.offsetTop);const i=n.scrollHeight-n.offsetHeight;t<0?t=0:t>i&&(t=i),Y$.animate(n).scrollTop(t).duration(360).start()}},Z$=(e,t)=>{let n;return(r=!1,...i)=>{clearTimeout(n),r?n=setTimeout((()=>e(...i)),t):e(...i)}},J$=new zM;let Q$,eU=!0;class tU{constructor(e,t,n,r){this.section=e,this.editorElt=e.elt,this.previewElt=t,this.tocElt=n,this.html=r}}const nU=Object.create(null),rU=async e=>{if(0!==e.indexOf("http://")&&0!==e.indexOf("https://")){const t=_H.getters["explorer/selectedNodeFolder"],n=UL.getAbsoluteFilePath(t,e);if(nU[n])return nU[n];const r=CN.MD5(n).toString();let i=await NN.getImgItem(r);if(i||(await BU.syncImg(n),i=await NN.getImgItem(r)),i){const t=UL.base64ToBlob(i.content,e),r=URL.createObjectURL(t);return nU[n]=r,r}return""}return e},iU=Object.assign({all:oU=oU||new Map,on:function(e,t){var n=oU.get(e);n?n.push(t):oU.set(e,[t])},off:function(e,t){var n=oU.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):oU.set(e,[]))},emit:function(e,t){var n=oU.get(e);n&&n.slice().map((function(e){e(t)})),(n=oU.get("*"))&&n.slice().map((function(n){n(e,t)}))}},D$,X$,{
// Elements
editorElt:null,previewElt:null,tocElt:null,
// Other objects
clEditor:null,pagedownEditor:null,options:null,prismGrammars:null,converter:null,parsingCtx:null,conversionCtx:null,previewCtx:{sectionDescList:[]},previewCtxMeasured:null,previewCtxWithDiffs:null,sectionList:null,selectionRange:null,previewSelectionRange:null,previewSelectionStartOffset:null,
/**
   * Initialize the Prism grammar with the options
   */
initPrism(){const e={...this.options,insideFences:Zq.defaultOptions.insideFences};this.prismGrammars=zq.makeGrammars(e)},
/**
   * Initialize the markdown-it converter with the options
   */
initConverter(){this.converter=Zq.createConverter(this.options,!0)},
/**
   * Initialize the cledit editor with markdown-it section parser and Prism highlighter
   */
initClEditor(){this.previewCtxMeasured=null,iU.emit("previewCtxMeasured",null),this.previewCtxWithDiffs=null,iU.emit("previewCtxWithDiffs",null);const e={sectionHighlighter:e=>dg.highlight(e.text,this.prismGrammars[e.data]),sectionParser:e=>(this.parsingCtx=Zq.parseSections(this.converter,e),this.parsingCtx.sections),getCursorFocusRatio:()=>_H.getters["data/layoutSettings"].focusMode?1:.15};this.initClEditorInternal(e),this.restoreScrollPosition()},
/**
   * Finish the conversion initiated by the section parser
   */
convert(){this.conversionCtx=Zq.convert(this.parsingCtx,this.conversionCtx),this.emit("conversionCtx",this.conversionCtx),({tokens:Q$}=this.parsingCtx.markdownState)},
/**
   * Refresh the preview with the result of `convert()`
   */
async refreshPreview(){const e=[];let t,n,r=0,i=0,o=this.previewElt.firstChild,a=this.tocElt.firstChild,s="",l=[];for(const u of this.conversionCtx.htmlSectionDiff)for(let c=0;c<u[1].length;c+=1){const c=this.conversionCtx.sectionList[r];if(0===u[0]){let t=this.previewCtx.sectionDescList[i];i+=1,t.editorElt!==c.elt&&(t=new tU(c,t.previewElt,t.tocElt,t.html)),e.push(t),s+=t.html,r+=1,o=o.nextSibling,a=a.nextSibling}else if(-1===u[0])i+=1,t=o,o=o.nextSibling,this.previewElt.removeChild(t),n=a,a=a.nextSibling,this.tocElt.removeChild(n);else if(1===u[0]){const i=CF.sanitizeHtml(this.conversionCtx.htmlSectionList[r]);r+=1,t=document.createElement("div"),t.className="cl-preview-section",t.innerHTML=i,o?this.previewElt.insertBefore(t,o):this.previewElt.appendChild(t),await Lo.sectionPreview(t,this.options,!0);const u=Array.prototype.slice.call(t.getElementsByTagName("img")).map((e=>{if(e.src.indexOf(ML.origin)>=0){const t=decodeURIComponent(e.attributes.src.nodeValue);return e.removeAttribute("src"),{imgElt:e,uri:t}}return{imgElt:e}}));l=[...l,...u],Array.prototype.slice.call(t.getElementsByTagName("a")).forEach((e=>{const t=e.attributes&&e.attributes.href&&e.attributes.href.nodeValue;!t||t.indexOf("http://")>=0||t.indexOf("https://")>=0||t.indexOf("#")>=0||(e.href="javascript:void(0);",e.setAttribute("onclick",`window.viewFileByPath('${UL.decodeUrlPath(t)}')`))})),n=document.createElement("div"),n.className="cl-toc-section";const h=t.querySelector("h1, h2, h3, h4, h5, h6");if(h){const e=h.cloneNode(!0);e.removeAttribute("id"),n.appendChild(e);const t=document.createElement("span");for(t.className="content";h.firstChild;)t.appendChild(h.firstChild);const r=document.createElement("span");r.className="prefix",h.insertBefore(r,h.firstChild),h.appendChild(t);const i=document.createElement("span");i.className="suffix",h.appendChild(i)}a?this.tocElt.insertBefore(n,a):this.tocElt.appendChild(n),s+=i,e.push(new tU(c,t,n,i))}}this.tocElt.classList[this.tocElt.querySelector(".cl-toc-section *")?"remove":"add"]("toc-tab--empty"),this.previewCtx={markdown:this.conversionCtx.text,html:s.replace(/^\s+|\s+$/g,""),text:this.previewElt.textContent,sectionDescList:e},this.emit("previewCtx",this.previewCtx),this.makeTextToPreviewDiffs();const c=l.map((e=>new Promise(((t,n)=>{if(!e.imgElt.src&&e.uri)return void rU(e.uri).then((n=>{e.imgElt.src=n,t()}),(()=>n(new Error(""))));if(!e.imgElt.src)return void t();const r=new window.Image;r.onload=t,r.onerror=t,r.src=e.imgElt.src}))));await Promise.all(c),this.measureSectionDimensions(!!this.previewCtxMeasured)},
/**
   * Measure the height of each section in editor, preview and toc.
   */
measureSectionDimensions:Z$(((e=!1,t=!1)=>{(t||iU.previewCtx!==iU.previewCtxMeasured)&&(r$.measureSectionDimensions(iU),iU.previewCtxMeasured=iU.previewCtx,e&&iU.restoreScrollPosition(),iU.emit("previewCtxMeasured",iU.previewCtxMeasured))}),500),
/**
   * Compute the diffs between editor's markdown and preview's html
   * asynchronously unless there is only one section to compute.
   */
makeTextToPreviewDiffs(){if(iU.previewCtx!==iU.previewCtxWithDiffs){const e=()=>{let t=!1;iU.previewCtx.sectionDescList.some((e=>{if(!e.textToPreviewDiffs){if(t)return!0;e.previewText||(e.previewText=e.previewElt.textContent),e.textToPreviewDiffs=J$.diff_main(e.section.text,e.previewText),t=!0}return!1}))?setTimeout((()=>e()),10):(iU.previewCtxWithDiffs=iU.previewCtx,iU.emit("previewCtxWithDiffs",iU.previewCtxWithDiffs))};e()}},
/**
   * Save editor selection/scroll state into the store.
   */
saveContentState:Z$((()=>{const e=iU.getScrollPosition()||_H.getters["contentState/current"].scrollPosition;_H.dispatch("contentState/patchCurrent",{selectionStart:iU.clEditor.selectionMgr.selectionStart,selectionEnd:iU.clEditor.selectionMgr.selectionEnd,scrollPosition:e})}),100),
/**
   * Report selection from the preview to the editor.
   */
saveSelection:Z$((()=>{const e=window.getSelection();let t=e.rangeCount&&e.getRangeAt(0);if(t&&(
/* eslint-disable no-bitwise */
iU.previewElt.compareDocumentPosition(t.startContainer)&window.Node.DOCUMENT_POSITION_CONTAINED_BY&&iU.previewElt.compareDocumentPosition(t.endContainer)&window.Node.DOCUMENT_POSITION_CONTAINED_BY||(t=null)),iU.previewSelectionRange!==t){let e,n;if(t){const r=document.createRange();r.setStart(iU.previewElt,0),r.setEnd(t.startContainer,t.startOffset),e=`${r}`.length,n=e+`${t}`.length;const i=iU.getEditorOffset(e),o=iU.getEditorOffset(n);null!=i&&null!=o&&iU.clEditor.selectionMgr.setSelectionStartEnd(i,o)}iU.previewSelectionRange=t,iU.emit("previewSelectionRange",iU.previewSelectionRange)}}),50),
/**
   * Returns the pandoc AST generated from the file tokens and the converter options
   */
getPandocAst(){return Q$&&Lj(Q$,this.converter.options)},
/**
   * Pass the elements to the store and initialize the editor.
   */
init(e,t,n){this.editorElt=e,this.previewElt=t,this.tocElt=n,this.createClEditor(e),this.clEditor.on("contentChanged",((e,t,n)=>{this.parsingCtx={...this.parsingCtx,sectionList:n}})),this.clEditor.undoMgr.on("undoStateChange",(()=>{const e=this.clEditor.undoMgr.canUndo();e!==_H.state.layout.canUndo&&_H.commit("layout/setCanUndo",e);const t=this.clEditor.undoMgr.canRedo();t!==_H.state.layout.canRedo&&_H.commit("layout/setCanRedo",t)})),this.pagedownEditor=new Nj({input:Object.create(this.clEditor)}),this.pagedownEditor.run(),this.pagedownEditor.hooks.set("insertLinkDialog",(e=>(_H.dispatch("modal/open",{type:"link",callback:e}),!0))),this.pagedownEditor.hooks.set("insertImageDialog",(e=>(_H.dispatch("modal/open",{type:"image",callback:e}),!0))),this.pagedownEditor.hooks.set("insertChatGptDialog",(e=>(_H.dispatch("modal/open",{type:"chatGpt",callback:e}),!0))),this.pagedownEditor.hooks.set("insertImageUploading",(e=>(e(_H.getters["img/currImgId"]),!0))),this.editorElt.parentNode.addEventListener("scroll",(()=>this.saveContentState(!0))),this.previewElt.parentNode.addEventListener("scroll",(()=>this.saveContentState(!0)));const r=Z$((()=>{this.convert(),eU?(this.refreshPreview(),this.measureSectionDimensions(!1,!0)):setTimeout((()=>this.refreshPreview()),10),eU=!1}),25);let i,o;const a=Z$((()=>{this.sectionList!==i&&(this.sectionList=i,this.emit("sectionList",this.sectionList),r(!eU)),this.selectionRange!==o&&(this.selectionRange=o,this.emit("selectionRange",this.selectionRange)),this.saveContentState()}),10);this.clEditor.selectionMgr.on("selectionChanged",((e,t,n)=>{o=n,a(!eU)}));const s=Object.create(null),l=e=>`${e.src}:${e.width||-1}:${e.height||-1}`,c=e=>{const t=l(e),n=s[t];if(!n)return null;let r;return n.some((e=>!this.editorElt.contains(e)&&(r=e,!0)))&&r},u=SF.Utils.debounce((()=>{Object.entries(s).forEach((([e,t])=>{const n=t.filter((e=>this.editorElt.contains(e)));n.length?s[e]=n:delete s[e]}))}),100);let h=[];_H.getters["data/computedSettings"].editor.inlineImages&&this.clEditor.highlighter.on("sectionHighlighted",(e=>{const t=[];if(e.elt.getElementsByClassName("token img").cl_each((e=>{const n=e.querySelector(".token.cl-src");if(n){const r=document.createElement("img");r.style.display="none";const i=n.textContent;if(!/^unsafe/.test(CF.sanitizeUri(i,!0))){r.onload=()=>{r.style.display=""},r.src=i;const n=e.querySelector(".token.cl-size");if(n){const e=n.textContent.match(/=(\d*)x(\d*)/);e[1]&&(r.width=parseInt(e[1],10)),e[2]&&(r.height=parseInt(e[2],10))}h.push(r),r.src.indexOf(origin)>=0&&(r.removeAttribute("src"),t.push({imgElt:r,uri:decodeURIComponent(i)}))}const o=document.createElement("span");o.className="token img-wrapper",e.parentNode.insertBefore(o,e),o.appendChild(r),o.appendChild(e)}})),t.length){const e=t.map((e=>new Promise(((t,n)=>{rU(e.uri).then((n=>{e.imgElt.src=n,t()}),(()=>n(new Error(`,uri:${e.uri}`))))}))));Promise.all(e).then()}})),this.clEditor.highlighter.on("highlighted",(()=>{h.forEach((e=>{const t=c(e);t?e.parentNode.replaceChild(t,e):(e=>{const t=l(e);let n=s[t];n||(n=[],s[t]=n),n.push(e)})(e)})),h=[],u()})),this.clEditor.on("contentChanged",((e,t,n)=>{i=n,a(!eU)}));let d,p=null;_H.watch((()=>_H.getters["content/currentChangeTrigger"]),(()=>{const e=_H.getters["content/current"];let t=!1;if(e.id!==p&&(eU=!0,p=e.id,t=!0),e.properties!==d){d=e.properties;const n=Lo.getOptions(_H.getters["content/currentProperties"]);UL.serializeObject(n)!==UL.serializeObject(this.options)&&(this.options=n,this.initPrism(),this.initConverter(),t=!0)}t&&this.initClEditor(),this.applyContent()}),{immediate:!0}),_H.watch((()=>_H.getters["content/isCurrentEditable"]),(e=>this.clEditor.toggleEditable(!!e)),{immediate:!0}),_H.watch((()=>UL.serializeObject(_H.getters["layout/styles"])),(()=>this.measureSectionDimensions(!1,!0,!0))),this.initHighlighters(),this.emit("inited")}});var oU;const{origin:aU,fileName:sU,contentText:lU,contentProperties:cU}=UL.queryParams,uU=aU&&window.parent,hU={setReady(){uU&&setTimeout((()=>window.parent.postMessage({type:"ready"},aU)),1)},closed:!1,close(){uU&&(this.closed||window.parent.postMessage({type:"close"},aU),this.closed=!0)},async init(){if(!uU)return;_H.commit("setLight",!0);const e=await EN.createFile({name:sU||UL.getHostname(aU),text:lU||"\n",properties:cU,parentId:"temp"},!0),t={},n=_H.state.file.itemsById;Object.entries(_H.getters["data/lastCreated"]).forEach((([e,r])=>{n[e]&&"temp"===n[e].parentId&&(t[e]=r)})),t[e.id]={created:Date.now()},Object.entries(t).sort((([,e],[,t])=>t.created-e.created)).splice(10).forEach((([e])=>{delete t[e],EN.deleteFile(e)})),_H.dispatch("data/setLastCreated",t),_H.commit("file/setCurrentId",e.id);const r=SF.Utils.debounce((()=>{const t=_H.getters["file/current"];if(t.id!==e.id)this.close();else if(!this.closed&&null!=iU.previewCtx.html){const n=_H.getters["content/current"],r=UL.computeProperties(n.properties);window.parent.postMessage({type:"fileChange",payload:{id:e.id,name:t.name,content:{text:n.text.slice(0,-1),
// Remove trailing LF
properties:r,yamlProperties:n.properties,html:iU.previewCtx.html}}},aU)}}),25);iU.on("previewCtx",r),_H.watch((()=>_H.getters["file/current"].name),r)}},dU=33e4;let pU,fU,mU;const gU=()=>parseInt(localStorage.getItem(_H.getters["workspace/lastSyncActivityKey"]),10)||0,vU=()=>!!_H.getters["workspace/syncToken"],yU=()=>!!_H.getters["syncLocation/current"].length,bU=()=>!_H.state.offline&&(vU()||yU()),_U=()=>{const e=gU();return mU===e||Date.now()>3e3+e},wU=()=>{const e=Date.now();mU=e,localStorage.setItem(_H.getters["workspace/lastSyncActivityKey"],e)},kU=e=>{if(e.v)return e;const t={},n={},r={};return Object.entries(e.historyData).forEach((([e,r])=>{const i=UL.addItemHash(r);n[i.hash]=i,t[e]=i.hash})),Object.entries(e.syncHistory).forEach((([e,n])=>{r[e]=n.map((e=>t[e]))})),{...e,historyData:n,syncHistory:r,v:1}},xU=e=>{const t=Date.now()+e;return e=>{if(t<Date.now())throw new Error("TOO_LATE");return e()}},CU=e=>([e.syncData,e.contentSyncData,e.fileSyncData].forEach((e=>{if(e){const t=_H.getters["data/syncDataById"][e.id];UL.serializeObject(t)!==UL.serializeObject(e)&&_H.dispatch("data/patchSyncDataById",{[e.id]:e})}})),e);class SU{constructor(){t(this,"restartSkipContents",!1),t(this,"attempted",{})}}const TU=async(e,t=new SU)=>{const n=`${e}/content`;t.attempted[n]=!0,await NN.loadSyncedContent(e);try{await NN.loadItem(n)}catch(i7){}const r=()=>kU(_H.state.syncedContent.itemsById[`${e}/syncedContent`]);try{if((e=>{const t=`${e}/content`;if(_H.getters["data/syncDataByItemId"][t])return!1;const n=_H.state.file.itemsById[e],r=_H.state.content.itemsById[t];if(!n||!r)return!1;if("temp"===n.parentId)return!0;if([..._H.getters["syncLocation/filteredGroupedByFileId"][e]||[],..._H.getters["publishLocation/filteredGroupedByFileId"][e]||[]].length)return!1;const{welcomeFileHashes:i}=_H.getters["data/localSettings"],o=UL.hash(r.text),a=Object.keys(r.discussions).length;return"Welcome file"===n.name&&i[o]&&!a})(e))return;const i=[..._H.getters["syncLocation/filteredGroupedByFileId"][e]||[]];vU()&&i.unshift({id:"main",providerId:fU.id,fileId:e}),await UL.awaitSequence(i,(async i=>{const o=GN.providersById[i.providerId];if(!o)return;const a=o.getToken(i);if(!a)return;const s=async()=>{const s=await(async()=>{if("main"!==i.id)return o.downloadContent(a,i);const t=_H.getters["data/syncDataByItemId"][n],r=_H.getters["data/syncDataByItemId"][e];if(!t||!r)return null;const{content:s}=CU(await o.downloadWorkspaceContent({token:a,contentId:n,contentSyncData:t,fileSyncData:r}));return s})(),l=r(),c=(u=i.id,r().syncHistory[u]);var u;let h;const d=UL.deepCopy(_H.state.content.itemsById[n]);if(d)if(!s||s.hash===d.hash||l.historyData[s.hash])h=d;else{let e=UL.someResult(s.history,(e=>l.historyData[e]));if(!e&&c&&(e=l.historyData[c[1]]),h=WN.mergeContent(s,d,e),h.mergeFlag){const e=_H.state.file.itemsById[i.fileId];_H.dispatch("notification/info",`${e.name} `)}}else h=UL.deepCopy(s||null);if(!h)return;_H.commit("content/setItem",{id:n,text:UL.sanitizeText(h.text),properties:UL.sanitizeText(h.properties),discussions:h.discussions,comments:h.comments}),h=UL.deepCopy(_H.state.content.itemsById[n]);const p=s?s.history.slice():[];let f=!0;if(p[0]!==h.hash&&(p.unshift(h.hash),f=!1),c&&null!=c[2]&&c[2]!==h.hash){const e=p.lastIndexOf(c[2]);-1!==e&&p.splice(e,1)}const m=UL.deepCopy(l),g=m.syncHistory[i.id]||[];if(m.syncHistory[i.id]=g,s&&(s.hash===g[0]||s.history.includes(g[0]))&&(g[1]=g[0]),g[1]=g[1]||null,g[0]=h.hash,g[2]=f?null:h.hash,m.historyData[h.hash]=h,(e=>{Object.keys(e.syncHistory).forEach((t=>{"main"===t||_H.state.syncLocation.itemsById[t]||delete e.syncHistory[t]}));const t=new Set([].concat(...Object.keys(e.syncHistory).map((t=>e.syncHistory[t]))));Object.keys(e.historyData).map((e=>parseInt(e,10))).forEach((n=>{t.has(n)||delete e.historyData[n]}))})(m),_H.commit("syncedContent/patchItem",m),f)return;o!==fU||_H.getters["data/syncDataByItemId"][e]||(t.restartSkipContents=!0);const v=_H.getters["workspace/currentWorkspace"];let y="";if(!!_H.getters["workspace/currentWorkspaceIsGit"]&&void 0!==v.autoSync&&!v.autoSync){const t=_H.state.file.itemsById[e];try{const{commitMessage:e}=await _H.dispatch("modal/open",{type:"commitMessage",name:t.name});y=e}catch(i7){return}}const b={...h,history:p.slice(0,20)},_=await(async(t,r,s)=>{if("main"!==i.id)return o.uploadContent(a,t,i,r);const l=_H.getters["data/syncDataByItemId"][n];if(l&&l.hash===t.hash)return i;const c=_H.getters["data/syncDataByItemId"][e];return CU(await o.uploadWorkspaceContent({token:a,content:t,commitMessage:s,
// Use deepCopy to freeze item
file:UL.deepCopy(_H.state.file.itemsById[e]),contentSyncData:l,fileSyncData:c,ifNotTooLate:r})),i})(b,xU(1e3),y);UL.serializeObject(i)!==UL.serializeObject(_)&&(_H.commit("syncLocation/patchItem",_),EN.ensureUniqueLocations())};await _H.dispatch("queue/doWithLocation",{location:i,action:async()=>{try{await s()}catch(e){if(_H.state.offline||e&&"TOO_LATE"===e.message)throw e;_H.dispatch("notification/error",e)}}})}))}catch(i){if(!i||"TOO_LATE"!==i.message)throw i;await TU(e,t)}finally{await NN.unloadContents()}},EU=async e=>{const t=()=>_H.state.data.itemsById[e]||_H.state.data.lsItemsById[e],n=t(),r=_H.getters["data/syncDataById"][e];if(r&&n&&n.hash===r.hash)return;const i=fU.getToken(),{item:o}=CU(await fU.downloadWorkspaceData({token:i,syncData:r||{id:e}})),a=o,s=_H.getters["data/dataSyncDataById"][e],l=UL.deepCopy(t());let c=l?a?s?s.hash!==a.hash?s.hash!==l.hash&&"object"==typeof l.data?{...l,data:WN.mergeObjects(a.data,l.data)}:a:l:a:l:a;c&&(l&&"workspaces"===e&&await Promise.all(Object.keys(l.data).filter((e=>!c.data[e])).map((e=>EN.removeWorkspace(e)))),_H.commit("data/setItem",{id:e,...c}),c=UL.deepCopy(t()),a&&a.hash===c.hash||CU(await fU.uploadWorkspaceData({token:i,item:c,syncData:_H.getters["data/syncDataById"][e],ifNotTooLate:xU(1e3)})),_H.dispatch("data/patchDataSyncDataById",{[e]:UL.deepCopy(_H.getters["data/syncDataById"][e])}))},IU=async(e=!1)=>{try{const t=_H.getters["workspace/currentWorkspace"],n=new SU,r=_H.getters["workspace/syncToken"],i=_H.getters["data/localSettings"];if(i.syncSub){if(i.syncSub!==r.sub)throw new Error("Synchronization failed due to token inconsistency.")}else _H.dispatch("data/patchLocalSettings",{syncSub:r.sub});const o=await fU.getChanges();(e=>{const t={..._H.getters.allItemsById},n={..._H.getters["data/syncDataById"]},r={};let i,o=!1;if(_H.getters["workspace/currentWorkspaceIsGit"]){const e={..._H.getters.itemsByGitPath};i=t=>t&&e[t.id]}else i=e=>e&&t[e.itemId];e.forEach((e=>{const a=n[e.syncDataId],s=i(a);!e.item&&a?(n[e.syncDataId]&&(delete n[e.syncDataId],o=!0),s&&(_H.commit(`${s.type}/deleteItem`,s.id),delete t[s.id])):e.item&&e.item.hash&&(r[e.item.id]=!0,(a||{}).hash!==e.syncData.hash&&(n[e.syncDataId]=e.syncData,o=!0),
// If no sync data or existing one is different
(a||{}).hash!==e.item.hash&&(s||{}).hash!==e.item.hash&&"content"!==e.item.type&&"data"!==e.item.type&&(_H.commit(`${e.item.type}/setItem`,e.item),t[e.item.id]=e.item))})),o&&(_H.dispatch("data/setSyncDataById",n),EN.sanitizeWorkspace(r))})(fU.prepareChanges(o)),fU.onChangesApplied();const a=xU(3e4);if(await UL.awaitSome((()=>a((async()=>{const e={..._H.state.file.itemsById,..._H.state.folder.itemsById,..._H.state.syncLocation.itemsById,..._H.state.publishLocation.itemsById},t=_H.getters["data/syncDataByItemId"],n=!!_H.getters["workspace/currentWorkspaceIsGit"],[r,i]=UL.someResult(Object.entries(e),(([r,i])=>{const o=t[r];return o&&o.hash===i.hash||!n&&e[i.parentId]&&!t[i.parentId]||n&&"folder"===i.type||"file"===i.type&&!t[`${r}/content`]||"publishLocation"===i.type&&(!i.fileId||!t[`${i.fileId}/content`])?null:[i,o]}))||[];return!!r&&(CU(await fU.saveWorkspaceItem({
// Use deepCopy to freeze objects
item:UL.deepCopy(r),syncData:UL.deepCopy(i),ifNotTooLate:a})),!0)})))),await UL.awaitSome((()=>a((async()=>{let e,t,n;if(_H.getters["workspace/currentWorkspaceIsGit"]){const{itemsByGitPath:r}=_H.getters;e=e=>r[e.id],n=e=>r[e.fileId],t=e=>r[e.id.slice(1)]}else{const{allItemsById:r}=_H.getters;e=e=>r[e.itemId],n=e=>r[e.fileId],t=e=>r[e.itemId.split("/")[0]]}const r=_H.getters["data/syncDataById"],i=UL.deepCopy(UL.someResult(Object.values(r),(r=>e(r)||"data"===r.type||"content"===r.type&&t(r)||"publishLocation"===r.type&&r.fileId&&n(r)?null:r)));if(!i)return!1;await fU.removeWorkspaceItem({syncData:i,ifNotTooLate:a});const o={..._H.getters["data/syncDataById"]};return delete o[i.id],_H.dispatch("data/setSyncDataById",o),!0})))),"main"===t.id&&(await EU("workspaces"),await EU("badgeCreations")),!e){const e=_H.getters["file/current"].id;e&&await TU(e,n),await UL.awaitSome((async()=>{let e;if(_H.getters["workspace/currentWorkspaceIsGit"]){const{gitPathsByItemId:t}=_H.getters,n=_H.getters["data/syncDataById"];e=e=>n[t[e]]}else{const t=_H.getters["data/syncDataByItemId"];e=e=>t[e]}const t=[...Object.keys(NN.hashMap.content).map((e=>[e.split("/")[0],e])),..._H.getters["file/items"].map((e=>[e.id,`${e.id}/content`]))],r=_H.state.content.itemsById,i=UL.someResult(t,(([t,i])=>{const o=r[i],a=o?o.hash:NN.hashMap.content[i],s=e(i);
// Sync if content syncing was not attempted yet
return n.attempted[i]||// And if syncData does not exist or if content hash and syncData hash are inconsistent
s&&s.hash===a?null:t}));return!!i&&(await TU(i,n),!0)}))}n.restartSkipContents&&await IU(!0),"main"===t.id&&OF.addBadge("giteeAppData"===t.providerId?"syncMainWorkspace":"githubSyncMainWorkspace")}catch(t){if(!t||"TOO_LATE"!==t.message)throw t;await IU()}},AU=async(e,t=0)=>{if(e.length-1<t)return;const n=await NN.getImgItem(e[t]);if(!n||n.uploaded)return void setTimeout(await AU(e,t+1),10);const r=fU.getToken(),{sha:i}=await fU.uploadWorkspaceContent({token:r,file:{...UL.deepCopy(n),type:"img",path:n.path.substring(1,n.path.length).replaceAll("%20"," ")},isImg:!0});await NN.saveImg({...n,uploaded:1,sha:i}),setTimeout(await AU(e,t+1),500)},DU=(e=!1)=>{_H.state.light||_H.dispatch("queue/enqueueSyncRequest",(async()=>{let t;const n=async()=>{if(dO.isUserActive()&&_U()){if(clearInterval(t),!bU())throw new Error("");const n={};if(gU()+ML.cleanTrashAfter<Date.now()){const e=_H.getters["data/syncDataByItemId"];_H.getters["file/items"].forEach((t=>{const r=e[t.id];r&&"trash"===t.parentId&&t.hash===r.hash&&(n[t.id]=t.hash)}))}t=UL.setInterval((()=>wU()),1e3),wU();try{vU()?await IU():yU()&&await TU(_H.getters["file/current"].id),await(async()=>{const e=await NN.getWaitUploadImgIds();e.length>0&&await AU(e)})(),Object.entries(n).forEach((([e,t])=>{const n=_H.state.file.itemsById[e];n&&n.hash===t&&EN.deleteFile(e)})),e&&OF.addBadge("triggerSync")}finally{clearInterval(t)}}};return t=UL.setInterval((()=>n()),1e3),n()}))},BU={async init(){NN.syncLocalStorage(),pU=GN.providersById[UL.queryParams.providerId],pU&&pU.initAction&&await pU.initAction();const e=_H.getters["workspace/mainWorkspaceToken"];fU=GN.providersById[UL.queryParams.providerId],fU&&fU.initWorkspace||(fU=e&&"githubAppData"===e.providerId?nj:QN);const t=await fU.initWorkspace(),{paymentSuccess:n}=UL.queryParams;if(UL.setQueryParams(fU.getWorkspaceParams(t)),_H.dispatch("workspace/setCurrentWorkspaceId",t.id),await NN.init(),n){_H.dispatch("modal/open","paymentSuccess").catch((()=>{}));const e=_H.getters["workspace/sponsorToken"],t=Date.now();e&&e.expiresOn>t-dU&&_H.dispatch("data/addGoogleToken",{...e,expiresOn:t-dU})}if(pU=GN.providersById[UL.queryParams.providerId]||pU,pU&&pU.performAction){const e=await pU.performAction();e&&this.createSyncLocation(e)}await hU.init(),_H.state.light||(UL.setInterval((()=>{bU()&&dO.isUserActive()&&_U()&&(()=>{let{autoSyncEvery:e}=_H.getters["data/computedSettings"];return e<6e4&&(e=6e4),Date.now()>e+gU()})()&&(()=>{const e=_H.getters["workspace/currentWorkspace"];return void 0===e.autoSync||e.autoSync})()&&DU()}),1e3),UL.setInterval((()=>{_H.state.queue.isEmpty&&NN.unloadContents()}),5e3))},afterSignIn:async()=>{if("main"===_H.getters["workspace/currentWorkspace"].id&&fU){const e=_H.getters["workspace/mainWorkspaceToken"];fU="githubAppData"===e.providerId?nj:QN,await fU.initWorkspace()}},syncImg:async e=>{const t=fU.getToken(),n=e.substring(1,e.length).replaceAll("%20"," "),{sha:r,content:i}=await fU.downloadFile({token:t,path:n});r&&i&&await NN.saveImg({id:CN.MD5(e).toString(),path:e,content:i,uploaded:1,sha:r})},isSyncPossible:bU,requestSync:DU,createSyncLocation:e=>{const t=_H.getters["file/current"],n=t.id;e.fileId=n;const r=UL.deepCopy(_H.getters["content/current"]);_H.dispatch("queue/enqueue",(async()=>{const i=GN.providersById[e.providerId],o=i.getToken(e),a=await i.uploadContent(o,{...r,history:[r.hash]},e);await NN.loadSyncedContent(n);const s=UL.deepCopy(kU(_H.state.syncedContent.itemsById[`${n}/syncedContent`])),l=[];s.syncHistory[e.id]=l,l[0]=r.hash,l[2]=r.hash,s.historyData[r.hash]=r,_H.commit("syncedContent/patchItem",s),EN.addSyncLocation(a),_H.dispatch("notification/info",`"${t.name}"`)}))}},LU=e=>(t,n)=>{const r=Object.keys(n.currentFileDiscussions).filter((e=>e!==t.newDiscussionId)),i=r.indexOf(t.currentDiscussionId)+e+r.length;return r[i%r.length]},MU={namespaced:!0,state:{currentDiscussionId:null,newDiscussion:null,newDiscussionId:null,isCommenting:!1,newCommentText:"",newCommentSelection:{start:0,end:0},newCommentFocus:!1,stickyComment:null},mutations:{setCurrentDiscussionId:(e,t)=>{e.currentDiscussionId!==t&&(e.currentDiscussionId=t,e.isCommenting=!1)},setNewDiscussion:(e,t)=>{e.newDiscussion=t,e.newDiscussionId=UL.uid(),e.currentDiscussionId=e.newDiscussionId,e.isCommenting=!0,e.newCommentFocus=!0},patchNewDiscussion:(e,t)=>{Object.assign(e.newDiscussion,t)},setIsCommenting:(e,t)=>{e.isCommenting=t,t?e.newCommentFocus=!0:e.newDiscussionId=null},setNewCommentText:(e,t)=>{e.newCommentText=t||""},setNewCommentSelection:(e,t)=>{e.newCommentSelection=t},setNewCommentFocus:(e,t)=>{e.newCommentFocus=t},setStickyComment:(e,t)=>{e.stickyComment=t}},getters:{newDiscussion:({currentDiscussionId:e,newDiscussionId:t,newDiscussion:n})=>e===t&&n,currentFileDiscussionLastComments:(e,t,n,r)=>{const{discussions:i,comments:o}=r["content/current"],a={};return Object.entries(o).forEach((([,e])=>{if(i[e.discussionId]){const t=a[e.discussionId];(!t||t.created<e.created)&&(a[e.discussionId]=e)}})),a},currentFileDiscussions:({newDiscussionId:e},{newDiscussion:t,currentFileDiscussionLastComments:n},r,i)=>{const o={};t&&(o[e]=t);const{discussions:a}=i["content/current"];return Object.entries(n).sort((([,e],[,t])=>e.created-t.created)).forEach((([e])=>{o[e]=a[e]})),o},currentDiscussion:({currentDiscussionId:e},{currentFileDiscussions:t})=>t[e],previousDiscussionId:LU(-1),nextDiscussionId:LU(1),currentDiscussionComments:({currentDiscussionId:e},{currentDiscussion:t},n,r)=>{const i={};if(t){const t=r["content/current"].comments;Object.entries(t).filter((([,t])=>t.discussionId===e)).sort((([,e],[,t])=>e.created-t.created)).forEach((([e,t])=>{i[e]=t}))}return i},currentDiscussionLastCommentId:(e,{currentDiscussionComments:t})=>Object.keys(t).pop(),currentDiscussionLastComment:(e,{currentDiscussionComments:t,currentDiscussionLastCommentId:n})=>t[n]},actions:{cancelNewComment({commit:e,getters:t}){e("setIsCommenting",!1),t.currentDiscussion||e("setCurrentDiscussionId",t.nextDiscussionId)},async createNewDiscussion({commit:e,dispatch:t,rootGetters:n},r){if(n["workspace/loginToken"]){if(r){let t=n["content/current"].text.slice(r.start,r.end).trim();const i=80;t.length>i&&(t=`${t.slice(0,i-1).trim()}`),e("setNewDiscussion",{...r,text:t})}}else try{"github"===await t("modal/open","signInForComment",{root:!0})?await MO.signin():await EO.signin(),await BU.afterSignIn(),BU.requestSync(),await t("createNewDiscussion",r)}catch(i7){}},cleanCurrentFile({getters:e,rootGetters:t,commit:n,dispatch:r},{filterComment:i,filterDiscussion:o}={}){const{discussions:a}=t["content/current"],{comments:s}=t["content/current"],l={discussions:{},comments:{}};Object.entries(s).forEach((([e,t])=>{const n=a[t.discussionId];n&&t!==i&&n!==o&&(l.discussions[t.discussionId]=n,l.comments[e]=t)}));const{nextDiscussionId:c}=e;r("content/patchCurrent",l,{root:!0}),e.currentDiscussion||n("setCurrentDiscussionId",c)}}},FU=(e=null)=>({id:e,type:"file",name:"",parentId:null,hash:0}),OU=(e=null)=>({id:e,type:"folder",name:"",parentId:null,hash:0}),PU=e=>(t,n)=>{t[e]=n};const NU=new Intl.Collator(void 0,{sensitivity:"base",numeric:!0}),jU=(e,t)=>NU.compare(e.item.name,t.item.name);let zU=class{constructor(e,t=[],n=!1){this.item=e,this.locations=t,this.isFolder=n,n&&(this.folders=[],this.files=[])}sortChildren(){this.isFolder&&(this.folders.sort(jU),this.files.sort(jU),this.folders.forEach((e=>e.sortChildren())))}};const RU=new zU(FU());RU.isNil=!0;const qU=new zU(FU());function $U({item:e,isNil:t},{nodeMap:n,rootNode:r}){return t?RU:n[e.parentId]||r}function UU(e,t){return"folder"===e.item.type?e:$U(e,t)}qU.item.id="fake",qU.noDrag=!0;const HU={namespaced:!0,state:{selectedId:null,editingId:null,dragSourceId:null,dragTargetId:null,newChildNode:RU,openNodes:{}},mutations:{setSelectedId:PU("selectedId"),setEditingId:PU("editingId"),setDragSourceId:PU("dragSourceId"),setDragTargetId:PU("dragTargetId"),setNewItem(e,t){e.newChildNode=t?new zU(t,[],"folder"===t.type):RU},setNewItemName(e,t){e.newChildNode.item.name=t},toggleOpenNode(e,t){e.openNodes[t]=!e.openNodes[t]}},getters:{nodeStructure:(e,t,n,r)=>{const i=new zU(OU(),[],!0);i.isRoot=!0;const o=new zU(OU(),[],!0);o.item.id="trash",o.item.name="",o.noDrag=!0,o.isTrash=!0,o.parentNode=i;const a=new zU(OU(),[],!0);a.item.id="temp",a.item.name="",a.noDrag=!0,a.noDrop=!0,a.isTemp=!0,a.parentNode=i;const s={trash:o,temp:a};r["folder/items"].forEach((e=>{s[e.id]=new zU(e,[],!0)}));const l=r["syncLocation/filteredGroupedByFileId"],c=r["publishLocation/filteredGroupedByFileId"];return r["file/items"].forEach((e=>{const t=[...l[e.id]||[],...c[e.id]||[]];s[e.id]=new zU(e,t)})),Object.entries(s).forEach((([,e])=>{let t=s[e.item.parentId];if(!t||!t.isFolder){if(e.isTrash||e.isTemp)return;t=i}e.isFolder?t.folders.push(e):t.files.push(e),e.parentNode=t})),i.sortChildren(),i.folders.unshift(a),a.files.forEach((e=>{e.noDrop=!0})),i.folders.unshift(o),i.files.push(qU),{nodeMap:s,rootNode:i}},nodeMap:(e,{nodeStructure:t})=>t.nodeMap,rootNode:(e,{nodeStructure:t})=>t.rootNode,newChildNodeParent:(e,t)=>$U(e.newChildNode,t),selectedNode:({selectedId:e},{nodeMap:t})=>t[e]||RU,selectedNodeFolder:(e,t)=>UU(t.selectedNode,t),editingNode:({editingId:e},{nodeMap:t})=>t[e]||RU,dragSourceNode:({dragSourceId:e},{nodeMap:t})=>t[e]||RU,dragTargetNode:({dragTargetId:e},{nodeMap:t})=>"fake"===e?qU:t[e]||RU,dragTargetNodeFolder:({dragTargetId:e},t)=>"fake"===e?t.rootNode:UU(t.dragTargetNode,t)},actions:{openNode({state:e,getters:t,commit:n,dispatch:r},i){const o=t.nodeMap[i];o&&(o.isFolder&&!e.openNodes[i]&&n("toggleOpenNode",i),r("openNode",o.item.parentId))},openDragTarget:function(e,t){let n;return r=>{clearTimeout(n),n=setTimeout((()=>e(r)),t)}}((({state:e,dispatch:t})=>{t("openNode",e.dragTargetId)}),1e3),setDragTarget({commit:e,getters:t,dispatch:n},r){if(r){const i=UU(r,t),o=t.dragSourceNode.item.id,{nodeMap:a}=t;for(let t=i;t;t=a[t.item.parentId])if(t.item.id===o)return void e("setDragTargetId");e("setDragTargetId",r.item.id),n("openDragTarget")}else e("setDragTargetId")}}},WU=RM(FU);WU.state={...WU.state,currentId:null},WU.getters={...WU.getters,current:({itemsById:e,currentId:t})=>e[t]||FU(),isCurrentTemp:(e,{current:t})=>"temp"===t.parentId,lastOpened:({itemsById:e},{items:t},n,r)=>e[r["data/lastOpenedIds"][0]]||t[0]||FU()},WU.mutations={...WU.mutations,setCurrentId(e,t){e.currentId=t}},WU.actions={...WU.actions,patchCurrent({getters:e,commit:t},n){t("patchItem",{...n,id:e.current.id})}};const GU={namespaced:!0,state:{type:null,lastOpen:0,findText:"",replaceText:""},mutations:{setType:(e,t)=>{e.type=t},setLastOpen:e=>{e.lastOpen=Date.now()},setFindText:(e,t)=>{e.findText=t},setReplaceText:(e,t)=>{e.replaceText=t}},actions:{open({commit:e},{type:t,findText:n}){e("setType",t),n&&e("setFindText",n),e("setLastOpen")}}},VU=RM(OU),YU=[{},{method:"bold",title:"",icon:"format-bold"},{method:"italic",title:"",icon:"format-italic"},{method:"heading",title:"",icon:"format-size"},{method:"strikethrough",title:"",icon:"format-strikethrough"},{method:"ulist",title:"",icon:"format-list-bulleted"},{method:"olist",title:"",icon:"format-list-numbers"},{method:"clist",title:"",icon:"format-list-checks"},{method:"quote",title:"",icon:"format-quote-close"},{method:"code",title:"",icon:"code-tags"},{method:"table",title:"",icon:"table"},{method:"link",title:"",icon:"link-variant"},{method:"image",title:"",icon:"file-image"},{method:"chatgpt",title:"ChatGPT",icon:"chat-gpt"}];let KU=2,XU=0;YU.forEach((e=>{e.method?KU+=1:XU+=1}));const ZU=34*KU+8*XU,JU={editorMinWidth:320,explorerWidth:260,gutterWidth:250,sideBarWidth:280,navigationBarHeight:44,buttonBarWidth:26,statusBarHeight:20};function QU(e,t,n=t["data/layoutSettings"],r={showNavigationBar:n.showNavigationBar||!n.showEditor||e.content.revisionContent||e.light,showStatusBar:n.showStatusBar,showEditor:n.showEditor,showSidePreview:n.showSidePreview&&n.showEditor,showPreview:n.showSidePreview||!n.showEditor,showSideBar:n.showSideBar&&!e.light,showExplorer:n.showExplorer&&!e.light,layoutOverflow:!1,hideLocations:e.light}){r.innerHeight=e.layout.bodyHeight,r.showNavigationBar&&(r.innerHeight-=JU.navigationBarHeight),r.showStatusBar&&(r.innerHeight-=JU.statusBarHeight),r.innerWidth=e.layout.bodyWidth,r.innerWidth<JU.editorMinWidth+JU.gutterWidth+JU.buttonBarWidth&&(r.layoutOverflow=!0),r.showSideBar&&(r.innerWidth-=JU.sideBarWidth),r.showExplorer&&(r.innerWidth-=JU.explorerWidth);let i=r.innerWidth-JU.buttonBarWidth;const o=!t["file/isCurrentTemp"]&&!!t["discussion/currentDiscussion"];if(o&&(i-=JU.gutterWidth),i<JU.editorMinWidth&&(i=JU.editorMinWidth),r.showSidePreview&&i/2<JU.editorMinWidth)return r.showSidePreview=!1,r.showPreview=!1,r.layoutOverflow=!1,QU(e,t,n,r);const a=t["data/computedSettings"];r.fontSize=18,r.textWidth=990,i<1120&&(r.fontSize-=1,r.textWidth=910),i<1040&&(r.textWidth=830),r.textWidth*=a.maxWidthFactor,i<r.textWidth&&(r.textWidth=i),r.textWidth<640&&(r.fontSize-=1),r.fontSize*=a.fontSizeFactor;const s=Math.floor(r.innerHeight/2),l=Math.floor(i/2);r.previewWidth=r.showSidePreview?l:i;const c=Math.max(Math.floor((r.previewWidth-r.textWidth)/2),25);r.showSidePreview||(r.previewWidth+=JU.buttonBarWidth),r.previewGutterWidth=o&&!n.showEditor?JU.gutterWidth:0;const u=c+r.previewGutterWidth;r.previewGutterLeft=u-25,r.previewPadding=`10px ${c}px ${s}px ${u}px`,r.editorWidth=r.showSidePreview?l:i;const h=Math.max(Math.floor((r.editorWidth-r.textWidth)/2),25);r.editorGutterWidth=o&&n.showEditor?JU.gutterWidth:0;const d=h+r.editorGutterWidth;if(r.editorGutterLeft=d-25,r.editorPadding=`10px ${h}px ${s}px ${d}px`,r.titleMaxWidth=r.innerWidth-54-46-37,r.showEditor){const e=t["syncLocation/current"],n=t["publishLocation/current"];r.titleMaxWidth-=ZU+20*(e.length+n.length)+88+8,r.titleMaxWidth+ZU<200&&(r.hideLocations=!0)}return r.titleMaxWidth=Math.max(200,Math.min(800,r.titleMaxWidth)),r}const eH={namespaced:!0,state:{canUndo:!1,canRedo:!1,bodyWidth:0,bodyHeight:0},mutations:{setCanUndo:(e,t)=>{e.canUndo=t},setCanRedo:(e,t)=>{e.canRedo=t},updateBodySize:e=>{e.bodyWidth=document.body.clientWidth,e.bodyHeight=document.body.clientHeight}},getters:{constants:()=>JU,styles:(e,t,n,r)=>QU(n,r)},actions:{updateBodySize({commit:e,dispatch:t,rootGetters:n}){e("updateBodySize");t("data/toggleExplorer",n["data/layoutSettings"].showExplorer,{root:!0})}}},tH={namespaced:!0,state:{stack:[],hidden:!1},mutations:{setStack:(e,t)=>{e.stack=t},setHidden:(e,t)=>{e.hidden=t}},getters:{config:({hidden:e,stack:t})=>!e&&t[0]},actions:{async open({commit:e,state:t},n){const r="object"==typeof n?{...n}:{type:n};try{return await new Promise(((n,i)=>{r.resolve=n,r.reject=i,e("setStack",[r,...t.stack])}))}finally{e("setStack",t.stack.filter((e=>e.type!==r.type)))}},async hideUntil({commit:e},t){try{return e("setHidden",!0),await t}finally{e("setHidden",!1)}}}},nH={namespaced:!0,state:{items:[]},mutations:{setItems:(e,t)=>{e.items=t}},actions:{showItem({state:e,commit:t},n){const r=UL.someResult(e.items,(e=>e.type===n.type&&e.content===n.content&&n));return r?r.promise:(n.promise=new Promise(((r,i)=>{n.id=UL.uid(),t("setItems",[...e.items,n]);const o=()=>t("setItems",e.items.filter((e=>e.id!==n.id)));setTimeout((()=>o()),n.timeout||5e3),n.resolve=e=>{o(),r(e)},n.reject=e=>{o(),i(e)}})),n.promise)},info:({dispatch:e},t)=>e("showItem",{type:"info",content:t}),badge:({dispatch:e},t)=>e("showItem",{type:"badge",content:t}),confirm:({dispatch:e},t)=>e("showItem",{type:"confirm",content:t,timeout:1e4}),error({dispatch:e,rootState:t},n){const r={type:"error"};if(n)if(n.message)r.content=n.message;else if(n.status){const e=t.queue.currentLocation;if(e.providerId){const t=GN.providersById[e.providerId];r.content=`HTTP error ${n.status} on ${t.name} location.`}else r.content=`HTTP error ${n.status}.`}else r.content=`${n}`;return r.content&&"[object Object]"!==r.content||(r.content="Unknown error."),e("showItem",r)}}},rH=e=>(t,n)=>{t[e]=n};let iH=Promise.resolve();const oH={namespaced:!0,state:{isEmpty:!0,isSyncRequested:!1,isPublishRequested:!1,currentLocation:{}},mutations:{setIsEmpty:rH("isEmpty"),setIsSyncRequested:rH("isSyncRequested"),setIsPublishRequested:rH("isPublishRequested"),setCurrentLocation:rH("currentLocation")},actions:{enqueue({state:e,commit:t,dispatch:n},r){if(e.offline)return;const i=()=>{if(e.offline)throw iH=Promise.resolve(),t("setIsEmpty",!0),new Error("offline")};e.isEmpty&&t("setIsEmpty",!1);const o=iH.then((()=>i())).then((()=>Promise.resolve().then((()=>r())).catch((e=>{i(),n("notification/error",e,{root:!0})})).then((()=>{o===iH&&t("setIsEmpty",!0)}))));iH=o},enqueueSyncRequest({state:e,commit:t,dispatch:n},r){if(!e.isSyncRequested){t("setIsSyncRequested",!0);const e=()=>t("setIsSyncRequested",!1);n("enqueue",(()=>r().then(e,(t=>{throw e(),t}))))}},enqueuePublishRequest({state:e,commit:t,dispatch:n},r){if(!e.isSyncRequested){t("setIsPublishRequested",!0);const e=()=>t("setIsPublishRequested",!1);n("enqueue",(()=>r().then(e,(t=>{throw e(),t}))))}},async doWithLocation({commit:e},{location:t,action:n}){try{return e("setCurrentLocation",t),await n()}finally{e("setCurrentLocation",{})}}}},aH=(e=null)=>({id:e,type:"syncedContent",historyData:{},syncHistory:{},v:0,hash:0}),sH=RM(aH,!0);sH.getters={...sH.getters,current:({itemsById:e},t,n,r)=>e[`${r["file/current"].id}/syncedContent`]||aH()};const lH={namespaced:!0,state:ct({itemsById:{}}),mutations:{setItem:({itemsById:e},t)=>{const n={...t},r=e[t.id];r&&(n.name||(n.name=r.name),n.imageUrl||(n.imageUrl=r.imageUrl)),e[t.id]=n}}},cH={namespaced:!0,state:{currentWorkspaceId:null,lastFocus:0},mutations:{setCurrentWorkspaceId:(e,t)=>{e.currentWorkspaceId=t},setLastFocus:(e,t)=>{e.lastFocus=t}},getters:{workspacesById:(e,t,n,r)=>{const i={},o=r["workspace/mainWorkspaceToken"];return Object.entries(r["data/workspaces"]).forEach((([e,t])=>{const n={id:e,providerId:o&&o.providerId||"giteeAppData",sub:o&&o.sub,...t},r=GN.providersById[n.providerId];if(r){const t=r.getWorkspaceParams(n);n.url=UL.addQueryParams("app",t,!0),n.locationUrl=r.getWorkspaceLocationUrl(n),i[e]=n}})),i},mainWorkspace:(e,{workspacesById:t})=>t.main,currentWorkspace:({currentWorkspaceId:e},{workspacesById:t,mainWorkspace:n})=>t[e]||n,currentWorkspaceIsGit:(e,{currentWorkspace:t})=>"githubWorkspace"===t.providerId||"giteeWorkspace"===t.providerId||"gitlabWorkspace"===t.providerId||"giteaWorkspace"===t.providerId||"giteeAppData"===t.providerId||"githubAppData"===t.providerId,currentWorkspaceHasUniquePaths:(e,{currentWorkspace:t})=>"githubWorkspace"===t.providerId||"giteeWorkspace"===t.providerId||"gitlabWorkspace"===t.providerId||"giteaWorkspace"===t.providerId||"giteeAppData"===t.providerId||"githubAppData"===t.providerId,lastSyncActivityKey:(e,{currentWorkspace:t})=>`${t.id}/lastSyncActivity`,lastFocusKey:(e,{currentWorkspace:t})=>`${t.id}/lastWindowFocus`,mainWorkspaceToken:(e,t,n,r)=>UL.someResult([...Object.values(r["data/giteeTokensBySub"]),...Object.values(r["data/githubTokensBySub"])],(e=>e.isLogin?e:null)),syncToken:(e,{currentWorkspace:t,mainWorkspaceToken:n},r,i)=>{switch(t.providerId){case"googleDriveWorkspace":return i["data/googleTokensBySub"][t.sub];case"githubWorkspace":return i["data/githubTokensBySub"][t.sub];case"giteeWorkspace":return i["data/giteeTokensBySub"][t.sub];case"gitlabWorkspace":return i["data/gitlabTokensBySub"][t.sub];case"giteaWorkspace":return i["data/giteaTokensBySub"][t.sub];case"couchdbWorkspace":return i["data/couchdbTokensBySub"][t.id];default:return n}},loginType:(e,{currentWorkspace:t})=>{switch(t.providerId){case"googleDriveWorkspace":return"google";case"githubAppData":case"githubWorkspace":return"github";case"giteeAppData":case"giteeWorkspace":default:return"gitee";case"gitlabWorkspace":return"gitlab";case"giteaWorkspace":return"gitea"}},loginToken:(e,{loginType:t,currentWorkspace:n},r,i)=>{const o=i["data/tokensByType"][t];return o&&o[n.sub]},sponsorToken:(e,{mainWorkspaceToken:t})=>t},actions:{removeWorkspace:({commit:e,rootGetters:t},n)=>{const r={...t["data/workspaces"]};delete r[n],e("data/setItem",{id:"workspaces",data:r},{root:!0})},patchWorkspacesById:({commit:e,rootGetters:t},n)=>{const r={};Object.entries({...t["data/workspaces"],...n}).forEach((([e,t])=>{r[e]={...t,id:e,
// Do not store urls
url:void 0,locationUrl:void 0}})),e("data/setItem",{id:"workspaces",data:r},{root:!0})},setCurrentWorkspaceId:({commit:e,getters:t},n)=>{e("setCurrentWorkspaceId",n);e("setLastFocus",parseInt(localStorage.getItem(t.lastFocusKey),10)||0)}}},uH="img/workspaceImgPath",hH={namespaced:!0,state:{
// ID
currImgId:null,
// 
checkedStorage:{type:"workspace",
//  token  tokenRepo workspace
provider:null,
// 
sub:"/imgs/{YYYY}-{MM}-{DD}",
//  token sub
sid:null},
//  key path value true
workspaceImagePath:{"/imgs/{YYYY}-{MM}-{DD}":!0}},mutations:{setCurrImgId:(e,t)=>{e.currImgId=t},clearCurrImg:e=>{e.currImg=null},changeCheckedStorage:(e,t)=>{e.checkedStorage=t?{type:t.type,
//  token  tokenRepo
provider:t.provider,
// 
sub:t.sub,
//  token sub
sid:t.sid}:{type:null,
//  token  tokenRepo
provider:null,
// 
sub:null,
//  token sub
sid:null}},setWorkspaceImgPath:(e,t)=>{e.workspaceImagePath=t,localStorage.setItem(uH,JSON.stringify(e.workspaceImagePath))},addWorkspaceImgPath:(e,t)=>{e.workspaceImagePath[t]=!0,e.workspaceImagePath=UL.deepCopy(e.workspaceImagePath),localStorage.setItem(uH,JSON.stringify(e.workspaceImagePath))},removeWorkspaceImgPath:(e,t)=>{delete e.workspaceImagePath[t],e.workspaceImagePath=UL.deepCopy(e.workspaceImagePath),localStorage.setItem(uH,JSON.stringify(e.workspaceImagePath))}},getters:{currImgId:e=>e.currImgId,getCheckedStorage:e=>e.checkedStorage,getCheckedStorageSub:e=>e.checkedStorage.sub,getWorkspaceImgPath:e=>e.workspaceImagePath},actions:{setCurrImgId({commit:e},t){e("setCurrImgId",t)},clearImg({commit:e}){e("clearCurrImg")},changeCheckedStorage({commit:e},t){e("changeCheckedStorage",t),localStorage.setItem("img/checkedStorage",JSON.stringify(t))},setWorkspaceImgPath({commit:e},t){e("setWorkspaceImgPath",t)},addWorkspaceImgPath({commit:e},t){e("addWorkspaceImgPath",t)},removeWorkspaceImgPath({commit:e},t){e("removeWorkspaceImgPath",t)}}},dH="theme/currEditTheme",pH="theme/customEditThemeStyle",fH="theme/currPreviewTheme",mH="theme/customPreviewThemeStyle",gH={namespaced:!0,state:{
// 
currEditTheme:"",customEditThemeStyle:null,
// 
currPreviewTheme:"",customPreviewThemeStyle:null},mutations:{setEditTheme:(e,t)=>{e.currEditTheme=t},setCustomEditThemeStyle:(e,t)=>{e.customEditThemeStyle=t},setPreviewTheme:(e,t)=>{e.currPreviewTheme=t},setCustomPreviewThemeStyle:(e,t)=>{e.customPreviewThemeStyle=t}},getters:{currEditTheme:e=>e.currEditTheme,customEditThemeStyle:e=>e.customEditThemeStyle,currPreviewTheme:e=>e.currPreviewTheme,customPreviewThemeStyle:e=>e.customPreviewThemeStyle},actions:{async setEditTheme({commit:e},t){if(!t||"default"===t)return e("setEditTheme",t),void localStorage.setItem(dH,t);if(document.getElementById(`edit-theme-${t}`))return e("setEditTheme",t),void localStorage.setItem(dH,t);if("custom"===t){const n=document.createElement("style");return n.id=`edit-theme-${t}`,n.type="text/css",n.innerHTML=localStorage.getItem(pH)||"",e("setCustomEditThemeStyle",n.innerHTML),document.head.appendChild(n),e("setEditTheme",t),void localStorage.setItem(dH,t)}const n=document.createElement("script");let r;try{await new Promise(((i,o)=>{n.onload=i,n.onerror=o,n.src=`/themes/edit-theme-${t}.js`;try{document.head.appendChild(n),r=setTimeout(o,30),e("setEditTheme",t),localStorage.setItem(dH,t)}catch(i7){o(i7)}}))}finally{clearTimeout(r),document.head.removeChild(n)}},setCustomEditThemeStyle({commit:e},t){e("setCustomEditThemeStyle",t),localStorage.setItem(pH,t)},async setPreviewTheme({commit:e},t){if(!t||"default"===t)return e("setPreviewTheme",t),void localStorage.setItem(fH,t);if(document.getElementById(`preview-theme-${t}`))return e("setPreviewTheme",t),void localStorage.setItem(fH,t);if("custom"===t){const n=document.createElement("style");return n.id=`preview-theme-${t}`,n.type="text/css",n.innerHTML=localStorage.getItem(mH)||"",e("setCustomPreviewThemeStyle",n.innerHTML),document.head.appendChild(n),e("setPreviewTheme",t),void localStorage.setItem(fH,t)}const n=document.createElement("script");let r;try{await new Promise(((i,o)=>{n.onload=i,n.onerror=o,n.src=`/themes/preview-theme-${t}.js`;try{document.head.appendChild(n),r=setTimeout(o,30),e("setPreviewTheme",t),localStorage.setItem(fH,t)}catch(i7){o(i7)}}))}finally{clearTimeout(r),document.head.removeChild(n)}},setCustomPreviewThemeStyle({commit:e},t){e("setCustomPreviewThemeStyle",t),localStorage.setItem(mH,t)}}},vH=(e,t)=>{const n=e[t.fileId];n?n.push(t):e[t.fileId]=[t]},yH=e=>{const t=RM(e);return t.getters={...t.getters,groupedByFileId:(e,{items:t})=>{const n={};return t.forEach((e=>vH(n,e))),n},groupedByFileIdAndHash:(e,{items:t})=>{const n={};return t.forEach((e=>{let t=n[e.fileId];t||(t={},n[e.fileId]=t);const r=t[e.hash];r?r.push(e):t[e.hash]=[e]})),n},filteredGroupedByFileId:(e,{items:t})=>{const n={};return t.filter((e=>{const t=GN.providersById[e.providerId];return t&&t.getToken(e)})).forEach((e=>vH(n,e))),n},current:(e,{filteredGroupedByFileId:t},n,r)=>(t[r["file/current"].id]||[]).map((e=>{const t=GN.providersById[e.providerId];return{...e,description:UL.sanitizeName(t.getLocationDescription(e)),url:t.getLocationUrl(e)}})),currentWithWorkspaceSyncLocation:(e,{current:t},n,r)=>{const i=r["file/current"].id,o=r["data/syncDataByItemId"][i],a=r["data/syncDataByItemId"][`${i}/content`];if(!o||!a)return t;const s=GN.providersById[r["workspace/currentWorkspace"].providerId];return[{id:"main",providerId:s.id,fileId:i,description:UL.sanitizeName(s.getSyncDataDescription(o,a)),url:s.getSyncDataUrl(o,a)},...t]}},t},bH={namespaced:!0,state:{config:{apiKey:null}},mutations:{setCurrConfig:(e,t)=>{e.config=t}},getters:{chatGptConfig:e=>e.config},actions:{setCurrConfig({commit:e},t){e("setCurrConfig",t),localStorage.setItem("chatgpt/config",JSON.stringify(t))}}},_H=(wH={modules:{content:NF,contentState:zF,contextMenu:qF,data:rO,discussion:MU,explorer:HU,file:WU,findReplace:GU,folder:VU,layout:eH,modal:tH,notification:nH,publishLocation:yH(((e=null)=>({id:e,type:"publishLocation",providerId:null,fileId:null,templateId:null,hash:0}))),queue:oH,syncedContent:sH,syncLocation:yH(((e=null)=>({id:e,type:"syncLocation",providerId:null,fileId:null,hash:0}))),userInfo:lH,workspace:cH,img:hH,theme:gH,chatgpt:bH},state:{light:!1,offline:!1,lastOfflineCheck:0,timeCounter:0},mutations:{setLight:(e,t)=>{e.light=t},setOffline:(e,t)=>{e.offline=t},updateLastOfflineCheck:e=>{e.lastOfflineCheck=Date.now()},updateTimeCounter:e=>{e.timeCounter+=1}},getters:{allItemsById:e=>{const t={};return ML.types.forEach((n=>Object.assign(t,e[n].itemsById))),t},pathsByItemId:(e,t)=>{const n={},r=(e,t="")=>{let i=t;e.item.id&&(i+=e.item.name,e.isTrash?i=".stackedit-trash/":e.isFolder&&(i+="/"),n[e.item.id]=i),e.isFolder&&(e.folders.forEach((e=>r(e,i))),e.files.forEach((e=>r(e,i))))};return r(t["explorer/rootNode"]),n},itemsByPath:(e,{allItemsById:t,pathsByItemId:n})=>{const r={};return Object.entries(n).forEach((([e,n])=>{const i=r[n]||[];i.push(t[e]),r[n]=i})),r},gitPathsByItemId:(e,{allItemsById:t,pathsByItemId:n})=>{const r={};return Object.entries(t).forEach((([e,t])=>{if("data"===t.type)r[e]=`.stackedit-data/${e}.json`;else if("file"===t.type){const t=n[e];r[e]=`${t}.md`,r[`${e}/content`]=`/${t}.md`}else if("content"===t.type){const[t]=e.split("/"),i=n[t];r[t]=`${i}.md`,r[e]=`/${i}.md`}else if("folder"===t.type)r[e]=n[e];else if("syncLocation"===t.type||"publishLocation"===t.type){const i=UL.encodeBase64(UL.serializeObject({...t,id:void 0,type:void 0,fileId:void 0,hash:void 0}),!0),o="syncLocation"===t.type?"sync":"publish",a=n[t.fileId];a&&(r[e]=`${a}.${i}.${o}`)}})),r},itemIdsByGitPath:(e,{gitPathsByItemId:t})=>{const n={};return Object.entries(t).forEach((([e,t])=>{n[t]=e})),n},itemsByGitPath:(e,{allItemsById:t,gitPathsByItemId:n})=>{const r={};return Object.entries(n).forEach((([e,n])=>{const i=t[e];i&&(r[n]=i)})),r},isSponsor:({light:e},t)=>{if(e)return!0;if(!t["data/serverConf"].allowSponsorship)return!0;const n=t["workspace/sponsorToken"];return!!n&&n.isSponsor}},actions:{setOffline:({state:e,commit:t,dispatch:n},r)=>{if(e.offline!==r){if(t("setOffline",r),e.offline)return Promise.reject(new Error("You are offline."));n("notification/info","You are back online!")}return Promise.resolve()}},strict:!1,plugins:[]},new EM(wH));var wH;setInterval((()=>{_H.commit("updateTimeCounter")}),3e4),KL.prototype.stopCallback=()=>_H.getters["modal/config"];const kH=e=>()=>(iU.pagedownEditor.uiManager.doClick(e),!0),xH=e=>()=>(_H.dispatch("findReplace/open",{type:e,findText:iU.clEditor.selectionMgr.hasFocus()&&iU.clEditor.selectionMgr.getSelectedText()}),!0),CH=["toggleeditor"],SH={bold:kH("bold"),italic:kH("italic"),strikethrough:kH("strikethrough"),link:kH("link"),quote:kH("quote"),code:kH("code"),image:kH("image"),chatgpt:kH("chatgpt"),olist:kH("olist"),ulist:kH("ulist"),clist:kH("clist"),heading:kH("heading"),inline:kH("heading"),hr:kH("hr"),inlineformula:kH("inlineformula"),toggleeditor:()=>(_H.dispatch("data/toggleEditor",!_H.getters["data/layoutSettings"].showEditor),!0),sync:()=>(BU.isSyncPossible()&&BU.requestSync(),!0),find:xH("find"),replace:xH("replace"),expand(e,t){const n=`${e||""}`,r=`${t||""}`;n&&r&&setTimeout((()=>{const{selectionMgr:e}=iU.clEditor;let t=e.selectionStart;if(t===e.selectionEnd){const i=e.createRange(t-n.length,t);`${i}`===n&&(i.deleteContents(),i.insertNode(document.createTextNode(r)),t=t-n.length+r.length,e.setSelectionStartEnd(t,t),e.updateCursorCoordinates(!0))}}),1)}};_H.watch((()=>({computedSettings:_H.getters["data/computedSettings"],isCurrentEditable:_H.getters["content/isCurrentEditable"]})),(({computedSettings:e,isCurrentEditable:t})=>{KL.reset(),Object.entries(e.shortcuts).forEach((([e,n])=>{if(n){const r=`${n.method||n}`;let i=n.params||[];if(Array.isArray(i)||(i=[i]),Object.prototype.hasOwnProperty.call(SH,r))try{(t||-1!==CH.indexOf(r))&&KL.bind(`${e}`,(()=>!SH[r].apply(null,i)))}catch(i7){}}}))}),{immediate:!0});const{Keystroke:TH}=SF,EH=/^ {0,3}>[ ]*|^[ \t]*[*+-][ \t](?:\[[ xX]\][ \t])?|^([ \t]*)\d+\.[ \t](?:\[[ xX]\][ \t])?|^\s+/;let IH,AH,DH,BH,LH,MH,FH,OH,PH,NH,jH;function zH(e,t){if(e.selection||void 0===t||!_H.getters["data/computedSettings"].editor.listAutoNumber)return;const n=t.replace(/\t/g,"    "),r=new RegExp(`^[ \\s]*$|^${n}(\\d+\\.[ \\t])?(( )?.*)$`);function i(e){let t=[],n=[];function i(){return!(!n.hasHit&&n.hasNoIndent)&&(t=t.concat(n),n=[],!0)}return e.some((e=>{const t=e.replace(/^[ \t]*/,(e=>e.replace(/\t/g,"    "))).match(r);if(!t||e.match(/^#+ /))return i(),!0;if(n.push({line:e,match:t}),void 0!==t[2])t[1]?n.hasHit=!0:t[3]||(n.hasNoIndent=!0);else if(!i())return!0;return!1})),t}function o(e){let n;return e.map((e=>{if(e.match[1]){n||(n=parseInt(e.match[1],10));const r=t+n+e.match[1].slice(-2)+e.match[2];return n+=1,r}return e.line}))}const a=e.before.split("\n");a.unshift("");const s=e.after.split("\n");let l=a.pop()||"";const c=l.length;l+=s.shift()||"";let u=a.concat(l).concat(s),h=a.length-i(a.slice().reverse()).length;for(;h<=a.length+1;){const e=o(i(u.slice(h)));e.length?(u=u.slice(0,h).concat(e).concat(u.slice(h+e.length)),h+=e.length):h+=1}l=u[a.length],e.before=u.slice(1,a.length),e.before.push(l.slice(0,c)),e.before=e.before.join("\n"),e.after=[l.slice(c)].concat(u.slice(a.length+1)),e.after=e.after.join("\n")}function RH(e,t){if(13!==e.which)return IH=!1,!1;e.preventDefault();const n=t.before.lastIndexOf("\n")+1,r=t.before.slice(n).match(EH)||[""];if(IH&&!t.selection&&t.before.length===AH)return t.before=t.before.substring(0,n),t.selection="",IH=!1,zH(t,r[1]),!0;IH=!1;const i=r[0];return i.length&&(IH=!0),iU.clEditor.undoMgr.setCurrentMode("single"),t.before+=`\n${i}`,t.selection="",AH=t.before.length,zH(t,r[1]),!0}function qH(e,t){if(9!==e.which||e.metaKey||e.ctrlKey)return!1;const n=(e,t,n,r)=>e.slice(0,t)+(r||"")+e.slice(t+(+n||0));e.preventDefault();const r=e.shiftKey,i=t.before.lastIndexOf("\n")+1,o=t.before.slice(i),a=(o+t.selection+t.after).match(EH);if(r){const e=t.before.slice(-1);/\s/.test(t.before.charAt(i))&&(t.before=n(t.before,i,1),a&&(zH(t,a[1]),a[1]&&zH(t,a[1].slice(1))));const r=e+t.selection;t.selection=r.replace(/\n[ \t]/gm,"\n"),e&&(t.selection=t.selection.slice(1))}else
// If selection is not empty
t.selection||a&&a[0].length>=o.length?(t.before=n(t.before,i,0,"\t"),t.selection=t.selection.replace(/\n(?=.)/g,"\n\t"),a&&(zH(t,a[1]),zH(t,`\t${a[1]}`))):t.before+="\t";return!0}iU.on("inited",(()=>{iU.clEditor.addKeystroke(new TH(RH,50)),iU.clEditor.addKeystroke(new TH(qH,50))}));let $H,UH=[],HH=0;function WH(e,t){clearTimeout($H);const n=Date.now(),r=t+HH-n;r<1?(HH=n,e()):$H=setTimeout((()=>{HH=Date.now(),e()}),r)}const GH=()=>{const e=FH||!_H.getters["layout/styles"].showSidePreview;if(FH=!1,!_H.getters["data/layoutSettings"].scrollSync||0===UH.length)return;let t=DH.scrollTop;t<0&&(t=0);const n=BH.scrollTop;let r;OH?(OH=!1,UH.some((e=>{if(t>e.editorDimension.endOffset)return!1;const n=(t-e.editorDimension.startOffset)/(e.editorDimension.height||1);return r=e.previewDimension.startOffset+e.previewDimension.height*n,!0})),r=Math.min(r,BH.scrollHeight-BH.offsetHeight),WH((()=>{clearTimeout(MH),Y$.animate(BH).scrollTop(r).duration(!e&&100).start((()=>{MH=setTimeout((()=>{jH=!1}),100)}),(()=>{jH=!0}))}),e?500:50)):_H.getters["layout/styles"].showEditor&&!PH||(PH=!1,UH.some((e=>{if(n>e.previewDimension.endOffset)return!1;const t=(n-e.previewDimension.startOffset)/(e.previewDimension.height||1);return r=e.editorDimension.startOffset+e.editorDimension.height*t,!0})),r=Math.min(r,DH.scrollHeight-DH.offsetHeight),WH((()=>{clearTimeout(LH),Y$.animate(DH).scrollTop(r).duration(!e&&100).start((()=>{LH=setTimeout((()=>{NH=!1}),100)}),(()=>{NH=!0}))}),e?500:50))};let VH,YH;const KH=()=>{VH||GH()};_H.watch((()=>_H.getters["data/layoutSettings"].scrollSync),KH),iU.on("inited",(()=>{DH=iU.editorElt.parentNode,BH=iU.previewElt.parentNode,DH.addEventListener("scroll",(()=>{NH||(OH=!0,PH=!1,GH())})),BH.addEventListener("scroll",(()=>{jH||VH||(PH=!0,OH=!1,GH())}))})),iU.on("sectionList",(()=>{clearTimeout(YH),VH=!0,UH=[]})),iU.on("previewCtx",(()=>{OH=_H.getters["layout/styles"].showEditor,YH=setTimeout((()=>{VH=!1}),100)})),_H.watch((()=>_H.getters["layout/styles"].showEditor),(e=>{OH=e,PH=!e,FH=!0})),_H.watch((()=>_H.getters["file/current"].id),(()=>{FH=!0})),iU.on("previewCtxMeasured",(e=>{e&&(({sectionDescList:UH}=e),KH())})),iU.on("inited",(()=>{const e=t=>{let n=0;if(!t||t===iU.previewElt)return n;let{previousSibling:r}=t;for(;r;)n+=r.textContent.length,({previousSibling:r}=r);return n+e(t.parentNode)};iU.previewElt.addEventListener("click",(t=>{if(t.target.classList.contains("task-list-item-checkbox")&&(t.preventDefault(),_H.getters["content/isCurrentEditable"])){const n=iU.clEditor.getContent();setTimeout((()=>{if(n===iU.clEditor.getContent()){const r=e(t.target),i=iU.getEditorOffset(r+1);if(null!=i){const e=n.lastIndexOf("\n",i)+1,r=n.slice(e,i).match(/^([ \t]*(?:[*+-]|\d+\.)[ \t]+\[)[ xX](\] .*)/);if(r){let o=n.slice(0,e);o+=r[1],o+=t.target.checked?" ":"x",o+=r[2],o+=n.slice(i),iU.clEditor.setContent(o,!0)}}}}),10)}}))}));const XH=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const ZH={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const JH={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const QH={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const eW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const tW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const nW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const rW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const iW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const oW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const aW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const sW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const lW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const cW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const uW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const hW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const dW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const pW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"-2 -2 26 26"};const fW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const mW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const gW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const vW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const yW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const bW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const _W={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const wW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const kW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const xW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const CW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const SW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const TW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const EW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const IW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const AW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const DW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const BW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const LW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"2 2 20 20"};const MW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const FW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const OW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const PW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const NW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const jW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const zW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const RW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const qW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const $W={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const UW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const HW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const WW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const GW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const VW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const YW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const KW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const XW={t:"1656481179782",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1901",width:"32",height:"32"};const ZW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const JW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const QW={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 24 24"};const eG={xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"1 1 23 23"};const tG={t:"1659766631486",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2235",width:"32",height:"32"};const nG={t:"1664775684106",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6828",width:"32",height:"32"};const rG={t:"1664799557150",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8995",width:"32",height:"32"};const iG={t:"1664776491043",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7365",width:"32",height:"32"};const oG={t:"1669462755056",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6069",width:"32",height:"32"};const aG={t:"1669464773854",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8666",width:"32",height:"32"};const sG={t:"1680140298859",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2766",width:"32",height:"32"};const lG={class:"icon",width:"24px",height:"24px",viewBox:"140 140 520 520"};const cG={iconProvider:XH({props:["providerId"],computed:{classState(){switch(this.providerId){case"googleDrive":case"googleDriveWorkspace":return"google-drive";case"googlePhotos":return"google-photos";case"githubAppData":case"githubWorkspace":case"gist":return"github";case"gitlabWorkspace":return"gitlab";case"giteaWorkspace":return"gitea";case"bloggerPage":return"blogger";case"couchdbWorkspace":return"couchdb";case"giteeAppData":case"giteeWorkspace":case"giteegist":return"gitee";case"stackedit":return"stackedit";default:return this.providerId}}}},[["render",function(e,t,n,r,i,o){const a=wn("icon-sync-off");return $r(),Gr("div",{class:W(["icon-provider","icon-provider--"+o.classState])},[o.classState?ri("",!0):($r(),Vr(a,{key:0}))],2)}]]),iconFormatBold:XH({},[["render",function(e,t){return $r(),Gr("svg",ZH,t[0]||(t[0]=[Jr("path",{d:"M13.35,17.401l-4.201,0l0,-3.601l4.201,0c0.997,0 1.801,0.805 1.801,1.801c0,0.996 -0.804,1.8 -1.801,1.8m-4.201,-10.802l3.601,0c0.996,0 1.801,0.804 1.801,1.8c0,0.996 -0.805,1.801 -1.801,1.801l-3.601,0m6.722,1.548c1.164,-0.816 1.98,-2.149 1.98,-3.349c0,-2.712 -2.1,-4.801 -4.801,-4.801l-7.502,0l0,16.804l8.45,0c2.521,0 4.454,-2.04 4.454,-4.549c0,-1.825 -1.033,-3.385 -2.581,-4.105Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconFormatItalic:XH({},[["render",function(e,t){return $r(),Gr("svg",JH,t[0]||(t[0]=[Jr("path",{d:"M8.617,3.658l0,3.575l2.633,0l-2.075,9.534l-3.325,0l0,3.575l9.533,0l0,-3.575l-2.633,0l2.075,-9.534l3.325,0l0,-3.575l-9.533,0Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconFormatQuoteClose:XH({},[["render",function(e,t){return $r(),Gr("svg",QH,t[0]||(t[0]=[Jr("path",{d:"M14.446,18.235l2.92,0l1.946,-4.988l0,-7.482l-5.839,0l0,7.482l2.92,0m-10.732,4.988l2.919,0l1.947,-4.988l0,-7.482l-5.839,0l0,7.482l2.919,0l-1.946,4.988Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconLinkVariant:XH({},[["render",function(e,t){return $r(),Gr("svg",eW,t[0]||(t[0]=[Jr("path",{d:"M 10.5858,13.4142C 10.9763,13.8047 10.9763,14.4379 10.5858,14.8284C 10.1952,15.2189 9.56207,15.2189 9.17154,14.8284C 7.21892,12.8758 7.21892,9.70995 9.17154,7.75733L 9.17157,7.75736L 12.707,4.2219C 14.6596,2.26928 17.8255,2.26929 19.7781,4.2219C 21.7307,6.17452 21.7307,9.34034 19.7781,11.293L 18.2925,12.7785C 18.3008,11.9583 18.1659,11.1368 17.8876,10.355L 18.3639,9.87865C 19.5355,8.70708 19.5355,6.80759 18.3639,5.63602C 17.1923,4.46445 15.2929,4.46445 14.1213,5.63602L 10.5858,9.17155C 9.41419,10.3431 9.41419,12.2426 10.5858,13.4142 Z M 13.4142,9.17155C 13.8047,8.78103 14.4379,8.78103 14.8284,9.17155C 16.781,11.1242 16.781,14.29 14.8284,16.2426L 14.8284,16.2426L 11.2929,19.7782C 9.34026,21.7308 6.17444,21.7308 4.22182,19.7782C 2.26921,17.8255 2.2692,14.6597 4.22182,12.7071L 5.70744,11.2215C 5.69913,12.0417 5.8341,12.8631 6.11234,13.645L 5.63601,14.1213C 4.46444,15.2929 4.46444,17.1924 5.63601,18.3639C 6.80758,19.5355 8.70708,19.5355 9.87865,18.3639L 13.4142,14.8284C 14.5858,13.6568 14.5858,11.7573 13.4142,10.5858C 13.0237,10.1952 13.0237,9.56207 13.4142,9.17155 Z "},null,-1)]))}]]),iconFileImage:XH({},[["render",function(e,t){return $r(),Gr("svg",tW,t[0]||(t[0]=[Jr("path",{d:"M 12.9994,8.99807L 18.4994,8.99807L 12.9994,3.49807L 12.9994,8.99807 Z M 5.99938,1.99809L 13.9994,1.99809L 19.9994,7.99808L 19.9994,19.9981C 19.9994,21.1021 19.1034,21.9981 17.9994,21.9981L 5.98937,21.9981C 4.88537,21.9981 3.99939,21.1021 3.99939,19.9981L 4.0094,3.99808C 4.0094,2.89407 4.89437,1.99809 5.99938,1.99809 Z M 6,20L 15,20L 18,20L 18,12L 14,16L 12,14L 6,20 Z M 8,9C 6.89543,9 6,9.89543 6,11C 6,12.1046 6.89543,13 8,13C 9.10457,13 10,12.1046 10,11C 10,9.89543 9.10457,9 8,9 Z "},null,-1)]))}]]),iconTable:XH({},[["render",function(e,t){return $r(),Gr("svg",nW,t[0]||(t[0]=[Jr("path",{d:"M 5,4L 19,4C 20.1046,4 21,4.89543 21,6L 21,18C 21,19.1046 20.1046,20 19,20L 5,20C 3.89543,20 3,19.1046 3,18L 3,6C 3,4.89543 3.89543,4 5,4 Z M 5,8L 5,12L 11,12L 11,8L 5,8 Z M 13,8L 13,12L 19,12L 19,8L 13,8 Z M 5,14L 5,18L 11,18L 11,14L 5,14 Z M 13,14L 13,18L 19,18L 19,14L 13,14 Z "},null,-1)]))}]]),iconFormatListNumbers:XH({},[["render",function(e,t){return $r(),Gr("svg",rW,t[0]||(t[0]=[Jr("path",{d:"M7.235,13.059l14.825,0l0,-2.118l-14.825,0m0,8.471l14.825,0l0,-2.117l-14.825,0m0,-10.59l14.825,0l0,-2.117l-14.825,0m-5.295,6.353l1.906,0l-1.906,2.224l0,0.953l3.177,0l0,-1.059l-1.906,0l1.906,-2.224l0,-0.953l-3.177,0m1.059,-2.118l1.059,0l0,-4.235l-2.118,0l0,1.059l1.059,0m-1.059,12.707l2.118,0l0,0.529l-1.059,0l0,1.059l1.059,0l0,0.529l-2.118,0l0,1.059l3.177,0l0,-4.235l-3.177,0l0,1.059Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconFormatListBulleted:XH({},[["render",function(e,t){return $r(),Gr("svg",iW,t[0]||(t[0]=[Jr("path",{d:"M7.043,4.695l14.61,0l0,2.087l-14.61,0l0,-2.087m0,8.349l0,-2.088l14.61,0l0,2.088l-14.61,0m-3.131,-8.871c0.866,0 1.566,0.699 1.566,1.565c0,0.867 -0.7,1.566 -1.566,1.566c-0.866,0 -1.565,-0.699 -1.565,-1.566c0,-0.866 0.699,-1.565 1.565,-1.565m0,6.262c0.866,0 1.566,0.699 1.566,1.565c0,0.866 -0.7,1.565 -1.566,1.565c-0.866,0 -1.565,-0.699 -1.565,-1.565c0,-0.866 0.699,-1.565 1.565,-1.565m3.131,8.87l0,-2.087l14.61,0l0,2.087l-14.61,0m-3.131,-2.609c0.866,0 1.566,0.699 1.566,1.566c0,0.866 -0.7,1.565 -1.566,1.565c-0.866,0 -1.565,-0.699 -1.565,-1.565c0,-0.867 0.699,-1.566 1.565,-1.566Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconFormatSize:XH({},[["render",function(e,t){return $r(),Gr("svg",oW,t[0]||(t[0]=[Jr("path",{d:"M2.007,12.526l3.156,0l0,7.363l3.155,0l0,-7.363l3.156,0l0,-3.156l-9.467,0m6.311,-5.259l0,3.155l5.26,0l0,12.623l3.156,0l0,-12.623l5.259,0l0,-3.155l-13.675,0Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconFormatStrikethrough:XH({},[["render",function(e,t){return $r(),Gr("svg",aW,t[0]||(t[0]=[Jr("path",{d:"M20.874,12.059l0,1.729l-3.541,0c0.806,1.851 0.766,6.918 -5.026,6.918c-6.721,0.043 -6.463,-5.621 -6.463,-5.621l3.203,0.044c0.024,2.914 2.55,2.914 3.05,2.879c0.516,-0.043 2.444,-0.034 2.598,-2.058c0.064,-0.942 -0.823,-1.66 -1.791,-2.162l-9.778,0l0,-1.729l17.748,0m-2.896,-3.554l-3.211,-0.026c0,0 0.137,-2.395 -2.646,-2.404c-2.783,-0.017 -2.541,1.902 -2.541,2.144c0.032,0.243 0.274,1.436 2.42,2.007l-5.074,0c0,0 -2.816,-5.82 4.057,-6.814c7.027,-1.038 7.011,5.11 6.995,5.093Z",style:{"fill-rule":"nonzero"}},null,-1)]))}]]),iconStatusBar:XH({},[["render",function(e,t){return $r(),Gr("svg",sW,t[0]||(t[0]=[Jr("path",{d:"M19,15.023l-14,0l0,-10l14,0m0,-2l-14,0c-1.104,0 -2,0.896 -2,2l0,10c0,1.105 0.896,2 2,2l14,0c1.105,0 2,-0.895 2,-2l0,-10c0,-1.104 -0.895,-2 -2,-2Z"},null,-1),Jr("rect",{x:"3",y:"18.977",width:"18",height:"2"},null,-1)]))}]]),iconNavigationBar:XH({},[["render",function(e,t){return $r(),Gr("svg",lW,t[0]||(t[0]=[Jr("path",{d:"M19,8.977l-14,0l0,10l14,0m0,2l-14,0c-1.104,0 -2,-0.896 -2,-2l0,-10c0,-1.105 0.896,-2 2,-2l14,0c1.105,0 2,0.895 2,2l0,10c0,1.104 -0.895,2 -2,2Z"},null,-1),Jr("rect",{x:"3",y:"3.023",width:"18",height:"2"},null,-1)]))}]]),iconSidePreview:XH({},[["render",function(e,t){return $r(),Gr("svg",cW,t[0]||(t[0]=[Jr("path",{d:"M11,20.977l-6,0c-1.104,0 -2,-0.896 -2,-2l0,-14c0,-1.105 0.896,-2 2,-2l14,0c1.105,0 2,0.895 2,2l0,14c0,1.104 -0.895,2 -2,2l-6,0l0,0.023l-2,0l0,-0.023Zm0,-2l0,-14l-6,0l0,14l6,0Zm8,-14l-6,0l0,14l6,0l0,-14Z"},null,-1)]))}]]),iconEye:XH({},[["render",function(e,t){return $r(),Gr("svg",uW,t[0]||(t[0]=[Jr("path",{d:"M 11.9994,8.99813C 10.3424,8.99813 8.99941,10.3411 8.99941,11.9981C 8.99941,13.6551 10.3424,14.9981 11.9994,14.9981C 13.6564,14.9981 14.9994,13.6551 14.9994,11.9981C 14.9994,10.3411 13.6564,8.99813 11.9994,8.99813 Z M 11.9994,16.9981C 9.23841,16.9981 6.99941,14.7591 6.99941,11.9981C 6.99941,9.23714 9.23841,6.99813 11.9994,6.99813C 14.7604,6.99813 16.9994,9.23714 16.9994,11.9981C 16.9994,14.7591 14.7604,16.9981 11.9994,16.9981 Z M 11.9994,4.49813C 6.99741,4.49813 2.72741,7.60915 0.99941,11.9981C 2.72741,16.3871 6.99741,19.4981 11.9994,19.4981C 17.0024,19.4981 21.2714,16.3871 22.9994,11.9981C 21.2714,7.60915 17.0024,4.49813 11.9994,4.49813 Z "},null,-1)]))}]]),iconSettings:XH({},[["render",function(e,t){return $r(),Gr("svg",hW,t[0]||(t[0]=[Jr("path",{d:"M 11.9994,15.498C 10.0664,15.498 8.49939,13.931 8.49939,11.998C 8.49939,10.0651 10.0664,8.49805 11.9994,8.49805C 13.9324,8.49805 15.4994,10.0651 15.4994,11.998C 15.4994,13.931 13.9324,15.498 11.9994,15.498 Z M 19.4284,12.9741C 19.4704,12.6531 19.4984,12.329 19.4984,11.998C 19.4984,11.6671 19.4704,11.343 19.4284,11.022L 21.5414,9.36804C 21.7294,9.21606 21.7844,8.94604 21.6594,8.73004L 19.6594,5.26605C 19.5354,5.05005 19.2734,4.96204 19.0474,5.04907L 16.5584,6.05206C 16.0424,5.65607 15.4774,5.32104 14.8684,5.06903L 14.4934,2.41907C 14.4554,2.18103 14.2484,1.99805 13.9994,1.99805L 9.99939,1.99805C 9.74939,1.99805 9.5434,2.18103 9.5054,2.41907L 9.1304,5.06805C 8.52039,5.32104 7.95538,5.65607 7.43939,6.05206L 4.95139,5.04907C 4.7254,4.96204 4.46338,5.05005 4.33939,5.26605L 2.33939,8.73004C 2.21439,8.94604 2.26938,9.21606 2.4574,9.36804L 4.5694,11.022C 4.5274,11.342 4.49939,11.6671 4.49939,11.998C 4.49939,12.329 4.5274,12.6541 4.5694,12.9741L 2.4574,14.6271C 2.26938,14.78 2.21439,15.05 2.33939,15.2661L 4.33939,18.73C 4.46338,18.946 4.7254,19.0341 4.95139,18.947L 7.4404,17.944C 7.95639,18.34 8.52139,18.675 9.1304,18.9271L 9.5054,21.577C 9.5434,21.8151 9.74939,21.998 9.99939,21.998L 13.9994,21.998C 14.2484,21.998 14.4554,21.8151 14.4934,21.577L 14.8684,18.9271C 15.4764,18.6741 16.0414,18.34 16.5574,17.9431L 19.0474,18.947C 19.2734,19.0341 19.5354,18.946 19.6594,18.73L 21.6594,15.2661C 21.7844,15.05 21.7294,14.78 21.5414,14.6271L 19.4284,12.9741 Z "},null,-1)]))}]]),iconFilePlus:XH({},[["render",function(e,t){return $r(),Gr("svg",dW,t[0]||(t[0]=[Jr("path",{d:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20C20,21.1 19.1,22 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M11,15V12H9V15H6V17H9V20H11V17H14V15H11Z"},null,-1)]))}]]),iconFileMultiple:XH({},[["render",function(e,t){return $r(),Gr("svg",pW,t[0]||(t[0]=[Jr("path",{d:"M15,7H20.5L15,1.5V7M8,0H16L22,6V18C22,19.1 21.1,20 20,20H8C6.89,20 6,19.1 6,18V2C6,0.9 6.9,0 8,0M4,4V22H20V24H4C2.9,24 2,23.1 2,22V4H4Z"},null,-1)]))}]]),iconFileSearch:XH({},[["render",function(e,t){return $r(),Gr("svg",fW,t[0]||(t[0]=[Jr("path",{d:"M 13 9 H 18.5 L 13 3.5 V 9 M 6 2 H 14 L 20 8 V 20 C 20 21.1 19.1 22 18 22 H 6 C 4.89 22 4 21.1 4 20 V 4 C 4 2.89 4.89 2 6 2 M 13 16 A 4 4 0 1 0 12 17 L 16 21 L 17 20 L 13 16 M 7.3 13.8 A 2.5 2.5 0 1 0 12.3 13.8 A 2.5 2.5 0 1 0 7.3 13.8 Z"},null,-1)]))}]]),iconFolderPlus:XH({},[["render",function(e,t){return $r(),Gr("svg",mW,t[0]||(t[0]=[Jr("path",{d:"M10,4L12,6H20C21.1,6 22,6.9 22,8V18C22,19.1 21.1,20 20,20H4C2.89,20 2,19.1 2,18V6C2,4.89 2.89,4 4,4H10M15,9V12H12V14H15V17H17V14H20V12H17V9H15Z"},null,-1)]))}]]),iconDelete:XH({},[["render",function(e,t){return $r(),Gr("svg",gW,t[0]||(t[0]=[Jr("path",{d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19C6,20.1 6.9,21 8,21H16C17.1,21 18,20.1 18,19V7H6V19Z"},null,-1)]))}]]),iconClose:XH({},[["render",function(e,t){return $r(),Gr("svg",vW,t[0]||(t[0]=[Jr("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},null,-1)]))}]]),iconPen:XH({},[["render",function(e,t){return $r(),Gr("svg",yW,t[0]||(t[0]=[Jr("path",{d:"M 16.8363,2.73375C 16.45,2.73375 16.0688,2.88125 15.7712,3.17375L 13.6525,5.2925L 18.955,10.5962L 21.0737,8.47625C 21.665,7.89 21.665,6.94375 21.0737,6.3575L 17.895,3.17375C 17.6025,2.88125 17.2163,2.73375 16.8363,2.73375 Z M 12.9437,6.00125L 4.84375,14.1062L 7.4025,14.39L 7.57875,16.675L 9.85875,16.85L 10.1462,19.4088L 18.2475,11.3038M 4.2475,15.0437L 2.515,21.7337L 9.19875,19.9412L 8.955,17.7838L 6.645,17.6075L 6.465,15.2925"},null,-1)]))}]]),iconTarget:XH({},[["render",function(e,t){return $r(),Gr("svg",bW,t[0]||(t[0]=[Jr("path",{d:"M 11.0013,2.0025L 11.0013,4.0725C 7.3825,4.53125 4.53125,7.3825 4.0725,11.0012L 2.0025,11.0012L 2.0025,12.9975L 4.0725,12.9975C 4.53125,16.6213 7.3825,19.4675 11.0013,19.9262L 11.0013,22.0025L 12.9975,22.0025L 12.9975,19.9313C 16.6212,19.4675 19.4675,16.6213 19.9263,12.9975L 22.0025,12.9975L 22.0025,11.0012L 19.9312,11.0012C 19.4675,7.3825 16.6212,4.53125 12.9975,4.0725L 12.9975,2.0025M 11.0013,6.08375L 11.0013,7.9975L 12.9975,7.9975L 12.9975,6.08875C 15.5175,6.51375 17.485,8.48625 17.915,11.0012L 16.0012,11.0012L 16.0012,12.9975L 17.91,12.9975C 17.485,15.5175 15.5125,17.485 12.9975,17.915L 12.9975,16.0012L 11.0013,16.0012L 11.0013,17.91C 8.48625,17.485 6.51375,15.5125 6.08375,12.9975L 7.9975,12.9975L 7.9975,11.0012L 6.08875,11.0012C 6.51375,8.48625 8.48625,6.51375 11.0013,6.08375 Z M 12.0025,11.0012C 11.445,11.0012 11.0013,11.445 11.0013,12.0025C 11.0013,12.5538 11.445,12.9975 12.0025,12.9975C 12.5537,12.9975 12.9975,12.5538 12.9975,12.0025C 12.9975,11.445 12.5537,11.0012 12.0025,11.0012 Z "},null,-1)]))}]]),iconArrowLeft:XH({},[["render",function(e,t){return $r(),Gr("svg",_W,t[0]||(t[0]=[Jr("path",{d:"M 20,11L 20,13L 7.98958,13L 13.4948,18.5052L 12.0806,19.9194L 4.16116,12L 12.0806,4.08058L 13.4948,5.49479L 7.98958,11L 20,11 Z "},null,-1)]))}]]),iconHelpCircle:XH({},[["render",function(e,t){return $r(),Gr("svg",wW,t[0]||(t[0]=[Jr("path",{d:"M 15.0661,11.2518L 14.1711,12.1697C 13.4471,12.8937 12.9991,13.4977 12.9991,14.9977L 10.9991,14.9977L 10.9991,14.4977C 10.9991,13.3937 11.4471,12.3937 12.1711,11.6697L 13.4141,10.4117C 13.7751,10.0497 13.9991,9.54974 13.9991,8.99774C 13.9991,7.89374 13.1041,6.99774 11.9991,6.99774C 10.8951,6.99774 9.99908,7.89374 9.99908,8.99774L 7.99908,8.99774C 7.99908,6.78876 9.7901,4.99774 11.9991,4.99774C 14.2091,4.99774 15.9991,6.78876 15.9991,8.99774C 15.9991,9.87775 15.6431,10.6747 15.0661,11.2518 Z M 12.9991,18.9977L 10.9991,18.9977L 10.9991,16.9977L 12.9991,16.9977M 11.9991,1.99774C 6.4761,1.99774 1.99908,6.47473 1.99908,11.9977C 1.99908,17.5217 6.4761,21.9977 11.9991,21.9977C 17.5231,21.9977 21.9991,17.5217 21.9991,11.9977C 21.9991,6.47473 17.5231,1.99774 11.9991,1.99774 Z "},null,-1)]))}]]),iconToc:XH({},[["render",function(e,t){return $r(),Gr("svg",kW,t[0]||(t[0]=[Jr("path",{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"},null,-1)]))}]]),iconLogin:XH({},[["render",function(e,t){return $r(),Gr("svg",xW,t[0]||(t[0]=[Jr("path",{fill:"#000000","fill-opacity":"1","stroke-width":"0.2","stroke-linejoin":"round",d:"M 10,17.25L 10,14L 3.00002,14L 3.00002,10L 10,10L 10,6.75L 15.25,12L 10,17.25 Z M 7.99999,2.00003L 17,2.00005C 18.1045,2.00005 19,2.89546 19,4.00003L 19,20C 19,21.1046 18.1045,22 17,22L 7.99999,22C 6.89542,22 5.99999,21.1046 5.99999,20L 6,16L 7.99999,16L 7.99999,20L 17,20L 17,4.00003L 7.99999,4.00002L 7.99999,8.00001L 6,8.00001L 5.99999,4.00002C 5.99999,2.89545 6.89542,2.00003 7.99999,2.00003 Z "},null,-1)]))}]]),iconLogout:XH({},[["render",function(e,t){return $r(),Gr("svg",CW,t[0]||(t[0]=[Jr("path",{fill:"#000000","fill-opacity":"1","stroke-width":"0.2","stroke-linejoin":"round",d:"M 16.9999,17.25L 16.9999,14L 9.99998,14L 9.99998,10L 16.9999,10L 16.9999,6.75L 22.2499,12L 16.9999,17.25 Z M 13,2.00002C 14.1046,2.00002 15,2.89545 15,4.00002L 15,8L 13,8L 13,4.00002L 4,4.00004L 4,20L 13,20L 13,16L 15,16L 15,20C 15,21.1046 14.1046,22 13,22L 4,22C 2.89543,22 2,21.1046 2,20L 2,4.00004C 2,2.89547 2.89543,2.00006 4,2.00006L 13,2.00002 Z "},null,-1)]))}]]),iconSync:XH({},[["render",function(e,t){return $r(),Gr("svg",SW,t[0]||(t[0]=[Jr("path",{d:"M12,18C8.69,18 6,15.31 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12C4,16.42 7.58,20 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6C15.31,6 18,8.69 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12C20,7.58 16.42,4 12,4Z"},null,-1)]))}]]),iconSyncOff:XH({},[["render",function(e,t){return $r(),Gr("svg",TW,t[0]||(t[0]=[Jr("path",{d:"M20,4H14V10L16.24,7.76C17.32,8.85 18,10.34 18,12C18,13 17.75,13.94 17.32,14.77L18.78,16.23C19.55,15 20,13.56 20,12C20,9.79 19.09,7.8 17.64,6.36L20,4M2.86,5.41L5.22,7.77C4.45,9 4,10.44 4,12C4,14.21 4.91,16.2 6.36,17.64L4,20H10V14L7.76,16.24C6.68,15.15 6,13.66 6,12C6,11 6.25,10.06 6.68,9.23L14.76,17.31C14.5,17.44 14.26,17.56 14,17.65V19.74C14.79,19.53 15.54,19.2 16.22,18.78L18.58,21.14L19.85,19.87L4.14,4.14L2.86,5.41M10,6.35V4.26C9.2,4.47 8.45,4.8 7.77,5.22L9.23,6.68C9.5,6.56 9.73,6.44 10,6.35Z"},null,-1)]))}]]),iconSyncAuto:XH({},[["render",function(e,t){return $r(),Gr("svg",EW,t[0]||(t[0]=[Jr("path",{d:"M 12 18 C 8.69 18 6 15.31 6 12 C 6 11 6.25 10.03 6.7 9.2 L 5.24 7.74 C 4.46 8.97 4 10.43 4 12 C 4 16.42 7.58 20 12 20 V 23 L 16 19 L 12 15 M 12 4 V 1 L 8 5 L 12 9 V 6 C 15.31 6 18 8.69 18 12 C 18 13 17.75 13.97 17.3 14.8 L 18.76 16.26 C 19.54 15.03 20 13.57 20 12 C 20 7.58 16.42 4 12 4 Z M 11 8 L 11 13 L 16 13 L 16 11 L 13 11 L 13 8 L 11 8 Z"},null,-1)]))}]]),iconSyncStop:XH({},[["render",function(e,t){return $r(),Gr("svg",IW,t[0]||(t[0]=[Jr("path",{d:"M 12 18 C 8.69 18 6 15.31 6 12 C 6 11 6.25 10.03 6.7 9.2 L 5.24 7.74 C 4.46 8.97 4 10.43 4 12 C 4 16.42 7.58 20 12 20 V 23 L 16 19 L 12 15 M 12 4 V 1 L 8 5 L 12 9 V 6 C 15.31 6 18 8.69 18 12 C 18 13 17.75 13.97 17.3 14.8 L 18.76 16.26 C 19.54 15.03 20 13.57 20 12 C 20 7.58 16.42 4 12 4 Z M 9 9 L 9 15 L 11 15 L 11 9 L 9 9 Z M 13 9 L 13 15 L 15 15 L 15 9 L 13 9 Z"},null,-1)]))}]]),iconUpload:XH({},[["render",function(e,t){return $r(),Gr("svg",AW,t[0]||(t[0]=[Jr("path",{d:"M 8.99939,15.998L 8.99939,9.99805L 4.99939,9.99805L 11.9994,2.99805L 18.9994,9.99805L 14.9994,9.99805L 14.9994,15.998L 8.99939,15.998 Z M 4.99937,19.9981L 4.99937,17.9981L 18.9994,17.9981L 18.9994,19.9981L 4.99937,19.9981 Z "},null,-1)]))}]]),iconViewList:XH({},[["render",function(e,t){return $r(),Gr("svg",DW,t[0]||(t[0]=[Jr("path",{d:"M 9,5L 9,9L 21,9L 21,5M 9,19L 21,19L 21,15L 9,15M 9,14L 21,14L 21,10L 9,10M 4,9L 8,9L 8,5L 4,5M 4,19L 8,19L 8,15L 4,15M 4,14L 8,14L 8,10L 4,10L 4,14 Z "},null,-1)]))}]]),iconDownload:XH({},[["render",function(e,t){return $r(),Gr("svg",BW,t[0]||(t[0]=[Jr("path",{d:"M 4.9994,19.9981L 18.9994,19.9981L 18.9994,17.9981L 4.9994,17.9981M 18.9994,8.99807L 14.9994,8.99807L 14.9994,2.99807L 8.9994,2.99807L 8.9994,8.99807L 4.9994,8.99807L 11.9994,15.9981L 18.9994,8.99807 Z "},null,-1)]))}]]),iconCodeTags:XH({},[["render",function(e,t){return $r(),Gr("svg",LW,t[0]||(t[0]=[Jr("path",{d:"M 14.6,16.6L 19.2,12L 14.6,7.4L 16,6L 22,12L 16,18L 14.6,16.6 Z M 9.4,16.6L 4.8,12L 9.4,7.4L 8,6L 2,12L 8,18L 9.4,16.6 Z "},null,-1)]))}]]),iconCodeBraces:XH({},[["render",function(e,t){return $r(),Gr("svg",MW,t[0]||(t[0]=[Jr("path",{d:"M 8,3C 6.89543,3 6,3.89539 6,5L 6,9C 6,10.1046 5.10457,11 4,11L 3,11L 3,13L 4,13C 5.10457,13 6,13.8954 6,15L 6,19C 6,20.1046 6.92841,20.7321 8,21L 10,21L 10,19L 8,19L 8,14C 8,12.8954 7.10457,12 6,12C 7.10457,12 8,11.1046 8,10L 8,5L 10,5L 10,3M 16,3C 17.1046,3 18,3.89539 18,5L 18,9C 18,10.1046 18.8954,11 20,11L 21,11L 21,13L 20,13C 18.8954,13 18,13.8954 18,15L 18,19C 18,20.1046 17.0716,20.7321 16,21L 14,21L 14,19L 16,19L 16,14C 16,12.8954 16.8954,12 18,12C 16.8954,12 16,11.1046 16,10L 16,5L 14,5L 14,3L 16,3 Z "},null,-1)]))}]]),iconOpenInNew:XH({},[["render",function(e,t){return $r(),Gr("svg",FW,t[0]||(t[0]=[Jr("path",{d:"M 14,3L 14,5L 17.59,5L 7.76,14.83L 9.17,16.24L 19,6.41L 19,10L 21,10L 21,3M 19,19L 5,19L 5,5L 12,5L 12,3L 5,3C 3.89,3 3,3.9 3,5L 3,19C 3,20.1 3.89,21 5,21L 19,21C 20.1,21 21,20.1 21,19L 21,12L 19,12L 19,19 Z "},null,-1)]))}]]),iconInformation:XH({},[["render",function(e,t){return $r(),Gr("svg",OW,t[0]||(t[0]=[Jr("path",{d:"M 12.9994,8.99805L 10.9994,8.99805L 10.9994,6.99805L 12.9994,6.99805M 12.9994,16.998L 10.9994,16.998L 10.9994,10.998L 12.9994,10.998M 11.9994,1.99805C 6.47642,1.99805 1.99943,6.47504 1.99943,11.998C 1.99943,17.5211 6.47642,21.998 11.9994,21.998C 17.5224,21.998 21.9994,17.5211 21.9994,11.998C 21.9994,6.47504 17.5224,1.99805 11.9994,1.99805 Z "},null,-1)]))}]]),iconAlert:XH({},[["render",function(e,t){return $r(),Gr("svg",PW,t[0]||(t[0]=[Jr("path",{d:"M 13,14L 11,14L 11,9.99998L 13,9.99998M 13,18L 11,18L 11,16L 13,16M 1,21L 23,21L 12,1.99998L 1,21 Z "},null,-1)]))}]]),iconSignalOff:XH({},[["render",function(e,t){return $r(),Gr("svg",NW,t[0]||(t[0]=[Jr("path",{d:"M 18,3L 18,16.1777L 21,19.1777L 21,3L 18,3 Z M 4.27734,5L 3,6.2676L 10.7324,14L 8,14L 8,21L 11,21L 11,14.2676L 13,16.2676L 13,21L 16,21L 16,19.2676L 19.7324,23L 21,21.7227L 4.27734,5 Z M 13,9L 13,11.1777L 16,14.1777L 16,9L 13,9 Z M 3,18L 3,21L 6,21L 6,18L 3,18 Z "},null,-1)]))}]]),iconFolder:XH({},[["render",function(e,t){return $r(),Gr("svg",jW,t[0]||(t[0]=[Jr("path",{d:"M10,4H4C2.89,4 2,4.89 2,6V18C2,19.1 2.9,20 4,20H20C21.1,20 22,19.1 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"},null,-1)]))}]]),iconScrollSync:XH({},[["render",function(e,t){return $r(),Gr("svg",zW,t[0]||(t[0]=[Jr("path",{d:"M9,18l3,0l-4,4l-4,-4l3,0l0,-3l2,0l0,3Zm8,0l3,0l-4,4l-4,-4l3,0l0,-3l2,0l0,3Zm0.055,-5l-10.11,0l0,-2l10.11,0l0,2Zm-8.055,-4l-2,0l0,-3l-3,0l4,-4l4,4l4,-4l4,4l-3,0l0,3l-2,0l0,-3l-6,0l0,3Z"},null,-1)]))}]]),iconPrinter:XH({},[["render",function(e,t){return $r(),Gr("svg",RW,t[0]||(t[0]=[Jr("path",{d:"M18,3H6V7H18M19,12C18.45,12 18,11.55 18,11C18,10.45 18.45,10 19,10C19.55,10 20,10.45 20,11C20,11.55 19.55,12 19,12M16,19H8V14H16M19,8H5C3.34,8 2,9.34 2,11V17H6V21H18V17H22V11C22,9.34 20.66,8 19,8Z"},null,-1)]))}]]),iconUndo:XH({},[["render",function(e,t){return $r(),Gr("svg",qW,t[0]||(t[0]=[Jr("path",{d:"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"},null,-1)]))}]]),iconRedo:XH({},[["render",function(e,t){return $r(),Gr("svg",$W,t[0]||(t[0]=[Jr("path",{d:"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"},null,-1)]))}]]),iconContentSave:XH({},[["render",function(e,t){return $r(),Gr("svg",UW,t[0]||(t[0]=[Jr("path",{d:"M15,9H5V5H15M12,19C10.34,19 9,17.66 9,16C9,14.34 10.34,13 12,13C13.66,13 15,14.34 15,16C15,17.66 13.66,19 12,19M17,3H5C3.89,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V7L17,3Z"},null,-1)]))}]]),iconMessage:XH({},[["render",function(e,t){return $r(),Gr("svg",HW,t[0]||(t[0]=[Jr("path",{d:"M 21.9891,3.99805C 21.9891,2.89404 21.1031,1.99805 19.9991,1.99805L 3.99913,1.99805C 2.89512,1.99805 1.99913,2.89404 1.99913,3.99805L 1.99913,15.998C 1.99913,17.1021 2.89512,17.998 3.99913,17.998L 17.9991,17.998L 21.9991,21.998L 21.9891,3.99805 Z "},null,-1)]))}]]),iconHistory:XH({},[["render",function(e,t){return $r(),Gr("svg",WW,t[0]||(t[0]=[Jr("path",{d:"M11,7V12.11L15.71,14.9L16.5,13.62L12.5,11.25V7M12.5,2C8.97,2 5.91,3.92 4.27,6.77L2,4.5V11H8.5L5.75,8.25C6.96,5.73 9.5,4 12.5,4C16.64,4 20,7.36 20,11.5C20,15.64 16.64,19 12.5,19C9.23,19 6.47,16.91 5.44,14H3.34C4.44,18.03 8.11,21 12.5,21C17.74,21 22,16.75 22,11.5C22,6.25 17.75,2 12.5,2Z"},null,-1)]))}]]),iconDatabase:XH({},[["render",function(e,t){return $r(),Gr("svg",GW,t[0]||(t[0]=[Jr("path",{d:"M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z"},null,-1)]))}]]),iconMagnify:XH({},[["render",function(e,t){return $r(),Gr("svg",VW,t[0]||(t[0]=[Jr("path",{d:"M 9.5,3C 13.0899,3 16,5.91015 16,9.5C 16,11.1149 15.411,12.5923 14.4362,13.7291L 14.7071,14L 15.5,14L 20.5,19L 19,20.5L 14,15.5L 14,14.7071L 13.7291,14.4362C 12.5923,15.411 11.1149,16 9.5,16C 5.91015,16 3,13.0899 3,9.5C 3,5.91015 5.91015,3 9.5,3 Z M 9.5,5.00001C 7.01472,5.00001 5,7.01473 5,9.50001C 5,11.9853 7.01472,14 9.5,14C 11.9853,14 14,11.9853 14,9.50001C 14,7.01473 11.9853,5.00001 9.5,5.00001 Z "},null,-1)]))}]]),iconFormatListChecks:XH({},[["render",function(e,t){return $r(),Gr("svg",YW,t[0]||(t[0]=[Jr("path",{d:"M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z"},null,-1)]))}]]),iconCheckCircle:XH({},[["render",function(e,t){return $r(),Gr("svg",KW,t[0]||(t[0]=[Jr("path",{d:"M 12,2C 17.5228,2 22,6.47716 22,12C 22,17.5228 17.5228,22 12,22C 6.47715,22 2,17.5228 2,12C 2,6.47716 6.47715,2 12,2 Z M 10.9999,16.5019L 17.9999,9.50193L 16.5859,8.08794L 10.9999,13.6739L 7.91391,10.5879L 6.49991,12.0019L 10.9999,16.5019 Z "},null,-1)]))}]]),iconCheckCircleUn:XH({},[["render",function(e,t){return $r(),Gr("svg",XW,t[0]||(t[0]=[Jr("path",{d:"M512 938.666667C276.362667 938.666667 85.333333 747.637333 85.333333 512S276.362667 85.333333 512 85.333333s426.666667 191.029333 426.666667 426.666667-191.029333 426.666667-426.666667 426.666667z m0-64c200.298667 0 362.666667-162.368 362.666667-362.666667S712.298667 149.333333 512 149.333333 149.333333 311.701333 149.333333 512s162.368 362.666667 362.666667 362.666667z","p-id":"1902"},null,-1)]))}]]),iconContentCopy:XH({},[["render",function(e,t){return $r(),Gr("svg",ZW,t[0]||(t[0]=[Jr("path",{d:"M 19,21L 8,21L 8,7L 19,7M 19,5L 8,5C 6.9,5 6,5.9 6,7L 6,21C 6,22.1 6.9,23 8,23L 19,23C 20.1,23 21,22.1 21,21L 21,7C 21,5.9 20.1,5 19,5 Z M 16,1L 4,1C 2.9,1 2,1.9 2,3L 2,17L 4,17L 4,3L 16,3L 16,1 Z "},null,-1)]))}]]),iconKey:XH({},[["render",function(e,t){return $r(),Gr("svg",JW,t[0]||(t[0]=[Jr("path",{d:"M 7,14C 5.9,14 5,13.1 5,12C 5,10.9 5.9,10 7,10C 8.1,10 9,10.9 9,12C 9,13.1 8.1,14 7,14 Z M 12.65,10C 11.83,7.67 9.61,6 7,6C 3.69,6 1,8.69 1,12C 1,15.31 3.69,18 7,18C 9.61,18 11.83,16.33 12.65,14L 17,14L 17,18L 21,18L 21,14L 23,14L 23,10L 12.65,10 Z "},null,-1)]))}]]),iconDotsHorizontal:XH({},[["render",function(e,t){return $r(),Gr("svg",QW,t[0]||(t[0]=[Jr("path",{d:"M 16,12C 16,10.8954 16.8954,10 18,10C 19.1046,10 20,10.8954 20,12C 20,13.1046 19.1046,14 18,14C 16.8954,14 16,13.1046 16,12 Z M 10,12C 10,10.8954 10.8954,10 12,10C 13.1046,10 14,10.8954 14,12C 14,13.1046 13.1046,14 12,14C 10.8954,14 10,13.1046 10,12 Z M 4,12C 4,10.8954 4.89543,10 6,10C 7.10457,10 8,10.8954 8,12C 8,13.1046 7.10457,14 6,14C 4.89543,14 4,13.1046 4,12 Z "},null,-1)]))}]]),iconSeal:XH({},[["render",function(e,t){return $r(),Gr("svg",eG,t[0]||(t[0]=[Jr("path",{d:"M 20.3943,19.3706L 16.3828,17.9893L 15.0016,22.0008L 11.9248,15.9996L 8.99895,21.9986L 7.61768,17.9871L 3.60619,19.3683L 6.53159,13.3704C 5.57315,12.1727 5,10.6533 5,9C 5,5.13401 8.13401,2 12,2C 15.866,2 19,5.13401 19,9C 19,10.6535 18.4267,12.1731 17.468,13.3708L 20.3943,19.3706 Z M 7,9.00001L 9.68578,10.3429L 9.50615,13.3356L 12.012,11.6811L 14.514,13.333L 14.334,10.3356L 17.0156,8.9948L 14.323,7.64851L 14.5017,4.6727L 12.0162,6.31371L 9.49384,4.64828L 9.67477,7.66262L 7,9.00001 Z "},null,-1)]))}]]),iconSwitchTheme:XH({},[["render",function(e,t){return $r(),Gr("svg",tG,t[0]||(t[0]=[Jr("path",{d:"M512 938.666667c235.648 0 426.666667-191.018667 426.666667-426.666667S747.648 85.333333 512 85.333333 85.333333 276.352 85.333333 512s191.018667 426.666667 426.666667 426.666667z m0-64v-725.333334a362.666667 362.666667 0 0 1 0 725.333334z","p-id":"2236"},null,-1)]))}]]),iconSearch:XH({},[["render",function(e,t){return $r(),Gr("svg",nG,t[0]||(t[0]=[Jr("path",{d:"M694.857143 475.428571q0-105.714286-75.142857-180.857143t-180.857143-75.142857-180.857143 75.142857-75.142857 180.857143 75.142857 180.857143 180.857143 75.142857 180.857143-75.142857 75.142857-180.857143zm292.571429 475.428571q0 29.714286-21.714286 51.428571t-51.428571 21.714286q-30.857143 0-51.428571-21.714286l-196-195.428571q-102.285714 70.857143-228 70.857143-81.714286 0-156.285714-31.714286t-128.571429-85.714286-85.714286-128.571429-31.714286-156.285714 31.714286-156.285714 85.714286-128.571429 128.571429-85.714286 156.285714-31.714286 156.285714 31.714286 128.571429 85.714286 85.714286 128.571429 31.714286 156.285714q0 125.714286-70.857143 228l196 196q21.142857 21.142857 21.142857 51.428571z","p-id":"6829"},null,-1)]))}]]),iconFindReplace:XH({},[["render",function(e,t){return $r(),Gr("svg",rG,t[0]||(t[0]=[Jr("path",{d:"M781.702095 712.752762l208.847238 208.798476-68.998095 68.998095-208.798476-208.847238A436.906667 436.906667 0 0 1 438.857143 877.714286c-242.249143 0-438.857143-196.608-438.857143-438.857143s196.608-438.857143 438.857143-438.857143 438.857143 196.608 438.857143 438.857143a436.906667 436.906667 0 0 1-96.012191 273.895619zM714.800762 341.333333A292.571429 292.571429 0 0 0 438.857143 146.285714C277.211429 146.285714 146.285714 277.211429 146.285714 438.857143h97.52381a195.096381 195.096381 0 0 1 288.182857-171.398095L487.619048 341.333333h227.181714zM731.428571 438.857143h-97.523809a195.096381 195.096381 0 0 1-288.182857 171.398095L390.095238 536.380952H162.913524A292.571429 292.571429 0 0 0 438.857143 731.428571c161.645714 0 292.571429-130.925714 292.571428-292.571428z","p-id":"8996"},null,-1)]))}]]),iconSelectTheme:XH({},[["render",function(e,t){return $r(),Gr("svg",iG,t[0]||(t[0]=[Jr("path",{d:"M384.096 222.4L238.08 363.072l590.4 606.048 155.584-173.92-599.968-572.8z m442.368 652.96L328.832 364.512l55.456-53.408L895.072 798.72l-68.608 76.64zM205.312 321.856l140.384-134.08L286.304 129.6c-36.384-35.552-98.944-35.264-134.88 0.608a96.384 96.384 0 0 0-1.184 134.88l55.072 56.768zM416 64h64v64h-64zM320 672h64v64h-64zM32 352h64v64H32zM232.672 492.192l-60.48-20.864-16.512 47.776-48.768-15.136-18.944 61.088 46.848 14.56-15.488 44.928 60.48 20.864 16.16-46.784 45.824 14.208 18.976-61.12-43.904-13.632zM632.16 277.472l61.312 18.368 14.72-49.152 45.6 14.144 18.976-61.088-46.176-14.368 14.048-46.848-61.312-18.368-13.888 46.24-46.496-14.432-19.008 61.088 47.136 14.656z","p-id":"7366"},null,-1)]))}]]),iconCopy:XH({},[["render",function(e,t){return $r(),Gr("svg",oG,t[0]||(t[0]=[Jr("path",{d:"M704 202.666667a96 96 0 0 1 96 96v554.666666a96 96 0 0 1-96 96H213.333333A96 96 0 0 1 117.333333 853.333333V298.666667A96 96 0 0 1 213.333333 202.666667h490.666667z m0 64H213.333333A32 32 0 0 0 181.333333 298.666667v554.666666a32 32 0 0 0 32 32h490.666667a32 32 0 0 0 32-32V298.666667a32 32 0 0 0-32-32z",fill:"#212121","p-id":"6070"},null,-1),Jr("path",{d:"M277.333333 362.666667m32 0l298.666667 0q32 0 32 32l0 0q0 32-32 32l-298.666667 0q-32 0-32-32l0 0q0-32 32-32Z",fill:"#212121","p-id":"6071"},null,-1),Jr("path",{d:"M277.333333 512m32 0l298.666667 0q32 0 32 32l0 0q0 32-32 32l-298.666667 0q-32 0-32-32l0 0q0-32 32-32Z",fill:"#212121","p-id":"6072"},null,-1),Jr("path",{d:"M277.333333 661.333333m32 0l170.666667 0q32 0 32 32l0 0q0 32-32 32l-170.666667 0q-32 0-32-32l0 0q0-32 32-32Z",fill:"#212121","p-id":"6073"},null,-1),Jr("path",{d:"M320 138.666667h512A32 32 0 0 1 864 170.666667v576a32 32 0 0 0 64 0V170.666667A96 96 0 0 0 832 74.666667H320a32 32 0 0 0 0 64z",fill:"#212121","p-id":"6074"},null,-1)]))}]]),iconEllipsis:XH({},[["render",function(e,t){return $r(),Gr("svg",aG,t[0]||(t[0]=[Jr("path",{d:"M621.714286 713.142857l0 109.714286q0 22.820571-16.018286 38.838857t-38.838857 16.018286l-109.714286 0q-22.820571 0-38.838857-16.018286t-16.018286-38.838857l0-109.714286q0-22.820571 16.018286-38.838857t38.838857-16.018286l109.714286 0q22.820571 0 38.838857 16.018286t16.018286 38.838857zM621.714286 420.571429l0 109.714286q0 22.820571-16.018286 38.838857t-38.838857 16.018286l-109.714286 0q-22.820571 0-38.838857-16.018286t-16.018286-38.838857l0-109.714286q0-22.820571 16.018286-38.838857t38.838857-16.018286l109.714286 0q22.820571 0 38.838857 16.018286t16.018286 38.838857zM621.714286 128l0 109.714286q0 22.820571-16.018286 38.838857t-38.838857 16.018286l-109.714286 0q-22.820571 0-38.838857-16.018286t-16.018286-38.838857l0-109.714286q0-22.820571 16.018286-38.838857t38.838857-16.018286l109.714286 0q22.820571 0 38.838857 16.018286t16.018286 38.838857z","p-id":"8667"},null,-1)]))}]]),iconShare:XH({},[["render",function(e,t){return $r(),Gr("svg",sG,t[0]||(t[0]=[Jr("path",{d:"M769.14815 670.390403c-44.430932 0-84.182284 19.999496-110.768803 51.471278L389.219117 565.736878c6.597255-16.571421 10.228969-34.653241 10.228969-53.594639 0-17.006326-2.940982-33.332153-8.320503-48.497551l270.88143-157.119457c26.511817 29.069059 64.702628 47.312562 107.138112 47.312562 80.055291 0 144.95337-64.899102 144.95337-144.95337 0-80.055291-64.898079-144.954393-144.95337-144.954393s-144.95337 64.899102-144.95337 144.954393c0 15.991206 2.600221 31.386848 7.382131 45.776579L359.655801 412.377048c-26.417673-27.833929-63.756069-45.181015-105.161085-45.181015-80.055291 0-144.954393 64.890916-144.954393 144.946206 0 80.055291 64.898079 144.967696 144.954393 144.967696 39.409568 0 75.128071-15.741519 101.256148-41.24845l274.172383 159.024853c-3.725858 12.8384-5.729491 26.409486-5.729491 40.457434 0 80.0645 64.898079 144.954393 144.95337 144.954393s144.95337-64.889893 144.95337-144.954393C914.101519 735.297692 849.20344 670.390403 769.14815 670.390403z","p-id":"2767"},null,-1)]))}]]),iconChatGpt:XH({},[["render",function(e,t){return $r(),Gr("svg",lG,t[0]||(t[0]=[ni('<defs><linearGradient id="linear" x1="100%" y1="22%" x2="0%" y2="78%"><stop offset="0%" stop-color="rgb(131,211,231)"></stop><stop offset="2%" stop-color="rgb(127,203,229)"></stop><stop offset="25%" stop-color="rgb(86,115,217)"></stop><stop offset="49%" stop-color="rgb(105,80,190)"></stop><stop offset="98%" stop-color="rgb(197,59,119)"></stop><stop offset="100%" stop-color="rgb(197,59,119)"></stop></linearGradient></defs><path id="logo" d="m617.24 354a126.36 126.36 0 0 0 -10.86-103.79 127.8 127.8 0 0 0 -137.65-61.32 126.36 126.36 0 0 0 -95.31-42.49 127.81 127.81 0 0 0 -121.92 88.49 126.4 126.4 0 0 0 -84.5 61.3 127.82 127.82 0 0 0 15.72 149.86 126.36 126.36 0 0 0 10.86 103.79 127.81 127.81 0 0 0 137.65 61.32 126.36 126.36 0 0 0 95.31 42.49 127.81 127.81 0 0 0 121.96-88.54 126.4 126.4 0 0 0 84.5-61.3 127.82 127.82 0 0 0 -15.76-149.81zm-190.66 266.49a94.79 94.79 0 0 1 -60.85-22c.77-.42 2.12-1.16 3-1.7l101-58.34a16.42 16.42 0 0 0 8.3-14.37v-142.39l42.69 24.65a1.52 1.52 0 0 1 .83 1.17v117.92a95.18 95.18 0 0 1 -94.97 95.06zm-204.24-87.23a94.74 94.74 0 0 1 -11.34-63.7c.75.45 2.06 1.25 3 1.79l101 58.34a16.44 16.44 0 0 0 16.59 0l123.31-71.2v49.3a1.53 1.53 0 0 1 -.61 1.31l-102.1 58.95a95.16 95.16 0 0 1 -129.85-34.79zm-26.57-220.49a94.71 94.71 0 0 1 49.48-41.68c0 .87-.05 2.41-.05 3.48v116.68a16.41 16.41 0 0 0 8.29 14.36l123.31 71.19-42.69 24.65a1.53 1.53 0 0 1 -1.44.13l-102.11-59a95.16 95.16 0 0 1 -34.79-129.81zm350.74 81.62-123.31-71.2 42.69-24.64a1.53 1.53 0 0 1 1.44-.13l102.11 58.95a95.08 95.08 0 0 1 -14.69 171.55c0-.88 0-2.42 0-3.49v-116.68a16.4 16.4 0 0 0 -8.24-14.36zm42.49-63.95c-.75-.46-2.06-1.25-3-1.79l-101-58.34a16.46 16.46 0 0 0 -16.59 0l-123.31 71.2v-49.3a1.53 1.53 0 0 1 .61-1.31l102.1-58.9a95.07 95.07 0 0 1 141.19 98.44zm-267.11 87.87-42.7-24.65a1.52 1.52 0 0 1 -.83-1.17v-117.92a95.07 95.07 0 0 1 155.9-73c-.77.42-2.11 1.16-3 1.7l-101 58.34a16.41 16.41 0 0 0 -8.3 14.36zm23.19-50 54.92-31.72 54.92 31.7v63.42l-54.92 31.7-54.92-31.7z" fill="#202123"></path>',2)]))}]])};var uG,hG={exports:{}};var dG=(uG||(uG=1,function(e){!function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof yo&&yo.global===yo?yo:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,a){var s=o.URL||o.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?n(e,t,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,a){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),o);else if(r(e))n(e,o,a);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){i(s)}))}}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var h=o.URL||o.webkitURL,d=h.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s}()}(hG)),hG.exports);const pG=bo(dG);function fG(e){return new Worker(""+new URL("templateWorker-CRqnvJKe.js",import.meta.url).href,{name:null==e?void 0:e.name})}function mG(e,t=1){const n=[];let r;function i(){r&&(r.children.length>0&&(r.children=mG(r.children,t+1)),n.push(r))}return e.forEach((e=>{e.level!==t?(r=r||{children:[]},r.children.push(e)):(i(),r=e)})),i(),n}const gG=document.createElement("div");gG.className="hidden-rendering-container",document.body.appendChild(gG);const vG={
/**
   * Apply the template to the file content
   */
async applyTemplate(e,t={value:"{{{files.0.content.text}}}",helpers:""},n=!1){const r=_H.state.file.itemsById[e],i=await NN.loadItem(`${e}/content`),o=UL.computeProperties(i.properties),a=Lo.getOptions(o),s=Zq.createConverter(a,!0),l=Zq.parseSections(s,i.text),c=Zq.convert(l).htmlSectionList.map(CF.sanitizeHtml).join(""),u=`app--${_H.getters["data/computedSettings"].colorTheme}`,h=`preview-theme--${_H.state.theme.currPreviewTheme}`;let d="";const p=document.getElementById(`preview-theme-${_H.state.theme.currPreviewTheme}`);p&&(d=p.innerText),gG.innerHTML=c,await Lo.sectionPreview(gG,a),gG.querySelectorAll(".table-wrapper").cl_each((e=>{for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e.nextSibling);e.parentNode.removeChild(e)}));const f=Array.prototype.slice.call(gG.getElementsByTagName("img")).map((e=>{let t=e.attributes&&e.attributes.src&&e.attributes.src.nodeValue;return t&&0!==t.indexOf("http://")&&0!==t.indexOf("https://")?(t=decodeURIComponent(t),e.removeAttribute("src"),{imgElt:e,uri:t}):{imgElt:e}})).map((e=>new Promise(((t,n)=>{e.imgElt.src||!e.uri?t():(async e=>{if(0!==e.indexOf("http://")&&0!==e.indexOf("https://")){const t=_H.getters["explorer/selectedNodeFolder"],n=UL.getAbsoluteFilePath(t,e),r=CN.MD5(n).toString(),i=await NN.getImgItem(r);if(i){const t=e.lastIndexOf(".");return`data:image/${t>-1?e.substring(t+1):"png"};base64,${i.content}`}return""}return e})(e.uri).then((n=>{e.imgElt.src=n,t()}),(()=>n(new Error(""))))}))));await Promise.all(f);const m=gG.querySelectorAll("h1,h2,h3,h4,h5,h6");Array.prototype.slice.call(m).forEach((e=>{const t=document.createElement("span");for(t.className="content";e.firstChild;)t.appendChild(e.firstChild);const n=document.createElement("span");n.className="prefix",e.insertBefore(n,e.firstChild),e.appendChild(t);const r=document.createElement("span");r.className="suffix",e.appendChild(r)}));const g=mG(m.cl_map((e=>({title:e.textContent,anchor:e.id,level:parseInt(e.tagName.slice(1),10),children:[]})))),v={pdf:n,files:[{name:r.name,content:{text:i.text,properties:o,yamlProperties:i.properties,html:gG.innerHTML,toc:g,colorThemeClass:u,themeClass:h,themeStyleContent:d}}]};gG.innerHTML="";const y=new fG;return new Promise(((e,n)=>{const r=setTimeout((()=>{y.terminate(),n(new Error("Template generation timeout."))}),1e4);y.addEventListener("message",(t=>{try{clearTimeout(r),y.terminate();const[i,o]=t.data;i?n(new Error(`${i}`)):e(`${o}`)}catch(i){}})),y.postMessage([t.value,v,t.helpers])}))},
/**
   * Export a file to disk.
   */
async exportToDisk(e,t,n){const r=_H.state.file.itemsById[e],i=await this.applyTemplate(e,n),o=new Blob([i],{type:"text/plain;charset=utf-8"});pG.saveAs(o,`${r.name}.${t}`)}},yG=(bG="content",e=>NN.loadItem(`${e}/${bG}`).catch((()=>_H.commit(`${bG}/setItem`,{id:`${e}/${bG}`}))));var bG;const _G=e=>e?Array.isArray(e)?e:`${e}`.trim().split(/\s*,\s*/):[],wG=(e,t)=>e?`${e}`:t,kG=["gitea","gitee","github","gitlab"],xG=async(e,t)=>{const{fileId:n}=e,r=_H.getters["data/allTemplatesById"][e.templateId],i=await vG.applyTemplate(n,r),o=await NN.loadItem(`${n}/content`),a=_H.state.file.itemsById[n],s=UL.computeProperties(o.properties),l=GN.providersById[e.providerId],c=l.getToken(e),u={title:wG(s.title,a.name),author:wG(s.author),tags:_G(s.tags),categories:_G(s.categories),excerpt:wG(s.excerpt),featuredImage:wG(s.featuredImage),status:wG(s.status),date:(h=s.date,d=new Date,h?new Date(`${h}`):d)};var h,d;return l.publish(c,i,u,e,t)},CG=async(e,t)=>{const n=await xG(e,t);return EN.addPublishLocation(n),n},SG=()=>{_H.state.light||_H.dispatch("queue/enqueuePublishRequest",(async()=>{let e;const t=async()=>{if(dO.isUserActive()){if(clearInterval(e),!_H.getters["publishLocation/current"].length)throw new Error("Publish not possible.");await(async e=>{let t=0;await yG(e);const n=[..._H.getters["publishLocation/filteredGroupedByFileId"][e]||[]];try{const r=n.filter((e=>kG.indexOf(e.providerId)>-1));let i="";if(r.length)try{const{commitMessage:e}=await _H.dispatch("modal/open",{type:"commitMessage"});i=e}catch(i7){return}await UL.awaitSequence(n,(async e=>{await _H.dispatch("queue/doWithLocation",{location:e,action:async()=>{const n=await xG(e,i);try{UL.serializeObject(e)!==UL.serializeObject(n)&&(_H.commit("publishLocation/patchItem",n),EN.ensureUniqueLocations()),t+=1}catch(r){if(_H.state.offline)throw r;_H.dispatch("notification/error",r)}}})}));const o=_H.state.file.itemsById[e];_H.dispatch("notification/info",`"${o.name}"${t}`)}finally{await NN.unloadContents()}})(_H.getters["file/current"].id),OF.addBadge("triggerPublish")}};return e=UL.setInterval((()=>t()),1e3),t()}))},TG=CG,EG=(e,t)=>{const n=_H.getters["file/current"];e.fileId=n.id,_H.dispatch("queue/enqueue",(async()=>{let r="";if(kG.indexOf(e.providerId)>-1)try{const{commitMessage:e}=await _H.dispatch("modal/open",{type:"commitMessage",name:n.name});r=e}catch(i7){return}await CG(e,r),_H.dispatch("notification/info",` "${n.name}".`),t&&OF.addBadge(t)}))},IG=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Meta":"Ctrl",AG=e=>{let t="";return Object.entries(_H.getters["data/computedSettings"].shortcuts).some((([n,r])=>(`${r.method||r}`===e&&(t=n.split("+").map((e=>e.toLowerCase())).map((e=>"mod"===e?IG:e&&`${e[0].toUpperCase()}${e.slice(1)}`)).join("+")),t))),t&&`  ${t}`},DG={data:()=>({mounted:!1,title:"",titleFocus:!1,titleHover:!1,titleFakeElt:null,titleInputElt:null}),computed:{...AM(["light","offline"]),...AM("queue",["isSyncRequested","isPublishRequested","currentLocation"]),...AM("layout",["canUndo","canRedo"]),...AM("content",["revisionContent"]),...BM("layout",["styles"]),...BM("syncLocation",{syncLocations:"current"}),...BM("publishLocation",{publishLocations:"current"}),pagedownButtons(){const e=_H.getters["data/computedSettings"].editor.headButtons;return YU.filter((t=>e[t.method])).map((e=>({...e,titleWithShortcut:`${e.title}${AG(e.method)}`,iconClass:`icon-${e.icon}`})))},isSyncPossible:()=>_H.getters["workspace/syncToken"]||_H.getters["syncLocation/current"].length,showSpinner:()=>!_H.state.queue.isEmpty,titleWidth(){if(!this.mounted)return 0;this.titleFakeElt.textContent=this.title;const e=this.titleFakeElt.getBoundingClientRect().width+2;return Math.min(e,this.styles.titleMaxWidth)},titleScrolling(){const e=this.titleHover&&!this.titleFocus;if(this.titleInputElt)if(e){const e=this.titleInputElt.scrollWidth-this.titleInputElt.offsetWidth;Y$.animate(this.titleInputElt).scrollLeft(e).duration(10*e).easing("inOut").start()}else Y$.animate(this.titleInputElt).scrollLeft(0).start();return e},editCancelTrigger(){const e=_H.getters["file/current"];return UL.serializeObject([e.id,e.name])}},methods:{...DM("content",["setRevisionContent"]),...LM("content",["restoreRevision"]),...LM("data",["toggleExplorer","toggleSideBar"]),undo:()=>iU.clEditor.undoMgr.undo(),redo:()=>iU.clEditor.undoMgr.redo(),requestSync(){this.isSyncPossible&&!this.isSyncRequested&&BU.requestSync(!0)},requestPublish(){this.publishLocations.length&&!this.isPublishRequested&&SG()},switchTheme(){_H.dispatch("data/switchThemeSetting")},pagedownClick(e){if(_H.getters["content/isCurrentEditable"]){const t=iU.clEditor.getContent();iU.pagedownEditor.uiManager.doClick(e),t!==iU.clEditor.getContent()&&OF.addBadge("formatButtons")}},async editTitle(e){if(this.titleFocus=e,e)this.titleInputElt.setSelectionRange(0,this.titleInputElt.value.length);else{const e=this.title.trim();if(this.title=_H.getters["file/current"].name,e&&this.title!==e)try{await EN.storeItem({..._H.getters["file/current"],name:e}),OF.addBadge("editCurrentFileName")}catch(i7){}}},submitTitle(e){e&&(this.title=""),this.titleInputElt.blur()},close(){hU.close()}},created(){this.$watch((()=>this.editCancelTrigger),(()=>{this.title="",this.editTitle(!1)}),{immediate:!0})},mounted(){this.titleFakeElt=this.$refs.titleFakeElt,this.titleInputElt=this.$refs.titleInputElt,this.mounted=!0}},BG={class:"navigation-bar__inner navigation-bar__inner--left navigation-bar__inner--button"},LG={class:"navigation-bar__inner navigation-bar__inner--right navigation-bar__inner--button"},MG={key:0,class:"navigation-bar__button navigation-bar__button--stackedit button",href:"app",target:"_blank"},FG={class:"navigation-bar__inner navigation-bar__inner--right navigation-bar__inner--title flex flex--row"},OG={class:"navigation-bar__spinner"},PG={key:0,class:"spinner"},NG={ref:"titleFakeElt",class:"navigation-bar__title navigation-bar__title--fake text-input"},jG=["href"],zG=["disabled"],RG=["href"],qG=["disabled"],$G={key:0,class:"flex flex--row"},UG={class:"navigation-bar__inner navigation-bar__inner--edit-pagedownButtons"},HG=["disabled"],WG=["disabled"],GG=["onClick"],VG={key:1,class:"navigation-bar__spacer"};const YG=XH(DG,[["render",function(e,t,n,r,i,o){const a=wn("icon-check-circle"),s=wn("icon-folder"),l=wn("icon-switch-theme"),c=wn("icon-provider"),u=wn("icon-sync-off"),h=wn("icon-sync"),d=wn("icon-upload"),p=wn("icon-close"),f=wn("icon-undo"),m=wn("icon-redo"),g=Cn("title");return $r(),Gr("nav",{class:W(["navigation-bar",{"navigation-bar--editor":e.styles.showEditor&&!e.revisionContent,"navigation-bar--light":e.light}])},[Jr("div",BG,[e.light?Kt(($r(),Gr("button",{key:0,class:"navigation-bar__button navigation-bar__button--close button",onClick:t[0]||(t[0]=e=>o.close())},[Qr(a)])),[[g,"StackEdit"]]):Kt(($r(),Gr("button",{key:1,class:"navigation-bar__button navigation-bar__button--explorer-toggler button","tour-step-anchor":"explorer",onClick:t[1]||(t[1]=t=>e.toggleExplorer())},[Qr(s)])),[[g,""]])]),Jr("div",LG,[Kt(($r(),Gr("button",{class:"navigation-bar__button navigation-bar__button--theme button","tour-step-anchor":"theme",onClick:t[2]||(t[2]=(...e)=>o.switchTheme&&o.switchTheme(...e))},[Qr(l)])),[[g,""]]),e.light?Kt(($r(),Gr("a",MG,[Qr(c,{"provider-id":"stackedit"})])),[[g,"StackEdit"]]):Kt(($r(),Gr("button",{key:1,class:"navigation-bar__button navigation-bar__button--stackedit button","tour-step-anchor":"menu",onClick:t[3]||(t[3]=t=>e.toggleSideBar())},[Qr(c,{"provider-id":"stackedit"})])),[[g,""]])]),Jr("div",FG,[Jr("div",OG,[!e.offline&&o.showSpinner?($r(),Gr("div",PG)):ri("",!0),e.offline?($r(),Vr(u,{key:1})):ri("",!0)]),Jr("div",NG,null,512),Jr("div",{class:"navigation-bar__title navigation-bar__title--text text-input",style:R({width:o.titleWidth+"px"})},Z(e.title),5),Kt(Jr("input",{ref:"titleInputElt",class:W(["navigation-bar__title navigation-bar__title--input text-input",{"navigation-bar__title--focus":e.titleFocus,"navigation-bar__title--scrolling":o.titleScrolling}]),style:R({width:o.titleWidth+"px"}),onFocus:t[4]||(t[4]=e=>o.editTitle(!0)),onBlur:t[5]||(t[5]=e=>o.editTitle(!1)),onKeydown:[t[6]||(t[6]=mo((e=>o.submitTitle(!1)),["enter"])),t[7]||(t[7]=mo(po((e=>o.submitTitle(!0)),["stop"]),["esc"]))],onMouseenter:t[8]||(t[8]=t=>e.titleHover=!0),onMouseleave:t[9]||(t[9]=t=>e.titleHover=!1),"onUpdate:modelValue":t[10]||(t[10]=t=>e.title=t)},null,38),[[no,e.title]]),Jr("div",{class:W(["flex flex--row",{"navigation-bar__hidden":e.styles.hideLocations}])},[($r(!0),Gr(Pr,null,En(e.syncLocations,(t=>Kt(($r(),Gr("a",{class:W(["navigation-bar__button navigation-bar__button--location button",{"navigation-bar__button--blink":t.id===e.currentLocation.id}]),key:t.id,href:t.url,target:"_blank"},[Qr(c,{"provider-id":t.providerId},null,8,["provider-id"])],10,jG)),[[g,""]]))),128)),Kt(($r(),Gr("button",{class:"navigation-bar__button navigation-bar__button--sync button",disabled:!o.isSyncPossible||e.isSyncRequested||e.offline,onClick:t[11]||(t[11]=(...e)=>o.requestSync&&o.requestSync(...e))},[Qr(h)],8,zG)),[[g,""]]),($r(!0),Gr(Pr,null,En(e.publishLocations,(t=>Kt(($r(),Gr("a",{class:W(["navigation-bar__button navigation-bar__button--location button",{"navigation-bar__button--blink":t.id===e.currentLocation.id}]),key:t.id,href:t.url,target:"_blank"},[Qr(c,{"provider-id":t.providerId},null,8,["provider-id"])],10,RG)),[[g,""]]))),128)),Kt(($r(),Gr("button",{class:"navigation-bar__button navigation-bar__button--publish button",disabled:!e.publishLocations.length||e.isPublishRequested||e.offline,onClick:t[12]||(t[12]=(...e)=>o.requestPublish&&o.requestPublish(...e))},[Qr(d)],8,qG)),[[g,""]])],2),e.revisionContent?($r(),Gr("div",$G,[Jr("button",{class:"navigation-bar__button navigation-bar__button--revision navigation-bar__button--restore button",onClick:t[13]||(t[13]=(...t)=>e.restoreRevision&&e.restoreRevision(...t))},""),Kt(($r(),Gr("button",{class:"navigation-bar__button navigation-bar__button--revision button",onClick:t[14]||(t[14]=t=>e.setRevisionContent())},[Qr(p)])),[[g,""]])])):ri("",!0)]),Jr("div",UG,[Kt(($r(),Gr("button",{class:"navigation-bar__button button",onClick:t[15]||(t[15]=(...e)=>o.undo&&o.undo(...e)),disabled:!e.canUndo},[Qr(f)],8,HG)),[[g,""]]),Kt(($r(),Gr("button",{class:"navigation-bar__button button",onClick:t[16]||(t[16]=(...e)=>o.redo&&o.redo(...e)),disabled:!e.canRedo},[Qr(m)],8,WG)),[[g,""]]),($r(!0),Gr(Pr,null,En(o.pagedownButtons,(e=>($r(),Gr("div",{key:e.method},[e.method?Kt(($r(),Gr("button",{key:0,class:"navigation-bar__button button",onClick:t=>o.pagedownClick(e.method)},[($r(),Vr(xn(e.iconClass)))],8,GG)),[[g,e.titleWithShortcut]]):($r(),Gr("div",VG))])))),128))])],2)}]]),KG={computed:{...AM(["light"]),...BM("data",["layoutSettings"])},methods:LM("data",["toggleNavigationBar","toggleEditor","toggleSidePreview","toggleStatusBar","toggleFocusMode","toggleScrollSync"])},XG={class:"button-bar"},ZG={class:"button-bar__inner button-bar__inner--top"},JG={class:"button-bar__inner button-bar__inner--bottom"};const QG=XH(KG,[["render",function(e,t,n,r,i,o){const a=wn("icon-navigation-bar"),s=wn("icon-side-preview"),l=wn("icon-eye"),c=wn("icon-target"),u=wn("icon-scroll-sync"),h=wn("icon-status-bar"),d=Cn("title");return $r(),Gr("div",XG,[Jr("div",ZG,[e.light?ri("",!0):Kt(($r(),Gr("button",{key:0,class:W(["button-bar__button button-bar__button--navigation-bar-toggler button",{"button-bar__button--on":e.layoutSettings.showNavigationBar}]),onClick:t[0]||(t[0]=t=>e.toggleNavigationBar())},[Qr(a)],2)),[[d,""]]),Kt(($r(),Gr("button",{class:W(["button-bar__button button-bar__button--side-preview-toggler button",{"button-bar__button--on":e.layoutSettings.showSidePreview}]),"tour-step-anchor":"editor",onClick:t[1]||(t[1]=t=>e.toggleSidePreview())},[Qr(s)],2)),[[d,""]]),Kt(($r(),Gr("button",{class:"button-bar__button button-bar__button--editor-toggler button",onClick:t[2]||(t[2]=t=>e.toggleEditor(!1))},[Qr(l)])),[[d,""]])]),Jr("div",JG,[Kt(($r(),Gr("button",{class:W(["button-bar__button button-bar__button--focus-mode-toggler button",{"button-bar__button--on":e.layoutSettings.focusMode}]),onClick:t[3]||(t[3]=t=>e.toggleFocusMode())},[Qr(c)],2)),[[d,""]]),Kt(($r(),Gr("button",{class:W(["button-bar__button button-bar__button--scroll-sync-toggler button",{"button-bar__button--on":e.layoutSettings.scrollSync}]),onClick:t[4]||(t[4]=t=>e.toggleScrollSync())},[Qr(u)],2)),[[d,""]]),Kt(($r(),Gr("button",{class:W(["button-bar__button button-bar__button--status-bar-toggler button",{"button-bar__button--on":e.layoutSettings.showStatusBar}]),onClick:t[5]||(t[5]=t=>e.toggleStatusBar())},[Qr(h)],2)),[[d,""]])])])}]]);class eV{constructor(e,t){this.id=UL.uid(),this.name=e,this.regex=new RegExp(t,"gm"),this.value=null}}const tV={data:()=>({textSelection:!1,htmlSelection:!1,line:0,column:0,textStats:[new eV("","[\\s\\S]"),new eV("","\\S"),new eV("","\n")],htmlStats:[new eV("","\\S"),new eV("","\\S.*")]}),computed:BM("layout",["styles"]),created(){iU.on("sectionList",(()=>this.computeText())),iU.on("selectionRange",(()=>this.computeText())),iU.on("previewCtx",(()=>this.computeHtml())),iU.on("previewSelectionRange",(()=>this.computeHtml()))},methods:{computeText(){setTimeout((()=>{this.textSelection=!1;let e=iU.clEditor.getContent();const t=e.slice(0,iU.clEditor.selectionMgr.selectionEnd).split("\n");this.line=t.length,this.column=t.pop().length;const n=iU.clEditor.selectionMgr.getSelectedText();n&&(this.textSelection=!0,e=n),this.textStats.forEach((t=>{t.value=(e.match(t.regex)||[]).length}))}),10)},computeHtml(){setTimeout((()=>{let e;iU.previewSelectionRange&&(e=`${iU.previewSelectionRange}`),this.htmlSelection=!0,e||(this.htmlSelection=!1,({text:e}=iU.previewCtx)),null!=e&&this.htmlStats.forEach((t=>{t.value=(e.match(t.regex)||[]).length}))}),10)}}},nV={class:"stat-panel panel no-overflow"},rV={key:0,class:"stat-panel__block stat-panel__block--left"},iV={class:"stat-panel__block-name"},oV={key:0},aV={class:"stat-panel__value"},sV={class:"stat-panel__value"},lV={class:"stat-panel__block stat-panel__block--right"},cV={class:"stat-panel__block-name"},uV={key:0},hV={class:"stat-panel__value"};const dV=XH(tV,[["render",function(e,t,n,r,i,o){return $r(),Gr("div",nV,[e.styles.showEditor?($r(),Gr("div",rV,[Jr("span",iV,[t[0]||(t[0]=ti(" Markdown ")),e.textSelection?($r(),Gr("span",oV,"selection")):ri("",!0)]),($r(!0),Gr(Pr,null,En(e.textStats,(e=>($r(),Gr("span",{key:e.id},[Jr("span",aV,Z(e.value),1),ti(" "+Z(e.name),1)])))),128)),Jr("span",sV," "+Z(e.line)+" ,  "+Z(e.column)+" ",1)])):ri("",!0),Jr("div",lV,[Jr("span",cV,[t[1]||(t[1]=ti(" HTML ")),e.htmlSelection?($r(),Gr("span",uV,"selection")):ri("",!0)]),($r(!0),Gr(Pr,null,En(e.htmlStats,(e=>($r(),Gr("span",{key:e.id},[Jr("span",hV,Z(e.value),1),ti(" "+Z(e.name),1)])))),128))])])}]]),pV={newItem(e=!1){let t=_H.getters["explorer/selectedNodeFolder"].item.id;("trash"===t||e&&"temp"===t)&&(t=null),_H.dispatch("explorer/openNode",t),_H.commit("explorer/setNewItem",{type:e?"folder":"file",parentId:t})},async deleteItem(){const e=_H.getters["explorer/selectedNode"];if(e.isNil)return;if(e.isTrash||"trash"===e.item.parentId){try{await _H.dispatch("modal/open","trashDeletion")}catch(i7){}return}let t=!0;try{e.isTemp?(await _H.dispatch("modal/open","tempFolderDeletion"),t=!1):"temp"===e.item.parentId?(await _H.dispatch("modal/open",{type:"tempFileDeletion",item:e.item}),t=!1):e.isFolder&&await _H.dispatch("modal/open",{type:"folderDeletion",item:e.item})}catch(i7){return}const n=e=>{t?EN.setOrPatchItem({id:e,parentId:"trash"}):EN.deleteFile(e)};if(e===_H.getters["explorer/selectedNode"]){const t=_H.getters["file/current"].id;let r=e.item.id===t;if(e.isFolder){const i=e=>{e.folders.forEach(i),e.files.forEach((e=>{r=r||e.item.id===t,n(e.item.id)})),_H.commit("folder/deleteItem",e.item.id)};i(e),OF.addBadge("removeFolder")}else n(e.item.id),OF.addBadge("removeFile");r&&_H.getters["data/lastOpenedIds"].some((e=>"trash"!==_H.state.file.itemsById[e].parentId&&(_H.commit("file/setCurrentId",e),!0)))}}},fV={name:"explorer-node",
// Required for recursivity
props:["node","depth"],data:()=>({editingValue:""}),computed:{leftPadding(){return 15*this.depth+"px"},childLeftPadding(){return 15*(this.depth+1)+"px"},isSelected(){return this.equalNode(_H.getters["explorer/selectedNode"],this.node)},isEditing(){return this.equalNode(_H.getters["explorer/editingNode"],this.node)},isDragTarget(){return this.equalNode(_H.getters["explorer/dragTargetNode"],this.node)},isDragTargetFolder(){return this.equalNode(_H.getters["explorer/dragTargetNodeFolder"],this.node)},isOpen(){return _H.state.explorer.openNodes[this.node.item.id]||this.node.isRoot},newChild(){return this.equalNode(_H.getters["explorer/newChildNodeParent"],this.node)&&_H.state.explorer.newChildNode},newChildName:{get:()=>_H.state.explorer.newChildNode.item.name,set(e){_H.commit("explorer/setNewItemName",e)}},editingNodeName:{get:()=>_H.getters["explorer/editingNode"].item.name,set(e){this.editingValue=e.trim()}}},methods:{...DM("explorer",["setEditingId"]),...LM("explorer",["setDragTarget"]),...LM("notification",["info"]),equalNode:(e,t)=>!(!e||!t)&&(!(!e.isRoot||!t.isRoot)||e.item&&t.item&&e.item.id&&e.item.id===t.item.id),select(e=this.node.item.id,t=!0){const n=_H.getters["explorer/nodeMap"][e];return!!n&&(_H.commit("explorer/setSelectedId",e),t&&setTimeout((()=>{n.isFolder?_H.commit("explorer/toggleOpenNode",e):_H.state.file.currentId!==e&&(_H.commit("file/setCurrentId",e),OF.addBadge("switchFile"))}),10),!0)},async submitNewChild(e){const{newChildNode:t}=_H.state.explorer;if(!e&&!t.isNil&&t.item.name)try{if(t.isFolder){const e=await EN.storeItem(t.item);this.select(e.id),OF.addBadge("createFolder")}else{const e=await EN.createFile(t.item);this.select(e.id),OF.addBadge("createFile")}}catch(i7){}_H.commit("explorer/setNewItem",null)},async submitEdit(e){const{item:t,isFolder:n}=_H.getters["explorer/editingNode"],r=this.editingValue;if(this.setEditingId(null),!e&&t.id&&r&&t.name!==r)try{await EN.storeItem({...t,name:r}),OF.addBadge(n?"renameFolder":"renameFile")}catch(i7){}},setDragSourceId(e){this.node.noDrag?e.preventDefault():(_H.commit("explorer/setDragSourceId",this.node.item.id),e.dataTransfer.setData("Text",""))},copyPath(){let e=UL.getAbsoluteDir(this.node).replaceAll(" ","%20");return e=0===e.indexOf("/")?e:`/${e}`,this.node.isFolder?e:`${e}.md`},onDrop(){const e=_H.getters["explorer/dragSourceNode"],t=_H.getters["explorer/dragTargetNodeFolder"];this.setDragTarget(),e.isNil||t.isNil||e.item.id===t.item.id||(EN.storeItem({...e.item,parentId:t.item.id}),OF.addBadge(e.isFolder?"moveFolder":"moveFile"))},async onContextMenu(e){if(this.select(void 0,!1)){e.preventDefault(),e.stopPropagation();const t=await _H.dispatch("contextMenu/open",{coordinates:{left:e.clientX,top:e.clientY},items:[{name:"",disabled:!this.node.isFolder||this.node.isTrash,perform:()=>pV.newItem(!1)},{name:"",disabled:!this.node.isFolder||this.node.isTrash||this.node.isTemp,perform:()=>pV.newItem(!0)},{type:"separator"},{name:"",disabled:this.node.isTrash||this.node.isTemp,perform:()=>this.setEditingId(this.node.item.id)},{name:"",perform:()=>pV.deleteItem()},{name:"",disabled:this.node.isTrash||this.node.isTemp,perform:()=>this.$refs.copyId.click()}]});t&&t.perform()}}}},mV={key:2,class:"explorer-node__children"};const gV=XH(fV,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("explorer-node",!0),l=Cn("focus"),c=Cn("clipboard");return $r(),Gr("div",{class:W(["explorer-node",{"explorer-node--selected":o.isSelected,"explorer-node--folder":n.node.isFolder,"explorer-node--open":o.isOpen,"explorer-node--trash":n.node.isTrash,"explorer-node--temp":n.node.isTemp,"explorer-node--drag-target":o.isDragTargetFolder}]),onDragover:t[15]||(t[15]=po((()=>{}),["prevent"])),onDragenter:t[16]||(t[16]=po((t=>n.node.noDrop||e.setDragTarget(n.node)),["stop"])),onDragleave:t[17]||(t[17]=po((t=>o.isDragTarget&&e.setDragTarget()),["stop"])),onDrop:t[18]||(t[18]=po(((...e)=>o.onDrop&&o.onDrop(...e)),["prevent","stop"])),onContextmenu:t[19]||(t[19]=(...e)=>o.onContextMenu&&o.onContextMenu(...e))},[o.isEditing?($r(),Gr("div",{key:0,class:"explorer-node__item-editor",style:R({paddingLeft:o.leftPadding}),draggable:"true",onDragstart:t[5]||(t[5]=po((()=>{}),["stop","prevent"]))},[Kt(Jr("input",{type:"text",class:"text-input",onBlur:t[0]||(t[0]=e=>o.submitEdit()),onKeydown:[t[1]||(t[1]=po((()=>{}),["stop"])),t[2]||(t[2]=mo((e=>o.submitEdit()),["enter"])),t[3]||(t[3]=mo(po((e=>o.submitEdit(!0)),["stop"]),["esc"]))],"onUpdate:modelValue":t[4]||(t[4]=e=>o.editingNodeName=e)},null,544),[[l],[no,o.editingNodeName]])],36)):($r(),Gr("div",{key:1,class:"explorer-node__item",style:R({paddingLeft:o.leftPadding}),onClick:t[6]||(t[6]=e=>o.select()),draggable:"true",onDragstart:t[7]||(t[7]=po(((...e)=>o.setDragSourceId&&o.setDragSourceId(...e)),["stop"])),onDragend:t[8]||(t[8]=po((t=>e.setDragTarget()),["stop"]))},[ti(Z(n.node.item.name)+" ",1),($r(!0),Gr(Pr,null,En(n.node.locations,(e=>($r(),Vr(a,{class:"explorer-node__location",key:e.id,"provider-id":e.providerId},null,8,["provider-id"])))),128))],36)),n.node.isFolder&&o.isOpen?($r(),Gr("div",mV,[($r(!0),Gr(Pr,null,En(n.node.folders,(e=>($r(),Vr(s,{key:e.item.id,node:e,depth:n.depth+1},null,8,["node","depth"])))),128)),o.newChild?($r(),Gr("div",{key:0,class:W(["explorer-node__new-child",{"explorer-node__new-child--folder":o.newChild.isFolder}]),style:R({paddingLeft:o.childLeftPadding})},[Kt(Jr("input",{type:"text",class:"text-input",onBlur:t[9]||(t[9]=e=>o.submitNewChild()),onKeydown:[t[10]||(t[10]=po((()=>{}),["stop"])),t[11]||(t[11]=mo((e=>o.submitNewChild()),["enter"])),t[12]||(t[12]=mo(po((e=>o.submitNewChild(!0)),["stop"]),["esc"]))],"onUpdate:modelValue":t[13]||(t[13]=e=>o.newChildName=e)},null,544),[[l],[no,o.newChildName,void 0,{trim:!0}]])],6)):ri("",!0),($r(!0),Gr(Pr,null,En(n.node.files,(e=>($r(),Vr(s,{key:e.item.id,node:e,depth:n.depth+1},null,8,["node","depth"])))),128))])):ri("",!0),Kt(Jr("button",{ref:"copyId",onClick:t[14]||(t[14]=t=>e.info("!")),style:{display:"none"}},null,512),[[c,o.copyPath()]])],34)}]]),vV={class:"menu-entry button flex flex--row flex--align-center",href:"javascript:void(0)"},yV={class:"menu-entry__icon flex flex--column flex--center"},bV={class:"menu-entry__text flex flex--column"};const _V=XH({},[["render",function(e,t){return $r(),Gr("a",vV,[Jr("div",yV,[An(e.$slots,"icon")]),Jr("div",bV,[An(e.$slots,"default")])])}]]),wV={components:{ExplorerNode:gV,MenuEntry:_V},data:()=>({currentFileId:"",showSearch:!1,searching:!1,searchText:"",searchItems:[]}),computed:{...AM(["light"]),...AM("explorer",["newChildNode"]),...BM("explorer",["rootNode","selectedNode"]),workspaceId:()=>_H.getters["workspace/currentWorkspace"].id},methods:{...LM("data",["toggleExplorer"]),newItem:e=>pV.newItem(e),deleteItem:()=>pV.deleteItem(),editItem(){const e=this.selectedNode;e.isTrash||e.isTemp||_H.commit("explorer/setEditingId",e.item.id)},back(){this.showSearch=!1},toSearch(){this.showSearch=!0},search(){if(this.searchItems=[],!this.searchText)return;this.searching=!0;const e={},t=[];NN.getWorkspaceItems(this.workspaceId,(n=>{if("file"!==n.type&&"content"!==n.type)return;if("file"===n.type&&(e[n.id]=n),t.length>=50)return;const r=n.id.split("/")[0];t.indexOf(r)>-1||(n.name&&n.name.indexOf(this.searchText)>-1&&t.push(r),n.text&&n.text.indexOf(this.searchText)>-1&&t.push(r))}),(()=>{t.forEach((t=>{const n=e[t];n&&this.searchItems.push(n)})),this.searching=!1,OF.addBadge("searchFile")}))},clickSearch(e){_H.getters["explorer/nodeMap"][e.id]&&(_H.commit("explorer/setSelectedId",e.id),setTimeout((()=>{_H.commit("file/setCurrentId",e.id)}),10))}},created(){this.$watch((()=>_H.getters["file/current"].id),(e=>{this.currentFileId=e,_H.commit("explorer/setSelectedId",e),_H.dispatch("explorer/openNode",e)}),{immediate:!0})}},kV={class:"explorer flex flex--column"},xV={class:"side-title flex flex--row flex--space-between"},CV={key:0,class:"flex flex--row"},SV={key:1,class:"flex flex--row"},TV={key:1,class:"explorer__search",tabindex:"0"},EV={class:"explorer__search-list"},IV={key:0,class:"search-tips"},AV=["onClick"];const DV=XH(wV,[["render",function(e,t,n,r,i,o){const a=wn("icon-file-plus"),s=wn("icon-folder-plus"),l=wn("icon-delete"),c=wn("icon-pen"),u=wn("icon-file-search"),h=wn("icon-dots-horizontal"),d=wn("icon-close"),p=wn("explorer-node"),f=Cn("title");return $r(),Gr("div",kV,[Jr("div",xV,[e.showSearch?($r(),Gr("div",SV,[Kt(($r(),Gr("button",{class:"side-title__button button",onClick:t[5]||(t[5]=e=>o.back())},[Qr(h)])),[[f,""]]),t[10]||(t[10]=Jr("div",{class:"side-title__title"},"  ",-1))])):($r(),Gr("div",CV,[Kt(($r(),Gr("button",{class:"side-title__button side-title__button--new-file button",onClick:t[0]||(t[0]=e=>o.newItem())},[Qr(a)])),[[f,""]]),Kt(($r(),Gr("button",{class:"side-title__button side-title__button--new-folder button",onClick:t[1]||(t[1]=e=>o.newItem(!0))},[Qr(s)])),[[f,""]]),Kt(($r(),Gr("button",{class:"side-title__button side-title__button--delete button",onClick:t[2]||(t[2]=e=>o.deleteItem())},[Qr(l)])),[[f,""]]),Kt(($r(),Gr("button",{class:"side-title__button side-title__button--rename button",onClick:t[3]||(t[3]=e=>o.editItem())},[Qr(c)])),[[f,""]]),Kt(($r(),Gr("button",{class:"side-title__button side-title__button--search button",onClick:t[4]||(t[4]=e=>o.toSearch())},[Qr(u)])),[[f,""]])])),Kt(($r(),Gr("button",{class:"side-title__button side-title__button--close button",onClick:t[6]||(t[6]=t=>e.toggleExplorer(!1))},[Qr(d)])),[[f,""]])]),e.light?ri("",!0):Kt(($r(),Gr("div",{key:0,class:W(["explorer__tree",{"explorer__tree--new-item":!e.newChildNode.isNil}]),tabindex:"0",onKeydown:t[7]||(t[7]=mo((e=>o.deleteItem()),["delete"]))},[Qr(p,{node:e.rootNode,depth:0},null,8,["node"])],34)),[[Mi,!e.showSearch]]),!e.light&&e.showSearch?($r(),Gr("div",TV,[Kt(Jr("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.searchText=t),class:"text-input",placeholder:"",onKeyup:t[9]||(t[9]=mo(((...e)=>o.search&&o.search(...e)),["enter"]))},null,544),[[no,e.searchText]]),Jr("div",EV,[e.searching?($r(),Gr("div",IV,"...")):ri("",!0),($r(!0),Gr(Pr,null,En(e.searchItems,(t=>($r(),Gr("a",{class:W(["menu-entry button flex flex--row flex--align-center",{"search-node--selected":e.currentFileId===t.id}]),key:t.id,onClick:e=>o.clickSearch(t),href:"javascript:void(0)"},Z(t.name),11,AV)))),128)),t[11]||(t[11]=Jr("div",{class:"search-tips"},"50",-1))])])):ri("",!0)])}]]),BV={data:()=>({maskY:0}),computed:{...BM("layout",["styles"])},mounted(){const e=this.$el.querySelector(".toc__inner");let t;function n(n){if(!t)return;n.preventDefault();const r=n.clientY-e.getBoundingClientRect().top;iU.previewCtx.sectionDescList.some((e=>{if(r>=e.tocDimension.endOffset)return!1;const t=(r-e.tocDimension.startOffset)/(e.tocDimension.height||1),n=e.editorDimension.startOffset+e.editorDimension.height*t;iU.editorElt.parentNode.scrollTop=n;const i=e.previewDimension.startOffset+e.previewDimension.height*t;return iU.previewElt.parentNode.scrollTop=i,!0}))}e.addEventListener("mouseup",(()=>{t=!1})),e.addEventListener("mouseleave",(()=>{t=!1})),e.addEventListener("mousedown",(e=>{t=1===e.which,n(e)})),e.addEventListener("mousemove",(e=>{n(e)}));const r=()=>{const e=iU.getScrollPosition();if(e){const t=iU.previewCtxMeasured.sectionDescList[e.sectionIdx];this.maskY=t.tocDimension.startOffset+e.posInSection*t.tocDimension.height}};this.$nextTick((()=>{iU.editorElt.parentNode.addEventListener("scroll",(()=>{this.styles.showEditor&&r()})),iU.previewElt.parentNode.addEventListener("scroll",(()=>{this.styles.showEditor||r()}))}))}},LV={class:"toc"};const MV=XH(BV,[["render",function(e,t,n,r,i,o){return $r(),Gr("div",LV,[Jr("div",{class:"toc__mask",style:R({top:e.maskY-5+"px"})},null,4),t[0]||(t[0]=Jr("div",{class:"toc__inner"},null,-1))])}]]);const FV=XH({props:["userId"],computed:{sanitizedUserId(){return wO.sanitizeUserId(this.userId)},url(){const e=_H.state.userInfo.itemsById[this.sanitizedUserId];return e&&e.imageUrl&&`url('${e.imageUrl}')`}},watch:{sanitizedUserId:{handler:e=>wO.addUserId(e),immediate:!0}}},[["render",function(e,t,n,r,i,o){return $r(),Gr("div",{class:"user-image",style:R({backgroundImage:o.url})},null,4)}]]),OV={components:{MenuEntry:_V,UserImage:FV},computed:{...BM("workspace",["currentWorkspace","syncToken","loginToken"]),userId:()=>wO.getCurrentUserId(),workspaceLocationUrl(){return GN.providersById[this.currentWorkspace.providerId].getWorkspaceLocationUrl(this.currentWorkspace)},workspaceCount:()=>Object.keys(_H.getters["workspace/workspacesById"]).length,syncLocationCount:()=>Object.keys(_H.getters["syncLocation/currentWithWorkspaceSyncLocation"]).length,publishLocationCount:()=>Object.keys(_H.getters["publishLocation/current"]).length,templateCount:()=>Object.keys(_H.getters["data/allTemplatesById"]).length,accountCount:()=>Object.values(_H.getters["data/tokensByType"]).reduce(((e,t)=>e+Object.values(t).length),0),badgeCount:()=>_H.getters["data/allBadges"].filter((e=>e.isEarned)).length,featureCount:()=>_H.getters["data/allBadges"].length},methods:{...LM("data",{setPanel:"setSideBarPanel"}),async signin(){try{await EO.signin(),await BU.afterSignIn(),BU.requestSync()}catch(i7){}},async signinWithGithub(){try{await MO.signin(),await BU.afterSignIn(),BU.requestSync()}catch(i7){}},async fileProperties(){try{await _H.dispatch("modal/open","fileProperties")}catch(i7){}},print(){window.print()},async settings(){try{await _H.dispatch("modal/open","settings")}catch(i7){}},async templates(){try{await _H.dispatch("modal/open","templates")}catch(i7){}},async accounts(){try{await _H.dispatch("modal/open","accountManagement")}catch(i7){}},async badges(){try{await _H.dispatch("modal/open","badgeManagement")}catch(i7){}},async reset(){try{await _H.dispatch("modal/open","reset"),localStorage.setItem("resetStackEdit","1"),window.location.reload()}catch(i7){}},about(){_H.dispatch("modal/open","about")}}},PV={class:"side-bar__panel side-bar__panel--menu"},NV={class:"side-bar__info"},jV={key:0,class:"menu-entry menu-entry--info flex flex--row flex--align-center"},zV={class:"menu-entry__icon menu-entry__icon--image"},RV={key:1,class:"menu-entry menu-entry--info flex flex--row flex--align-center"},qV={class:"menu-entry__icon menu-entry__icon--image"},$V={key:0},UV={key:1},HV={key:2},WV=["href"],GV={key:3},VV=["href"],YV={key:4},KV=["href"],XV={key:5},ZV=["href"],JV={key:6},QV=["href"],eY={key:7},tY=["href"],nY={key:2,class:"menu-entry menu-entry--info flex flex--row flex--align-center"},rY={class:"menu-entry__icon menu-entry__icon--disabled"},iY={key:0,class:"menu-entry__label menu-entry__label--count"},oY={key:0,class:"menu-entry__label menu-entry__label--count"},aY={key:0,class:"menu-entry__label menu-entry__label--count"},sY={class:"menu-entry__label menu-entry__label--count"},lY={class:"menu-entry__label menu-entry__label--count"},cY={class:"menu-entry__label menu-entry__label--count"};const uY=XH(OV,[["render",function(e,t,n,r,i,o){const a=wn("user-image"),s=wn("icon-provider"),l=wn("icon-sync-off"),c=wn("icon-login"),u=wn("menu-entry"),h=wn("icon-database"),d=wn("icon-sync"),p=wn("icon-upload"),f=wn("icon-history"),m=wn("icon-view-list"),g=wn("icon-toc"),v=wn("icon-help-circle"),y=wn("icon-content-save"),b=wn("icon-printer"),_=wn("icon-seal"),w=wn("icon-key"),k=wn("icon-code-braces"),x=wn("icon-select-theme"),C=wn("icon-settings"),S=wn("icon-logout");return $r(),Gr("div",PV,[Jr("div",NV,[e.loginToken?($r(),Gr("div",jV,[Jr("div",zV,[Qr(a,{"user-id":o.userId},null,8,["user-id"])]),Jr("span",null,[t[10]||(t[10]=ti("")),Jr("b",null,Z(e.loginToken.name),1),t[11]||(t[11]=ti(""))])])):ri("",!0),e.syncToken?($r(),Gr("div",RV,[Jr("div",qV,[Qr(s,{"provider-id":e.currentWorkspace.providerId},null,8,["provider-id"])]),"giteeAppData"===e.currentWorkspace.providerId?($r(),Gr("span",$V,[Jr("b",null,Z(e.currentWorkspace.name),1),t[12]||(t[12]=ti("  Gitee  "))])):"githubAppData"===e.currentWorkspace.providerId?($r(),Gr("span",UV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[13]||(t[13]=ti("  GitHub  "))])):"googleDriveWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",HV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[14]||(t[14]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"Google Drive ",8,WV),t[15]||(t[15]=ti(" "))])):"couchdbWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",GV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[16]||(t[16]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"CouchDB ",8,VV),t[17]||(t[17]=ti(" "))])):"githubWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",YV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[18]||(t[18]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"GitHub ",8,KV),t[19]||(t[19]=ti("  "))])):"giteeWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",XV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[20]||(t[20]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"Gitee ",8,ZV),t[21]||(t[21]=ti("  "))])):"gitlabWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",JV,[Jr("b",null,Z(e.currentWorkspace.name),1),t[22]||(t[22]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"GitLab ",8,QV),t[23]||(t[23]=ti(" "))])):"giteaWorkspace"===e.currentWorkspace.providerId?($r(),Gr("span",eY,[Jr("b",null,Z(e.currentWorkspace.name),1),t[24]||(t[24]=ti("  ")),Jr("a",{href:o.workspaceLocationUrl,target:"_blank"},"Gitea ",8,tY),t[25]||(t[25]=ti(" "))])):ri("",!0)])):($r(),Gr("div",nY,[Jr("div",rY,[Qr(l)]),Jr("span",null,[Jr("b",null,Z(e.currentWorkspace.name),1),t[26]||(t[26]=ti(" "))])]))]),e.loginToken?ri("",!0):($r(),Vr(u,{key:0,onClick:o.signin},{icon:Yt((()=>[Qr(c)])),default:Yt((()=>[t[27]||(t[27]=Jr("div",null," Gitee ",-1)),t[28]||(t[28]=Jr("span",null,"",-1))])),_:1},8,["onClick"])),e.loginToken?ri("",!0):($r(),Vr(u,{key:1,onClick:o.signinWithGithub},{icon:Yt((()=>[Qr(c)])),default:Yt((()=>[t[29]||(t[29]=Jr("div",null," GitHub ",-1)),t[30]||(t[30]=Jr("span",null,"",-1))])),_:1},8,["onClick"])),Qr(u,{onClick:t[0]||(t[0]=t=>e.setPanel("workspaces"))},{icon:Yt((()=>[Qr(h)])),default:Yt((()=>[Jr("div",null,[o.workspaceCount?($r(),Gr("div",iY,Z(o.workspaceCount),1)):ri("",!0),t[31]||(t[31]=ti(" "))]),t[32]||(t[32]=Jr("span",null,"",-1))])),_:1}),t[60]||(t[60]=Jr("hr",null,null,-1)),Qr(u,{onClick:t[1]||(t[1]=t=>e.setPanel("sync"))},{icon:Yt((()=>[Qr(d)])),default:Yt((()=>[Jr("div",null,[o.syncLocationCount?($r(),Gr("div",oY,Z(o.syncLocationCount),1)):ri("",!0),t[33]||(t[33]=ti(" "))]),t[34]||(t[34]=Jr("span",null,"",-1))])),_:1}),Qr(u,{onClick:t[2]||(t[2]=t=>e.setPanel("publish"))},{icon:Yt((()=>[Qr(p)])),default:Yt((()=>[Jr("div",null,[o.publishLocationCount?($r(),Gr("div",aY,Z(o.publishLocationCount),1)):ri("",!0),t[35]||(t[35]=ti(""))]),t[36]||(t[36]=Jr("span",null," Web",-1))])),_:1}),Qr(u,{onClick:t[3]||(t[3]=t=>e.setPanel("history"))},{icon:Yt((()=>[Qr(f)])),default:Yt((()=>[t[37]||(t[37]=Jr("div",null,"",-1)),t[38]||(t[38]=Jr("span",null,"",-1))])),_:1}),Qr(u,{onClick:o.fileProperties},{icon:Yt((()=>[Qr(m)])),default:Yt((()=>[t[39]||(t[39]=Jr("div",null,"",-1)),t[40]||(t[40]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),t[61]||(t[61]=Jr("hr",null,null,-1)),Qr(u,{onClick:t[4]||(t[4]=t=>e.setPanel("toc"))},{icon:Yt((()=>[Qr(g)])),default:Yt((()=>[t[41]||(t[41]=ti("  "))])),_:1}),Qr(u,{onClick:t[5]||(t[5]=t=>e.setPanel("help"))},{icon:Yt((()=>[Qr(v)])),default:Yt((()=>[t[42]||(t[42]=ti(" Markdown  "))])),_:1}),t[62]||(t[62]=Jr("hr",null,null,-1)),Qr(u,{onClick:t[6]||(t[6]=t=>e.setPanel("importExport"))},{icon:Yt((()=>[Qr(y)])),default:Yt((()=>[t[43]||(t[43]=ti(" / "))])),_:1}),Qr(u,{onClick:o.print},{icon:Yt((()=>[Qr(b)])),default:Yt((()=>[t[44]||(t[44]=ti("  "))])),_:1},8,["onClick"]),t[63]||(t[63]=Jr("hr",null,null,-1)),Qr(u,{onClick:o.badges},{icon:Yt((()=>[Qr(_)])),default:Yt((()=>[Jr("div",null,[Jr("div",sY,Z(o.badgeCount)+"/"+Z(o.featureCount),1),t[45]||(t[45]=ti(" "))]),t[46]||(t[46]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),Qr(u,{onClick:o.accounts},{icon:Yt((()=>[Qr(w)])),default:Yt((()=>[Jr("div",null,[Jr("div",lY,Z(o.accountCount),1),t[47]||(t[47]=ti(" "))]),t[48]||(t[48]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),Qr(u,{onClick:o.templates},{icon:Yt((()=>[Qr(k)])),default:Yt((()=>[Jr("div",null,[Jr("div",cY,Z(o.templateCount),1),t[49]||(t[49]=ti(" "))]),t[50]||(t[50]=Jr("span",null," Handlebars ",-1))])),_:1},8,["onClick"]),Qr(u,{onClick:t[7]||(t[7]=t=>e.setPanel("editTheme"))},{icon:Yt((()=>[Qr(x)])),default:Yt((()=>[t[51]||(t[51]=ti("  ")),t[52]||(t[52]=Jr("span",null,"()",-1))])),_:1}),Qr(u,{onClick:t[8]||(t[8]=t=>e.setPanel("previewTheme"))},{icon:Yt((()=>[Qr(x)])),default:Yt((()=>[t[53]||(t[53]=ti("  ")),t[54]||(t[54]=Jr("span",null,"()",-1))])),_:1}),Qr(u,{onClick:o.settings},{icon:Yt((()=>[Qr(C)])),default:Yt((()=>[t[55]||(t[55]=Jr("div",null,"",-1)),t[56]||(t[56]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),t[64]||(t[64]=Jr("hr",null,null,-1)),Qr(u,{onClick:t[9]||(t[9]=t=>e.setPanel("workspaceBackups"))},{icon:Yt((()=>[Qr(y)])),default:Yt((()=>[t[57]||(t[57]=ti("  "))])),_:1}),Qr(u,{onClick:o.reset},{icon:Yt((()=>[Qr(S)])),default:Yt((()=>[t[58]||(t[58]=ti("  "))])),_:1},8,["onClick"]),Qr(u,{onClick:o.about},{icon:Yt((()=>[Qr(v)])),default:Yt((()=>[t[59]||(t[59]=ti("  StackEdit "))])),_:1},8,["onClick"])])}]]),hY={components:{MenuEntry:_V},computed:{...BM("workspace",["workspacesById","currentWorkspace"]),workspaceCount(){return Object.keys(this.workspacesById).length}},methods:{async addCouchdbWorkspace(){try{_H.dispatch("modal/open",{type:"couchdbWorkspace"})}catch(i7){}},async addGithubWorkspace(){try{_H.dispatch("modal/open",{type:"githubWorkspace"})}catch(i7){}},async addGiteeWorkspace(){try{_H.dispatch("modal/open",{type:"giteeWorkspace"})}catch(i7){}},async addGitlabWorkspace(){try{const{serverUrl:e,applicationId:t,applicationSecret:n}=await _H.dispatch("modal/open",{type:"gitlabAccount"}),r=await hj.addAccount(e,t,n);_H.dispatch("modal/open",{type:"gitlabWorkspace",token:r})}catch(i7){}},async addGiteaWorkspace(){try{const e=await _H.dispatch("modal/open",{type:"giteaAccount"}),t=await gj.addAccount(e);_H.dispatch("modal/open",{type:"giteaWorkspace",token:t})}catch(i7){}},async addGoogleDriveWorkspace(){try{const e=await Tj.addDriveAccount(!0);_H.dispatch("modal/open",{type:"googleDriveWorkspace",token:e})}catch(i7){}},manageWorkspaces(){try{_H.dispatch("modal/open","workspaceManagement")}catch(i7){}}}},dY={class:"side-bar__panel side-bar__panel--menu"},pY={class:"menu-entry__label menu-entry__label--count"},fY={class:"workspace__name"},mY={key:0,class:"menu-entry__label"};const gY=XH(hY,[["render",function(e,t,n,r,i,o){const a=wn("icon-database"),s=wn("menu-entry"),l=wn("icon-provider");return $r(),Gr("div",dY,[Qr(s,{onClick:o.manageWorkspaces},{icon:Yt((()=>[Qr(a)])),default:Yt((()=>[Jr("div",null,[Jr("div",pY,Z(o.workspaceCount),1),t[0]||(t[0]=ti(" "))]),t[1]||(t[1]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),t[8]||(t[8]=Jr("hr",null,null,-1)),($r(!0),Gr(Pr,null,En(e.workspacesById,((t,n)=>($r(),Gr("div",{class:"workspace",key:n},[Qr(s,{href:t.url,target:"_blank"},In({default:Yt((()=>[Jr("div",fY,[e.currentWorkspace===t?($r(),Gr("div",mY,"")):ri("",!0),ti(Z(t.name),1)])])),_:2},["main"!==n||t.sub?{name:"icon",fn:Yt((()=>[Qr(l,{"provider-id":t.providerId},null,8,["provider-id"])])),key:"1"}:{name:"icon",fn:Yt((()=>[Qr(l,{"provider-id":"stackedit"})])),key:"0"}]),1032,["href"])])))),128)),t[9]||(t[9]=Jr("hr",null,null,-1)),Qr(s,{onClick:o.addGithubWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"githubWorkspace"})])),default:Yt((()=>[t[2]||(t[2]=Jr("span",null,[ti(" "),Jr("b",null,"GitHub"),ti(" ")],-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteeWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"giteeWorkspace"})])),default:Yt((()=>[t[3]||(t[3]=Jr("span",null,[ti(" "),Jr("b",null,"Gitee"),ti(" ")],-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGitlabWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"gitlabWorkspace"})])),default:Yt((()=>[t[4]||(t[4]=Jr("span",null,[ti(" "),Jr("b",null,"GitLab"),ti(" ")],-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteaWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"giteaWorkspace"})])),default:Yt((()=>[t[5]||(t[5]=Jr("span",null,[ti(" "),Jr("b",null,"Gitea"),ti(" ")],-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGoogleDriveWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"googleDriveWorkspace"})])),default:Yt((()=>[t[6]||(t[6]=Jr("span",null,[ti(" "),Jr("b",null,"Google Drive"),ti(" ")],-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addCouchdbWorkspace},{icon:Yt((()=>[Qr(l,{"provider-id":"couchdbWorkspace"})])),default:Yt((()=>[t[7]||(t[7]=Jr("span",null,[ti(" "),Jr("b",null,"CouchDB"),ti(" ")],-1))])),_:1},8,["onClick"])])}]]),vY=e=>e?_H.getters["data/serverConf"].dropboxAppKeyFull:_H.getters["data/serverConf"].dropboxAppKey,yY=e=>e&&JSON.stringify(e).replace(/[\u007f-\uffff]/g,(e=>`\\u${`000${e.charCodeAt(0).toString(16)}`.slice(-4)}`)),bY=({accessToken:e},t,n)=>dO.request({...t,headers:{...t.headers||{},"Content-Type":t.body&&("string"==typeof t.body?"application/octet-stream":"application/json; charset=utf-8"),"Dropbox-API-Arg":yY(n),Authorization:`Bearer ${e}`}}),_Y="db";wO.setInfoResolver("dropbox",_Y,(async e=>{const t=Object.values(_H.getters["data/dropboxTokensBySub"])[0];try{const{body:n}=await bY(t,{method:"POST",url:"https://api.dropboxapi.com/2/users/get_account",body:{account_id:e}});return{id:`${_Y}:${n.account_id}`,name:n.name.display_name,imageUrl:n.profile_photo_url||""}}catch(n){if(!t||404!==n.status)throw new Error("RETRY");throw n}}));const wY={subPrefix:_Y,
/**
   * https://www.dropbox.com/developers/documentation/http/documentation#oauth2-authorize
   * https://www.dropbox.com/developers/documentation/http/documentation#users-get_current_account
   */
async startOauth2(e,t=null,n=!1){const{accessToken:r}=await dO.startOauth2("https://www.dropbox.com/oauth2/authorize",{client_id:vY(e),response_type:"token"},n),{body:i}=await bY({accessToken:r},{method:"POST",url:"https://api.dropboxapi.com/2/users/get_current_account"});if(wO.addUserInfo({id:`${_Y}:${i.account_id}`,name:i.name.display_name,imageUrl:i.profile_photo_url||""}),t&&`${i.account_id}`!==t)throw new Error("Dropbox account ID not expected.");const o={accessToken:r,name:i.name.display_name,sub:`${i.account_id}`,fullAccess:e};return _H.dispatch("data/addDropboxToken",o),o},async addAccount(e=!1){const t=await this.startOauth2(e);return OF.addBadge("addDropboxAccount"),t},
/**
   * https://www.dropbox.com/developers/documentation/http/documentation#files-upload
   */
uploadFile:async({token:e,path:t,content:n,fileId:r})=>(await bY(e,{method:"POST",url:"https://content.dropboxapi.com/2/files/upload",body:n},{path:r||t,mode:"overwrite"})).body,
/**
   * https://www.dropbox.com/developers/documentation/http/documentation#files-download
   */
async downloadFile({token:e,path:t,fileId:n}){const r=await bY(e,{method:"POST",url:"https://content.dropboxapi.com/2/files/download",raw:!0},{path:n||t});return{id:JSON.parse(r.headers["dropbox-api-result"]).id,content:r.body}},
/**
   * https://www.dropbox.com/developers/documentation/http/documentation#list-revisions
   */
listRevisions:async({token:e,path:t,fileId:n})=>(await bY(e,{method:"POST",url:"https://api.dropboxapi.com/2/files/list_revisions",body:n?{path:n,mode:"id",limit:100}:{path:t,limit:100}})).body.entries,
/**
   * https://www.dropbox.com/developers/chooser
   */
openChooser:async e=>(window.Dropbox||await dO.loadScript("https://www.dropbox.com/static/api/2/dropins.js"),new Promise((t=>{window.Dropbox.appKey=vY(e.fullAccess),window.Dropbox.choose({multiselect:!0,linkType:"direct",success:e=>t(e.map((e=>{const t=e.link.replace(/.*\/view\/[^/]*/,"");return decodeURI(t)}))),cancel:()=>t([])})})))},kY=new YN({id:"googleDrive",name:"Google Drive",getToken({sub:e}){const t=_H.getters["data/googleTokensBySub"][e];return t&&t.isDrive?t:null},getLocationUrl:({driveFileId:e})=>`https://docs.google.com/file/d/${e}/edit`,getLocationDescription:({driveFileId:e})=>e,async initAction(){const e=Tj.driveState||{};if(e.userId){let n=_H.getters["data/googleTokensBySub"][e.userId];n&&n.isDrive||(await _H.dispatch("modal/open",{type:"googleDriveAccount"}),n=await Tj.addDriveAccount(!_H.getters["data/localSettings"].googleDriveRestrictedAccess,e.userId));const r=e=>{const t=e&&e.appProperties&&e.appProperties.folderId;if(t){const e={providerId:"googleDriveWorkspace",folderId:t},n=UL.makeWorkspaceId(e);_H.getters["workspace/workspacesById"][n]&&UL.setQueryParams(e)}};switch(e.action){case"create":default:try{const t=await Tj.getFile(n,e.folderId);t.appProperties=t.appProperties||{},Tj.driveActionFolder=t,r(t)}catch(t){if(!t||404!==t.status)throw t;Tj.driveActionFolder={id:e.folderId}}break;case"open":await UL.awaitSequence(e.ids||[],(async e=>{const t=await Tj.getFile(n,e);t.appProperties=t.appProperties||{},Tj.driveActionFiles.push(t)})),r(Tj.driveActionFiles[0])}}},async performAction(){const e=Tj.driveState||{},t=_H.getters["data/googleTokensBySub"][e.userId];switch(t&&e.action){case"create":{const e=await EN.createFile({},!0);return _H.commit("file/setCurrentId",e.id),this.makeLocation(t,null,Tj.driveActionFolder.id)}case"open":return _H.dispatch("queue/enqueue",(()=>this.openFiles(t,Tj.driveActionFiles))),null;default:return null}},async downloadContent(e,t){const n=await Tj.downloadFile(e,t.driveFileId);return YN.parseContent(n,`${t.fileId}/content`)},async uploadContent(e,t,n,r){const i=_H.state.file.itemsById[n.fileId],o=UL.sanitizeName(i&&i.name),a=[];n.driveParentId&&a.push(n.driveParentId);const s=await Tj.uploadFile({token:e,name:o,parents:a,media:YN.serializeContent(t),fileId:n.driveFileId,ifNotTooLate:r});return{...n,driveFileId:s.id}},async publish(e,t,n,r){const i=await Tj.uploadFile({token:e,name:n.title,parents:[],media:t,mediaType:r.templateId?"text/html":void 0,fileId:r.driveFileId});return{...r,driveFileId:i.id}},async openFiles(e,t){return UL.awaitSequence(t,(async t=>{if(!YN.openFileWithLocation({providerId:this.id,driveFileId:t.id})){const n={driveFileId:t.id,providerId:this.id,sub:e.sub};let r;try{r=await this.downloadContent(e,n)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${t.id}.`)}const i=await EN.createFile({name:t.name,parentId:_H.getters["file/current"].parentId,text:r.text,properties:r.properties,discussions:r.discussions,comments:r.comments},!0);_H.commit("file/setCurrentId",i.id),EN.addSyncLocation({...n,fileId:i.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}Google Drive`)}}))},makeLocation(e,t,n){const r={providerId:this.id,sub:e.sub};return t&&(r.driveFileId=t),n&&(r.driveParentId=n),r},listFileRevisions:async({token:e,syncLocation:t})=>(await Tj.getFileRevisions(e,t.driveFileId)).map((e=>({id:e.id,sub:`${Tj.subPrefix}:${e.lastModifyingUser.permissionId}`,created:new Date(e.modifiedTime).getTime()}))),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const i=await Tj.downloadFileRevision(e,n.driveFileId,r);return YN.parseContent(i,t)}}),xY=(e,t)=>e.fullAccess?t:`/Applications/StackEdit (restricted)${t}`,CY=(e,t)=>e.fullAccess?t:t.replace(/^\/Applications\/StackEdit \(restricted\)/,""),SY=new YN({id:"dropbox",name:"Dropbox",getToken:({sub:e})=>_H.getters["data/dropboxTokensBySub"][e],getLocationUrl({path:e}){const t=e.split("/").map(encodeURIComponent),n=t.pop();return`https://www.dropbox.com/home${t.join("/")}?preview=${n}`},getLocationDescription:({path:e,dropboxFileId:t})=>t||e,checkPath:e=>e&&e.match(/^\/[^\\<>:"|?*]+$/),async downloadContent(e,t){const{content:n}=await wY.downloadFile({token:e,path:CY(e,t.path),fileId:t.dropboxFileId});return YN.parseContent(n,`${t.fileId}/content`)},async uploadContent(e,t,n){const r=await wY.uploadFile({token:e,path:CY(e,n.path),content:YN.serializeContent(t),fileId:n.dropboxFileId});return{...n,path:xY(e,r.path_display),dropboxFileId:r.id}},async publish(e,t,n,r){const i=await wY.uploadFile({token:e,path:r.path,content:t,fileId:r.dropboxFileId});return{...r,path:xY(e,i.path_display),dropboxFileId:i.id}},async openFiles(e,t){await UL.awaitSequence(t,(async t=>{if(!YN.openFileWithLocation({providerId:this.id,path:t})){const n={path:t,providerId:this.id,sub:e.sub};let r;try{r=await this.downloadContent(e,n)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${t}.`)}let i=t;const o=i.lastIndexOf("/");o>-1&&o<i.length-1&&(i=i.slice(o+1));const a=i.lastIndexOf(".");a>0&&o<i.length&&(i=i.slice(0,a));const s=await EN.createFile({name:i,parentId:_H.getters["file/current"].parentId,text:r.text,properties:r.properties,discussions:r.discussions,comments:r.comments},!0);_H.commit("file/setCurrentId",s.id),EN.addSyncLocation({...n,fileId:s.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}Dropbox`)}}))},makeLocation(e,t){return{providerId:this.id,sub:e.sub,path:t}},listFileRevisions:async({token:e,syncLocation:t})=>(await wY.listRevisions({token:e,path:CY(e,t.path),fileId:t.dropboxFileId})).map((t=>({id:t.rev,sub:`${wY.subPrefix}:${(t.sharing_info||{}).modified_by||e.sub}`,created:new Date(t.server_modified).getTime()}))),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,revisionId:n}){const{content:r}=await wY.downloadFile({token:e,path:`rev:${n}`});return YN.parseContent(r,t)}}),TY={},EY=new YN({id:"github",name:"GitHub",getToken:({sub:e})=>_H.getters["data/githubTokensBySub"][e],getLocationUrl:({owner:e,repo:t,branch:n,path:r})=>`https://github.com/${encodeURIComponent(e)}/${encodeURIComponent(t)}/tree/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getLocationDescription:({path:e})=>e,async downloadContent(e,t){const{sha:n,data:r}=await MO.downloadFile({...t,token:e});return TY[t.id]=n,YN.parseContent(r,`${t.fileId}/content`)},async uploadContent(e,t,n){if(!TY[n.id])try{await this.downloadContent(e,n)}catch(i7){}const r=TY[n.id];return delete TY[n.id],await MO.uploadFile({...n,token:e,content:YN.serializeContent(t),sha:r}),n},async publish(e,t,n,r,i){try{await this.downloadContent(e,r)}catch(i7){}const o=TY[r.id];return delete TY[r.id],await MO.uploadFile({...r,token:e,content:t,sha:o,commitMessage:i}),r},async openFile(e,t){if(!YN.openFileWithLocation(t)){let n;try{n=await this.downloadContent(e,t)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${t.path}.`)}let r=t.path;const i=r.lastIndexOf("/");i>-1&&i<r.length-1&&(r=r.slice(i+1));const o=r.lastIndexOf(".");o>0&&i<r.length&&(r=r.slice(0,o));const a=await EN.createFile({name:r,parentId:_H.getters["file/current"].parentId,text:n.text,properties:n.properties,discussions:n.discussions,comments:n.comments},!0);_H.commit("file/setCurrentId",a.id),EN.addSyncLocation({...t,fileId:a.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}GitHub`)}},makeLocation(e,t,n,r,i){return{providerId:this.id,sub:e.sub,owner:t,repo:n,branch:r,path:i}},listFileRevisions:async({token:e,syncLocation:t})=>(await MO.getCommits({...t,token:e})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login?i=t:n&&n.author&&(i=n.author);const o=`${MO.subPrefix}:${i.id||i.name}`;wO.addUserInfo({id:o,name:i.login||i.name,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date;return{id:r,sub:o,message:n.message,created:a?new Date(a).getTime():1}})),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const{data:i}=await MO.downloadFile({...n,token:e,branch:r});return YN.parseContent(i,t)}}),IY={},AY=new YN({id:"gitee",name:"Gitee",getToken:({sub:e})=>_H.getters["data/giteeTokensBySub"][e],getLocationUrl:({owner:e,repo:t,branch:n,path:r})=>`https://gitee.com/${encodeURIComponent(e)}/${encodeURIComponent(t)}/tree/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`,getLocationDescription:({path:e})=>e,async downloadContent(e,t){const{sha:n,data:r}=await EO.downloadFile({...t,token:e});return IY[t.id]=n,YN.parseContent(r,`${t.fileId}/content`)},async uploadContent(e,t,n){if(!IY[n.id])try{await this.downloadContent(e,n)}catch(i7){}const r=IY[n.id];return delete IY[n.id],await EO.uploadFile({...n,token:e,content:YN.serializeContent(t),sha:r}),n},async publish(e,t,n,r,i){try{await this.downloadContent(e,r)}catch(i7){}const o=IY[r.id];return delete IY[r.id],await EO.uploadFile({...r,token:e,content:t,sha:o,commitMessage:i}),r},async openFile(e,t){if(!YN.openFileWithLocation(t)){let n;try{n=await this.downloadContent(e,t)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${t.path}.`)}let r=t.path;const i=r.lastIndexOf("/");i>-1&&i<r.length-1&&(r=r.slice(i+1));const o=r.lastIndexOf(".");o>0&&i<r.length&&(r=r.slice(0,o));const a=await EN.createFile({name:r,parentId:_H.getters["file/current"].parentId,text:n.text,properties:n.properties,discussions:n.discussions,comments:n.comments},!0);_H.commit("file/setCurrentId",a.id),EN.addSyncLocation({...t,fileId:a.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}Gitee`)}},makeLocation(e,t,n,r,i){return{providerId:this.id,sub:e.sub,owner:t,repo:n,branch:r,path:i}},listFileRevisions:async({token:e,syncLocation:t})=>(await EO.getCommits({...t,token:e})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${EO.subPrefix}:${i.login}`;i.avatar_url&&i.avatar_url.endsWith(".png")&&!i.avatar_url.endsWith("no_portrait.png")&&(i.avatar_url=`${i.avatar_url}!avatar60`),wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date;return{id:r,sub:o,message:n.message,created:a?new Date(a).getTime():1}})),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const{data:i}=await EO.downloadFile({...n,token:e,branch:r});return YN.parseContent(i,t)}}),DY={},BY=new YN({id:"gitlab",name:"GitLab",getToken:({sub:e})=>_H.getters["data/gitlabTokensBySub"][e],getLocationUrl({sub:e,projectPath:t,branch:n,path:r}){return`${this.getToken({sub:e}).serverUrl}/${t}/blob/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`},getLocationDescription:({path:e})=>e,async downloadContent(e,t){const{sha:n,data:r}=await hj.downloadFile({...t,token:e});return DY[t.id]=n,YN.parseContent(r,`${t.fileId}/content`)},async uploadContent(e,t,n){const r={...n,projectId:await hj.getProjectId(e,n)};if(!DY[r.id])try{await this.downloadContent(e,r)}catch(i7){}const i=DY[r.id];return delete DY[r.id],await hj.uploadFile({...r,token:e,content:YN.serializeContent(t),sha:i}),r},async publish(e,t,n,r,i){const o={...r,projectId:await hj.getProjectId(e,r)};try{await this.downloadContent(e,o)}catch(i7){}const a=DY[o.id];return delete DY[o.id],await hj.uploadFile({...o,token:e,content:t,sha:a,commitMessage:i}),o},async openFile(e,t){const n={...t,projectId:await hj.getProjectId(e,t)};if(!YN.openFileWithLocation(n)){let t;try{t=await this.downloadContent(e,n)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${n.path}.`)}let r=n.path;const i=r.lastIndexOf("/");i>-1&&i<r.length-1&&(r=r.slice(i+1));const o=r.lastIndexOf(".");o>0&&i<r.length&&(r=r.slice(0,o));const a=await EN.createFile({name:r,parentId:_H.getters["file/current"].parentId,text:t.text,properties:t.properties,discussions:t.discussions,comments:t.comments},!0);_H.commit("file/setCurrentId",a.id),EN.addSyncLocation({...n,fileId:a.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}GitLab`)}},makeLocation(e,t,n,r){return{providerId:this.id,sub:e.sub,projectPath:t,branch:n,path:r}},listFileRevisions:async({token:e,syncLocation:t})=>(await hj.getCommits({...t,token:e})).map((t=>{const n=t.author_email||t.committer_email,r=`${hj.subPrefix}:${e.serverUrl}/${n}`;wO.addUserInfo({id:r,name:t.author_name||t.committer_name,imageUrl:""});const i=t.authored_date||t.committed_date||1;return{id:t.id,sub:r,message:t.commit&&t.commit.message,created:i?new Date(i).getTime():1}})),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const{data:i}=await hj.downloadFile({...n,token:e,branch:r});return YN.parseContent(i,t)}}),LY={},MY=new YN({id:"gitea",name:"Gitea",getToken:({sub:e})=>_H.getters["data/giteaTokensBySub"][e],getLocationUrl({sub:e,projectPath:t,branch:n,path:r}){return`${this.getToken({sub:e}).serverUrl}/${t}/src/branch/${encodeURIComponent(n)}/${UL.encodeUrlPath(r)}`},getLocationDescription:({path:e})=>e,async downloadContent(e,t){const{sha:n,data:r}=await gj.downloadFile({...t,token:e});return LY[t.id]=n,YN.parseContent(r,`${t.fileId}/content`)},async uploadContent(e,t,n){const r={...n,projectId:await gj.getProjectId(e,n)};if(!LY[r.id])try{await this.downloadContent(e,r)}catch(i7){}const i=LY[r.id];return delete LY[r.id],await gj.uploadFile({...r,token:e,content:YN.serializeContent(t),sha:i}),r},async publish(e,t,n,r,i){const o={...r,projectId:await gj.getProjectId(e,r)};try{await this.downloadContent(e,o)}catch(i7){}const a=LY[o.id];return delete LY[o.id],await gj.uploadFile({...o,token:e,content:t,sha:a,commitMessage:i}),o},async openFile(e,t){const n={...t,projectId:await gj.getProjectId(e,t)};if(!YN.openFileWithLocation(n)){let t;try{t=await this.downloadContent(e,n)}catch(i7){return void _H.dispatch("notification/error",`Could not open file ${n.path}.`)}let r=n.path;const i=r.lastIndexOf("/");i>-1&&i<r.length-1&&(r=r.slice(i+1));const o=r.lastIndexOf(".");o>0&&i<r.length&&(r=r.slice(0,o));const a=await EN.createFile({name:r,parentId:_H.getters["file/current"].parentId,text:t.text,properties:t.properties,discussions:t.discussions,comments:t.comments},!0);_H.commit("file/setCurrentId",a.id),EN.addSyncLocation({...n,fileId:a.id}),_H.dispatch("notification/info",`${_H.getters["file/current"].name}Gitea`)}},makeLocation(e,t,n,r){return{providerId:this.id,sub:e.sub,projectPath:t,branch:n,path:r}},listFileRevisions:async({token:e,syncLocation:t})=>(await gj.getCommits({...t,token:e})).map((({author:e,committer:t,commit:n,sha:r})=>{let i;e&&e.login?i=e:t&&t.login&&(i=t);const o=`${gj.subPrefix}:${i.login}`;wO.addUserInfo({id:o,name:i.login,imageUrl:i.avatar_url});const a=n.author&&n.author.date||n.committer&&n.committer.date;return{id:r,sub:o,message:n.message,created:a?new Date(a).getTime():1}})),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const{data:i}=await gj.downloadFile({...n,token:e,branch:r});return YN.parseContent(i,t)}}),FY=(e,t=()=>!0)=>Object.values(e).filter((e=>t(e))).sort(((e,t)=>e.name.localeCompare(t.name))),OY=(e,t)=>_H.dispatch("modal/open",{type:t,token:e}).then((e=>BU.createSyncLocation(e))),PY={components:{MenuEntry:_V},computed:{...AM("queue",["isSyncRequested"]),...BM("workspace",["syncToken"]),...BM("file",["isCurrentTemp"]),...BM("syncLocation",{syncLocations:"currentWithWorkspaceSyncLocation"}),locationCount(){return Object.keys(this.syncLocations).length},currentFileName:()=>`"${_H.getters["file/current"].name}"`,dropboxTokens:()=>FY(_H.getters["data/dropboxTokensBySub"]),githubTokens:()=>FY(_H.getters["data/githubTokensBySub"]),giteeTokens:()=>FY(_H.getters["data/giteeTokensBySub"]),gitlabTokens:()=>FY(_H.getters["data/gitlabTokensBySub"]),giteaTokens:()=>FY(_H.getters["data/giteaTokensBySub"]),googleDriveTokens:()=>FY(_H.getters["data/googleTokensBySub"],(e=>e.isDrive)),noToken(){return!(this.googleDriveTokens.length||this.dropboxTokens.length||this.githubTokens.length||this.giteeTokens.length)}},methods:{requestSync(){this.isSyncRequested||BU.requestSync(!0)},async manageSync(){try{await _H.dispatch("modal/open","syncManagement")}catch(i7){}},async addDropboxAccount(){try{await _H.dispatch("modal/open",{type:"dropboxAccount"}),await wY.addAccount(!_H.getters["data/localSettings"].dropboxRestrictedAccess)}catch(i7){}},async addGithubAccount(){try{await _H.dispatch("modal/open",{type:"githubAccount"}),await MO.addAccount(_H.getters["data/localSettings"].githubRepoFullAccess)}catch(i7){}},async addGiteeAccount(){try{await _H.dispatch("modal/open",{type:"giteeAccount"}),await EO.addAccount()}catch(i7){}},async addGitlabAccount(){try{const{serverUrl:e,applicationId:t,applicationSecret:n}=await _H.dispatch("modal/open",{type:"gitlabAccount"});await hj.addAccount(e,t,n)}catch(i7){}},async addGiteaAccount(){try{const e=await _H.dispatch("modal/open",{type:"giteaAccount"});await gj.addAccount(e)}catch(i7){}},async addGoogleDriveAccount(){try{await _H.dispatch("modal/open",{type:"googleDriveAccount"}),await Tj.addDriveAccount(!_H.getters["data/localSettings"].googleDriveRestrictedAccess)}catch(i7){}},async openDropbox(e){const t=await wY.openChooser(e);_H.dispatch("queue/enqueue",(async()=>{await SY.openFiles(e,t),OF.addBadge("openFromDropbox")}))},async saveDropbox(e){try{await OY(e,"dropboxSave"),OF.addBadge("saveOnDropbox")}catch(i7){}},async openGoogleDrive(e){const t=await Tj.openPicker(e,"doc");_H.dispatch("queue/enqueue",(async()=>{await kY.openFiles(e,t),OF.addBadge("openFromGoogleDrive")}))},async saveGoogleDrive(e){try{await OY(e,"googleDriveSave"),OF.addBadge("saveOnGoogleDrive")}catch(i7){}},async openGithub(e){try{const t=await _H.dispatch("modal/open",{type:"githubOpen",token:e});_H.dispatch("queue/enqueue",(async()=>{await EY.openFile(e,t),OF.addBadge("openFromGithub")}))}catch(i7){}},async saveGithub(e){try{await OY(e,"githubSave"),OF.addBadge("saveOnGithub")}catch(i7){}},async openGitee(e){try{const t=await _H.dispatch("modal/open",{type:"giteeOpen",token:e});_H.dispatch("queue/enqueue",(async()=>{await AY.openFile(e,t),OF.addBadge("openFromGitee")}))}catch(i7){}},async saveGitee(e){try{await OY(e,"giteeSave"),OF.addBadge("saveOnGitee")}catch(i7){}},async saveGist(e){try{await OY(e,"gistSync"),OF.addBadge("saveOnGist")}catch(i7){}},async saveGiteeGist(e){try{await OY(e,"giteeGistSync"),OF.addBadge("saveOnGiteeGist")}catch(i7){}},async openGitlab(e){try{const t=await _H.dispatch("modal/open",{type:"gitlabOpen",token:e});_H.dispatch("queue/enqueue",(async()=>{await BY.openFile(e,t),OF.addBadge("openFromGitlab")}))}catch(i7){}},async openGitea(e){try{const t=await _H.dispatch("modal/open",{type:"giteaOpen",token:e});_H.dispatch("queue/enqueue",(async()=>{await MY.openFile(e,t),OF.addBadge("openFromGitea")}))}catch(i7){}},async saveGitlab(e){try{await OY(e,"gitlabSave"),OF.addBadge("saveOnGitlab")}catch(i7){}},async saveGitea(e){try{await OY(e,"giteaSave"),OF.addBadge("saveOnGitea")}catch(i7){}}}},NY={class:"side-bar__panel side-bar__panel--menu"},jY={key:0,class:"side-bar__info"},zY={key:1},RY={key:0,class:"side-bar__info"},qY={class:"menu-entry__label menu-entry__label--count"},$Y={key:1,class:"side-bar__info"};const UY=XH(PY,[["render",function(e,t,n,r,i,o){const a=wn("icon-sync"),s=wn("menu-entry"),l=wn("icon-view-list"),c=wn("icon-provider");return $r(),Gr("div",NY,[e.isCurrentTemp?($r(),Gr("div",jY,[Jr("p",null,Z(o.currentFileName)+" ",1)])):($r(),Gr("div",zY,[e.syncLocations.length?($r(),Gr("div",RY,[Jr("p",null,Z(o.currentFileName)+" ",1),Qr(s,{onClick:o.requestSync},{icon:Yt((()=>[Qr(a)])),default:Yt((()=>[t[0]||(t[0]=Jr("div",null,"",-1)),t[1]||(t[1]=Jr("span",null,"/",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.manageSync},{icon:Yt((()=>[Qr(l)])),default:Yt((()=>[Jr("div",null,[Jr("div",qY,Z(o.locationCount),1),t[2]||(t[2]=ti(" "))]),Jr("span",null," "+Z(o.currentFileName)+" ",1)])),_:1},8,["onClick"])])):o.noToken?($r(),Gr("div",$Y,t[3]||(t[3]=[Jr("p",null,"",-1)]))):ri("",!0),t[24]||(t[24]=Jr("hr",null,null,-1)),($r(!0),Gr(Pr,null,En(o.dropboxTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openDropbox(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"dropbox"})])),default:Yt((()=>[t[4]||(t[4]=Jr("div",null," Dropbox ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveDropbox(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"dropbox"})])),default:Yt((()=>[t[5]||(t[5]=Jr("div",null,"Dropbox",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.githubTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openGithub(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[6]||(t[6]=Jr("div",null," GitHub ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGithub(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[7]||(t[7]=Jr("div",null,"GitHub",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGist(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gist"})])),default:Yt((()=>[t[8]||(t[8]=Jr("div",null,"GitHubGist",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.giteeTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openGitee(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitee"})])),default:Yt((()=>[t[9]||(t[9]=Jr("div",null," Gitee ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGitee(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitee"})])),default:Yt((()=>[t[10]||(t[10]=Jr("div",null,"Gitee",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGiteeGist(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"giteegist"})])),default:Yt((()=>[t[11]||(t[11]=Jr("div",null,"GiteeGist",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.gitlabTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openGitlab(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitlab"})])),default:Yt((()=>[t[12]||(t[12]=Jr("div",null," GitLab ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGitlab(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitlab"})])),default:Yt((()=>[t[13]||(t[13]=Jr("div",null,"GitLab",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.giteaTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openGitea(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[14]||(t[14]=Jr("div",null," Gitea ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGitea(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[15]||(t[15]=Jr("div",null,"Gitea",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.googleDriveTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.openGoogleDrive(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[16]||(t[16]=Jr("div",null," Google Drive ",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.saveGoogleDrive(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[17]||(t[17]=Jr("div",null,"Google Drive",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),t[25]||(t[25]=Jr("hr",null,null,-1)),Qr(s,{onClick:o.addDropboxAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"dropbox"})])),default:Yt((()=>[t[18]||(t[18]=Jr("span",null," Dropbox ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGithubAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[19]||(t[19]=Jr("span",null," GitHub ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteeAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitee"})])),default:Yt((()=>[t[20]||(t[20]=Jr("span",null," Gitee ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGitlabAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitlab"})])),default:Yt((()=>[t[21]||(t[21]=Jr("span",null," GitLab ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteaAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[22]||(t[22]=Jr("span",null," Gitea ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGoogleDriveAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[23]||(t[23]=Jr("span",null," Google Drive ",-1))])),_:1},8,["onClick"])]))])}]]),HY=(e,t)=>dO.request({...t,headers:{...t.headers||{},Authorization:`Bearer ${e.accessToken}`}}).then((e=>e.body)),WY={
/**
   * https://developer.wordpress.com/docs/oauth2/
   */
async startOauth2(e=null,t=!1){await dO.getServerConf();const n=_H.getters["data/serverConf"].wordpressClientId,{accessToken:r,expiresIn:i}=await dO.startOauth2("https://public-api.wordpress.com/oauth2/authorize",{client_id:n,response_type:"token",scope:"global"},t),o=await HY({accessToken:r},{url:"https://public-api.wordpress.com/rest/v1.1/me"});if(e&&`${o.ID}`!==e)throw new Error("WordPress account ID not expected.");const a={accessToken:r,expiresOn:Date.now()+1e3*i,name:o.display_name,sub:`${o.ID}`};return _H.dispatch("data/addWordpressToken",a),a},async refreshToken(e){const{sub:t}=e,n=_H.getters["data/wordpressTokensBySub"][t];return n.expiresOn>Date.now()+3e5?n:(await _H.dispatch("modal/open",{type:"providerRedirection",name:"WordPress"}),this.startOauth2(t))},async addAccount(e=!1){const t=await this.startOauth2(e);return OF.addBadge("addWordpressAccount"),t},
/**
   * https://developer.wordpress.com/docs/api/1.2/post/sites/%24site/posts/new/
   * https://developer.wordpress.com/docs/api/1.2/post/sites/%24site/posts/%24post_ID/
   */
async uploadPost({token:e,domain:t,siteId:n,postId:r,title:i,content:o,tags:a,categories:s,excerpt:l,author:c,featuredImage:u,status:h,date:d}){const p=await this.refreshToken(e);return HY(p,{method:"POST",url:`https://public-api.wordpress.com/rest/v1.2/sites/${n||t}/posts/${r||"new"}`,body:{content:o,title:i,tags:a,categories:s,excerpt:l,author:c,featured_image:u||"",status:h,date:d&&d.toISOString()}})}},GY=(e,t)=>dO.request({...t,headers:{...t.headers||{},Authorization:`Bearer ${e.accessToken}`}}).then((e=>e.body)),VY={
/**
   * https://support.zendesk.com/hc/en-us/articles/203663836-Using-OAuth-authentication-with-your-application
   */
async startOauth2(e,t,n=null,r=!1){const{accessToken:i}=await dO.startOauth2(`https://${e}.zendesk.com/oauth/authorizations/new`,{client_id:t,response_type:"token",scope:"read hc:write"},r),{user:o}=await GY({accessToken:i},{url:`https://${e}.zendesk.com/api/v2/users/me.json`}),a=`${e}/${o.id}`;if(n&&a!==n)throw new Error("Zendesk account ID not expected.");const s={accessToken:i,name:o.name,subdomain:e,sub:a};return _H.dispatch("data/addZendeskToken",s),s},async addAccount(e,t){const n=await this.startOauth2(e,t);return OF.addBadge("addZendeskAccount"),n},
/**
   * https://developer.zendesk.com/rest_api/docs/help_center/articles
   */
async uploadArticle({token:e,sectionId:t,articleId:n,title:r,content:i,labels:o,locale:a,isDraft:s}){const l={title:r,body:i,locale:a,draft:s};if(n)return await GY(e,{method:"PUT",url:`https://${e.subdomain}.zendesk.com/api/v2/help_center/articles/${n}/translations/${a}.json`,body:{translation:l}}),o&&await GY(e,{method:"PUT",url:`https://${e.subdomain}.zendesk.com/api/v2/help_center/articles/${n}.json`,body:{article:{label_names:o}}}),n;o&&(l.label_names=o);return`${(await GY(e,{method:"POST",url:`https://${e.subdomain}.zendesk.com/api/v2/help_center/sections/${t}/articles.json`,body:{article:l}})).article.id}`}},YY=(e,t=()=>!0)=>Object.values(e).filter((e=>t(e))).sort(((e,t)=>e.name.localeCompare(t.name))),KY=(e,t)=>async n=>{try{const r=await _H.dispatch("modal/open",{type:e,token:n});EG(r,t)}catch(i7){}},XY={components:{MenuEntry:_V},computed:{...AM("queue",["isPublishRequested"]),...BM("file",["isCurrentTemp"]),...BM("publishLocation",{publishLocations:"current"}),locationCount(){return Object.keys(this.publishLocations).length},currentFileName:()=>`"${_H.getters["file/current"].name}"`,bloggerTokens:()=>YY(_H.getters["data/googleTokensBySub"],(e=>e.isBlogger)),dropboxTokens:()=>YY(_H.getters["data/dropboxTokensBySub"]),githubTokens:()=>YY(_H.getters["data/githubTokensBySub"]),giteeTokens:()=>YY(_H.getters["data/giteeTokensBySub"]),gitlabTokens:()=>YY(_H.getters["data/gitlabTokensBySub"]),giteaTokens:()=>YY(_H.getters["data/giteaTokensBySub"]),googleDriveTokens:()=>YY(_H.getters["data/googleTokensBySub"],(e=>e.isDrive)),wordpressTokens:()=>YY(_H.getters["data/wordpressTokensBySub"]),zendeskTokens:()=>YY(_H.getters["data/zendeskTokensBySub"]),noToken(){return!(this.bloggerTokens.length||this.dropboxTokens.length||this.githubTokens.length||this.giteeTokens.length||this.gitlabTokens.length||this.giteaTokens.length||this.googleDriveTokens.length||this.wordpressTokens.length||this.zendeskTokens.length)}},methods:{requestPublish(){this.isPublishRequested||SG()},async managePublish(){try{await _H.dispatch("modal/open","publishManagement")}catch(i7){}},async addBloggerAccount(){try{await Tj.addBloggerAccount()}catch(i7){}},async addDropboxAccount(){try{await _H.dispatch("modal/open",{type:"dropboxAccount"}),await wY.addAccount(!_H.getters["data/localSettings"].dropboxRestrictedAccess)}catch(i7){}},async addGithubAccount(){try{await _H.dispatch("modal/open",{type:"githubAccount"}),await MO.addAccount(_H.getters["data/localSettings"].githubRepoFullAccess)}catch(i7){}},async addGiteeAccount(){try{await _H.dispatch("modal/open",{type:"giteeAccount"}),await EO.addAccount()}catch(i7){}},async addGitlabAccount(){try{const{serverUrl:e,applicationId:t,applicationSecret:n}=await _H.dispatch("modal/open",{type:"gitlabAccount"});await hj.addAccount(e,t,n)}catch(i7){}},async addGiteaAccount(){try{const e=await _H.dispatch("modal/open",{type:"giteaAccount"});await gj.addAccount(e)}catch(i7){}},async addGoogleDriveAccount(){try{await _H.dispatch("modal/open",{type:"googleDriveAccount"}),await Tj.addDriveAccount(!_H.getters["data/localSettings"].googleDriveRestrictedAccess)}catch(i7){}},async addWordpressAccount(){try{await WY.addAccount()}catch(i7){}},async addZendeskAccount(){try{const{subdomain:e,clientId:t}=await _H.dispatch("modal/open",{type:"zendeskAccount"});await VY.addAccount(e,t)}catch(i7){}},publishBlogger:KY("bloggerPublish","publishToBlogger"),publishBloggerPage:KY("bloggerPagePublish","publishToBloggerPage"),publishDropbox:KY("dropboxPublish","publishToDropbox"),publishGithub:KY("githubPublish","publishToGithub"),publishGist:KY("gistPublish","publishToGist"),publishGitee:KY("giteePublish","publishToGitee"),publishGiteeGist:KY("giteeGistPublish","publishGiteeGist"),publishGitlab:KY("gitlabPublish","publishToGitlab"),publishGitea:KY("giteaPublish","publishToGitea"),publishGoogleDrive:KY("googleDrivePublish","publishToGoogleDrive"),publishWordpress:KY("wordpressPublish","publishToWordPress"),publishZendesk:KY("zendeskPublish","publishToZendesk")}},ZY={class:"side-bar__panel side-bar__panel--menu"},JY={key:0,class:"side-bar__info"},QY={key:1},eK={key:0,class:"side-bar__info"},tK={class:"menu-entry__label menu-entry__label--count"},nK={key:1,class:"side-bar__info"};const rK=XH(XY,[["render",function(e,t,n,r,i,o){const a=wn("icon-upload"),s=wn("menu-entry"),l=wn("icon-view-list"),c=wn("icon-provider");return $r(),Gr("div",ZY,[e.isCurrentTemp?($r(),Gr("div",JY,[Jr("p",null,Z(o.currentFileName)+" ",1)])):($r(),Gr("div",QY,[e.publishLocations.length?($r(),Gr("div",eK,[Jr("p",null,Z(o.currentFileName)+" ",1),Qr(s,{onClick:o.requestPublish},{icon:Yt((()=>[Qr(a)])),default:Yt((()=>[t[0]||(t[0]=Jr("div",null,"",-1)),Jr("span",null," "+Z(o.currentFileName)+" ",1)])),_:1},8,["onClick"]),Qr(s,{onClick:o.managePublish},{icon:Yt((()=>[Qr(l)])),default:Yt((()=>[Jr("div",null,[Jr("div",tK,Z(o.locationCount),1),t[1]||(t[1]=ti(" "))]),Jr("span",null," "+Z(o.currentFileName)+" ",1)])),_:1},8,["onClick"])])):o.noToken?($r(),Gr("div",nK,t[2]||(t[2]=[Jr("p",null,"",-1)]))):ri("",!0),t[24]||(t[24]=Jr("hr",null,null,-1)),($r(!0),Gr(Pr,null,En(o.bloggerTokens,(e=>($r(),Gr("div",{key:"blogger-"+e.sub},[Qr(s,{onClick:t=>o.publishBlogger(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"blogger"})])),default:Yt((()=>[t[3]||(t[3]=Jr("div",null," Blogger",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.publishBloggerPage(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"bloggerPage"})])),default:Yt((()=>[t[4]||(t[4]=Jr("div",null," Blogger Page",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.dropboxTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishDropbox(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"dropbox"})])),default:Yt((()=>[t[5]||(t[5]=Jr("div",null," Dropbox",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.githubTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishGist(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gist"})])),default:Yt((()=>[t[6]||(t[6]=Jr("div",null," GitHubGist",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.publishGithub(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[7]||(t[7]=Jr("div",null," GitHub",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.giteeTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishGiteeGist(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"giteegist"})])),default:Yt((()=>[t[8]||(t[8]=Jr("div",null," GiteeGist",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"]),Qr(s,{onClick:t=>o.publishGitee(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitee"})])),default:Yt((()=>[t[9]||(t[9]=Jr("div",null," Gitee",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.gitlabTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishGitlab(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitlab"})])),default:Yt((()=>[t[10]||(t[10]=Jr("div",null," GitLab",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.giteaTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishGitea(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[11]||(t[11]=Jr("div",null," Gitea",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.googleDriveTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishGoogleDrive(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[12]||(t[12]=Jr("div",null," Google Drive",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.wordpressTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishWordpress(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"wordpress"})])),default:Yt((()=>[t[13]||(t[13]=Jr("div",null," WordPress",-1)),Jr("span",null,Z(e.name),1)])),_:2},1032,["onClick"])])))),128)),($r(!0),Gr(Pr,null,En(o.zendeskTokens,(e=>($r(),Gr("div",{key:e.sub},[Qr(s,{onClick:t=>o.publishZendesk(e)},{icon:Yt((()=>[Qr(c,{"provider-id":"zendesk"})])),default:Yt((()=>[t[14]||(t[14]=Jr("div",null," Zendesk Help Center",-1)),Jr("span",null,Z(e.name)+"  "+Z(e.subdomain),1)])),_:2},1032,["onClick"])])))),128)),t[25]||(t[25]=Jr("hr",null,null,-1)),Qr(s,{onClick:o.addBloggerAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"blogger"})])),default:Yt((()=>[t[15]||(t[15]=Jr("span",null," Blogger ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addDropboxAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"dropbox"})])),default:Yt((()=>[t[16]||(t[16]=Jr("span",null," Dropbox ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGithubAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[17]||(t[17]=Jr("span",null," GitHub ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteeAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitee"})])),default:Yt((()=>[t[18]||(t[18]=Jr("span",null," Gitee ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGitlabAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitlab"})])),default:Yt((()=>[t[19]||(t[19]=Jr("span",null," GitLab ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGiteaAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[20]||(t[20]=Jr("span",null," Gitea ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addGoogleDriveAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[21]||(t[21]=Jr("span",null," Google Drive ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addWordpressAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"wordpress"})])),default:Yt((()=>[t[22]||(t[22]=Jr("span",null," WordPress ",-1))])),_:1},8,["onClick"]),Qr(s,{onClick:o.addZendeskAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"zendesk"})])),default:Yt((()=>[t[23]||(t[23]=Jr("span",null," Zendesk ",-1))])),_:1},8,["onClick"])]))])}]]),iK={class:"user-name"};const oK=XH({props:["userId"],computed:{sanitizedUserId(){return wO.sanitizeUserId(this.userId)},name(){const e=_H.state.userInfo.itemsById[this.sanitizedUserId];return e?e.name:"Someone"}},watch:{sanitizedUserId:{handler:e=>wO.addUserId(e),immediate:!0}}},[["render",function(e,t,n,r,i,o){return $r(),Gr("span",iK,Z(o.name),1)}]]);let aK,sK,lK,cK=[],uK=[];const hK={components:{MenuEntry:_V,UserImage:FV,UserName:oK},data:()=>({allRevisions:[],loading:!1,showCount:30,syncLocationId:null}),computed:{...BM("data",["syncDataByItemId"]),...BM("syncLocation",{syncLocations:"currentWithWorkspaceSyncLocation"}),...AM("content",["revisionContent"]),syncLocation(){return UL.someResult(this.syncLocations,(e=>e.id===this.syncLocationId?e:null))},syncLocationProviderName(){return this.syncLocation?GN.providersById[this.syncLocation.providerId].name:null},currentFileName:()=>_H.getters["file/current"].name,historyContext(){const{syncLocation:e}=this;if(e){const t=GN.providersById[e.providerId].getToken(e),n=_H.getters["file/current"].id,r=`${n}/content`,i={token:t,fileId:n,contentId:r,syncLocation:this.syncLocation};if("main"!==e.id)return i;const{syncDataByItemId:o}=this,a=o[n],s=o[r];if(a&&s)return{...i,fileSyncDataId:a.id,contentSyncDataId:s.id}}return null},historyContextHash(){return UL.serializeObject(this.historyContext)},revisions(){return this.allRevisions.slice().sort(((e,t)=>t.created-e.created)).slice(0,this.showCount)},revisionsWithSpacer(){let e=0;return this.revisions.map((t=>{const n={...t,spacer:t.created+216e5<e};return e=t.created,n}))},showMoreButton(){return this.showCount<this.allRevisions.length}},methods:{...DM("content",["setRevisionContent"]),async signin(){try{await EO.signin(),await BU.afterSignIn(),BU.requestSync()}catch(i7){}},async signinWithGithub(){try{await MO.signin(),await BU.afterSignIn(),BU.requestSync()}catch(i7){}},close(){_H.dispatch("data/setSideBarPanel","menu")},showMore(){this.showCount+=30},open(e){let t=lK[e.id];if(!t){const n=UL.deepCopy(this.historyContext);if(n){const r=GN.providersById[this.syncLocation.providerId];t=new Promise(((t,i)=>_H.dispatch("queue/enqueue",(()=>r.getFileRevisionContent({...n,revisionId:e.id}).then(t,i))))),lK[e.id]=t,t.catch((t=>{_H.dispatch("notification/error",t),lK[e.id]=null}))}}t&&t.then((e=>_H.dispatch("content/setRevisionContent",e)))},refreshHighlighters(){const{revisionContent:e}=this;if(cK.forEach((e=>e.stop())),cK=[],uK.forEach((e=>e.stop())),uK=[],e){let t=0;e.diffs.forEach((([e,n])=>{if(e){const r=["revision-diff","revision-diff--"+(e>0?"insert":"delete")],i={start:t,end:t+n.length};cK.push(new c$([`revision-diff--${UL.uid()}`,...r],i)),uK.push(new p$([`revision-diff--${UL.uid()}`,...r],i))}t+=n.length}))}}},watch:{
// Fix syncLocationId
syncLocation:{immediate:!0,handler(e){const t=this.syncLocations[0];t&&(e?e.id!==t.id&&OF.addBadge("chooseHistory"):this.syncLocationId=t.id)}},
// Load revision list on context changes
historyContextHash:{immediate:!0,handler(){this.allRevisions=[];const e=UL.deepCopy(this.historyContext);if(e){if(this.historyContextHash!==aK){this.setRevisionContent(),aK=this.historyContextHash,lK={};const t=GN.providersById[this.syncLocation.providerId];sK=new Promise(((n,r)=>_H.dispatch("queue/enqueue",(()=>t.listFileRevisions(e).then(n,r))))).catch((e=>(_H.dispatch("notification/error",e),aK=null,[])))}sK&&(this.loading=!0,sK.then((e=>{this.loading=!1,this.allRevisions=e})))}}},
// Load each revision on revision list changes
revisions(e){const{historyContext:t}=this;t&&_H.dispatch("queue/enqueue",(()=>UL.awaitSequence(e,(async n=>{if(!this.destroyed&&this.revisions===e&&this.historyContext===t){const e=GN.providersById[this.syncLocation.providerId];await e.loadFileRevision({...t,revision:n})}}))))},
// Refresh highlighters on open/close revision
revisionContent:{immediate:!0,handler(){this.refreshHighlighters()}}},created(){this.onKeyup=e=>{27===e.which&&this.setRevisionContent()},window.addEventListener("keyup",this.onKeyup)},destroyed(){this.setRevisionContent(),this.refreshHighlighters(),window.removeEventListener("keyup",this.onKeyup),this.destroyed=!0}},dK={class:"history side-bar__panel side-bar__panel--menu"},pK={class:"side-bar__info"},fK={key:0},mK=["value"],gK={key:1},vK={key:2},yK={key:3},bK={key:4,class:"menu-entry menu-entry--info flex flex--row flex--align-center"},_K={class:"menu-entry__icon menu-entry__icon--image"},wK={key:0},kK=["href"],xK={key:1},CK={key:0,class:"history__spacer"},SK=["onClick"],TK={class:"revision__icon"},EK={class:"revision__header flex flex--column"},IK={class:"revision__created"},AK={class:"revision__msg"},DK={key:0,class:"history__spacer history__spacer--last"},BK={key:1,class:"flex flex--row flex--end"};const LK=XH(hK,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("user-image"),l=wn("user-name");return $r(),Gr("div",dK,[Jr("div",pK,[e.syncLocations.length>1?($r(),Gr("p",fK,[Kt(Jr("select",{slot:"field",class:"textfield","onUpdate:modelValue":t[0]||(t[0]=t=>e.syncLocationId=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.syncLocations,(e=>($r(),Gr("option",{key:e.id,value:e.id},Z(e.description),9,mK)))),128))],544),[[ao,e.syncLocationId]])])):ri("",!0),o.historyContext?e.loading?($r(),Gr("p",vK,"")):o.revisionsWithSpacer.length?($r(),Gr("div",bK,[Jr("div",_K,[Qr(a,{"provider-id":o.syncLocation.providerId},null,8,["provider-id"])]),o.syncLocation.url?($r(),Gr("span",wK,[t[10]||(t[10]=ti("  ")),Jr("a",{href:o.syncLocation.url,target:"_blank"},Z(o.syncLocationProviderName),9,kK),t[11]||(t[11]=ti(". "))])):($r(),Gr("span",xK,"  "+Z(o.syncLocationProviderName)+". ",1))])):($r(),Gr("p",yK,[Jr("b",null,Z(o.currentFileName),1),t[9]||(t[9]=ti(" ."))])):($r(),Gr("p",gK,[t[5]||(t[5]=ti(" ")),Jr("b",null,Z(o.currentFileName),1),t[6]||(t[6]=ti("   ")),Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...e)=>o.signin&&o.signin(...e))}," Gitee"),t[7]||(t[7]=ti("  ")),Jr("a",{href:"javascript:void(0)",onClick:t[3]||(t[3]=(...e)=>o.signinWithGithub&&o.signinWithGithub(...e))}," GitHub"),t[8]||(t[8]=ti(" "))]))]),Jr("div",null,[($r(!0),Gr(Pr,null,En(o.revisionsWithSpacer,(t=>($r(),Gr("div",{class:"revision",key:t.id},[t.spacer?($r(),Gr("div",CK)):ri("",!0),Jr("a",{class:"revision__button button flex flex--row",href:"javascript:void(0)",onClick:e=>o.open(t)},[Jr("div",TK,[Qr(s,{"user-id":t.sub},null,8,["user-id"])]),Jr("div",EK,[Qr(l,{"user-id":t.sub},null,8,["user-id"]),Jr("div",IK,Z(t.created|e.formatTime),1),Jr("div",AK,Z(t.message),1)])],8,SK)])))),128))]),o.revisions.length?($r(),Gr("div",DK)):ri("",!0),o.showMoreButton?($r(),Gr("div",BK,[Jr("button",{class:"history__button button",onClick:t[4]||(t[4]=(...e)=>o.showMore&&o.showMore(...e))},"")])):ri("",!0)])}]]),MK=new WM(_H.getters["data/computedSettings"].turndown),FK=e=>new Promise((t=>{if(e){const n=new FileReader;n.onload=e=>{const n=e.target.result;n.match(/\uFFFD/)?_H.dispatch("notification/error","File is not readable."):t(n)},n.readAsText(e)}})),OK={components:{MenuEntry:_V},computed:BM(["isSponsor"]),methods:{async onImportMarkdown(e){const t=e.target.files[0],n=await FK(t),r=await EN.createFile({...YN.parseContent(n),name:t.name});_H.commit("file/setCurrentId",r.id),OF.addBadge("importMarkdown")},async onImportHtml(e){const t=e.target.files[0],n=await FK(t),r=CF.sanitizeHtml(n).replace(/&#160;/g," "),i=await EN.createFile({...YN.parseContent(MK.turndown(r)),name:t.name});_H.commit("file/setCurrentId",i.id),OF.addBadge("importHtml")},async exportMarkdown(){const e=_H.getters["file/current"];try{await vG.exportToDisk(e.id,"md"),OF.addBadge("exportMarkdown")}catch(i7){}},async exportHtml(){try{await _H.dispatch("modal/open","htmlExport")}catch(i7){}},async exportPdf(){try{await _H.dispatch("modal/open","pdfExport")}catch(i7){}},async exportPandoc(){try{await _H.dispatch("modal/open","pandocExport")}catch(i7){}}}},PK={class:"side-bar__panel side-bar__panel--menu"},NK={class:"menu-entry button flex flex--row flex--align-center",for:"import-markdown-file-input"},jK={class:"menu-entry__icon flex flex--column flex--center"},zK={class:"menu-entry button flex flex--row flex--align-center",for:"import-html-file-input"},RK={class:"menu-entry__icon flex flex--column flex--center"};const qK=XH(OK,[["render",function(e,t,n,r,i,o){const a=wn("icon-upload"),s=wn("icon-download"),l=wn("menu-entry");return $r(),Gr("div",PK,[Jr("input",{class:"hidden-file",id:"import-markdown-file-input",type:"file",onChange:t[0]||(t[0]=(...e)=>o.onImportMarkdown&&o.onImportMarkdown(...e))},null,32),Jr("label",NK,[Jr("div",jK,[Qr(a)]),t[2]||(t[2]=Jr("div",{class:"flex flex--column"},[Jr("div",null," Markdown"),Jr("span",null,"")],-1))]),Jr("input",{class:"hidden-file",id:"import-html-file-input",type:"file",onChange:t[1]||(t[1]=(...e)=>o.onImportHtml&&o.onImportHtml(...e))},null,32),Jr("label",zK,[Jr("div",RK,[Qr(a)]),t[3]||(t[3]=Jr("div",{class:"flex flex--column"},[Jr("div",null," HTML"),Jr("span",null,"HTMLMarkdown")],-1))]),t[8]||(t[8]=Jr("hr",null,null,-1)),Qr(l,{onClick:o.exportMarkdown},{icon:Yt((()=>[Qr(s)])),default:Yt((()=>[t[4]||(t[4]=Jr("div",null," Markdown",-1)),t[5]||(t[5]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),Qr(l,{onClick:o.exportHtml},{icon:Yt((()=>[Qr(s)])),default:Yt((()=>[t[6]||(t[6]=Jr("div",null," HTML",-1)),t[7]||(t[7]=Jr("span",null,"HTML",-1))])),_:1},8,["onClick"])])}]]),$K={async importBackup(e){const t={},n={},r={},i={},o={},a={},s={},l={trash:"trash"},c=JSON.parse(e);Object.entries(c).forEach((([e,c])=>{if(c){const u=e.match(/^file\.([^.]+)\.([^.]+)$/);if(u){const[,e,n]=u;"title"===n?t[e]=c:"content"===n&&(i[e]=c)}else if("folder"===c.type)l[e]=UL.uid(),n[e]=c.name,r[e]=`${c.parentId||""}`;else if("file"===c.type)t[e]=c.name,r[e]=`${c.parentId||""}`;else if("content"===c.type){const[t]=e.split("/");t&&(i[t]=c.text,o[t]=c.properties,a[t]=c.discussions,s[t]=c.comments)}}})),await UL.awaitSequence(Object.keys(n),(async e=>EN.setOrPatchItem({id:l[e],type:"folder",name:n[e],parentId:l[r[e]]}))),await UL.awaitSequence(Object.keys(t),(async e=>EN.createFile({name:t[e],parentId:l[r[e]],text:i[e],properties:o[e],discussions:a[e],comments:s[e]},!0)))}},UK={class:"side-bar__panel side-bar__panel--menu"},HK={class:"menu-entry button flex flex--row flex--align-center",for:"import-backup-file-input"},WK={class:"menu-entry__icon flex flex--column flex--center"};const GK=XH({components:{MenuEntry:_V},computed:{workspaceId:()=>_H.getters["workspace/currentWorkspace"].id},methods:{onImportBackup(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;t.match(/\uFFFD/)?_H.dispatch("notification/error","File is not readable."):$K.importBackup(t)};const n=t.slice(0,1e7);e.readAsText(n)}},exportWorkspace(){const e={};NN.getWorkspaceItems(this.workspaceId,(t=>{e[t.id]=t}),(()=>{const t=JSON.stringify(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});pG.saveAs(n,"StackEdit workspace.json")}))}}},[["render",function(e,t,n,r,i,o){const a=wn("icon-content-save"),s=wn("menu-entry");return $r(),Gr("div",UK,[Jr("input",{class:"hidden-file",id:"import-backup-file-input",type:"file",onChange:t[0]||(t[0]=(...e)=>o.onImportBackup&&o.onImportBackup(...e))},null,32),Jr("label",HK,[Jr("div",WK,[Qr(a)]),t[1]||(t[1]=Jr("div",{class:"flex flex--column"},"  ",-1))]),Qr(s,{onClick:o.exportWorkspace},{icon:Yt((()=>[Qr(a)])),default:Yt((()=>[t[2]||(t[2]=ti("  "))])),_:1},8,["onClick"])])}]]),VK=["disabled"];const YK=XH({props:["value","lang","disabled","scrollClass"],mounted(){const e=this.$refs.codeEditorRoot;let t=e;const n=this.scrollClass||"modal";for(;t&&!t.classList.contains(n);)t=t.parentNode;if(t){const n=SF(e,t);n.on("contentChanged",(e=>this.$emit("changed",e))),n.init({content:this.value,sectionHighlighter:e=>dg.highlight(e.text,dg.languages[this.lang],this.lang)}),n.toggleEditable(!this.disabled)}}},[["render",function(e,t,n,r,i,o){return $r(),Gr("pre",{ref:"codeEditorRoot",class:"code-editor textfield prism",disabled:n.disabled},null,8,VK)}]]),KK={components:{MenuEntry:_V,CodeEditor:YK},data:()=>({themeStyleText:"",styleEles:[]}),computed:{...BM("theme",["currEditTheme"])},methods:{saveStyleText(){const e=this.findByTheme(this.currEditTheme);e&&this.themeStyleText&&(e.innerHTML=this.themeStyleText,_H.dispatch("theme/setCustomEditThemeStyle",this.themeStyleText),_H.dispatch("notification/info",""))},findByTheme(e){const t=this.styleEles.filter((t=>t.id===`edit-theme-${e}`));return t.length?t[0]:null},changeText(e){this.themeStyleText=e},close(){_H.dispatch("data/setSideBarPanel","menu")},initStyle(e){if("default"===e)return;const t=e||this.currEditTheme;if(this.findByTheme(t))return;const n=`edit-theme-${t}`,r=document.getElementById(n);r?this.styleEles.push(r):setTimeout((()=>this.initStyle(t)),1e3)}},watch:{currEditTheme:{immediate:!0,handler(e){this.initStyle(e)}}},created(){this.initStyle()}},XK={class:"edit-theme side-bar__panel side-bar__panel--menu"},ZK={class:"side-bar__info"},JK={class:"menu-entry menu-entry--info flex flex--row flex--align-center"},QK={key:0},eX={key:1},tX={class:"side-bar__content"},nX={key:0,class:"flex flex--row flex--end"};const rX=XH(KK,[["render",function(e,t,n,r,i,o){const a=wn("code-editor");return $r(),Gr("div",XK,[Jr("div",ZK,[Jr("div",JK,["custom"===e.currEditTheme?($r(),Gr("span",QK,t[1]||(t[1]=[ti(" "),Jr("br",null,null,-1),ti(" classedit-theme--custom ")]))):($r(),Gr("span",eX,"  "))])]),Jr("div",tX,["default"===e.currEditTheme?($r(),Gr(Pr,{key:0},[ti("  ")],64)):($r(!0),Gr(Pr,{key:1},En(e.styleEles,((t,n)=>($r(),Gr("div",{key:n},[t.id===`edit-theme-${e.currEditTheme}`?($r(),Vr(a,{key:0,lang:"css",value:t.innerHTML,disabled:"edit-theme-custom"!==t.id,onChanged:o.changeText,scrollClass:"side-bar__inner"},null,8,["value","disabled","onChanged"])):ri("",!0)])))),128))]),"custom"===e.currEditTheme?($r(),Gr("div",nX,[Jr("button",{class:"edit-theme__button button",onClick:t[0]||(t[0]=(...e)=>o.saveStyleText&&o.saveStyleText(...e))},"")])):ri("",!0)])}]]),iX={components:{MenuEntry:_V,CodeEditor:YK},data:()=>({themeStyleText:"",styleEles:[]}),computed:{...BM("theme",["currPreviewTheme"])},methods:{saveStyleText(){const e=this.findByTheme(this.currPreviewTheme);e&&this.themeStyleText&&(e.innerHTML=this.themeStyleText,_H.dispatch("theme/setCustomPreviewThemeStyle",this.themeStyleText),_H.dispatch("notification/info",""))},findByTheme(e){const t=this.styleEles.filter((t=>t.id===`preview-theme-${e}`));return t.length?t[0]:null},changeText(e){this.themeStyleText=e},close(){_H.dispatch("data/setSideBarPanel","menu")},initStyle(e){if("default"===e)return;const t=e||this.currPreviewTheme;if(this.findByTheme(t))return;const n=`preview-theme-${t}`,r=document.getElementById(n);r?this.styleEles.push(r):setTimeout((()=>this.initStyle(t)),1e3)}},watch:{currPreviewTheme:{immediate:!0,handler(e){this.initStyle(e)}}},created(){this.initStyle()}},oX={class:"preview-theme side-bar__panel side-bar__panel--menu"},aX={class:"side-bar__info"},sX={class:"menu-entry menu-entry--info flex flex--row flex--align-center"},lX={key:0},cX={key:1},uX={class:"side-bar__content"},hX={key:0,class:"flex flex--row flex--end"};const dX={menu:"",workspaces:"",help:"Markdown ",toc:"",sync:"",publish:"",history:"",importExport:"/",workspaceBackups:"",editTheme:"",previewTheme:""},pX={components:{Toc:MV,MainMenu:uY,WorkspacesMenu:gY,SyncMenu:UY,PublishMenu:rK,HistoryMenu:LK,ImportExportMenu:qK,WorkspaceBackupMenu:GK,EditThemeMenu:rX,PreviewThemeMenu:XH(iX,[["render",function(e,t,n,r,i,o){const a=wn("code-editor");return $r(),Gr("div",oX,[Jr("div",aX,[Jr("div",sX,["custom"===e.currPreviewTheme?($r(),Gr("span",lX,t[1]||(t[1]=[ti(" "),Jr("br",null,null,-1),ti(" classpreview-theme--custom ")]))):($r(),Gr("span",cX,"  "))])]),Jr("div",uX,["default"===e.currPreviewTheme?($r(),Gr(Pr,{key:0},[ti("  ")],64)):($r(!0),Gr(Pr,{key:1},En(e.styleEles,((t,n)=>($r(),Gr("div",{key:n},[t.id===`preview-theme-${e.currPreviewTheme}`?($r(),Vr(a,{key:0,lang:"css",value:t.innerHTML,disabled:"preview-theme-custom"!==t.id,onChanged:o.changeText,scrollClass:"side-bar__inner"},null,8,["value","disabled","onChanged"])):ri("",!0)])))),128))]),"custom"===e.currPreviewTheme?($r(),Gr("div",hX,[Jr("button",{class:"preview-theme__button button",onClick:t[0]||(t[0]=(...e)=>o.saveStyleText&&o.saveStyleText(...e))},"")])):ri("",!0)])}]])},data:()=>({markdownSample:Zq.highlight("\n---------------------------\n\n# 1\n\n## 2\n\n### 3\n\n\n\n\n---------------------------\n\n** __\n\n**** ____\n\n====\n\n~~~~\n\n> \n\nH~2~O\n\n2^10^1024\n\n\n\n\n---------------------------\n\n- \n  * \n    + \n\n1.  1\n2.  2\n3.  3\n\n- [ ] \n- [x] \n\n\n\n\n---------------------------\n\n[](http://example.com).\n\n: ![](img.jpg)\n\n: ![](img.jpg =60x50)\n\n\n\n\n---------------------------\n\n``.\n\n```\n// \nvar foo = 'bar';\n```\n\n```javascript\n// \nvar foo = 'bar';\n```\n\n\n\n\n---------------------------\n\nItem     | Value\n-------- | -----\nComputer | $1600\nPhone    | $12\nPipe     | $1\n\n\n| Column 1 | Column 2      |\n|:--------:| -------------:|\n| centered | right-aligned |\n\n\n\n\n---------------------------\n\nMarkdown\n:  HTML\n\n\n:  \n:  \n\n\n\n\n---------------------------\n\n[^1]\n\n[^1]: \n\n\n\n\n---------------------------\n\nMarkdown HTML\n\n*[HTML]: \n\n\n\nLaTeX\n---------------------------\n\n $\\Gamma(n) = (n-1)!\\quad\\forall\nn\\in\\mathbb N$ Gamma\n\n$$\n\\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt\\,.\n$$\n")}),computed:{panel(){if(_H.state.light)return null;const e=_H.getters["data/layoutSettings"].sideBarPanel;return dX[e]?e:"menu"},panelName(){return dX[this.panel]}},methods:{...LM("data",["toggleSideBar"]),...LM("data",{setPanel:"setSideBarPanel"})}},fX={class:"side-bar flex flex--column"},mX={class:"side-title flex flex--row"},gX={class:"side-title__title"},vX={class:"side-bar__inner"},yX={key:8,class:"side-bar__panel side-bar__panel--help"},bX=["innerHTML"];const _X=XH(pX,[["render",function(e,t,n,r,i,o){const a=wn("icon-dots-horizontal"),s=wn("icon-close"),l=wn("main-menu"),c=wn("workspaces-menu"),u=wn("sync-menu"),h=wn("publish-menu"),d=wn("history-menu"),p=wn("import-export-menu"),f=wn("workspace-backup-menu"),m=wn("edit-theme-menu"),g=wn("preview-theme-menu"),v=wn("toc"),y=Cn("title");return $r(),Gr("div",fX,[Jr("div",mX,["menu"!==o.panel?Kt(($r(),Gr("button",{key:0,class:"side-title__button button",onClick:t[0]||(t[0]=t=>e.setPanel("menu"))},[Qr(a)])),[[y,""]]):ri("",!0),Jr("div",gX,Z(o.panelName),1),Kt(($r(),Gr("button",{class:"side-title__button button",onClick:t[1]||(t[1]=t=>e.toggleSideBar(!1))},[Qr(s)])),[[y,""]])]),Jr("div",vX,["menu"===o.panel?($r(),Vr(l,{key:0})):"workspaces"===o.panel?($r(),Vr(c,{key:1})):"sync"===o.panel?($r(),Vr(u,{key:2})):"publish"===o.panel?($r(),Vr(h,{key:3})):"history"===o.panel?($r(),Vr(d,{key:4})):"export"===o.panel?($r(),Vr(p,{key:5})):"importExport"===o.panel?($r(),Vr(p,{key:6})):"workspaceBackups"===o.panel?($r(),Vr(f,{key:7})):"help"===o.panel?($r(),Gr("div",yX,[Jr("pre",{class:"markdown-highlighting",innerHTML:e.markdownSample},null,8,bX)])):"editTheme"===o.panel?($r(),Vr(m,{key:9})):"previewTheme"===o.panel?($r(),Vr(g,{key:10})):ri("",!0),Jr("div",{class:W(["side-bar__panel side-bar__panel--toc",{"side-bar__panel--hidden":"toc"!==o.panel}])},[Qr(v)],2)])])}]]),wX={components:{UserImage:FV,UserName:oK},props:["comment"],computed:{showReply(){return this.comment===_H.getters["discussion/currentDiscussionLastComment"]&&!_H.state.discussion.isCommenting},text(){return CF.sanitizeHtml(iU.converter.render(this.comment.text))}},methods:{...DM("discussion",["setIsCommenting"]),async removeComment(){try{await _H.dispatch("modal/open","commentDeletion"),_H.dispatch("discussion/cleanCurrentFile",{filterComment:this.comment}),OF.addBadge("removeComment")}catch(i7){}}},mounted(){if(this.$el.parentNode.classList.contains("sticky-comment")){const e=_H.getters["discussion/currentDiscussionLastCommentId"],t=this.$el.querySelector(".comment__text-inner");let n;const r=()=>(n||(n=document.querySelector(`.comment-list .comment--${e} .comment__text-inner`)),n||{scrollTop:0});t.scrollTop=r().scrollTop,t.addEventListener("scroll",(()=>{r().scrollTop=t.scrollTop}))}}},kX={class:"comment"},xX={class:"comment__header flex flex--row flex--space-between flex--align-center"},CX={class:"comment__user flex flex--row flex--align-center"},SX={class:"comment__user-image"},TX={class:"comment__created"},EX={class:"comment__text"},IX=["innerHTML"],AX={key:0,class:"comment__buttons flex flex--row flex--end"};const DX=XH(wX,[["render",function(e,t,n,r,i,o){const a=wn("user-image"),s=wn("icon-delete"),l=wn("user-name"),c=Cn("title");return $r(),Gr("div",kX,[Jr("div",xX,[Jr("div",CX,[Jr("div",SX,[Qr(a,{"user-id":n.comment.sub},null,8,["user-id"])]),Kt(($r(),Gr("button",{class:"comment__remove-button button",onClick:t[0]||(t[0]=(...e)=>o.removeComment&&o.removeComment(...e))},[Qr(s)])),[[c,""]]),Qr(l,{"user-id":n.comment.sub},null,8,["user-id"])]),Jr("div",TX,Z(n.comment.created|e.formatTime),1)]),Jr("div",EX,[Jr("div",{class:"comment__text-inner",innerHTML:o.text},null,8,IX)]),o.showReply?($r(),Gr("div",AX,[Jr("button",{class:"comment__button button",onClick:t[1]||(t[1]=t=>e.setIsCommenting(!0))},"")])):ri("",!0)])}]]),BX={components:{UserImage:FV},computed:{...BM("workspace",["loginToken"]),userId:()=>wO.getCurrentUserId()},methods:{...DM("discussion",["setNewCommentFocus"]),...LM("discussion",["cancelNewComment"]),addComment(){const e=_H.state.discussion.newCommentText.trim();if(e.length)if(e.length>2e3)_H.dispatch("notification/error","Comment is too long.");else{const t=_H.state.discussion.currentDiscussionId,n={discussionId:t,sub:this.userId,text:e,created:Date.now()},r={comments:{..._H.getters["content/current"].comments,[UL.uid()]:n}};t===_H.state.discussion.newDiscussionId?(r.discussions={..._H.getters["content/current"].discussions,[t]:_H.getters["discussion/newDiscussion"]},OF.addBadge("createDiscussion")):OF.addBadge("addComment"),_H.dispatch("content/patchCurrent",r),_H.commit("discussion/setNewCommentText"),_H.commit("discussion/setIsCommenting")}}},mounted(){const e=this.$el.querySelector("pre.markdown-highlighting"),t=this.$el.querySelector(".comment__text-inner"),n=SF(e,t,!0);n.init({sectionHighlighter:e=>dg.highlight(e.text,iU.prismGrammars[e.data]),sectionParser:e=>Zq.parseSections(iU.converter,e).sections,content:_H.state.discussion.newCommentText,selectionStart:_H.state.discussion.newCommentSelection.start,selectionEnd:_H.state.discussion.newCommentSelection.end,getCursorFocusRatio:()=>.2}),n.on("focus",(()=>this.setNewCommentFocus(!0))),n.on("contentChanged",(e=>_H.commit("discussion/setNewCommentText",e))),n.selectionMgr.on("selectionChanged",((e,t)=>_H.commit("discussion/setNewCommentSelection",{start:e,end:t})));const r=this.$el.parentNode.classList.contains("sticky-comment"),i=()=>r||null===_H.state.discussion.stickyComment;if(this.$watch((()=>_H.state.discussion.currentDiscussionId),(()=>this.$nextTick((()=>{i()&&_H.state.discussion.newCommentFocus&&n.focus()}))),{immediate:!0}),r){let e;const n=()=>(e||(e=document.querySelector(".comment-list .comment--new .comment__text-inner")),e||{scrollTop:0});t.scrollTop=n().scrollTop,t.addEventListener("scroll",(()=>{n().scrollTop=t.scrollTop}))}else this.$watch((()=>i()),(e=>{if(n.toggleEditable(e),e){const e=_H.state.discussion.newCommentText;n.setContent(e);const t=_H.state.discussion.newCommentSelection;n.selectionMgr.setSelectionStartEnd(t.start,t.end),_H.state.discussion.newCommentFocus&&n.focus()}}),{immediate:!0}),this.$watch((()=>_H.state.discussion.newCommentText),(e=>n.setContent(e)))}},LX={class:"comment__header flex flex--row flex--space-between flex--align-center"},MX={class:"comment__user flex flex--row flex--align-center"},FX={class:"comment__user-image"},OX={class:"user-name"},PX={class:"comment__buttons flex flex--row flex--end"};const NX=XH(BX,[["render",function(e,t,n,r,i,o){const a=wn("user-image");return $r(),Gr("div",{class:"comment comment--new",onKeydown:t[2]||(t[2]=mo(po(((...t)=>e.cancelNewComment&&e.cancelNewComment(...t)),["stop"]),["esc"]))},[Jr("div",LX,[Jr("div",MX,[Jr("div",FX,[Qr(a,{"user-id":o.userId},null,8,["user-id"])]),Jr("span",OX,Z(e.loginToken.name),1)])]),t[3]||(t[3]=Jr("div",{class:"comment__text"},[Jr("div",{class:"comment__text-inner"},[Jr("pre",{class:"markdown-highlighting"})])],-1)),Jr("div",PX,[Jr("button",{class:"comment__button button",onClick:t[0]||(t[0]=(...t)=>e.cancelNewComment&&e.cancelNewComment(...t))},""),Jr("button",{class:"comment__button button",onClick:t[1]||(t[1]=(...e)=>o.addComment&&o.addComment(...e))},"")])],32)}]]);const jX=XH({components:{Comment:DX,NewComment:NX},data:()=>({tops:{}}),computed:{...BM("layout",["constants","styles"]),...AM("discussion",["currentDiscussionId","isCommenting","newCommentText","stickyComment"]),...BM("discussion",["newDiscussion","currentDiscussion","currentFileDiscussions","currentFileDiscussionLastComments","currentDiscussionComments","currentDiscussionLastCommentId"]),updateTopsTrigger(){return UL.serializeObject([this.styles,this.currentFileDiscussionLastComments,this.currentDiscussionComments,this.currentDiscussionId,this.isCommenting])},updateStickyTrigger(){return UL.serializeObject([this.updateTopsTrigger,this.newCommentText])}},methods:{...DM("discussion",["setCurrentDiscussionId"]),updateTops(){const e=_H.getters["data/layoutSettings"];let t=-2;const n=(n,r,i,o)=>{const a=r||i,s=r&&i,l=e.showEditor?iU.clEditor.selectionMgr.getCoordinates(n.end):iU.getPreviewOffsetCoordinates(iU.getPreviewOffset(n.end));let c=-2;l&&(c=l.top+l.height-80);let u=c;return o&&(u-=a.offsetTop+2),u<-2&&(c+=-2-u,u=-2),c<t&&(u+=t-c,c=t),t=c+a.offsetHeight+60,s&&(t+=s.offsetHeight),u},r={},i=this.currentFileDiscussions;Object.entries(i).sort((([,e],[,t])=>e.end-t.end)).forEach((([e,t])=>{t===this.currentDiscussion||t===this.newDiscussion?r.current=n(t,this.currentDiscussionLastCommentId&&this.$el.querySelector(`.comment--${this.currentDiscussionLastCommentId}`),this.$el.querySelector(".comment--new"),!0):r[e]=n(t,this.$el.querySelector(`.comment--discussion-${e}`))})),this.tops=r}},mounted(){this.$watch((()=>this.updateTopsTrigger),(()=>this.updateTops()),{immediate:!0});const e=_H.getters["data/layoutSettings"];this.scrollerElt=e.showEditor?iU.editorElt.parentNode:iU.previewElt.parentNode,this.updateSticky=()=>{let e=0,t=this.tops.current;const n=this.$el.querySelector(`.comment--${this.currentDiscussionLastCommentId}`);n&&(e+=n.clientHeight,t+=n.offsetTop);const r=this.$el.querySelector(".comment--new");r&&(e+=r.clientHeight);const i=document.querySelector(".current-discussion__inner"),o=this.scrollerElt.scrollTop+10,a=this.scrollerElt.scrollTop+this.scrollerElt.clientHeight-e-i.clientHeight;let s=null;t>a||a<o?s="bottom":t<o&&(s="top"),_H.state.discussion.stickyComment!==s&&_H.commit("discussion/setStickyComment",s)},this.scrollerElt.addEventListener("scroll",this.updateSticky),this.$watch((()=>this.updateStickyTrigger),(()=>this.updateSticky()),{immediate:!0}),iU.previewCtxWithDiffs||iU.once("previewCtxWithDiffs",(()=>{this.updateTops(),this.updateSticky()}))},destroyed(){this.scrollerElt.removeEventListener("scroll",this.updateSticky)}},[["render",function(e,t,n,r,i,o){const a=wn("comment"),s=wn("new-comment");return $r(),Gr("div",{class:W(["comment-list",e.stickyComment&&"comment-list--"+e.stickyComment]),style:R({width:e.constants.gutterWidth+"px"})},[($r(!0),Gr(Pr,null,En(e.currentFileDiscussionLastComments,((t,n)=>($r(),Gr(Pr,{key:n},[t.discussionId!==e.currentDiscussionId?($r(),Vr(a,{key:0,comment:t,class:W(["comment--last","comment--discussion-"+n]),style:R({top:e.tops[n]+"px"}),onClick:t=>e.setCurrentDiscussionId(n)},null,8,["comment","class","style","onClick"])):ri("",!0)],64)))),128)),Jr("div",{class:"comment-list__current-discussion",style:R({top:e.tops.current+"px"})},[($r(!0),Gr(Pr,null,En(e.currentDiscussionComments,((e,t)=>($r(),Vr(a,{key:t,comment:e,class:W("comment--"+t)},null,8,["comment","class"])))),128)),e.isCommenting?($r(),Vr(s,{key:0})):ri("",!0)],4)],6)}]]);const zX=XH({data:()=>({selection:null,coordinates:null}),methods:{...LM("discussion",["createNewDiscussion"]),checkSelection(){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let e;if(!_H.state.content.revisionContent&&iU.clEditor.selectionMgr.hasFocus()&&(this.selection=iU.getTrimmedSelection(),this.selection)){const t=iU.clEditor.getContent();for(e=this.selection.end;e&&"\n"===t[e-1];)e-=1}this.coordinates=e?iU.clEditor.selectionMgr.getCoordinates(e):null}),25)}},mounted(){this.$nextTick((()=>{iU.clEditor.selectionMgr.on("selectionChanged",(()=>this.checkSelection())),iU.clEditor.selectionMgr.on("cursorCoordinatesChanged",(()=>this.checkSelection())),iU.clEditor.on("focus",(()=>this.checkSelection())),iU.clEditor.on("blur",(()=>this.checkSelection())),this.checkSelection()}))}},[["render",function(e,t,n,r,i,o){const a=wn("icon-message"),s=Cn("title");return e.coordinates?Kt(($r(),Gr("a",{key:0,class:"new-discussion-button",href:"javascript:void(0)",style:R({top:e.coordinates.top+"px"}),onMousedown:t[0]||(t[0]=po((()=>{}),["stop","prevent"])),onClick:t[1]||(t[1]=t=>e.createNewDiscussion(e.selection))},[Qr(a)],36)),[[s,""]]):ri("",!0)}]]),RX={subPrefix:"sm",async getTokenObj(e,t){try{const{body:n}=await dO.request({method:"POST",url:`${e}https://sm.ms/api/v2/profile`,headers:{Authorization:t}});if(!n.success)throw new Error(`SM.MS${n.message}`);wO.addUserInfo({id:`sm:${n.data.username}`,name:n.data.username,imageUrl:"https://gravatar.loli.net/avatar/ccc459536d65637c192c00f639569864"});const r={proxyUrl:e,accessToken:t,name:n.data.username,sub:n.data.username};return _H.dispatch("data/addSmmsToken",r),r}catch(n){throw _H.dispatch("notification/error",n),new Error(`SM.MS${n.message}`)}},async addAccount(e,t){const n=await this.getTokenObj(e,t);return OF.addBadge("addSmmsAccount"),n},async uploadFile({token:e,file:t}){const{body:n}=await dO.request({method:"POST",url:`${e.proxyUrl}https://sm.ms/api/v2/upload`,headers:{Authorization:e.accessToken},formData:{smfile:t}});if(!n.success){if("image_repeated"===n.code)return n.images;throw _H.dispatch("notification/error",`SM.MS${n.message}`),new Error(`SM.MS${n.message}`)}return n.data.url}},qX={subPrefix:"cs",async addAccount({name:e,uploadUrl:t,fileParamName:n,customHeaders:r,customParams:i,resultUrlParam:o}){wO.addUserInfo({id:`cs:${UL.encodeBase64(e)}`,name:e,imageUrl:""});const a={uploadUrl:t,fileParamName:n,customHeaders:r,customParams:i,resultUrlParam:o,name:e,sub:UL.encodeBase64(e)};return _H.dispatch("data/addCustomToken",a),OF.addBadge("addCustomAccount"),a},async uploadFile({token:e,file:t}){const n=`${CN.MD5(await UL.encodeFiletoBase64(t)).toString()}.${t.type.split("/")[1]}`,r=new File([t],n,{type:t.type}),i=e.customHeaders||{},o=e.customParams||{};o[e.fileParamName]=r;const{body:a}=await dO.request({method:"POST",url:e.uploadUrl,headers:i,formData:o}),s=e.resultUrlParam.split(".");let l=a;return s.forEach((e=>{if(l=l[e],!l)throw _H.dispatch("notification/error",`Body${JSON.stringify(a)}`),new Error(`Body${JSON.stringify(a)}`)})),l}},$X=(e,t)=>{const n=new Date,r=n.getDate(),i=n.getMonth()+1,o=n.getFullYear(),a=e.replace("{YYYY}",o).replace("{MM}",`0${i}`.slice(-2)).replace("{DD}",`0${r}`.slice(-2)).replace("{MDNAME}",_H.getters["file/current"].name);return`${a}${a.endsWith("/")?"":"/"}${UL.uid()}.${t.split("/")[1]}`},UX={
//  
// { url: 'http://xxxx', error: 'xxxxxx'}
async updateImg(e){const t=_H.getters["img/getCheckedStorage"];if(!t)return{error:""};if("workspace"===t.type){if(!_H.getters["workspace/currentWorkspaceIsGit"])return{error:""};const n=$X(t.sub,e.type),r=await UL.encodeFiletoBase64(e),i=_H.getters["explorer/selectedNodeFolder"],o=UL.getAbsoluteFilePath(i,n);return await NN.saveImg({id:CN.MD5(o).toString(),path:o,content:r}),{url:n.replaceAll(" ","%20")}}if(!t.provider)return{error:""};const n=_H.getters[`data/${t.provider}TokensBySub`][t.sub];if(!n)return{error:""};let r="";if("token"===t.type){const i="smms"===t.provider?RX:qX;r=await i.uploadFile({token:n,file:e})}else if("tokenRepo"===t.type){const i=n.imgStorages.filter((e=>e.sid===t.sid));if(!i||0===i.length)return{error:""};const o=i[0],a=$X(o.path,e.type);if("gitea"===t.provider){r=(await gj.uploadFile({token:n,projectId:o.repoUri,branch:o.branch,path:a,content:e,isImg:!0})).content.download_url}else if("github"===t.provider){r=(await MO.uploadFile({token:n,owner:o.owner,repo:o.repo,branch:o.branch,path:a,content:e,isImg:!0})).content.download_url}}return{url:r}}},HX={components:{CommentList:jX,EditorNewDiscussionButton:zX},computed:{...BM("file",["isCurrentTemp"]),...BM("layout",["styles"]),...BM("data",["computedSettings"])},methods:{async processUpload(e){let t=null;if(!e||0===e.length)return;for(let i=0;i<e.length;i+=1)if(-1!==e[i].type.indexOf("image")){t=e[i].getAsFile();break}if(!t)return;const n=UL.uid();_H.dispatch("img/setCurrImgId",n),iU.pagedownEditor.uiManager.doClick("imageUploading");try{const{url:e,error:r}=await UX.updateImg(t);if(r)return iU.clEditor.replaceAll(`[...(image-${n})]`,`[...(image-${n})]`),void _H.dispatch("notification/error",r);iU.clEditor.replaceAll(`[...(image-${n})]`,`![](${e})`)}catch(r){iU.clEditor.replaceAll(`[...(image-${n})]`,`[...(image-${n})]`),_H.dispatch("notification/error",r)}}},mounted(){const e=localStorage.getItem("img/checkedStorage");e&&_H.commit("img/changeCheckedStorage",JSON.parse(e));const t=localStorage.getItem("img/workspaceImgPath");t&&_H.commit("img/setWorkspaceImgPath",JSON.parse(t));const n=this.$refs.editorRoot.querySelector(".editor__inner"),r=e=>t=>{let r=t.target;for(;r&&r!==n;){if(r.discussionId)return void e(r.discussionId);r=r.parentNode}},i=e=>t=>{n.getElementsByClassName(`discussion-editor-highlighting--${t}`).cl_each((t=>t.classList.toggle("discussion-editor-highlighting--hover",e))),document.getElementsByClassName(`comment--discussion-${t}`).cl_each((t=>t.classList.toggle("comment--hover",e)))};n.addEventListener("mouseover",r(i(!0))),n.addEventListener("mouseout",r(i(!1))),n.addEventListener("click",r((e=>{_H.commit("discussion/setCurrentDiscussionId",e)}))),n.addEventListener("drop",(e=>{const t=e.dataTransfer.items;this.processUpload(t)})),n.addEventListener("paste",(e=>{const t=(e.clipboardData||window.clipboardData).items;this.processUpload(t)})),this.$watch((()=>_H.state.discussion.currentDiscussionId),((e,t)=>{t&&n.querySelectorAll(`.discussion-editor-highlighting--${t}`).cl_each((e=>e.classList.remove("discussion-editor-highlighting--selected"))),e&&n.querySelectorAll(`.discussion-editor-highlighting--${e}`).cl_each((e=>e.classList.add("discussion-editor-highlighting--selected")))}))}},WX={ref:"editorRoot",class:"editor",ondrop:"return false;"};const GX=XH(HX,[["render",function(e,t,n,r,i,o){const a=wn("comment-list"),s=wn("editor-new-discussion-button");return $r(),Gr("div",WX,[Jr("pre",{class:W(["editor__inner markdown-highlighting",{monospaced:e.computedSettings.editor.monospacedFontOnly}]),style:R({padding:e.styles.editorPadding})},null,6),Jr("div",{class:"gutter",style:R({left:e.styles.editorGutterLeft+"px"})},[e.styles.editorGutterWidth?($r(),Vr(a,{key:0})):ri("",!0),e.isCurrentTemp?ri("",!0):($r(),Vr(s,{key:1}))],4)],512)}]]);const VX=XH({data:()=>({selection:null,coordinates:null}),methods:{...LM("discussion",["createNewDiscussion"]),checkSelection(){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let e;if(!_H.state.content.revisionContent&&iU.previewSelectionRange&&(this.selection=iU.getTrimmedSelection(),this.selection)){const{text:t}=iU.previewCtxWithDiffs;for(e=iU.getPreviewOffset(this.selection.end);e&&"\n"===t[e-1];)e-=1}this.coordinates=e?iU.getPreviewOffsetCoordinates(e):null}),25)}},mounted(){this.$nextTick((()=>{iU.on("previewSelectionRange",(()=>this.checkSelection())),this.$watch((()=>_H.getters["layout/styles"].previewWidth),(()=>this.checkSelection())),this.checkSelection()}))}},[["render",function(e,t,n,r,i,o){const a=wn("icon-message"),s=Cn("title");return e.coordinates?Kt(($r(),Gr("a",{key:0,class:"new-discussion-button",href:"javascript:void(0)",style:R({top:e.coordinates.top+"px"}),onMousedown:t[0]||(t[0]=po((()=>{}),["stop","prevent"])),onClick:t[1]||(t[1]=t=>e.createNewDiscussion(e.selection))},[Qr(a)],36)),[[s,""]]):ri("",!0)}]]),YX=`${window.location.protocol}//${window.location.host}`,KX={components:{CommentList:jX,PreviewNewDiscussionButton:VX},data:()=>({previewTop:!0}),computed:{...BM("file",["isCurrentTemp"]),...BM("theme",["currPreviewTheme"]),...BM("layout",["styles"]),previewTheme(){return`preview-theme--${this.currPreviewTheme||"default"}`}},methods:{...LM("data",["toggleEditor"]),onClick(e){let t=e.target;for(;t!==this.$el;){if(t.href&&t.href.match(/^https?:\/\//)&&(!t.hash||t.href.slice(0,YX.length)!==YX)){e.preventDefault();return void window.open(t.href,"_blank").focus()}t=t.parentNode}},onScroll(e){this.previewTop=e.target.scrollTop<10}},mounted(){const e=this.$el.querySelector(".preview__inner-2"),t=t=>n=>{let r=n.target;for(;r&&r!==e;){if(r.discussionId)return void t(r.discussionId);r=r.parentNode}},n=t=>n=>{e.getElementsByClassName(`discussion-preview-highlighting--${n}`).cl_each((e=>e.classList.toggle("discussion-preview-highlighting--hover",t))),document.getElementsByClassName(`comment--discussion-${n}`).cl_each((e=>e.classList.toggle("comment--hover",t)))};e.addEventListener("mouseover",t(n(!0))),e.addEventListener("mouseout",t(n(!1))),e.addEventListener("click",t((e=>{_H.commit("discussion/setCurrentDiscussionId",e)}))),this.$watch((()=>_H.state.discussion.currentDiscussionId),((t,n)=>{n&&e.querySelectorAll(`.discussion-preview-highlighting--${n}`).cl_each((e=>e.classList.remove("discussion-preview-highlighting--selected"))),t&&e.querySelectorAll(`.discussion-preview-highlighting--${t}`).cl_each((e=>e.classList.add("discussion-preview-highlighting--selected")))}))}},XX={class:"preview"},ZX={key:0,class:"preview__corner"};const JX=XH(KX,[["render",function(e,t,n,r,i,o){const a=wn("comment-list"),s=wn("preview-new-discussion-button"),l=wn("icon-pen"),c=Cn("title");return $r(),Gr("div",XX,[Jr("div",{class:"preview__inner-1",onClick:t[0]||(t[0]=(...e)=>o.onClick&&o.onClick(...e)),onScroll:t[1]||(t[1]=(...e)=>o.onScroll&&o.onScroll(...e))},[Jr("div",{class:W(["preview__inner-2",o.previewTheme]),style:R({padding:e.styles.previewPadding})},null,6),Jr("div",{class:"gutter",style:R({left:e.styles.previewGutterLeft+"px"})},[e.styles.previewGutterWidth?($r(),Vr(a,{key:0})):ri("",!0),e.isCurrentTemp?ri("",!0):($r(),Vr(s,{key:1}))],4)],32),e.styles.showEditor?ri("",!0):($r(),Gr("div",ZX,[Kt(($r(),Gr("button",{class:"preview__button button",onClick:t[2]||(t[2]=t=>e.toggleEditor(!0))},[Qr(l)])),[[c,""]])]))])}]]),QX=["welcome","editor","explorer","menu","theme","end"],eZ={key:0,class:"tour-step__inner"},tZ={class:"tour-step__button-bar"},nZ={key:1,class:"tour-step__inner"},rZ={class:"tour-step__button-bar"},iZ={key:2,class:"tour-step__inner"},oZ={class:"tour-step__button-bar"},aZ={key:3,class:"tour-step__inner"},sZ={class:"tour-step__button-bar"},lZ={key:4,class:"tour-step__inner"},cZ={class:"tour-step__button-bar"},uZ={key:5,class:"tour-step__inner"},hZ={class:"tour-step__button-bar"};const dZ=XH({data:()=>({stepIdx:0,stepStyles:ct({})}),computed:{step(){return QX[this.stepIdx]},stepStyle(){return this.stepStyles[this.step]||{}}},methods:{updatePositions(){document.querySelectorAll("[tour-step-anchor]").cl_each((e=>{const t=e.getBoundingClientRect();(e.getAttribute("tour-step-anchor")||"").split(",").forEach((e=>{const n={top:`${t.top+t.height/2}px`,left:`${t.left+t.width/2}px`};switch(e){case"welcome":case"end":n.top=`${t.top}px`;break;case"editor":case"menu":case"theme":n.left=`${t.left}px`;break;case"explorer":n.left=`${t.left+t.width}px`;break;default:return}this.stepStyles[e]=n}))}))},finish(){_H.dispatch("data/patchLayoutSettings",{welcomeTourFinished:!0})},next(){this.stepIdx+=1}},mounted(){this.$watch((()=>_H.getters["layout/styles"]),(()=>this.updatePositions()),{immediate:!0})}},[["render",function(e,t,n,r,i,o){const a=wn("icon-side-preview"),s=wn("icon-folder"),l=wn("icon-provider"),c=wn("icon-switch-theme");return $r(),Gr("div",{class:"tour",onKeydown:t[11]||(t[11]=mo(po(((...t)=>e.skip&&e.skip(...t)),["stop"]),["esc"]))},[Jr("div",{class:W(["tour-step","tour-step--"+o.step]),style:R(o.stepStyle)},["welcome"===o.step?($r(),Gr("div",eZ,[t[12]||(t[12]=Jr("h2",null,"",-1)),t[13]||(t[13]=Jr("p",null,[ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),t[14]||(t[14]=Jr("p",null,[ti(""),Jr("b",null,""),ti("")],-1)),Jr("div",tZ,[Jr("button",{class:"button",onClick:t[0]||(t[0]=(...e)=>o.finish&&o.finish(...e))},""),Jr("button",{class:"button button--resolve",onClick:t[1]||(t[1]=(...e)=>o.next&&o.next(...e))},"")])])):"editor"===o.step?($r(),Gr("div",nZ,[t[17]||(t[17]=Jr("h2",null,"Markdown",-1)),t[18]||(t[18]=Jr("p",null,"StackEditMarkdownHTML",-1)),Jr("p",null,[t[15]||(t[15]=ti(" ")),Qr(a),t[16]||(t[16]=ti(" "))]),Jr("div",rZ,[Jr("button",{class:"button",onClick:t[2]||(t[2]=(...e)=>o.finish&&o.finish(...e))},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=(...e)=>o.next&&o.next(...e))},"")])])):"explorer"===o.step?($r(),Gr("div",iZ,[t[21]||(t[21]=Jr("h2",null,"",-1)),t[22]||(t[22]=Jr("p",null,"StackEdit",-1)),Jr("p",null,[t[19]||(t[19]=ti(" ")),Qr(s),t[20]||(t[20]=ti(" "))]),Jr("div",oZ,[Jr("button",{class:"button",onClick:t[4]||(t[4]=(...e)=>o.finish&&o.finish(...e))},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=(...e)=>o.next&&o.next(...e))},"")])])):"menu"===o.step?($r(),Gr("div",aZ,[t[25]||(t[25]=Jr("h2",null,"",-1)),t[26]||(t[26]=Jr("p",null,"StackEdit...",-1)),Jr("p",null,[t[23]||(t[23]=ti(" ")),Qr(l,{"provider-id":"stackedit"}),t[24]||(t[24]=ti(" "))]),Jr("div",sZ,[Jr("button",{class:"button",onClick:t[6]||(t[6]=(...e)=>o.finish&&o.finish(...e))},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=(...e)=>o.next&&o.next(...e))},"")])])):"theme"===o.step?($r(),Gr("div",lZ,[t[29]||(t[29]=Jr("h2",null,"",-1)),t[30]||(t[30]=Jr("p",null,"StackEdit/",-1)),Jr("p",null,[t[27]||(t[27]=ti(" ")),Qr(c),t[28]||(t[28]=ti(" "))]),Jr("div",cZ,[Jr("button",{class:"button",onClick:t[8]||(t[8]=(...e)=>o.finish&&o.finish(...e))},""),Jr("button",{class:"button button--resolve",onClick:t[9]||(t[9]=(...e)=>o.next&&o.next(...e))},"")])])):"end"===o.step?($r(),Gr("div",uZ,[t[31]||(t[31]=Jr("h2",null,"Enjoy!",-1)),t[32]||(t[32]=Jr("p",null,[ti("StackEdit"),Jr("a",{href:"https://gitee.com/mafgwo/stackedit"},"Gitee"),ti("Star")],-1)),Jr("div",hZ,[Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=(...e)=>o.finish&&o.finish(...e))},"")])])):ri("",!0)],6)],32)}]]),pZ={data:()=>({selectedOption:{value:"",name:""},showMenu:!1}),props:{options:{type:[Array,Object]},selected:{},closeOnOutsideClick:{type:[Boolean],default:!0},closeOnItemClick:{type:[Boolean],default:!0}},mounted(){this.selectedOption=this.selected,this.closeOnOutsideClick&&document.addEventListener("click",this.clickHandler)},beforeDestroy(){document.removeEventListener("click",this.clickHandler)},computed:{dropdownStyle:()=>`max-height: ${.7*_H.state.layout.bodyHeight}px;`},methods:{updateOption(e){this.selectedOption=e,this.closeOnItemClick&&(this.showMenu=!1),this.$emit("change",e)},toggleMenu(){this.showMenu=!this.showMenu},clickHandler(e){const{target:t}=e,{$el:n}=this;n.contains(t)||(this.showMenu=!1)}},watch:{selected(e){this.selectedOption=e}}},fZ={class:"dropdown-menu"},mZ=["onClick"];const gZ=XH(pZ,[["render",function(e,t,n,r,i,o){return $r(),Gr("span",fZ,[Jr("span",{ref:"slotInfo",onClick:t[0]||(t[0]=e=>o.toggleMenu()),class:"dropdown-toggle"},[An(e.$slots,"default")],512),e.showMenu?($r(),Gr("ul",{key:0,class:"dropdown-menu-items",style:R(o.dropdownStyle)},[($r(!0),Gr(Pr,null,En(n.options,((t,n)=>($r(),Gr("li",{key:n},[Jr("a",{href:"javascript:void(0)",class:W({selected:t.value===e.selectedOption.value}),onClick:e=>o.updateOption(t)},Z(t.name),11,mZ)])))),128))],4)):ri("",!0)])}]]),vZ=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Meta":"Ctrl",yZ={components:{DropdownMenu:gZ},data:()=>({mod:vZ,allThemes:[{name:"",value:"default"},{name:"",value:"azure"},{name:"",value:"iceberg_contrast"},{name:"",value:"dawn"},{name:"",value:"peacock"},{name:"",value:"mintchoc"},{name:"",value:"spearmint"},{name:"",value:"slate"},{name:"",value:"carbonight"},{name:"",value:"solarized_light"},{name:"",value:"espresso_libre"},{name:"",value:"lavender"},{name:"",value:"solarflare"},{name:"Clouds",value:"clouds"},{name:"Clouds",value:"clouds_midnight"},{name:"GitHub",value:"github"},{name:"",value:"custom"}]}),computed:{...BM("theme",["currEditTheme","customEditThemeStyle"]),selectedTheme(){return{value:this.currEditTheme||"default"}}},methods:{...LM("data",["toggleSideBar"]),showFind(){_H.dispatch("findReplace/open",{type:"find",findText:iU.clEditor.selectionMgr.hasFocus()&&iU.clEditor.selectionMgr.getSelectedText()})},showFindReplace(){_H.dispatch("findReplace/open",{type:"replace",findText:iU.clEditor.selectionMgr.hasFocus()&&iU.clEditor.selectionMgr.getSelectedText()})},async changeTheme(e){await _H.dispatch("theme/setEditTheme",e.value),"custom"!==e.value||this.customEditThemeStyle||(this.toggleSideBar(!0),_H.dispatch("data/setSideBarPanel","editTheme"))}}},bZ={class:"editor-in-page-buttons"},_Z=["title"],wZ=["title"],kZ={title:""},xZ={class:"after"};const CZ=XH(yZ,[["render",function(e,t,n,r,i,o){const a=wn("icon-search"),s=wn("icon-find-replace"),l=wn("icon-select-theme"),c=wn("dropdown-menu"),u=wn("icon-ellipsis");return $r(),Gr("div",bZ,[Jr("ul",null,[Jr("li",{title:` ${e.mod}+F`},[Jr("a",{onClick:t[0]||(t[0]=(...e)=>o.showFind&&o.showFind(...e))},[Qr(a)])],8,_Z),Jr("li",{title:` ${e.mod}+Alt+F`},[Jr("a",{onClick:t[1]||(t[1]=(...e)=>o.showFindReplace&&o.showFindReplace(...e))},[Qr(s)])],8,wZ),Jr("li",kZ,[Qr(c,{selected:o.selectedTheme,options:e.allThemes,closeOnItemClick:!1,onChange:o.changeTheme},{default:Yt((()=>[Qr(l)])),_:1},8,["selected","options","onChange"])]),Jr("li",xZ,[Qr(u)])])])}]]),SZ=new YN({id:"giteegist",name:"GiteeGist",getToken:({sub:e})=>_H.getters["data/giteeTokensBySub"][e],getLocationUrl:({gistId:e})=>`https://gitee.com/mafgwo/codes/${e}`,getLocationDescription:({filename:e})=>e,async downloadContent(e,t){const n=await EO.downloadGist({...t,token:e});return YN.parseContent(n,`${t.fileId}/content`)},async uploadContent(e,t,n){const r=_H.state.file.itemsById[n.fileId],i=UL.sanitizeName(r&&r.name),o=await EO.uploadGist({...n,token:e,description:i,content:YN.serializeContent(t)});return{...n,gistId:o.id}},async publish(e,t,n,r){const i=await EO.uploadGist({...r,token:e,description:n.title,content:t});return{...r,gistId:i.id}},makeLocation(e,t,n,r){return{providerId:this.id,sub:e.sub,filename:t,isPublic:n,gistId:r}},listFileRevisions:async({token:e,syncLocation:t})=>(await EO.getGistCommits({...t,token:e})).map((e=>{const t=`${EO.subPrefix}:${e.user.id}`;return wO.addUserInfo({id:t,name:e.user.login,imageUrl:e.user.avatar_url}),{sub:t,id:e.version,message:e.commit&&e.commit.message,created:new Date(e.committed_at).getTime()}})),loadFileRevision:async()=>!1
// async getFileRevisionContent({
//   token,
//   contentId,
//   syncLocation,
//   revisionId,
// }) {
//   const data = await giteeHelper.downloadGistRevision({
//     ...syncLocation,
//     token,
//     sha: revisionId,
//   });
//   return Provider.parseContent(data, contentId);
// },
}),TZ=new YN({id:"gist",name:"Gist",getToken:({sub:e})=>_H.getters["data/githubTokensBySub"][e],getLocationUrl:({gistId:e})=>`https://gist.github.com/${e}`,getLocationDescription:({filename:e})=>e,async downloadContent(e,t){const n=await MO.downloadGist({...t,token:e});return YN.parseContent(n,`${t.fileId}/content`)},async uploadContent(e,t,n){const r=_H.state.file.itemsById[n.fileId],i=UL.sanitizeName(r&&r.name),o=await MO.uploadGist({...n,token:e,description:i,content:YN.serializeContent(t)});return{...n,gistId:o.id}},async publish(e,t,n,r){const i=await MO.uploadGist({...r,token:e,description:n.title,content:t});return{...r,gistId:i.id}},makeLocation(e,t,n,r){return{providerId:this.id,sub:e.sub,filename:t,isPublic:n,gistId:r}},listFileRevisions:async({token:e,syncLocation:t})=>(await MO.getGistCommits({...t,token:e})).map((e=>{const t=`${MO.subPrefix}:${e.user.id}`;return wO.addUserInfo({id:t,name:e.user.login,imageUrl:e.user.avatar_url}),{sub:t,id:e.version,message:e.commit&&e.commit.message,created:new Date(e.committed_at).getTime()}})),loadFileRevision:async()=>!1,async getFileRevisionContent({token:e,contentId:t,syncLocation:n,revisionId:r}){const i=await MO.downloadGistRevision({...n,token:e,sha:r});return YN.parseContent(i,t)}}),EZ={components:{DropdownMenu:gZ},data:()=>({allThemes:[{name:"",value:"default"},{name:"",value:"ningyezi"},{name:"",value:"caoyuangreen"},{name:"",value:"yanqihu"},{name:"",value:"activeblue"},{name:"",value:"jikebrack"},{name:"",value:"simplebrack"},{name:"",value:"allblue"},{name:"",value:"custom"}],baseCss:"",sharing:!1}),computed:{...BM("theme",["currPreviewTheme","customPreviewThemeStyle"]),...BM("publishLocation",{publishLocations:"current"}),selectedTheme(){return{value:this.currPreviewTheme||"default"}}},methods:{...LM("data",["toggleSideBar"]),async changeTheme(e){await _H.dispatch("theme/setPreviewTheme",e.value),"custom"!==e.value||this.customPreviewThemeStyle||(this.toggleSideBar(!0),_H.dispatch("data/setSideBarPanel","previewTheme"))},showHelp(){this.toggleSideBar(!0),_H.dispatch("data/setSideBarPanel","help")},async share(){if(this.sharing)_H.dispatch("notification/info","...");else try{const e=_H.getters["file/current"];await _H.dispatch("modal/open",{type:"shareHtmlPre",name:e.name}),this.sharing=!0;const t=_H.getters["workspace/mainWorkspaceToken"];if(!t)return void _H.dispatch("notification/info","");let n=null;const r="githubAppData"===t.providerId,i=r?"gist":"giteegist",o=this.publishLocations.filter((e=>e.providerId===i&&e.url&&e.gistId));o.length>0&&(n=o[0].gistId);const a=(r?TZ:SZ).makeLocation(t,`-${e.name}`,!0,null);a.templateId="styledHtmlWithTheme",a.fileId=e.id,a.gistId=n;const{gistId:s}=await TG(a),l="githubAppData"===t.providerId?"gistshare.html":"share.html",c=`${window.location.protocol}//${window.location.host}/${l}?id=${s}`;await _H.dispatch("modal/open",{type:"shareHtml",name:e.name,url:c})}catch(e){e&&_H.dispatch("notification/error",e)}finally{this.sharing=!1}}}},IZ={class:"preview-in-page-buttons"},AZ={class:"before"},DZ={title:""},BZ={title:""},LZ={title:"Markdown"};const MZ=XH(EZ,[["render",function(e,t,n,r,i,o){const a=wn("icon-ellipsis"),s=wn("icon-share"),l=wn("icon-select-theme"),c=wn("dropdown-menu"),u=wn("icon-help-circle");return $r(),Gr("div",IZ,[Jr("ul",null,[Jr("li",AZ,[Qr(a)]),Jr("li",DZ,[Jr("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=(...e)=>o.share&&o.share(...e))},[Qr(s)])]),Jr("li",BZ,[Qr(c,{selected:o.selectedTheme,options:e.allThemes,closeOnItemClick:!1,onChange:o.changeTheme},{default:Yt((()=>[Qr(l)])),_:1},8,["selected","options","onChange"])]),Jr("li",LZ,[Jr("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>o.showHelp&&o.showHelp(...e))},[Qr(u)])])])])}]]);const FZ=XH({components:{Comment:DX,NewComment:NX},data:()=>({top:0}),computed:{...BM("layout",["constants"]),...AM("discussion",["isCommenting"]),...BM("discussion",["currentDiscussionLastComment"])}},[["render",function(e,t,n,r,i,o){const a=wn("comment"),s=wn("new-comment");return $r(),Gr("div",{class:"sticky-comment",style:R({width:e.constants.gutterWidth+"px",top:e.top+"px"})},[e.currentDiscussionLastComment?($r(),Vr(a,{key:0,comment:e.currentDiscussionLastComment},null,8,["comment"])):ri("",!0),e.isCommenting?($r(),Vr(s,{key:1})):ri("",!0)],4)}]]),OZ={components:{StickyComment:FZ},computed:{...AM("discussion",["stickyComment","currentDiscussionId"]),...BM("discussion",["currentDiscussion","previousDiscussionId","nextDiscussionId","currentFileDiscussions","currentDiscussionLastCommentId"]),...BM("layout",["constants"]),text(){return Zq.highlight(this.currentDiscussion.text)},showNext(){return this.nextDiscussionId&&this.nextDiscussionId!==this.currentDiscussionId},showRemove(){return this.currentDiscussionLastCommentId}},methods:{...DM("discussion",["setCurrentDiscussionId"]),...LM("notification",["info"]),goToDiscussion(e=this.currentDiscussionId){this.setCurrentDiscussionId(e);const t=_H.getters["data/layoutSettings"],n=this.currentFileDiscussions[e],r=t.showEditor?iU.clEditor.selectionMgr.getCoordinates(n.end):iU.getPreviewOffsetCoordinates(iU.getPreviewOffset(n.end));if(r){const e=t.showEditor?iU.editorElt.parentNode:iU.previewElt.parentNode;let n=r.top-e.offsetHeight/2;const i=e.scrollHeight-e.offsetHeight;n<0?n=0:n>i&&(n=i),Y$.animate(e).scrollTop(n).duration(200).start()}else this.info("Discussion can't be located in the file.")},async removeDiscussion(){try{await _H.dispatch("modal/open","discussionDeletion"),_H.dispatch("discussion/cleanCurrentFile",{filterDiscussion:this.currentDiscussion}),OF.addBadge("removeDiscussion")}catch(i7){}}}},PZ={class:"current-discussion__inner"},NZ={class:"flex flex--row flex--space-between"},jZ={class:"current-discussion__buttons flex flex--row flex--end"},zZ={class:"current-discussion__buttons flex flex--row flex--end"},RZ={class:"current-discussion__text markdown-highlighting markdown-highlighting--inline"},qZ=["innerHTML"];const $Z=XH(OZ,[["render",function(e,t,n,r,i,o){const a=wn("sticky-comment"),s=wn("icon-arrow-left"),l=wn("icon-delete"),c=wn("icon-close"),u=Cn("title");return $r(),Gr("div",{class:"current-discussion",style:R({width:e.constants.gutterWidth+"px"})},["bottom"===e.stickyComment?($r(),Vr(a,{key:0})):ri("",!0),Jr("div",PZ,[Jr("div",NZ,[Jr("div",jZ,[o.showNext?Kt(($r(),Gr("button",{key:0,class:"current-discussion__button button",onClick:t[0]||(t[0]=t=>o.goToDiscussion(e.previousDiscussionId))},[Qr(s)])),[[u,""]]):ri("",!0),o.showNext?Kt(($r(),Gr("button",{key:1,class:"current-discussion__button current-discussion__button--rotate button",onClick:t[1]||(t[1]=t=>o.goToDiscussion(e.nextDiscussionId))},[Qr(s)])),[[u,""]]):ri("",!0)]),Jr("div",zZ,[o.showRemove?Kt(($r(),Gr("button",{key:0,class:"current-discussion__button current-discussion__button--remove button",onClick:t[2]||(t[2]=(...e)=>o.removeDiscussion&&o.removeDiscussion(...e))},[Qr(l)])),[[u,""]]):ri("",!0),Kt(($r(),Gr("button",{class:"current-discussion__button button",onClick:t[3]||(t[3]=t=>e.setCurrentDiscussionId())},[Qr(c)])),[[u,""]])])]),Jr("div",RZ,[Jr("span",{onClick:t[4]||(t[4]=e=>o.goToDiscussion()),innerHTML:o.text},null,8,qZ)])])],4)}]]),UZ=(e,t)=>({get:()=>_H.state.findReplace[e],set(e){_H.commit(`findReplace/${t}`,e)}}),HZ=e=>({get:()=>_H.getters["data/layoutSettings"][e],set(t){_H.dispatch("data/patchLayoutSettings",{[e]:t})}});class WZ{constructor(e,n,r){t(this,"clean",(()=>{iU.clEditor.removeMarker(this.startMarker),iU.clEditor.removeMarker(this.endMarker),this.classApplier&&this.classApplier.stop()})),this.startMarker=new SF.Marker(n.start),this.endMarker=new SF.Marker(n.end),iU.clEditor.addMarker(this.startMarker),iU.clEditor.addMarker(this.endMarker),r||(this.classApplier=new c$([`find-replace-${this.startMarker.id}`,e],(()=>({start:this.startMarker.offset,end:this.endMarker.offset}))))}}const GZ={data:()=>({findCount:0,findPosition:0}),computed:{...AM("findReplace",["type","lastOpen"]),findText:UZ("findText","setFindText"),replaceText:UZ("replaceText","setReplaceText"),findCaseSensitive:HZ("findCaseSensitive"),findUseRegexp:HZ("findUseRegexp")},methods:{highlightOccurrences(){const e={};Object.entries(this.classAppliers).forEach((([,t])=>{const n=`${t.startMarker.offset}:${t.endMarker.offset}`;e[n]=t}));const t=[];if(this.classAppliers={},"destroyed"!==this.state&&this.findText){try{this.searchRegex=this.findText,this.findUseRegexp||(this.searchRegex=this.searchRegex.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")),this.replaceRegex=new RegExp(this.searchRegex,this.findCaseSensitive?"m":"mi"),this.searchRegex=new RegExp(this.searchRegex,this.findCaseSensitive?"gm":"gmi"),iU.clEditor.getContent().replace(this.searchRegex,((...e)=>{const n=e[0],r=e[e.length-2];t.push({start:r,end:r+n.length})})),t.forEach(((t,n)=>{const r=`${t.start}:${t.end}`;this.classAppliers[r]=e[r]||new WZ("find-replace-highlighting",t,n>200)}))}catch(i7){}"created"!==this.state&&(this.find("selection"),this.state="created")}Object.entries(e).forEach((([e,t])=>{this.classAppliers[e]||(t.clean(),t===this.selectedClassApplier&&(this.selectedClassApplier.child.clean(),this.selectedClassApplier=null))})),this.findCount=t.length},unselectClassApplier(){this.selectedClassApplier&&(this.selectedClassApplier.child.clean(),this.selectedClassApplier.child=null,this.selectedClassApplier=null),this.findPosition=0},find(e="forward"){const{selectedClassApplier:t}=this;this.unselectClassApplier();const{selectionMgr:n}=iU.clEditor,r=Math.min(n.selectionStart,n.selectionEnd),i=Math.max(n.selectionStart,n.selectionEnd),o=Object.keys(this.classAppliers),a=e=>n=>!(!e(this.classAppliers[n])||t===this.classAppliers[n])&&(this.selectedClassApplier=this.classAppliers[n],!0);"backward"===e?(this.selectedClassApplier=this.classAppliers[o[o.length-1]],o.reverse().some(a((e=>e.startMarker.offset<=r)))):"selection"===e?o.some(a((e=>e.startMarker.offset===r&&e.endMarker.offset===i))):"forward"===e&&(this.selectedClassApplier=this.classAppliers[o[0]],o.some(a((e=>e.endMarker.offset>=i)))),this.selectedClassApplier&&(n.setSelectionStartEnd(this.selectedClassApplier.startMarker.offset,this.selectedClassApplier.endMarker.offset),this.selectedClassApplier.child=new WZ("find-replace-selection",{start:this.selectedClassApplier.startMarker.offset,end:this.selectedClassApplier.endMarker.offset}),n.updateCursorCoordinates(this.$refs.findReplaceRoot.parentNode.clientHeight),Object.keys(this.classAppliers).forEach(((e,t)=>this.selectedClassApplier===this.classAppliers[e]&&(this.findPosition=t+1,!0))))},replace(){if(this.searchRegex){if(!this.selectedClassApplier)return void this.find();iU.clEditor.replaceAll(this.replaceRegex,this.replaceText,this.selectedClassApplier.startMarker.offset),this.$nextTick((()=>this.find()))}},replaceAll(){this.searchRegex&&iU.clEditor.replaceAll(this.searchRegex,this.replaceText)},close(){_H.commit("findReplace/setType")},onEscape(){iU.clEditor.focus()}},mounted(){this.classAppliers={},this.debouncedHighlightOccurrences=SF.Utils.debounce((()=>this.highlightOccurrences()),25),this.$watch((()=>this.findText),this.debouncedHighlightOccurrences),this.$watch((()=>this.findCaseSensitive),this.debouncedHighlightOccurrences),this.$watch((()=>this.findUseRegexp),this.debouncedHighlightOccurrences),iU.clEditor.on("contentChanged",this.debouncedHighlightOccurrences),this.$watch((()=>this.lastOpen),(()=>{const e=this.$refs.findReplaceRoot.querySelector(`.find-replace__text-input--${this.type}`);e.focus(),e.setSelectionRange(0,this[`${this.type}Text`].length),this.state=null,this.debouncedHighlightOccurrences()}),{immediate:!0}),this.onKeyup=e=>{27===e.which&&_H.commit("findReplace/setType")},window.addEventListener("keyup",this.onKeyup),this.onFocusIn=()=>this.$refs.findReplaceRoot.contains(document.activeElement)||setTimeout((()=>this.unselectClassApplier()),15),window.addEventListener("focusin",this.onFocusIn)},destroyed(){iU.clEditor.off("contentChanged",this.debouncedHighlightOccurrences),window.removeEventListener("keyup",this.onKeyup),window.removeEventListener("focusin",this.onFocusIn),this.state="destroyed",this.debouncedHighlightOccurrences()}},VZ={class:"find-replace__row"},YZ={class:"find-replace__find-stats"},KZ={class:"flex flex--row flex--space-between"},XZ={class:"flex flex--row"},ZZ={class:"flex flex--row"},JZ={key:0},QZ={class:"find-replace__row"},eJ={class:"find-replace__row flex flex--row flex--end"};const tJ={components:{NavigationBar:YG,ButtonBar:QG,StatusBar:dV,Explorer:DV,SideBar:_X,Editor:GX,Preview:JX,Tour:dZ,EditorInPageButtons:CZ,PreviewInPageButtons:MZ,StickyComment:FZ,CurrentDiscussion:$Z,FindReplace:XH(GZ,[["render",function(e,t,n,r,i,o){const a=wn("icon-close"),s=Cn("title");return $r(),Gr("div",{ref:"findReplaceRoot",class:"find-replace",onKeydown:t[11]||(t[11]=mo(po(((...e)=>o.onEscape&&o.onEscape(...e)),["stop"]),["esc"]))},[Kt(($r(),Gr("button",{class:"find-replace__close-button button not-tabbable",onClick:t[0]||(t[0]=e=>o.close())},[Qr(a)])),[[s,""]]),Jr("div",VZ,[Kt(Jr("input",{type:"text",class:"find-replace__text-input find-replace__text-input--find text-input",onKeydown:t[1]||(t[1]=mo((e=>o.find("forward")),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=e=>o.findText=e)},null,544),[[no,o.findText]]),Jr("div",YZ,Z(e.findPosition)+" of "+Z(e.findCount),1),Jr("div",KZ,[Jr("div",XZ,[Jr("button",{class:W(["find-replace__button find-replace__button--find-option button",{"find-replace__button--on":o.findCaseSensitive}]),onClick:t[3]||(t[3]=e=>o.findCaseSensitive=!o.findCaseSensitive),title:"Case sensitive"},"Aa",2),Jr("button",{class:W(["find-replace__button find-replace__button--find-option button",{"find-replace__button--on":o.findUseRegexp}]),onClick:t[4]||(t[4]=e=>o.findUseRegexp=!o.findUseRegexp),title:"Regular expression"},t[12]||(t[12]=[ti("."),Jr("sup",null,"",-1)]),2)]),Jr("div",ZZ,[Jr("button",{class:"find-replace__button button",onClick:t[5]||(t[5]=e=>o.find("backward"))},""),Jr("button",{class:"find-replace__button button",onClick:t[6]||(t[6]=e=>o.find("forward"))},"")])])]),"replace"===e.type?($r(),Gr("div",JZ,[Jr("div",QZ,[Kt(Jr("input",{type:"text",class:"find-replace__text-input find-replace__text-input--replace text-input",onKeydown:t[7]||(t[7]=mo(((...e)=>o.replace&&o.replace(...e)),["enter"])),"onUpdate:modelValue":t[8]||(t[8]=e=>o.replaceText=e)},null,544),[[no,o.replaceText]])]),Jr("div",eJ,[Jr("button",{class:"find-replace__button button",onClick:t[9]||(t[9]=(...e)=>o.replace&&o.replace(...e))},""),Jr("button",{class:"find-replace__button button",onClick:t[10]||(t[10]=(...e)=>o.replaceAll&&o.replaceAll(...e))},"")])])):ri("",!0)],544)}]])},computed:{...AM(["light"]),...AM("content",["revisionContent"]),...AM("discussion",["stickyComment"]),...BM("layout",["constants","styles"]),...BM("data",["layoutSettings"]),...BM("theme",["currEditTheme"]),editTheme(){return`edit-theme--${this.currEditTheme||"default"}`},showFindReplace:()=>!!_H.state.findReplace.type,editorShowInPageButtons:()=>_H.getters["data/computedSettings"].editor.showInPageButtons},methods:{...LM("layout",["updateBodySize"]),saveSelection:()=>iU.saveSelection(!0)},created(){Zq.init(),this.updateBodySize(),window.addEventListener("resize",this.updateBodySize),window.addEventListener("keyup",this.saveSelection),window.addEventListener("mouseup",this.saveSelection),window.addEventListener("focusin",this.saveSelection),window.addEventListener("contextmenu",this.saveSelection)},mounted(){const e=this.$refs.layoutRoot.querySelector(".editor__inner"),t=this.$refs.layoutRoot.querySelector(".preview__inner-2"),n=this.$refs.layoutRoot.querySelector(".toc__inner");iU.init(e,t,n);const r=()=>{this.styles.showEditor&&iU.clEditor.focus()};setTimeout(r,100),this.$watch((()=>this.styles.showEditor),r)},destroyed(){window.removeEventListener("resize",this.updateStyle),window.removeEventListener("keyup",this.saveSelection),window.removeEventListener("mouseup",this.saveSelection),window.removeEventListener("focusin",this.saveSelection),window.removeEventListener("contextmenu",this.saveSelection)}},nJ=["aria-hidden"],rJ={key:0,class:"layout__panel layout__panel--find-replace"};const iJ=XH(tJ,[["render",function(e,t,n,r,i,o){const a=wn("explorer"),s=wn("navigation-bar"),l=wn("editor"),c=wn("editor-in-page-buttons"),u=wn("sticky-comment"),h=wn("current-discussion"),d=wn("button-bar"),p=wn("preview"),f=wn("preview-in-page-buttons"),m=wn("find-replace"),g=wn("status-bar"),v=wn("side-bar"),y=wn("tour");return $r(),Gr("div",{ref:"layoutRoot",class:W(["layout",{"layout--revision":e.revisionContent}])},[Jr("div",{class:W(["layout__panel flex flex--row",{"flex--end":e.styles.showSideBar}])},[Kt(Jr("div",{class:"layout__panel layout__panel--explorer","aria-hidden":!e.styles.showExplorer,style:R({width:e.styles.layoutOverflow?"100%":e.constants.explorerWidth+"px"})},[Qr(a)],12,nJ),[[Mi,e.styles.showExplorer]]),Jr("div",{class:"layout__panel flex flex--column","tour-step-anchor":"welcome,end",style:R({width:e.styles.innerWidth+"px"})},[Kt(Jr("div",{class:"layout__panel layout__panel--navigation-bar",style:R({height:e.constants.navigationBarHeight+"px"})},[Qr(s)],4),[[Mi,e.styles.showNavigationBar]]),Jr("div",{class:"layout__panel flex flex--row",style:R({height:e.styles.innerHeight+"px"})},[Kt(Jr("div",{class:W(["layout__panel layout__panel--editor",o.editTheme]),style:R({width:e.styles.editorWidth+e.styles.editorGutterWidth+"px",fontSize:e.styles.fontSize+"px"})},[Jr("div",{class:"gutter",style:R({left:e.styles.editorGutterLeft+"px"})},[e.styles.editorGutterWidth?($r(),Gr("div",{key:0,class:"gutter__background",style:R({width:e.styles.editorGutterWidth+"px"})},null,4)):ri("",!0)],4),Qr(l),o.editorShowInPageButtons?($r(),Vr(c,{key:0})):ri("",!0),Jr("div",{class:"gutter",style:R({left:e.styles.editorGutterLeft+"px"})},[e.styles.editorGutterWidth&&"top"===e.stickyComment?($r(),Vr(u,{key:0})):ri("",!0),e.styles.editorGutterWidth?($r(),Vr(h,{key:1})):ri("",!0)],4)],6),[[Mi,e.styles.showEditor]]),Kt(Jr("div",{class:"layout__panel layout__panel--button-bar",style:R({width:e.constants.buttonBarWidth+"px"})},[Qr(d)],4),[[Mi,e.styles.showEditor]]),Kt(Jr("div",{class:"layout__panel layout__panel--preview",style:R({width:e.styles.previewWidth+e.styles.previewGutterWidth+"px",fontSize:e.styles.fontSize+"px"})},[Jr("div",{class:"gutter",style:R({left:e.styles.previewGutterLeft+"px"})},[e.styles.previewGutterWidth?($r(),Gr("div",{key:0,class:"gutter__background",style:R({width:e.styles.previewGutterWidth+"px"})},null,4)):ri("",!0)],4),Qr(p),Qr(f),Jr("div",{class:"gutter",style:R({left:e.styles.previewGutterLeft+"px"})},[e.styles.previewGutterWidth&&"top"===e.stickyComment?($r(),Vr(u,{key:0})):ri("",!0),e.styles.previewGutterWidth?($r(),Vr(h,{key:1})):ri("",!0)],4)],4),[[Mi,e.styles.showPreview]]),o.showFindReplace?($r(),Gr("div",rJ,[Qr(m)])):ri("",!0)],4),Kt(Jr("div",{class:"layout__panel layout__panel--status-bar",style:R({height:e.constants.statusBarHeight+"px"})},[Qr(g)],4),[[Mi,e.styles.showStatusBar]])],4),Kt(Jr("div",{class:"layout__panel layout__panel--side-bar",style:R({width:e.styles.layoutOverflow?"100%":e.constants.sideBarWidth+"px"})},[Qr(v)],4),[[Mi,e.styles.showSideBar]])],2),e.light||e.layoutSettings.welcomeTourFinished?ri("",!0):($r(),Vr(y,{key:0}))],2)}]]),oJ=(e,t,n,r)=>({contentHtml:"function"==typeof e?e:()=>e,rejectText:t,resolveArray:r,resolveText:n}),aJ={autoSyncWorkspace:oJ((e=>`<p> <b>${e.name}</b ><br><br></p>`),"",""),commentDeletion:oJ("<p></p>","",""),discussionDeletion:oJ("<p></p>","",""),fileRestoration:oJ("<p></p>","",""),folderDeletion:oJ((e=>`<p><b>${e.item.name}</b></p>`),"",""),imgStorageDeletion:oJ("<p></p>","",""),pathConflict:oJ((e=>`<p><b>${e.item.name}</b></p>`),"",""),paymentSuccess:oJ("<h3></h3> <p></p>",""),providerRedirection:oJ((e=>`<p> <b>${e.name}</b> </p>`),"",""),removeWorkspace:oJ((e=>`<p><b>${e.name}</b></p>`),"",""),reset:oJ("<p></p>","",""),shareHtml:oJ((e=>`<p> "${e.name}" :<br/><a href="${e.url}" target="_blank">${e.url}</a><br/></p>`),""),shareHtmlPre:oJ((e=>`<p> "${e.name}" Gist</p>`),"",""),signInForComment:oJ('<p> GiteeGitHub </p>\n    <div class="modal__info"><b>:</b> </div>',"","",[{text:"Gitee",value:"gitee"},{text:"GitHub",value:"github"}]),signInForSponsorship:oJ('<p> GiteeGitHub </p>\n    <div class="modal__info"><b>:</b> </div>',"","",[{text:"Gitee",value:"gitee"},{text:"GitHub",value:"github"}]),sponsorOnly:oJ("<p></p>",""),stopAutoSyncWorkspace:oJ((e=>`<p> <b>${e.name}</b> <br><br></p>`),"",""),stripName:oJ((e=>`<p><b>${e.item.name}</b></p>`),"",""),tempFileDeletion:oJ((e=>`<p><b>${e.item.name}</b></p>`),"",""),tempFolderDeletion:oJ("<p></p>","",""),trashDeletion:oJ("<p>7</p>",""),unauthorizedName:oJ((e=>`<p><b>${e.item.name}</b>></p>`),""),workspaceGoogleRedirection:oJ("<p>StackEditGoogle Drive</p>","","")},sJ={computed:{...BM("modal",["config"])}},lJ={class:"modal__inner-1",role:"dialog"},cJ={class:"modal__inner-2"};const uJ=XH(sJ,[["render",function(e,t,n,r,i,o){const a=wn("icon-close"),s=Cn("title");return $r(),Gr("div",lJ,[Jr("div",cJ,[Kt(($r(),Gr("button",{class:"modal__close-button button not-tabbable",onClick:t[0]||(t[0]=t=>e.config.reject())},[Qr(a)])),[[s,""]]),An(e.$slots,"default")])])}]]);const hJ=XH({props:["active"]},[["render",function(e,t,n,r,i,o){return $r(),Gr("div",{class:W(["tabs__tab flex flex--row",{"tabs__tab--active":n.active}]),role:"tab"},[Jr("a",{class:"flex flex--column flex--center",href:"javascript:void(0)",onClick:t[0]||(t[0]=t=>e.$emit("click"))},[An(e.$slots,"default")])],2)}]]),dJ=["error"],pJ=["for"],fJ={key:0,class:"form-entry__label-info"},mJ={class:"form-entry__field"};const gJ=XH({props:["label","info","error"],data:()=>({uid:UL.uid()}),mounted(){this.$el.querySelector("input,select,textarea").id=this.uid}},[["render",function(e,t,n,r,i,o){return $r(),Gr("div",{class:"form-entry",error:n.error},[Jr("label",{class:"form-entry__label",for:e.uid},[ti(Z(n.label),1),n.info?($r(),Gr("span",fJ,"  "+Z(n.info),1)):ri("",!0)],8,pJ),Jr("div",mJ,[An(e.$slots,"field")]),An(e.$slots,"default")],8,dJ)}]]),vJ={title:"",author:"",tags:"",categories:"",excerpt:"",featuredImage:"",status:"",date:""},yJ={components:{ModalInner:uJ,Tab:hJ,FormEntry:gJ,CodeEditor:YK},data:()=>({contentId:null,yamlProperties:null,preset:"",error:null,...vJ}),computed:{...BM("modal",["config"]),presets:()=>Object.keys(BL).sort(),tab:{get:()=>_H.getters["data/localSettings"].filePropertiesTab,set(e){_H.dispatch("data/patchLocalSettings",{filePropertiesTab:e})}}},created(){const e=_H.getters["content/current"];this.contentId=e.id,this.setYamlProperties(e.properties),"yaml"!==this.tab&&this.setSimpleTab()},methods:{yamlToSimple(){const e=this.properties||{},t=e.extensions||{};this.preset=t.preset,this.presets.includes(this.preset)||(this.preset="default"),Object.keys(vJ).forEach((t=>{this[t]=`${e[t]||""}`}))},simpleToYaml(){let e=!1;const t=this.properties||{},n=t.extensions||{};this.preset!==n.preset&&("default"!==this.preset?(n.preset=this.preset,e=!0):n.preset&&(delete n.preset,e=!0)),Object.keys(vJ).forEach((n=>{this[n]!==t[n]&&(this[n]?(t[n]=this[n],e=!0):t[n]&&(delete t[n],e=!0))})),e&&(Object.keys(n).length?t.extensions=n:delete t.extensions,this.setYamlProperties(Object.keys(t).length?xL.safeDump(t):"\n"))},setSimpleTab(){this.tab="simple",this.yamlToSimple()},setYamlTab(){this.tab="yaml",this.simpleToYaml()},setYamlProperties(e){this.yamlProperties=e;try{this.properties=xL.load(e),this.error=null}catch(i7){this.error=i7.message}},resolve(){if("simple"===this.tab&&this.simpleToYaml(),this.error)this.setYamlTab();else{const e=this.properties||{};Object.keys(vJ).some((t=>e[t]))&&OF.addBadge("setMetadata");const t=e.extensions||{};t.preset&&OF.addBadge("changePreset"),Object.keys(t).filter((e=>"preset"!==e)).length&&OF.addBadge("changeExtension"),_H.commit("content/patchItem",{id:this.contentId,properties:UL.sanitizeText(this.yamlProperties)}),this.config.resolve()}}}},bJ={class:"modal__content"},_J={class:"tabs flex flex--row"},wJ={key:0},kJ=["value"],xJ={key:1},CJ={class:"form-entry",role:"tabpanel","aria-label":"YAML properties"},SJ={class:"form-entry__field"},TJ={class:"modal__error modal__error--file-properties"},EJ={class:"modal__button-bar"};const IJ=XH(yJ,[["render",function(e,t,n,r,i,o){const a=wn("tab"),s=wn("form-entry"),l=wn("code-editor"),c=wn("modal-inner");return $r(),Vr(c,{class:"modal__inner-1--file-properties","aria-label":""},{default:Yt((()=>[Jr("div",bJ,[Jr("div",_J,[Qr(a,{active:"simple"===o.tab,onClick:t[0]||(t[0]=e=>o.setSimpleTab())},{default:Yt((()=>t[22]||(t[22]=[ti("  ")]))),_:1},8,["active"]),Qr(a,{active:"yaml"===o.tab,onClick:t[1]||(t[1]=e=>o.setYamlTab())},{default:Yt((()=>t[23]||(t[23]=[ti(" YAML ")]))),_:1},8,["active"])]),"simple"===o.tab?($r(),Gr("div",wJ,[t[25]||(t[25]=Jr("div",{class:"modal__title"},"",-1)),t[26]||(t[26]=Jr("div",{class:"modal__sub-title"},"Markdown",-1)),Qr(s,{label:"Preset"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[2]||(t[2]=t=>e.preset=t),onKeydown:t[3]||(t[3]=mo((e=>o.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(o.presets,((e,t)=>($r(),Gr("option",{key:t,value:e},Z(e),9,kJ)))),128))],544),[[ao,e.preset]])])),_:1}),t[27]||(t[27]=Jr("div",{class:"modal__title"},"",-1)),t[28]||(t[28]=Jr("div",{class:"modal__sub-title"},"WordPressBlogger ...",-1)),Qr(s,{label:"Title"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.title=t),onKeydown:t[5]||(t[5]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.title,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Author"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[6]||(t[6]=t=>e.author=t),onKeydown:t[7]||(t[7]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.author,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Tags",info:"comma-separated"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.tags=t),onKeydown:t[9]||(t[9]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.tags,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Categories",info:"comma-separated"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.categories=t),onKeydown:t[11]||(t[11]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.categories,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Excerpt"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[12]||(t[12]=t=>e.excerpt=t),onKeydown:t[13]||(t[13]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.excerpt,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Featured image"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[14]||(t[14]=t=>e.featuredImage=t),onKeydown:t[15]||(t[15]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.featuredImage,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Status"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[16]||(t[16]=t=>e.status=t),onKeydown:t[17]||(t[17]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.status,void 0,{trim:!0}]])])),default:Yt((()=>[t[24]||(t[24]=Jr("div",{class:"form-entry__info"},[Jr("b",null,""),ti(" ")],-1))])),_:1}),Qr(s,{label:"Date",info:"YYYY-MM-DD"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[18]||(t[18]=t=>e.date=t),onKeydown:t[19]||(t[19]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.date,void 0,{trim:!0}]])])),_:1})])):ri("",!0),"yaml"===o.tab?($r(),Gr("div",xJ,[Jr("div",CJ,[t[29]||(t[29]=Jr("label",{class:"form-entry__label"},"YAML",-1)),Jr("div",SJ,[Qr(l,{lang:"yaml",value:e.yamlProperties,key:"custom-properties",onChanged:o.setYamlProperties},null,8,["value","onChanged"])])]),Jr("div",TJ,Z(e.error),1),t[30]||(t[30]=Jr("div",{class:"modal__info modal__info--multiline"},[Jr("p",null,[Jr("strong",null,":"),ti(" ")]),Jr("pre",{class:"language-yaml"},[Jr("code",{class:"prism language-yaml"},[Jr("span",{class:"token key atrule"},"extensions"),Jr("span",{class:"token punctuation"},":"),ti("\n  "),Jr("span",{class:"token key atrule"},"emoji"),Jr("span",{class:"token punctuation"},":"),ti("\n    "),Jr("span",{class:"token comment"},"#  :) :-("),ti("\n    "),Jr("span",{class:"token key atrule"},"shortcuts"),Jr("span",{class:"token punctuation"},":"),ti(),Jr("span",{class:"token boolean important"},"true"),ti("\n")])]),Jr("p",null,[ti(""),Jr("code",null,"zero"),ti("")]),Jr("pre",{class:"language-yaml"},[Jr("code",{class:"prism language-yaml"},[Jr("span",{class:"token key atrule"},"extensions"),Jr("span",{class:"token punctuation"},":"),ti("\n  "),Jr("span",{class:"token key atrule"},"preset"),Jr("span",{class:"token punctuation"},":"),ti(" zero\n  "),Jr("span",{class:"token key atrule"},"markdown"),Jr("span",{class:"token punctuation"},":"),ti("\n    "),Jr("span",{class:"token key atrule"},"table"),Jr("span",{class:"token punctuation"},":"),ti(),Jr("span",{class:"token boolean important"},"true"),ti("\n  "),Jr("span",{class:"token key atrule"},"katex"),Jr("span",{class:"token punctuation"},":"),ti("\n    "),Jr("span",{class:"token key atrule"},"enabled"),Jr("span",{class:"token punctuation"},":"),ti(),Jr("span",{class:"token boolean important"},"true"),ti("\n")])]),Jr("p",null,[ti(" "),Jr("a",{href:"https://gitee.com/mafgwo/stackedit/blob/master/src/data/presets.js",target:"_blank"},""),ti(".")])],-1))])):ri("",!0)]),Jr("div",EJ,[Jr("button",{class:"button",onClick:t[20]||(t[20]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[21]||(t[21]=e=>o.resolve())},"")])])),_:1})}]]),AJ="# ",DJ={components:{ModalInner:uJ,Tab:hJ,CodeEditor:YK},data:()=>({tab:"custom",defaultSettings:$F,customSettings:null,error:null}),computed:{...BM("modal",["config"]),strippedCustomSettings(){return this.customSettings===AJ?"\n":this.customSettings.replace(/\t/g,"  ")}},created(){const e=_H.getters["data/settings"];this.setCustomSettings("\n"===e?AJ:e)},methods:{setCustomSettings(e){this.customSettings=e;try{xL.load(this.strippedCustomSettings),this.error=null}catch(i7){this.error=i7.message}},async resolve(){if(!this.error){const e=this.strippedCustomSettings;await _H.dispatch("data/setSettings",e);const t=xL.load(e);t.shortcuts&&OF.addBadge("changeShortcuts");const n=_H.getters["data/computedSettings"];Object.keys(t).filter((e=>"shortcuts"!==e&&n[e])).length&&OF.addBadge("changeSettings"),this.config.resolve(e)}}}},BJ={class:"modal__content"},LJ={class:"tabs flex flex--row"},MJ={key:0,class:"form-entry",role:"tabpanel","aria-label":""},FJ={class:"form-entry__field form-entry__field--code-editor"},OJ={key:1,class:"form-entry",role:"tabpanel","aria-label":""},PJ={class:"form-entry__field form-entry__field--code-editor"},NJ={class:"modal__error modal__error--settings"},jJ={class:"modal__button-bar"};const zJ=XH(DJ,[["render",function(e,t,n,r,i,o){const a=wn("tab"),s=wn("code-editor"),l=wn("modal-inner");return $r(),Vr(l,{class:"modal__inner-1--settings","aria-label":"Settings"},{default:Yt((()=>[Jr("div",BJ,[Jr("div",LJ,[Qr(a,{active:"custom"===e.tab,onClick:t[0]||(t[0]=t=>e.tab="custom")},{default:Yt((()=>t[4]||(t[4]=[ti("  ")]))),_:1},8,["active"]),Qr(a,{active:"default"===e.tab,onClick:t[1]||(t[1]=t=>e.tab="default")},{default:Yt((()=>t[5]||(t[5]=[ti("  ")]))),_:1},8,["active"])]),"custom"===e.tab?($r(),Gr("div",MJ,[t[6]||(t[6]=Jr("label",{class:"form-entry__label"},"YAML",-1)),Jr("div",FJ,[Qr(s,{lang:"yaml",value:e.customSettings,key:"custom-settings",onChanged:o.setCustomSettings},null,8,["value","onChanged"])])])):"default"===e.tab?($r(),Gr("div",OJ,[t[7]||(t[7]=Jr("label",{class:"form-entry__label"},"YAML",-1)),Jr("div",PJ,[Qr(s,{lang:"yaml",value:e.defaultSettings,key:"default-settings",disabled:"true"},null,8,["value"])])])):ri("",!0),Jr("div",NJ,Z(e.error),1)]),Jr("div",jJ,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=(...e)=>o.resolve&&o.resolve(...e))},"")])])),_:1})}]]),RJ="/* Add your custom Handlebars helpers here.\n\nFor example:\n\nHandlebars.registerHelper('transform', function (options) {\n  var result = options.fn(this);\n  return new Handlebars.SafeString(\n    result.replace(/<pre[^>]*>/g, '<pre class=\"prettyprint\">')\n  );\n});\n\nThen use the helper in your template:\n\n{{#transform}}{{{files.0.content.html}}}{{/transform}}\n*/\n\n",qJ=new Intl.Collator(void 0,{sensitivity:"base"});function $J(e){"\n"===e.value&&(e.value="\x3c!-- Specify your Handlebars template here.\n\nThe following JavaScript context will be passed to the template:\n\n{\n  files: [{\n    name: 'The filename',\n    content: {\n      text: 'The file content',\n      html: '<p>The file content</p>',\n      yamlProperties: 'The file properties in YAML format',\n      properties: {\n        // Computed file properties object\n      },\n      toc: [\n        // Table Of Contents tree\n      ]\n    }\n  }]\n}\n\n\nAs an example:\n\n<html><body>{{{files.0.content.html}}}</body></html>\n\nwill produce:\n\n<html><body><p>The file content</p></body></html>\n\n\nYou can use Handlebars built-in helpers and the custom StackEdit ones:\n\n{{#tocToHtml files.0.content.toc}}{{/tocToHtml}} will produce a clickable TOC.\n\n{{#tocToHtml files.0.content.toc 3}}{{/tocToHtml}} will limit the TOC depth to 3.\n--\x3e\n\n"),"\n"===e.helpers&&(e.helpers=RJ)}const UJ={components:{ModalInner:uJ,CodeEditor:YK},data:()=>({selectedId:"",templates:{},showHelpers:!1,isEditing:!1,editingName:""}),computed:{...BM("modal",["config"]),isReadOnly(){return this.templates[this.selectedId].isAdditional}},created(){this.$watch((()=>_H.getters["data/allTemplatesById"]),(e=>{const t={};Object.entries(e).sort((([,e],[,t])=>qJ.compare(e.name,t.name))).forEach((([e,n])=>{const r=UL.deepCopy(n);$J(r),t[e]=r})),this.templates=t,this.selectedId=this.config.selectedId,t[this.selectedId]||([this.selectedId]=Object.keys(t)),this.isEditing=!1}),{immediate:!0}),this.$watch("selectedId",(e=>{const t=this.templates[e];this.showHelpers=t.helpers!==RJ,this.editingName=t.name}),{immediate:!0})},methods:{create(){const e={name:"New template",value:"\n",helpers:"\n"};$J(e),this.selectedId=UL.uid(),this.templates[this.selectedId]=e,this.isEditing=!0},copy(){const e=UL.deepCopy(this.templates[this.selectedId]);e.name+=" copy",delete e.isAdditional,this.selectedId=UL.uid(),this.templates[this.selectedId]=e,this.isEditing=!0},remove(){delete this.templates[this.selectedId],[this.selectedId]=Object.keys(this.templates)},submitEdit(e){const t=this.templates[this.selectedId];!e&&this.editingName?t.name=UL.sanitizeName(this.editingName):this.editingName=t.name,setTimeout((()=>{this.isEditing=!1}),1)},async resolve(){const e=Object.keys(_H.getters["data/templatesById"]);await _H.dispatch("data/setTemplatesById",this.templates);const t=Object.keys(_H.getters["data/templatesById"]),n=t.filter((t=>!e.includes(t))).length,r=e.filter((e=>!t.includes(e))).length;n&&OF.addBadge("addTemplate"),r&&OF.addBadge("removeTemplate"),this.config.resolve({templates:this.templates,selectedId:this.selectedId})}}},HJ={class:"modal__content"},WJ={class:"form-entry"},GJ={class:"form-entry__field"},VJ=["value"],YJ={class:"form-entry__actions flex flex--row flex--end"},KJ={class:"form-entry"},XJ={class:"form-entry__field"},ZJ={key:0},JJ={key:1,class:"form-entry"},QJ={class:"form-entry__field"},eQ={class:"modal__button-bar"};const tQ=XH(UJ,[["render",function(e,t,n,r,i,o){const a=wn("icon-file-plus"),s=wn("icon-file-multiple"),l=wn("icon-pen"),c=wn("icon-delete"),u=wn("code-editor"),h=wn("modal-inner"),d=Cn("focus"),p=Cn("title");return $r(),Vr(h,{class:"modal__inner-1--templates","aria-label":""},{default:Yt((()=>[Jr("div",HJ,[Jr("div",WJ,[t[12]||(t[12]=Jr("label",{class:"form-entry__label",for:"template"},"",-1)),Jr("div",GJ,[e.isEditing?Kt(($r(),Gr("input",{key:0,id:"template",type:"text",class:"textfield",onBlur:t[0]||(t[0]=e=>o.submitEdit()),onKeydown:[t[1]||(t[1]=mo((e=>o.submitEdit()),["enter"])),t[2]||(t[2]=mo(po((e=>o.submitEdit(!0)),["stop"]),["esc"]))],"onUpdate:modelValue":t[3]||(t[3]=t=>e.editingName=t)},null,544)),[[d],[no,e.editingName]]):Kt(($r(),Gr("select",{key:1,id:"template","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedId=t),class:"textfield"},[($r(!0),Gr(Pr,null,En(e.templates,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,VJ)))),128))],512)),[[ao,e.selectedId]])]),Jr("div",YJ,[Kt(($r(),Gr("button",{class:"form-entry__button button",onClick:t[5]||(t[5]=(...e)=>o.create&&o.create(...e))},[Qr(a)])),[[p,""]]),Kt(($r(),Gr("button",{class:"form-entry__button button",onClick:t[6]||(t[6]=(...e)=>o.copy&&o.copy(...e))},[Qr(s)])),[[p,""]]),o.isReadOnly?ri("",!0):Kt(($r(),Gr("button",{key:0,class:"form-entry__button button",onClick:t[7]||(t[7]=t=>e.isEditing=!0)},[Qr(l)])),[[p,""]]),o.isReadOnly?ri("",!0):Kt(($r(),Gr("button",{key:1,class:"form-entry__button button",onClick:t[8]||(t[8]=(...e)=>o.remove&&o.remove(...e))},[Qr(c)])),[[p,""]])])]),Jr("div",KJ,[t[13]||(t[13]=Jr("label",{class:"form-entry__label"},"",-1)),Jr("div",XJ,[($r(!0),Gr(Pr,null,En(e.templates,((t,n)=>($r(),Gr(Pr,{key:n},[n===e.selectedId?($r(),Vr(u,{key:0,lang:"handlebars",value:t.value,disabled:o.isReadOnly,onChanged:e=>t.value=e},null,8,["value","disabled","onChanged"])):ri("",!0)],64)))),128))])]),o.isReadOnly?ri("",!0):($r(),Gr("div",ZJ,[e.showHelpers?($r(),Gr("div",JJ,[t[14]||(t[14]=Jr("br",null,null,-1)),t[15]||(t[15]=Jr("label",{class:"form-entry__label"},"",-1)),Jr("div",QJ,[($r(!0),Gr(Pr,null,En(e.templates,((t,n)=>($r(),Gr(Pr,{key:n},[n===e.selectedId?($r(),Vr(u,{key:0,lang:"javascript",value:t.helpers,onChanged:e=>t.helpers=e},null,8,["value","onChanged"])):ri("",!0)],64)))),128))])])):($r(),Gr("a",{key:0,href:"javascript:void(0)",onClick:t[9]||(t[9]=t=>e.showHelpers=!0)},""))]))]),Jr("div",eQ,[Jr("button",{class:"button",onClick:t[10]||(t[10]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[11]||(t[11]=e=>o.resolve())},"")])])),_:1})}]]),nQ="6.0.0",rQ={components:{ModalInner:uJ},data:()=>({version:nQ}),computed:{...BM("modal",["config"]),faq:()=>Zq.defaultConverter.render("****\n\n\n\nGitea\n\n**StackEdit**\n\nStackEditGiteeGithubDropbox ...\n")}},iQ={class:"modal__content"},oQ=["innerHTML"],aQ={class:"modal__button-bar"};const sQ=XH(rQ,[["render",function(e,t,n,r,i,o){const a=wn("modal-inner");return $r(),Vr(a,{class:"modal__inner-1--about-modal","aria-label":"About"},{default:Yt((()=>[Jr("div",iQ,[t[3]||(t[3]=Jr("div",{class:"logo-background"},null,-1)),t[4]||(t[4]=ti(" StackEdit  ")),t[5]||(t[5]=Jr("a",{target:"_blank",href:"https://gitee.com/mafgwo/stackedit/"},"Gitee",-1)),t[6]||(t[6]=ti("  ")),t[7]||(t[7]=Jr("br",null,null,-1)),t[8]||(t[8]=Jr("a",{target:"_blank",href:"https://gitee.com/mafgwo/stackedit/issues"},"",-1)),t[9]||(t[9]=ti("  ")),t[10]||(t[10]=Jr("a",{target:"_blank",href:"https://gitee.com/mafgwo/stackedit/releases"},"",-1)),t[11]||(t[11]=Jr("br",null,null,-1)),t[12]||(t[12]=Jr("a",{target:"_blank",href:"#"},"Chrome ",-1)),t[13]||(t[13]=ti("  ")),t[14]||(t[14]=Jr("a",{target:"_blank",href:"#"},"Chrome ",-1)),t[15]||(t[15]=Jr("br",null,null,-1)),t[16]||(t[16]=Jr("hr",null,null,-1)),Jr("small",null,[t[1]||(t[1]=ti(" 2022 StackEdit")),t[2]||(t[2]=Jr("br",null,null,-1)),ti("v"+Z(e.version),1)]),t[17]||(t[17]=Jr("h3",null,"",-1)),Jr("div",{class:"faq",innerHTML:o.faq},null,8,oQ),t[18]||(t[18]=Jr("div",{class:"modal__info"},[ti("  "),Jr("a",{href:"mailto:mafgwo@163.com"},""),ti(". ")],-1)),t[19]||(t[19]=ti(" Licensed under an ")),t[20]||(t[20]=Jr("a",{target:"_blank",href:"http://www.apache.org/licenses/LICENSE-2.0"},"Apache License",-1)),t[21]||(t[21]=Jr("br",null,null,-1)),t[22]||(t[22]=Jr("a",{target:"_blank",href:"privacy_policy.html"},"",-1))]),Jr("div",aQ,[Jr("button",{class:"button button--resolve",onClick:t[0]||(t[0]=t=>e.config.resolve())},"")])])),_:1})}]]),lQ=new Intl.Collator(void 0,{sensitivity:"base"}),cQ=e=>{const t={...e,data:()=>({...e.data?e.data():{},errorTimeouts:{}}),components:{...e.components||{},ModalInner:uJ,FormEntry:gJ},computed:{...e.computed||{},config:()=>_H.getters["modal/config"],currentFileName:()=>_H.getters["file/current"].name},methods:{...e.methods||{},openFileProperties:()=>_H.dispatch("modal/open","fileProperties"),setError(e){clearTimeout(this.errorTimeouts[e]);const t=this.$el.querySelector(`.form-entry[error=${e}]`);t&&(t.classList.add("form-entry--error"),this.errorTimeouts[e]=setTimeout((()=>{t.classList.remove("form-entry--error")}),1e3))}}};return Object.entries(e.computedLocalSettings||{}).forEach((([e,n])=>{t.computed[e]={get:()=>_H.getters["data/localSettings"][n],set(e){_H.dispatch("data/patchLocalSettings",{[n]:e})}},"selectedTemplate"===e&&(t.computed.allTemplatesById=()=>{const e=_H.getters["data/allTemplatesById"],t={};return Object.entries(e).sort((([,e],[,t])=>lQ.compare(e.name,t.name))).forEach((([e,n])=>{t[e]=n})),t},t.methods.configureTemplates=async function(){const{selectedId:e}=await _H.dispatch("modal/open",{type:"templates",selectedId:this.selectedTemplate});_H.dispatch("data/patchLocalSettings",{[n]:e})})})),t.computedLocalSettings=null,t},uQ=cQ({data:()=>({result:""}),computedLocalSettings:{selectedTemplate:"htmlExportTemplate"},mounted(){let e;this.$watch("selectedTemplate",(t=>{clearTimeout(e),e=setTimeout((async()=>{const e=_H.getters["file/current"],n=await vG.applyTemplate(e.id,this.allTemplatesById[t]);this.result=n}),10)}),{immediate:!0})},methods:{...LM("notification",["info"]),async resolve(){const{config:e}=this,t=_H.getters["file/current"];e.resolve(),await vG.exportToDisk(t.id,"html",this.allTemplatesById[this.selectedTemplate]),OF.addBadge("exportHtml")}}}),hQ={class:"modal__content"},dQ=["value"],pQ={class:"form-entry__actions"},fQ={class:"modal__button-bar"};const mQ=XH(uQ,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("modal-inner"),l=Cn("clipboard");return $r(),Vr(s,{"aria-label":"HTML"},{default:Yt((()=>[Jr("div",hQ,[t[6]||(t[6]=Jr("p",null,[ti(""),Jr("b",null," HTML"),ti("")],-1)),Qr(a,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedTemplate=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,dQ)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",pQ,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",fQ,[Kt(($r(),Gr("button",{class:"button button--copy",onClick:t[3]||(t[3]=t=>e.info("HTML"))},t[7]||(t[7]=[ti("")]))),[[l,e.result]]),Jr("button",{class:"button",onClick:t[4]||(t[4]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=t=>e.resolve())},"")])])),_:1})}]]),gQ=cQ({computedLocalSettings:{selectedTemplate:"pdfExportTemplate"},methods:{async resolve(){this.config.resolve();const e=_H.getters["file/current"];_H.dispatch("queue/enqueue",(async()=>{const t=await vG.applyTemplate(e.id,this.allTemplatesById[this.selectedTemplate],!0);try{const{body:n}=await dO.request({method:"POST",url:"pdfExport",params:{options:JSON.stringify(_H.getters["data/computedSettings"].wkhtmltopdf)},body:t,blob:!0,timeout:6e4});pG.saveAs(n,`${e.name}.pdf`),OF.addBadge("exportPdf")}catch(n){_H.dispatch("notification/error",n)}}))}}}),vQ={class:"modal__content"},yQ=["value"],bQ={class:"form-entry__actions"},_Q={class:"modal__button-bar"};const wQ=XH(gQ,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"PDF"},{default:Yt((()=>[Jr("div",vQ,[t[5]||(t[5]=Jr("p",null,[ti(""),Jr("b",null," pdf"),ti("( "),Jr("a",{href:"https://gitee.com/mafgwo/stackedit/blob/master/docs/PDF.md",target:"_blank"},"PDF"),ti(" )")],-1)),Qr(a,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedTemplate=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,yQ)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",bQ,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",_Q,[Jr("button",{class:"button",onClick:t[3]||(t[3]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[4]||(t[4]=t=>e.resolve())},"")])])),_:1})}]]),kQ=cQ({computedLocalSettings:{selectedFormat:"pandocExportFormat"},methods:{async resolve(){this.config.resolve();const e=_H.getters["file/current"],t=_H.getters["content/current"],{selectedFormat:n}=this;_H.dispatch("queue/enqueue",(async()=>{try{const{body:r}=await dO.request({method:"POST",url:"pandocExport",params:{format:n,options:JSON.stringify(_H.getters["data/computedSettings"].pandoc),metadata:JSON.stringify(t.properties)},body:JSON.stringify(iU.getPandocAst()),blob:!0,timeout:6e4});pG.saveAs(r,`${e.name}.${n}`),OF.addBadge("exportPandoc")}catch(r){_H.dispatch("notification/error",r)}}))}}}),xQ={class:"modal__content"},CQ={class:"modal__button-bar"};const SQ=XH(kQ,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"Pandoc"},{default:Yt((()=>[Jr("div",xQ,[t[5]||(t[5]=Jr("p",null,[ti(""),Jr("b",null," pandoc"),ti("")],-1)),Qr(a,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedFormat=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},t[4]||(t[4]=[Jr("option",{value:"asciidoc"},"AsciiDoc",-1),Jr("option",{value:"context"},"ConTeXt",-1),Jr("option",{value:"epub"},"EPUB",-1),Jr("option",{value:"epub3"},"EPUB v3",-1),Jr("option",{value:"latex"},"LaTeX",-1),Jr("option",{value:"odt"},"OpenOffice",-1),Jr("option",{value:"pdf"},"PDF",-1),Jr("option",{value:"rst"},"reStructuredText",-1),Jr("option",{value:"rtf"},"Rich Text Format",-1),Jr("option",{value:"textile"},"Textile",-1),Jr("option",{value:"docx"},"Word",-1)]),544),[[ao,e.selectedFormat]])])),_:1})]),Jr("div",CQ,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=t=>e.resolve())},"")])])),_:1})}]]),TQ=cQ({data:()=>({url:""}),methods:{resolve(e){if(e.preventDefault(),this.url){const{callback:e}=this.config;this.config.resolve(),e(this.url)}else this.setError("url")},reject(){const{callback:e}=this.config;this.config.reject(),e(null)}}}),EQ={class:"modal__content"},IQ={class:"modal__button-bar"};const AQ=XH(TQ,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":""},{default:Yt((()=>[Jr("div",EQ,[t[4]||(t[4]=Jr("p",null,[ti(""),Jr("b",null," url "),ti("")],-1)),Qr(a,{label:"URL",error:"url"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.url=t),onKeydown:t[1]||(t[1]=mo(((...t)=>e.resolve&&e.resolve(...t)),["enter"]))},null,544),[[no,e.url,void 0,{trim:!0}]])])),_:1})]),Jr("div",IQ,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=(...t)=>e.resolve&&e.resolve(...t))},"")])])),_:1})}]]),DQ={class:"menu-item flex flex--row flex--align-center"},BQ={class:"menu-item__icon flex flex--column flex--center"},LQ={class:"menu-item__text flex flex--column"};const MQ=cQ({components:{MenuEntry:_V,MenuItem:XH({},[["render",function(e,t){return $r(),Gr("div",DQ,[Jr("div",BQ,[An(e.$slots,"icon")]),Jr("div",LQ,[An(e.$slots,"default")])])}]])},data:()=>({uploading:!1,url:""}),computed:{...BM("workspace",["currentWorkspace","currentWorkspaceIsGit"]),checkedStorage:()=>_H.getters["img/getCheckedStorage"],workspaceImgPath(){if(!this.currentWorkspaceIsGit)return[];const e=_H.getters["img/getWorkspaceImgPath"];return Object.keys(e||{})},imageTokens:()=>[...Object.values(_H.getters["data/smmsTokensBySub"]).map((e=>({...e,providerId:"smms",remark:"SM.MS"}))),...Object.values(_H.getters["data/customTokensBySub"]).map((e=>({...e,providerId:"custom",headers:e.customHeaders&&JSON.stringify(e.customHeaders),params:e.customParams&&JSON.stringify(e.customParams),remark:""})))],tokensImgStorages(){const e=[...Object.values(_H.getters["data/giteaTokensBySub"]).map((e=>({token:e,providerId:"gitea",providerName:"Gitea"}))),...Object.values(_H.getters["data/githubTokensBySub"]).map((e=>({token:e,providerId:"github",providerName:"GitHub"})))],t=[];return Object.values(e).sort(((e,t)=>e.token.name.localeCompare(t.token.name))).forEach((e=>{e.token.imgStorages&&0!==e.token.imgStorages.length&&e.token.imgStorages.forEach((n=>t.push({...n,token:e.token,uname:e.token.name,providerId:e.providerId,providerName:e.providerName,repoUrl:"gitea"===e.providerId?`${e.token.serverUrl}/${n.repoUri}`:`${n.owner}/${n.repo}`})))})),t}},methods:{resolve(e){if(e.preventDefault(),this.url){const{callback:e}=this.config;this.config.resolve(),e(this.url)}else this.setError("url")},reject(){const{callback:e}=this.config;this.config.reject(),e(null)},async uploadImage(e){if(!e.target.files||!e.target.files.length)return;const t=e.target.files[0];try{this.uploading=!0;const{url:e,error:n}=await UX.updateImg(t);if(n)return void _H.dispatch("notification/error",n);this.url=e}catch(n){_H.dispatch("notification/error",n)}finally{this.uploading=!1,e.target.value=""}},async remove(e,t){try{if(await _H.dispatch("modal/open","imgStorageDeletion"),"smms"===e||"custom"===e){const n=UL.deepCopy(_H.getters[`data/${e}TokensBySub`]);delete n[t.sub],await _H.dispatch("data/patchTokensByType",{[e]:n})}else"gitea"===e?gj.removeTokenImgStorage(t.token,t.sid):"github"===e&&MO.removeTokenImgStorage(t.token,t.sid)}catch(i7){}},async removeByPath(e){_H.dispatch("img/removeWorkspaceImgPath",e)},async addWorkspaceImgPath(){const{path:e}=await _H.dispatch("modal/open",{type:"workspaceImgPath"});_H.dispatch("img/addWorkspaceImgPath",e)},async addSmmsAccount(){const{proxyUrl:e,apiSecretToken:t}=await _H.dispatch("modal/open",{type:"smmsAccount"});await RX.addAccount(e,t)},async addCustomAccount(){const e=await _H.dispatch("modal/open",{type:"customAccount"});await qX.addAccount(e)},async addGiteaImgStorage(){try{const e=await _H.dispatch("modal/open",{type:"giteaAccount"}),t=await gj.addAccount(e),n=await _H.dispatch("modal/open",{type:"giteaImgStorage",token:t});gj.updateToken(t,n)}catch(i7){}},async addGithubImgStorage(){try{await _H.dispatch("modal/open",{type:"githubAccount"});const e=await MO.addAccount(_H.getters["data/localSettings"].githubRepoFullAccess),t=await _H.dispatch("modal/open",{type:"githubImgStorage",token:e});MO.updateToken(e,t)}catch(i7){}},async checkedImgDest(e,t,n){let r="token";t?"gitea"!==t&&"github"!==t||(r="tokenRepo"):r="workspace",_H.dispatch("img/changeCheckedStorage",{type:r,provider:t,sub:e,sid:n})}}}),FQ={class:"modal__content"},OQ={key:0},PQ={class:"modal__button-bar"},NQ=["disabled"],jQ=["disabled"],zQ=["onClick"],RQ=["onClick"],qQ={key:0,class:"line-entry"},$Q={key:1,class:"line-entry"},UQ={key:2,class:"line-entry"},HQ=["onClick"];const WQ=XH(MQ,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("icon-check-circle"),l=wn("icon-check-circle-un"),c=wn("icon-provider"),u=wn("icon-delete"),h=wn("menu-item"),d=wn("menu-entry"),p=wn("modal-inner"),f=Cn("title");return $r(),Vr(p,{"aria-label":""},{default:Yt((()=>[Jr("div",FQ,[Jr("p",null,[t[5]||(t[5]=ti("")),t[6]||(t[6]=Jr("b",null," url ",-1)),t[7]||(t[7]=ti("")),e.uploading?($r(),Gr("span",OQ,"(...)")):ri("",!0)]),Qr(a,{label:"URL",error:"url"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.url=t),onKeydown:t[1]||(t[1]=mo(((...t)=>e.resolve&&e.resolve(...t)),["enter"]))},null,544),[[no,e.url,void 0,{trim:!0}]])])),_:1})]),Jr("div",PQ,[Jr("input",{class:"hidden-file",id:"upload-image-file-input",type:"file",accept:"image/*",disabled:e.uploading,onChange:t[2]||(t[2]=(...t)=>e.uploadImage&&e.uploadImage(...t))},null,40,NQ),t[8]||(t[8]=Jr("label",{for:"upload-image-file-input"},[Jr("a",{class:"button"},"")],-1)),Jr("button",{class:"button",onClick:t[3]||(t[3]=t=>e.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[4]||(t[4]=(...t)=>e.resolve&&e.resolve(...t)),disabled:e.uploading},"",8,jQ)]),Jr("div",null,[t[15]||(t[15]=Jr("hr",null,null,-1)),t[16]||(t[16]=Jr("p",null,"/",-1)),($r(!0),Gr(Pr,null,En(e.workspaceImgPath,(n=>($r(),Vr(d,{onClick:t=>e.checkedImgDest(n),key:n},{icon:Yt((()=>[e.checkedStorage.sub===n?($r(),Vr(s,{key:0})):ri("",!0),e.checkedStorage.sub!==n?($r(),Vr(l,{key:1})):ri("",!0)])),default:Yt((()=>[Qr(h,null,{icon:Yt((()=>[Qr(c,{"provider-id":e.currentWorkspace.providerId},null,8,["provider-id"])])),default:Yt((()=>[Jr("div",null,[t[9]||(t[9]=ti("  ")),Kt(($r(),Gr("button",{class:"menu-item__button button",onClick:po((t=>e.removeByPath(n)),["stop"])},[Qr(u)],8,zQ)),[[f,""]])]),Jr("span",null,""+Z(n),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),($r(!0),Gr(Pr,null,En(e.imageTokens,(t=>($r(),Vr(d,{onClick:n=>e.checkedImgDest(t.sub,t.providerId),key:t.sub},{icon:Yt((()=>[e.checkedStorage.sub===t.sub?($r(),Vr(s,{key:0})):ri("",!0),e.checkedStorage.sub!==t.sub?($r(),Vr(l,{key:1})):ri("",!0)])),default:Yt((()=>[Qr(h,null,{icon:Yt((()=>[Qr(c,{"provider-id":t.providerId},null,8,["provider-id"])])),default:Yt((()=>[Jr("div",null,[ti(Z(t.remark)+" ",1),Kt(($r(),Gr("button",{class:"menu-item__button button",onClick:po((n=>e.remove(t.providerId,t)),["stop"])},[Qr(u)],8,RQ)),[[f,""]])]),Jr("span",null,Z(t.name),1),t.uploadUrl?($r(),Gr("span",qQ,""+Z(t.uploadUrl),1)):ri("",!0),t.headers?($r(),Gr("span",$Q,""+Z(t.headers),1)):ri("",!0),t.params?($r(),Gr("span",UQ,"Form"+Z(t.params),1)):ri("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),($r(!0),Gr(Pr,null,En(e.tokensImgStorages,(t=>($r(),Vr(d,{onClick:n=>e.checkedImgDest(t.token.sub,t.providerId,t.sid),key:t.sid},{icon:Yt((()=>[e.checkedStorage.sid===t.sid?($r(),Vr(s,{key:0})):ri("",!0),e.checkedStorage.sid!==t.sid?($r(),Vr(l,{key:1})):ri("",!0)])),default:Yt((()=>[Qr(h,null,{icon:Yt((()=>[Qr(c,{"provider-id":t.providerId},null,8,["provider-id"])])),default:Yt((()=>[Jr("div",null,[ti(Z(t.providerName)+" ",1),Kt(($r(),Gr("button",{class:"menu-item__button button",onClick:po((n=>e.remove(t.providerId,t)),["stop"])},[Qr(u)],8,HQ)),[[f,""]])]),Jr("span",null,Z(t.uname)+", URL: "+Z(t.repoUrl)+", : "+Z(t.path)+", : "+Z(t.branch),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),Qr(d,{onClick:e.addWorkspaceImgPath},{icon:Yt((()=>[Qr(c,{"provider-id":e.currentWorkspace.providerId},null,8,["provider-id"])])),default:Yt((()=>[t[10]||(t[10]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),Qr(d,{onClick:e.addSmmsAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"smms"})])),default:Yt((()=>[t[11]||(t[11]=Jr("span",null,"SM.MS",-1))])),_:1},8,["onClick"]),Qr(d,{onClick:e.addCustomAccount},{icon:Yt((()=>[Qr(c,{"provider-id":"custom"})])),default:Yt((()=>[t[12]||(t[12]=Jr("span",null,"",-1))])),_:1},8,["onClick"]),Qr(d,{onClick:e.addGiteaImgStorage},{icon:Yt((()=>[Qr(c,{"provider-id":"gitea"})])),default:Yt((()=>[t[13]||(t[13]=Jr("span",null,"Gitea",-1))])),_:1},8,["onClick"]),Qr(d,{onClick:e.addGithubImgStorage},{icon:Yt((()=>[Qr(c,{"provider-id":"github"})])),default:Yt((()=>[t[14]||(t[14]=Jr("span",null,"GitHub",-1))])),_:1},8,["onClick"])])])),_:1})}]]),GQ={components:{ModalInner:uJ},computed:{...BM("modal",["config"]),...BM("syncLocation",{syncLocations:"currentWithWorkspaceSyncLocation"}),currentFileName:()=>_H.getters["file/current"].name},methods:{...LM("notification",["info"]),remove(e){"main"===e.id?this.info("This location can not be removed."):(_H.commit("syncLocation/deleteItem",e.id),OF.addBadge("removeSyncLocation"))}}},VQ={class:"modal__content"},YQ={class:"modal__image"},KQ={key:0},XQ={key:1},ZQ={class:"sync-entry__header flex flex--row flex--align-center"},JQ={class:"sync-entry__icon flex flex--column flex--center"},QQ={class:"sync-entry__description"},e0={class:"sync-entry__buttons flex flex--row flex--center"},t0=["onClick"],n0={class:"sync-entry__row flex flex--row flex--align-center"},r0={class:"sync-entry__url"},i0={key:0,class:"sync-entry__buttons flex flex--row flex--center"},o0=["href"],a0={key:2,class:"modal__info"},s0={class:"modal__button-bar"};const l0=XH(GQ,[["render",function(e,t,n,r,i,o){const a=wn("icon-sync"),s=wn("icon-provider"),l=wn("icon-delete"),c=wn("icon-content-copy"),u=wn("icon-open-in-new"),h=wn("modal-inner"),d=Cn("title"),p=Cn("clipboard");return $r(),Vr(h,{class:"modal__inner-1--sync-management","aria-label":"Manage synchronized locations"},{default:Yt((()=>[Jr("div",VQ,[Jr("div",YQ,[Qr(a)]),e.syncLocations.length?($r(),Gr("p",KQ,[Jr("b",null,Z(o.currentFileName),1),t[2]||(t[2]=ti(" "))])):($r(),Gr("p",XQ,[Jr("b",null,Z(o.currentFileName),1),t[3]||(t[3]=ti(""))])),Jr("div",null,[($r(!0),Gr(Pr,null,En(e.syncLocations,(n=>($r(),Gr("div",{class:"sync-entry flex flex--column",key:n.id},[Jr("div",ZQ,[Jr("div",JQ,[Qr(s,{"provider-id":n.providerId},null,8,["provider-id"])]),Jr("div",QQ,Z(n.description),1),Jr("div",e0,[Kt(($r(),Gr("button",{class:"sync-entry__button button",onClick:e=>o.remove(n)},[Qr(l)],8,t0)),[[d,""]])])]),Jr("div",n0,[Jr("div",r0,Z(n.url||"Gitee app data"),1),n.url?($r(),Gr("div",i0,[Kt(($r(),Gr("button",{class:"sync-entry__button button",onClick:t[0]||(t[0]=t=>e.info("URL"))},[Qr(c)])),[[p,n.url],[d,"URL"]]),n.url?Kt(($r(),Gr("a",{key:0,class:"sync-entry__button button",href:n.url,target:"_blank"},[Qr(u)],8,o0)),[[d,""]]):ri("",!0)])):ri("",!0)])])))),128))]),e.syncLocations.length?($r(),Gr("div",a0,t[4]||(t[4]=[Jr("b",null,":",-1),ti("  ")]))):ri("",!0)]),Jr("div",s0,[Jr("button",{class:"button button--resolve",onClick:t[1]||(t[1]=t=>e.config.resolve())},"")])])),_:1})}]]),c0={components:{ModalInner:uJ},computed:{...BM("modal",["config"]),...BM("publishLocation",{publishLocations:"current"}),currentFileName:()=>_H.getters["file/current"].name},methods:{...LM("notification",["info"]),remove(e){_H.commit("publishLocation/deleteItem",e.id),OF.addBadge("removePublishLocation")},shareUrl(e){if("giteegist"!==e.providerId&&"gist"!==e.providerId)return null;if(!e.url||!e.gistId)return null;const t="gist"===e.providerId?"gistshare.html":"share.html";return`${window.location.protocol}//${window.location.host}/${t}?id=${e.gistId}`}}},u0={class:"modal__content"},h0={class:"modal__image"},d0={key:0},p0={key:1},f0={class:"publish-entry__header flex flex--row flex--align-center"},m0={class:"publish-entry__icon flex flex--column flex--center"},g0={class:"publish-entry__description"},v0={class:"publish-entry__buttons flex flex--row flex--center"},y0=["onClick"],b0={class:"publish-entry__row flex flex--row flex--align-center"},_0={class:"publish-entry__url"},w0={key:0,class:"publish-entry__buttons flex flex--row flex--center"},k0=["href"],x0={key:0,class:"publish-entry__row flex flex--row flex--align-center"},C0={class:"publish-entry__url"},S0={class:"publish-entry__buttons flex flex--row flex--center"},T0=["href"],E0={key:2,class:"modal__info"},I0={class:"modal__button-bar"};const A0=XH(c0,[["render",function(e,t,n,r,i,o){const a=wn("icon-upload"),s=wn("icon-provider"),l=wn("icon-delete"),c=wn("icon-content-copy"),u=wn("icon-open-in-new"),h=wn("modal-inner"),d=Cn("title"),p=Cn("clipboard");return $r(),Vr(h,{class:"modal__inner-1--publish-management","aria-label":"Manage publication locations"},{default:Yt((()=>[Jr("div",u0,[Jr("div",h0,[Qr(a)]),e.publishLocations.length?($r(),Gr("p",d0,[Jr("b",null,Z(o.currentFileName),1),t[3]||(t[3]=ti(" :"))])):($r(),Gr("p",p0,[Jr("b",null,Z(o.currentFileName),1),t[4]||(t[4]=ti(" ."))])),Jr("div",null,[($r(!0),Gr(Pr,null,En(e.publishLocations,(n=>($r(),Gr("div",{class:"publish-entry flex flex--column",key:n.id},[Jr("div",f0,[Jr("div",m0,[Qr(s,{"provider-id":n.providerId},null,8,["provider-id"])]),Jr("div",g0,Z(n.description),1),Jr("div",v0,[Kt(($r(),Gr("button",{class:"publish-entry__button button",onClick:e=>o.remove(n)},[Qr(l)],8,y0)),[[d,""]])])]),Jr("div",b0,[Jr("div",_0,Z(n.url),1),n.url?($r(),Gr("div",w0,[Kt(($r(),Gr("button",{class:"publish-entry__button button",onClick:t[0]||(t[0]=t=>e.info("URL!"))},[Qr(c)])),[[p,n.url],[d,"URL"]]),n.url?Kt(($r(),Gr("a",{key:0,class:"publish-entry__button button",href:n.url,target:"_blank"},[Qr(u)],8,k0)),[[d,""]]):ri("",!0)])):ri("",!0)]),o.shareUrl(n)?($r(),Gr("div",x0,[Jr("div",C0," : "+Z(o.shareUrl(n)),1),Jr("div",S0,[Kt(($r(),Gr("button",{class:"publish-entry__button button",onClick:t[1]||(t[1]=t=>e.info("URL!"))},[Qr(c)])),[[p,o.shareUrl(n)],[d,"URL"]]),Kt(($r(),Gr("a",{class:"publish-entry__button button",href:o.shareUrl(n),target:"_blank"},[Qr(u)],8,T0)),[[d,""]])])])):ri("",!0)])))),128))]),e.publishLocations.length?($r(),Gr("div",E0,t[5]||(t[5]=[Jr("b",null,":",-1),ti("  ")]))):ri("",!0)]),Jr("div",I0,[Jr("button",{class:"button button--resolve",onClick:t[2]||(t[2]=t=>e.config.resolve())},"")])])),_:1})}]]),D0={components:{ModalInner:uJ},data:()=>({editedId:null,editingName:"",availableOffline:ct({})}),computed:{...BM("modal",["config"]),...BM("workspace",["workspacesById","mainWorkspace","currentWorkspace"])},methods:{...LM("notification",["info"]),edit(e){this.editedId=e,this.editingName=this.workspacesById[e].name},submitEdit(e){const t=this.workspacesById[this.editedId];t&&(!e&&this.editingName&&this.editingName!==t.name?(_H.dispatch("workspace/patchWorkspacesById",{[this.editedId]:{...t,name:this.editingName}}),OF.addBadge("renameWorkspace")):this.editingName=t.name),this.editedId=null},async remove(e){if(e===this.mainWorkspace.id)this.info("");else if(e===this.currentWorkspace.id)this.info("");else try{const t=this.workspacesById[e];if(!t)return;await _H.dispatch("modal/open",{type:"removeWorkspace",name:t.name}),EN.removeWorkspace(e),OF.addBadge("removeWorkspace")}catch(i7){}},async stopAutoSync(e){const t=this.workspacesById[e];t&&(await _H.dispatch("modal/open",{type:"stopAutoSyncWorkspace",name:t.name}),_H.dispatch("workspace/patchWorkspacesById",{[e]:{...t,autoSync:!1}}),OF.addBadge("stopAutoSyncWorkspace"))},async startAutoSync(e){const t=this.workspacesById[e];t&&(await _H.dispatch("modal/open",{type:"autoSyncWorkspace",name:t.name}),_H.dispatch("workspace/patchWorkspacesById",{[e]:{...t,autoSync:!0}}),OF.addBadge("autoSyncWorkspace"))}},created(){Object.keys(this.workspacesById).forEach((async e=>{const t=NN.getWorkspaceItems(e,(()=>{this.availableOffline[e]=!0,t()}))}))}},B0={class:"modal__content"},L0={class:"modal__image"},M0={class:"flex flex--column"},F0={class:"workspace-entry__header flex flex--row flex--align-center"},O0={class:"workspace-entry__icon"},P0={key:1,class:"workspace-entry__name"},N0={class:"workspace-entry__buttons flex flex--row"},j0=["onClick"],z0=["onClick"],R0=["onClick"],q0=["onClick"],$0={class:"workspace-entry__row flex flex--row flex--align-center"},U0={class:"workspace-entry__url"},H0={class:"workspace-entry__buttons flex flex--row"},W0=["href"],G0={key:0,class:"workspace-entry__row flex flex--row flex--align-center"},V0={class:"workspace-entry__url"},Y0={class:"workspace-entry__buttons flex flex--row"},K0=["href"],X0={key:0,class:"workspace-entry__offline"},Z0={class:"modal__button-bar"};const J0=XH(D0,[["render",function(e,t,n,r,i,o){const a=wn("icon-database"),s=wn("icon-provider"),l=wn("icon-pen"),c=wn("icon-sync-auto"),u=wn("icon-sync-stop"),h=wn("icon-delete"),d=wn("icon-content-copy"),p=wn("icon-open-in-new"),f=wn("modal-inner"),m=Cn("focus"),g=Cn("title"),v=Cn("clipboard");return $r(),Vr(f,{class:"modal__inner-1--workspace-management","aria-label":""},{default:Yt((()=>[Jr("div",B0,[Jr("div",L0,[Qr(a)]),t[7]||(t[7]=Jr("p",null,[Jr("br"),ti("")],-1)),($r(!0),Gr(Pr,null,En(e.workspacesById,((n,r)=>($r(),Gr("div",{class:"workspace-entry flex flex--column",key:r},[Jr("div",M0,[Jr("div",F0,[Jr("div",O0,["main"!==r||n.sub?($r(),Vr(s,{key:1,"provider-id":n.providerId},null,8,["provider-id"])):($r(),Vr(s,{key:0,"provider-id":"stackedit"}))]),e.editedId===r?Kt(($r(),Gr("input",{key:0,class:"text-input",type:"text",onBlur:t[0]||(t[0]=e=>o.submitEdit()),onKeydown:[t[1]||(t[1]=mo((e=>o.submitEdit()),["enter"])),t[2]||(t[2]=mo(po((e=>o.submitEdit(!0)),["stop"]),["esc"]))],"onUpdate:modelValue":t[3]||(t[3]=t=>e.editingName=t)},null,544)),[[m],[no,e.editingName]]):($r(),Gr("div",P0,Z(n.name),1)),Jr("div",N0,[Kt(($r(),Gr("button",{class:"workspace-entry__button button",onClick:e=>o.edit(r)},[Qr(l)],8,j0)),[[g,""]]),"giteeAppData"===n.providerId||"githubAppData"===n.providerId||"githubWorkspace"===n.providerId||"giteeWorkspace"===n.providerId||"gitlabWorkspace"===n.providerId||"giteaWorkspace"===n.providerId?($r(),Gr(Pr,{key:0},[null==n.autoSync||n.autoSync?Kt(($r(),Gr("button",{key:0,class:"workspace-entry__button button",onClick:e=>o.stopAutoSync(r)},[Qr(c)],8,z0)),[[g,""]]):ri("",!0),null==n.autoSync||n.autoSync?ri("",!0):Kt(($r(),Gr("button",{key:1,class:"workspace-entry__button button",onClick:e=>o.startAutoSync(r)},[Qr(u)],8,R0)),[[g,""]])],64)):ri("",!0),Kt(($r(),Gr("button",{class:"workspace-entry__button button",onClick:e=>o.remove(r)},[Qr(h)],8,q0)),[[g,""]])])]),Jr("div",$0,[Jr("div",U0,Z(n.url),1),Jr("div",H0,[Kt(($r(),Gr("button",{class:"workspace-entry__button button",onClick:t[4]||(t[4]=t=>e.info("URL!"))},[Qr(d)])),[[v,n.url],[g,"URL"]]),Kt(($r(),Gr("a",{class:"workspace-entry__button button",href:n.url,target:"_blank"},[Qr(p)],8,W0)),[[g,""]])])]),n.locationUrl?($r(),Gr("div",G0,[Jr("div",V0,Z(n.locationUrl),1),Jr("div",Y0,[Kt(($r(),Gr("button",{class:"workspace-entry__button button",onClick:t[5]||(t[5]=t=>e.info("URL!"))},[Qr(d)])),[[v,n.locationUrl],[g,"URL"]]),Kt(($r(),Gr("a",{class:"workspace-entry__button button",href:n.locationUrl,target:"_blank"},[Qr(p)],8,K0)),[[g,""]])])])):ri("",!0),Jr("div",null,[e.availableOffline[r]?($r(),Gr("span",X0,"  ")):ri("",!0)])])])))),128))]),Jr("div",Z0,[Jr("button",{class:"button button--resolve",onClick:t[6]||(t[6]=t=>e.config.resolve())},"")])])),_:1})}]]),Q0={components:{ModalInner:uJ,MenuEntry:_V},computed:{...BM("modal",["config"]),entries:()=>[...Object.values(_H.getters["data/googleTokensBySub"]).map((e=>({token:e,providerId:"google",userId:e.sub,name:e.name,scopes:["openid","profile",...e.scopes.map((e=>e.replace(/^https:\/\/www.googleapis.com\/auth\//,"")))]}))),...Object.values(_H.getters["data/couchdbTokensBySub"]).map((e=>({token:e,providerId:"couchdb",url:e.dbUrl,name:e.name}))),...Object.values(_H.getters["data/dropboxTokensBySub"]).map((e=>({token:e,providerId:"dropbox",userId:e.sub,name:e.name}))),...Object.values(_H.getters["data/githubTokensBySub"]).map((e=>({token:e,providerId:"github",userId:e.sub,name:e.name,scopes:e.scopes}))),...Object.values(_H.getters["data/giteeTokensBySub"]).map((e=>({token:e,providerId:"gitee",userId:e.sub,name:e.name,scopes:["projects","pull_requests"]}))),...Object.values(_H.getters["data/gitlabTokensBySub"]).map((e=>({token:e,providerId:"gitlab",url:e.serverUrl,userId:e.sub,name:e.name,scopes:["api"]}))),...Object.values(_H.getters["data/giteaTokensBySub"]).map((e=>({token:e,providerId:"gitea",url:e.serverUrl,userId:e.sub,name:e.name,scopes:["api"]}))),...Object.values(_H.getters["data/wordpressTokensBySub"]).map((e=>({token:e,providerId:"wordpress",userId:e.sub,name:e.name,scopes:["global"]}))),...Object.values(_H.getters["data/zendeskTokensBySub"]).map((e=>({token:e,providerId:"zendesk",url:`https://${e.subdomain}.zendesk.com/`,userId:e.sub,name:e.name,scopes:["read","hc:write"]}))),...Object.values(_H.getters["data/smmsTokensBySub"]).map((e=>({token:e,providerId:"smms",userId:e.sub,name:e.name,scopes:["api"]}))),...Object.values(_H.getters["data/customTokensBySub"]).map((e=>({token:e,providerId:"custom",url:e.uploadUrl,userId:e.name,name:e.name,customHeaders:e.customHeaders&&JSON.stringify(e.customHeaders),customParams:e.customParams&&JSON.stringify(e.customParams),scopes:["upload"]})))]},methods:{async remove(e){const t=UL.deepCopy(_H.getters[`data/${e.providerId}TokensBySub`]);delete t[e.token.sub],await _H.dispatch("data/patchTokensByType",{[e.providerId]:t}),OF.addBadge("removeAccount")},async addBloggerAccount(){try{await Tj.addBloggerAccount()}catch(i7){}},async addDropboxAccount(){try{await _H.dispatch("modal/open",{type:"dropboxAccount"}),await wY.addAccount(!_H.getters["data/localSettings"].dropboxRestrictedAccess)}catch(i7){}},async addGithubAccount(){try{await _H.dispatch("modal/open",{type:"githubAccount"}),await MO.addAccount(_H.getters["data/localSettings"].githubRepoFullAccess)}catch(i7){}},async addGiteeAccount(){try{await _H.dispatch("modal/open",{type:"giteeAccount"}),await EO.addAccount()}catch(i7){}},async addGitlabAccount(){try{const{serverUrl:e,applicationId:t,applicationSecret:n}=await _H.dispatch("modal/open",{type:"gitlabAccount"});await hj.addAccount(e,t,n)}catch(i7){}},async addGiteaAccount(){try{const e=await _H.dispatch("modal/open",{type:"giteaAccount"});await gj.addAccount(e)}catch(i7){}},async addGoogleDriveAccount(){try{await _H.dispatch("modal/open",{type:"googleDriveAccount"}),await Tj.addDriveAccount(!_H.getters["data/localSettings"].googleDriveRestrictedAccess)}catch(i7){}},async addGooglePhotosAccount(){try{await Tj.addPhotosAccount()}catch(i7){}},async addWordpressAccount(){try{await WY.addAccount()}catch(i7){}},async addZendeskAccount(){try{const{subdomain:e,clientId:t}=await _H.dispatch("modal/open",{type:"zendeskAccount"});await VY.addAccount(e,t)}catch(i7){}},async addSmmsAccount(){try{const{proxyUrl:e,apiSecretToken:t}=await _H.dispatch("modal/open",{type:"smmsAccount"});await RX.addAccount(e,t)}catch(i7){}},async addCustomAccount(){try{const e=await _H.dispatch("modal/open",{type:"customAccount"});await qX.addAccount(e)}catch(i7){}}}},e1={class:"modal__content"},t1={class:"modal__image"},n1={key:0},r1={key:1},i1={class:"account-entry__header flex flex--row flex--align-center"},o1={class:"account-entry__icon flex flex--column flex--center"},a1={class:"account-entry__description"},s1={class:"account-entry__buttons flex flex--row flex--center"},l1=["onClick"],c1={class:"account-entry__row"},u1={key:0,class:"account-entry__field"},h1={key:1,class:"account-entry__field"},d1={key:2,class:"account-entry__field line-entry"},p1={key:3,class:"account-entry__field line-entry"},f1={key:4,class:"account-entry__field"},m1={class:"modal__button-bar"};const g1=XH(Q0,[["render",function(e,t,n,r,i,o){const a=wn("icon-key"),s=wn("icon-provider"),l=wn("icon-delete"),c=wn("menu-entry"),u=wn("modal-inner"),h=Cn("title");return $r(),Vr(u,{class:"modal__inner-1--account-management","aria-label":""},{default:Yt((()=>[Jr("div",e1,[Jr("div",t1,[Qr(a)]),o.entries.length?($r(),Gr("p",n1,"StackEdit")):($r(),Gr("p",r1,"StackEdit")),Jr("div",null,[($r(!0),Gr(Pr,null,En(o.entries,(e=>($r(),Gr("div",{class:"account-entry flex flex--column",key:e.token.sub},[Jr("div",i1,[Jr("div",o1,[Qr(s,{"provider-id":e.providerId},null,8,["provider-id"])]),Jr("div",a1,Z(e.name),1),Jr("div",s1,[Kt(($r(),Gr("button",{class:"account-entry__button button",onClick:t=>o.remove(e)},[Qr(l)],8,l1)),[[h,""]])])]),Jr("div",c1,[e.userId?($r(),Gr("span",u1,[t[1]||(t[1]=Jr("b",null,"ID:",-1)),ti(" "+Z(e.userId),1)])):ri("",!0),e.url?($r(),Gr("span",h1,[t[2]||(t[2]=Jr("b",null,"URL:",-1)),ti(" "+Z(e.url),1)])):ri("",!0),e.customHeaders?($r(),Gr("span",d1,[t[3]||(t[3]=Jr("b",null,":",-1)),ti(" "+Z(e.customHeaders),1)])):ri("",!0),e.customParams?($r(),Gr("span",p1,[t[4]||(t[4]=Jr("b",null,"Form:",-1)),ti(" "+Z(e.customParams),1)])):ri("",!0),e.scopes?($r(),Gr("span",f1,[t[5]||(t[5]=Jr("b",null,":",-1)),ti(" "+Z(e.scopes.join(", ")),1)])):ri("",!0)])])))),128))]),Qr(c,{onClick:o.addBloggerAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"blogger"})])),default:Yt((()=>[t[6]||(t[6]=Jr("span",null,"Blogger",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addDropboxAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"dropbox"})])),default:Yt((()=>[t[7]||(t[7]=Jr("span",null,"Dropbox",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGithubAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"github"})])),default:Yt((()=>[t[8]||(t[8]=Jr("span",null,"GitHub",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGiteeAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"gitee"})])),default:Yt((()=>[t[9]||(t[9]=Jr("span",null,"Gitee",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGitlabAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"gitlab"})])),default:Yt((()=>[t[10]||(t[10]=Jr("span",null,"GitLab",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGiteaAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"gitea"})])),default:Yt((()=>[t[11]||(t[11]=Jr("span",null,"Gitea",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGoogleDriveAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"googleDrive"})])),default:Yt((()=>[t[12]||(t[12]=Jr("span",null,"Google Drive",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addGooglePhotosAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"googlePhotos"})])),default:Yt((()=>[t[13]||(t[13]=Jr("span",null,"Google Photos",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addWordpressAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"wordpress"})])),default:Yt((()=>[t[14]||(t[14]=Jr("span",null,"WordPress",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addZendeskAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"zendesk"})])),default:Yt((()=>[t[15]||(t[15]=Jr("span",null,"Zendesk",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addSmmsAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"smms"})])),default:Yt((()=>[t[16]||(t[16]=Jr("span",null,"SM.MS",-1))])),_:1},8,["onClick"]),Qr(c,{onClick:o.addCustomAccount},{icon:Yt((()=>[Qr(s,{"provider-id":"custom"})])),default:Yt((()=>[t[17]||(t[17]=Jr("span",null,"",-1))])),_:1},8,["onClick"])]),Jr("div",m1,[Jr("button",{class:"button button--resolve",onClick:t[0]||(t[0]=t=>e.config.resolve())},"")])])),_:1})}]]),v1={components:{ModalInner:uJ},data:()=>({shown:ct({})}),computed:{...BM("modal",["config"]),...BM("data",["badgeTree"]),badgeCount:()=>_H.getters["data/allBadges"].filter((e=>e.isEarned)).length,featureCount:()=>_H.getters["data/allBadges"].length},methods:{show(e){this.shown[e]=!0}}},y1={class:"modal__content"},b1={class:"modal__image"},_1={key:0},w1={key:1},k1={class:"flex flex--row"},x1={class:"badge-entry__description"},C1=["onClick"],S1={class:"flex flex--row"},T1={class:"badge-entry__description"},E1={class:"modal__button-bar"};const I1=XH(v1,[["render",function(e,t,n,r,i,o){const a=wn("icon-seal"),s=wn("modal-inner");return $r(),Vr(s,{class:"modal__inner-1--badge-management","aria-label":""},{default:Yt((()=>[Jr("div",y1,[Jr("div",b1,[Qr(a)]),o.badgeCount>1?($r(),Gr("p",_1,""+Z(o.badgeCount)+"",1)):($r(),Gr("p",w1,""+Z(o.badgeCount)+"",1)),($r(!0),Gr(Pr,null,En(e.badgeTree,(t=>($r(),Gr("div",{class:"badge-entry",key:t.featureId},[Jr("div",k1,[Qr(a,{class:W(["badge-entry__icon",{"badge-entry__icon--earned":t.isEarned,"badge-entry__icon--some-earned":t.hasSomeEarned}])},null,8,["class"]),Jr("div",null,[Jr("span",{class:W(["badge-entry__name",{"badge-entry__name--earned":t.isEarned,"badge-entry__name--some-earned":t.hasSomeEarned}])},Z(t.name),3),Jr("span",x1," "+Z(t.description),1),e.shown[t.featureId]?($r(!0),Gr(Pr,{key:1},En(t.children,(e=>($r(),Gr("div",{class:"badge-entry",key:e.featureId},[Jr("div",S1,[Qr(a,{class:W(["badge-entry__icon",{"badge-entry__icon--earned":e.isEarned}])},null,8,["class"]),Jr("div",null,[Jr("span",{class:W(["badge-entry__name",{"badge-entry__name--earned":e.isEarned}])},Z(e.name),3),Jr("span",T1," "+Z(e.description),1)])])])))),128)):($r(),Gr("a",{key:0,href:"javascript:void(0)",onClick:e=>o.show(t.featureId)},"",8,C1))])])])))),128))]),Jr("div",E1,[Jr("button",{class:"button button--resolve",onClick:t[0]||(t[0]=t=>e.config.resolve())},"")])])),_:1})}]]),A1={components:{ModalInner:uJ},data(){const e=_H.getters["workspace/sponsorToken"],t=(t,n,r,i)=>{const o={cmd:"_s-xclick",hosted_button_id:t,custom:e.sub};return{id:t,price:n,description:r,offer:i,link:UL.addQueryParams("https://www.paypal.com/cgi-bin/webscr",o)}};return{buttons:e?[t("QD7SFZS79D2AL","$5","3 months sponsorship"),t("WG64NCFL9TQZJ","$15","1 year sponsorship","-25%"),t("G2E7MN873EQ3U","$25","2 years sponsorship","-37%"),t("JQJT7ARKYC7FC","$50","5 years sponsorship","-50%")]:[]}},computed:{...BM("modal",["config"])},methods:{sponsor(){}}},D1={class:"modal__content"},B1=["href"],L1={class:"flex flex--column"},M1={key:0,class:"paypal-option__offer"},F1={class:"modal__button-bar"};const O1=XH(A1,[["render",function(e,t,n,r,i,o){const a=wn("modal-inner");return $r(),Vr(a,{class:"modal__inner-1--sponsor","aria-label":"Sponsor"},{default:Yt((()=>[Jr("div",D1,[t[1]||(t[1]=Jr("p",null,[ti("Please choose a "),Jr("b",null,"PayPal"),ti(" option:")],-1)),($r(!0),Gr(Pr,null,En(i.buttons,(e=>($r(),Gr("a",{class:"paypal-option button flex flex--row flex--center",key:e.id,href:e.link},[Jr("div",L1,[Jr("div",null,[ti(Z(e.price),1),e.offer?($r(),Gr("div",M1,Z(e.offer),1)):ri("",!0)]),Jr("span",null,Z(e.description),1)])],8,B1)))),128))]),Jr("div",F1,[Jr("button",{class:"button",onClick:t[0]||(t[0]=t=>e.config.reject())},"")])])),_:1})}]]),P1={components:{ModalInner:uJ},data:()=>({commitMessage:""}),computed:{...BM("modal",["config"])},methods:{resolve(){this.config.resolve({commitMessage:this.commitMessage})}}},N1={class:"modal__content"},j1={class:"form-entry"},z1={class:"form-entry__field"},R1={class:"modal__button-bar"};const q1=XH(P1,[["render",function(e,t,n,r,i,o){const a=wn("modal-inner");return $r(),Vr(a,{"aria-label":""},{default:Yt((()=>[Jr("p",null,[t[4]||(t[4]=ti(" ")),Jr("b",null,Z(e.config.name),1),t[5]||(t[5]=ti(" "))]),Jr("div",N1,[Jr("div",j1,[t[6]||(t[6]=Jr("label",{class:"form-entry__label"},"",-1)),Jr("div",z1,[Kt(Jr("input",{class:"textfield",placeholder:"",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.commitMessage=t),onKeydown:t[1]||(t[1]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.commitMessage,void 0,{trim:!0}]])])])]),Jr("div",R1,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=e=>o.resolve())},"")])])),_:1})}]]),$1=cQ({computedLocalSettings:{path:""},computed:{...BM("workspace",["currentWorkspace"])},methods:{resolve(){this.path||this.setError("path"),this.config.resolve({path:this.path||"/imgs/{YYYY}-{MM}-{DD}"})}}}),U1={class:"modal__content"},H1={class:"modal__image"},W1={class:"modal__button-bar"};const G1=XH($1,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":""},{default:Yt((()=>[Jr("div",U1,[Jr("div",H1,[Qr(a,{"provider-id":e.currentWorkspace.providerId},null,8,["provider-id"])]),t[5]||(t[5]=Jr("p",null,"",-1)),Qr(s,{label:"",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text",placeholder:"/imgs/{YYYY}-{MM}-{DD}","onUpdate:modelValue":t[0]||(t[0]=t=>e.path=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[4]||(t[4]=Jr("div",{class:"form-entry__info"},[ti("  /imgs/{YYYY}-{MM}-{DD}"),Jr("br"),ti("  ./imgs../imgs  imgs "),Jr("br"),ti(" {YYYY}{MM}{DD}{MDNAME} ")],-1))])),_:1})]),Jr("div",W1,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=t=>e.resolve())},"")])])),_:1})}]]),V1={chat({apiKey:e,content:t},n){const r=new XMLHttpRequest;r.open("POST","https://api.moonshot.cn/v1/chat/completions"),r.setRequestHeader("Authorization",`Bearer ${e}`),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({model:"moonshot-v1-auto",messages:[{role:"user",content:t}],temperature:1,stream:!0}));let i=0;return r.onprogress=()=>{const e=r.response.substr(i);i=r.response.length,e.split("\n\n").filter((e=>e.length>0)).forEach((e=>{const t=e.substr(6);if("[DONE]"===t)n({done:!0});else{const e=JSON.parse(t);n({content:e.choices[0].delta.content})}}))},r.onerror=()=>{_H.dispatch("notification/error","Kimi"),n({error:"Kimi"})},r}},Y1=cQ({data:()=>({generating:!1,content:"",result:"",xhr:null}),computedLocalSettings:{apiKey:"chatgptApiKey"},methods:{resolve(e){e.preventDefault();const{callback:t}=this.config;this.config.resolve(),t(this.result)},process({done:e,content:t,error:n}){if(e)this.generating=!1;else if(t){this.result=this.result+t;const e=document.querySelector(".result_pre");e.scrollTo(0,e.scrollHeight)}else n&&(this.generating=!1)},generate(){this.generating=!0,this.result="";try{this.xhr=V1.chat({apiKey:this.apiKey,content:this.content},this.process)}catch(e){this.generating=!1,_H.dispatch("notification/error",e)}},async openConfig(){try{const e=await _H.dispatch("modal/open",{type:"chatGptConfig",apiKey:this.apiKey});_H.dispatch("chatgpt/setCurrConfig",e)}catch(i7){}},reject(){if(this.generating)return void(this.xhr&&(this.xhr.abort(),this.generating=!1));const{callback:e}=this.config;this.config.reject(),e(null)}},async created(){const e=localStorage.getItem("chatgpt/config");_H.dispatch("chatgpt/setCurrConfig",JSON.parse(e||"{}"))}}),K1={class:"modal__content"},X1={class:"modal__image"},Z1=["disabled"],J1={class:"form-entry__info"},Q1={key:0,class:"config-warning"},e2={key:1},t2={class:"modal__result"},n2={key:0,class:"result_pre"},r2=["textContent"],i2={class:"modal__button-bar"};const o2=XH(Y1,[["render",function(e,t,n,r,i,o){const a=wn("icon-chat-gpt"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{class:"modal__inner-1--chatgpt","aria-label":"chatgpt"},{default:Yt((()=>[Jr("div",K1,[Jr("div",X1,[Qr(a)]),t[8]||(t[8]=Jr("p",null,[Jr("b",null,"ChatGPT"),Jr("br"),ti("Kimi")],-1)),Qr(s,{label:"",error:"content"},{field:Yt((()=>[Kt(Jr("textarea",{class:"text-input",type:"text",placeholder:"()","onUpdate:modelValue":t[0]||(t[0]=t=>e.content=t),disabled:e.generating||!e.apiKey},null,8,Z1),[[no,e.content,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",J1,[e.apiKey?($r(),Gr("span",e2,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.openConfig&&e.openConfig(...t))},"apiKey")])):($r(),Gr("span",Q1,[t[6]||(t[6]=ti(" apiKey ")),Jr("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=(...t)=>e.openConfig&&e.openConfig(...t))},""),t[7]||(t[7]=ti(" apiKey "))]))])])),_:1}),Jr("div",t2,[e.generating&&!e.result?($r(),Gr("pre",n2,"(...)")):($r(),Gr("pre",{key:1,class:"result_pre",textContent:Z(e.result)},null,8,r2))])]),Jr("div",i2,[Jr("button",{class:"button",onClick:t[3]||(t[3]=t=>e.reject())},Z(e.generating?"":""),1),!e.generating&&e.content?($r(),Gr("button",{key:0,class:"button button--resolve",onClick:t[4]||(t[4]=(...t)=>e.generate&&e.generate(...t))},Z(e.result?"":""),1)):ri("",!0),!e.generating&&e.result?($r(),Gr("button",{key:1,class:"button button--resolve",onClick:t[5]||(t[5]=(...t)=>e.resolve&&e.resolve(...t))},"")):ri("",!0)])])),_:1})}]]),a2=cQ({computedLocalSettings:{apiKey:"chatgptApiKey"},methods:{resolve(){this.apiKey||this.setError("apiKey"),this.config.resolve({apiKey:this.apiKey})}}}),s2={class:"modal__content"},l2={class:"modal__image"},c2={class:"modal__button-bar"};const u2=XH(a2,[["render",function(e,t,n,r,i,o){const a=wn("icon-chat-gpt"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"ChatGPT"},{default:Yt((()=>[Jr("div",s2,[Jr("div",l2,[Qr(a)]),t[5]||(t[5]=Jr("p",null,[Jr("b",null,"Kimi"),ti(" API Key .")],-1)),Qr(s,{label:"apiKey",error:"apiKey"},{default:Yt((()=>[Kt(Jr("input",{slot:"field",class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.apiKey=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.apiKey,void 0,{trim:!0}]]),t[4]||(t[4]=Jr("div",{class:"form-entry__info"},[Jr("b",null,"apiKey"),ti("  "),Jr("a",{href:"https://platform.moonshot.cn/console/api-keys",target:"_blank"},"KimiAPI Key"),ti(" "),Jr("br")],-1))])),_:1})]),Jr("div",c2,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=t=>e.resolve())},"")])])),_:1})}]]),h2=(e,t)=>`${e}=s${t}`,d2={components:{ModalInner:uJ,FormEntry:gJ},data:()=>({title:"",size:""}),computed:{thumbnailUrl(){return`url(${h2(this.config.url,320)})`},...BM("modal",["config"])},methods:{resolve(){let{url:e}=this.config;const t=parseInt(this.size,10);Number.isNaN(t)||(e=h2(e,t)),this.title&&(e+=` "${this.title}"`);const{callback:n}=this.config;this.config.resolve(),n(e)},reject(){const{callback:e}=this.config;this.config.reject(),e(null)}}},p2={class:"modal__content"},f2={class:"modal__button-bar"};const m2=XH(d2,[["render",function(e,t,n,r,i,o){const a=wn("form-entry"),s=wn("modal-inner");return $r(),Vr(s,{class:"modal__inner-1--google-photo","aria-label":"Google"},{default:Yt((()=>[Jr("div",p2,[Jr("div",{class:"google-photo__tumbnail",style:R({backgroundImage:o.thumbnailUrl})},null,4),Qr(a,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t),onKeydown:t[1]||(t[1]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.title,void 0,{trim:!0}]])])),_:1}),Qr(a,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.size=t),onKeydown:t[3]||(t[3]=mo((e=>o.resolve()),["enter"]))},null,544),[[no,e.size,void 0,{trim:!0}]])])),_:1})]),Jr("div",f2,[Jr("button",{class:"button",onClick:t[4]||(t[4]=e=>o.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=e=>o.resolve())},"")])])),_:1})}]]),g2=cQ({computedLocalSettings:{restrictedAccess:"googleDriveRestrictedAccess"}}),v2={class:"modal__content"},y2={class:"modal__image"},b2={class:"form-entry"},_2={class:"form-entry__checkbox"},w2={class:"modal__button-bar"};const k2=XH(g2,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"Google Drive"},{default:Yt((()=>[Jr("div",v2,[Jr("div",y2,[Qr(a,{"provider-id":"googleDrive"})]),t[5]||(t[5]=Jr("p",null,[ti(""),Jr("b",null,"Google Drive"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Jr("div",b2,[Jr("div",_2,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.restrictedAccess=t)},null,512),[[ro,e.restrictedAccess]]),t[3]||(t[3]=ti("  "))]),t[4]||(t[4]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("b",null,"StackEdit"),ti(" ")],-1))])])]),Jr("div",w2,[Jr("button",{class:"button",onClick:t[1]||(t[1]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[2]||(t[2]=t=>e.config.resolve())},"")])])),_:1})}]]),x2=cQ({data:()=>({fileId:""}),computedLocalSettings:{folderId:"googleDriveFolderId"},methods:{openFolder(){return _H.dispatch("modal/hideUntil",Tj.openPicker(this.config.token,"folder").then((e=>{e[0]&&_H.dispatch("data/patchLocalSettings",{googleDriveFolderId:e[0].id})})))},resolve(){const e=kY.makeLocation(this.config.token,this.fileId,this.folderId);this.config.resolve(e)}}}),C2={class:"modal__content"},S2={class:"modal__image"},T2={class:"form-entry__actions"},E2={class:"modal__button-bar"};const I2=XH(x2,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Google Drive "},{default:Yt((()=>[Jr("div",C2,[Jr("div",S2,[Qr(a,{"provider-id":"googleDrive"})]),Jr("p",null,[t[7]||(t[7]=ti("Save ")),Jr("b",null,Z(e.currentFileName),1),t[8]||(t[8]=ti(" to your ")),t[9]||(t[9]=Jr("b",null,"Google Drive",-1)),t[10]||(t[10]=ti(" account and keep it synced."))]),Qr(s,{label:"Folder ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.folderId=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.folderId,void 0,{trim:!0}]])])),default:Yt((()=>[t[11]||(t[11]=Jr("div",{class:"form-entry__info"}," If not supplied, the file will be created in your Drive root folder. ",-1)),Jr("div",T2,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.openFolder&&e.openFolder(...t))},"Choose folder")])])),_:1}),Qr(s,{label:"Existing file ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.fileId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.fileId,void 0,{trim:!0}]])])),default:Yt((()=>[t[12]||(t[12]=Jr("div",{class:"form-entry__info"}," This will overwrite the file on the server. ",-1))])),_:1})]),Jr("div",E2,[Jr("button",{class:"button",onClick:t[5]||(t[5]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[6]||(t[6]=t=>e.resolve())},"")])])),_:1})}]]),A2=cQ({computedLocalSettings:{folderId:"googleDriveWorkspaceFolderId"},methods:{openFolder(){return _H.dispatch("modal/hideUntil",Tj.openPicker(this.config.token,"folder").then((e=>{e[0]&&_H.dispatch("data/patchLocalSettings",{googleDriveWorkspaceFolderId:e[0].id})})))},resolve(){const e=UL.addQueryParams("app",{providerId:"googleDriveWorkspace",folderId:this.folderId,sub:this.config.token.sub},!0);this.config.resolve(),window.open(e)}}}),D2={class:"modal__content"},B2={class:"modal__image"},L2={class:"form-entry__actions"},M2={class:"modal__button-bar"};const F2=XH(A2,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Google Drive"},{default:Yt((()=>[Jr("div",D2,[Jr("div",B2,[Qr(a,{"provider-id":"googleDrive"})]),t[6]||(t[6]=Jr("p",null,[ti(""),Jr("b",null," Google Drive "),ti("")],-1)),Qr(s,{label:"Folder ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.folderId=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.folderId,void 0,{trim:!0}]])])),default:Yt((()=>[t[5]||(t[5]=Jr("div",{class:"form-entry__info"}," Workspace ",-1)),Jr("div",L2,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.openFolder&&e.openFolder(...t))},"")])])),_:1})]),Jr("div",M2,[Jr("button",{class:"button",onClick:t[3]||(t[3]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[4]||(t[4]=t=>e.resolve())},"")])])),_:1})}]]),O2=cQ({data:()=>({fileId:""}),computedLocalSettings:{folderId:"googleDriveFolderId",selectedTemplate:"googleDrivePublishTemplate",format:"googleDrivePublishFormat"},methods:{openFolder(){return _H.dispatch("modal/hideUntil",Tj.openPicker(this.config.token,"folder").then((e=>{e[0]&&_H.dispatch("data/patchLocalSettings",{googleDriveFolderId:e[0].id})})))},resolve(){const e=kY.makeLocation(this.config.token,this.fileId);"html"===this.format&&(e.templateId=this.selectedTemplate),this.config.resolve(e)}}}),P2={class:"modal__content"},N2={class:"modal__image"},j2={class:"form-entry__actions"},z2={class:"form-entry"},R2={class:"form-entry__radio"},q2={class:"form-entry__radio"},$2=["value"],U2={class:"form-entry__actions"},H2={class:"modal__info"},W2={class:"modal__button-bar"};const G2=XH(O2,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Google Drive"},{default:Yt((()=>[Jr("div",P2,[Jr("div",N2,[Qr(a,{"provider-id":"googleDrive"})]),Jr("p",null,[t[13]||(t[13]=ti(" ")),Jr("b",null,Z(e.currentFileName),1),t[14]||(t[14]=ti("  ")),t[15]||(t[15]=Jr("b",null,"Google Drive",-1)),t[16]||(t[16]=ti(" ."))]),Qr(s,{label:"Folder ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.folderId=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.folderId,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"}," If not supplied, the file will be created in your Drive root folder. ",-1)),Jr("div",j2,[Jr("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=(...t)=>e.openFolder&&e.openFolder(...t))},"Choose folder")])])),_:1}),Qr(s,{label:"Existing file ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.fileId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.fileId,void 0,{trim:!0}]])])),default:Yt((()=>[t[18]||(t[18]=Jr("div",{class:"form-entry__info"}," This will overwrite the file on the server. ",-1))])),_:1}),Jr("div",z2,[Jr("div",R2,[Jr("label",null,[Kt(Jr("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=t=>e.format=t),value:"markdown"},null,512),[[oo,e.format]]),t[19]||(t[19]=ti(" Export Markdown "))])]),Jr("div",q2,[Jr("label",null,[Kt(Jr("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=t=>e.format=t),value:"html"},null,512),[[oo,e.format]]),t[20]||(t[20]=ti(" Export HTML "))])])]),"html"===e.format?($r(),Vr(s,{key:0,label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[7]||(t[7]=t=>e.selectedTemplate=t),onKeydown:t[8]||(t[8]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,$2)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",U2,[Jr("a",{href:"javascript:void(0)",onClick:t[9]||(t[9]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})):ri("",!0),Jr("div",H2,[t[21]||(t[21]=Jr("b",null,"ProTip:",-1)),t[22]||(t[22]=ti(" You can provide a value for ")),t[23]||(t[23]=Jr("code",null,"title",-1)),t[24]||(t[24]=ti(" in the ")),Jr("a",{href:"javascript:void(0)",onClick:t[10]||(t[10]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},"file properties"),t[25]||(t[25]=ti(". "))])]),Jr("div",W2,[Jr("button",{class:"button",onClick:t[11]||(t[11]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[12]||(t[12]=t=>e.resolve())},"")])])),_:1})}]]),V2=cQ({computedLocalSettings:{restrictedAccess:"dropboxRestrictedAccess"}}),Y2={class:"modal__content"},K2={class:"modal__image"},X2={class:"form-entry"},Z2={class:"form-entry__checkbox"},J2={class:"modal__button-bar"};const Q2=XH(V2,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"Dropbox"},{default:Yt((()=>[Jr("div",Y2,[Jr("div",K2,[Qr(a,{"provider-id":"dropbox"})]),t[5]||(t[5]=Jr("p",null,[ti(""),Jr("b",null,"Dropbox"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Jr("div",X2,[Jr("div",Z2,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.restrictedAccess=t)},null,512),[[ro,e.restrictedAccess]]),t[3]||(t[3]=ti("  "))]),t[4]||(t[4]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("b",null,"/Applications/StackEdit (restricted)"),ti(" ")],-1))])])]),Jr("div",J2,[Jr("button",{class:"button",onClick:t[1]||(t[1]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[2]||(t[2]=t=>e.config.resolve())},"")])])),_:1})}]]),e4=cQ({data:()=>({path:""}),created(){this.path=`/${this.currentFileName}.md`},methods:{resolve(){if(SY.checkPath(this.path)){const e=SY.makeLocation(this.config.token,this.path);this.config.resolve(e)}else this.setError("path")}}}),t4={class:"modal__content"},n4={class:"modal__image"},r4={class:"form-entry__info"},i4={class:"modal__button-bar"};const o4=XH(e4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Dropbox "},{default:Yt((()=>[Jr("div",t4,[Jr("div",n4,[Qr(a,{"provider-id":"dropbox"})]),Jr("p",null,[t[4]||(t[4]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[5]||(t[5]=ti("")),t[6]||(t[6]=Jr("b",null,"Dropbox",-1)),t[7]||(t[7]=ti(""))]),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.path=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",r4,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.fullAccess?"":"/Applications/StackEdit (restricted)")+"/path/to/My Document.md",1),t[9]||(t[9]=Jr("br",null,null,-1)),t[10]||(t[10]=ti("  "))])])),_:1})]),Jr("div",i4,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=t=>e.resolve())},"")])])),_:1})}]]),a4=cQ({data:()=>({path:""}),computedLocalSettings:{selectedTemplate:"dropboxPublishTemplate"},created(){this.path=`/${this.currentFileName}.html`},methods:{resolve(){if(SY.checkPath(this.path)){const e=SY.makeLocation(this.config.token,this.path);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("path")}}}),s4={class:"modal__content"},l4={class:"modal__image"},c4={class:"form-entry__info"},u4=["value"],h4={class:"form-entry__actions"},d4={class:"modal__button-bar"};const p4=XH(a4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Dropbox"},{default:Yt((()=>[Jr("div",s4,[Jr("div",l4,[Qr(a,{"provider-id":"dropbox"})]),t[10]||(t[10]=Jr("p",null,[ti(""),Jr("b",null,"Dropbox"),ti("")],-1)),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.path=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",c4,[t[7]||(t[7]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.fullAccess?"":"/Applications/StackEdit (restricted)")+"/path/to/My Document.html",1),t[8]||(t[8]=Jr("br",null,null,-1)),t[9]||(t[9]=ti("  "))])])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedTemplate=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,u4)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",h4,[Jr("a",{href:"javascript:void(0)",onClick:t[4]||(t[4]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",d4,[Jr("button",{class:"button",onClick:t[5]||(t[5]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[6]||(t[6]=t=>e.resolve())},"")])])),_:1})}]]),f4=cQ({computedLocalSettings:{repoFullAccess:"githubRepoFullAccess"}}),m4={class:"modal__content"},g4={class:"modal__image"},v4={class:"form-entry"},y4={class:"form-entry__checkbox"},b4={class:"modal__button-bar"};const _4=XH(f4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"GitHub"},{default:Yt((()=>[Jr("div",m4,[Jr("div",g4,[Qr(a,{"provider-id":"github"})]),t[4]||(t[4]=Jr("p",null,[ti(""),Jr("b",null,"Github"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Jr("div",v4,[Jr("div",y4,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoFullAccess=t)},null,512),[[ro,e.repoFullAccess]]),t[3]||(t[3]=ti("  "))])])])]),Jr("div",b4,[Jr("button",{class:"button",onClick:t[1]||(t[1]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[2]||(t[2]=t=>e.config.resolve())},"")])])),_:1})}]]),w4=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"githubRepoUrl"},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=EY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);this.config.resolve(t)}}}}),k4={class:"modal__content"},x4={class:"modal__image"},C4={class:"modal__button-bar"};const S4=XH(w4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitHub "},{default:Yt((()=>[Jr("div",k4,[Jr("div",x4,[Qr(a,{"provider-id":"github"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"GitHub"),ti(" repository and keep it synced.")],-1)),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[8]||(t[8]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://github.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",C4,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),T4=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"githubRepoUrl"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=EY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);this.config.resolve(t)}}}}),E4={class:"modal__content"},I4={class:"modal__image"},A4={class:"modal__button-bar"};const D4=XH(T4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitHub "},{default:Yt((()=>[Jr("div",E4,[Jr("div",I4,[Qr(a,{"provider-id":"github"})]),Jr("p",null,[t[8]||(t[8]=ti("Save ")),Jr("b",null,Z(e.currentFileName),1),t[9]||(t[9]=ti(" to your ")),t[10]||(t[10]=Jr("b",null,"GitHub",-1)),t[11]||(t[11]=ti(" repository and keep it synced."))]),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[12]||(t[12]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://github.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[13]||(t[13]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",A4,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),B4=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"githubWorkspaceRepoUrl"},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e){const t=this.path&&this.path.replace(/^\//,""),n=UL.addQueryParams("app",{...e,providerId:"githubWorkspace",branch:this.branch||"master",path:t||void 0},!0);this.config.resolve(),window.open(n)}else this.setError("repoUrl")}}}),L4={class:"modal__content"},M4={class:"modal__image"},F4={class:"modal__button-bar"};const O4=XH(B4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitHub "},{default:Yt((()=>[Jr("div",L4,[Jr("div",M4,[Qr(a,{"provider-id":"github"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"GitHub"),ti("")],-1)),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[8]||(t[8]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://github.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},"  ",-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",F4,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),P4=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"githubRepoUrl",selectedTemplate:"githubPublishTemplate"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=EY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);t.templateId=this.selectedTemplate,this.config.resolve(t)}}}}),N4={class:"modal__content"},j4={class:"modal__image"},z4=["value"],R4={class:"form-entry__actions"},q4={class:"modal__button-bar"};const $4=XH(P4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GitHub"},{default:Yt((()=>[Jr("div",N4,[Jr("div",j4,[Qr(a,{"provider-id":"github"})]),Jr("p",null,[t[11]||(t[11]=ti(" ")),Jr("b",null,Z(e.currentFileName),1),t[12]||(t[12]=ti("  ")),t[13]||(t[13]=Jr("b",null,"GitHub",-1)),t[14]||(t[14]=ti(" ."))]),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[15]||(t[15]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://github.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedTemplate=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,z4)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",R4,[Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",q4,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),U4=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"githubImgStorageRepoUrl"},methods:{async resolve(){const{owner:e,repo:t}=UL.parseGithubRepoUrl(this.repoUrl);if(e||t)try{if((await MO.getRepoInfo(this.config.token,e,t)).private)return _H.dispatch("notification/error","URL"),void this.setError("repoUrl");const n=this.path&&this.path.replace(/^\//,"");this.config.resolve({owner:e,repo:t,path:n||"imgs/{YYYY}-{MM}-{DD}",branch:this.branch||"master"})}catch(n){_H.dispatch("notification/error",n),this.setError("repoUrl")}else this.setError("repoUrl")}}}),H4={class:"modal__content"},W4={class:"modal__image"},G4={class:"modal__button-bar"};const V4=XH(U4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GitHub "},{default:Yt((()=>[Jr("div",H4,[Jr("div",W4,[Qr(a,{"provider-id":"github"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null," GitHub "),ti("")],-1)),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[8]||(t[8]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://github.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text",placeholder:"imgs/{YYYY}-{MM}-{DD}","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[ti("  imgs/{YYYY}-{MM}-{DD} "),Jr("br"),ti(" {YYYY}{MM}{DD}{MDNAME} ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",G4,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),Y4=cQ({data:()=>({filename:"",gistId:""}),computedLocalSettings:{isPublic:"gistIsPublic"},created(){this.filename=`${this.currentFileName}.md`},methods:{resolve(){if(this.filename){const e=TZ.makeLocation(this.config.token,this.filename,this.isPublic,this.gistId);this.config.resolve(e)}else this.setError("filename")}}}),K4={class:"modal__content"},X4={class:"modal__image"},Z4={class:"form-entry"},J4={class:"form-entry__checkbox"},Q4={class:"modal__button-bar"};const e3=XH(Y4,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitHubGist "},{default:Yt((()=>[Jr("div",K4,[Jr("div",X4,[Qr(a,{"provider-id":"gist"})]),Jr("p",null,[t[7]||(t[7]=ti("")),Jr("b",null,Z(e.currentFileName),1),t[8]||(t[8]=ti("")),t[9]||(t[9]=Jr("b",null,"GitHubGist",-1)),t[10]||(t[10]=ti(""))]),Qr(s,{label:"",error:"filename"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.filename=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.filename,void 0,{trim:!0}]])])),_:1}),Jr("div",Z4,[Jr("div",J4,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.isPublic=t)},null,512),[[ro,e.isPublic]]),t[11]||(t[11]=ti("  "))])])]),Qr(s,{label:"Gist ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.gistId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.gistId,void 0,{trim:!0}]])])),default:Yt((()=>[t[12]||(t[12]=Jr("div",{class:"form-entry__info"}," GitHubGist ",-1))])),_:1})]),Jr("div",Q4,[Jr("button",{class:"button",onClick:t[5]||(t[5]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[6]||(t[6]=t=>e.resolve())},"")])])),_:1})}]]),t3=cQ({data:()=>({filename:"",gistId:""}),computedLocalSettings:{isPublic:"gistIsPublic",selectedTemplate:"gistPublishTemplate"},created(){this.filename=`${this.currentFileName}.md`},methods:{resolve(){if(this.filename){const e=TZ.makeLocation(this.config.token,this.filename,this.isPublic,this.gistId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("filename")}}}),n3={class:"modal__content"},r3={class:"modal__image"},i3={class:"form-entry"},o3={class:"form-entry__checkbox"},a3=["value"],s3={class:"form-entry__actions"},l3={class:"modal__info"},c3={class:"modal__button-bar"};const u3=XH(t3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GitHubGist"},{default:Yt((()=>[Jr("div",n3,[Jr("div",r3,[Qr(a,{"provider-id":"gist"})]),Jr("p",null,[t[11]||(t[11]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[12]||(t[12]=ti("")),t[13]||(t[13]=Jr("b",null,"GitHubGist",-1)),t[14]||(t[14]=ti(""))]),Qr(s,{label:"",error:"filename"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.filename=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.filename,void 0,{trim:!0}]])])),_:1}),Jr("div",i3,[Jr("div",o3,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.isPublic=t)},null,512),[[ro,e.isPublic]]),t[15]||(t[15]=ti("  "))])])]),Qr(s,{label:"Gist ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.gistId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.gistId,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"}," GitHubGist ",-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedTemplate=t),onKeydown:t[6]||(t[6]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,a3)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",s3,[Jr("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",l3,[t[17]||(t[17]=Jr("b",null,"ProTip:",-1)),t[18]||(t[18]=ti(" You can provide a value for ")),t[19]||(t[19]=Jr("code",null,"title",-1)),t[20]||(t[20]=ti(" in the ")),Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},"file properties"),t[21]||(t[21]=ti(". "))])]),Jr("div",c3,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),h3=cQ({}),d3={class:"modal__content"},p3={class:"modal__image"},f3={class:"modal__button-bar"};const m3=XH(h3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("modal-inner");return $r(),Vr(s,{"aria-label":"Gitee"},{default:Yt((()=>[Jr("div",d3,[Jr("div",p3,[Qr(a,{"provider-id":"gitee"})]),t[2]||(t[2]=Jr("p",null,[ti(""),Jr("b",null,"Gitee"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1))]),Jr("div",f3,[Jr("button",{class:"button",onClick:t[0]||(t[0]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[1]||(t[1]=t=>e.config.resolve())},"")])])),_:1})}]]),g3=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"giteeRepoUrl"},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=AY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);this.config.resolve(t)}}}}),v3={class:"modal__content"},y3={class:"modal__image"},b3={class:"modal__button-bar"};const _3=XH(g3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitee "},{default:Yt((()=>[Jr("div",v3,[Jr("div",y3,[Qr(a,{"provider-id":"gitee"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null," Gitee "),ti("")],-1)),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[8]||(t[8]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://gitee.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",b3,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),w3=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"giteeRepoUrl"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=AY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);this.config.resolve(t)}}}}),k3={class:"modal__content"},x3={class:"modal__image"},C3={class:"modal__button-bar"};const S3=XH(w3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitee "},{default:Yt((()=>[Jr("div",k3,[Jr("div",x3,[Qr(a,{"provider-id":"gitee"})]),Jr("p",null,[t[8]||(t[8]=ti(" ")),Jr("b",null,Z(e.currentFileName),1),t[9]||(t[9]=ti("  ")),t[10]||(t[10]=Jr("b",null,"Gitee",-1)),t[11]||(t[11]=ti(" ."))]),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[12]||(t[12]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://gitee.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[13]||(t[13]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",C3,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),T3=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"giteeWorkspaceRepoUrl"},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e){const t=this.path&&this.path.replace(/^\//,""),n=UL.addQueryParams("app",{...e,providerId:"giteeWorkspace",branch:this.branch||"master",path:t||void 0},!0);this.config.resolve(),window.open(n)}else this.setError("repoUrl")}}}),E3={class:"modal__content"},I3={class:"modal__image"},A3={class:"modal__button-bar"};const D3=XH(T3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitee "},{default:Yt((()=>[Jr("div",E3,[Jr("div",I3,[Qr(a,{"provider-id":"gitee"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"Gitee"),ti("")],-1)),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[8]||(t[8]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://gitee.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},"  ",-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",A3,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),B3=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{repoUrl:"giteeRepoUrl",selectedTemplate:"giteePublishTemplate"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGithubRepoUrl(this.repoUrl);if(e||this.setError("repoUrl"),this.path||this.setError("path"),e&&this.path){const t=AY.makeLocation(this.config.token,e.owner,e.repo,this.branch||"master",this.path);t.templateId=this.selectedTemplate,this.config.resolve(t)}}}}),L3={class:"modal__content"},M3={class:"modal__image"},F3=["value"],O3={class:"form-entry__actions"},P3={class:"modal__button-bar"};const N3=XH(B3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Gitee"},{default:Yt((()=>[Jr("div",L3,[Jr("div",M3,[Qr(a,{"provider-id":"gitee"})]),Jr("p",null,[t[11]||(t[11]=ti(" ")),Jr("b",null,Z(e.currentFileName),1),t[12]||(t[12]=ti("  ")),t[13]||(t[13]=Jr("b",null,"Gitee",-1)),t[14]||(t[14]=ti(" ."))]),Qr(s,{label:"URL",error:"repoUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.repoUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.repoUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[15]||(t[15]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://gitee.com/owner/my-repo ")],-1))])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedTemplate=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,F3)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",O3,[Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",P3,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),j3=cQ({data:()=>({filename:"",gistId:""}),computedLocalSettings:{isPublic:"gistIsPublic"},created(){this.filename=`${this.currentFileName}.md`},methods:{resolve(){if(this.filename){const e=SZ.makeLocation(this.config.token,this.filename,this.isPublic,this.gistId);this.config.resolve(e)}else this.setError("filename")}}}),z3={class:"modal__content"},R3={class:"modal__image"},q3={class:"form-entry"},$3={class:"form-entry__checkbox"},U3={class:"modal__button-bar"};const H3=XH(j3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GiteeGist "},{default:Yt((()=>[Jr("div",z3,[Jr("div",R3,[Qr(a,{"provider-id":"giteegist"})]),Jr("p",null,[t[7]||(t[7]=ti("")),Jr("b",null,Z(e.currentFileName),1),t[8]||(t[8]=ti("")),t[9]||(t[9]=Jr("b",null,"GiteeGist",-1)),t[10]||(t[10]=ti(""))]),Qr(s,{label:"",error:"filename"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.filename=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.filename,void 0,{trim:!0}]])])),_:1}),Jr("div",q3,[Jr("div",$3,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.isPublic=t)},null,512),[[ro,e.isPublic]]),t[11]||(t[11]=ti("  "))])])]),Qr(s,{label:"Gist ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.gistId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.gistId,void 0,{trim:!0}]])])),default:Yt((()=>[t[12]||(t[12]=Jr("div",{class:"form-entry__info"}," GiteeGist ",-1))])),_:1})]),Jr("div",U3,[Jr("button",{class:"button",onClick:t[5]||(t[5]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[6]||(t[6]=t=>e.resolve())},"")])])),_:1})}]]),W3=cQ({data:()=>({filename:"",gistId:""}),computedLocalSettings:{isPublic:"gistIsPublic",selectedTemplate:"gistPublishTemplate"},created(){this.filename=`${this.currentFileName}.md`},methods:{resolve(){if(this.filename){const e=SZ.makeLocation(this.config.token,this.filename,this.isPublic,this.gistId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("filename")}}}),G3={class:"modal__content"},V3={class:"modal__image"},Y3={class:"form-entry"},K3={class:"form-entry__checkbox"},X3=["value"],Z3={class:"form-entry__actions"},J3={class:"modal__info"},Q3={class:"modal__button-bar"};const e5=XH(W3,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GiteeGist"},{default:Yt((()=>[Jr("div",G3,[Jr("div",V3,[Qr(a,{"provider-id":"giteegist"})]),Jr("p",null,[t[11]||(t[11]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[12]||(t[12]=ti("")),t[13]||(t[13]=Jr("b",null,"GiteeGist",-1)),t[14]||(t[14]=ti(""))]),Qr(s,{label:"",error:"filename"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.filename=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.filename,void 0,{trim:!0}]])])),_:1}),Jr("div",Y3,[Jr("div",K3,[Jr("label",null,[Kt(Jr("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.isPublic=t)},null,512),[[ro,e.isPublic]]),t[15]||(t[15]=ti("  "))])])]),Qr(s,{label:"Gist ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.gistId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.gistId,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"}," GiteeGist ",-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[5]||(t[5]=t=>e.selectedTemplate=t),onKeydown:t[6]||(t[6]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,X3)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",Z3,[Jr("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",J3,[t[17]||(t[17]=Jr("b",null,"ProTip:",-1)),t[18]||(t[18]=ti(" You can provide a value for ")),t[19]||(t[19]=Jr("code",null,"title",-1)),t[20]||(t[20]=ti(" in the ")),Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},"file properties"),t[21]||(t[21]=ti(". "))])]),Jr("div",Q3,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),t5=cQ({data:()=>({redirectUrl:ML.oauth2RedirectUri}),computedLocalSettings:{serverUrl:"gitlabServerUrl",applicationId:"gitlabApplicationId",applicationSecret:"gitlabApplicationSecret"},computed:{httpAppUrl(){return 0===ML.origin.indexOf("https://")&&0===this.serverUrl.indexOf("http://")?`${ML.origin.replace("https://","http://")}/app`:null},
// 
useServerConf(){const e=_H.getters["data/serverConf"].gitlabClientId,t=_H.getters["data/serverConf"].gitlabUrl;return!!e&&!!t}},mounted(){dO.getServerConf()},methods:{resolve(){if(this.useServerConf)return void this.config.resolve({});const e=this.config.forceServerUrl||this.serverUrl;if(e||this.setError("serverUrl"),this.applicationId||this.setError("applicationId"),this.applicationSecret||this.setError("applicationSecret"),e&&this.applicationId&&this.applicationSecret){const t=e.match(/^(http[s]?:\/\/[^/]+)/);t?this.config.resolve({serverUrl:t[1],applicationId:this.applicationId,applicationSecret:this.applicationSecret}):this.setError("serverUrl")}}}}),n5={class:"modal__content"},r5={class:"modal__image"},i5={class:"form-entry__info"},o5={key:0},a5=["href"],s5={class:"form-entry__info"},l5={class:"modal__button-bar"};const c5=XH(t5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GitLab"},{default:Yt((()=>[Jr("div",n5,[Jr("div",r5,[Qr(a,{"provider-id":"gitlab"})]),t[16]||(t[16]=Jr("p",null,[ti(""),Jr("b",null,"GitLab"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),e.useServerConf?ri("",!0):($r(),Gr(Pr,{key:0},[Qr(s,{label:"GitLab URL",error:"serverUrl"},{field:Yt((()=>[e.config.forceServerUrl?Kt(($r(),Gr("input",{key:0,class:"textfield",type:"text",disabled:"disabled","onUpdate:modelValue":t[0]||(t[0]=t=>e.config.forceServerUrl=t)},null,512)),[[no,e.config.forceServerUrl]]):Kt(($r(),Gr("input",{key:1,class:"textfield",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.serverUrl=t),onKeydown:t[2]||(t[2]=mo((t=>e.resolve()),["enter"]))},null,544)),[[no,e.serverUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",i5,[t[11]||(t[11]=Jr("b",null,":",-1)),t[12]||(t[12]=ti(" https://gitlab.example.com/ ")),e.httpAppUrl?($r(),Gr("span",o5,[t[9]||(t[9]=ti(" httpsURL ")),Jr("a",{href:e.httpAppUrl,target:"_blank"},"HTTP",8,a5),t[10]||(t[10]=ti(" Gitlab "))])):ri("",!0)])])),_:1}),Qr(s,{label:"Application ID",error:"applicationId"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.applicationId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.applicationId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Application Secret",error:"applicationSecret"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.applicationSecret=t),onKeydown:t[6]||(t[6]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.applicationSecret,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",s5,[t[13]||(t[13]=ti(" url ")),Jr("b",null,Z(e.redirectUrl),1),t[14]||(t[14]=ti("OAuth2 "))]),t[15]||(t[15]=Jr("div",{class:"form-entry__actions"},[Jr("a",{href:"https://docs.gitlab.com/ee/integration/oauth_provider.html",target:"_blank"},"")],-1))])),_:1})],64))]),Jr("div",l5,[Jr("button",{class:"button",onClick:t[7]||(t[7]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[8]||(t[8]=t=>e.resolve())},"")])])),_:1})}]]),u5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"gitlabProjectUrl"},methods:{resolve(){const e=UL.parseGitlabProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=BY.makeLocation(this.config.token,e,this.branch||"master",this.path);this.config.resolve(t)}}}}),h5={class:"modal__content"},d5={class:"modal__image"},p5={class:"form-entry__info"},f5={class:"modal__button-bar"};const m5=XH(u5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitLab "},{default:Yt((()=>[Jr("div",h5,[Jr("div",d5,[Qr(a,{"provider-id":"gitlab"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"GitLab"),ti("")],-1)),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",p5,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",f5,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),g5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"gitlabProjectUrl",selectedTemplate:"gitlabPublishTemplate"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGitlabProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=BY.makeLocation(this.config.token,e,this.branch||"master",this.path);t.templateId=this.selectedTemplate,this.config.resolve(t)}}}}),v5={class:"modal__content"},y5={class:"modal__image"},b5={class:"form-entry__info"},_5=["value"],w5={class:"form-entry__actions"},k5={class:"modal__button-bar"};const x5=XH(g5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"GitLab"},{default:Yt((()=>[Jr("div",v5,[Jr("div",y5,[Qr(a,{"provider-id":"gitlab"})]),Jr("p",null,[t[11]||(t[11]=ti(" ")),Jr("b",null,Z(e.currentFileName),1),t[12]||(t[12]=ti("  ")),t[13]||(t[13]=Jr("b",null,"GitLab",-1)),t[14]||(t[14]=ti(" ."))]),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",b5,[t[15]||(t[15]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedTemplate=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,_5)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",w5,[Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",k5,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),C5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"gitlabProjectUrl"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGitlabProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=BY.makeLocation(this.config.token,e,this.branch||"master",this.path);this.config.resolve(t)}}}}),S5={class:"modal__content"},T5={class:"modal__image"},E5={class:"form-entry__info"},I5={class:"modal__button-bar"};const A5=XH(C5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitLab "},{default:Yt((()=>[Jr("div",S5,[Jr("div",T5,[Qr(a,{"provider-id":"gitlab"})]),Jr("p",null,[t[8]||(t[8]=ti("Save ")),Jr("b",null,Z(e.currentFileName),1),t[9]||(t[9]=ti(" to your ")),t[10]||(t[10]=Jr("b",null,"GitLab",-1)),t[11]||(t[11]=ti(""))]),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",E5,[t[12]||(t[12]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[13]||(t[13]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",I5,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),D5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"gitlabWorkspaceProjectUrl"},methods:{resolve(){const e=UL.parseGitlabProjectPath(this.projectUrl);if(e){const t=this.path&&this.path.replace(/^\//,""),n=UL.addQueryParams("app",{providerId:"gitlabWorkspace",serverUrl:this.config.token.serverUrl,projectPath:e,branch:this.branch||"master",path:t||void 0,sub:this.config.token.sub},!0);this.config.resolve(),window.open(n)}else this.setError("projectUrl")}}}),B5={class:"modal__content"},L5={class:"modal__image"},M5={class:"form-entry__info"},F5={class:"modal__button-bar"};const O5=XH(D5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" GitLab "},{default:Yt((()=>[Jr("div",B5,[Jr("div",L5,[Qr(a,{"provider-id":"gitlab"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"GitLab"),ti("")],-1)),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",M5,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},"  ",-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",F5,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),P5=cQ({data:()=>({redirectUrl:ML.oauth2RedirectUri}),computedLocalSettings:{serverUrl:"giteaServerUrl",applicationId:"giteaApplicationId",applicationSecret:"giteaApplicationSecret"},computed:{httpAppUrl(){return 0===ML.origin.indexOf("https://")&&0===this.serverUrl.indexOf("http://")?`${ML.origin.replace("https://","http://")}/app`:null},
// 
useServerConf(){const e=_H.getters["data/serverConf"].giteaClientId,t=_H.getters["data/serverConf"].giteaUrl;return!!e&&!!t}},mounted(){dO.getServerConf()},methods:{resolve(){if(this.useServerConf)return void this.config.resolve({});const e=this.config.forceServerUrl||this.serverUrl;if(e||this.setError("serverUrl"),this.applicationId||this.setError("applicationId"),this.applicationSecret||this.setError("applicationSecret"),e&&this.applicationId){const t=e.match(/^(http[s]?:\/\/[^/]+)/);t?this.config.resolve({serverUrl:t[1],applicationId:this.applicationId,applicationSecret:this.applicationSecret}):this.setError("serverUrl")}}}}),N5={class:"modal__content"},j5={class:"modal__image"},z5={class:"form-entry__info"},R5={key:0},q5=["href"],$5={class:"form-entry__info"},U5={class:"modal__button-bar"};const H5=XH(P5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Gitea"},{default:Yt((()=>[Jr("div",N5,[Jr("div",j5,[Qr(a,{"provider-id":"gitea"})]),t[16]||(t[16]=Jr("p",null,[ti(""),Jr("b",null,"Gitea"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),e.useServerConf?ri("",!0):($r(),Gr(Pr,{key:0},[Qr(s,{label:"Gitea URL",error:"serverUrl"},{field:Yt((()=>[e.config.forceServerUrl?Kt(($r(),Gr("input",{key:0,class:"textfield",type:"text",disabled:"disabled","onUpdate:modelValue":t[0]||(t[0]=t=>e.config.forceServerUrl=t)},null,512)),[[no,e.config.forceServerUrl]]):Kt(($r(),Gr("input",{key:1,class:"textfield",type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.serverUrl=t),onKeydown:t[2]||(t[2]=mo((t=>e.resolve()),["enter"]))},null,544)),[[no,e.serverUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",z5,[t[11]||(t[11]=Jr("b",null,":",-1)),t[12]||(t[12]=ti(" https://gitea.example.com/ ")),e.httpAppUrl?($r(),Gr("span",R5,[t[9]||(t[9]=ti(" httpsURL ")),Jr("a",{href:e.httpAppUrl,target:"_blank"},"HTTP",8,q5),t[10]||(t[10]=ti(" Gitea "))])):ri("",!0)])])),_:1}),Qr(s,{label:"Application ID",error:"applicationId"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[3]||(t[3]=t=>e.applicationId=t),onKeydown:t[4]||(t[4]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.applicationId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"Application Secret",error:"applicationSecret"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[5]||(t[5]=t=>e.applicationSecret=t),onKeydown:t[6]||(t[6]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.applicationSecret,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",$5,[t[13]||(t[13]=ti(" url ")),Jr("b",null,Z(e.redirectUrl),1),t[14]||(t[14]=ti("OAuth2 "))]),t[15]||(t[15]=Jr("div",{class:"form-entry__actions"},[Jr("a",{href:"https://docs.gitea.io/en-us/oauth2-provider/",target:"_blank"},"")],-1))])),_:1})],64))]),Jr("div",U5,[Jr("button",{class:"button",onClick:t[7]||(t[7]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[8]||(t[8]=t=>e.resolve())},"")])])),_:1})}]]),W5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"giteaProjectUrl"},methods:{resolve(){const e=UL.parseGiteaProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=MY.makeLocation(this.config.token,e,this.branch||"master",this.path);this.config.resolve(t)}}}}),G5={class:"modal__content"},V5={class:"modal__image"},Y5={class:"form-entry__info"},K5={class:"modal__button-bar"};const X5=XH(W5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitea "},{default:Yt((()=>[Jr("div",G5,[Jr("div",V5,[Qr(a,{"provider-id":"gitea"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null,"Gitea"),ti("")],-1)),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",Y5,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",K5,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),Z5=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"giteaProjectUrl",selectedTemplate:"giteaPublishTemplate"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGiteaProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=MY.makeLocation(this.config.token,e,this.branch||"master",this.path);t.templateId=this.selectedTemplate,this.config.resolve(t)}}}}),J5={class:"modal__content"},Q5={class:"modal__image"},e6={class:"form-entry__info"},t6=["value"],n6={class:"form-entry__actions"},r6={class:"modal__button-bar"};const i6=XH(Z5,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Gitea"},{default:Yt((()=>[Jr("div",J5,[Jr("div",Q5,[Qr(a,{"provider-id":"gitea"})]),Jr("p",null,[t[11]||(t[11]=ti("")),t[12]||(t[12]=Jr("b",null," Gitea ",-1)),t[13]||(t[13]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[14]||(t[14]=ti(""))]),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",e6,[t[15]||(t[15]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1}),Qr(s,{label:"Template"},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedTemplate=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,t6)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",n6,[Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1})]),Jr("div",r6,[Jr("button",{class:"button",onClick:t[9]||(t[9]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[10]||(t[10]=t=>e.resolve())},"")])])),_:1})}]]),o6=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"giteaProjectUrl"},created(){this.path=`${this.currentFileName}.md`},methods:{resolve(){const e=UL.parseGiteaProjectPath(this.projectUrl);if(e||this.setError("projectUrl"),this.path||this.setError("path"),e&&this.path){const t=MY.makeLocation(this.config.token,e,this.branch||"master",this.path);this.config.resolve(t)}}}}),a6={class:"modal__content"},s6={class:"modal__image"},l6={class:"form-entry__info"},c6={class:"modal__button-bar"};const u6=XH(o6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitea "},{default:Yt((()=>[Jr("div",a6,[Jr("div",s6,[Qr(a,{"provider-id":"gitea"})]),Jr("p",null,[t[8]||(t[8]=ti("")),Jr("b",null,Z(e.currentFileName),1),t[9]||(t[9]=ti("")),t[10]||(t[10]=Jr("b",null," Gitea ",-1)),t[11]||(t[11]=ti(""))]),Qr(s,{label:"Project URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",l6,[t[12]||(t[12]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/path/to/project ",1)])])),_:1}),Qr(s,{label:"File path",error:"path"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[13]||(t[13]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" path/to/README.md"),Jr("br"),ti("  ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",c6,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),h6=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"giteaWorkspaceProjectUrl"},methods:{resolve(){const e=UL.parseGiteaProjectPath(this.projectUrl);if(e){const t=this.path&&this.path.replace(/^\//,""),n=UL.addQueryParams("app",{providerId:"giteaWorkspace",serverUrl:this.config.token.serverUrl,projectPath:e,branch:this.branch||"master",path:t||void 0,sub:this.config.token.sub},!0);this.config.resolve(),window.open(n)}else this.setError("projectUrl")}}}),d6={class:"modal__content"},p6={class:"modal__image"},f6={class:"form-entry__info"},m6={class:"modal__button-bar"};const g6=XH(h6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":" Gitea "},{default:Yt((()=>[Jr("div",d6,[Jr("div",p6,[Qr(a,{"provider-id":"gitea"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null," Gitea "),ti("")],-1)),Qr(s,{label:" URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",f6,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/{owner}/{repo} ",1)])])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},"  ",-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",m6,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),v6=cQ({data:()=>({branch:"",path:""}),computedLocalSettings:{projectUrl:"giteaImgStorageRepoUrl"},methods:{async resolve(){const e=UL.parseGiteaProjectPath(this.projectUrl);if(e)try{if((await gj.getRepoInfo(this.config.token,e)).private)return _H.dispatch("notification/error","URL"),void this.setError("projectUrl");const t=this.path&&this.path.replace(/^\//,"");this.config.resolve({repoUri:e,path:t||"imgs/{YYYY}-{MM}-{DD}",branch:this.branch||"master"})}catch(t){_H.dispatch("notification/error",t),this.setError("projectUrl")}else this.setError("projectUrl")}}}),y6={class:"modal__content"},b6={class:"modal__image"},_6={class:"form-entry__info"},w6={class:"modal__button-bar"};const k6=XH(v6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Gitea "},{default:Yt((()=>[Jr("div",y6,[Jr("div",b6,[Qr(a,{"provider-id":"gitea"})]),t[11]||(t[11]=Jr("p",null,[ti(""),Jr("b",null," Gitea "),ti("")],-1)),Qr(s,{label:" URL",error:"projectUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.projectUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.projectUrl,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",_6,[t[8]||(t[8]=Jr("b",null,":",-1)),ti(" "+Z(e.config.token.serverUrl)+"/{owner}/{repo} ",1)])])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text",placeholder:"imgs/{YYYY}-{MM}-{DD}","onUpdate:modelValue":t[2]||(t[2]=t=>e.path=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.path,void 0,{trim:!0}]])])),default:Yt((()=>[t[9]||(t[9]=Jr("div",{class:"form-entry__info"},[ti("  imgs/{YYYY}-{MM}-{DD} "),Jr("br"),ti(" {YYYY}{MM}{DD}{MDNAME} ")],-1))])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.branch=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.branch,void 0,{trim:!0}]])])),default:Yt((()=>[t[10]||(t[10]=Jr("div",{class:"form-entry__info"},[ti(" "),Jr("code",null," master "),ti(" ")],-1))])),_:1})]),Jr("div",w6,[Jr("button",{class:"button",onClick:t[6]||(t[6]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[7]||(t[7]=t=>e.resolve())},"")])])),_:1})}]]),x6=new YN({id:"wordpress",name:"WordPress",getToken:({sub:e})=>_H.getters["data/wordpressTokensBySub"][e],getLocationUrl:({siteId:e,postId:t})=>`https://wordpress.com/post/${e}/${t}`,getLocationDescription:({postId:e})=>e,async publish(e,t,n,r){const i=await WY.uploadPost({...r,...n,token:e,content:t});return{...r,siteId:`${i.site_ID}`,postId:`${i.ID}`}},makeLocation(e,t,n){const r={providerId:this.id,sub:e.sub,domain:t};return n&&(r.postId=n),r}}),C6=cQ({data:()=>({postId:""}),computedLocalSettings:{domain:"wordpressDomain",selectedTemplate:"wordpressPublishTemplate"},methods:{resolve(){if(this.domain){const e=x6.makeLocation(this.config.token,this.domain,this.postId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("domain")}}}),S6={class:"modal__content"},T6={class:"modal__image"},E6=["value"],I6={class:"form-entry__actions"},A6={class:"modal__info"},D6={class:"modal__button-bar"};const B6=XH(C6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"WordPress"},{default:Yt((()=>[Jr("div",S6,[Jr("div",T6,[Qr(a,{"provider-id":"wordpress"})]),Jr("p",null,[t[10]||(t[10]=ti("Publish ")),Jr("b",null,Z(e.currentFileName),1),t[11]||(t[11]=ti(" to your ")),t[12]||(t[12]=Jr("b",null,"WordPress",-1)),t[13]||(t[13]=ti(" site."))]),Qr(s,{label:"",error:"domain"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.domain=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.domain,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" example.wordpress.com"),Jr("br"),Jr("b",null,"Note:"),ti(" Jetpack is required for self-hosted sites. ")],-1))])),_:1}),Qr(s,{label:"ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.postId=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.postId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedTemplate=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,E6)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",I6,[Jr("a",{href:"javascript:void(0)",onClick:t[6]||(t[6]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",A6,[t[15]||(t[15]=Jr("b",null,":",-1)),t[16]||(t[16]=ti(" ")),Jr("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},""),t[17]||(t[17]=ti(" ")),t[18]||(t[18]=Jr("code",null,"title",-1)),t[19]||(t[19]=ti(", ")),t[20]||(t[20]=Jr("code",null,"tags",-1)),t[21]||(t[21]=ti(", ")),t[22]||(t[22]=Jr("code",null,"categories",-1)),t[23]||(t[23]=ti(", ")),t[24]||(t[24]=Jr("code",null,"excerpt",-1)),t[25]||(t[25]=ti(", ")),t[26]||(t[26]=Jr("code",null,"author",-1)),t[27]||(t[27]=ti(", ")),t[28]||(t[28]=Jr("code",null,"featuredImage",-1)),t[29]||(t[29]=ti(", ")),t[30]||(t[30]=Jr("code",null,"status",-1)),t[31]||(t[31]=ti("  ")),t[32]||(t[32]=Jr("code",null,"date",-1)),t[33]||(t[33]=ti(" "))])]),Jr("div",D6,[Jr("button",{class:"button",onClick:t[8]||(t[8]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[9]||(t[9]=t=>e.resolve())},"")])])),_:1})}]]),L6=new YN({id:"blogger",name:"Blogger",getToken({sub:e}){const t=_H.getters["data/googleTokensBySub"][e];return t&&t.isBlogger?t:null},getLocationUrl:({blogId:e,postId:t})=>`https://www.blogger.com/blogger.g?blogID=${e}#editor/target=post;postID=${t}`,getLocationDescription:({postId:e})=>e,async publish(e,t,n,r){const i=await Tj.uploadBlogger({...r,token:e,title:n.title,content:t,labels:n.tags,isDraft:"draft"===n.status,published:n.date});return{...r,blogId:i.blog.id,postId:i.id}},makeLocation(e,t,n){const r={providerId:this.id,sub:e.sub,blogUrl:t};return n&&(r.postId=n),r}}),M6=cQ({data:()=>({postId:""}),computedLocalSettings:{blogUrl:"bloggerBlogUrl",selectedTemplate:"bloggerPublishTemplate"},methods:{resolve(){if(this.blogUrl){const e=L6.makeLocation(this.config.token,this.blogUrl,this.postId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("blogUrl")}}}),F6={class:"modal__content"},O6={class:"modal__image"},P6=["value"],N6={class:"form-entry__actions"},j6={class:"modal__info"},z6={class:"modal__button-bar"};const R6=XH(M6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Blogger"},{default:Yt((()=>[Jr("div",F6,[Jr("div",O6,[Qr(a,{"provider-id":"blogger"})]),Jr("p",null,[t[10]||(t[10]=ti("")),t[11]||(t[11]=Jr("b",null," Blogger ",-1)),t[12]||(t[12]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[13]||(t[13]=ti(""))]),Qr(s,{label:"Blog URL",error:"blogUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.blogUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.blogUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" http://example.blogger.com/ ")],-1))])),_:1}),Qr(s,{label:"ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.postId=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.postId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedTemplate=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,P6)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",N6,[Jr("a",{href:"javascript:void(0)",onClick:t[6]||(t[6]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",j6,[t[15]||(t[15]=Jr("b",null,":",-1)),t[16]||(t[16]=ti(" ")),Jr("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},""),t[17]||(t[17]=ti(" ")),t[18]||(t[18]=Jr("code",null,"title",-1)),t[19]||(t[19]=ti(", ")),t[20]||(t[20]=Jr("code",null,"tags",-1)),t[21]||(t[21]=ti(", ")),t[22]||(t[22]=Jr("code",null,"status",-1)),t[23]||(t[23]=ti("  ")),t[24]||(t[24]=Jr("code",null,"date",-1)),t[25]||(t[25]=ti(" "))])]),Jr("div",z6,[Jr("button",{class:"button",onClick:t[8]||(t[8]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[9]||(t[9]=t=>e.resolve())},"")])])),_:1})}]]),q6=new YN({id:"bloggerPage",name:"Blogger Page",getToken({sub:e}){const t=_H.getters["data/googleTokensBySub"][e];return t&&t.isBlogger?t:null},getLocationUrl:({blogId:e,pageId:t})=>`https://www.blogger.com/blogger.g?blogID=${e}#editor/target=page;pageID=${t}`,getLocationDescription:({pageId:e})=>e,async publish(e,t,n,r){const i=await Tj.uploadBlogger({token:e,blogUrl:r.blogUrl,blogId:r.blogId,postId:r.pageId,title:n.title,content:t,isPage:!0});return{...r,blogId:i.blog.id,pageId:i.id}},makeLocation(e,t,n){const r={providerId:this.id,sub:e.sub,blogUrl:t};return n&&(r.pageId=n),r}}),$6=cQ({data:()=>({pageId:""}),computedLocalSettings:{blogUrl:"bloggerBlogUrl",selectedTemplate:"bloggerPublishTemplate"},methods:{resolve(){if(this.blogUrl){const e=q6.makeLocation(this.config.token,this.blogUrl,this.pageId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("blogUrl")}}}),U6={class:"modal__content"},H6={class:"modal__image"},W6=["value"],G6={class:"form-entry__actions"},V6={class:"modal__info"},Y6={class:"modal__button-bar"};const K6=XH($6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Blogger Page"},{default:Yt((()=>[Jr("div",U6,[Jr("div",H6,[Qr(a,{"provider-id":"bloggerPage"})]),Jr("p",null,[t[10]||(t[10]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[11]||(t[11]=ti("")),t[12]||(t[12]=Jr("b",null," Blogger",-1)),t[13]||(t[13]=ti(""))]),Qr(s,{label:"Blog URL",error:"blogUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.blogUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.blogUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" http://example.blogger.com/ ")],-1))])),_:1}),Qr(s,{label:"ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.pageId=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.pageId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[4]||(t[4]=t=>e.selectedTemplate=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,W6)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",G6,[Jr("a",{href:"javascript:void(0)",onClick:t[6]||(t[6]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",V6,[t[15]||(t[15]=Jr("b",null,":",-1)),t[16]||(t[16]=ti(" ")),Jr("a",{href:"javascript:void(0)",onClick:t[7]||(t[7]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},""),t[17]||(t[17]=ti("")),t[18]||(t[18]=Jr("code",null,"title",-1)),t[19]||(t[19]=ti(" "))])]),Jr("div",Y6,[Jr("button",{class:"button",onClick:t[8]||(t[8]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[9]||(t[9]=t=>e.resolve())},"")])])),_:1})}]]),X6=cQ({data:()=>({redirectUrl:ML.oauth2RedirectUri}),computedLocalSettings:{siteUrl:"zendeskSiteUrl",clientId:"zendeskClientId"},methods:{resolve(){if(this.siteUrl||this.setError("siteUrl"),this.clientId||this.setError("clientId"),this.siteUrl&&this.clientId){const e=this.siteUrl.match(/^https:\/\/([^.]+)\.zendesk\.com/);e?this.config.resolve({subdomain:e[1],clientId:this.clientId}):this.setError("siteUrl")}}}}),Z6={class:"modal__content"},J6={class:"modal__image"},Q6={class:"form-entry__info"},e8={class:"modal__button-bar"};const t8=XH(X6,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Zendesk"},{default:Yt((()=>[Jr("div",Z6,[Jr("div",J6,[Qr(a,{"provider-id":"zendesk"})]),t[10]||(t[10]=Jr("p",null,[ti(""),Jr("b",null,"Zendesk"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Qr(s,{label:"Site URL",error:"siteUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.siteUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.siteUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[6]||(t[6]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://example.zendesk.com/ ")],-1))])),_:1}),Qr(s,{label:"Client Unique Identifier",error:"clientId"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.clientId=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.clientId,void 0,{trim:!0}]])])),default:Yt((()=>[Jr("div",Q6,[t[7]||(t[7]=ti(" url ")),Jr("b",null,Z(e.redirectUrl),1),t[8]||(t[8]=ti("OAuth "))]),t[9]||(t[9]=Jr("div",{class:"form-entry__actions"},[Jr("a",{href:"https://support.zendesk.com/hc/en-us/articles/203663836",target:"_blank"},"")],-1))])),_:1})]),Jr("div",e8,[Jr("button",{class:"button",onClick:t[4]||(t[4]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=t=>e.resolve())},"")])])),_:1})}]]),n8=new YN({id:"zendesk",name:"Zendesk",getToken:({sub:e})=>_H.getters["data/zendeskTokensBySub"][e],getLocationUrl({sub:e,locale:t,articleId:n}){return`https://${this.getToken({sub:e}).subdomain}.zendesk.com/hc/${t}/articles/${n}`},getLocationDescription:({articleId:e})=>e,async publish(e,t,n,r){const i=await VY.uploadArticle({...r,token:e,title:n.title,content:t,labels:n.tags,isDraft:"draft"===n.status});return{...r,articleId:i}},makeLocation(e,t,n,r){const i={providerId:this.id,sub:e.sub,sectionId:t,locale:n};return r&&(i.articleId=r),i}}),r8=cQ({data:()=>({articleId:""}),computedLocalSettings:{sectionId:"zendescPublishSectionId",locale:"zendescPublishLocale",selectedTemplate:"zendeskPublishTemplate"},methods:{resolve(){if(this.sectionId||this.articleId){const e=n8.makeLocation(this.config.token,this.sectionId,this.locale||"en-us",this.articleId);e.templateId=this.selectedTemplate,this.config.resolve(e)}else this.setError("sectionId")}}}),i8={class:"modal__content"},o8={class:"modal__image"},a8=["value"],s8={class:"form-entry__actions"},l8={class:"modal__info"},c8={class:"modal__button-bar"};const u8=XH(r8,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"Zendesk"},{default:Yt((()=>[Jr("div",i8,[Jr("div",o8,[Qr(a,{"provider-id":"zendesk"})]),Jr("p",null,[t[12]||(t[12]=ti("")),t[13]||(t[13]=Jr("b",null,"Zendesk",-1)),t[14]||(t[14]=ti("")),Jr("b",null,Z(e.CurrentFileName),1),t[15]||(t[15]=ti(""))]),Qr(s,{label:"Section ID",error:"sectionId"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.sectionId=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.sectionId,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"},[ti(" https://example.zendesk.com/hc/en-us/sections/"),Jr("b",null,"21857469"),ti("-Section-name ")],-1))])),_:1}),Qr(s,{label:"ID",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.articleId=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.articleId,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"",info:""},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.locale=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.locale,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" en-us ")],-1))])),_:1}),Qr(s,{label:""},{field:Yt((()=>[Kt(Jr("select",{class:"textfield","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedTemplate=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},[($r(!0),Gr(Pr,null,En(e.allTemplatesById,((e,t)=>($r(),Gr("option",{key:t,value:t},Z(e.name),9,a8)))),128))],544),[[ao,e.selectedTemplate]])])),default:Yt((()=>[Jr("div",s8,[Jr("a",{href:"javascript:void(0)",onClick:t[8]||(t[8]=(...t)=>e.configureTemplates&&e.configureTemplates(...t))},"")])])),_:1}),Jr("div",l8,[t[18]||(t[18]=Jr("b",null,":",-1)),t[19]||(t[19]=ti(" ")),Jr("a",{href:"javascript:void(0)",onClick:t[9]||(t[9]=(...t)=>e.openFileProperties&&e.openFileProperties(...t))},""),t[20]||(t[20]=ti(" ")),t[21]||(t[21]=Jr("code",null,"title",-1)),t[22]||(t[22]=ti(", ")),t[23]||(t[23]=Jr("code",null,"tags",-1)),t[24]||(t[24]=ti("  ")),t[25]||(t[25]=Jr("code",null,"status",-1)),t[26]||(t[26]=ti(" "))])]),Jr("div",c8,[Jr("button",{class:"button",onClick:t[10]||(t[10]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[11]||(t[11]=t=>e.resolve())},"")])])),_:1})}]]),h8=cQ({data:()=>({dbUrl:""}),methods:{resolve(){if(this.dbUrl){const e=UL.addQueryParams("app",{providerId:"couchdbWorkspace",dbUrl:this.dbUrl},!0);this.config.resolve(),window.open(e)}else this.setError("dbUrl")}}}),d8={class:"modal__content"},p8={class:"modal__image"},f8={class:"modal__button-bar"};const m8=XH(h8,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"CouchDB"},{default:Yt((()=>[Jr("div",d8,[Jr("div",p8,[Qr(a,{"provider-id":"couchdb"})]),t[6]||(t[6]=Jr("p",null,[ti(""),Jr("b",null,"CouchDB"),ti("")],-1)),Qr(s,{label:"Database URL",error:"dbUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.dbUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.dbUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[4]||(t[4]=Jr("div",{class:"form-entry__info"},[Jr("b",null,":"),ti(" https://instance.smileupps.com/stackedit-workspace ")],-1)),t[5]||(t[5]=Jr("div",{class:"form-entry__actions"},[Jr("a",{href:"#",target:"_blank"},"")],-1))])),_:1})]),Jr("div",f8,[Jr("button",{class:"button",onClick:t[2]||(t[2]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[3]||(t[3]=t=>e.resolve())},"")])])),_:1})}]]),g8=cQ({data:()=>({name:"",password:""}),created(){this.name=this.config.token.name,this.password=this.config.token.password},methods:{resolve(){if(this.name||this.setError("name"),this.password||this.setError("password"),this.name&&this.password){const e={...this.config.token,name:this.name,password:this.password};_H.dispatch("data/addCouchdbToken",e),this.config.resolve()}}}}),v8={class:"modal__content"},y8={class:"modal__image"},b8={class:"modal__button-bar"};const _8=XH(g8,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":""},{default:Yt((()=>[Jr("div",v8,[Jr("div",y8,[Qr(a,{"provider-id":"couchdb"})]),t[6]||(t[6]=Jr("p",null,[ti(""),Jr("b",null,"CouchDB"),ti("")],-1)),Qr(s,{label:"",error:"name"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.name,void 0,{trim:!0}]])])),_:1}),Qr(s,{label:"",error:"password"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"password","onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.password,void 0,{trim:!0}]])])),_:1})]),Jr("div",b8,[Jr("button",{class:"button",onClick:t[4]||(t[4]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=t=>e.resolve())},"")])])),_:1})}]]),w8=cQ({computedLocalSettings:{proxyUrl:"proxyUrl",apiSecretToken:"apiSecretToken"},methods:{resolve(){this.proxyUrl||this.setError("proxyUrl"),this.apiSecretToken||this.setError("apiSecretToken"),this.proxyUrl&&this.apiSecretToken&&this.config.resolve({proxyUrl:this.proxyUrl,apiSecretToken:this.apiSecretToken})}}}),k8={class:"modal__content"},x8={class:"modal__image"},C8={class:"modal__button-bar"};const S8=XH(w8,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":"SM.MS"},{default:Yt((()=>[Jr("div",k8,[Jr("div",x8,[Qr(a,{"provider-id":"smms"})]),t[8]||(t[8]=Jr("p",null,[ti(""),Jr("b",null,"SM.MS"),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Qr(s,{label:"URL",error:"proxyUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.proxyUrl=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.proxyUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[6]||(t[6]=Jr("div",{class:"form-entry__info"}," URL(SM.MS)https://cors.zme.ink/  https://cors.eu.org/ ",-1))])),_:1}),Qr(s,{label:"Api Secret Token",error:"apiSecretToken"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.apiSecretToken=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.apiSecretToken,void 0,{trim:!0}]])])),default:Yt((()=>[t[7]||(t[7]=Jr("div",{class:"form-entry__info"},[ti("  "),Jr("a",{href:"https://sm.ms/home/apitoken",target:"_blank"},"SM.MS"),ti(" Api Secret Token. ")],-1))])),_:1})]),Jr("div",C8,[Jr("button",{class:"button",onClick:t[4]||(t[4]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[5]||(t[5]=t=>e.resolve())},"")])])),_:1})}]]),T8=cQ({computedLocalSettings:{name:"name",uploadUrl:"uploadUrl",fileParamName:"fileParamName",customHeaders:"customHeaders",customParams:"customParams",resultUrlParam:"resultUrlParam"},methods:{resolve(){this.name||this.setError("name"),this.uploadUrl||this.setError("uploadUrl"),this.fileParamName||this.setError("fileParamName"),this.resultUrlParam||this.setError("resultUrlParam");let e=null;if(this.customHeaders)try{e=JSON.parse(this.customHeaders)}catch(n){return void this.setError("customHeaders")}let t=null;if(this.customParams)try{t=JSON.parse(this.customParams)}catch(n){return void this.setError("customParams")}this.uploadUrl&&this.fileParamName&&this.config.resolve({name:this.name,uploadUrl:this.uploadUrl,fileParamName:this.fileParamName,resultUrlParam:this.resultUrlParam,customHeaders:e,customParams:t})}}}),E8={class:"modal__content"},I8={class:"modal__image"},A8={class:"modal__button-bar"};const D8=e=>e.querySelectorAll("a[href], button, .textfield, input[type=checkbox]").cl_filter((e=>!e.disabled&&null!==e.offsetParent&&!e.classList.contains("not-tabbable"))),B8={components:{ModalInner:uJ,FilePropertiesModal:IJ,SettingsModal:zJ,TemplatesModal:tQ,AboutModal:sQ,HtmlExportModal:mQ,PdfExportModal:wQ,PandocExportModal:SQ,LinkModal:AQ,ImageModal:WQ,SyncManagementModal:l0,PublishManagementModal:A0,WorkspaceManagementModal:J0,AccountManagementModal:g1,BadgeManagementModal:I1,SponsorModal:O1,CommitMessageModal:q1,WorkspaceImgPathModal:G1,ChatGptModal:o2,ChatGptConfigModal:u2,
// Providers
GooglePhotoModal:m2,GoogleDriveAccountModal:k2,GoogleDriveSaveModal:I2,GoogleDriveWorkspaceModal:F2,GoogleDrivePublishModal:G2,DropboxAccountModal:Q2,DropboxSaveModal:o4,DropboxPublishModal:p4,GithubAccountModal:_4,GithubOpenModal:S4,GithubSaveModal:D4,GithubWorkspaceModal:O4,GithubPublishModal:$4,GithubImgStorageModal:V4,GistSyncModal:e3,GistPublishModal:u3,GiteeAccountModal:m3,GiteeOpenModal:_3,GiteeSaveModal:S3,GiteeWorkspaceModal:D3,GiteePublishModal:N3,GiteeGistSyncModal:H3,GiteeGistPublishModal:e5,GitlabAccountModal:c5,GitlabOpenModal:m5,GitlabPublishModal:x5,GitlabSaveModal:A5,GitlabWorkspaceModal:O5,GiteaAccountModal:H5,GiteaOpenModal:X5,GiteaPublishModal:i6,GiteaSaveModal:u6,GiteaWorkspaceModal:g6,GiteaImgStorageModal:k6,WordpressPublishModal:B6,BloggerPublishModal:R6,BloggerPagePublishModal:K6,ZendeskAccountModal:t8,ZendeskPublishModal:u8,CouchdbWorkspaceModal:m8,CouchdbCredentialsModal:_8,SmmsAccountModal:S8,CustomAccountModal:XH(T8,[["render",function(e,t,n,r,i,o){const a=wn("icon-provider"),s=wn("form-entry"),l=wn("modal-inner");return $r(),Vr(l,{"aria-label":""},{default:Yt((()=>[Jr("div",E8,[Jr("div",I8,[Qr(a,{"provider-id":"custom"})]),t[20]||(t[20]=Jr("p",null,[ti(""),Jr("b",null,""),ti(""),Jr("b",null,"StackEdit"),ti("")],-1)),Qr(s,{label:"",error:"name"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),onKeydown:t[1]||(t[1]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.name,void 0,{trim:!0}]])])),default:Yt((()=>[t[14]||(t[14]=Jr("div",{class:"form-entry__info"},"  ",-1))])),_:1}),Qr(s,{label:"",error:"uploadUrl"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[2]||(t[2]=t=>e.uploadUrl=t),onKeydown:t[3]||(t[3]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.uploadUrl,void 0,{trim:!0}]])])),default:Yt((()=>[t[15]||(t[15]=Jr("div",{class:"form-entry__info"}," POST ",-1))])),_:1}),Qr(s,{label:"",error:"fileParamName"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.fileParamName=t),onKeydown:t[5]||(t[5]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.fileParamName,void 0,{trim:!0}]])])),default:Yt((()=>[t[16]||(t[16]=Jr("div",{class:"form-entry__info"}," file ",-1))])),_:1}),Qr(s,{label:"",error:"customHeaders"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[6]||(t[6]=t=>e.customHeaders=t),onKeydown:t[7]||(t[7]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.customHeaders,void 0,{trim:!0}]])])),default:Yt((()=>[t[17]||(t[17]=Jr("div",{class:"form-entry__info"},' JSON{"token": "..."} ',-1))])),_:1}),Qr(s,{label:"FORM",error:"customParams"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.customParams=t),onKeydown:t[9]||(t[9]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.customParams,void 0,{trim:!0}]])])),default:Yt((()=>[t[18]||(t[18]=Jr("div",{class:"form-entry__info"},' FORMJSON{"param1": "..."} ',-1))])),_:1}),Qr(s,{label:"URL",error:"resultUrlParam"},{field:Yt((()=>[Kt(Jr("input",{class:"textfield",type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.resultUrlParam=t),onKeydown:t[11]||(t[11]=mo((t=>e.resolve()),["enter"]))},null,544),[[no,e.resultUrlParam,void 0,{trim:!0}]])])),default:Yt((()=>[t[19]||(t[19]=Jr("div",{class:"form-entry__info"}," JSONURL data.url ",-1))])),_:1})]),Jr("div",A8,[Jr("button",{class:"button",onClick:t[12]||(t[12]=t=>e.config.reject())},""),Jr("button",{class:"button button--resolve",onClick:t[13]||(t[13]=t=>e.resolve())},"")])])),_:1})}]])},computed:{...BM(["isSponsor"]),...BM("modal",["config"]),currentModalComponent(){if(this.config.type){let e=this.config.type[0].toUpperCase();if(e+=this.config.type.slice(1),e+="Modal",this.$options.components[e])return e}return null},simpleModal(){return aJ[this.config.type]||{}}},methods:{async sponsor(){try{_H.getters["workspace/sponsorToken"]||(await _H.dispatch("modal/open","signInForSponsorship"),await EO.signin(),await BU.afterSignIn(),BU.requestSync()),_H.getters.isSponsor||await _H.dispatch("modal/open","sponsor")}catch(i7){}},onEscape(){this.config.reject(),iU.clEditor.focus()},onTab(e){const t=D8(this.$refs.root),n=t[0],r=t[t.length-1];e.shiftKey&&n===e.target?(e.preventDefault(),r.focus()):e.shiftKey||r!==e.target||(e.preventDefault(),n.focus())},onFocusInOut(e){const{parentNode:t}=e.target;t&&t.parentNode&&t.classList.contains("form-entry__field")&&t.parentNode.classList.contains("form-entry")&&t.parentNode.classList.toggle("form-entry--focused","focusin"===e.type)}},mounted(){this.$watch((()=>this.config),(e=>{e&&this.$nextTick((()=>{const e=D8(this.$refs.root);e[0]&&e[0].focus()}))}),{immediate:!0})}},L8=["innerHTML"],M8={class:"modal__button-bar"},F8=["onClick"];const O8=XH(B8,[["render",function(e,t,n,r,i,o){const a=wn("modal-inner");return e.config?($r(),Gr("div",{key:0,ref:"root",class:"modal",onKeydown:[t[2]||(t[2]=mo(po(((...e)=>o.onEscape&&o.onEscape(...e)),["stop"]),["esc"])),t[3]||(t[3]=mo(((...e)=>o.onTab&&o.onTab(...e)),["tab"]))],onFocusin:t[4]||(t[4]=(...e)=>o.onFocusInOut&&o.onFocusInOut(...e)),onFocusout:t[5]||(t[5]=(...e)=>o.onFocusInOut&&o.onFocusInOut(...e))},[o.currentModalComponent?($r(),Vr(xn(o.currentModalComponent),{key:0})):($r(),Vr(a,{key:1,"aria-label":"Dialog"},{default:Yt((()=>[Jr("div",{class:"modal__content",innerHTML:o.simpleModal.contentHtml(e.config)},null,8,L8),Jr("div",M8,[o.simpleModal.rejectText?($r(),Gr("button",{key:0,class:"button",onClick:t[0]||(t[0]=t=>e.config.reject())},Z(o.simpleModal.rejectText),1)):ri("",!0),o.simpleModal.resolveText?($r(),Gr("button",{key:1,class:"button button--resolve",onClick:t[1]||(t[1]=t=>e.config.resolve())},Z(o.simpleModal.resolveText),1)):ri("",!0),($r(!0),Gr(Pr,null,En(o.simpleModal.resolveArray||[],((t,n)=>($r(),Gr("button",{class:"button button--resolve",onClick:n=>e.config.resolve(t.value)},Z(t.text),9,F8)))),256))])])),_:1}))],544)):ri("",!0)}]]),P8={computed:AM("notification",["items"])},N8={class:"notification"},j8={class:"notification__icon flex flex--column flex--center"},z8={class:"notification__content"},R8=["onClick"],q8=["onClick"];const $8=XH(P8,[["render",function(e,t,n,r,i,o){const a=wn("icon-alert"),s=wn("icon-check-circle"),l=wn("icon-information");return $r(),Gr("div",N8,[($r(!0),Gr(Pr,null,En(e.items,((e,t)=>($r(),Gr("div",{class:"notification__item flex flex--row flex--align-center",key:t},[Jr("div",j8,["error"===e.type?($r(),Vr(a,{key:0})):"badge"===e.type?($r(),Vr(s,{key:1})):($r(),Vr(l,{key:2}))]),Jr("div",z8,Z(e.content),1),"confirm"===e.type?($r(),Gr("button",{key:0,class:"notification__button button",onClick:e.reject},"  ",8,R8)):ri("",!0),"confirm"===e.type?($r(),Gr("button",{key:1,class:"notification__button button",onClick:e.resolve},"  ",8,q8)):ri("",!0)])))),128))])}]]),U8={computed:{...AM("contextMenu",["coordinates","items","resolve"])},methods:{close(e=null){this.resolve(e),_H.dispatch("contextMenu/close")}}},H8={key:0,class:"context-menu__separator"},W8={key:1,class:"context-menu__item context-menu__item--disabled"},G8=["onClick"];const V8={class:"splash-screen"};const Y8={light:["app--light"],dark:["app--dark"]};const K8=XH({components:{Layout:iJ,Modal:O8,Notification:$8,ContextMenu:XH(U8,[["render",function(e,t,n,r,i,o){return e.items.length?($r(),Gr("div",{key:0,class:"context-menu",onClick:t[1]||(t[1]=e=>o.close()),onContextmenu:t[2]||(t[2]=po((e=>o.close()),["prevent"]))},[Jr("div",{class:"context-menu__inner flex flex--column",style:R({left:e.coordinates.left+"px",top:e.coordinates.top+"px"}),onClick:t[0]||(t[0]=po((()=>{}),["stop"]))},[($r(!0),Gr(Pr,null,En(e.items,((e,t)=>($r(),Gr("div",{key:t},["separator"===e.type?($r(),Gr("div",H8)):e.disabled?($r(),Gr("div",W8,Z(e.name),1)):($r(),Gr("a",{key:2,class:"context-menu__item",href:"javascript:void(0)",onClick:t=>o.close(e)},Z(e.name),9,G8))])))),128))],4)],32)):ri("",!0)}]]),SplashScreen:XH({},[["render",function(e,t){return $r(),Gr("div",V8,t[0]||(t[0]=[Jr("div",{class:"splash-screen__inner logo-background"},null,-1)]))}]])},data:()=>({ready:!1}),computed:{classes(){const e=Y8[_H.getters["data/computedSettings"].colorTheme];return Array.isArray(e)?e:Y8.light}},methods:{close(){hU.close()},
//  
viewFileByPath(e){if(!e)return;const t=_H.getters["explorer/selectedNodeFolder"];if(".md"===e.slice(-3)){const n=_H.getters["explorer/rootNode"],r=UL.findNodeByPath(n,t,e);if(!r)return;_H.commit("explorer/setSelectedId",r.item.id),setTimeout((()=>{_H.commit("file/setCurrentId",r.item.id)}),10)}else{const n=_H.getters["workspace/currentWorkspace"],r=GN.providersById[n.providerId];if(null==r)return;const i=UL.getAbsoluteFilePath(t,e),o=r.getFilePathUrl(i);o&&window.open(o,"_blank")}}},async created(){window.viewFileByPath=this.viewFileByPath;try{await BU.init(),await dO.init();const e=localStorage.getItem("theme/currEditTheme");_H.dispatch("theme/setEditTheme",e||"default");const t=localStorage.getItem("theme/currPreviewTheme");_H.dispatch("theme/setPreviewTheme",t||"default"),this.ready=!0,hU.setReady()}catch(e){e&&"RELOAD"===e.message?window.location.reload():e&&"RELOAD"!==e.message&&_H.dispatch("notification/error",e)}}},[["render",function(e,t,n,r,i,o){const a=wn("splash-screen"),s=wn("layout"),l=wn("modal"),c=wn("notification"),u=wn("context-menu");return $r(),Gr("div",{class:W(["app",o.classes]),onKeydown:t[0]||(t[0]=mo(((...e)=>o.close&&o.close(...e)),["esc"]))},[e.ready?($r(),Vr(s,{key:1})):($r(),Vr(a,{key:0})),Qr(l),Qr(c),Qr(u)],34)}]]),X8=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z8=["January","February","March","April","May","June","July","August","September","October","November","December"],J8=e=>`0${e}`.slice(-2);function Q8(e,t){const n=e.getDay(),r=e.getDate(),i=e.getMonth(),o=e.getFullYear(),a=e.getHours(),s=e.getMinutes(),l=e.getSeconds();return t.replace(/%([%aAbBcdeHIlmMpPSwyYZz])/g,(t=>{let c;switch(t[1]){case"%":default:return"%";case"a":return X8[n].slice(0,3);case"A":return X8[n];case"b":return Z8[i].slice(0,3);case"B":return Z8[i];case"c":return e.toString();case"d":return J8(r);case"e":return r;case"H":return J8(a);case"I":return J8(Q8(e,"%l"));case"l":return 0===a||12===a?12:(a+12)%12;case"m":return J8(i+1);case"M":return J8(s);case"p":return a>11?"PM":"AM";case"P":return a>11?"pm":"am";case"S":return J8(l);case"w":return n;case"y":return J8(o%100);case"Y":return o;case"Z":return c=e.toString().match(/\((\w+)\)$/),c?c[1]:"";case"z":return c=e.toString().match(/\w([+-]\d\d\d\d) /),c?c[1]:""}}))}class e7{constructor(e){this.date=e}toString(){return this.timeElapsed()||`${this.formatDate()}`}timeElapsed(){const e=(new Date).getTime()-this.date.getTime(),t=Math.round(e/1e3),n=Math.round(t/60),r=Math.round(n/60),i=Math.round(r/24);return e<0||t<45?"":t<90?"1":n<45?`${n}`:n<90?"1":r<24?`${r}`:r<36?"1":i<30?`${i}`:null}formatDate(){return Q8(this.date,"%Y-%m-%d")}}const t7={format:e=>e&&new e7(new Date(e)).toString()};if(!indexedDB)throw new Error("");!function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e;let s,l;l=async function(){if("serviceWorker"in navigator){if(s=await xo((async()=>{const{Workbox:e}=await import("./js/workbox-window.prod.es5.p40uij6f.js");return{Workbox:e}}),[],import.meta.url).then((({Workbox:e})=>new e("./sw.js",{scope:"./",type:"classic"}))).catch((e=>{null==a||a(e)})),!s)return;s.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),s.addEventListener("installed",(e=>{e.isUpdate||null==r||r()})),s.register({immediate:t}).then((e=>{o?o("./sw.js",e):null==i||i(e)})).catch((e=>{null==a||a(e)}))}}()}({onRegistered:e=>{e&&e.addEventListener("fetch",(e=>{new URL(e.request.url).pathname.startsWith("/app")&&e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request))))}))},onOfflineReady:()=>{},onNeedRefresh:async()=>{_H.state.light||(await NN.sync(),localStorage.updated=!0,window.location.reload())}}),localStorage.updated&&(_H.dispatch("notification/info","StackEdit"),setTimeout((()=>localStorage.removeItem("updated")),3e3)),localStorage.installPrompted||window.addEventListener("beforeinstallprompt",(async e=>{e.preventDefault();try{await _H.dispatch("notification/confirm","StackEdit"),e.prompt(),await e.userChoice}catch(t){}localStorage.installPrompted=!0}));const n7=((...e)=>{const t=(vo||(vo=mr(go))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(y(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;v(i)||i.render||i.template||(i.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const o=n(r,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t})(K8);n7.directive("focus",{inserted(e){e.focus();const{value:t}=e;t&&e.setSelectionRange&&e.setSelectionRange(0,t.length)}});const r7=(e,t)=>{e.title=t,e.setAttribute("aria-label",t)};n7.directive("title",{bind(e,{value:t}){r7(e,t)},update(e,{value:t,oldValue:n}){t!==n&&r7(e,t)}}),n7.directive("clipboard",{mounted(e,{value:t}){e.addEventListener("click",(()=>{navigator.clipboard.writeText(t).then((()=>{})).catch((e=>{}))}))},updated(e,{value:t}){e.value=t}}),n7.config.globalProperties.$filters={formatTime:e=>t7.format(e,_H.state.timeCounter)};for(const o7 in cG)n7.component(o7,cG[o7]);n7.use(_H).mount("#app");export{nb as $,bk as A,KT as B,rI as C,nI as D,ZE as E,T_ as F,HS as G,hI as H,jT as I,Py as J,my as K,gy as L,vy as M,eb as N,Jy as O,bo as P,Vg as Q,jy as R,dy as S,gI as T,v_ as U,YT as V,VT as W,fT as X,aT as Y,aE as Z,Xy as _,tI as a,hx as a$,tb as a0,ob as a1,My as a2,XS as a3,ZS as a4,ET as a5,NT as a6,jk as a7,SC as a8,wC as a9,f_ as aA,p_ as aB,h_ as aC,s_ as aD,l_ as aE,b_ as aF,u_ as aG,y_ as aH,ak as aI,vk as aJ,Lx as aK,Nk as aL,Dk as aM,pC as aN,mS as aO,ux as aP,Nx as aQ,cC as aR,Ix as aS,kx as aT,xx as aU,DS as aV,rC as aW,Cx as aX,Wx as aY,_x as aZ,Bx as a_,TC as aa,EC as ab,gC as ac,rx as ad,Rx as ae,jx as af,mx as ag,px as ah,bC as ai,hC as aj,lC as ak,Qx as al,kC as am,AC as an,PS as ao,yo as ap,OO as aq,cI as ar,wk as as,xk as at,Ck as au,iI as av,m_ as aw,c_ as ax,d_ as ay,g_ as az,QE as b,cx as b0,wx as b1,oC as b2,zx as b3,yS as b4,qx as b5,LS as b6,XT as b7,Ug as b8,JE as c,fy as d,UE as e,TT as f,sI as g,UT as h,RS as i,Xg as j,QS as k,FS as l,$T as m,w_ as n,HE as o,OT as p,BT as q,US as r,eI as s,JS as t,lI as u,hy as v,RT as w,uv as x,Zx as y,zk as z};
